import {
  Comment,
  Fragment,
  Teleport,
  Text,
  Transition,
  cloneVNode,
  computed2 as computed,
  createBaseVNode,
  createBlock,
  createCommentVNode,
  createElementBlock,
  createSlots,
  createTextVNode,
  createVNode,
  defineComponent,
  getCurrentInstance,
  getCurrentScope,
  guardReactiveProps,
  h,
  inject,
  isRef,
  isVNode,
  mergeProps,
  nextTick,
  normalizeClass,
  normalizeProps,
  normalizeStyle,
  onBeforeMount,
  onBeforeUnmount,
  onBeforeUpdate,
  onDeactivated,
  onMounted,
  onScopeDispose,
  onUnmounted,
  onUpdated,
  openBlock,
  provide,
  reactive,
  readonly,
  ref,
  render,
  renderList,
  renderSlot,
  resolveComponent,
  resolveDirective,
  resolveDynamicComponent,
  shallowRef,
  toDisplayString,
  toRaw,
  toRef,
  toRefs,
  triggerRef,
  unref,
  useAttrs,
  useSlots,
  vModelText,
  vShow,
  warn,
  watch,
  watchEffect,
  withCtx,
  withDirectives,
  withKeys,
  withModifiers
} from "./chunk-XCLPDKHW.js";
import "./chunk-TWLJ45QX.js";

// node_modules/hyena-design-system/dist/index.js
var Icons = ((Icons2) => {
  Icons2["ACCOUNT_CIRCLE_FILLED"] = "icon-account_circle_filled";
  Icons2["ADD"] = "icon-add";
  Icons2["ADD_CIRCLE"] = "icon-add_circle";
  Icons2["ADD_CIRCLE_FILLED"] = "icon-add_circle_filled";
  Icons2["APP_SHORTCUTE_FILLED"] = "icon-app_shortcute_filled";
  Icons2["APPLE_FILLED"] = "icon-apple_filled";
  Icons2["ARROW_BACK"] = "icon-arrow_back";
  Icons2["ARROW_DROPDOWN"] = "icon-arrow_drop_down";
  Icons2["ARROW_DROPUP"] = "icon-arrow_drop_up";
  Icons2["ARROW_FORWARD"] = "icon-arrow_forward";
  Icons2["ARROW_LEFT"] = "icon-arrow_left";
  Icons2["ARROW_RIGHT"] = "icon-arrow_right";
  Icons2["ATTACH_FILE"] = "icon-attach_file";
  Icons2["BIKE_CONNECTED_FILLED"] = "icon-bike_connected_filled";
  Icons2["BLUETOOTH_CIRCLE_FILLED"] = "icon-bluetooth_circle_filled";
  Icons2["BLUETOOTH_CONNECTED_CIRCLE_FILLED"] = "icon-bluetooth_connected_circle_filled";
  Icons2["BLUETOOTH_CONNECTED_FILLED"] = "icon-bluetooth_connected_filled";
  Icons2["BLUETOOTH_DISABLED_FILLED"] = "icon-bluetooth_disabled_filled";
  Icons2["BLUETOOTH_FILLED"] = "icon-bluetooth_filled";
  Icons2["BLUETOOTH_SEARCHING_FILLED"] = "icon-bluetooth_searching_filled";
  Icons2["BOOKMARK"] = "icon-bookmark-1";
  Icons2["BOOKMARK_FILLED"] = "icon-bookmark";
  Icons2["C_RU_US_FILLED"] = "icon-C-RU-US_filled";
  Icons2["CALENDAR"] = "icon-calendar_month";
  Icons2["CAMERA"] = "icon-camera";
  Icons2["CAMERA_FILLED"] = "icon-camera_filled";
  Icons2["CANCEL"] = "icon-cancel";
  Icons2["CE_FILLED"] = "icon-CE_filled";
  Icons2["CHECK"] = "icon-check";
  Icons2["CHECKBOX"] = "icon-check_box";
  Icons2["CHECKBOX_BLANK"] = "icon-check_box_blank";
  Icons2["CHECKBOX_BLANK_FILLED"] = "icon-check_box_blank_filled";
  Icons2["CHECKBOX_INDETERMINATE"] = "icon-indeterminate_check_box";
  Icons2["CHECK_CIRCLE"] = "icon-check_circle";
  Icons2["CHECK_CIRCLE_FILLED"] = "icon-check_circle_filled";
  Icons2["CIRCLE"] = "icon-circle";
  Icons2["CIRCLE_FILLED"] = "icon-circle_filled";
  Icons2["CLICK"] = "icon-click";
  Icons2["CLOSE"] = "icon-close";
  Icons2["COMPASS_CIRCLE"] = "icon-compass_circle";
  Icons2["COMPUTER"] = "icon-computer";
  Icons2["CONNECT_FILLED"] = "icon-connect_filled";
  Icons2["CONSOLE"] = "icon-console";
  Icons2["DASHBOARD"] = "icon-dashboard";
  Icons2["DASHBOARD_FILLED"] = "icon-dashboard_filled";
  Icons2["DELETE"] = "icon-delete";
  Icons2["DISCONNECT_FILLED"] = "icon-disconnect_filled";
  Icons2["DISTANCE"] = "icon-distance";
  Icons2["ERROR"] = "icon-error";
  Icons2["ERROR_FILLED"] = "icon-error_filled";
  Icons2["EXPLORE_CIRCLE_FILLED"] = "icon-explore_circle_filled";
  Icons2["EXPLORE_FILLED"] = "icon-explore_filled";
  Icons2["FACEBOOK_FILLED"] = "icon-facebook_filled";
  Icons2["FAVORITE"] = "icon-favorite";
  Icons2["FAVORITE_FILLED"] = "icon-favorite_filled";
  Icons2["FILE"] = "icon-file";
  Icons2["FILE_IMPORT_TEMPLATE"] = "icon-file-import-template";
  Icons2["FILE_SAVE_AS_TEMPLATE"] = "icon-file-save-as-template";
  Icons2["FILE_DOWNLOAD"] = "icon-file_download";
  Icons2["FILE_FILLED"] = "icon-file_filled";
  Icons2["FILE_MULTIPLE"] = "icon-file_multiple";
  Icons2["FILE_OPEN"] = "icon-file_open";
  Icons2["FILE_UPLOAD"] = "icon-file_upload";
  Icons2["FILTER"] = "icon-filter";
  Icons2["FILTER_FILLED"] = "icon-filter_filled";
  Icons2["GOOGLE_FILLED"] = "icon-google_filled";
  Icons2["HELP"] = "icon-help";
  Icons2["HEXAGON"] = "icon-hexagon";
  Icons2["HEXAGON_FILLED"] = "icon-hexagon_filled";
  Icons2["HISTORY_FILLED"] = "icon-history_filled";
  Icons2["HOME"] = "icon-home-1";
  Icons2["HOME_FILLED"] = "icon-home";
  Icons2["INFO"] = "icon-info";
  Icons2["INFO_FILLED"] = "icon-info_filled";
  Icons2["INSTALL_FILLED"] = "icon-install_filled";
  Icons2["IPHONE"] = "icon-iphone";
  Icons2["LANGUAGE"] = "icon-language_filled";
  Icons2["LANG"] = "icon-language";
  Icons2["LEVEL"] = "icon-level";
  Icons2["LOCATION"] = "icon-location";
  Icons2["LOCATION_FILLED"] = "icon-location_on_filled";
  Icons2["LOGOUT"] = "icon-logout_filled";
  Icons2["MAIL"] = "icon-mail_outline";
  Icons2["MENU"] = "icon-menu";
  Icons2["MIC_FILLED"] = "icon-mic_filled";
  Icons2["MIC_OFF"] = "icon-mic_off";
  Icons2["EDIT"] = "icon-mode_edit";
  Icons2["MORE"] = "icon-more_vert";
  Icons2["MULTIPLE_LIST"] = "icon-multiple-list";
  Icons2["NAVIGATE"] = "icon-navigate";
  Icons2["NAVIGATE_BEFORE"] = "icon-navigate_before";
  Icons2["NAVIGATE_DOWN"] = "icon-navigate_down";
  Icons2["NAVIGATE_NEXT"] = "icon-navigate_next";
  Icons2["NAVIGATE_UP"] = "icon-navigate_up";
  Icons2["NEAR_ME"] = "icon-near_me";
  Icons2["NEAR_ME_FILLED"] = "icon-near_me_on_filled";
  Icons2["NOTIFICATIONS"] = "icon-notifications";
  Icons2["NOTIFICATIONS_FILLED"] = "icon-notifications_filled";
  Icons2["NUMBER_CIRCLE"] = "icon-number_circle";
  Icons2["ODO_FILLED"] = "icon-ODO_filled";
  Icons2["OPEN_IN_FULL"] = "icon-open_in_full";
  Icons2["ORDER"] = "icon-order";
  Icons2["PARTS_3BC"] = "icon-parts-3bc";
  Icons2["PARTS_ISHIFT_DERAILLEUR"] = "icon-parts-iShift_derailleur";
  Icons2["PARTS_ITIRE"] = "icon-parts-itire";
  Icons2["PANORAMA"] = "icon-panorama";
  Icons2["PANORAMA_FILLED"] = "icon-panorama_filled";
  Icons2["PARTS_BATTERY_0"] = "icon-parts_battery_0";
  Icons2["PARTS_BATTERY_20"] = "icon-parts_battery_20";
  Icons2["PARTS_BATTERY_40"] = "icon-parts_battery_40";
  Icons2["PARTS_BATTERY_60"] = "icon-parts_battery_60";
  Icons2["PARTS_BATTERY_80"] = "icon-parts_battery_80";
  Icons2["PARTS_BATTERY_ALERT"] = "icon-parts_battery_alert";
  Icons2["PARTS_BATTERY_CHARGING"] = "icon-parts_battery_charging";
  Icons2["PARTS_BATTERY_FULL"] = "icon-parts_battery_full";
  Icons2["PARTS_CABLE"] = "icon-parts_cable";
  Icons2["PARTS_CADENCE"] = "icon-parts_cadence";
  Icons2["PARTS_CHARGER"] = "icon-parts_charger";
  Icons2["PARTS_CONTROLLER"] = "icon-parts_controller";
  Icons2["PARTS_DEFAULT"] = "icon-parts_default";
  Icons2["PARTS_DONGLE"] = "icon-parts_dongle";
  Icons2["PARTS_IDRIVE"] = "icon-parts_iDrive";
  Icons2["PARTS_HMI"] = "icon-parts_HMI";
  Icons2["PARTS_ITIRE_PRESSURE_DEFAULT"] = "icon-parts_itire_pressure_default";
  Icons2["PARTS_LIGHT_FILLED"] = "icon-parts_light_filled";
  Icons2["PARTS_LIGHT_OFF"] = "icon-parts_light_off";
  Icons2["PARTS_LOCK_OFF"] = "icon-parts_lock_off";
  Icons2["PARTS_LOCK_OPEN"] = "icon-parts_lock_on";
  Icons2["PARTS_MID_HUB_MOTOR"] = "icon-parts_mid_hub_motor";
  Icons2["PARTS_REAR_HUB_MOTOR"] = "icon-parts_rear_hub_motor";
  Icons2["PARTS_SPEED_SENSOR"] = "icon-parts_speed-sensor";
  Icons2["PARTS_THROTTLE"] = "icon-parts_throttle";
  Icons2["PARTS_TORQUE"] = "icon-parts_torque";
  Icons2["PAUSE_CIRCLE_FILLED"] = "icon-pause_circle_filled";
  Icons2["PEDAL_BIKE_FILLED"] = "icon-pedal_bike_filled";
  Icons2["PENTAGON"] = "icon-pentagon";
  Icons2["PENTAGON_FILLED"] = "icon-pentagon_filled";
  Icons2["PERSON"] = "icon-person_outline";
  Icons2["PICTURE_AS_PDF"] = "icon-picture_as_pdf";
  Icons2["PIN"] = "icon-pin";
  Icons2["PLAY_CIRCLE"] = "icon-play_circle";
  Icons2["PLAY_CIRCLE_FILLED"] = "icon-play_circle_filled";
  Icons2["POWER_CIRCLE"] = "icon-power_circle";
  Icons2["POWER_FILLED"] = "icon-power_filled";
  Icons2["PRINT"] = "icon-print";
  Icons2["RADIO_BUTTON"] = "icon-radio_button_unchecked";
  Icons2["RADIO_BUTTON_CHECKED"] = "icon-radio_button_checked";
  Icons2["REMOVE"] = "icon-remove";
  Icons2["REMOVE_CIRCLE"] = "icon-remove_circle";
  Icons2["REMOVE_CIRCLE_FILLED"] = "icon-remove_circle_filled";
  Icons2["REPLACE"] = "icon-replace";
  Icons2["REPLACE_FILLED"] = "icon-replace_filled";
  Icons2["RESET"] = "icon-reset_filled";
  Icons2["RESTART"] = "icon-restart_filled";
  Icons2["REVIEW"] = "icon-review";
  Icons2["REVIEW_FILLED"] = "icon-review_filled";
  Icons2["RIDE_BIKE_FILLED"] = "icon-ride-bike_filled";
  Icons2["SCAN"] = "icon-scan";
  Icons2["SCAN_BARCODE"] = "icon-scan_barcode";
  Icons2["SCANNER_QR_CODE"] = "icon-scanner_qr_code";
  Icons2["SEARCH"] = "icon-search";
  Icons2["SERVICE"] = "icon-service";
  Icons2["SETTING"] = "icon-settings";
  Icons2["SETTING_FILLED"] = "icon-settings_filled";
  Icons2["SHARE"] = "icon-share";
  Icons2["SINGLE_LIST"] = "icon-single-list";
  Icons2["SQUARE"] = "icon-square";
  Icons2["SQUARE_FILLED"] = "icon-square_filled";
  Icons2["STAR"] = "icon-star-1";
  Icons2["STAR_FILLED"] = "icon-star";
  Icons2["STOP_CIRCLE_FILLED"] = "icon-stop_circle_filled";
  Icons2["STOREFRONT"] = "icon-storefront";
  Icons2["STOREFRONT_FILLED"] = "icon-storefront_filled";
  Icons2["TODAY"] = "icon-today";
  Icons2["TRIANGLE"] = "icon-triangle";
  Icons2["TRIANGLE_FILLED"] = "icon-triangle_filled";
  Icons2["TUNE"] = "icon-tune_filled";
  Icons2["UPGRADE"] = "icon-upgrade_filled";
  Icons2["VISIBILITY"] = "icon-visibility";
  Icons2["VISIBILITY_OFF"] = "icon-visibility_off";
  Icons2["WARNING"] = "icon-warning";
  Icons2["WARNING_FILLED"] = "icon-warning_filled";
  Icons2["WIFI"] = "icon-wifi_filled";
  Icons2["WIFI_OFF"] = "icon-wifi_off_filled";
  Icons2["WIFI_OFF_CIRCLE"] = "icon-wifi_circle_filled-1";
  Icons2["WIFI_CIRCLE"] = "icon-wifi_circle_filled";
  Icons2["WEATHER_SHOWER_RAIN"] = "icon-weather_shower-rain";
  Icons2["WEATHER_SCATTERED_CLOUDS"] = "icon-weather_scattered-clouds";
  Icons2["WEATHER_RAIN"] = "icon-weather_rain";
  Icons2["WEATHER_FEW_CLOUDS"] = "icon-weather_few-clouds";
  Icons2["WEATHER_CLEAR_SKY"] = "icon-weather_clear-sky";
  Icons2["WEATHER_BROKEN_CLOUDS"] = "icon-weather_broken-clouds";
  Icons2["THUNDERSTORM"] = "icon-thunderstorm";
  Icons2["SNOW"] = "icon-snow";
  Icons2["TIMELINE"] = "icon-timeline";
  Icons2["VIEW_TIMELINE"] = "icon-view_timeline";
  Icons2["UPDATE"] = "icon-update";
  Icons2["UNFOLD_MORE"] = "icon-unfold_more";
  Icons2["UNFOLD_LESS"] = "icon-unfold_less";
  Icons2["TRIP_TIME"] = "icon-trip-time";
  Icons2["SPEED"] = "icon-speed";
  Icons2["SORT_DESCEND"] = "icon-sort_descend";
  Icons2["SORT_BY_ALPHA"] = "icon-sort_by_alpha";
  Icons2["SORT_ASCEND"] = "icon-sort_ascend";
  Icons2["MOBILE_DISCONNECT"] = "icon-mobile_disconnect";
  Icons2["MIST"] = "icon-mist";
  Icons2["MICROSOFT"] = "icon-microsoft";
  Icons2["MAX_SPEED"] = "icon-max-speed";
  Icons2["MAINTAINACE_FILLED"] = "icon-maintainance_filled";
  Icons2["LOADING"] = "icon-loading";
  Icons2["LINK"] = "icon-link";
  Icons2["IOS_SHORTCUTS"] = "icon-iOS-shortcuts";
  Icons2["HEART_RATE"] = "icon-heart-rate";
  Icons2["GPS_FIXED"] = "icon-gps_fixed";
  Icons2["GPS_NOT_FIXED"] = "icon-gps_not_fixed";
  Icons2["DRAG_INDICATOR"] = "icon-drag_indicator";
  Icons2["DOC"] = "icon-doc";
  Icons2["DOC_UPLOADED"] = "icon-doc_uploaded";
  Icons2["CROWN"] = "icon-crown";
  Icons2["CROWN_FILLED"] = "icon-crown_filled";
  Icons2["COMPRESS"] = "icon-compress";
  Icons2["CODE_FILLED"] = "icon-code_filled";
  Icons2["BACKUP_TABLE"] = "icon-backup_table";
  Icons2["BACK"] = "icon-back";
  Icons2["AVG_SPEED"] = "icon-avg-speed";
  Icons2["SYSTEM_SECURITY_UPDATE_GOOD"] = "icon-system_security_update_good";
  Icons2["TABLE_CHART"] = "icon-table_chart";
  Icons2["TORQUE_SENSOR"] = "icon-torque_sensor";
  Icons2["TRANSLATION"] = "icon-translation";
  Icons2["SCHEDULE"] = "icon-schedule";
  Icons2["SENTENCE"] = "icon-sentence";
  Icons2["PUBLICATION"] = "icon-publication";
  Icons2["PARTS_BATTERY_SHUTDOWN"] = "icon-parts_battery_shutdown";
  Icons2["PARTS_DRIVETRAIN"] = "icon-parts_drivetrain";
  Icons2["NEARBY"] = "icon-nearby";
  Icons2["MOBILE_DATA_ANDROID"] = "icon-mobile-data-android-11";
  Icons2["MOBILE_DATA_IOS"] = "icon-mobile-data-iOS";
  Icons2["MOBILE_CONNECT"] = "icon-mobile_connect";
  Icons2["MANAGE_SEARCH"] = "icon-manage_search";
  Icons2["HEATED_HANDLE"] = "icon-heated-handle";
  Icons2["INTERNET_ANDROID_11"] = "icon-internet-android-11";
  Icons2["INTERNET_ANDROID_12"] = "icon-internet-android-12";
  Icons2["FIND_REPLACE"] = "icon-find_replace";
  Icons2["FW"] = "icon-FW";
  Icons2["ERROR_CODE"] = "icon-error-code";
  Icons2["ERROR_CODE_CREATE"] = "icon-error-code-create";
  Icons2["FACTORY"] = "icon-factory";
  Icons2["CLOUD_UPLOAD"] = "icon-cloud_upload";
  Icons2["COPY"] = "icon-copy";
  Icons2["CHECK_LIST"] = "icon-check-list";
  Icons2["CLEANING_SERVICES"] = "icon-cleaning_services";
  Icons2["BACK_1"] = "icon-back-1";
  Icons2["BACKUP_ALTERNATE_EMAIL"] = "icon-backup_alternate_email";
  Icons2["BLOT"] = "icon-bolt";
  Icons2["ANT"] = "icon-ant";
  Icons2["WARRANTY"] = "icon-warranty";
  Icons2["NOT_ACTIVATED"] = "icon-not-activated";
  Icons2["ORDER_1"] = "icon-order-1";
  Icons2["PRE_BUNDLE"] = "icon-pre-bundle";
  Icons2["ROTATE_90_DEGREES_CCW"] = "icon-rotate_90_degrees_ccw";
  Icons2["SEND"] = "icon-send";
  Icons2["SHOPPING_CART"] = "icon-shopping_cart";
  Icons2["SYNC_ALT"] = "icon-sync_alt";
  Icons2["PERMISSION"] = "icon-permission";
  Icons2["CROP_LANDSCAPE"] = "icon-crop_landscape";
  Icons2["AUTH_MANAGEMENT"] = "icon-auth_management";
  Icons2["FORK"] = "icon-fork";
  Icons2["RADAR"] = "icon-radar";
  Icons2["TEAM"] = "icon-team";
  Icons2["USER_ACCOUNT"] = "icon-user_account";
  Icons2["ENERGETIC"] = "icon-energetic";
  Icons2["MILD"] = "icon-mild";
  Icons2["PAS_ACCELERATION"] = "icon-PAS-acceleration";
  Icons2["POWER"] = "icon-power";
  return Icons2;
})(Icons || {});
var Actions = ((Actions2) => {
  Actions2["EDIT"] = "Edit";
  Actions2["DELETE"] = "Delete";
  Actions2["SUBMIT"] = "Submit";
  Actions2["CANCEL"] = "Cancel";
  Actions2["CREATE"] = "Create";
  Actions2["CONFIRM"] = "Confirm";
  Actions2["EMPTY"] = "N/A";
  return Actions2;
})(Actions || {});
var Dialogs = ((Dialogs2) => {
  Dialogs2["CANCEL_TITLE"] = "Discard The Change";
  Dialogs2["CANCEL_BODY"] = "Changes have not been saved. Are you sure you want to discard this change?";
  return Dialogs2;
})(Dialogs || {});
var Variant = ((Variant2) => {
  Variant2["SUCCESS"] = "success";
  Variant2["SUCCESS_LIGHT"] = "success-light";
  Variant2["WARNING"] = "warning";
  Variant2["ERROR"] = "error";
  Variant2["INFO"] = "info";
  Variant2["SECONDARY"] = "secondary";
  Variant2["SECONDARY_DEEP"] = "secondary-deep";
  Variant2["POSION"] = "poison";
  Variant2["INFO_LIGHT"] = "info-light";
  return Variant2;
})(Variant || {});
var SwitchSize = ((SwitchSize2) => {
  SwitchSize2["SMALL"] = "small";
  SwitchSize2["LARGE"] = "large";
  return SwitchSize2;
})(SwitchSize || {});
var _hoisted_1$$ = {
  key: 0,
  class: "img-alt"
};
var _sfc_main$1y = defineComponent({
  props: {
    diameter: null,
    imgUrl: null,
    imgAlt: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: "hy-avatar-img-box",
        style: normalizeStyle({ width: `${__props.diameter}px`, height: `${__props.diameter}px`, backgroundImage: `url(${__props.imgUrl})` })
      }, [
        !__props.imgUrl ? (openBlock(), createElementBlock("div", _hoisted_1$$, toDisplayString(__props.imgAlt), 1)) : createCommentVNode("", true)
      ], 4);
    };
  }
});
var _hoisted_1$_ = ["variant"];
var _sfc_main$1x = defineComponent({
  props: {
    label: null,
    variant: null,
    icon: null
  },
  setup(__props) {
    const props2 = __props;
    const getTagLeftpadding = computed(() => props2.icon ? 1.5 : 1);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("span", {
        class: "hy-tag fs-label lh-label-lg fw-bold",
        style: normalizeStyle({ paddingLeft: unref(getTagLeftpadding) + "rem" }),
        variant: __props.variant
      }, [
        __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
          key: 0,
          class: "hy-tag-icon",
          icon: __props.icon
        }, null, 8, ["icon"])) : createCommentVNode("", true),
        createTextVNode(" " + toDisplayString(__props.label), 1)
      ], 12, _hoisted_1$_);
    };
  }
});
var _hoisted_1$Z = ["variant"];
var _sfc_main$1w = defineComponent({
  props: {
    icon: null,
    interactive: { type: Boolean },
    variant: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("button", {
        class: normalizeClass(["hy-icon", { interactive: __props.interactive }]),
        variant: __props.variant
      }, [
        createBaseVNode("i", {
          class: normalizeClass(__props.icon)
        }, null, 2)
      ], 10, _hoisted_1$Z);
    };
  }
});
var _hoisted_1$Y = ["href", "target"];
var _sfc_main$1v = defineComponent({
  props: {
    href: null,
    target: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("a", {
        href: __props.href,
        target: __props.target,
        class: "hy-link"
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 8, _hoisted_1$Y);
    };
  }
});
var _sfc_main$1u = defineComponent({
  props: {
    type: null,
    isDark: { type: Boolean },
    icon: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("button", {
        class: normalizeClass(__props.isDark ? `btn-dark dark-btn-${__props.type}` : `btn btn-${__props.type}`)
      }, [
        __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
          key: 0,
          icon: __props.icon,
          class: "mr-1"
        }, null, 8, ["icon"])) : createCommentVNode("", true),
        renderSlot(_ctx.$slots, "default")
      ], 2);
    };
  }
});
var _hoisted_1$X = { class: "hy-loading" };
var _hoisted_2$I = {
  key: 0,
  class: "loading-container"
};
var _hoisted_3$B = { class: "loading-box" };
var _hoisted_4$r = { class: "loading-roller" };
var _hoisted_5$e = createBaseVNode("br", null, null, -1);
var _hoisted_6$a = {
  key: 0,
  class: "loading-text"
};
var _sfc_main$1t = defineComponent({
  props: {
    content: { type: [Boolean, String] }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$X, [
        createVNode(Transition, { name: "fade" }, {
          default: withCtx(() => [
            __props.content ? (openBlock(), createElementBlock("div", _hoisted_2$I, [
              createBaseVNode("div", _hoisted_3$B, [
                createBaseVNode("div", _hoisted_4$r, [
                  (openBlock(), createElementBlock(Fragment, null, renderList(8, (i2) => {
                    return createBaseVNode("div", { key: i2 });
                  }), 64))
                ]),
                _hoisted_5$e,
                __props.content !== true ? (openBlock(), createElementBlock("span", _hoisted_6$a, toDisplayString(__props.content), 1)) : createCommentVNode("", true)
              ])
            ])) : createCommentVNode("", true)
          ]),
          _: 1
        })
      ]);
    };
  }
});
var _hoisted_1$W = { class: "hy-text-divider" };
var _hoisted_2$H = createBaseVNode("span", { class: "line" }, null, -1);
var _hoisted_3$A = { class: "mx-2" };
var _hoisted_4$q = createBaseVNode("span", { class: "line" }, null, -1);
var _sfc_main$1s = defineComponent({
  props: {
    label: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$W, [
        _hoisted_2$H,
        createBaseVNode("span", _hoisted_3$A, toDisplayString(__props.label), 1),
        _hoisted_4$q
      ]);
    };
  }
});
var _sfc_main$1r = defineComponent({
  setup(__props) {
    const goTop = () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    };
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(_sfc_main$1u), {
        type: "filled",
        icon: unref(Icons).ARROW_DROPUP,
        class: "hy-go-top-button",
        onClick: goTop
      }, null, 8, ["icon"]);
    };
  }
});
var language = {
  zh: {
    hint: "\u70B9\u51FB\uFF0C\u6216\u62D6\u52A8\u56FE\u7247\u81F3\u6B64\u5904",
    loading: "\u6B63\u5728\u4E0A\u4F20\u2026\u2026",
    noSupported: "\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u8BE5\u529F\u80FD\uFF0C\u8BF7\u4F7F\u7528IE10\u4EE5\u4E0A\u6216\u5176\u4ED6\u73B0\u5728\u6D4F\u89C8\u5668\uFF01",
    success: "\u4E0A\u4F20\u6210\u529F",
    fail: "\u56FE\u7247\u4E0A\u4F20\u5931\u8D25",
    preview: "\u5934\u50CF\u9884\u89C8",
    btn: {
      off: "\u53D6\u6D88",
      close: "\u5173\u95ED",
      back: "\u4E0A\u4E00\u6B65",
      save: "\u4FDD\u5B58"
    },
    error: {
      onlyImg: "\u4EC5\u9650\u56FE\u7247\u683C\u5F0F",
      outOfSize: "\u5355\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ",
      lowestPx: "\u56FE\u7247\u6700\u4F4E\u50CF\u7D20\u4E3A\uFF08\u5BBD*\u9AD8\uFF09\uFF1A"
    }
  },
  "zh-tw": {
    hint: "\u9EDE\u64CA\uFF0C\u6216\u62D6\u52D5\u5716\u7247\u81F3\u6B64\u8655",
    loading: "\u6B63\u5728\u4E0A\u50B3\u2026\u2026",
    noSupported: "\u700F\u89BD\u5668\u4E0D\u652F\u6301\u8A72\u529F\u80FD\uFF0C\u8ACB\u4F7F\u7528IE10\u4EE5\u4E0A\u6216\u5176\u4ED6\u73FE\u4EE3\u700F\u89BD\u5668\uFF01",
    success: "\u4E0A\u50B3\u6210\u529F",
    fail: "\u5716\u7247\u4E0A\u50B3\u5931\u6557",
    preview: "\u982D\u50CF\u9810\u89BD",
    btn: {
      off: "\u53D6\u6D88",
      close: "\u95DC\u9589",
      back: "\u4E0A\u4E00\u6B65",
      save: "\u4FDD\u5B58"
    },
    error: {
      onlyImg: "\u50C5\u9650\u5716\u7247\u683C\u5F0F",
      outOfSize: "\u55AE\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u904E ",
      lowestPx: "\u5716\u7247\u6700\u4F4E\u50CF\u7D20\u70BA\uFF08\u5BEC*\u9AD8\uFF09\uFF1A"
    }
  },
  en: {
    hint: "Click or drag the file here to upload",
    loading: "Uploading\u2026",
    noSupported: "Browser is not supported, please use IE10+ or other browsers",
    success: "Upload success",
    fail: "Upload failed",
    preview: "Preview",
    btn: {
      off: "Cancel",
      close: "Close",
      back: "Back",
      save: "Save"
    },
    error: {
      onlyImg: "Image only",
      outOfSize: "Image exceeds size limit: ",
      lowestPx: "Image's size is too low. Expected at least: "
    }
  },
  ro: {
    hint: "Atinge sau trage fi\u0219ierul aici",
    loading: "Se \xEEncarc\u0103",
    noSupported: "Browser-ul t\u0103u nu suport\u0103 acest feature. Te rug\u0103m \xEEncearc\u0103 cu alt browser.",
    success: "S-a \xEEnc\u0103rcat cu succes",
    fail: "A ap\u0103rut o problem\u0103 la \xEEnc\u0103rcare",
    preview: "Previzualizeaz\u0103",
    btn: {
      off: "Anuleaz\u0103",
      close: "\xCEnchide",
      back: "\xCEnapoi",
      save: "Salveaz\u0103"
    },
    error: {
      onlyImg: "Doar imagini",
      outOfSize: "Imaginea dep\u0103\u0219e\u0219te limita de: ",
      loewstPx: "Imaginea este prea mic\u0103; Minim: "
    }
  },
  ru: {
    hint: "\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0438\u043B\u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0432 \u044D\u0442\u043E \u043E\u043A\u043D\u043E",
    loading: "\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044E\u2026\u2026",
    noSupported: "\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F, \u043F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 IE10 + \u0438\u043B\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u044B",
    success: "\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E",
    fail: "\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438",
    preview: "\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",
    btn: {
      off: "\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",
      close: "\u0417\u0430\u043A\u0440\u044B\u0442\u044C",
      back: "\u041D\u0430\u0437\u0430\u0434",
      save: "\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"
    },
    error: {
      onlyImg: "\u0422\u043E\u043B\u044C\u043A\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
      outOfSize: "\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0435\u0442 \u043F\u0440\u0435\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: ",
      lowestPx: "\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F: "
    }
  },
  "pt-br": {
    hint: "Clique ou arraste o arquivo aqui para carregar",
    loading: "Carregando...",
    noSupported: "Browser n\xE3o suportado, por favor utilize o Internet Explorer 10+ ou outro browser",
    success: "Imagem carregada com sucesso",
    fail: "Ocorreu um erro ao carregar a imagem",
    preview: "Pr\xE9-visualiza\xE7\xE3o",
    btn: {
      off: "Cancelar",
      close: "Fechar",
      back: "Voltar",
      save: "Salvar"
    },
    error: {
      onlyImg: "Por favor envie apenas imagens",
      outOfSize: "A imagem excede o limite de tamanho suportado: ",
      lowestPx: "O tamanho da imagem \xE9 muito pequeno. Tamanho m\xEDnimo: "
    }
  },
  "pt-pt": {
    hint: "Clique ou arraste o arquivo para a janela para carregar",
    loading: "A processar...",
    noSupported: "Browser n\xE3o suportado, por favor utilize o Internet Explorer 10+ ou outro browser",
    success: "Imagem carregada com sucesso",
    fail: "Ocorreu um erro ao carregar a imagem",
    preview: "Pr\xE9-visualiza\xE7\xE3o",
    btn: {
      off: "Cancelar",
      close: "Fechar",
      back: "Voltar",
      save: "Guardar"
    },
    error: {
      onlyImg: "Por favor envie apenas imagens",
      outOfSize: "A imagem excede o limite de tamanho suportado: ",
      lowestPx: "O tamanho da imagem \xE9 muito pequeno. Tamanho m\xEDnimo: "
    }
  },
  fr: {
    hint: "Cliquez ou glissez le fichier ici.",
    loading: "T\xE9l\xE9chargement\u2026",
    noSupported: "Votre navigateur n'est pas support\xE9. Utilisez IE10 + ou un autre navigateur s'il vous pla\xEEt.",
    success: "T\xE9l\xE9chargement r\xE9ussi",
    fail: "T\xE9l\xE9chargement echou\xE9",
    preview: "Aper\xE7u",
    btn: {
      off: "Annuler",
      close: "Fermer",
      back: "Retour",
      save: "Enregistrer"
    },
    error: {
      onlyImg: "Image uniquement",
      outOfSize: "L'image s\xE9lectionn\xE9e d\xE9passe la taille maximum: ",
      lowestPx: "L'image s\xE9lectionn\xE9e est trop petite. Dimensions attendues: "
    }
  },
  nl: {
    hint: "Klik hier of sleep een afbeelding in dit vlak",
    loading: "Uploaden\u2026",
    noSupported: "Je browser wordt helaas niet ondersteund. Gebruik IE10+ of een andere browser.",
    success: "Upload succesvol",
    fail: "Upload mislukt",
    preview: "Voorbeeld",
    btn: {
      off: "Annuleren",
      close: "Sluiten",
      back: "Terug",
      save: "Opslaan"
    },
    error: {
      onlyImg: "Alleen afbeeldingen",
      outOfSize: "De afbeelding is groter dan: ",
      lowestPx: "De afbeelding is te klein! Minimale afmetingen: "
    }
  },
  tr: {
    hint: "T\u0131kla veya y\xFCklemek istedi\u011Fini buraya s\xFCr\xFCkle",
    loading: "Y\xFCkleniyor\u2026",
    noSupported: "Taray\u0131c\u0131 desteklenmiyor, l\xFCtfen IE10+ veya farkl\u0131 taray\u0131c\u0131 kullan\u0131n",
    success: "Y\xFCkleme ba\u015Far\u0131l\u0131",
    fail: "Y\xFCklemede hata olu\u015Ftu",
    preview: "\xD6nizle",
    btn: {
      off: "\u0130ptal",
      close: "Kapat",
      back: "Geri",
      save: "Kaydet"
    },
    error: {
      onlyImg: "Sadece resim",
      outOfSize: "Resim y\xFCkleme limitini a\u015F\u0131yor: ",
      lowestPx: "Resmin boyutu \xE7ok k\xFC\xE7\xFCk. En az olmas\u0131 gereken: "
    }
  },
  "es-MX": {
    hint: "Selecciona o arrastra una imagen",
    loading: "Subiendo...",
    noSupported: "Tu navegador no es soportado, por favor usa IE10+ u otros navegadores m\xE1s recientes",
    success: "Subido exitosamente",
    fail: "Sucedi\xF3 un error",
    preview: "Vista previa",
    btn: {
      off: "Cancelar",
      close: "Cerrar",
      back: "Atr\xE1s",
      save: "Guardar"
    },
    error: {
      onlyImg: "\xDAnicamente im\xE1genes",
      outOfSize: "La imagen excede el tama\xF1o maximo:",
      lowestPx: "La imagen es demasiado peque\xF1a. Se espera por lo menos:"
    }
  },
  de: {
    hint: "Klick hier oder zieh eine Datei hier rein zum Hochladen",
    loading: "Hochladen\u2026",
    noSupported: "Browser wird nicht unterst\xFCtzt, bitte verwende IE10+ oder andere Browser",
    success: "Upload erfolgreich",
    fail: "Upload fehlgeschlagen",
    preview: "Vorschau",
    btn: {
      off: "Abbrechen",
      close: "Schlie\xDFen",
      back: "Zur\xFCck",
      save: "Speichern"
    },
    error: {
      onlyImg: "Nur Bilder",
      outOfSize: "Das Bild ist zu gro\xDF: ",
      lowestPx: "Das Bild ist zu klein. Mindestens: "
    }
  },
  ja: {
    hint: "\u30AF\u30EA\u30C3\u30AF\u30FB\u30C9\u30E9\u30C3\u30B0\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",
    loading: "\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",
    noSupported: "\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u5BFE\u5FDC\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002IE10+\u304B\u305D\u306E\u4ED6\u306E\u4E3B\u8981\u30D6\u30E9\u30A6\u30B6\u3092\u304A\u4F7F\u3044\u304F\u3060\u3055\u3044\u3002",
    success: "\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u6210\u529F",
    fail: "\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u5931\u6557",
    preview: "\u30D7\u30EC\u30D3\u30E5\u30FC",
    btn: {
      off: "\u30AD\u30E3\u30F3\u30BB\u30EB",
      close: "\u9589\u3058\u308B",
      back: "\u623B\u308B",
      save: "\u4FDD\u5B58"
    },
    error: {
      onlyImg: "\u753B\u50CF\u306E\u307F",
      outOfSize: "\u753B\u50CF\u30B5\u30A4\u30BA\u304C\u4E0A\u9650\u3092\u8D85\u3048\u3066\u3044\u307E\u3059\u3002\u4E0A\u9650: ",
      lowestPx: "\u753B\u50CF\u304C\u5C0F\u3055\u3059\u304E\u307E\u3059\u3002\u6700\u5C0F\u30B5\u30A4\u30BA: "
    }
  },
  ua: {
    hint: "\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0430\u0431\u043E \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0444\u0430\u0439\u043B \u0432 \u0446\u0435 \u0432\u0456\u043A\u043D\u043E",
    loading: "\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0443\u044E\u2026\u2026",
    noSupported: "\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0435 \u043F\u0456\u0434\u0442\u0440\u0438\u043C\u0443\u0454\u0442\u044C\u0441\u044F, \u0431\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430 \u0441\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435\u0441\u044C IE10 + \u0430\u0431\u043E \u0456\u043D\u0448\u0438\u043C\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430\u043C\u0438",
    success: "\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u043D\u044F \u0432\u0438\u043A\u043E\u043D\u0430\u043D\u043E \u0443\u0441\u043F\u0456\u0448\u043D\u043E",
    fail: "\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0437\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u043D\u044F",
    preview: "\u041F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u0456\u0439 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u0434",
    btn: {
      off: "\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438",
      close: "\u0417\u0430\u043A\u0440\u0438\u0442\u0438",
      back: "\u041D\u0430\u0437\u0430\u0434",
      save: "\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"
    },
    error: {
      onlyImg: "\u0422\u0456\u043B\u044C\u043A\u0438 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
      outOfSize: "\u0417\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u043F\u0435\u0440\u0435\u0432\u0438\u0449\u0443\u0454 \u0433\u0440\u0430\u043D\u0438\u0447\u043D\u0438\u0439 \u0440\u043E\u0437\u043C\u0456\u0440: ",
      lowestPx: "\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u044C\u043D\u0438\u0439 \u0440\u043E\u0437\u043C\u0456\u0440 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F: "
    }
  },
  it: {
    hint: "Clicca o trascina qui il file per caricarlo",
    loading: "Caricamento del file\u2026",
    noSupported: "Browser non supportato, per favore usa IE10+ o un altro browser",
    success: "Caricamento completato",
    fail: "Caricamento fallito",
    preview: "Anteprima",
    btn: {
      off: "Annulla",
      close: "Chiudi",
      back: "Indietro",
      save: "Salva"
    },
    error: {
      onlyImg: "Sono accettate solo immagini",
      outOfSize: "L'immagine eccede i limiti di dimensione: ",
      lowestPx: "L'immagine \xE8 troppo piccola. Il requisito minimo \xE8: "
    }
  },
  ar: {
    hint: "\u0627\u0636\u063A\u0637 \u0623\u0648 \u0627\u0633\u062D\u0628 \u0627\u0644\u0645\u0644\u0641 \u0647\u0646\u0627 \u0644\u0644\u062A\u062D\u0645\u064A\u0644",
    loading: "\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...",
    noSupported: "\u0627\u0644\u0645\u062A\u0635\u0641\u062D \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645 \u060C \u064A\u0631\u062C\u0649 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 IE10 + \u0623\u0648 \u0645\u062A\u0635\u0641\u062D \u0623\u062E\u0631",
    success: "\u062A\u0645 \u0627\u0644\u062A\u062D\u0645\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",
    fail: "\u0641\u0634\u0644 \u0627\u0644\u062A\u062D\u0645\u064A\u0644",
    preview: "\u0645\u0639\u0627\u064A\u0646\u0647",
    btn: {
      off: "\u0625\u0644\u063A\u0627\u0621",
      close: "\u0625\u063A\u0644\u0627\u0642",
      back: "\u0631\u062C\u0648\u0639",
      save: "\u062D\u0641\u0638"
    },
    error: {
      onlyImg: "\u0635\u0648\u0631 \u0641\u0642\u0637",
      outOfSize: "\u062A\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u0635\u0648\u0631\u0647 \u0627\u0644\u062D\u062C\u0645 \u0627\u0644\u0645\u062D\u062F\u062F: ",
      lowestPx: "\u062D\u062C\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u0635\u063A\u064A\u0631 \u062C\u062F\u0627. \u0645\u0646 \u0627\u0644\u0645\u062A\u0648\u0642\u0639 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644: "
    }
  },
  ug: {
    hint: "\u0645\u06D5\u0632\u0643\u06C7\u0631 \u062F\u0627\u0626\u0649\u0631\u0649\u0646\u0649 \u0686\u0649\u0643\u0649\u067E \u0631\u06D5\u0633\u0649\u0645 \u062A\u0627\u0644\u0644\u0627\u06AD \u064A\u0627\u0643\u0649 \u0631\u06D5\u0633\u0649\u0645\u0646\u0649 \u0633\u06C6\u0631\u06D5\u067E \u0626\u06D5\u0643\u0649\u0631\u0649\u06AD",
    loading: "\u064A\u0648\u0644\u0644\u0649\u0646\u0649\u06CB\u0627\u062A\u0649\u062F\u06C7...",
    noSupported: "\u062A\u0648\u0631 \u0643\u06C6\u0631\u06AF\u06C8\u0686 \u0628\u06C7 \u0626\u0649\u0642\u062A\u0649\u062F\u0627\u0631\u0646\u0649 \u0642\u0648\u0644\u0644\u0649\u0645\u0627\u064A\u062F\u06C7 \u060C \u064A\u06C7\u0642\u0649\u0631\u0649 \u0646\u06D5\u0634\u0649\u0631\u062F\u0649\u0643\u0649 \u062A\u0648\u0631 \u0643\u06C6\u0631\u06AF\u06C8\u0686\u0646\u0649 \u0626\u0649\u0634\u0644\u0649\u062A\u0649\u06AD",
    success: "\u063A\u06D5\u0644\u0628\u0649\u0644\u0649\u0643 \u0628\u0648\u0644\u062F\u0649",
    fail: "\u0645\u06D5\u063A\u0644\u06C7\u0628 \u0628\u0648\u0644\u062F\u0649",
    preview: "\u0626\u06C8\u0646\u06C8\u0645 \u0631\u06D5\u0633\u0649\u0645",
    btn: {
      off: "\u0628\u0648\u0644\u062F\u0649 \u0642\u0649\u0644\u0649\u0634",
      close: "\u062A\u0627\u0642\u0627\u0634",
      back: "\u0626\u0627\u0644\u062F\u0649\u0646\u0642\u0649 \u0642\u06D5\u062F\u06D5\u0645",
      save: "\u0633\u0627\u0642\u0644\u0627\u0634"
    },
    error: {
      onlyImg: "\u067E\u06D5\u0642\u06D5\u062A \u0631\u06D5\u0633\u0649\u0645 \u0641\u0648\u0631\u0645\u0627\u062A\u0649\u0646\u0649\u0644\u0627 \u0642\u0648\u0644\u0644\u0627\u064A\u062F\u06C7",
      outOfSize: "\u0631\u06D5\u0633\u0649\u0645 \u0686\u0648\u06AD - \u0643\u0649\u0686\u0649\u0643\u0644\u0649\u0643\u0649 \u0686\u06D5\u0643\u062A\u0649\u0646 \u0626\u0649\u0634\u0649\u067E \u0643\u06D5\u062A\u062A\u0649",
      lowestPx: "\u0631\u06D5\u0633\u0649\u0645\u0646\u0649\u06AD \u0626\u06D5\u06AD \u0643\u0649\u0686\u0649\u0643 \u0626\u06C6\u0644\u0686\u0649\u0645\u0649 :"
    }
  },
  th: {
    hint: "\u0E04\u0E25\u0E34\u0E4A\u0E01\u0E2B\u0E23\u0E37\u0E2D\u0E25\u0E32\u0E01\u0E23\u0E39\u0E1B\u0E21\u0E32\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",
    loading: "\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u2026",
    noSupported: "\u0E40\u0E1A\u0E23\u0E32\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E44\u0E21\u0E48\u0E23\u0E2D\u0E07\u0E23\u0E31\u0E1A, \u0E01\u0E23\u0E38\u0E13\u0E32\u0E43\u0E0A\u0E49 IE \u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E48\u0E19 10 \u0E02\u0E36\u0E49\u0E19\u0E44\u0E1B \u0E2B\u0E23\u0E37\u0E2D\u0E43\u0E0A\u0E49\u0E40\u0E1A\u0E23\u0E32\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E15\u0E31\u0E27\u0E2D\u0E37\u0E48\u0E19",
    success: "\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",
    fail: "\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E25\u0E49\u0E21\u0E40\u0E2B\u0E25\u0E27",
    preview: "\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07",
    btn: {
      off: "\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",
      close: "\u0E1B\u0E34\u0E14",
      back: "\u0E01\u0E25\u0E31\u0E1A",
      save: "\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"
    },
    error: {
      onlyImg: "\u0E44\u0E1F\u0E25\u0E4C\u0E20\u0E32\u0E1E\u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19",
      outOfSize: "\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E0D\u0E48\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ",
      lowestPx: "\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E25\u0E47\u0E01\u0E40\u0E01\u0E34\u0E19\u0E44\u0E1B. \u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35\u0E02\u0E19\u0E32\u0E14: "
    }
  },
  mm: {
    hint: "\u1016\u102D\u102F\u1004\u103A\u1000\u102D\u102F \u1024\u1014\u1031\u101B\u102C\u1010\u103D\u1004\u103A \u1014\u103E\u102D\u1015\u103A\u104D (\u101E\u102D\u102F\u1037) \u1006\u103D\u1032\u1011\u100A\u1037\u103A\u104D \u1010\u1004\u103A\u1015\u102B",
    loading: "\u1010\u1004\u103A\u1014\u1031\u101E\u100A\u103A\u2026",
    noSupported: "\u1024\u1018\u101B\u1031\u102C\u1000\u103A\u1007\u102C\u1000\u102D\u102F \u1021\u1011\u1031\u102C\u1000\u103A\u1021\u1015\u1036\u1037 \u1019\u1015\u1031\u1038\u1015\u102B\u104A \u1000\u103B\u1031\u1038\u1007\u1030\u1038\u1015\u103C\u102F\u104D IE10+ \u101E\u102D\u102F\u1037\u1019\u101F\u102F\u1010\u103A \u1021\u1001\u103C\u102C\u1038 \u1018\u101B\u1031\u102C\u1000\u103A\u1007\u102C \u1000\u102D\u102F \u1021\u101E\u102F\u1036\u1038\u1015\u103C\u102F\u1015\u102B",
    success: "\u1016\u102D\u102F\u1004\u103A\u1010\u1004\u103A\u1014\u1031\u1019\u103E\u102F \u1019\u1015\u103C\u102E\u1038\u1019\u103C\u1031\u102C\u1000\u103A\u1015\u102B",
    fail: "\u1016\u102D\u102F\u1004\u103A\u1010\u1004\u103A\u1014\u1031\u1019\u103E\u102F \u1019\u1021\u1031\u102C\u1004\u103A\u1019\u103C\u1004\u103A\u1015\u102B",
    preview: "\u1021\u1005\u1019\u103A\u1038\u1000\u103C\u100A\u1037\u103A",
    btn: {
      off: "\u1019\u101C\u102F\u1015\u103A\u1010\u1031\u102C\u1037\u1015\u102B",
      close: "\u1015\u102D\u1010\u103A\u1019\u100A\u103A",
      back: "\u1014\u1031\u102C\u1000\u103A\u101E\u102D\u102F\u1037",
      save: "\u101E\u102D\u1019\u103A\u1038\u1019\u100A\u103A"
    },
    error: {
      onlyImg: "\u1013\u102C\u1010\u103A\u1015\u102F\u1036 \u101E\u102E\u1038\u101E\u1014\u1037\u103A\u101E\u102C",
      outOfSize: "\u1013\u102C\u1010\u103A\u1015\u102F\u1036\u1006\u102D\u102F\u1012\u103A \u1000\u103C\u102E\u1038\u101C\u103D\u1014\u103A\u1038\u101E\u100A\u103A \u104B \u1021\u1019\u103B\u102C\u1038\u1006\u102F\u1036\u1038 \u1006\u102D\u102F\u1012\u103A : ",
      lowestPx: "\u1013\u102C\u1010\u103A\u1015\u102F\u1036\u1006\u102D\u102F\u1012\u103A \u101E\u1031\u1038\u101C\u103D\u1014\u103A\u1038\u101E\u100A\u103A\u104B \u1021\u1014\u100A\u103A\u1038\u1006\u102F\u1036\u1038 \u1006\u102D\u102F\u1012\u103A : "
    }
  },
  se: {
    hint: "Klicka eller dra en fil hit f\xF6r att ladda upp den",
    loading: "Laddar upp\u2026",
    noSupported: "Din webbl\xE4sare st\xF6ds inte, v\xE4nligen anv\xE4nd IE10+ eller andra webbl\xE4sare",
    success: "Uppladdning lyckades",
    fail: "Uppladdning misslyckades",
    preview: "F\xF6rhandsgranska",
    btn: {
      off: "Avbryt",
      close: "St\xE4ng",
      back: "Tillbaka",
      save: "Spara"
    },
    error: {
      onlyImg: "Endast bilder",
      outOfSize: "Bilden \xE4r st\xF6rre \xE4n max-gr\xE4nsen: ",
      lowestPx: "Bilden \xE4r f\xF6r liten. Minimum \xE4r: "
    }
  },
  pl: {
    hint: "Kliknij lub upu\u015B\u0107 plik tutaj",
    loading: "Wgrywanie\u2026",
    noSupported: "Twoja przegl\u0105darka nie jest wspierana, u\u017Cyj IE10+ lub innej przegl\u0105darki",
    success: "B\u0142\u0105d",
    fail: "Sukces",
    preview: "Podgl\u0105d",
    btn: {
      off: "Anuluj",
      close: "Zamknij",
      back: "Wstecz",
      save: "Zapisz"
    },
    error: {
      onlyImg: "Tylko obrazki",
      outOfSize: "Rozmiar obrazka przekracza: ",
      lowestPx: "Obrazek jest za ma\u0142y. Minimalne wymiary to: "
    }
  },
  vi: {
    hint: "B\u1EA5m ho\u1EB7c k\xE9o th\u1EA3 file \u0111\u1EC3 t\u1EA3i l\xEAn",
    loading: "\u0110ang t\u1EA3i l\xEAn...",
    noSupported: "Tr\xECnh duy\u1EC7t kh\xF4ng h\u1ED7 tr\u1EE3, h\xE3y s\u1EED d\u1EE5ng IE10+ ho\u1EB7c tr\xECnh duy\u1EC7t kh\xE1c",
    success: "T\u1EA3i l\xEAn th\xE0nh c\xF4ng",
    fail: "T\u1EA3i l\xEAn th\u1EA5t b\u1EA1i",
    preview: "Xem tr\u01B0\u1EDBc",
    btn: {
      off: "Hu\u1EF7",
      close: "\u0110\xF3ng",
      back: "Tr\u1EDF l\u1EA1i",
      save: "L\u01B0u"
    },
    error: {
      onlyImg: "Ch\u1EC9 h\xECnh \u1EA3nh",
      outOfSize: "H\xECnh \u1EA3nh v\u01B0\u1EE3t qu\xE1 gi\u1EDBi h\u1EA1n cho ph\xE9p: ",
      lowestPx: "K\xEDch th\u01B0\u1EDBc h\xECnh qu\xE1 nh\u1ECF. K\xEDch th\u01B0\u1EDBc t\u1ED1i thi\u1EC3u: "
    }
  },
  fa: {
    hint: "\u0628\u0631\u0627\u06CC \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062A\u0635\u0648\u06CC\u0631 \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F \u06CC\u0627 \u062A\u0635\u0648\u06CC\u0631 \u0631\u0627 \u0628\u0647 \u0627\u06CC\u0646 \u0646\u0627\u062D\u06CC\u0647 \u062F\u0631\u06AF \u06A9\u0646\u06CC\u062F",
    loading: "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC ...",
    noSupported: "\u0646\u0633\u062E\u0647 \u06CC\u0627 \u0646\u0648\u0639 \u0645\u0631\u0648\u0631\u06AF\u0631 \u0634\u0645\u0627 \u0627\u0632 \u0627\u06CC\u0646 \u0642\u0627\u0628\u0644\u06CC\u062A \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0646\u0645\u06CC\u06A9\u0646\u062F. \u0644\u0637\u0641\u0627 \u0627\u0632 \u0627\u06CC\u0646\u062A\u0631\u0646\u062A \u0627\u06A9\u0633\u067E\u0644\u0648\u0631\u0631 \u0648\u0631\u0698\u0646 \u0628\u0627\u0644\u0627\u062A\u0631 \u0627\u0632 \u062F\u0647 \u06CC\u0627 \u0645\u0631\u0648\u0631\u06AF\u0631\u0647\u0627\u06CC \u062F\u06CC\u06AF\u0631 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F",
    success: "\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F",
    fail: "\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0646\u062C\u0627\u0645 \u0646\u0634\u062F",
    preview: "\u067E\u06CC\u0634\u0646\u0645\u0627\u06CC\u0634",
    btn: {
      off: "\u0644\u063A\u0648",
      close: "\u0628\u0633\u062A\u0646",
      back: "\u0628\u0627\u0632\u06AF\u0634\u062A",
      save: "\u0630\u062E\u06CC\u0631\u0647"
    },
    error: {
      onlyImg: "\u0641\u0642\u0637 \u062A\u0635\u0648\u06CC\u0631",
      outOfSize: "\u062D\u062C\u0645 \u062A\u0635\u0648\u06CC\u0631 \u0628\u06CC\u0634 \u0627\u0632 \u0627\u0646\u062F\u0627\u0632\u0647\u200C\u06CC \u0645\u062C\u0627\u0632 \u0627\u0633\u062A: ",
      lowestPx: "\u062D\u062C\u0645 \u062A\u0635\u0648\u06CC\u0631 \u0628\u0633\u06CC\u0627\u0631 \u067E\u0627\u06CC\u06CC\u0646 \u0627\u0633\u062A\u060C \u062D\u062F\u0627\u0642\u0644 \u0633\u0627\u06CC\u0632 \u062A\u0635\u0648\u06CC\u0631: "
    }
  },
  da: {
    hint: "Klik eller tr\xE6k en fil herhen for at uploade",
    loading: "Uploader\u2026",
    noSupported: "Din browser er ikke underst\xF8ttet, benyt venligst IE10+ eller en anden browser",
    success: "Upload lykkedes",
    fail: "Upload mislykkedes",
    preview: "Preview",
    btn: {
      off: "Fortryd",
      close: "Luk",
      back: "Tilbage",
      save: "Gem"
    },
    error: {
      onlyImg: "Kun billeder",
      outOfSize: "Billedet overskrider st\xF8rrelsesgr\xE6nsen: ",
      lowestPx: "Billedet er for lille. Minimumsst\xF8rrelsen er: "
    }
  },
  ko: {
    hint: "\uD074\uB9AD \uB610\uB294 \uB4DC\uB798\uADF8\uD558\uC5EC \uC774\uBBF8\uC9C0\uB97C \uC5C5\uB85C\uB4DC\uD558\uC138\uC694.",
    loading: "\uC5C5\uB85C\uB4DC \uC911\u2026",
    noSupported: "\uC8C4\uC1A1\uD569\uB2C8\uB2E4, \uC778\uD130\uB137 \uC775\uC2A4\uD50C\uB85C\uB7EC \uBC84\uC804 10 \uC774\uC0C1 \uD639\uC740 \uB2E4\uB978 \uBE0C\uB77C\uC6B0\uC800\uB97C \uC0AC\uC6A9\uD574\uC8FC\uC138\uC694.",
    success: "\uC5C5\uB85C\uB4DC \uC131\uACF5",
    fail: "\uC5C5\uB85C\uB4DC \uC2E4\uD328",
    preview: "\uBBF8\uB9AC\uBCF4\uAE30",
    btn: {
      off: "\uCDE8\uC18C",
      close: "\uB2EB\uAE30",
      back: "\uB4A4\uB85C\uAC00\uAE30",
      save: "\uC800\uC7A5"
    },
    error: {
      onlyImg: "\uC774\uBBF8\uC9C0\uB9CC \uC5C5\uB85C\uB4DC \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
      outOfSize: "\uC5C5\uB85C\uB4DC \uD560 \uC218 \uC788\uB294 \uCD5C\uB300 \uC774\uBBF8\uC9C0 \uC0AC\uC774\uC988\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4: ",
      lowestPx: "\uC774\uBBF8\uC9C0\uC758 \uD06C\uAE30\uB294 \uC801\uC5B4\uB3C4 \uB2E4\uC74C \uC0AC\uC774\uC988\uBCF4\uB2E4 \uCEE4\uC57C \uD569\uB2C8\uB2E4: "
    }
  }
};
var mimes = {
  "jpg": "image/jpeg",
  "png": "image/png",
  "gif": "image/gif",
  "svg": "image/svg+xml",
  "psd": "image/photoshop"
};
function data2blob(data, mime) {
  data = data.split(",")[1];
  data = window.atob(data);
  var ia2 = new Uint8Array(data.length);
  for (var i2 = 0; i2 < data.length; i2++) {
    ia2[i2] = data.charCodeAt(i2);
  }
  return new Blob([ia2], {
    type: mime
  });
}
function effectRipple(e2, arg_opts) {
  var opts = Object.assign({
    ele: e2.target,
    type: "hit",
    bgc: "rgba(0, 0, 0, 0.15)"
  }, arg_opts), target = opts.ele;
  if (target) {
    var rect = target.getBoundingClientRect(), ripple = target.querySelector(".e-ripple");
    if (!ripple) {
      ripple = document.createElement("span");
      ripple.className = "e-ripple";
      ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + "px";
      target.appendChild(ripple);
    } else {
      ripple.className = "e-ripple";
    }
    switch (opts.type) {
      case "center":
        ripple.style.top = rect.height / 2 - ripple.offsetHeight / 2 + "px";
        ripple.style.left = rect.width / 2 - ripple.offsetWidth / 2 + "px";
        break;
      default:
        ripple.style.top = e2.pageY - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop + "px";
        ripple.style.left = e2.pageX - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft + "px";
    }
    ripple.style.backgroundColor = opts.bgc;
    ripple.className = "e-ripple z-active";
    return false;
  }
}
var _export_sfc$1 = (sfc, props2) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props2) {
    target[key] = val;
  }
  return target;
};
var _sfc_main$1q = {
  props: {
    field: {
      type: String,
      "default": "avatar"
    },
    ki: {
      type: String,
      "default": "0"
    },
    modelValue: {
      type: Boolean,
      "default": true
    },
    url: {
      type: String,
      "default": ""
    },
    params: {
      type: Object,
      "default": () => null
    },
    headers: {
      type: Object,
      "default": () => null
    },
    width: {
      type: Number,
      default: 200
    },
    height: {
      type: Number,
      default: 200
    },
    noRotate: {
      type: Boolean,
      default: true
    },
    noCircle: {
      type: Boolean,
      default: false
    },
    noSquare: {
      type: Boolean,
      default: false
    },
    maxSize: {
      type: Number,
      "default": 10240
    },
    langType: {
      type: String,
      "default": "zh"
    },
    langExt: {
      type: Object,
      "default": () => null
    },
    imgFormat: {
      type: String,
      "default": "png"
    },
    imgBgc: {
      type: String,
      "default": "#fff"
    },
    withCredentials: {
      type: Boolean,
      "default": false
    },
    method: {
      type: String,
      "default": "POST"
    },
    initialImgUrl: {
      type: String,
      "default": ""
    },
    allowImgFormat: {
      type: Array,
      "default": () => [
        "gif",
        "jpg",
        "png"
      ]
    }
  },
  data() {
    let that = this, {
      imgFormat,
      allowImgFormat,
      langType,
      langExt,
      width,
      height
    } = that, isSupported = true, tempImgFormat = allowImgFormat.indexOf(imgFormat) === -1 ? "jpg" : imgFormat, lang = language[langType] ? language[langType] : language["en"], mime = mimes[tempImgFormat];
    if (langExt) {
      Object.assign(lang, langExt);
    }
    if (typeof FormData != "function") {
      isSupported = false;
    }
    return {
      mime,
      lang,
      isSupported,
      isSupportTouch: document.hasOwnProperty("ontouchstart"),
      step: 1,
      loading: 0,
      progress: 0,
      hasError: false,
      errorMsg: "",
      ratio: width / height,
      sourceImg: null,
      sourceImgUrl: this.initialImgUrl,
      createImgUrl: this.initialImgUrl,
      sourceImgMouseDown: {
        on: false,
        mX: 0,
        mY: 0,
        x: 0,
        y: 0
      },
      previewContainer: {
        width: 100,
        height: 100
      },
      sourceImgContainer: {
        width: 240,
        height: 184
      },
      scale: {
        zoomAddOn: false,
        zoomSubOn: false,
        range: 1,
        x: 0,
        y: 0,
        width: 0,
        height: 0,
        maxWidth: 0,
        maxHeight: 0,
        minWidth: 0,
        minHeight: 0,
        naturalWidth: 0,
        naturalHeight: 0
      }
    };
  },
  computed: {
    progressStyle() {
      let {
        progress
      } = this;
      return {
        width: progress + "%"
      };
    },
    sourceImgStyle() {
      let {
        scale,
        sourceImgMasking
      } = this, top = scale.y + sourceImgMasking.y + "px", left = scale.x + sourceImgMasking.x + "px";
      return {
        top,
        left,
        width: scale.width + "px",
        height: scale.height + "px"
      };
    },
    sourceImgMasking() {
      let {
        width,
        height,
        ratio,
        sourceImgContainer
      } = this, sic = sourceImgContainer, sicRatio = sic.width / sic.height, x2 = 0, y3 = 0, w2 = sic.width, h4 = sic.height, scale = 1;
      if (ratio < sicRatio) {
        scale = sic.height / height;
        w2 = sic.height * ratio;
        x2 = (sic.width - w2) / 2;
      }
      if (ratio > sicRatio) {
        scale = sic.width / width;
        h4 = sic.width / ratio;
        y3 = (sic.height - h4) / 2;
      }
      return {
        scale,
        x: x2,
        y: y3,
        width: w2,
        height: h4
      };
    },
    sourceImgShadeStyle() {
      let {
        sourceImgMasking,
        sourceImgContainer
      } = this, sic = sourceImgContainer, sim = sourceImgMasking, w2 = sim.width == sic.width ? sim.width : (sic.width - sim.width) / 2, h4 = sim.height == sic.height ? sim.height : (sic.height - sim.height) / 2;
      return {
        width: w2 + "px",
        height: h4 + "px"
      };
    },
    previewStyle() {
      let {
        width,
        height,
        ratio,
        previewContainer
      } = this, pc = previewContainer, w2 = pc.width, h4 = pc.height, pcRatio = w2 / h4;
      if (ratio < pcRatio) {
        w2 = pc.height * ratio;
      }
      if (ratio > pcRatio) {
        h4 = pc.width / ratio;
      }
      return {
        width: w2 + "px",
        height: h4 + "px"
      };
    }
  },
  watch: {
    modelValue(newValue) {
      if (newValue && this.loading != 1) {
        this.reset();
      }
    }
  },
  created() {
    document.addEventListener("keyup", this.handleEscClose);
  },
  beforeUnmount() {
    document.removeEventListener("keyup", this.handleEscClose);
  },
  mounted() {
    if (this.sourceImgUrl) {
      this.startCrop();
    }
  },
  methods: {
    handleEscClose(e2) {
      if (this.modelValue && (e2.key == "Escape" || e2.keyCode == 27)) {
        this.off();
      }
    },
    ripple(e2) {
      effectRipple(e2);
    },
    off() {
      setTimeout(() => {
        this.$emit("update:modelValue", false);
        if (this.step == 3 && this.loading == 2) {
          this.setStep(1);
        }
      }, 200);
    },
    setStep(no2) {
      setTimeout(() => {
        this.step = no2;
      }, 200);
    },
    preventDefault(e2) {
      e2.preventDefault();
      return false;
    },
    handleClick(e2) {
      if (this.loading !== 1) {
        if (e2.target !== this.$refs.fileinput) {
          e2.preventDefault();
          if (document.activeElement !== this.$refs) {
            this.$refs.fileinput.click();
          }
        }
      }
    },
    handleChange(e2) {
      e2.preventDefault();
      if (this.loading !== 1) {
        let files = e2.target.files || e2.dataTransfer.files;
        this.reset();
        if (this.checkFile(files[0])) {
          this.setSourceImg(files[0]);
        }
      }
    },
    checkFile(file) {
      let that = this, {
        lang,
        maxSize
      } = that;
      if (file.type.indexOf("image") === -1) {
        that.hasError = true;
        that.errorMsg = lang.error.onlyImg;
        return false;
      }
      if (file.size / 1024 > maxSize) {
        that.hasError = true;
        that.errorMsg = lang.error.outOfSize + maxSize + "kb";
        return false;
      }
      return true;
    },
    reset() {
      let that = this;
      that.loading = 0;
      that.hasError = false;
      that.errorMsg = "";
      that.progress = 0;
    },
    setSourceImg(file) {
      this.$emit("src-file-set", file.name, file.type, file.size);
      let that = this, fr2 = new FileReader();
      fr2.onload = function(e2) {
        that.sourceImgUrl = fr2.result;
        that.startCrop();
      };
      fr2.readAsDataURL(file);
    },
    startCrop() {
      let that = this, {
        width,
        height,
        ratio,
        scale,
        sourceImgUrl,
        sourceImgMasking,
        lang
      } = that, sim = sourceImgMasking, img = new Image();
      img.src = sourceImgUrl;
      img.onload = function() {
        let nWidth = img.naturalWidth, nHeight = img.naturalHeight, nRatio = nWidth / nHeight, w2 = sim.width, h4 = sim.height, x2 = 0, y3 = 0;
        if (nWidth < width || nHeight < height) {
          that.hasError = true;
          that.errorMsg = lang.error.lowestPx + width + "*" + height;
          return false;
        }
        if (ratio > nRatio) {
          h4 = w2 / nRatio;
          y3 = (sim.height - h4) / 2;
        }
        if (ratio < nRatio) {
          w2 = h4 * nRatio;
          x2 = (sim.width - w2) / 2;
        }
        scale.range = 0;
        scale.x = x2;
        scale.y = y3;
        scale.width = w2;
        scale.height = h4;
        scale.minWidth = w2;
        scale.minHeight = h4;
        scale.maxWidth = nWidth * sim.scale;
        scale.maxHeight = nHeight * sim.scale;
        scale.naturalWidth = nWidth;
        scale.naturalHeight = nHeight;
        that.sourceImg = img;
        that.createImg();
        that.setStep(2);
      };
    },
    imgStartMove(e2) {
      e2.preventDefault();
      if (this.isSupportTouch && !e2.targetTouches) {
        return false;
      }
      let et2 = e2.targetTouches ? e2.targetTouches[0] : e2, {
        sourceImgMouseDown,
        scale
      } = this, simd = sourceImgMouseDown;
      simd.mX = et2.screenX;
      simd.mY = et2.screenY;
      simd.x = scale.x;
      simd.y = scale.y;
      simd.on = true;
    },
    imgMove(e2) {
      e2.preventDefault();
      if (this.isSupportTouch && !e2.targetTouches) {
        return false;
      }
      let et2 = e2.targetTouches ? e2.targetTouches[0] : e2, {
        sourceImgMouseDown: {
          on: on2,
          mX,
          mY,
          x: x2,
          y: y3
        },
        scale,
        sourceImgMasking
      } = this, sim = sourceImgMasking, nX = et2.screenX, nY = et2.screenY, dX = nX - mX, dY = nY - mY, rX = x2 + dX, rY = y3 + dY;
      if (!on2)
        return;
      if (rX > 0) {
        rX = 0;
      }
      if (rY > 0) {
        rY = 0;
      }
      if (rX < sim.width - scale.width) {
        rX = sim.width - scale.width;
      }
      if (rY < sim.height - scale.height) {
        rY = sim.height - scale.height;
      }
      scale.x = rX;
      scale.y = rY;
    },
    rotateImg(e2) {
      let {
        sourceImg,
        scale: {
          naturalWidth,
          naturalHeight
        }
      } = this, width = naturalHeight, height = naturalWidth, canvas = this.$refs.canvas, ctx = canvas.getContext("2d");
      canvas.width = width;
      canvas.height = height;
      ctx.clearRect(0, 0, width, height);
      ctx.fillStyle = "rgba(0,0,0,0)";
      ctx.fillRect(0, 0, width, height);
      ctx.translate(width, 0);
      ctx.rotate(Math.PI * 90 / 180);
      ctx.drawImage(sourceImg, 0, 0, naturalWidth, naturalHeight);
      let imgUrl = canvas.toDataURL(mimes["png"]);
      this.sourceImgUrl = imgUrl;
      this.startCrop();
    },
    handleMouseWheel(e2) {
      e2 = e2 || window.event;
      let { scale } = this;
      if (e2.wheelDelta) {
        if (e2.wheelDelta > 0) {
          this.zoomImg(scale.range >= 100 ? 100 : ++scale.range);
        }
        if (e2.wheelDelta < 0) {
          this.zoomImg(scale.range <= 0 ? 0 : --scale.range);
        }
      } else if (e2.detail) {
        if (e2.detail > 0) {
          this.zoomImg(scale.range >= 100 ? 100 : ++scale.range);
        }
        if (e2.detail < 0) {
          this.zoomImg(scale.range <= 0 ? 0 : --scale.range);
        }
      }
    },
    startZoomAdd(e2) {
      let that = this, {
        scale
      } = that;
      scale.zoomAddOn = true;
      function zoom() {
        if (scale.zoomAddOn) {
          let range = scale.range >= 100 ? 100 : ++scale.range;
          that.zoomImg(range);
          setTimeout(function() {
            zoom();
          }, 60);
        }
      }
      zoom();
    },
    endZoomAdd(e2) {
      this.scale.zoomAddOn = false;
    },
    startZoomSub(e2) {
      let that = this, {
        scale
      } = that;
      scale.zoomSubOn = true;
      function zoom() {
        if (scale.zoomSubOn) {
          let range = scale.range <= 0 ? 0 : --scale.range;
          that.zoomImg(range);
          setTimeout(function() {
            zoom();
          }, 60);
        }
      }
      zoom();
    },
    endZoomSub(e2) {
      let {
        scale
      } = this;
      scale.zoomSubOn = false;
    },
    zoomChange(e2) {
      this.zoomImg(e2.target.value);
    },
    zoomImg(newRange) {
      let that = this, {
        sourceImgMasking,
        sourceImgMouseDown,
        scale
      } = this, {
        maxWidth,
        maxHeight,
        minWidth,
        minHeight,
        width,
        height,
        x: x2,
        y: y3,
        range
      } = scale, sim = sourceImgMasking, sWidth = sim.width, sHeight = sim.height, nWidth = minWidth + (maxWidth - minWidth) * newRange / 100, nHeight = minHeight + (maxHeight - minHeight) * newRange / 100, nX = sWidth / 2 - nWidth / width * (sWidth / 2 - x2), nY = sHeight / 2 - nHeight / height * (sHeight / 2 - y3);
      if (nX > 0) {
        nX = 0;
      }
      if (nY > 0) {
        nY = 0;
      }
      if (nX < sWidth - nWidth) {
        nX = sWidth - nWidth;
      }
      if (nY < sHeight - nHeight) {
        nY = sHeight - nHeight;
      }
      scale.x = nX;
      scale.y = nY;
      scale.width = nWidth;
      scale.height = nHeight;
      scale.range = newRange;
      setTimeout(function() {
        if (scale.range == newRange) {
          that.createImg();
        }
      }, 300);
    },
    createImg(e2) {
      let that = this, {
        imgFormat,
        imgBgc,
        mime,
        sourceImg,
        scale: {
          x: x2,
          y: y3,
          width,
          height
        },
        sourceImgMasking: {
          scale
        }
      } = that, canvas = that.$refs.canvas, ctx = canvas.getContext("2d");
      if (e2) {
        that.sourceImgMouseDown.on = false;
      }
      canvas.width = that.width;
      canvas.height = that.height;
      ctx.clearRect(0, 0, that.width, that.height);
      if (imgFormat == "png") {
        ctx.fillStyle = "rgba(0,0,0,0)";
      } else {
        ctx.fillStyle = imgBgc;
      }
      ctx.fillRect(0, 0, that.width, that.height);
      ctx.drawImage(sourceImg, x2 / scale, y3 / scale, width / scale, height / scale);
      that.createImgUrl = canvas.toDataURL(mime);
    },
    prepareUpload() {
      let {
        url,
        createImgUrl,
        field,
        ki
      } = this;
      this.$emit("crop-success", createImgUrl, field, ki);
      if (typeof url == "string" && url) {
        this.upload();
      } else {
        this.off();
      }
    },
    upload() {
      let that = this, {
        lang,
        imgFormat,
        mime,
        url,
        params,
        headers,
        field,
        ki,
        createImgUrl,
        withCredentials,
        method
      } = this, fmData = new FormData();
      if (typeof params == "object" && params) {
        Object.keys(params).forEach((k2) => {
          fmData.append(k2, params[k2]);
        });
      }
      fmData.append(field, data2blob(createImgUrl, mime), field + "." + imgFormat);
      const uploadProgress = function(event) {
        if (event.lengthComputable) {
          that.progress = 100 * Math.round(event.loaded) / event.total;
        }
      };
      that.reset();
      that.loading = 1;
      that.setStep(3);
      new Promise(function(resolve, reject) {
        let client = new XMLHttpRequest();
        client.open(method, url, true);
        client.withCredentials = withCredentials;
        client.onreadystatechange = function() {
          if (this.readyState !== 4) {
            return;
          }
          if (this.status === 200 || this.status === 201 || this.staus === 202) {
            resolve(JSON.parse(this.responseText));
          } else {
            reject(this.status);
          }
        };
        client.upload.addEventListener("progress", uploadProgress, false);
        if (typeof headers == "object" && headers) {
          Object.keys(headers).forEach((k2) => {
            client.setRequestHeader(k2, headers[k2]);
          });
        }
        client.send(fmData);
      }).then(
        function(resData) {
          if (that.modelValue) {
            that.loading = 2;
            that.$emit("crop-upload-success", resData, field, ki);
          }
        },
        function(sts) {
          if (that.modelValue) {
            that.loading = 3;
            that.hasError = true;
            that.errorMsg = lang.fail;
            that.$emit("crop-upload-fail", sts, field, ki);
          }
        }
      );
    }
  }
};
var _hoisted_1$V = { class: "vue-image-crop-upload" };
var _hoisted_2$G = { class: "vicp-wrap" };
var _hoisted_3$z = createBaseVNode("i", { class: "vicp-icon4" }, null, -1);
var _hoisted_4$p = [
  _hoisted_3$z
];
var _hoisted_5$d = { class: "vicp-step1" };
var _hoisted_6$9 = { class: "vicp-icon1" };
var _hoisted_7$7 = createBaseVNode("i", { class: "vicp-icon1-arrow" }, null, -1);
var _hoisted_8$5 = createBaseVNode("i", { class: "vicp-icon1-body" }, null, -1);
var _hoisted_9$3 = createBaseVNode("i", { class: "vicp-icon1-bottom" }, null, -1);
var _hoisted_10$2 = [
  _hoisted_7$7,
  _hoisted_8$5,
  _hoisted_9$3
];
var _hoisted_11 = { class: "vicp-error" };
var _hoisted_12 = createBaseVNode("i", { class: "vicp-icon2" }, null, -1);
var _hoisted_13 = { class: "vicp-operate" };
var _hoisted_14 = {
  key: 0,
  class: "vicp-step2"
};
var _hoisted_15 = { class: "vicp-crop" };
var _hoisted_16$1 = { class: "vicp-crop-left" };
var _hoisted_17 = ["src"];
var _hoisted_18$1 = { class: "vicp-range" };
var _hoisted_19 = {
  key: 0,
  class: "vicp-rotate"
};
var _hoisted_20 = { class: "vicp-crop-right" };
var _hoisted_21 = { class: "vicp-preview" };
var _hoisted_22 = {
  key: 0,
  class: "vicp-preview-item"
};
var _hoisted_23 = ["src"];
var _hoisted_24 = {
  key: 1,
  class: "vicp-preview-item vicp-preview-item-circle"
};
var _hoisted_25 = ["src"];
var _hoisted_26$1 = { class: "vicp-operate" };
var _hoisted_27 = {
  key: 1,
  class: "vicp-step3"
};
var _hoisted_28$1 = { class: "vicp-upload" };
var _hoisted_29 = { class: "vicp-progress-wrap" };
var _hoisted_30 = { class: "vicp-error" };
var _hoisted_31 = createBaseVNode("i", { class: "vicp-icon2" }, null, -1);
var _hoisted_32 = { class: "vicp-success" };
var _hoisted_33 = createBaseVNode("i", { class: "vicp-icon3" }, null, -1);
var _hoisted_34 = { class: "vicp-operate" };
var _hoisted_35 = ["width", "height"];
function _sfc_render$e(_ctx, _cache, $props, $setup, $data, $options) {
  return withDirectives((openBlock(), createElementBlock("div", _hoisted_1$V, [
    createBaseVNode("div", _hoisted_2$G, [
      createBaseVNode("div", {
        class: "vicp-close",
        onClick: _cache[0] || (_cache[0] = (...args) => $options.off && $options.off(...args))
      }, _hoisted_4$p),
      withDirectives(createBaseVNode("div", _hoisted_5$d, [
        createBaseVNode("div", {
          class: "vicp-drop-area",
          onDragleave: _cache[2] || (_cache[2] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
          onDragover: _cache[3] || (_cache[3] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
          onDragenter: _cache[4] || (_cache[4] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
          onClick: _cache[5] || (_cache[5] = (...args) => $options.handleClick && $options.handleClick(...args)),
          onDrop: _cache[6] || (_cache[6] = (...args) => $options.handleChange && $options.handleChange(...args))
        }, [
          withDirectives(createBaseVNode("i", _hoisted_6$9, _hoisted_10$2, 512), [
            [vShow, $data.loading != 1]
          ]),
          withDirectives(createBaseVNode("span", { class: "vicp-hint" }, toDisplayString($data.lang.hint), 513), [
            [vShow, $data.loading !== 1]
          ]),
          withDirectives(createBaseVNode("span", { class: "vicp-no-supported-hint" }, toDisplayString($data.lang.noSupported), 513), [
            [vShow, !$data.isSupported]
          ]),
          $data.step == 1 ? withDirectives((openBlock(), createElementBlock("input", {
            key: 0,
            type: "file",
            accept: "image/*",
            onChange: _cache[1] || (_cache[1] = (...args) => $options.handleChange && $options.handleChange(...args)),
            ref: "fileinput"
          }, null, 544)), [
            [vShow, false]
          ]) : createCommentVNode("", true)
        ], 32),
        withDirectives(createBaseVNode("div", _hoisted_11, [
          _hoisted_12,
          createTextVNode(" " + toDisplayString($data.errorMsg), 1)
        ], 512), [
          [vShow, $data.hasError]
        ]),
        createBaseVNode("div", _hoisted_13, [
          createBaseVNode("a", {
            onClick: _cache[7] || (_cache[7] = (...args) => $options.off && $options.off(...args)),
            onMousedown: _cache[8] || (_cache[8] = (...args) => $options.ripple && $options.ripple(...args))
          }, toDisplayString($data.lang.btn.off), 33)
        ])
      ], 512), [
        [vShow, $data.step == 1]
      ]),
      $data.step == 2 ? (openBlock(), createElementBlock("div", _hoisted_14, [
        createBaseVNode("div", _hoisted_15, [
          withDirectives(createBaseVNode("div", _hoisted_16$1, [
            createBaseVNode("div", {
              class: "vicp-img-container",
              onWheel: _cache[24] || (_cache[24] = withModifiers((...args) => $options.handleMouseWheel && $options.handleMouseWheel(...args), ["prevent"]))
            }, [
              createBaseVNode("img", {
                src: $data.sourceImgUrl,
                style: normalizeStyle($options.sourceImgStyle),
                class: "vicp-img",
                draggable: "false",
                onDrag: _cache[9] || (_cache[9] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDragstart: _cache[10] || (_cache[10] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDragend: _cache[11] || (_cache[11] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDragleave: _cache[12] || (_cache[12] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDragover: _cache[13] || (_cache[13] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDragenter: _cache[14] || (_cache[14] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onDrop: _cache[15] || (_cache[15] = (...args) => $options.preventDefault && $options.preventDefault(...args)),
                onTouchstart: _cache[16] || (_cache[16] = (...args) => $options.imgStartMove && $options.imgStartMove(...args)),
                onTouchmove: _cache[17] || (_cache[17] = (...args) => $options.imgMove && $options.imgMove(...args)),
                onTouchend: _cache[18] || (_cache[18] = (...args) => $options.createImg && $options.createImg(...args)),
                onTouchcancel: _cache[19] || (_cache[19] = (...args) => $options.createImg && $options.createImg(...args)),
                onMousedown: _cache[20] || (_cache[20] = (...args) => $options.imgStartMove && $options.imgStartMove(...args)),
                onMousemove: _cache[21] || (_cache[21] = (...args) => $options.imgMove && $options.imgMove(...args)),
                onMouseup: _cache[22] || (_cache[22] = (...args) => $options.createImg && $options.createImg(...args)),
                onMouseout: _cache[23] || (_cache[23] = (...args) => $options.createImg && $options.createImg(...args)),
                ref: "img"
              }, null, 44, _hoisted_17),
              createBaseVNode("div", {
                class: "vicp-img-shade vicp-img-shade-1",
                style: normalizeStyle($options.sourceImgShadeStyle)
              }, null, 4),
              createBaseVNode("div", {
                class: "vicp-img-shade vicp-img-shade-2",
                style: normalizeStyle($options.sourceImgShadeStyle)
              }, null, 4)
            ], 32),
            createBaseVNode("div", _hoisted_18$1, [
              withDirectives(createBaseVNode("input", {
                type: "range",
                "onUpdate:modelValue": _cache[25] || (_cache[25] = ($event) => $data.scale.range = $event),
                step: "1",
                min: "0",
                max: "100",
                onMousemove: _cache[26] || (_cache[26] = (...args) => $options.zoomChange && $options.zoomChange(...args))
              }, null, 544), [
                [vModelText, $data.scale.range]
              ]),
              createBaseVNode("i", {
                onMousedown: _cache[27] || (_cache[27] = (...args) => $options.startZoomSub && $options.startZoomSub(...args)),
                onMouseout: _cache[28] || (_cache[28] = (...args) => $options.endZoomSub && $options.endZoomSub(...args)),
                onMouseup: _cache[29] || (_cache[29] = (...args) => $options.endZoomSub && $options.endZoomSub(...args)),
                class: "vicp-icon5"
              }, null, 32),
              createBaseVNode("i", {
                onMousedown: _cache[30] || (_cache[30] = (...args) => $options.startZoomAdd && $options.startZoomAdd(...args)),
                onMouseout: _cache[31] || (_cache[31] = (...args) => $options.endZoomAdd && $options.endZoomAdd(...args)),
                onMouseup: _cache[32] || (_cache[32] = (...args) => $options.endZoomAdd && $options.endZoomAdd(...args)),
                class: "vicp-icon6"
              }, null, 32)
            ]),
            !$props.noRotate ? (openBlock(), createElementBlock("div", _hoisted_19, [
              createBaseVNode("i", {
                onClick: _cache[33] || (_cache[33] = (...args) => $options.rotateImg && $options.rotateImg(...args))
              }, "\u21BB")
            ])) : createCommentVNode("", true)
          ], 512), [
            [vShow, true]
          ]),
          withDirectives(createBaseVNode("div", _hoisted_20, [
            createBaseVNode("div", _hoisted_21, [
              !$props.noSquare ? (openBlock(), createElementBlock("div", _hoisted_22, [
                createBaseVNode("img", {
                  src: $data.createImgUrl,
                  style: normalizeStyle($options.previewStyle)
                }, null, 12, _hoisted_23),
                createBaseVNode("span", null, toDisplayString($data.lang.preview), 1)
              ])) : createCommentVNode("", true),
              !$props.noCircle ? (openBlock(), createElementBlock("div", _hoisted_24, [
                createBaseVNode("img", {
                  src: $data.createImgUrl,
                  style: normalizeStyle($options.previewStyle)
                }, null, 12, _hoisted_25),
                createBaseVNode("span", null, toDisplayString($data.lang.preview), 1)
              ])) : createCommentVNode("", true)
            ])
          ], 512), [
            [vShow, true]
          ])
        ]),
        createBaseVNode("div", _hoisted_26$1, [
          createBaseVNode("a", {
            onClick: _cache[34] || (_cache[34] = ($event) => $options.setStep(1)),
            onMousedown: _cache[35] || (_cache[35] = (...args) => $options.ripple && $options.ripple(...args))
          }, toDisplayString($data.lang.btn.back), 33),
          createBaseVNode("a", {
            class: "vicp-operate-btn",
            onClick: _cache[36] || (_cache[36] = (...args) => $options.prepareUpload && $options.prepareUpload(...args)),
            onMousedown: _cache[37] || (_cache[37] = (...args) => $options.ripple && $options.ripple(...args))
          }, toDisplayString($data.lang.btn.save), 33)
        ])
      ])) : createCommentVNode("", true),
      $data.step == 3 ? (openBlock(), createElementBlock("div", _hoisted_27, [
        createBaseVNode("div", _hoisted_28$1, [
          withDirectives(createBaseVNode("span", { class: "vicp-loading" }, toDisplayString($data.lang.loading), 513), [
            [vShow, $data.loading === 1]
          ]),
          createBaseVNode("div", _hoisted_29, [
            withDirectives(createBaseVNode("span", {
              class: "vicp-progress",
              style: normalizeStyle($options.progressStyle)
            }, null, 4), [
              [vShow, $data.loading === 1]
            ])
          ]),
          withDirectives(createBaseVNode("div", _hoisted_30, [
            _hoisted_31,
            createTextVNode(" " + toDisplayString($data.errorMsg), 1)
          ], 512), [
            [vShow, $data.hasError]
          ]),
          withDirectives(createBaseVNode("div", _hoisted_32, [
            _hoisted_33,
            createTextVNode(" " + toDisplayString($data.lang.success), 1)
          ], 512), [
            [vShow, $data.loading === 2]
          ])
        ]),
        createBaseVNode("div", _hoisted_34, [
          createBaseVNode("a", {
            onClick: _cache[38] || (_cache[38] = ($event) => $options.setStep(2)),
            onMousedown: _cache[39] || (_cache[39] = (...args) => $options.ripple && $options.ripple(...args))
          }, toDisplayString($data.lang.btn.back), 33),
          createBaseVNode("a", {
            onClick: _cache[40] || (_cache[40] = (...args) => $options.off && $options.off(...args)),
            onMousedown: _cache[41] || (_cache[41] = (...args) => $options.ripple && $options.ripple(...args))
          }, toDisplayString($data.lang.btn.close), 33)
        ])
      ])) : createCommentVNode("", true),
      withDirectives(createBaseVNode("canvas", {
        width: $props.width,
        height: $props.height,
        ref: "canvas"
      }, null, 8, _hoisted_35), [
        [vShow, false]
      ])
    ])
  ], 512)), [
    [vShow, $props.modelValue]
  ]);
}
var VueImageUpload = _export_sfc$1(_sfc_main$1q, [["render", _sfc_render$e]]);
var _hoisted_1$U = {
  key: 0,
  class: "hy-image-uploader"
};
var _sfc_main$1p = defineComponent({
  props: {
    width: null,
    height: null,
    acceptTypeList: null,
    maxSize: null,
    isUploadImageShow: { type: Boolean },
    hint: null
  },
  emits: ["selectImage", "closeImageUpload", "fileTypeError"],
  setup(__props, { emit }) {
    const props2 = __props;
    const key = ref(0);
    const handleSrc = (_2, fileType) => {
      const fileExtension = fileType.split("image/")[1];
      if (!props2.acceptTypeList.includes(fileExtension)) {
        emit("fileTypeError");
        key.value++;
      }
    };
    const LANG_EXT = {
      hint: props2.hint,
      preview: "Preview",
      btn: {
        off: "Cancel",
        close: "Close",
        back: "Back",
        save: "Save"
      },
      error: {
        onlyImg: "Only accept image file.",
        lowestPx: "Expected size at least: ",
        outOfSize: "Maximun size "
      }
    };
    const cropSuccess = (url) => {
      emit("selectImage", url);
    };
    return (_ctx, _cache) => {
      return __props.isUploadImageShow ? (openBlock(), createElementBlock("div", _hoisted_1$U, [
        (openBlock(), createBlock(VueImageUpload, {
          key: key.value,
          "lang-ext": LANG_EXT,
          "no-circle": true,
          "no-square": true,
          width: __props.width,
          height: __props.height,
          "max-size": __props.maxSize,
          "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => emit("closeImageUpload")),
          onSrcFileSet: handleSrc,
          onCropSuccess: cropSuccess
        }, null, 8, ["width", "height", "max-size"]))
      ])) : createCommentVNode("", true);
    };
  }
});
var _hoisted_1$T = {
  key: 0,
  class: "option-index"
};
var _hoisted_2$F = { class: "col option-content" };
var _hoisted_3$y = createBaseVNode("div", null, "No Data", -1);
var _sfc_main$1o = defineComponent({
  props: {
    optionList: null,
    isOptionSelected: null,
    showOptionIndex: { type: Boolean },
    showOptionDivider: { type: Boolean }
  },
  emits: ["selectOption"],
  setup(__props, { emit }) {
    const props2 = __props;
    const optionRef = ref(null);
    const optionsContainerPosition = reactive({
      top: "undefined",
      bottom: "undefined",
      transform: "undefined",
      left: "undefined",
      right: "undefined"
    });
    const noData = computed(() => {
      return !props2.optionList.filter((option2) => !option2.hidden).length;
    });
    const setUpOption = () => {
      if (optionRef.value) {
        const parentEl = optionRef.value.parentElement;
        const containerRect = parentEl.getBoundingClientRect();
        const sidebarEl = document.querySelector(".hy-sidebar");
        const totalHeight = window.innerHeight;
        let sidebarWidth = 0;
        if (sidebarEl) {
          sidebarWidth = sidebarEl.clientWidth;
        }
        const totalWidth = window.innerWidth;
        const containerBottomOffset = totalHeight - containerRect.bottom;
        const containerLeftOffset = containerRect.left - sidebarWidth;
        const containerRightOffset = totalWidth - containerRect.left - containerRect.width;
        if (containerBottomOffset >= containerRect.top) {
          optionsContainerPosition.top = "undefined";
          optionsContainerPosition.bottom = "-8px";
          optionsContainerPosition.transform = "translateY(100%)";
        } else {
          optionsContainerPosition.top = "-8px";
          optionsContainerPosition.bottom = "undefined";
          optionsContainerPosition.transform = "translateY(-100%)";
        }
        if (containerLeftOffset >= containerRightOffset) {
          optionsContainerPosition.left = "undefined";
          optionsContainerPosition.right = "0";
        } else {
          optionsContainerPosition.left = "0";
          optionsContainerPosition.right = "undefined";
        }
      }
    };
    const getOptionIndex = (index) => {
      return (index + 1).toString().padStart(2, "0");
    };
    onMounted(() => {
      setUpOption();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("ul", {
        ref_key: "optionRef",
        ref: optionRef,
        class: "hy-select-option",
        style: normalizeStyle(unref(optionsContainerPosition))
      }, [
        renderSlot(_ctx.$slots, "default"),
        createBaseVNode("div", null, [
          (openBlock(true), createElementBlock(Fragment, null, renderList(__props.optionList, (option2, index) => {
            return withDirectives((openBlock(), createBlock(unref(_sfc_main$k), {
              key: index,
              "no-divider": index === __props.optionList.length - 1 || !__props.showOptionDivider,
              class: normalizeClass({
                disabled: option2.disabled,
                selected: __props.isOptionSelected ? __props.isOptionSelected(option2) : false
              }),
              onClick: withModifiers(($event) => !option2.disabled ? emit("selectOption", option2.value) : void 0, ["stop"])
            }, {
              default: withCtx(() => {
                var _a2;
                return [
                  __props.showOptionIndex ? (openBlock(), createElementBlock("div", _hoisted_1$T, toDisplayString(getOptionIndex(index)), 1)) : createCommentVNode("", true),
                  createBaseVNode("span", _hoisted_2$F, toDisplayString((_a2 = option2.label) != null ? _a2 : option2.value), 1)
                ];
              }),
              _: 2
            }, 1032, ["no-divider", "class", "onClick"])), [
              [vShow, !option2.hidden]
            ]);
          }), 128)),
          unref(noData) ? (openBlock(), createBlock(unref(_sfc_main$k), {
            key: 0,
            "no-divider": true,
            class: "disabled"
          }, {
            default: withCtx(() => [
              _hoisted_3$y
            ]),
            _: 1
          })) : createCommentVNode("", true)
        ])
      ], 4);
    };
  }
});
var useClickAway = (targetRef, onResult) => {
  const drawerEl = ref(null);
  const onClickAway = (event) => {
    var _a2;
    if (event.target instanceof HTMLElement && targetRef.value instanceof HTMLElement && !(event.target === targetRef.value || ((_a2 = targetRef.value) == null ? void 0 : _a2.contains(event.target)))) {
      onResult();
    }
  };
  onMounted(() => {
    var _a2;
    drawerEl.value = (_a2 = document.getElementsByClassName("el-drawer")[0]) != null ? _a2 : null;
    document.addEventListener("click", onClickAway);
    if (drawerEl.value instanceof HTMLElement) {
      drawerEl.value.addEventListener("click", onClickAway);
    }
  });
  onUnmounted(() => {
    document.removeEventListener("click", onClickAway);
    if (drawerEl.value instanceof HTMLElement) {
      drawerEl.value.removeEventListener("click", onClickAway);
    }
  });
};
var _sfc_main$1n = defineComponent({
  props: {
    modelValue: null,
    buttonType: null,
    optionList: null,
    showOption: { type: Boolean }
  },
  emits: ["update:modelValue", "blur"],
  setup(__props, { emit }) {
    const props2 = __props;
    const wrapperRef = ref(null);
    useClickAway(wrapperRef, () => {
      emit("blur");
    });
    const content = computed(() => {
      var _a2;
      const result = props2.optionList.find((option2) => option2.value == props2.modelValue);
      return result ? (_a2 = result.label) != null ? _a2 : result.value : "Please select";
    });
    const onSelect = (value) => {
      emit("update:modelValue", value);
      emit("blur");
    };
    const isOptionSelected = (option2) => {
      return props2.modelValue === option2.value;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "wrapperRef",
        ref: wrapperRef,
        class: "hy-selector-button"
      }, [
        createVNode(unref(_sfc_main$1u), {
          type: __props.buttonType,
          class: "button-with-trailing-icon"
        }, {
          default: withCtx(() => [
            createTextVNode(toDisplayString(unref(content)) + " ", 1),
            createVNode(unref(_sfc_main$1w), {
              icon: unref(Icons).ARROW_DROPDOWN,
              class: "trailing-icon"
            }, null, 8, ["icon"]),
            __props.showOption ? (openBlock(), createBlock(unref(_sfc_main$1o), {
              key: 0,
              "option-list": __props.optionList,
              "is-option-selected": isOptionSelected,
              onSelectOption: onSelect
            }, null, 8, ["option-list"])) : createCommentVNode("", true)
          ]),
          _: 1
        }, 8, ["type"])
      ], 512);
    };
  }
});
var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
var freeGlobal$1 = freeGlobal;
var freeSelf = typeof self == "object" && self && self.Object === Object && self;
var root = freeGlobal$1 || freeSelf || Function("return this")();
var root$1 = root;
var Symbol$1 = root$1.Symbol;
var Symbol$2 = Symbol$1;
var objectProto$b = Object.prototype;
var hasOwnProperty$9 = objectProto$b.hasOwnProperty;
var nativeObjectToString$1 = objectProto$b.toString;
var symToStringTag$1 = Symbol$2 ? Symbol$2.toStringTag : void 0;
function getRawTag(value) {
  var isOwn = hasOwnProperty$9.call(value, symToStringTag$1), tag2 = value[symToStringTag$1];
  try {
    value[symToStringTag$1] = void 0;
    var unmasked = true;
  } catch (e2) {
  }
  var result = nativeObjectToString$1.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag$1] = tag2;
    } else {
      delete value[symToStringTag$1];
    }
  }
  return result;
}
var objectProto$a = Object.prototype;
var nativeObjectToString = objectProto$a.toString;
function objectToString$1(value) {
  return nativeObjectToString.call(value);
}
var nullTag = "[object Null]";
var undefinedTag = "[object Undefined]";
var symToStringTag = Symbol$2 ? Symbol$2.toStringTag : void 0;
function baseGetTag(value) {
  if (value == null) {
    return value === void 0 ? undefinedTag : nullTag;
  }
  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString$1(value);
}
function isObjectLike(value) {
  return value != null && typeof value == "object";
}
var symbolTag$1 = "[object Symbol]";
function isSymbol$1(value) {
  return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag$1;
}
function arrayMap(array, iteratee) {
  var index = -1, length = array == null ? 0 : array.length, result = Array(length);
  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}
var isArray$1 = Array.isArray;
var isArray$2 = isArray$1;
var INFINITY$1 = 1 / 0;
var symbolProto$1 = Symbol$2 ? Symbol$2.prototype : void 0;
var symbolToString = symbolProto$1 ? symbolProto$1.toString : void 0;
function baseToString(value) {
  if (typeof value == "string") {
    return value;
  }
  if (isArray$2(value)) {
    return arrayMap(value, baseToString) + "";
  }
  if (isSymbol$1(value)) {
    return symbolToString ? symbolToString.call(value) : "";
  }
  var result = value + "";
  return result == "0" && 1 / value == -INFINITY$1 ? "-0" : result;
}
var reWhitespace = /\s/;
function trimmedEndIndex(string) {
  var index = string.length;
  while (index-- && reWhitespace.test(string.charAt(index))) {
  }
  return index;
}
var reTrimStart = /^\s+/;
function baseTrim(string) {
  return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, "") : string;
}
function isObject$2(value) {
  var type = typeof value;
  return value != null && (type == "object" || type == "function");
}
var NAN = 0 / 0;
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
var reIsBinary = /^0b[01]+$/i;
var reIsOctal = /^0o[0-7]+$/i;
var freeParseInt = parseInt;
function toNumber$1(value) {
  if (typeof value == "number") {
    return value;
  }
  if (isSymbol$1(value)) {
    return NAN;
  }
  if (isObject$2(value)) {
    var other = typeof value.valueOf == "function" ? value.valueOf() : value;
    value = isObject$2(other) ? other + "" : other;
  }
  if (typeof value != "string") {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
}
var asyncTag = "[object AsyncFunction]";
var funcTag$1 = "[object Function]";
var genTag = "[object GeneratorFunction]";
var proxyTag = "[object Proxy]";
function isFunction$2(value) {
  if (!isObject$2(value)) {
    return false;
  }
  var tag2 = baseGetTag(value);
  return tag2 == funcTag$1 || tag2 == genTag || tag2 == asyncTag || tag2 == proxyTag;
}
var coreJsData = root$1["__core-js_shared__"];
var coreJsData$1 = coreJsData;
var maskSrcKey = function() {
  var uid = /[^.]+$/.exec(coreJsData$1 && coreJsData$1.keys && coreJsData$1.keys.IE_PROTO || "");
  return uid ? "Symbol(src)_1." + uid : "";
}();
function isMasked(func) {
  return !!maskSrcKey && maskSrcKey in func;
}
var funcProto$1 = Function.prototype;
var funcToString$1 = funcProto$1.toString;
function toSource(func) {
  if (func != null) {
    try {
      return funcToString$1.call(func);
    } catch (e2) {
    }
    try {
      return func + "";
    } catch (e2) {
    }
  }
  return "";
}
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
var reIsHostCtor = /^\[object .+?Constructor\]$/;
var funcProto = Function.prototype;
var objectProto$9 = Object.prototype;
var funcToString = funcProto.toString;
var hasOwnProperty$8 = objectProto$9.hasOwnProperty;
var reIsNative = RegExp(
  "^" + funcToString.call(hasOwnProperty$8).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function baseIsNative(value) {
  if (!isObject$2(value) || isMasked(value)) {
    return false;
  }
  var pattern = isFunction$2(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}
function getValue(object, key) {
  return object == null ? void 0 : object[key];
}
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : void 0;
}
var WeakMap = getNative(root$1, "WeakMap");
var WeakMap$1 = WeakMap;
var MAX_SAFE_INTEGER$1 = 9007199254740991;
var reIsUint = /^(?:0|[1-9]\d*)$/;
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER$1 : length;
  return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
}
function eq(value, other) {
  return value === other || value !== value && other !== other;
}
var MAX_SAFE_INTEGER = 9007199254740991;
function isLength(value) {
  return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction$2(value);
}
var objectProto$8 = Object.prototype;
function isPrototype(value) {
  var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto$8;
  return value === proto;
}
function baseTimes(n, iteratee) {
  var index = -1, result = Array(n);
  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}
var argsTag$2 = "[object Arguments]";
function baseIsArguments(value) {
  return isObjectLike(value) && baseGetTag(value) == argsTag$2;
}
var objectProto$7 = Object.prototype;
var hasOwnProperty$7 = objectProto$7.hasOwnProperty;
var propertyIsEnumerable$1 = objectProto$7.propertyIsEnumerable;
var isArguments = baseIsArguments(function() {
  return arguments;
}()) ? baseIsArguments : function(value) {
  return isObjectLike(value) && hasOwnProperty$7.call(value, "callee") && !propertyIsEnumerable$1.call(value, "callee");
};
var isArguments$1 = isArguments;
function stubFalse() {
  return false;
}
var freeExports$1 = typeof exports == "object" && exports && !exports.nodeType && exports;
var freeModule$1 = freeExports$1 && typeof module == "object" && module && !module.nodeType && module;
var moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;
var Buffer = moduleExports$1 ? root$1.Buffer : void 0;
var nativeIsBuffer = Buffer ? Buffer.isBuffer : void 0;
var isBuffer = nativeIsBuffer || stubFalse;
var isBuffer$1 = isBuffer;
var argsTag$1 = "[object Arguments]";
var arrayTag$1 = "[object Array]";
var boolTag$1 = "[object Boolean]";
var dateTag$1 = "[object Date]";
var errorTag$1 = "[object Error]";
var funcTag = "[object Function]";
var mapTag$2 = "[object Map]";
var numberTag$1 = "[object Number]";
var objectTag$2 = "[object Object]";
var regexpTag$1 = "[object RegExp]";
var setTag$2 = "[object Set]";
var stringTag$1 = "[object String]";
var weakMapTag$1 = "[object WeakMap]";
var arrayBufferTag$1 = "[object ArrayBuffer]";
var dataViewTag$2 = "[object DataView]";
var float32Tag = "[object Float32Array]";
var float64Tag = "[object Float64Array]";
var int8Tag = "[object Int8Array]";
var int16Tag = "[object Int16Array]";
var int32Tag = "[object Int32Array]";
var uint8Tag = "[object Uint8Array]";
var uint8ClampedTag = "[object Uint8ClampedArray]";
var uint16Tag = "[object Uint16Array]";
var uint32Tag = "[object Uint32Array]";
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag$1] = typedArrayTags[arrayTag$1] = typedArrayTags[arrayBufferTag$1] = typedArrayTags[boolTag$1] = typedArrayTags[dataViewTag$2] = typedArrayTags[dateTag$1] = typedArrayTags[errorTag$1] = typedArrayTags[funcTag] = typedArrayTags[mapTag$2] = typedArrayTags[numberTag$1] = typedArrayTags[objectTag$2] = typedArrayTags[regexpTag$1] = typedArrayTags[setTag$2] = typedArrayTags[stringTag$1] = typedArrayTags[weakMapTag$1] = false;
function baseIsTypedArray(value) {
  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
}
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}
var freeExports = typeof exports == "object" && exports && !exports.nodeType && exports;
var freeModule = freeExports && typeof module == "object" && module && !module.nodeType && module;
var moduleExports = freeModule && freeModule.exports === freeExports;
var freeProcess = moduleExports && freeGlobal$1.process;
var nodeUtil = function() {
  try {
    var types = freeModule && freeModule.require && freeModule.require("util").types;
    if (types) {
      return types;
    }
    return freeProcess && freeProcess.binding && freeProcess.binding("util");
  } catch (e2) {
  }
}();
var nodeUtil$1 = nodeUtil;
var nodeIsTypedArray = nodeUtil$1 && nodeUtil$1.isTypedArray;
var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
var isTypedArray$1 = isTypedArray;
var objectProto$6 = Object.prototype;
var hasOwnProperty$6 = objectProto$6.hasOwnProperty;
function arrayLikeKeys(value, inherited) {
  var isArr = isArray$2(value), isArg = !isArr && isArguments$1(value), isBuff = !isArr && !isArg && isBuffer$1(value), isType = !isArr && !isArg && !isBuff && isTypedArray$1(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;
  for (var key in value) {
    if ((inherited || hasOwnProperty$6.call(value, key)) && !(skipIndexes && (key == "length" || isBuff && (key == "offset" || key == "parent") || isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || isIndex(key, length)))) {
      result.push(key);
    }
  }
  return result;
}
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}
var nativeKeys = overArg(Object.keys, Object);
var nativeKeys$1 = nativeKeys;
var objectProto$5 = Object.prototype;
var hasOwnProperty$5 = objectProto$5.hasOwnProperty;
function baseKeys(object) {
  if (!isPrototype(object)) {
    return nativeKeys$1(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty$5.call(object, key) && key != "constructor") {
      result.push(key);
    }
  }
  return result;
}
function keys$1(object) {
  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
}
var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;
var reIsPlainProp = /^\w*$/;
function isKey(value, object) {
  if (isArray$2(value)) {
    return false;
  }
  var type = typeof value;
  if (type == "number" || type == "symbol" || type == "boolean" || value == null || isSymbol$1(value)) {
    return true;
  }
  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
}
var nativeCreate = getNative(Object, "create");
var nativeCreate$1 = nativeCreate;
function hashClear() {
  this.__data__ = nativeCreate$1 ? nativeCreate$1(null) : {};
  this.size = 0;
}
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}
var HASH_UNDEFINED$2 = "__lodash_hash_undefined__";
var objectProto$4 = Object.prototype;
var hasOwnProperty$4 = objectProto$4.hasOwnProperty;
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate$1) {
    var result = data[key];
    return result === HASH_UNDEFINED$2 ? void 0 : result;
  }
  return hasOwnProperty$4.call(data, key) ? data[key] : void 0;
}
var objectProto$3 = Object.prototype;
var hasOwnProperty$3 = objectProto$3.hasOwnProperty;
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate$1 ? data[key] !== void 0 : hasOwnProperty$3.call(data, key);
}
var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = nativeCreate$1 && value === void 0 ? HASH_UNDEFINED$1 : value;
  return this;
}
function Hash(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
Hash.prototype.clear = hashClear;
Hash.prototype["delete"] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}
var arrayProto = Array.prototype;
var splice = arrayProto.splice;
function listCacheDelete(key) {
  var data = this.__data__, index = assocIndexOf(data, key);
  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}
function listCacheGet(key) {
  var data = this.__data__, index = assocIndexOf(data, key);
  return index < 0 ? void 0 : data[index][1];
}
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}
function listCacheSet(key, value) {
  var data = this.__data__, index = assocIndexOf(data, key);
  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}
function ListCache(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
ListCache.prototype.clear = listCacheClear;
ListCache.prototype["delete"] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;
var Map$1 = getNative(root$1, "Map");
var Map$2 = Map$1;
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    "hash": new Hash(),
    "map": new (Map$2 || ListCache)(),
    "string": new Hash()
  };
}
function isKeyable(value) {
  var type = typeof value;
  return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
}
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
}
function mapCacheDelete(key) {
  var result = getMapData(this, key)["delete"](key);
  this.size -= result ? 1 : 0;
  return result;
}
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}
function mapCacheSet(key, value) {
  var data = getMapData(this, key), size = data.size;
  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}
function MapCache(entries) {
  var index = -1, length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype["delete"] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;
var FUNC_ERROR_TEXT$1 = "Expected a function";
function memoize(func, resolver) {
  if (typeof func != "function" || resolver != null && typeof resolver != "function") {
    throw new TypeError(FUNC_ERROR_TEXT$1);
  }
  var memoized = function() {
    var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache)();
  return memoized;
}
memoize.Cache = MapCache;
var MAX_MEMOIZE_SIZE = 500;
function memoizeCapped(func) {
  var result = memoize(func, function(key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });
  var cache = result.cache;
  return result;
}
var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var reEscapeChar = /\\(\\)?/g;
var stringToPath = memoizeCapped(function(string) {
  var result = [];
  if (string.charCodeAt(0) === 46) {
    result.push("");
  }
  string.replace(rePropName, function(match2, number, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, "$1") : number || match2);
  });
  return result;
});
var stringToPath$1 = stringToPath;
function toString(value) {
  return value == null ? "" : baseToString(value);
}
function castPath(value, object) {
  if (isArray$2(value)) {
    return value;
  }
  return isKey(value, object) ? [value] : stringToPath$1(toString(value));
}
var INFINITY = 1 / 0;
function toKey(value) {
  if (typeof value == "string" || isSymbol$1(value)) {
    return value;
  }
  var result = value + "";
  return result == "0" && 1 / value == -INFINITY ? "-0" : result;
}
function baseGet(object, path) {
  path = castPath(path, object);
  var index = 0, length = path.length;
  while (object != null && index < length) {
    object = object[toKey(path[index++])];
  }
  return index && index == length ? object : void 0;
}
function get$1(object, path, defaultValue) {
  var result = object == null ? void 0 : baseGet(object, path);
  return result === void 0 ? defaultValue : result;
}
function arrayPush(array, values2) {
  var index = -1, length = values2.length, offset = array.length;
  while (++index < length) {
    array[offset + index] = values2[index];
  }
  return array;
}
var spreadableSymbol = Symbol$2 ? Symbol$2.isConcatSpreadable : void 0;
function isFlattenable(value) {
  return isArray$2(value) || isArguments$1(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
}
function baseFlatten(array, depth, predicate, isStrict, result) {
  var index = -1, length = array.length;
  predicate || (predicate = isFlattenable);
  result || (result = []);
  while (++index < length) {
    var value = array[index];
    if (depth > 0 && predicate(value)) {
      if (depth > 1) {
        baseFlatten(value, depth - 1, predicate, isStrict, result);
      } else {
        arrayPush(result, value);
      }
    } else if (!isStrict) {
      result[result.length] = value;
    }
  }
  return result;
}
function flatten$1(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseFlatten(array, 1) : [];
}
function stackClear() {
  this.__data__ = new ListCache();
  this.size = 0;
}
function stackDelete(key) {
  var data = this.__data__, result = data["delete"](key);
  this.size = data.size;
  return result;
}
function stackGet(key) {
  return this.__data__.get(key);
}
function stackHas(key) {
  return this.__data__.has(key);
}
var LARGE_ARRAY_SIZE = 200;
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache) {
    var pairs = data.__data__;
    if (!Map$2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}
function Stack(entries) {
  var data = this.__data__ = new ListCache(entries);
  this.size = data.size;
}
Stack.prototype.clear = stackClear;
Stack.prototype["delete"] = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;
function arrayFilter(array, predicate) {
  var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];
  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}
function stubArray() {
  return [];
}
var objectProto$2 = Object.prototype;
var propertyIsEnumerable = objectProto$2.propertyIsEnumerable;
var nativeGetSymbols = Object.getOwnPropertySymbols;
var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return arrayFilter(nativeGetSymbols(object), function(symbol) {
    return propertyIsEnumerable.call(object, symbol);
  });
};
var getSymbols$1 = getSymbols;
function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray$2(object) ? result : arrayPush(result, symbolsFunc(object));
}
function getAllKeys(object) {
  return baseGetAllKeys(object, keys$1, getSymbols$1);
}
var DataView = getNative(root$1, "DataView");
var DataView$1 = DataView;
var Promise$1 = getNative(root$1, "Promise");
var Promise$2 = Promise$1;
var Set$1 = getNative(root$1, "Set");
var Set$2 = Set$1;
var mapTag$1 = "[object Map]";
var objectTag$1 = "[object Object]";
var promiseTag = "[object Promise]";
var setTag$1 = "[object Set]";
var weakMapTag = "[object WeakMap]";
var dataViewTag$1 = "[object DataView]";
var dataViewCtorString = toSource(DataView$1);
var mapCtorString = toSource(Map$2);
var promiseCtorString = toSource(Promise$2);
var setCtorString = toSource(Set$2);
var weakMapCtorString = toSource(WeakMap$1);
var getTag = baseGetTag;
if (DataView$1 && getTag(new DataView$1(new ArrayBuffer(1))) != dataViewTag$1 || Map$2 && getTag(new Map$2()) != mapTag$1 || Promise$2 && getTag(Promise$2.resolve()) != promiseTag || Set$2 && getTag(new Set$2()) != setTag$1 || WeakMap$1 && getTag(new WeakMap$1()) != weakMapTag) {
  getTag = function(value) {
    var result = baseGetTag(value), Ctor = result == objectTag$1 ? value.constructor : void 0, ctorString = Ctor ? toSource(Ctor) : "";
    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString:
          return dataViewTag$1;
        case mapCtorString:
          return mapTag$1;
        case promiseCtorString:
          return promiseTag;
        case setCtorString:
          return setTag$1;
        case weakMapCtorString:
          return weakMapTag;
      }
    }
    return result;
  };
}
var getTag$1 = getTag;
var Uint8Array$1 = root$1.Uint8Array;
var Uint8Array$2 = Uint8Array$1;
var HASH_UNDEFINED = "__lodash_hash_undefined__";
function setCacheAdd(value) {
  this.__data__.set(value, HASH_UNDEFINED);
  return this;
}
function setCacheHas(value) {
  return this.__data__.has(value);
}
function SetCache(values2) {
  var index = -1, length = values2 == null ? 0 : values2.length;
  this.__data__ = new MapCache();
  while (++index < length) {
    this.add(values2[index]);
  }
}
SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
SetCache.prototype.has = setCacheHas;
function arraySome(array, predicate) {
  var index = -1, length = array == null ? 0 : array.length;
  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}
function cacheHas(cache, key) {
  return cache.has(key);
}
var COMPARE_PARTIAL_FLAG$3 = 1;
var COMPARE_UNORDERED_FLAG$1 = 2;
function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$3, arrLength = array.length, othLength = other.length;
  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
    return false;
  }
  var arrStacked = stack.get(array);
  var othStacked = stack.get(other);
  if (arrStacked && othStacked) {
    return arrStacked == other && othStacked == array;
  }
  var index = -1, result = true, seen = bitmask & COMPARE_UNORDERED_FLAG$1 ? new SetCache() : void 0;
  stack.set(array, other);
  stack.set(other, array);
  while (++index < arrLength) {
    var arrValue = array[index], othValue = other[index];
    if (customizer) {
      var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
    }
    if (compared !== void 0) {
      if (compared) {
        continue;
      }
      result = false;
      break;
    }
    if (seen) {
      if (!arraySome(other, function(othValue2, othIndex) {
        if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
          return seen.push(othIndex);
        }
      })) {
        result = false;
        break;
      }
    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
      result = false;
      break;
    }
  }
  stack["delete"](array);
  stack["delete"](other);
  return result;
}
function mapToArray(map) {
  var index = -1, result = Array(map.size);
  map.forEach(function(value, key) {
    result[++index] = [key, value];
  });
  return result;
}
function setToArray(set2) {
  var index = -1, result = Array(set2.size);
  set2.forEach(function(value) {
    result[++index] = value;
  });
  return result;
}
var COMPARE_PARTIAL_FLAG$2 = 1;
var COMPARE_UNORDERED_FLAG = 2;
var boolTag = "[object Boolean]";
var dateTag = "[object Date]";
var errorTag = "[object Error]";
var mapTag = "[object Map]";
var numberTag = "[object Number]";
var regexpTag = "[object RegExp]";
var setTag = "[object Set]";
var stringTag = "[object String]";
var symbolTag = "[object Symbol]";
var arrayBufferTag = "[object ArrayBuffer]";
var dataViewTag = "[object DataView]";
var symbolProto = Symbol$2 ? Symbol$2.prototype : void 0;
var symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
function equalByTag(object, other, tag2, bitmask, customizer, equalFunc, stack) {
  switch (tag2) {
    case dataViewTag:
      if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
        return false;
      }
      object = object.buffer;
      other = other.buffer;
    case arrayBufferTag:
      if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array$2(object), new Uint8Array$2(other))) {
        return false;
      }
      return true;
    case boolTag:
    case dateTag:
    case numberTag:
      return eq(+object, +other);
    case errorTag:
      return object.name == other.name && object.message == other.message;
    case regexpTag:
    case stringTag:
      return object == other + "";
    case mapTag:
      var convert = mapToArray;
    case setTag:
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$2;
      convert || (convert = setToArray);
      if (object.size != other.size && !isPartial) {
        return false;
      }
      var stacked = stack.get(object);
      if (stacked) {
        return stacked == other;
      }
      bitmask |= COMPARE_UNORDERED_FLAG;
      stack.set(object, other);
      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
      stack["delete"](object);
      return result;
    case symbolTag:
      if (symbolValueOf) {
        return symbolValueOf.call(object) == symbolValueOf.call(other);
      }
  }
  return false;
}
var COMPARE_PARTIAL_FLAG$1 = 1;
var objectProto$1 = Object.prototype;
var hasOwnProperty$2 = objectProto$1.hasOwnProperty;
function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$1, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;
  if (objLength != othLength && !isPartial) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isPartial ? key in other : hasOwnProperty$2.call(other, key))) {
      return false;
    }
  }
  var objStacked = stack.get(object);
  var othStacked = stack.get(other);
  if (objStacked && othStacked) {
    return objStacked == other && othStacked == object;
  }
  var result = true;
  stack.set(object, other);
  stack.set(other, object);
  var skipCtor = isPartial;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key], othValue = other[key];
    if (customizer) {
      var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
    }
    if (!(compared === void 0 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
      result = false;
      break;
    }
    skipCtor || (skipCtor = key == "constructor");
  }
  if (result && !skipCtor) {
    var objCtor = object.constructor, othCtor = other.constructor;
    if (objCtor != othCtor && ("constructor" in object && "constructor" in other) && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
      result = false;
    }
  }
  stack["delete"](object);
  stack["delete"](other);
  return result;
}
var COMPARE_PARTIAL_FLAG = 1;
var argsTag = "[object Arguments]";
var arrayTag = "[object Array]";
var objectTag = "[object Object]";
var objectProto = Object.prototype;
var hasOwnProperty$1 = objectProto.hasOwnProperty;
function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
  var objIsArr = isArray$2(object), othIsArr = isArray$2(other), objTag = objIsArr ? arrayTag : getTag$1(object), othTag = othIsArr ? arrayTag : getTag$1(other);
  objTag = objTag == argsTag ? objectTag : objTag;
  othTag = othTag == argsTag ? objectTag : othTag;
  var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;
  if (isSameTag && isBuffer$1(object)) {
    if (!isBuffer$1(other)) {
      return false;
    }
    objIsArr = true;
    objIsObj = false;
  }
  if (isSameTag && !objIsObj) {
    stack || (stack = new Stack());
    return objIsArr || isTypedArray$1(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
  }
  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
    var objIsWrapped = objIsObj && hasOwnProperty$1.call(object, "__wrapped__"), othIsWrapped = othIsObj && hasOwnProperty$1.call(other, "__wrapped__");
    if (objIsWrapped || othIsWrapped) {
      var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;
      stack || (stack = new Stack());
      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
    }
  }
  if (!isSameTag) {
    return false;
  }
  stack || (stack = new Stack());
  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
}
function baseIsEqual(value, other, bitmask, customizer, stack) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
}
var now = function() {
  return root$1.Date.now();
};
var now$1 = now;
var FUNC_ERROR_TEXT = "Expected a function";
var nativeMax = Math.max;
var nativeMin = Math.min;
function debounce$1(func, wait, options) {
  var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
  if (typeof func != "function") {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber$1(wait) || 0;
  if (isObject$2(options)) {
    leading = !!options.leading;
    maxing = "maxWait" in options;
    maxWait = maxing ? nativeMax(toNumber$1(options.maxWait) || 0, wait) : maxWait;
    trailing = "trailing" in options ? !!options.trailing : trailing;
  }
  function invokeFunc(time) {
    var args = lastArgs, thisArg = lastThis;
    lastArgs = lastThis = void 0;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }
  function leadingEdge(time) {
    lastInvokeTime = time;
    timerId = setTimeout(timerExpired, wait);
    return leading ? invokeFunc(time) : result;
  }
  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
  }
  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;
    return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
  }
  function timerExpired() {
    var time = now$1();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    timerId = setTimeout(timerExpired, remainingWait(time));
  }
  function trailingEdge(time) {
    timerId = void 0;
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = void 0;
    return result;
  }
  function cancel() {
    if (timerId !== void 0) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = void 0;
  }
  function flush() {
    return timerId === void 0 ? result : trailingEdge(now$1());
  }
  function debounced() {
    var time = now$1(), isInvoking = shouldInvoke(time);
    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;
    if (isInvoking) {
      if (timerId === void 0) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === void 0) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}
function fromPairs(pairs) {
  var index = -1, length = pairs == null ? 0 : pairs.length, result = {};
  while (++index < length) {
    var pair = pairs[index];
    result[pair[0]] = pair[1];
  }
  return result;
}
function isEqual$1(value, other) {
  return baseIsEqual(value, other);
}
function isNil(value) {
  return value == null;
}
var composeEventHandlers = (theirsHandler, oursHandler, { checkForDefaultPrevented = true } = {}) => {
  const handleEvent = (event) => {
    const shouldPrevent = theirsHandler == null ? void 0 : theirsHandler(event);
    if (checkForDefaultPrevented === false || !shouldPrevent) {
      return oursHandler == null ? void 0 : oursHandler(event);
    }
  };
  return handleEvent;
};
var __defProp$9 = Object.defineProperty;
var __defProps$6 = Object.defineProperties;
var __getOwnPropDescs$6 = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols$b = Object.getOwnPropertySymbols;
var __hasOwnProp$b = Object.prototype.hasOwnProperty;
var __propIsEnum$b = Object.prototype.propertyIsEnumerable;
var __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues$9 = (a3, b2) => {
  for (var prop in b2 || (b2 = {}))
    if (__hasOwnProp$b.call(b2, prop))
      __defNormalProp$9(a3, prop, b2[prop]);
  if (__getOwnPropSymbols$b)
    for (var prop of __getOwnPropSymbols$b(b2)) {
      if (__propIsEnum$b.call(b2, prop))
        __defNormalProp$9(a3, prop, b2[prop]);
    }
  return a3;
};
var __spreadProps$6 = (a3, b2) => __defProps$6(a3, __getOwnPropDescs$6(b2));
function computedEager(fn2, options) {
  var _a2;
  const result = shallowRef();
  watchEffect(() => {
    result.value = fn2();
  }, __spreadProps$6(__spreadValues$9({}, options), {
    flush: (_a2 = options == null ? void 0 : options.flush) != null ? _a2 : "sync"
  }));
  return readonly(result);
}
var _a$2;
var isClient = typeof window !== "undefined";
var isBoolean = (val) => typeof val === "boolean";
var isNumber = (val) => typeof val === "number";
var isString$1 = (val) => typeof val === "string";
var noop$1 = () => {
};
isClient && ((_a$2 = window == null ? void 0 : window.navigator) == null ? void 0 : _a$2.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);
function resolveUnref(r) {
  return typeof r === "function" ? r() : unref(r);
}
function identity(arg) {
  return arg;
}
function tryOnScopeDispose(fn2) {
  if (getCurrentScope()) {
    onScopeDispose(fn2);
    return true;
  }
  return false;
}
function tryOnMounted(fn2, sync = true) {
  if (getCurrentInstance())
    onMounted(fn2);
  else if (sync)
    fn2();
  else
    nextTick(fn2);
}
function useTimeoutFn(cb, interval, options = {}) {
  const {
    immediate = true
  } = options;
  const isPending = ref(false);
  let timer = null;
  function clear() {
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
  }
  function stop() {
    isPending.value = false;
    clear();
  }
  function start(...args) {
    clear();
    isPending.value = true;
    timer = setTimeout(() => {
      isPending.value = false;
      timer = null;
      cb(...args);
    }, resolveUnref(interval));
  }
  if (immediate) {
    isPending.value = true;
    if (isClient)
      start();
  }
  tryOnScopeDispose(stop);
  return {
    isPending,
    start,
    stop
  };
}
function unrefElement(elRef) {
  var _a2;
  const plain = resolveUnref(elRef);
  return (_a2 = plain == null ? void 0 : plain.$el) != null ? _a2 : plain;
}
var defaultWindow = isClient ? window : void 0;
var defaultDocument = isClient ? window.document : void 0;
function useEventListener(...args) {
  let target;
  let event;
  let listener;
  let options;
  if (isString$1(args[0])) {
    [event, listener, options] = args;
    target = defaultWindow;
  } else {
    [target, event, listener, options] = args;
  }
  if (!target)
    return noop$1;
  let cleanup = noop$1;
  const stopWatch = watch(() => unrefElement(target), (el2) => {
    cleanup();
    if (!el2)
      return;
    el2.addEventListener(event, listener, options);
    cleanup = () => {
      el2.removeEventListener(event, listener, options);
      cleanup = noop$1;
    };
  }, { immediate: true, flush: "post" });
  const stop = () => {
    stopWatch();
    cleanup();
  };
  tryOnScopeDispose(stop);
  return stop;
}
function onClickOutside(target, handler, options = {}) {
  const { window: window2 = defaultWindow, ignore, capture = true, detectIframe = false } = options;
  if (!window2)
    return;
  const shouldListen = ref(true);
  let fallback;
  const listener = (event) => {
    window2.clearTimeout(fallback);
    const el2 = unrefElement(target);
    const composedPath = event.composedPath();
    if (!el2 || el2 === event.target || composedPath.includes(el2) || !shouldListen.value)
      return;
    if (ignore && ignore.length > 0) {
      if (ignore.some((target2) => {
        const el22 = unrefElement(target2);
        return el22 && (event.target === el22 || composedPath.includes(el22));
      }))
        return;
    }
    handler(event);
  };
  const cleanup = [
    useEventListener(window2, "click", listener, { passive: true, capture }),
    useEventListener(window2, "pointerdown", (e2) => {
      const el2 = unrefElement(target);
      shouldListen.value = !!el2 && !e2.composedPath().includes(el2);
    }, { passive: true }),
    useEventListener(window2, "pointerup", (e2) => {
      if (e2.button === 0) {
        const path = e2.composedPath();
        e2.composedPath = () => path;
        fallback = window2.setTimeout(() => listener(e2), 50);
      }
    }, { passive: true }),
    detectIframe && useEventListener(window2, "blur", (event) => {
      var _a2;
      const el2 = unrefElement(target);
      if (((_a2 = document.activeElement) == null ? void 0 : _a2.tagName) === "IFRAME" && !(el2 == null ? void 0 : el2.contains(document.activeElement)))
        handler(event);
    })
  ].filter(Boolean);
  const stop = () => cleanup.forEach((fn2) => fn2());
  return stop;
}
function useSupported(callback, sync = false) {
  const isSupported = ref();
  const update = () => isSupported.value = Boolean(callback());
  update();
  tryOnMounted(update, sync);
  return isSupported;
}
var _global = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
var globalKey = "__vueuse_ssr_handlers__";
_global[globalKey] = _global[globalKey] || {};
_global[globalKey];
function useDocumentVisibility({ document: document2 = defaultDocument } = {}) {
  if (!document2)
    return ref("visible");
  const visibility = ref(document2.visibilityState);
  useEventListener(document2, "visibilitychange", () => {
    visibility.value = document2.visibilityState;
  });
  return visibility;
}
var __getOwnPropSymbols$f = Object.getOwnPropertySymbols;
var __hasOwnProp$f = Object.prototype.hasOwnProperty;
var __propIsEnum$f = Object.prototype.propertyIsEnumerable;
var __objRest$2 = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp$f.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols$f)
    for (var prop of __getOwnPropSymbols$f(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum$f.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
function useResizeObserver(target, callback, options = {}) {
  const _a2 = options, { window: window2 = defaultWindow } = _a2, observerOptions = __objRest$2(_a2, ["window"]);
  let observer;
  const isSupported = useSupported(() => window2 && "ResizeObserver" in window2);
  const cleanup = () => {
    if (observer) {
      observer.disconnect();
      observer = void 0;
    }
  };
  const stopWatch = watch(() => unrefElement(target), (el2) => {
    cleanup();
    if (isSupported.value && window2 && el2) {
      observer = new ResizeObserver(callback);
      observer.observe(el2, observerOptions);
    }
  }, { immediate: true, flush: "post" });
  const stop = () => {
    cleanup();
    stopWatch();
  };
  tryOnScopeDispose(stop);
  return {
    isSupported,
    stop
  };
}
var SwipeDirection;
(function(SwipeDirection2) {
  SwipeDirection2["UP"] = "UP";
  SwipeDirection2["RIGHT"] = "RIGHT";
  SwipeDirection2["DOWN"] = "DOWN";
  SwipeDirection2["LEFT"] = "LEFT";
  SwipeDirection2["NONE"] = "NONE";
})(SwipeDirection || (SwipeDirection = {}));
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a3, b2) => {
  for (var prop in b2 || (b2 = {}))
    if (__hasOwnProp.call(b2, prop))
      __defNormalProp(a3, prop, b2[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b2)) {
      if (__propIsEnum.call(b2, prop))
        __defNormalProp(a3, prop, b2[prop]);
    }
  return a3;
};
var _TransitionPresets = {
  easeInSine: [0.12, 0, 0.39, 0],
  easeOutSine: [0.61, 1, 0.88, 1],
  easeInOutSine: [0.37, 0, 0.63, 1],
  easeInQuad: [0.11, 0, 0.5, 0],
  easeOutQuad: [0.5, 1, 0.89, 1],
  easeInOutQuad: [0.45, 0, 0.55, 1],
  easeInCubic: [0.32, 0, 0.67, 0],
  easeOutCubic: [0.33, 1, 0.68, 1],
  easeInOutCubic: [0.65, 0, 0.35, 1],
  easeInQuart: [0.5, 0, 0.75, 0],
  easeOutQuart: [0.25, 1, 0.5, 1],
  easeInOutQuart: [0.76, 0, 0.24, 1],
  easeInQuint: [0.64, 0, 0.78, 0],
  easeOutQuint: [0.22, 1, 0.36, 1],
  easeInOutQuint: [0.83, 0, 0.17, 1],
  easeInExpo: [0.7, 0, 0.84, 0],
  easeOutExpo: [0.16, 1, 0.3, 1],
  easeInOutExpo: [0.87, 0, 0.13, 1],
  easeInCirc: [0.55, 0, 1, 0.45],
  easeOutCirc: [0, 0.55, 0.45, 1],
  easeInOutCirc: [0.85, 0, 0.15, 1],
  easeInBack: [0.36, 0, 0.66, -0.56],
  easeOutBack: [0.34, 1.56, 0.64, 1],
  easeInOutBack: [0.68, -0.6, 0.32, 1.6]
};
__spreadValues({
  linear: identity
}, _TransitionPresets);
function useWindowFocus({ window: window2 = defaultWindow } = {}) {
  if (!window2)
    return ref(false);
  const focused = ref(window2.document.hasFocus());
  useEventListener(window2, "blur", () => {
    focused.value = false;
  });
  useEventListener(window2, "focus", () => {
    focused.value = true;
  });
  return focused;
}
var NOOP = () => {
};
var hasOwnProperty = Object.prototype.hasOwnProperty;
var hasOwn = (val, key) => hasOwnProperty.call(val, key);
var isArray = Array.isArray;
var isDate$1 = (val) => val instanceof Date;
var isFunction$1 = (val) => typeof val === "function";
var isString = (val) => typeof val === "string";
var isSymbol = (val) => typeof val === "symbol";
var isObject$1 = (val) => val !== null && typeof val === "object";
var isPromise = (val) => {
  return isObject$1(val) && isFunction$1(val.then) && isFunction$1(val.catch);
};
var objectToString = Object.prototype.toString;
var toTypeString = (value) => objectToString.call(value);
var toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
var cacheStringFunction = (fn2) => {
  const cache = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache[str];
    return hit || (cache[str] = fn2(str));
  };
};
var camelizeRE = /-(\w)/g;
var camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_2, c2) => c2 ? c2.toUpperCase() : "");
});
var capitalize$1 = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
var def = (obj, key, value) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    value
  });
};
var isUndefined = (val) => val === void 0;
var isEmpty = (val) => !val && val !== 0 || isArray(val) && val.length === 0 || isObject$1(val) && !Object.keys(val).length;
var isElement$1 = (e2) => {
  if (typeof Element === "undefined")
    return false;
  return e2 instanceof Element;
};
var escapeStringRegexp = (string = "") => string.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d");
var ElementPlusError = class extends Error {
  constructor(m3) {
    super(m3);
    this.name = "ElementPlusError";
  }
};
function throwError(scope, m3) {
  throw new ElementPlusError(`[${scope}] ${m3}`);
}
function debugWarn(scope, message2) {
}
var classNameToArray = (cls = "") => cls.split(" ").filter((item) => !!item.trim());
var hasClass = (el2, cls) => {
  if (!el2 || !cls)
    return false;
  if (cls.includes(" "))
    throw new Error("className should not contain space.");
  return el2.classList.contains(cls);
};
var addClass = (el2, cls) => {
  if (!el2 || !cls.trim())
    return;
  el2.classList.add(...classNameToArray(cls));
};
var removeClass = (el2, cls) => {
  if (!el2 || !cls.trim())
    return;
  el2.classList.remove(...classNameToArray(cls));
};
var getStyle = (element, styleName) => {
  var _a2;
  if (!isClient || !element || !styleName)
    return "";
  let key = camelize(styleName);
  if (key === "float")
    key = "cssFloat";
  try {
    const style2 = element.style[key];
    if (style2)
      return style2;
    const computed22 = (_a2 = document.defaultView) == null ? void 0 : _a2.getComputedStyle(element, "");
    return computed22 ? computed22[key] : "";
  } catch (e2) {
    return element.style[key];
  }
};
function addUnit(value, defaultUnit = "px") {
  if (!value)
    return "";
  if (isString(value)) {
    return value;
  } else if (isNumber(value)) {
    return `${value}${defaultUnit}`;
  }
}
var scrollBarWidth;
var getScrollBarWidth = (namespace) => {
  var _a2;
  if (!isClient)
    return 0;
  if (scrollBarWidth !== void 0)
    return scrollBarWidth;
  const outer = document.createElement("div");
  outer.className = `${namespace}-scrollbar__wrap`;
  outer.style.visibility = "hidden";
  outer.style.width = "100px";
  outer.style.position = "absolute";
  outer.style.top = "-9999px";
  document.body.appendChild(outer);
  const widthNoScroll = outer.offsetWidth;
  outer.style.overflow = "scroll";
  const inner = document.createElement("div");
  inner.style.width = "100%";
  outer.appendChild(inner);
  const widthWithScroll = inner.offsetWidth;
  (_a2 = outer.parentNode) == null ? void 0 : _a2.removeChild(outer);
  scrollBarWidth = widthNoScroll - widthWithScroll;
  return scrollBarWidth;
};
function scrollIntoView(container, selected) {
  if (!isClient)
    return;
  if (!selected) {
    container.scrollTop = 0;
    return;
  }
  const offsetParents = [];
  let pointer = selected.offsetParent;
  while (pointer !== null && container !== pointer && container.contains(pointer)) {
    offsetParents.push(pointer);
    pointer = pointer.offsetParent;
  }
  const top = selected.offsetTop + offsetParents.reduce((prev, curr) => prev + curr.offsetTop, 0);
  const bottom = top + selected.offsetHeight;
  const viewRectTop = container.scrollTop;
  const viewRectBottom = viewRectTop + container.clientHeight;
  if (top < viewRectTop) {
    container.scrollTop = top;
  } else if (bottom > viewRectBottom) {
    container.scrollTop = bottom - container.clientHeight;
  }
}
var export_helper_default = (sfc, props2) => {
  let target = sfc.__vccOpts || sfc;
  for (let [key, val] of props2)
    target[key] = val;
  return target;
};
var _sfc_main6 = {
  name: "ArrowDown"
};
var _hoisted_16 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_26 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"
}, null, -1);
var _hoisted_36 = [
  _hoisted_26
];
function _sfc_render6(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_16, _hoisted_36);
}
var arrow_down_default = export_helper_default(_sfc_main6, [["render", _sfc_render6], ["__file", "arrow-down.vue"]]);
var _sfc_main8 = {
  name: "ArrowLeft"
};
var _hoisted_18 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_28 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"
}, null, -1);
var _hoisted_38 = [
  _hoisted_28
];
function _sfc_render8(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_18, _hoisted_38);
}
var arrow_left_default = export_helper_default(_sfc_main8, [["render", _sfc_render8], ["__file", "arrow-left.vue"]]);
var _sfc_main10 = {
  name: "ArrowRight"
};
var _hoisted_110 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_210 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"
}, null, -1);
var _hoisted_310 = [
  _hoisted_210
];
function _sfc_render10(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_110, _hoisted_310);
}
var arrow_right_default = export_helper_default(_sfc_main10, [["render", _sfc_render10], ["__file", "arrow-right.vue"]]);
var _sfc_main12 = {
  name: "ArrowUp"
};
var _hoisted_112 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_212 = createBaseVNode("path", {
  fill: "currentColor",
  d: "m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"
}, null, -1);
var _hoisted_312 = [
  _hoisted_212
];
function _sfc_render12(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_112, _hoisted_312);
}
var arrow_up_default = export_helper_default(_sfc_main12, [["render", _sfc_render12], ["__file", "arrow-up.vue"]]);
var _sfc_main29 = {
  name: "Calendar"
};
var _hoisted_129 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_229 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"
}, null, -1);
var _hoisted_328 = [
  _hoisted_229
];
function _sfc_render29(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_129, _hoisted_328);
}
var calendar_default = export_helper_default(_sfc_main29, [["render", _sfc_render29], ["__file", "calendar.vue"]]);
var _sfc_main49 = {
  name: "CircleCheck"
};
var _hoisted_149 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_249 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"
}, null, -1);
var _hoisted_348 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"
}, null, -1);
var _hoisted_415 = [
  _hoisted_249,
  _hoisted_348
];
function _sfc_render49(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_149, _hoisted_415);
}
var circle_check_default = export_helper_default(_sfc_main49, [["render", _sfc_render49], ["__file", "circle-check.vue"]]);
var _sfc_main50 = {
  name: "CircleCloseFilled"
};
var _hoisted_150 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_250 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"
}, null, -1);
var _hoisted_349 = [
  _hoisted_250
];
function _sfc_render50(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_150, _hoisted_349);
}
var circle_close_filled_default = export_helper_default(_sfc_main50, [["render", _sfc_render50], ["__file", "circle-close-filled.vue"]]);
var _sfc_main51 = {
  name: "CircleClose"
};
var _hoisted_151 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_251 = createBaseVNode("path", {
  fill: "currentColor",
  d: "m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"
}, null, -1);
var _hoisted_350 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"
}, null, -1);
var _hoisted_416 = [
  _hoisted_251,
  _hoisted_350
];
function _sfc_render51(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_151, _hoisted_416);
}
var circle_close_default = export_helper_default(_sfc_main51, [["render", _sfc_render51], ["__file", "circle-close.vue"]]);
var _sfc_main54 = {
  name: "Clock"
};
var _hoisted_154 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_254 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"
}, null, -1);
var _hoisted_353 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"
}, null, -1);
var _hoisted_418 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"
}, null, -1);
var _hoisted_56 = [
  _hoisted_254,
  _hoisted_353,
  _hoisted_418
];
function _sfc_render54(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_154, _hoisted_56);
}
var clock_default = export_helper_default(_sfc_main54, [["render", _sfc_render54], ["__file", "clock.vue"]]);
var _sfc_main56 = {
  name: "Close"
};
var _hoisted_156 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_256 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"
}, null, -1);
var _hoisted_355 = [
  _hoisted_256
];
function _sfc_render56(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_156, _hoisted_355);
}
var close_default = export_helper_default(_sfc_main56, [["render", _sfc_render56], ["__file", "close.vue"]]);
var _sfc_main72 = {
  name: "DArrowLeft"
};
var _hoisted_172 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_272 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"
}, null, -1);
var _hoisted_371 = [
  _hoisted_272
];
function _sfc_render72(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_172, _hoisted_371);
}
var d_arrow_left_default = export_helper_default(_sfc_main72, [["render", _sfc_render72], ["__file", "d-arrow-left.vue"]]);
var _sfc_main73 = {
  name: "DArrowRight"
};
var _hoisted_173 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_273 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"
}, null, -1);
var _hoisted_372 = [
  _hoisted_273
];
function _sfc_render73(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_173, _hoisted_372);
}
var d_arrow_right_default = export_helper_default(_sfc_main73, [["render", _sfc_render73], ["__file", "d-arrow-right.vue"]]);
var _sfc_main133 = {
  name: "Hide"
};
var _hoisted_1133 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2133 = createBaseVNode("path", {
  d: "M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z",
  fill: "currentColor"
}, null, -1);
var _hoisted_3132 = createBaseVNode("path", {
  d: "M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z",
  fill: "currentColor"
}, null, -1);
var _hoisted_438 = [
  _hoisted_2133,
  _hoisted_3132
];
function _sfc_render133(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1133, _hoisted_438);
}
var hide_default = export_helper_default(_sfc_main133, [["render", _sfc_render133], ["__file", "hide.vue"]]);
var _sfc_main143 = {
  name: "InfoFilled"
};
var _hoisted_1143 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2143 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"
}, null, -1);
var _hoisted_3142 = [
  _hoisted_2143
];
function _sfc_render143(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1143, _hoisted_3142);
}
var info_filled_default = export_helper_default(_sfc_main143, [["render", _sfc_render143], ["__file", "info-filled.vue"]]);
var _sfc_main150 = {
  name: "Loading"
};
var _hoisted_1150 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2150 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"
}, null, -1);
var _hoisted_3149 = [
  _hoisted_2150
];
function _sfc_render150(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1150, _hoisted_3149);
}
var loading_default = export_helper_default(_sfc_main150, [["render", _sfc_render150], ["__file", "loading.vue"]]);
var _sfc_main201 = {
  name: "Plus"
};
var _hoisted_1201 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2201 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"
}, null, -1);
var _hoisted_3200 = [
  _hoisted_2201
];
function _sfc_render201(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1201, _hoisted_3200);
}
var plus_default = export_helper_default(_sfc_main201, [["render", _sfc_render201], ["__file", "plus.vue"]]);
var _sfc_main249 = {
  name: "SuccessFilled"
};
var _hoisted_1249 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2249 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"
}, null, -1);
var _hoisted_3248 = [
  _hoisted_2249
];
function _sfc_render249(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1249, _hoisted_3248);
}
var success_filled_default = export_helper_default(_sfc_main249, [["render", _sfc_render249], ["__file", "success-filled.vue"]]);
var _sfc_main283 = {
  name: "View"
};
var _hoisted_1283 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2283 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"
}, null, -1);
var _hoisted_3282 = [
  _hoisted_2283
];
function _sfc_render283(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1283, _hoisted_3282);
}
var view_default = export_helper_default(_sfc_main283, [["render", _sfc_render283], ["__file", "view.vue"]]);
var _sfc_main287 = {
  name: "WarningFilled"
};
var _hoisted_1287 = {
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg"
};
var _hoisted_2287 = createBaseVNode("path", {
  fill: "currentColor",
  d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"
}, null, -1);
var _hoisted_3286 = [
  _hoisted_2287
];
function _sfc_render287(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("svg", _hoisted_1287, _hoisted_3286);
}
var warning_filled_default = export_helper_default(_sfc_main287, [["render", _sfc_render287], ["__file", "warning-filled.vue"]]);
var epPropKey = "__epPropKey";
var definePropType = (val) => val;
var isEpProp = (val) => isObject$1(val) && !!val[epPropKey];
var buildProp = (prop, key) => {
  if (!isObject$1(prop) || isEpProp(prop))
    return prop;
  const { values: values2, required, default: defaultValue, type, validator } = prop;
  const _validator = values2 || validator ? (val) => {
    let valid = false;
    let allowedValues = [];
    if (values2) {
      allowedValues = Array.from(values2);
      if (hasOwn(prop, "default")) {
        allowedValues.push(defaultValue);
      }
      valid || (valid = allowedValues.includes(val));
    }
    if (validator)
      valid || (valid = validator(val));
    if (!valid && allowedValues.length > 0) {
      const allowValuesText = [...new Set(allowedValues)].map((value) => JSON.stringify(value)).join(", ");
      warn(`Invalid prop: validation failed${key ? ` for prop "${key}"` : ""}. Expected one of [${allowValuesText}], got value ${JSON.stringify(val)}.`);
    }
    return valid;
  } : void 0;
  const epProp = {
    type,
    required: !!required,
    validator: _validator,
    [epPropKey]: true
  };
  if (hasOwn(prop, "default"))
    epProp.default = defaultValue;
  return epProp;
};
var buildProps = (props2) => fromPairs(Object.entries(props2).map(([key, option2]) => [
  key,
  buildProp(option2, key)
]));
var iconPropType = definePropType([
  String,
  Object,
  Function
]);
var CloseComponents = {
  Close: close_default
};
var TypeComponentsMap = {
  success: success_filled_default,
  warning: warning_filled_default,
  error: circle_close_filled_default,
  info: info_filled_default
};
var ValidateComponentsMap = {
  validating: loading_default,
  success: circle_check_default,
  error: circle_close_default
};
var withInstall = (main2, extra) => {
  main2.install = (app) => {
    for (const comp of [main2, ...Object.values(extra != null ? extra : {})]) {
      app.component(comp.name, comp);
    }
  };
  if (extra) {
    for (const [key, comp] of Object.entries(extra)) {
      main2[key] = comp;
    }
  }
  return main2;
};
var withInstallFunction = (fn2, name) => {
  fn2.install = (app) => {
    fn2._context = app._context;
    app.config.globalProperties[name] = fn2;
  };
  return fn2;
};
var withInstallDirective = (directive, name) => {
  directive.install = (app) => {
    app.directive(name, directive);
  };
  return directive;
};
var withNoopInstall = (component) => {
  component.install = NOOP;
  return component;
};
var composeRefs = (...refs) => {
  return (el2) => {
    refs.forEach((ref2) => {
      if (isFunction$1(ref2)) {
        ref2(el2);
      } else {
        ref2.value = el2;
      }
    });
  };
};
var EVENT_CODE = {
  tab: "Tab",
  enter: "Enter",
  space: "Space",
  left: "ArrowLeft",
  up: "ArrowUp",
  right: "ArrowRight",
  down: "ArrowDown",
  esc: "Escape",
  delete: "Delete",
  backspace: "Backspace",
  numpadEnter: "NumpadEnter",
  pageUp: "PageUp",
  pageDown: "PageDown",
  home: "Home",
  end: "End"
};
var datePickTypes = [
  "year",
  "month",
  "date",
  "dates",
  "week",
  "datetime",
  "datetimerange",
  "daterange",
  "monthrange"
];
var UPDATE_MODEL_EVENT = "update:modelValue";
var CHANGE_EVENT = "change";
var INPUT_EVENT = "input";
var componentSizes = ["", "default", "small", "large"];
var componentSizeMap = {
  large: 40,
  default: 32,
  small: 24
};
var getComponentSize = (size) => {
  return componentSizeMap[size || "default"];
};
var isValidComponentSize = (val) => ["", ...componentSizes].includes(val);
var PatchFlags = ((PatchFlags2) => {
  PatchFlags2[PatchFlags2["TEXT"] = 1] = "TEXT";
  PatchFlags2[PatchFlags2["CLASS"] = 2] = "CLASS";
  PatchFlags2[PatchFlags2["STYLE"] = 4] = "STYLE";
  PatchFlags2[PatchFlags2["PROPS"] = 8] = "PROPS";
  PatchFlags2[PatchFlags2["FULL_PROPS"] = 16] = "FULL_PROPS";
  PatchFlags2[PatchFlags2["HYDRATE_EVENTS"] = 32] = "HYDRATE_EVENTS";
  PatchFlags2[PatchFlags2["STABLE_FRAGMENT"] = 64] = "STABLE_FRAGMENT";
  PatchFlags2[PatchFlags2["KEYED_FRAGMENT"] = 128] = "KEYED_FRAGMENT";
  PatchFlags2[PatchFlags2["UNKEYED_FRAGMENT"] = 256] = "UNKEYED_FRAGMENT";
  PatchFlags2[PatchFlags2["NEED_PATCH"] = 512] = "NEED_PATCH";
  PatchFlags2[PatchFlags2["DYNAMIC_SLOTS"] = 1024] = "DYNAMIC_SLOTS";
  PatchFlags2[PatchFlags2["HOISTED"] = -1] = "HOISTED";
  PatchFlags2[PatchFlags2["BAIL"] = -2] = "BAIL";
  return PatchFlags2;
})(PatchFlags || {});
var castArray = (arr) => {
  if (!arr && arr !== 0)
    return [];
  return Array.isArray(arr) ? arr : [arr];
};
var isKorean = (text) => /([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(text);
var generateId = () => Math.floor(Math.random() * 1e4);
var mutable = (val) => val;
var DEFAULT_EXCLUDE_KEYS = ["class", "style"];
var LISTENER_PREFIX = /^on[A-Z]/;
var useAttrs2 = (params = {}) => {
  const { excludeListeners = false, excludeKeys } = params;
  const allExcludeKeys = computed(() => {
    return ((excludeKeys == null ? void 0 : excludeKeys.value) || []).concat(DEFAULT_EXCLUDE_KEYS);
  });
  const instance = getCurrentInstance();
  if (!instance) {
    return computed(() => ({}));
  }
  return computed(() => {
    var _a2;
    return fromPairs(Object.entries((_a2 = instance.proxy) == null ? void 0 : _a2.$attrs).filter(([key]) => !allExcludeKeys.value.includes(key) && !(excludeListeners && LISTENER_PREFIX.test(key))));
  });
};
var buttonGroupContextKey = Symbol("buttonGroupContextKey");
var configProviderContextKey = Symbol();
var dialogInjectionKey = Symbol("dialogInjectionKey");
var formContextKey = Symbol("formContextKey");
var formItemContextKey = Symbol("formItemContextKey");
var scrollbarContextKey = Symbol("scrollbarContextKey");
var tabsRootContextKey = Symbol("tabsRootContextKey");
var POPPER_INJECTION_KEY = Symbol("popper");
var POPPER_CONTENT_INJECTION_KEY = Symbol("popperContent");
var ROOT_PICKER_INJECTION_KEY = Symbol();
var useProp = (name) => {
  const vm = getCurrentInstance();
  return computed(() => {
    var _a2, _b;
    return (_b = ((_a2 = vm.proxy) == null ? void 0 : _a2.$props)[name]) != null ? _b : void 0;
  });
};
var globalConfig = ref();
function useGlobalConfig(key, defaultValue = void 0) {
  const config = getCurrentInstance() ? inject(configProviderContextKey, globalConfig) : globalConfig;
  if (key) {
    return computed(() => {
      var _a2, _b;
      return (_b = (_a2 = config.value) == null ? void 0 : _a2[key]) != null ? _b : defaultValue;
    });
  } else {
    return config;
  }
}
var useSizeProp = buildProp({
  type: String,
  values: componentSizes,
  required: false
});
var useSize = (fallback, ignore = {}) => {
  const emptyRef = ref(void 0);
  const size = ignore.prop ? emptyRef : useProp("size");
  const globalConfig2 = ignore.global ? emptyRef : useGlobalConfig("size");
  const form = ignore.form ? { size: void 0 } : inject(formContextKey, void 0);
  const formItem = ignore.formItem ? { size: void 0 } : inject(formItemContextKey, void 0);
  return computed(() => size.value || unref(fallback) || (formItem == null ? void 0 : formItem.size) || (form == null ? void 0 : form.size) || globalConfig2.value || "");
};
var useDisabled = (fallback) => {
  const disabled = useProp("disabled");
  const form = inject(formContextKey, void 0);
  return computed(() => disabled.value || unref(fallback) || (form == null ? void 0 : form.disabled) || false);
};
var useDeprecated = ({ from, replacement, scope, version, ref: ref2, type = "API" }, condition) => {
  watch(() => unref(condition), (val) => {
  }, {
    immediate: true
  });
};
var useDraggable = (targetRef, dragRef, draggable) => {
  let transform = {
    offsetX: 0,
    offsetY: 0
  };
  const onMousedown = (e2) => {
    const downX = e2.clientX;
    const downY = e2.clientY;
    const { offsetX, offsetY } = transform;
    const targetRect = targetRef.value.getBoundingClientRect();
    const targetLeft = targetRect.left;
    const targetTop = targetRect.top;
    const targetWidth = targetRect.width;
    const targetHeight = targetRect.height;
    const clientWidth = document.documentElement.clientWidth;
    const clientHeight = document.documentElement.clientHeight;
    const minLeft = -targetLeft + offsetX;
    const minTop = -targetTop + offsetY;
    const maxLeft = clientWidth - targetLeft - targetWidth + offsetX;
    const maxTop = clientHeight - targetTop - targetHeight + offsetY;
    const onMousemove = (e22) => {
      const moveX = Math.min(Math.max(offsetX + e22.clientX - downX, minLeft), maxLeft);
      const moveY = Math.min(Math.max(offsetY + e22.clientY - downY, minTop), maxTop);
      transform = {
        offsetX: moveX,
        offsetY: moveY
      };
      targetRef.value.style.transform = `translate(${addUnit(moveX)}, ${addUnit(moveY)})`;
    };
    const onMouseup = () => {
      document.removeEventListener("mousemove", onMousemove);
      document.removeEventListener("mouseup", onMouseup);
    };
    document.addEventListener("mousemove", onMousemove);
    document.addEventListener("mouseup", onMouseup);
  };
  const onDraggable = () => {
    if (dragRef.value && targetRef.value) {
      dragRef.value.addEventListener("mousedown", onMousedown);
    }
  };
  const offDraggable = () => {
    if (dragRef.value && targetRef.value) {
      dragRef.value.removeEventListener("mousedown", onMousedown);
    }
  };
  onMounted(() => {
    watchEffect(() => {
      if (draggable.value) {
        onDraggable();
      } else {
        offDraggable();
      }
    });
  });
  onBeforeUnmount(() => {
    offDraggable();
  });
};
var useFocus = (el2) => {
  return {
    focus: () => {
      var _a2, _b;
      (_b = (_a2 = el2.value) == null ? void 0 : _a2.focus) == null ? void 0 : _b.call(_a2);
    }
  };
};
var defaultNamespace = "el";
var statePrefix = "is-";
var _bem = (namespace, block, blockSuffix, element, modifier) => {
  let cls = `${namespace}-${block}`;
  if (blockSuffix) {
    cls += `-${blockSuffix}`;
  }
  if (element) {
    cls += `__${element}`;
  }
  if (modifier) {
    cls += `--${modifier}`;
  }
  return cls;
};
var useNamespace = (block) => {
  const namespace = useGlobalConfig("namespace", defaultNamespace);
  const b2 = (blockSuffix = "") => _bem(namespace.value, block, blockSuffix, "", "");
  const e2 = (element) => element ? _bem(namespace.value, block, "", element, "") : "";
  const m3 = (modifier) => modifier ? _bem(namespace.value, block, "", "", modifier) : "";
  const be2 = (blockSuffix, element) => blockSuffix && element ? _bem(namespace.value, block, blockSuffix, element, "") : "";
  const em = (element, modifier) => element && modifier ? _bem(namespace.value, block, "", element, modifier) : "";
  const bm = (blockSuffix, modifier) => blockSuffix && modifier ? _bem(namespace.value, block, blockSuffix, "", modifier) : "";
  const bem = (blockSuffix, element, modifier) => blockSuffix && element && modifier ? _bem(namespace.value, block, blockSuffix, element, modifier) : "";
  const is = (name, ...args) => {
    const state = args.length >= 1 ? args[0] : true;
    return name && state ? `${statePrefix}${name}` : "";
  };
  const cssVar = (object) => {
    const styles = {};
    for (const key in object) {
      if (object[key]) {
        styles[`--${namespace.value}-${key}`] = object[key];
      }
    }
    return styles;
  };
  const cssVarBlock = (object) => {
    const styles = {};
    for (const key in object) {
      if (object[key]) {
        styles[`--${namespace.value}-${block}-${key}`] = object[key];
      }
    }
    return styles;
  };
  const cssVarName = (name) => `--${namespace.value}-${name}`;
  const cssVarBlockName = (name) => `--${namespace.value}-${block}-${name}`;
  return {
    namespace,
    b: b2,
    e: e2,
    m: m3,
    be: be2,
    em,
    bm,
    bem,
    is,
    cssVar,
    cssVarName,
    cssVarBlock,
    cssVarBlockName
  };
};
var defaultIdInjection = {
  prefix: Math.floor(Math.random() * 1e4),
  current: 0
};
var ID_INJECTION_KEY = Symbol("elIdInjection");
var useId = (deterministicId) => {
  const idInjection = inject(ID_INJECTION_KEY, defaultIdInjection);
  const namespace = useGlobalConfig("namespace", defaultNamespace);
  const idRef = computed(() => unref(deterministicId) || `${namespace.value}-id-${idInjection.prefix}-${idInjection.current++}`);
  return idRef;
};
var useFormItem = () => {
  const form = inject(formContextKey, void 0);
  const formItem = inject(formItemContextKey, void 0);
  return {
    form,
    formItem
  };
};
var useFormItemInputId = (props2, {
  formItemContext,
  disableIdGeneration,
  disableIdManagement
}) => {
  if (!disableIdGeneration) {
    disableIdGeneration = ref(false);
  }
  if (!disableIdManagement) {
    disableIdManagement = ref(false);
  }
  const inputId = ref();
  let idUnwatch = void 0;
  const isLabeledByFormItem = computed(() => {
    var _a2;
    return !!(!props2.label && formItemContext && formItemContext.inputIds && ((_a2 = formItemContext.inputIds) == null ? void 0 : _a2.length) <= 1);
  });
  onMounted(() => {
    idUnwatch = watch([toRef(props2, "id"), disableIdGeneration], ([id, disableIdGeneration2]) => {
      const newId = id != null ? id : !disableIdGeneration2 ? useId().value : void 0;
      if (newId !== inputId.value) {
        if (formItemContext == null ? void 0 : formItemContext.removeInputId) {
          inputId.value && formItemContext.removeInputId(inputId.value);
          if (!(disableIdManagement == null ? void 0 : disableIdManagement.value) && !disableIdGeneration2 && newId) {
            formItemContext.addInputId(newId);
          }
        }
        inputId.value = newId;
      }
    }, { immediate: true });
  });
  onUnmounted(() => {
    idUnwatch && idUnwatch();
    if (formItemContext == null ? void 0 : formItemContext.removeInputId) {
      inputId.value && formItemContext.removeInputId(inputId.value);
    }
  });
  return {
    isLabeledByFormItem,
    inputId
  };
};
var English = {
  name: "en",
  el: {
    colorpicker: {
      confirm: "OK",
      clear: "Clear",
      defaultLabel: "color picker",
      description: "current color is {color}. press enter to select a new color."
    },
    datepicker: {
      now: "Now",
      today: "Today",
      cancel: "Cancel",
      clear: "Clear",
      confirm: "OK",
      dateTablePrompt: "Use the arrow keys and enter to select the day of the month",
      monthTablePrompt: "Use the arrow keys and enter to select the month",
      yearTablePrompt: "Use the arrow keys and enter to select the year",
      selectedDate: "Selected date",
      selectDate: "Select date",
      selectTime: "Select time",
      startDate: "Start Date",
      startTime: "Start Time",
      endDate: "End Date",
      endTime: "End Time",
      prevYear: "Previous Year",
      nextYear: "Next Year",
      prevMonth: "Previous Month",
      nextMonth: "Next Month",
      year: "",
      month1: "January",
      month2: "February",
      month3: "March",
      month4: "April",
      month5: "May",
      month6: "June",
      month7: "July",
      month8: "August",
      month9: "September",
      month10: "October",
      month11: "November",
      month12: "December",
      week: "week",
      weeks: {
        sun: "Sun",
        mon: "Mon",
        tue: "Tue",
        wed: "Wed",
        thu: "Thu",
        fri: "Fri",
        sat: "Sat"
      },
      weeksFull: {
        sun: "Sunday",
        mon: "Monday",
        tue: "Tuesday",
        wed: "Wednesday",
        thu: "Thursday",
        fri: "Friday",
        sat: "Saturday"
      },
      months: {
        jan: "Jan",
        feb: "Feb",
        mar: "Mar",
        apr: "Apr",
        may: "May",
        jun: "Jun",
        jul: "Jul",
        aug: "Aug",
        sep: "Sep",
        oct: "Oct",
        nov: "Nov",
        dec: "Dec"
      }
    },
    inputNumber: {
      decrease: "decrease number",
      increase: "increase number"
    },
    select: {
      loading: "Loading",
      noMatch: "No matching data",
      noData: "No data",
      placeholder: "Select"
    },
    dropdown: {
      toggleDropdown: "Toggle Dropdown"
    },
    cascader: {
      noMatch: "No matching data",
      loading: "Loading",
      placeholder: "Select",
      noData: "No data"
    },
    pagination: {
      goto: "Go to",
      pagesize: "/page",
      total: "Total {total}",
      pageClassifier: "",
      deprecationWarning: "Deprecated usages detected, please refer to the el-pagination documentation for more details"
    },
    dialog: {
      close: "Close this dialog"
    },
    drawer: {
      close: "Close this dialog"
    },
    messagebox: {
      title: "Message",
      confirm: "OK",
      cancel: "Cancel",
      error: "Illegal input",
      close: "Close this dialog"
    },
    upload: {
      deleteTip: "press delete to remove",
      delete: "Delete",
      preview: "Preview",
      continue: "Continue"
    },
    slider: {
      defaultLabel: "slider between {min} and {max}",
      defaultRangeStartLabel: "pick start value",
      defaultRangeEndLabel: "pick end value"
    },
    table: {
      emptyText: "No Data",
      confirmFilter: "Confirm",
      resetFilter: "Reset",
      clearFilter: "All",
      sumText: "Sum"
    },
    tree: {
      emptyText: "No Data"
    },
    transfer: {
      noMatch: "No matching data",
      noData: "No data",
      titles: ["List 1", "List 2"],
      filterPlaceholder: "Enter keyword",
      noCheckedFormat: "{total} items",
      hasCheckedFormat: "{checked}/{total} checked"
    },
    image: {
      error: "FAILED"
    },
    pageHeader: {
      title: "Back"
    },
    popconfirm: {
      confirmButtonText: "Yes",
      cancelButtonText: "No"
    }
  }
};
var buildTranslator = (locale2) => (path, option2) => translate(path, option2, unref(locale2));
var translate = (path, option2, locale2) => get$1(locale2, path, path).replace(/\{(\w+)\}/g, (_2, key) => {
  var _a2;
  return `${(_a2 = option2 == null ? void 0 : option2[key]) != null ? _a2 : `{${key}}`}`;
});
var buildLocaleContext = (locale2) => {
  const lang = computed(() => unref(locale2).name);
  const localeRef = isRef(locale2) ? locale2 : ref(locale2);
  return {
    lang,
    locale: localeRef,
    t: buildTranslator(locale2)
  };
};
var useLocale = () => {
  const locale2 = useGlobalConfig("locale");
  return buildLocaleContext(computed(() => locale2.value || English));
};
var activeEffectScope;
function recordEffectScope(effect, scope = activeEffectScope) {
  if (scope && scope.active) {
    scope.effects.push(effect);
  }
}
var createDep = (effects) => {
  const dep = new Set(effects);
  dep.w = 0;
  dep.n = 0;
  return dep;
};
var wasTracked = (dep) => (dep.w & trackOpBit) > 0;
var newTracked = (dep) => (dep.n & trackOpBit) > 0;
var initDepMarkers = ({ deps }) => {
  if (deps.length) {
    for (let i2 = 0; i2 < deps.length; i2++) {
      deps[i2].w |= trackOpBit;
    }
  }
};
var finalizeDepMarkers = (effect) => {
  const { deps } = effect;
  if (deps.length) {
    let ptr = 0;
    for (let i2 = 0; i2 < deps.length; i2++) {
      const dep = deps[i2];
      if (wasTracked(dep) && !newTracked(dep)) {
        dep.delete(effect);
      } else {
        deps[ptr++] = dep;
      }
      dep.w &= ~trackOpBit;
      dep.n &= ~trackOpBit;
    }
    deps.length = ptr;
  }
};
var effectTrackDepth = 0;
var trackOpBit = 1;
var maxMarkerBits = 30;
var activeEffect;
var ReactiveEffect = class {
  constructor(fn2, scheduler = null, scope) {
    this.fn = fn2;
    this.scheduler = scheduler;
    this.active = true;
    this.deps = [];
    this.parent = void 0;
    recordEffectScope(this, scope);
  }
  run() {
    if (!this.active) {
      return this.fn();
    }
    let parent = activeEffect;
    let lastShouldTrack = shouldTrack;
    while (parent) {
      if (parent === this) {
        return;
      }
      parent = parent.parent;
    }
    try {
      this.parent = activeEffect;
      activeEffect = this;
      shouldTrack = true;
      trackOpBit = 1 << ++effectTrackDepth;
      if (effectTrackDepth <= maxMarkerBits) {
        initDepMarkers(this);
      } else {
        cleanupEffect(this);
      }
      return this.fn();
    } finally {
      if (effectTrackDepth <= maxMarkerBits) {
        finalizeDepMarkers(this);
      }
      trackOpBit = 1 << --effectTrackDepth;
      activeEffect = this.parent;
      shouldTrack = lastShouldTrack;
      this.parent = void 0;
      if (this.deferStop) {
        this.stop();
      }
    }
  }
  stop() {
    if (activeEffect === this) {
      this.deferStop = true;
    } else if (this.active) {
      cleanupEffect(this);
      if (this.onStop) {
        this.onStop();
      }
      this.active = false;
    }
  }
};
function cleanupEffect(effect) {
  const { deps } = effect;
  if (deps.length) {
    for (let i2 = 0; i2 < deps.length; i2++) {
      deps[i2].delete(effect);
    }
    deps.length = 0;
  }
}
var shouldTrack = true;
function trackEffects(dep, debuggerEventExtraInfo) {
  let shouldTrack2 = false;
  if (effectTrackDepth <= maxMarkerBits) {
    if (!newTracked(dep)) {
      dep.n |= trackOpBit;
      shouldTrack2 = !wasTracked(dep);
    }
  } else {
    shouldTrack2 = !dep.has(activeEffect);
  }
  if (shouldTrack2) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
  }
}
function triggerEffects(dep, debuggerEventExtraInfo) {
  for (const effect of isArray(dep) ? dep : [...dep]) {
    if (effect !== activeEffect || effect.allowRecurse) {
      if (effect.scheduler) {
        effect.scheduler();
      } else {
        effect.run();
      }
    }
  }
}
new Set(
  Object.getOwnPropertyNames(Symbol).map((key) => Symbol[key]).filter(isSymbol)
);
function toRaw2(observed) {
  const raw = observed && observed["__v_raw"];
  return raw ? toRaw2(raw) : observed;
}
function markRaw(value) {
  def(value, "__v_skip", true);
  return value;
}
function trackRefValue(ref2) {
  if (shouldTrack && activeEffect) {
    ref2 = toRaw2(ref2);
    {
      trackEffects(ref2.dep || (ref2.dep = createDep()));
    }
  }
}
function triggerRefValue(ref2, newVal) {
  ref2 = toRaw2(ref2);
  if (ref2.dep) {
    {
      triggerEffects(ref2.dep);
    }
  }
}
var ComputedRefImpl = class {
  constructor(getter, _setter, isReadonly, isSSR) {
    this._setter = _setter;
    this.dep = void 0;
    this.__v_isRef = true;
    this._dirty = true;
    this.effect = new ReactiveEffect(getter, () => {
      if (!this._dirty) {
        this._dirty = true;
        triggerRefValue(this);
      }
    });
    this.effect.computed = this;
    this.effect.active = this._cacheable = !isSSR;
    this["__v_isReadonly"] = isReadonly;
  }
  get value() {
    const self2 = toRaw2(this);
    trackRefValue(self2);
    if (self2._dirty || !self2._cacheable) {
      self2._dirty = false;
      self2._value = self2.effect.run();
    }
    return self2._value;
  }
  set value(newValue) {
    this._setter(newValue);
  }
};
function computed2(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  const onlyGetter = isFunction$1(getterOrOptions);
  if (onlyGetter) {
    getter = getterOrOptions;
    setter = NOOP;
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);
  return cRef;
}
var useLockscreen = (trigger) => {
  if (!isRef(trigger)) {
    throwError("[useLockscreen]", "You need to pass a ref param to this function");
  }
  const ns2 = useNamespace("popup");
  const hiddenCls = computed2(() => ns2.bm("parent", "hidden"));
  if (!isClient || hasClass(document.body, hiddenCls.value)) {
    return;
  }
  let scrollBarWidth2 = 0;
  let withoutHiddenClass = false;
  let bodyWidth = "0";
  const cleanup = () => {
    removeClass(document.body, hiddenCls.value);
    if (withoutHiddenClass) {
      document.body.style.width = bodyWidth;
    }
  };
  watch(trigger, (val) => {
    if (!val) {
      cleanup();
      return;
    }
    withoutHiddenClass = !hasClass(document.body, hiddenCls.value);
    if (withoutHiddenClass) {
      bodyWidth = document.body.style.width;
    }
    scrollBarWidth2 = getScrollBarWidth(ns2.namespace.value);
    const bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;
    const bodyOverflowY = getStyle(document.body, "overflowY");
    if (scrollBarWidth2 > 0 && (bodyHasOverflow || bodyOverflowY === "scroll") && withoutHiddenClass) {
      document.body.style.width = `calc(100% - ${scrollBarWidth2}px)`;
    }
    addClass(document.body, hiddenCls.value);
  });
  onScopeDispose(() => cleanup());
};
var _prop = buildProp({
  type: definePropType(Boolean),
  default: null
});
var _event = buildProp({
  type: definePropType(Function)
});
var createModelToggleComposable = (name) => {
  const updateEventKey = `update:${name}`;
  const updateEventKeyRaw = `onUpdate:${name}`;
  const useModelToggleEmits2 = [updateEventKey];
  const useModelToggleProps2 = {
    [name]: _prop,
    [updateEventKeyRaw]: _event
  };
  const useModelToggle2 = ({
    indicator,
    toggleReason,
    shouldHideWhenRouteChanges,
    shouldProceed,
    onShow,
    onHide
  }) => {
    const instance = getCurrentInstance();
    const { emit } = instance;
    const props2 = instance.props;
    const hasUpdateHandler = computed(() => isFunction$1(props2[updateEventKeyRaw]));
    const isModelBindingAbsent = computed(() => props2[name] === null);
    const doShow = (event) => {
      if (indicator.value === true) {
        return;
      }
      indicator.value = true;
      if (toggleReason) {
        toggleReason.value = event;
      }
      if (isFunction$1(onShow)) {
        onShow(event);
      }
    };
    const doHide = (event) => {
      if (indicator.value === false) {
        return;
      }
      indicator.value = false;
      if (toggleReason) {
        toggleReason.value = event;
      }
      if (isFunction$1(onHide)) {
        onHide(event);
      }
    };
    const show = (event) => {
      if (props2.disabled === true || isFunction$1(shouldProceed) && !shouldProceed())
        return;
      const shouldEmit = hasUpdateHandler.value && isClient;
      if (shouldEmit) {
        emit(updateEventKey, true);
      }
      if (isModelBindingAbsent.value || !shouldEmit) {
        doShow(event);
      }
    };
    const hide = (event) => {
      if (props2.disabled === true || !isClient)
        return;
      const shouldEmit = hasUpdateHandler.value && isClient;
      if (shouldEmit) {
        emit(updateEventKey, false);
      }
      if (isModelBindingAbsent.value || !shouldEmit) {
        doHide(event);
      }
    };
    const onChange = (val) => {
      if (!isBoolean(val))
        return;
      if (props2.disabled && val) {
        if (hasUpdateHandler.value) {
          emit(updateEventKey, false);
        }
      } else if (indicator.value !== val) {
        if (val) {
          doShow();
        } else {
          doHide();
        }
      }
    };
    const toggle = () => {
      if (indicator.value) {
        hide();
      } else {
        show();
      }
    };
    watch(() => props2[name], onChange);
    if (shouldHideWhenRouteChanges && instance.appContext.config.globalProperties.$route !== void 0) {
      watch(() => ({
        ...instance.proxy.$route
      }), () => {
        if (shouldHideWhenRouteChanges.value && indicator.value) {
          hide();
        }
      });
    }
    onMounted(() => {
      onChange(props2[name]);
    });
    return {
      hide,
      show,
      toggle,
      hasUpdateHandler
    };
  };
  return {
    useModelToggle: useModelToggle2,
    useModelToggleProps: useModelToggleProps2,
    useModelToggleEmits: useModelToggleEmits2
  };
};
var useSameTarget = (handleClick) => {
  if (!handleClick) {
    return { onClick: NOOP, onMousedown: NOOP, onMouseup: NOOP };
  }
  let mousedownTarget = false;
  let mouseupTarget = false;
  const onClick = (e2) => {
    if (mousedownTarget && mouseupTarget) {
      handleClick(e2);
    }
    mousedownTarget = mouseupTarget = false;
  };
  const onMousedown = (e2) => {
    mousedownTarget = e2.target === e2.currentTarget;
  };
  const onMouseup = (e2) => {
    mouseupTarget = e2.target === e2.currentTarget;
  };
  return { onClick, onMousedown, onMouseup };
};
function useTimeout() {
  let timeoutHandle;
  const registerTimeout = (fn2, delay) => {
    cancelTimeout();
    timeoutHandle = window.setTimeout(fn2, delay);
  };
  const cancelTimeout = () => window.clearTimeout(timeoutHandle);
  tryOnScopeDispose(() => cancelTimeout());
  return {
    registerTimeout,
    cancelTimeout
  };
}
var registeredEscapeHandlers = [];
var cachedHandler = (e2) => {
  const event = e2;
  if (event.key === EVENT_CODE.esc) {
    registeredEscapeHandlers.forEach((registeredHandler) => registeredHandler(event));
  }
};
var useEscapeKeydown = (handler) => {
  onMounted(() => {
    if (registeredEscapeHandlers.length === 0) {
      document.addEventListener("keydown", cachedHandler);
    }
    if (isClient)
      registeredEscapeHandlers.push(handler);
  });
  onBeforeUnmount(() => {
    registeredEscapeHandlers = registeredEscapeHandlers.filter((registeredHandler) => registeredHandler !== handler);
    if (registeredEscapeHandlers.length === 0) {
      if (isClient)
        document.removeEventListener("keydown", cachedHandler);
    }
  });
};
var cachedContainer;
var POPPER_CONTAINER_ID = `el-popper-container-${generateId()}`;
var POPPER_CONTAINER_SELECTOR = `#${POPPER_CONTAINER_ID}`;
var createContainer = () => {
  const container = document.createElement("div");
  container.id = POPPER_CONTAINER_ID;
  document.body.appendChild(container);
  return container;
};
var usePopperContainer = () => {
  onBeforeMount(() => {
    if (!isClient)
      return;
    if (!cachedContainer || !document.body.querySelector(POPPER_CONTAINER_SELECTOR)) {
      cachedContainer = createContainer();
    }
  });
};
var useDelayedToggleProps = buildProps({
  showAfter: {
    type: Number,
    default: 0
  },
  hideAfter: {
    type: Number,
    default: 200
  }
});
var useDelayedToggle = ({
  showAfter,
  hideAfter,
  open,
  close: close2
}) => {
  const { registerTimeout } = useTimeout();
  const onOpen = (event) => {
    registerTimeout(() => {
      open(event);
    }, unref(showAfter));
  };
  const onClose = (event) => {
    registerTimeout(() => {
      close2(event);
    }, unref(hideAfter));
  };
  return {
    onOpen,
    onClose
  };
};
var FORWARD_REF_INJECTION_KEY = Symbol("elForwardRef");
var useForwardRef = (forwardRef) => {
  const setForwardRef = (el2) => {
    forwardRef.value = el2;
  };
  provide(FORWARD_REF_INJECTION_KEY, {
    setForwardRef
  });
};
var useForwardRefDirective = (setForwardRef) => {
  return {
    mounted(el2) {
      setForwardRef(el2);
    },
    updated(el2) {
      setForwardRef(el2);
    },
    unmounted() {
      setForwardRef(null);
    }
  };
};
var zIndex = ref(0);
var useZIndex = () => {
  const initialZIndex = useGlobalConfig("zIndex", 2e3);
  const currentZIndex = computed(() => initialZIndex.value + zIndex.value);
  const nextZIndex = () => {
    zIndex.value++;
    return currentZIndex.value;
  };
  return {
    initialZIndex,
    currentZIndex,
    nextZIndex
  };
};
function useCursor(input2) {
  const selectionRef = ref();
  function recordCursor() {
    if (input2.value == void 0)
      return;
    const { selectionStart, selectionEnd, value } = input2.value;
    if (selectionStart == null || selectionEnd == null)
      return;
    const beforeTxt = value.slice(0, Math.max(0, selectionStart));
    const afterTxt = value.slice(Math.max(0, selectionEnd));
    selectionRef.value = {
      selectionStart,
      selectionEnd,
      value,
      beforeTxt,
      afterTxt
    };
  }
  function setCursor() {
    if (input2.value == void 0 || selectionRef.value == void 0)
      return;
    const { value } = input2.value;
    const { beforeTxt, afterTxt, selectionStart } = selectionRef.value;
    if (beforeTxt == void 0 || afterTxt == void 0 || selectionStart == void 0)
      return;
    let startPos = value.length;
    if (value.endsWith(afterTxt)) {
      startPos = value.length - afterTxt.length;
    } else if (value.startsWith(beforeTxt)) {
      startPos = beforeTxt.length;
    } else {
      const beforeLastChar = beforeTxt[selectionStart - 1];
      const newIndex = value.indexOf(beforeLastChar, selectionStart - 1);
      if (newIndex !== -1) {
        startPos = newIndex + 1;
      }
    }
    input2.value.setSelectionRange(startPos, startPos);
  }
  return [recordCursor, setCursor];
}
var _export_sfc = (sfc, props2) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props2) {
    target[key] = val;
  }
  return target;
};
var iconProps = buildProps({
  size: {
    type: definePropType([Number, String])
  },
  color: {
    type: String
  }
});
var __default__$k = {
  name: "ElIcon",
  inheritAttrs: false
};
var _sfc_main$1m = defineComponent({
  ...__default__$k,
  props: iconProps,
  setup(__props) {
    const props2 = __props;
    const ns2 = useNamespace("icon");
    const style2 = computed(() => {
      const { size, color } = props2;
      if (!size && !color)
        return {};
      return {
        fontSize: isUndefined(size) ? void 0 : addUnit(size),
        "--color": color
      };
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("i", mergeProps({
        class: unref(ns2).b(),
        style: unref(style2)
      }, _ctx.$attrs), [
        renderSlot(_ctx.$slots, "default")
      ], 16);
    };
  }
});
var Icon = _export_sfc(_sfc_main$1m, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);
var ElIcon = withInstall(Icon);
var hiddenTextarea = void 0;
var HIDDEN_STYLE = `
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`;
var CONTEXT_STYLE = [
  "letter-spacing",
  "line-height",
  "padding-top",
  "padding-bottom",
  "font-family",
  "font-weight",
  "font-size",
  "text-rendering",
  "text-transform",
  "width",
  "text-indent",
  "padding-left",
  "padding-right",
  "border-width",
  "box-sizing"
];
function calculateNodeStyling(targetElement) {
  const style2 = window.getComputedStyle(targetElement);
  const boxSizing = style2.getPropertyValue("box-sizing");
  const paddingSize = Number.parseFloat(style2.getPropertyValue("padding-bottom")) + Number.parseFloat(style2.getPropertyValue("padding-top"));
  const borderSize = Number.parseFloat(style2.getPropertyValue("border-bottom-width")) + Number.parseFloat(style2.getPropertyValue("border-top-width"));
  const contextStyle = CONTEXT_STYLE.map((name) => `${name}:${style2.getPropertyValue(name)}`).join(";");
  return { contextStyle, paddingSize, borderSize, boxSizing };
}
function calcTextareaHeight(targetElement, minRows = 1, maxRows) {
  var _a2;
  if (!hiddenTextarea) {
    hiddenTextarea = document.createElement("textarea");
    document.body.appendChild(hiddenTextarea);
  }
  const { paddingSize, borderSize, boxSizing, contextStyle } = calculateNodeStyling(targetElement);
  hiddenTextarea.setAttribute("style", `${contextStyle};${HIDDEN_STYLE}`);
  hiddenTextarea.value = targetElement.value || targetElement.placeholder || "";
  let height = hiddenTextarea.scrollHeight;
  const result = {};
  if (boxSizing === "border-box") {
    height = height + borderSize;
  } else if (boxSizing === "content-box") {
    height = height - paddingSize;
  }
  hiddenTextarea.value = "";
  const singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;
  if (isNumber(minRows)) {
    let minHeight = singleRowHeight * minRows;
    if (boxSizing === "border-box") {
      minHeight = minHeight + paddingSize + borderSize;
    }
    height = Math.max(minHeight, height);
    result.minHeight = `${minHeight}px`;
  }
  if (isNumber(maxRows)) {
    let maxHeight = singleRowHeight * maxRows;
    if (boxSizing === "border-box") {
      maxHeight = maxHeight + paddingSize + borderSize;
    }
    height = Math.min(maxHeight, height);
  }
  result.height = `${height}px`;
  (_a2 = hiddenTextarea.parentNode) == null ? void 0 : _a2.removeChild(hiddenTextarea);
  hiddenTextarea = void 0;
  return result;
}
var inputProps = buildProps({
  id: {
    type: String,
    default: void 0
  },
  size: useSizeProp,
  disabled: Boolean,
  modelValue: {
    type: definePropType([
      String,
      Number,
      Object
    ]),
    default: ""
  },
  type: {
    type: String,
    default: "text"
  },
  resize: {
    type: String,
    values: ["none", "both", "horizontal", "vertical"]
  },
  autosize: {
    type: definePropType([Boolean, Object]),
    default: false
  },
  autocomplete: {
    type: String,
    default: "off"
  },
  formatter: {
    type: Function
  },
  parser: {
    type: Function
  },
  placeholder: {
    type: String
  },
  form: {
    type: String,
    default: ""
  },
  readonly: {
    type: Boolean,
    default: false
  },
  clearable: {
    type: Boolean,
    default: false
  },
  showPassword: {
    type: Boolean,
    default: false
  },
  showWordLimit: {
    type: Boolean,
    default: false
  },
  suffixIcon: {
    type: iconPropType
  },
  prefixIcon: {
    type: iconPropType
  },
  containerRole: {
    type: String,
    default: void 0
  },
  label: {
    type: String,
    default: void 0
  },
  tabindex: {
    type: [String, Number],
    default: 0
  },
  validateEvent: {
    type: Boolean,
    default: true
  },
  inputStyle: {
    type: definePropType([Object, Array, String]),
    default: () => mutable({})
  }
});
var inputEmits = {
  [UPDATE_MODEL_EVENT]: (value) => isString(value),
  input: (value) => isString(value),
  change: (value) => isString(value),
  focus: (evt) => evt instanceof FocusEvent,
  blur: (evt) => evt instanceof FocusEvent,
  clear: () => true,
  mouseleave: (evt) => evt instanceof MouseEvent,
  mouseenter: (evt) => evt instanceof MouseEvent,
  keydown: (evt) => evt instanceof Event,
  compositionstart: (evt) => evt instanceof CompositionEvent,
  compositionupdate: (evt) => evt instanceof CompositionEvent,
  compositionend: (evt) => evt instanceof CompositionEvent
};
var _hoisted_1$S = ["role"];
var _hoisted_2$E = ["id", "type", "disabled", "formatter", "parser", "readonly", "autocomplete", "tabindex", "aria-label", "placeholder"];
var _hoisted_3$x = ["id", "tabindex", "disabled", "readonly", "autocomplete", "aria-label", "placeholder"];
var __default__$j = {
  name: "ElInput",
  inheritAttrs: false
};
var _sfc_main$1l = defineComponent({
  ...__default__$j,
  props: inputProps,
  emits: inputEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const PENDANT_MAP = {
      suffix: "append",
      prefix: "prepend"
    };
    const instance = getCurrentInstance();
    const rawAttrs = useAttrs();
    const slots = useSlots();
    const containerAttrs = computed(() => {
      const comboBoxAttrs = {};
      if (props2.containerRole === "combobox") {
        comboBoxAttrs["aria-haspopup"] = rawAttrs["aria-haspopup"];
        comboBoxAttrs["aria-owns"] = rawAttrs["aria-owns"];
        comboBoxAttrs["aria-expanded"] = rawAttrs["aria-expanded"];
      }
      return comboBoxAttrs;
    });
    const attrs = useAttrs2({
      excludeKeys: computed(() => {
        return Object.keys(containerAttrs.value);
      })
    });
    const { form, formItem } = useFormItem();
    const { inputId } = useFormItemInputId(props2, {
      formItemContext: formItem
    });
    const inputSize = useSize();
    const inputDisabled = useDisabled();
    const nsInput = useNamespace("input");
    const nsTextarea = useNamespace("textarea");
    const input2 = shallowRef();
    const textarea = shallowRef();
    const focused = ref(false);
    const hovering = ref(false);
    const isComposing = ref(false);
    const passwordVisible = ref(false);
    const countStyle = ref();
    const textareaCalcStyle = shallowRef(props2.inputStyle);
    const _ref = computed(() => input2.value || textarea.value);
    const needStatusIcon = computed(() => {
      var _a2;
      return (_a2 = form == null ? void 0 : form.statusIcon) != null ? _a2 : false;
    });
    const validateState = computed(() => (formItem == null ? void 0 : formItem.validateState) || "");
    const validateIcon = computed(() => validateState.value && ValidateComponentsMap[validateState.value]);
    const passwordIcon = computed(() => passwordVisible.value ? view_default : hide_default);
    const containerStyle = computed(() => [
      rawAttrs.style,
      props2.inputStyle
    ]);
    const textareaStyle = computed(() => [
      props2.inputStyle,
      textareaCalcStyle.value,
      { resize: props2.resize }
    ]);
    const nativeInputValue = computed(() => isNil(props2.modelValue) ? "" : String(props2.modelValue));
    const showClear = computed(() => props2.clearable && !inputDisabled.value && !props2.readonly && !!nativeInputValue.value && (focused.value || hovering.value));
    const showPwdVisible = computed(() => props2.showPassword && !inputDisabled.value && !props2.readonly && !!nativeInputValue.value && (!!nativeInputValue.value || focused.value));
    const isWordLimitVisible = computed(() => props2.showWordLimit && !!attrs.value.maxlength && (props2.type === "text" || props2.type === "textarea") && !inputDisabled.value && !props2.readonly && !props2.showPassword);
    const textLength = computed(() => Array.from(nativeInputValue.value).length);
    const inputExceed = computed(() => !!isWordLimitVisible.value && textLength.value > Number(attrs.value.maxlength));
    const suffixVisible = computed(() => !!slots.suffix || !!props2.suffixIcon || showClear.value || props2.showPassword || isWordLimitVisible.value || !!validateState.value && needStatusIcon.value);
    const [recordCursor, setCursor] = useCursor(input2);
    useResizeObserver(textarea, (entries) => {
      if (!isWordLimitVisible.value || props2.resize !== "both")
        return;
      const entry = entries[0];
      const { width } = entry.contentRect;
      countStyle.value = {
        right: `calc(100% - ${width + 15 + 6}px)`
      };
    });
    const resizeTextarea = () => {
      const { type, autosize } = props2;
      if (!isClient || type !== "textarea")
        return;
      if (autosize) {
        const minRows = isObject$1(autosize) ? autosize.minRows : void 0;
        const maxRows = isObject$1(autosize) ? autosize.maxRows : void 0;
        textareaCalcStyle.value = {
          ...calcTextareaHeight(textarea.value, minRows, maxRows)
        };
      } else {
        textareaCalcStyle.value = {
          minHeight: calcTextareaHeight(textarea.value).minHeight
        };
      }
    };
    const setNativeInputValue = () => {
      const input22 = _ref.value;
      if (!input22 || input22.value === nativeInputValue.value)
        return;
      input22.value = nativeInputValue.value;
    };
    const calcIconOffset = (place) => {
      const { el: el2 } = instance.vnode;
      if (!el2)
        return;
      const elList = Array.from(el2.querySelectorAll(`.${nsInput.e(place)}`));
      const target = elList.find((item) => item.parentNode === el2);
      if (!target)
        return;
      const pendant = PENDANT_MAP[place];
      if (slots[pendant]) {
        target.style.transform = `translateX(${place === "suffix" ? "-" : ""}${el2.querySelector(`.${nsInput.be("group", pendant)}`).offsetWidth}px)`;
      } else {
        target.removeAttribute("style");
      }
    };
    const updateIconOffset = () => {
      calcIconOffset("prefix");
      calcIconOffset("suffix");
    };
    const handleInput = async (event) => {
      recordCursor();
      let { value } = event.target;
      if (props2.formatter) {
        value = props2.parser ? props2.parser(value) : value;
        value = props2.formatter(value);
      }
      if (isComposing.value)
        return;
      if (value === nativeInputValue.value) {
        setNativeInputValue();
        return;
      }
      emit(UPDATE_MODEL_EVENT, value);
      emit("input", value);
      await nextTick();
      setNativeInputValue();
      setCursor();
    };
    const handleChange = (event) => {
      emit("change", event.target.value);
    };
    const handleCompositionStart = (event) => {
      emit("compositionstart", event);
      isComposing.value = true;
    };
    const handleCompositionUpdate = (event) => {
      var _a2;
      emit("compositionupdate", event);
      const text = (_a2 = event.target) == null ? void 0 : _a2.value;
      const lastCharacter = text[text.length - 1] || "";
      isComposing.value = !isKorean(lastCharacter);
    };
    const handleCompositionEnd = (event) => {
      emit("compositionend", event);
      if (isComposing.value) {
        isComposing.value = false;
        handleInput(event);
      }
    };
    const handlePasswordVisible = () => {
      passwordVisible.value = !passwordVisible.value;
      focus();
    };
    const focus = async () => {
      var _a2;
      await nextTick();
      (_a2 = _ref.value) == null ? void 0 : _a2.focus();
    };
    const blur = () => {
      var _a2;
      return (_a2 = _ref.value) == null ? void 0 : _a2.blur();
    };
    const handleFocus = (event) => {
      focused.value = true;
      emit("focus", event);
    };
    const handleBlur = (event) => {
      var _a2;
      focused.value = false;
      emit("blur", event);
      if (props2.validateEvent) {
        (_a2 = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a2.call(formItem, "blur").catch((err) => debugWarn());
      }
    };
    const handleMouseLeave = (evt) => {
      hovering.value = false;
      emit("mouseleave", evt);
    };
    const handleMouseEnter = (evt) => {
      hovering.value = true;
      emit("mouseenter", evt);
    };
    const handleKeydown = (evt) => {
      emit("keydown", evt);
    };
    const select2 = () => {
      var _a2;
      (_a2 = _ref.value) == null ? void 0 : _a2.select();
    };
    const clear = () => {
      emit(UPDATE_MODEL_EVENT, "");
      emit("change", "");
      emit("clear");
      emit("input", "");
    };
    watch(() => props2.modelValue, () => {
      var _a2;
      nextTick(() => resizeTextarea());
      if (props2.validateEvent) {
        (_a2 = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a2.call(formItem, "change").catch((err) => debugWarn());
      }
    });
    watch(nativeInputValue, () => setNativeInputValue());
    watch(() => props2.type, async () => {
      await nextTick();
      setNativeInputValue();
      resizeTextarea();
      updateIconOffset();
    });
    onMounted(async () => {
      if (!props2.formatter && props2.parser)
        ;
      setNativeInputValue();
      updateIconOffset();
      await nextTick();
      resizeTextarea();
    });
    onUpdated(async () => {
      await nextTick();
      updateIconOffset();
    });
    expose({
      input: input2,
      textarea,
      ref: _ref,
      textareaStyle,
      autosize: toRef(props2, "autosize"),
      focus,
      blur,
      select: select2,
      clear,
      resizeTextarea
    });
    return (_ctx, _cache) => {
      return withDirectives((openBlock(), createElementBlock("div", mergeProps(unref(containerAttrs), {
        class: [
          _ctx.type === "textarea" ? unref(nsTextarea).b() : unref(nsInput).b(),
          unref(nsInput).m(unref(inputSize)),
          unref(nsInput).is("disabled", unref(inputDisabled)),
          unref(nsInput).is("exceed", unref(inputExceed)),
          {
            [unref(nsInput).b("group")]: _ctx.$slots.prepend || _ctx.$slots.append,
            [unref(nsInput).bm("group", "append")]: _ctx.$slots.append,
            [unref(nsInput).bm("group", "prepend")]: _ctx.$slots.prepend,
            [unref(nsInput).m("prefix")]: _ctx.$slots.prefix || _ctx.prefixIcon,
            [unref(nsInput).m("suffix")]: _ctx.$slots.suffix || _ctx.suffixIcon || _ctx.clearable || _ctx.showPassword,
            [unref(nsInput).bm("suffix", "password-clear")]: unref(showClear) && unref(showPwdVisible)
          },
          _ctx.$attrs.class
        ],
        style: unref(containerStyle),
        role: _ctx.containerRole,
        onMouseenter: handleMouseEnter,
        onMouseleave: handleMouseLeave
      }), [
        createCommentVNode(" input "),
        _ctx.type !== "textarea" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
          createCommentVNode(" prepend slot "),
          _ctx.$slots.prepend ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(nsInput).be("group", "prepend"))
          }, [
            renderSlot(_ctx.$slots, "prepend")
          ], 2)) : createCommentVNode("v-if", true),
          createBaseVNode("div", {
            class: normalizeClass([unref(nsInput).e("wrapper"), unref(nsInput).is("focus", focused.value)])
          }, [
            createCommentVNode(" prefix slot "),
            _ctx.$slots.prefix || _ctx.prefixIcon ? (openBlock(), createElementBlock("span", {
              key: 0,
              class: normalizeClass(unref(nsInput).e("prefix"))
            }, [
              createBaseVNode("span", {
                class: normalizeClass(unref(nsInput).e("prefix-inner"))
              }, [
                renderSlot(_ctx.$slots, "prefix"),
                _ctx.prefixIcon ? (openBlock(), createBlock(unref(ElIcon), {
                  key: 0,
                  class: normalizeClass(unref(nsInput).e("icon"))
                }, {
                  default: withCtx(() => [
                    (openBlock(), createBlock(resolveDynamicComponent(_ctx.prefixIcon)))
                  ]),
                  _: 1
                }, 8, ["class"])) : createCommentVNode("v-if", true)
              ], 2)
            ], 2)) : createCommentVNode("v-if", true),
            createBaseVNode("input", mergeProps({
              id: unref(inputId),
              ref_key: "input",
              ref: input2,
              class: unref(nsInput).e("inner")
            }, unref(attrs), {
              type: _ctx.showPassword ? passwordVisible.value ? "text" : "password" : _ctx.type,
              disabled: unref(inputDisabled),
              formatter: _ctx.formatter,
              parser: _ctx.parser,
              readonly: _ctx.readonly,
              autocomplete: _ctx.autocomplete,
              tabindex: _ctx.tabindex,
              "aria-label": _ctx.label,
              placeholder: _ctx.placeholder,
              style: _ctx.inputStyle,
              onCompositionstart: handleCompositionStart,
              onCompositionupdate: handleCompositionUpdate,
              onCompositionend: handleCompositionEnd,
              onInput: handleInput,
              onFocus: handleFocus,
              onBlur: handleBlur,
              onChange: handleChange,
              onKeydown: handleKeydown
            }), null, 16, _hoisted_2$E),
            createCommentVNode(" suffix slot "),
            unref(suffixVisible) ? (openBlock(), createElementBlock("span", {
              key: 1,
              class: normalizeClass(unref(nsInput).e("suffix"))
            }, [
              createBaseVNode("span", {
                class: normalizeClass(unref(nsInput).e("suffix-inner"))
              }, [
                !unref(showClear) || !unref(showPwdVisible) || !unref(isWordLimitVisible) ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                  renderSlot(_ctx.$slots, "suffix"),
                  _ctx.suffixIcon ? (openBlock(), createBlock(unref(ElIcon), {
                    key: 0,
                    class: normalizeClass(unref(nsInput).e("icon"))
                  }, {
                    default: withCtx(() => [
                      (openBlock(), createBlock(resolveDynamicComponent(_ctx.suffixIcon)))
                    ]),
                    _: 1
                  }, 8, ["class"])) : createCommentVNode("v-if", true)
                ], 64)) : createCommentVNode("v-if", true),
                unref(showClear) ? (openBlock(), createBlock(unref(ElIcon), {
                  key: 1,
                  class: normalizeClass([unref(nsInput).e("icon"), unref(nsInput).e("clear")]),
                  onMousedown: withModifiers(unref(NOOP), ["prevent"]),
                  onClick: clear
                }, {
                  default: withCtx(() => [
                    createVNode(unref(circle_close_default))
                  ]),
                  _: 1
                }, 8, ["class", "onMousedown"])) : createCommentVNode("v-if", true),
                unref(showPwdVisible) ? (openBlock(), createBlock(unref(ElIcon), {
                  key: 2,
                  class: normalizeClass([unref(nsInput).e("icon"), unref(nsInput).e("password")]),
                  onClick: handlePasswordVisible
                }, {
                  default: withCtx(() => [
                    (openBlock(), createBlock(resolveDynamicComponent(unref(passwordIcon))))
                  ]),
                  _: 1
                }, 8, ["class"])) : createCommentVNode("v-if", true),
                unref(isWordLimitVisible) ? (openBlock(), createElementBlock("span", {
                  key: 3,
                  class: normalizeClass(unref(nsInput).e("count"))
                }, [
                  createBaseVNode("span", {
                    class: normalizeClass(unref(nsInput).e("count-inner"))
                  }, toDisplayString(unref(textLength)) + " / " + toDisplayString(unref(attrs).maxlength), 3)
                ], 2)) : createCommentVNode("v-if", true),
                unref(validateState) && unref(validateIcon) && unref(needStatusIcon) ? (openBlock(), createBlock(unref(ElIcon), {
                  key: 4,
                  class: normalizeClass([
                    unref(nsInput).e("icon"),
                    unref(nsInput).e("validateIcon"),
                    unref(nsInput).is("loading", unref(validateState) === "validating")
                  ])
                }, {
                  default: withCtx(() => [
                    (openBlock(), createBlock(resolveDynamicComponent(unref(validateIcon))))
                  ]),
                  _: 1
                }, 8, ["class"])) : createCommentVNode("v-if", true)
              ], 2)
            ], 2)) : createCommentVNode("v-if", true)
          ], 2),
          createCommentVNode(" append slot "),
          _ctx.$slots.append ? (openBlock(), createElementBlock("div", {
            key: 1,
            class: normalizeClass(unref(nsInput).be("group", "append"))
          }, [
            renderSlot(_ctx.$slots, "append")
          ], 2)) : createCommentVNode("v-if", true)
        ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
          createCommentVNode(" textarea "),
          createBaseVNode("textarea", mergeProps({
            id: unref(inputId),
            ref_key: "textarea",
            ref: textarea,
            class: unref(nsTextarea).e("inner")
          }, unref(attrs), {
            tabindex: _ctx.tabindex,
            disabled: unref(inputDisabled),
            readonly: _ctx.readonly,
            autocomplete: _ctx.autocomplete,
            style: unref(textareaStyle),
            "aria-label": _ctx.label,
            placeholder: _ctx.placeholder,
            onCompositionstart: handleCompositionStart,
            onCompositionupdate: handleCompositionUpdate,
            onCompositionend: handleCompositionEnd,
            onInput: handleInput,
            onFocus: handleFocus,
            onBlur: handleBlur,
            onChange: handleChange,
            onKeydown: handleKeydown
          }), null, 16, _hoisted_3$x),
          unref(isWordLimitVisible) ? (openBlock(), createElementBlock("span", {
            key: 0,
            style: normalizeStyle(countStyle.value),
            class: normalizeClass(unref(nsInput).e("count"))
          }, toDisplayString(unref(textLength)) + " / " + toDisplayString(unref(attrs).maxlength), 7)) : createCommentVNode("v-if", true)
        ], 64))
      ], 16, _hoisted_1$S)), [
        [vShow, _ctx.type !== "hidden"]
      ]);
    };
  }
});
var Input = _export_sfc(_sfc_main$1l, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);
var ElInput = withInstall(Input);
var GAP = 4;
var BAR_MAP = {
  vertical: {
    offset: "offsetHeight",
    scroll: "scrollTop",
    scrollSize: "scrollHeight",
    size: "height",
    key: "vertical",
    axis: "Y",
    client: "clientY",
    direction: "top"
  },
  horizontal: {
    offset: "offsetWidth",
    scroll: "scrollLeft",
    scrollSize: "scrollWidth",
    size: "width",
    key: "horizontal",
    axis: "X",
    client: "clientX",
    direction: "left"
  }
};
var renderThumbStyle = ({
  move,
  size,
  bar
}) => ({
  [bar.size]: size,
  transform: `translate${bar.axis}(${move}%)`
});
var thumbProps = buildProps({
  vertical: Boolean,
  size: String,
  move: Number,
  ratio: {
    type: Number,
    required: true
  },
  always: Boolean
});
var _sfc_main$1k = defineComponent({
  __name: "thumb",
  props: thumbProps,
  setup(__props) {
    const props2 = __props;
    const COMPONENT_NAME2 = "Thumb";
    const scrollbar2 = inject(scrollbarContextKey);
    const ns2 = useNamespace("scrollbar");
    if (!scrollbar2)
      throwError(COMPONENT_NAME2, "can not inject scrollbar context");
    const instance = ref();
    const thumb = ref();
    const thumbState = ref({});
    const visible = ref(false);
    let cursorDown = false;
    let cursorLeave = false;
    let originalOnSelectStart = isClient ? document.onselectstart : null;
    const bar = computed(() => BAR_MAP[props2.vertical ? "vertical" : "horizontal"]);
    const thumbStyle = computed(() => renderThumbStyle({
      size: props2.size,
      move: props2.move,
      bar: bar.value
    }));
    const offsetRatio = computed(() => instance.value[bar.value.offset] ** 2 / scrollbar2.wrapElement[bar.value.scrollSize] / props2.ratio / thumb.value[bar.value.offset]);
    const clickThumbHandler = (e2) => {
      var _a2;
      e2.stopPropagation();
      if (e2.ctrlKey || [1, 2].includes(e2.button))
        return;
      (_a2 = window.getSelection()) == null ? void 0 : _a2.removeAllRanges();
      startDrag(e2);
      const el2 = e2.currentTarget;
      if (!el2)
        return;
      thumbState.value[bar.value.axis] = el2[bar.value.offset] - (e2[bar.value.client] - el2.getBoundingClientRect()[bar.value.direction]);
    };
    const clickTrackHandler = (e2) => {
      if (!thumb.value || !instance.value || !scrollbar2.wrapElement)
        return;
      const offset = Math.abs(e2.target.getBoundingClientRect()[bar.value.direction] - e2[bar.value.client]);
      const thumbHalf = thumb.value[bar.value.offset] / 2;
      const thumbPositionPercentage = (offset - thumbHalf) * 100 * offsetRatio.value / instance.value[bar.value.offset];
      scrollbar2.wrapElement[bar.value.scroll] = thumbPositionPercentage * scrollbar2.wrapElement[bar.value.scrollSize] / 100;
    };
    const startDrag = (e2) => {
      e2.stopImmediatePropagation();
      cursorDown = true;
      document.addEventListener("mousemove", mouseMoveDocumentHandler);
      document.addEventListener("mouseup", mouseUpDocumentHandler);
      originalOnSelectStart = document.onselectstart;
      document.onselectstart = () => false;
    };
    const mouseMoveDocumentHandler = (e2) => {
      if (!instance.value || !thumb.value)
        return;
      if (cursorDown === false)
        return;
      const prevPage = thumbState.value[bar.value.axis];
      if (!prevPage)
        return;
      const offset = (instance.value.getBoundingClientRect()[bar.value.direction] - e2[bar.value.client]) * -1;
      const thumbClickPosition = thumb.value[bar.value.offset] - prevPage;
      const thumbPositionPercentage = (offset - thumbClickPosition) * 100 * offsetRatio.value / instance.value[bar.value.offset];
      scrollbar2.wrapElement[bar.value.scroll] = thumbPositionPercentage * scrollbar2.wrapElement[bar.value.scrollSize] / 100;
    };
    const mouseUpDocumentHandler = () => {
      cursorDown = false;
      thumbState.value[bar.value.axis] = 0;
      document.removeEventListener("mousemove", mouseMoveDocumentHandler);
      document.removeEventListener("mouseup", mouseUpDocumentHandler);
      restoreOnselectstart();
      if (cursorLeave)
        visible.value = false;
    };
    const mouseMoveScrollbarHandler = () => {
      cursorLeave = false;
      visible.value = !!props2.size;
    };
    const mouseLeaveScrollbarHandler = () => {
      cursorLeave = true;
      visible.value = cursorDown;
    };
    onBeforeUnmount(() => {
      restoreOnselectstart();
      document.removeEventListener("mouseup", mouseUpDocumentHandler);
    });
    const restoreOnselectstart = () => {
      if (document.onselectstart !== originalOnSelectStart)
        document.onselectstart = originalOnSelectStart;
    };
    useEventListener(toRef(scrollbar2, "scrollbarElement"), "mousemove", mouseMoveScrollbarHandler);
    useEventListener(toRef(scrollbar2, "scrollbarElement"), "mouseleave", mouseLeaveScrollbarHandler);
    return (_ctx, _cache) => {
      return openBlock(), createBlock(Transition, {
        name: unref(ns2).b("fade"),
        persisted: ""
      }, {
        default: withCtx(() => [
          withDirectives(createBaseVNode("div", {
            ref_key: "instance",
            ref: instance,
            class: normalizeClass([unref(ns2).e("bar"), unref(ns2).is(unref(bar).key)]),
            onMousedown: clickTrackHandler
          }, [
            createBaseVNode("div", {
              ref_key: "thumb",
              ref: thumb,
              class: normalizeClass(unref(ns2).e("thumb")),
              style: normalizeStyle(unref(thumbStyle)),
              onMousedown: clickThumbHandler
            }, null, 38)
          ], 34), [
            [vShow, _ctx.always || visible.value]
          ])
        ]),
        _: 1
      }, 8, ["name"]);
    };
  }
});
var Thumb = _export_sfc(_sfc_main$1k, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);
var barProps = buildProps({
  always: {
    type: Boolean,
    default: true
  },
  width: String,
  height: String,
  ratioX: {
    type: Number,
    default: 1
  },
  ratioY: {
    type: Number,
    default: 1
  }
});
var _sfc_main$1j = defineComponent({
  __name: "bar",
  props: barProps,
  setup(__props, { expose }) {
    const props2 = __props;
    const moveX = ref(0);
    const moveY = ref(0);
    const handleScroll = (wrap) => {
      if (wrap) {
        const offsetHeight2 = wrap.offsetHeight - GAP;
        const offsetWidth2 = wrap.offsetWidth - GAP;
        moveY.value = wrap.scrollTop * 100 / offsetHeight2 * props2.ratioY;
        moveX.value = wrap.scrollLeft * 100 / offsetWidth2 * props2.ratioX;
      }
    };
    expose({
      handleScroll
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock(Fragment, null, [
        createVNode(Thumb, {
          move: moveX.value,
          ratio: _ctx.ratioX,
          size: _ctx.width,
          always: _ctx.always
        }, null, 8, ["move", "ratio", "size", "always"]),
        createVNode(Thumb, {
          move: moveY.value,
          ratio: _ctx.ratioY,
          size: _ctx.height,
          vertical: "",
          always: _ctx.always
        }, null, 8, ["move", "ratio", "size", "always"])
      ], 64);
    };
  }
});
var Bar = _export_sfc(_sfc_main$1j, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);
var scrollbarProps = buildProps({
  height: {
    type: [String, Number],
    default: ""
  },
  maxHeight: {
    type: [String, Number],
    default: ""
  },
  native: Boolean,
  wrapStyle: {
    type: definePropType([String, Object, Array]),
    default: ""
  },
  wrapClass: {
    type: [String, Array],
    default: ""
  },
  viewClass: {
    type: [String, Array],
    default: ""
  },
  viewStyle: {
    type: [String, Array, Object],
    default: ""
  },
  noresize: Boolean,
  tag: {
    type: String,
    default: "div"
  },
  always: Boolean,
  minSize: {
    type: Number,
    default: 20
  }
});
var scrollbarEmits = {
  scroll: ({
    scrollTop,
    scrollLeft
  }) => [scrollTop, scrollLeft].every(isNumber)
};
var __default__$i = {
  name: "ElScrollbar"
};
var _sfc_main$1i = defineComponent({
  ...__default__$i,
  props: scrollbarProps,
  emits: scrollbarEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const ns2 = useNamespace("scrollbar");
    let stopResizeObserver = void 0;
    let stopResizeListener = void 0;
    const scrollbar$ = ref();
    const wrap$ = ref();
    const resize$ = ref();
    const sizeWidth = ref("0");
    const sizeHeight = ref("0");
    const barRef = ref();
    const ratioY = ref(1);
    const ratioX = ref(1);
    const style2 = computed(() => {
      const style22 = {};
      if (props2.height)
        style22.height = addUnit(props2.height);
      if (props2.maxHeight)
        style22.maxHeight = addUnit(props2.maxHeight);
      return [props2.wrapStyle, style22];
    });
    const handleScroll = () => {
      var _a2;
      if (wrap$.value) {
        (_a2 = barRef.value) == null ? void 0 : _a2.handleScroll(wrap$.value);
        emit("scroll", {
          scrollTop: wrap$.value.scrollTop,
          scrollLeft: wrap$.value.scrollLeft
        });
      }
    };
    function scrollTo(arg1, arg2) {
      if (isObject$1(arg1)) {
        wrap$.value.scrollTo(arg1);
      } else if (isNumber(arg1) && isNumber(arg2)) {
        wrap$.value.scrollTo(arg1, arg2);
      }
    }
    const setScrollTop = (value) => {
      if (!isNumber(value)) {
        return;
      }
      wrap$.value.scrollTop = value;
    };
    const setScrollLeft2 = (value) => {
      if (!isNumber(value)) {
        return;
      }
      wrap$.value.scrollLeft = value;
    };
    const update = () => {
      if (!wrap$.value)
        return;
      const offsetHeight2 = wrap$.value.offsetHeight - GAP;
      const offsetWidth2 = wrap$.value.offsetWidth - GAP;
      const originalHeight = offsetHeight2 ** 2 / wrap$.value.scrollHeight;
      const originalWidth = offsetWidth2 ** 2 / wrap$.value.scrollWidth;
      const height = Math.max(originalHeight, props2.minSize);
      const width = Math.max(originalWidth, props2.minSize);
      ratioY.value = originalHeight / (offsetHeight2 - originalHeight) / (height / (offsetHeight2 - height));
      ratioX.value = originalWidth / (offsetWidth2 - originalWidth) / (width / (offsetWidth2 - width));
      sizeHeight.value = height + GAP < offsetHeight2 ? `${height}px` : "";
      sizeWidth.value = width + GAP < offsetWidth2 ? `${width}px` : "";
    };
    watch(() => props2.noresize, (noresize) => {
      if (noresize) {
        stopResizeObserver == null ? void 0 : stopResizeObserver();
        stopResizeListener == null ? void 0 : stopResizeListener();
      } else {
        ({ stop: stopResizeObserver } = useResizeObserver(resize$, update));
        stopResizeListener = useEventListener("resize", update);
      }
    }, { immediate: true });
    watch(() => [props2.maxHeight, props2.height], () => {
      if (!props2.native)
        nextTick(() => {
          var _a2;
          update();
          if (wrap$.value) {
            (_a2 = barRef.value) == null ? void 0 : _a2.handleScroll(wrap$.value);
          }
        });
    });
    provide(scrollbarContextKey, reactive({
      scrollbarElement: scrollbar$,
      wrapElement: wrap$
    }));
    onMounted(() => {
      if (!props2.native)
        nextTick(() => {
          update();
        });
    });
    onUpdated(() => update());
    expose({
      wrap$,
      update,
      scrollTo,
      setScrollTop,
      setScrollLeft: setScrollLeft2,
      handleScroll
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "scrollbar$",
        ref: scrollbar$,
        class: normalizeClass(unref(ns2).b())
      }, [
        createBaseVNode("div", {
          ref_key: "wrap$",
          ref: wrap$,
          class: normalizeClass([
            _ctx.wrapClass,
            unref(ns2).e("wrap"),
            { [unref(ns2).em("wrap", "hidden-default")]: !_ctx.native }
          ]),
          style: normalizeStyle(unref(style2)),
          onScroll: handleScroll
        }, [
          (openBlock(), createBlock(resolveDynamicComponent(_ctx.tag), {
            ref_key: "resize$",
            ref: resize$,
            class: normalizeClass([unref(ns2).e("view"), _ctx.viewClass]),
            style: normalizeStyle(_ctx.viewStyle)
          }, {
            default: withCtx(() => [
              renderSlot(_ctx.$slots, "default")
            ]),
            _: 3
          }, 8, ["class", "style"]))
        ], 38),
        !_ctx.native ? (openBlock(), createBlock(Bar, {
          key: 0,
          ref_key: "barRef",
          ref: barRef,
          height: sizeHeight.value,
          width: sizeWidth.value,
          always: _ctx.always,
          "ratio-x": ratioX.value,
          "ratio-y": ratioY.value
        }, null, 8, ["height", "width", "always", "ratio-x", "ratio-y"])) : createCommentVNode("v-if", true)
      ], 2);
    };
  }
});
var Scrollbar = _export_sfc(_sfc_main$1i, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);
var ElScrollbar = withInstall(Scrollbar);
var roleTypes = [
  "dialog",
  "grid",
  "listbox",
  "menu",
  "tooltip",
  "tree"
];
var usePopperProps = buildProps({
  role: {
    type: String,
    values: roleTypes,
    default: "tooltip"
  }
});
var __default__$h = {
  name: "ElPopperRoot",
  inheritAttrs: false
};
var _sfc_main$1h = defineComponent({
  ...__default__$h,
  props: usePopperProps,
  setup(__props, { expose }) {
    const props2 = __props;
    const triggerRef2 = ref();
    const popperInstanceRef = ref();
    const contentRef = ref();
    const referenceRef = ref();
    const role = computed(() => props2.role);
    const popperProvides = {
      triggerRef: triggerRef2,
      popperInstanceRef,
      contentRef,
      referenceRef,
      role
    };
    expose(popperProvides);
    provide(POPPER_INJECTION_KEY, popperProvides);
    return (_ctx, _cache) => {
      return renderSlot(_ctx.$slots, "default");
    };
  }
});
var Popper = _export_sfc(_sfc_main$1h, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);
var usePopperArrowProps = buildProps({
  arrowOffset: {
    type: Number,
    default: 5
  }
});
var __default__$g = {
  name: "ElPopperArrow",
  inheritAttrs: false
};
var _sfc_main$1g = defineComponent({
  ...__default__$g,
  props: usePopperArrowProps,
  setup(__props, { expose }) {
    const props2 = __props;
    const ns2 = useNamespace("popper");
    const { arrowOffset, arrowRef } = inject(POPPER_CONTENT_INJECTION_KEY, void 0);
    watch(() => props2.arrowOffset, (val) => {
      arrowOffset.value = val;
    });
    onBeforeUnmount(() => {
      arrowRef.value = void 0;
    });
    expose({
      arrowRef
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("span", {
        ref_key: "arrowRef",
        ref: arrowRef,
        class: normalizeClass(unref(ns2).e("arrow")),
        "data-popper-arrow": ""
      }, null, 2);
    };
  }
});
var ElPopperArrow = _export_sfc(_sfc_main$1g, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);
var NAME = "ElOnlyChild";
var OnlyChild = defineComponent({
  name: NAME,
  setup(_2, {
    slots,
    attrs
  }) {
    var _a2;
    const forwardRefInjection = inject(FORWARD_REF_INJECTION_KEY);
    const forwardRefDirective = useForwardRefDirective((_a2 = forwardRefInjection == null ? void 0 : forwardRefInjection.setForwardRef) != null ? _a2 : NOOP);
    return () => {
      var _a22;
      const defaultSlot = (_a22 = slots.default) == null ? void 0 : _a22.call(slots, attrs);
      if (!defaultSlot)
        return null;
      if (defaultSlot.length > 1) {
        return null;
      }
      const firstLegitNode = findFirstLegitChild(defaultSlot);
      if (!firstLegitNode) {
        return null;
      }
      return withDirectives(cloneVNode(firstLegitNode, attrs), [[forwardRefDirective]]);
    };
  }
});
function findFirstLegitChild(node) {
  if (!node)
    return null;
  const children = node;
  for (const child of children) {
    if (isObject$1(child)) {
      switch (child.type) {
        case Comment:
          continue;
        case Text:
        case "svg":
          return wrapTextContent(child);
        case Fragment:
          return findFirstLegitChild(child.children);
        default:
          return child;
      }
    }
    return wrapTextContent(child);
  }
  return null;
}
function wrapTextContent(s3) {
  const ns2 = useNamespace("only-child");
  return createVNode("span", {
    "class": ns2.e("content")
  }, [s3]);
}
var usePopperTriggerProps = buildProps({
  virtualRef: {
    type: definePropType(Object)
  },
  virtualTriggering: Boolean,
  onMouseenter: Function,
  onMouseleave: Function,
  onClick: Function,
  onKeydown: Function,
  onFocus: Function,
  onBlur: Function,
  onContextmenu: Function,
  id: String,
  open: Boolean
});
var __default__$f = {
  name: "ElPopperTrigger",
  inheritAttrs: false
};
var _sfc_main$1f = defineComponent({
  ...__default__$f,
  props: usePopperTriggerProps,
  setup(__props, { expose }) {
    const props2 = __props;
    const { role, triggerRef: triggerRef2 } = inject(POPPER_INJECTION_KEY, void 0);
    useForwardRef(triggerRef2);
    const ariaControls = computed(() => {
      return ariaHaspopup.value ? props2.id : void 0;
    });
    const ariaDescribedby = computed(() => {
      if (role && role.value === "tooltip") {
        return props2.open && props2.id ? props2.id : void 0;
      }
      return void 0;
    });
    const ariaHaspopup = computed(() => {
      if (role && role.value !== "tooltip") {
        return role.value;
      }
      return void 0;
    });
    const ariaExpanded = computed(() => {
      return ariaHaspopup.value ? `${props2.open}` : void 0;
    });
    let virtualTriggerAriaStopWatch = void 0;
    onMounted(() => {
      watch(() => props2.virtualRef, (virtualEl) => {
        if (virtualEl) {
          triggerRef2.value = unrefElement(virtualEl);
        }
      }, {
        immediate: true
      });
      watch(() => triggerRef2.value, (el2, prevEl) => {
        virtualTriggerAriaStopWatch == null ? void 0 : virtualTriggerAriaStopWatch();
        virtualTriggerAriaStopWatch = void 0;
        if (isElement$1(el2)) {
          [
            "onMouseenter",
            "onMouseleave",
            "onClick",
            "onKeydown",
            "onFocus",
            "onBlur",
            "onContextmenu"
          ].forEach((eventName) => {
            var _a2;
            const handler = props2[eventName];
            if (handler) {
              el2.addEventListener(eventName.slice(2).toLowerCase(), handler);
              (_a2 = prevEl == null ? void 0 : prevEl.removeEventListener) == null ? void 0 : _a2.call(prevEl, eventName.slice(2).toLowerCase(), handler);
            }
          });
          virtualTriggerAriaStopWatch = watch([ariaControls, ariaDescribedby, ariaHaspopup, ariaExpanded], (watches) => {
            [
              "aria-controls",
              "aria-describedby",
              "aria-haspopup",
              "aria-expanded"
            ].forEach((key, idx) => {
              isNil(watches[idx]) ? el2.removeAttribute(key) : el2.setAttribute(key, watches[idx]);
            });
          }, { immediate: true });
        }
        if (isElement$1(prevEl)) {
          [
            "aria-controls",
            "aria-describedby",
            "aria-haspopup",
            "aria-expanded"
          ].forEach((key) => prevEl.removeAttribute(key));
        }
      }, {
        immediate: true
      });
    });
    onBeforeUnmount(() => {
      virtualTriggerAriaStopWatch == null ? void 0 : virtualTriggerAriaStopWatch();
      virtualTriggerAriaStopWatch = void 0;
    });
    expose({
      triggerRef: triggerRef2
    });
    return (_ctx, _cache) => {
      return !_ctx.virtualTriggering ? (openBlock(), createBlock(unref(OnlyChild), mergeProps({ key: 0 }, _ctx.$attrs, {
        "aria-controls": unref(ariaControls),
        "aria-describedby": unref(ariaDescribedby),
        "aria-expanded": unref(ariaExpanded),
        "aria-haspopup": unref(ariaHaspopup)
      }), {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "default")
        ]),
        _: 3
      }, 16, ["aria-controls", "aria-describedby", "aria-expanded", "aria-haspopup"])) : createCommentVNode("v-if", true);
    };
  }
});
var ElPopperTrigger = _export_sfc(_sfc_main$1f, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);
var E = "top";
var R = "bottom";
var W = "right";
var P = "left";
var me = "auto";
var G = [E, R, W, P];
var U = "start";
var J = "end";
var Xe$1 = "clippingParents";
var je = "viewport";
var K = "popper";
var Ye = "reference";
var De = G.reduce(function(t2, e2) {
  return t2.concat([e2 + "-" + U, e2 + "-" + J]);
}, []);
var Ee$1 = [].concat(G, [me]).reduce(function(t2, e2) {
  return t2.concat([e2, e2 + "-" + U, e2 + "-" + J]);
}, []);
var Ge$1 = "beforeRead";
var Je = "read";
var Ke$1 = "afterRead";
var Qe = "beforeMain";
var Ze = "main";
var et = "afterMain";
var tt = "beforeWrite";
var nt$1 = "write";
var rt = "afterWrite";
var ot$1 = [Ge$1, Je, Ke$1, Qe, Ze, et, tt, nt$1, rt];
function C(t2) {
  return t2 ? (t2.nodeName || "").toLowerCase() : null;
}
function H$1(t2) {
  if (t2 == null)
    return window;
  if (t2.toString() !== "[object Window]") {
    var e2 = t2.ownerDocument;
    return e2 && e2.defaultView || window;
  }
  return t2;
}
function Q(t2) {
  var e2 = H$1(t2).Element;
  return t2 instanceof e2 || t2 instanceof Element;
}
function B(t2) {
  var e2 = H$1(t2).HTMLElement;
  return t2 instanceof e2 || t2 instanceof HTMLElement;
}
function Pe(t2) {
  if (typeof ShadowRoot == "undefined")
    return false;
  var e2 = H$1(t2).ShadowRoot;
  return t2 instanceof e2 || t2 instanceof ShadowRoot;
}
function Mt$1(t2) {
  var e2 = t2.state;
  Object.keys(e2.elements).forEach(function(n) {
    var r = e2.styles[n] || {}, o = e2.attributes[n] || {}, i2 = e2.elements[n];
    !B(i2) || !C(i2) || (Object.assign(i2.style, r), Object.keys(o).forEach(function(a3) {
      var s3 = o[a3];
      s3 === false ? i2.removeAttribute(a3) : i2.setAttribute(a3, s3 === true ? "" : s3);
    }));
  });
}
function Rt(t2) {
  var e2 = t2.state, n = { popper: { position: e2.options.strategy, left: "0", top: "0", margin: "0" }, arrow: { position: "absolute" }, reference: {} };
  return Object.assign(e2.elements.popper.style, n.popper), e2.styles = n, e2.elements.arrow && Object.assign(e2.elements.arrow.style, n.arrow), function() {
    Object.keys(e2.elements).forEach(function(r) {
      var o = e2.elements[r], i2 = e2.attributes[r] || {}, a3 = Object.keys(e2.styles.hasOwnProperty(r) ? e2.styles[r] : n[r]), s3 = a3.reduce(function(f, c2) {
        return f[c2] = "", f;
      }, {});
      !B(o) || !C(o) || (Object.assign(o.style, s3), Object.keys(i2).forEach(function(f) {
        o.removeAttribute(f);
      }));
    });
  };
}
var Ae$1 = { name: "applyStyles", enabled: true, phase: "write", fn: Mt$1, effect: Rt, requires: ["computeStyles"] };
function q(t2) {
  return t2.split("-")[0];
}
var X = Math.max;
var ve = Math.min;
var Z = Math.round;
function ee(t2, e2) {
  e2 === void 0 && (e2 = false);
  var n = t2.getBoundingClientRect(), r = 1, o = 1;
  if (B(t2) && e2) {
    var i2 = t2.offsetHeight, a3 = t2.offsetWidth;
    a3 > 0 && (r = Z(n.width) / a3 || 1), i2 > 0 && (o = Z(n.height) / i2 || 1);
  }
  return { width: n.width / r, height: n.height / o, top: n.top / o, right: n.right / r, bottom: n.bottom / o, left: n.left / r, x: n.left / r, y: n.top / o };
}
function ke$1(t2) {
  var e2 = ee(t2), n = t2.offsetWidth, r = t2.offsetHeight;
  return Math.abs(e2.width - n) <= 1 && (n = e2.width), Math.abs(e2.height - r) <= 1 && (r = e2.height), { x: t2.offsetLeft, y: t2.offsetTop, width: n, height: r };
}
function it$1(t2, e2) {
  var n = e2.getRootNode && e2.getRootNode();
  if (t2.contains(e2))
    return true;
  if (n && Pe(n)) {
    var r = e2;
    do {
      if (r && t2.isSameNode(r))
        return true;
      r = r.parentNode || r.host;
    } while (r);
  }
  return false;
}
function N(t2) {
  return H$1(t2).getComputedStyle(t2);
}
function Wt$1(t2) {
  return ["table", "td", "th"].indexOf(C(t2)) >= 0;
}
function I(t2) {
  return ((Q(t2) ? t2.ownerDocument : t2.document) || window.document).documentElement;
}
function ge(t2) {
  return C(t2) === "html" ? t2 : t2.assignedSlot || t2.parentNode || (Pe(t2) ? t2.host : null) || I(t2);
}
function at$1(t2) {
  return !B(t2) || N(t2).position === "fixed" ? null : t2.offsetParent;
}
function Bt$1(t2) {
  var e2 = navigator.userAgent.toLowerCase().indexOf("firefox") !== -1, n = navigator.userAgent.indexOf("Trident") !== -1;
  if (n && B(t2)) {
    var r = N(t2);
    if (r.position === "fixed")
      return null;
  }
  var o = ge(t2);
  for (Pe(o) && (o = o.host); B(o) && ["html", "body"].indexOf(C(o)) < 0; ) {
    var i2 = N(o);
    if (i2.transform !== "none" || i2.perspective !== "none" || i2.contain === "paint" || ["transform", "perspective"].indexOf(i2.willChange) !== -1 || e2 && i2.willChange === "filter" || e2 && i2.filter && i2.filter !== "none")
      return o;
    o = o.parentNode;
  }
  return null;
}
function se(t2) {
  for (var e2 = H$1(t2), n = at$1(t2); n && Wt$1(n) && N(n).position === "static"; )
    n = at$1(n);
  return n && (C(n) === "html" || C(n) === "body" && N(n).position === "static") ? e2 : n || Bt$1(t2) || e2;
}
function Le(t2) {
  return ["top", "bottom"].indexOf(t2) >= 0 ? "x" : "y";
}
function fe(t2, e2, n) {
  return X(t2, ve(e2, n));
}
function St(t2, e2, n) {
  var r = fe(t2, e2, n);
  return r > n ? n : r;
}
function st() {
  return { top: 0, right: 0, bottom: 0, left: 0 };
}
function ft(t2) {
  return Object.assign({}, st(), t2);
}
function ct(t2, e2) {
  return e2.reduce(function(n, r) {
    return n[r] = t2, n;
  }, {});
}
var Tt$1 = function(t2, e2) {
  return t2 = typeof t2 == "function" ? t2(Object.assign({}, e2.rects, { placement: e2.placement })) : t2, ft(typeof t2 != "number" ? t2 : ct(t2, G));
};
function Ht$1(t2) {
  var e2, n = t2.state, r = t2.name, o = t2.options, i2 = n.elements.arrow, a3 = n.modifiersData.popperOffsets, s3 = q(n.placement), f = Le(s3), c2 = [P, W].indexOf(s3) >= 0, u2 = c2 ? "height" : "width";
  if (!(!i2 || !a3)) {
    var m3 = Tt$1(o.padding, n), v = ke$1(i2), l = f === "y" ? E : P, h4 = f === "y" ? R : W, p = n.rects.reference[u2] + n.rects.reference[f] - a3[f] - n.rects.popper[u2], g = a3[f] - n.rects.reference[f], x2 = se(i2), y3 = x2 ? f === "y" ? x2.clientHeight || 0 : x2.clientWidth || 0 : 0, $ = p / 2 - g / 2, d3 = m3[l], b2 = y3 - v[u2] - m3[h4], w2 = y3 / 2 - v[u2] / 2 + $, O2 = fe(d3, w2, b2), j = f;
    n.modifiersData[r] = (e2 = {}, e2[j] = O2, e2.centerOffset = O2 - w2, e2);
  }
}
function Ct$1(t2) {
  var e2 = t2.state, n = t2.options, r = n.element, o = r === void 0 ? "[data-popper-arrow]" : r;
  o != null && (typeof o == "string" && (o = e2.elements.popper.querySelector(o), !o) || !it$1(e2.elements.popper, o) || (e2.elements.arrow = o));
}
var pt$1 = { name: "arrow", enabled: true, phase: "main", fn: Ht$1, effect: Ct$1, requires: ["popperOffsets"], requiresIfExists: ["preventOverflow"] };
function te(t2) {
  return t2.split("-")[1];
}
var qt$1 = { top: "auto", right: "auto", bottom: "auto", left: "auto" };
function Vt(t2) {
  var e2 = t2.x, n = t2.y, r = window, o = r.devicePixelRatio || 1;
  return { x: Z(e2 * o) / o || 0, y: Z(n * o) / o || 0 };
}
function ut(t2) {
  var e2, n = t2.popper, r = t2.popperRect, o = t2.placement, i2 = t2.variation, a3 = t2.offsets, s3 = t2.position, f = t2.gpuAcceleration, c2 = t2.adaptive, u2 = t2.roundOffsets, m3 = t2.isFixed, v = a3.x, l = v === void 0 ? 0 : v, h4 = a3.y, p = h4 === void 0 ? 0 : h4, g = typeof u2 == "function" ? u2({ x: l, y: p }) : { x: l, y: p };
  l = g.x, p = g.y;
  var x2 = a3.hasOwnProperty("x"), y3 = a3.hasOwnProperty("y"), $ = P, d3 = E, b2 = window;
  if (c2) {
    var w2 = se(n), O2 = "clientHeight", j = "clientWidth";
    if (w2 === H$1(n) && (w2 = I(n), N(w2).position !== "static" && s3 === "absolute" && (O2 = "scrollHeight", j = "scrollWidth")), w2 = w2, o === E || (o === P || o === W) && i2 === J) {
      d3 = R;
      var A = m3 && w2 === b2 && b2.visualViewport ? b2.visualViewport.height : w2[O2];
      p -= A - r.height, p *= f ? 1 : -1;
    }
    if (o === P || (o === E || o === R) && i2 === J) {
      $ = W;
      var k2 = m3 && w2 === b2 && b2.visualViewport ? b2.visualViewport.width : w2[j];
      l -= k2 - r.width, l *= f ? 1 : -1;
    }
  }
  var D2 = Object.assign({ position: s3 }, c2 && qt$1), S3 = u2 === true ? Vt({ x: l, y: p }) : { x: l, y: p };
  if (l = S3.x, p = S3.y, f) {
    var L2;
    return Object.assign({}, D2, (L2 = {}, L2[d3] = y3 ? "0" : "", L2[$] = x2 ? "0" : "", L2.transform = (b2.devicePixelRatio || 1) <= 1 ? "translate(" + l + "px, " + p + "px)" : "translate3d(" + l + "px, " + p + "px, 0)", L2));
  }
  return Object.assign({}, D2, (e2 = {}, e2[d3] = y3 ? p + "px" : "", e2[$] = x2 ? l + "px" : "", e2.transform = "", e2));
}
function Nt$1(t2) {
  var e2 = t2.state, n = t2.options, r = n.gpuAcceleration, o = r === void 0 ? true : r, i2 = n.adaptive, a3 = i2 === void 0 ? true : i2, s3 = n.roundOffsets, f = s3 === void 0 ? true : s3, c2 = { placement: q(e2.placement), variation: te(e2.placement), popper: e2.elements.popper, popperRect: e2.rects.popper, gpuAcceleration: o, isFixed: e2.options.strategy === "fixed" };
  e2.modifiersData.popperOffsets != null && (e2.styles.popper = Object.assign({}, e2.styles.popper, ut(Object.assign({}, c2, { offsets: e2.modifiersData.popperOffsets, position: e2.options.strategy, adaptive: a3, roundOffsets: f })))), e2.modifiersData.arrow != null && (e2.styles.arrow = Object.assign({}, e2.styles.arrow, ut(Object.assign({}, c2, { offsets: e2.modifiersData.arrow, position: "absolute", adaptive: false, roundOffsets: f })))), e2.attributes.popper = Object.assign({}, e2.attributes.popper, { "data-popper-placement": e2.placement });
}
var Me = { name: "computeStyles", enabled: true, phase: "beforeWrite", fn: Nt$1, data: {} };
var ye$1 = { passive: true };
function It(t2) {
  var e2 = t2.state, n = t2.instance, r = t2.options, o = r.scroll, i2 = o === void 0 ? true : o, a3 = r.resize, s3 = a3 === void 0 ? true : a3, f = H$1(e2.elements.popper), c2 = [].concat(e2.scrollParents.reference, e2.scrollParents.popper);
  return i2 && c2.forEach(function(u2) {
    u2.addEventListener("scroll", n.update, ye$1);
  }), s3 && f.addEventListener("resize", n.update, ye$1), function() {
    i2 && c2.forEach(function(u2) {
      u2.removeEventListener("scroll", n.update, ye$1);
    }), s3 && f.removeEventListener("resize", n.update, ye$1);
  };
}
var Re$1 = { name: "eventListeners", enabled: true, phase: "write", fn: function() {
}, effect: It, data: {} };
var _t$1 = { left: "right", right: "left", bottom: "top", top: "bottom" };
function be(t2) {
  return t2.replace(/left|right|bottom|top/g, function(e2) {
    return _t$1[e2];
  });
}
var zt$1 = { start: "end", end: "start" };
function lt$1(t2) {
  return t2.replace(/start|end/g, function(e2) {
    return zt$1[e2];
  });
}
function We$1(t2) {
  var e2 = H$1(t2), n = e2.pageXOffset, r = e2.pageYOffset;
  return { scrollLeft: n, scrollTop: r };
}
function Be$1(t2) {
  return ee(I(t2)).left + We$1(t2).scrollLeft;
}
function Ft$1(t2) {
  var e2 = H$1(t2), n = I(t2), r = e2.visualViewport, o = n.clientWidth, i2 = n.clientHeight, a3 = 0, s3 = 0;
  return r && (o = r.width, i2 = r.height, /^((?!chrome|android).)*safari/i.test(navigator.userAgent) || (a3 = r.offsetLeft, s3 = r.offsetTop)), { width: o, height: i2, x: a3 + Be$1(t2), y: s3 };
}
function Ut(t2) {
  var e2, n = I(t2), r = We$1(t2), o = (e2 = t2.ownerDocument) == null ? void 0 : e2.body, i2 = X(n.scrollWidth, n.clientWidth, o ? o.scrollWidth : 0, o ? o.clientWidth : 0), a3 = X(n.scrollHeight, n.clientHeight, o ? o.scrollHeight : 0, o ? o.clientHeight : 0), s3 = -r.scrollLeft + Be$1(t2), f = -r.scrollTop;
  return N(o || n).direction === "rtl" && (s3 += X(n.clientWidth, o ? o.clientWidth : 0) - i2), { width: i2, height: a3, x: s3, y: f };
}
function Se$1(t2) {
  var e2 = N(t2), n = e2.overflow, r = e2.overflowX, o = e2.overflowY;
  return /auto|scroll|overlay|hidden/.test(n + o + r);
}
function dt$1(t2) {
  return ["html", "body", "#document"].indexOf(C(t2)) >= 0 ? t2.ownerDocument.body : B(t2) && Se$1(t2) ? t2 : dt$1(ge(t2));
}
function ce(t2, e2) {
  var n;
  e2 === void 0 && (e2 = []);
  var r = dt$1(t2), o = r === ((n = t2.ownerDocument) == null ? void 0 : n.body), i2 = H$1(r), a3 = o ? [i2].concat(i2.visualViewport || [], Se$1(r) ? r : []) : r, s3 = e2.concat(a3);
  return o ? s3 : s3.concat(ce(ge(a3)));
}
function Te$1(t2) {
  return Object.assign({}, t2, { left: t2.x, top: t2.y, right: t2.x + t2.width, bottom: t2.y + t2.height });
}
function Xt$1(t2) {
  var e2 = ee(t2);
  return e2.top = e2.top + t2.clientTop, e2.left = e2.left + t2.clientLeft, e2.bottom = e2.top + t2.clientHeight, e2.right = e2.left + t2.clientWidth, e2.width = t2.clientWidth, e2.height = t2.clientHeight, e2.x = e2.left, e2.y = e2.top, e2;
}
function ht(t2, e2) {
  return e2 === je ? Te$1(Ft$1(t2)) : Q(e2) ? Xt$1(e2) : Te$1(Ut(I(t2)));
}
function Yt(t2) {
  var e2 = ce(ge(t2)), n = ["absolute", "fixed"].indexOf(N(t2).position) >= 0, r = n && B(t2) ? se(t2) : t2;
  return Q(r) ? e2.filter(function(o) {
    return Q(o) && it$1(o, r) && C(o) !== "body";
  }) : [];
}
function Gt(t2, e2, n) {
  var r = e2 === "clippingParents" ? Yt(t2) : [].concat(e2), o = [].concat(r, [n]), i2 = o[0], a3 = o.reduce(function(s3, f) {
    var c2 = ht(t2, f);
    return s3.top = X(c2.top, s3.top), s3.right = ve(c2.right, s3.right), s3.bottom = ve(c2.bottom, s3.bottom), s3.left = X(c2.left, s3.left), s3;
  }, ht(t2, i2));
  return a3.width = a3.right - a3.left, a3.height = a3.bottom - a3.top, a3.x = a3.left, a3.y = a3.top, a3;
}
function mt$1(t2) {
  var e2 = t2.reference, n = t2.element, r = t2.placement, o = r ? q(r) : null, i2 = r ? te(r) : null, a3 = e2.x + e2.width / 2 - n.width / 2, s3 = e2.y + e2.height / 2 - n.height / 2, f;
  switch (o) {
    case E:
      f = { x: a3, y: e2.y - n.height };
      break;
    case R:
      f = { x: a3, y: e2.y + e2.height };
      break;
    case W:
      f = { x: e2.x + e2.width, y: s3 };
      break;
    case P:
      f = { x: e2.x - n.width, y: s3 };
      break;
    default:
      f = { x: e2.x, y: e2.y };
  }
  var c2 = o ? Le(o) : null;
  if (c2 != null) {
    var u2 = c2 === "y" ? "height" : "width";
    switch (i2) {
      case U:
        f[c2] = f[c2] - (e2[u2] / 2 - n[u2] / 2);
        break;
      case J:
        f[c2] = f[c2] + (e2[u2] / 2 - n[u2] / 2);
        break;
    }
  }
  return f;
}
function ne(t2, e2) {
  e2 === void 0 && (e2 = {});
  var n = e2, r = n.placement, o = r === void 0 ? t2.placement : r, i2 = n.boundary, a3 = i2 === void 0 ? Xe$1 : i2, s3 = n.rootBoundary, f = s3 === void 0 ? je : s3, c2 = n.elementContext, u2 = c2 === void 0 ? K : c2, m3 = n.altBoundary, v = m3 === void 0 ? false : m3, l = n.padding, h4 = l === void 0 ? 0 : l, p = ft(typeof h4 != "number" ? h4 : ct(h4, G)), g = u2 === K ? Ye : K, x2 = t2.rects.popper, y3 = t2.elements[v ? g : u2], $ = Gt(Q(y3) ? y3 : y3.contextElement || I(t2.elements.popper), a3, f), d3 = ee(t2.elements.reference), b2 = mt$1({ reference: d3, element: x2, strategy: "absolute", placement: o }), w2 = Te$1(Object.assign({}, x2, b2)), O2 = u2 === K ? w2 : d3, j = { top: $.top - O2.top + p.top, bottom: O2.bottom - $.bottom + p.bottom, left: $.left - O2.left + p.left, right: O2.right - $.right + p.right }, A = t2.modifiersData.offset;
  if (u2 === K && A) {
    var k2 = A[o];
    Object.keys(j).forEach(function(D2) {
      var S3 = [W, R].indexOf(D2) >= 0 ? 1 : -1, L2 = [E, R].indexOf(D2) >= 0 ? "y" : "x";
      j[D2] += k2[L2] * S3;
    });
  }
  return j;
}
function Jt$1(t2, e2) {
  e2 === void 0 && (e2 = {});
  var n = e2, r = n.placement, o = n.boundary, i2 = n.rootBoundary, a3 = n.padding, s3 = n.flipVariations, f = n.allowedAutoPlacements, c2 = f === void 0 ? Ee$1 : f, u2 = te(r), m3 = u2 ? s3 ? De : De.filter(function(h4) {
    return te(h4) === u2;
  }) : G, v = m3.filter(function(h4) {
    return c2.indexOf(h4) >= 0;
  });
  v.length === 0 && (v = m3);
  var l = v.reduce(function(h4, p) {
    return h4[p] = ne(t2, { placement: p, boundary: o, rootBoundary: i2, padding: a3 })[q(p)], h4;
  }, {});
  return Object.keys(l).sort(function(h4, p) {
    return l[h4] - l[p];
  });
}
function Kt(t2) {
  if (q(t2) === me)
    return [];
  var e2 = be(t2);
  return [lt$1(t2), e2, lt$1(e2)];
}
function Qt(t2) {
  var e2 = t2.state, n = t2.options, r = t2.name;
  if (!e2.modifiersData[r]._skip) {
    for (var o = n.mainAxis, i2 = o === void 0 ? true : o, a3 = n.altAxis, s3 = a3 === void 0 ? true : a3, f = n.fallbackPlacements, c2 = n.padding, u2 = n.boundary, m3 = n.rootBoundary, v = n.altBoundary, l = n.flipVariations, h4 = l === void 0 ? true : l, p = n.allowedAutoPlacements, g = e2.options.placement, x2 = q(g), y3 = x2 === g, $ = f || (y3 || !h4 ? [be(g)] : Kt(g)), d3 = [g].concat($).reduce(function(z2, V) {
      return z2.concat(q(V) === me ? Jt$1(e2, { placement: V, boundary: u2, rootBoundary: m3, padding: c2, flipVariations: h4, allowedAutoPlacements: p }) : V);
    }, []), b2 = e2.rects.reference, w2 = e2.rects.popper, O2 = /* @__PURE__ */ new Map(), j = true, A = d3[0], k2 = 0; k2 < d3.length; k2++) {
      var D2 = d3[k2], S3 = q(D2), L2 = te(D2) === U, re = [E, R].indexOf(S3) >= 0, oe = re ? "width" : "height", M3 = ne(e2, { placement: D2, boundary: u2, rootBoundary: m3, altBoundary: v, padding: c2 }), T2 = re ? L2 ? W : P : L2 ? R : E;
      b2[oe] > w2[oe] && (T2 = be(T2));
      var pe = be(T2), _2 = [];
      if (i2 && _2.push(M3[S3] <= 0), s3 && _2.push(M3[T2] <= 0, M3[pe] <= 0), _2.every(function(z2) {
        return z2;
      })) {
        A = D2, j = false;
        break;
      }
      O2.set(D2, _2);
    }
    if (j)
      for (var ue = h4 ? 3 : 1, xe2 = function(z2) {
        var V = d3.find(function(de) {
          var ae = O2.get(de);
          if (ae)
            return ae.slice(0, z2).every(function(Y2) {
              return Y2;
            });
        });
        if (V)
          return A = V, "break";
      }, ie = ue; ie > 0; ie--) {
        var le = xe2(ie);
        if (le === "break")
          break;
      }
    e2.placement !== A && (e2.modifiersData[r]._skip = true, e2.placement = A, e2.reset = true);
  }
}
var vt = { name: "flip", enabled: true, phase: "main", fn: Qt, requiresIfExists: ["offset"], data: { _skip: false } };
function gt$1(t2, e2, n) {
  return n === void 0 && (n = { x: 0, y: 0 }), { top: t2.top - e2.height - n.y, right: t2.right - e2.width + n.x, bottom: t2.bottom - e2.height + n.y, left: t2.left - e2.width - n.x };
}
function yt(t2) {
  return [E, W, R, P].some(function(e2) {
    return t2[e2] >= 0;
  });
}
function Zt$1(t2) {
  var e2 = t2.state, n = t2.name, r = e2.rects.reference, o = e2.rects.popper, i2 = e2.modifiersData.preventOverflow, a3 = ne(e2, { elementContext: "reference" }), s3 = ne(e2, { altBoundary: true }), f = gt$1(a3, r), c2 = gt$1(s3, o, i2), u2 = yt(f), m3 = yt(c2);
  e2.modifiersData[n] = { referenceClippingOffsets: f, popperEscapeOffsets: c2, isReferenceHidden: u2, hasPopperEscaped: m3 }, e2.attributes.popper = Object.assign({}, e2.attributes.popper, { "data-popper-reference-hidden": u2, "data-popper-escaped": m3 });
}
var bt$1 = { name: "hide", enabled: true, phase: "main", requiresIfExists: ["preventOverflow"], fn: Zt$1 };
function en$1(t2, e2, n) {
  var r = q(t2), o = [P, E].indexOf(r) >= 0 ? -1 : 1, i2 = typeof n == "function" ? n(Object.assign({}, e2, { placement: t2 })) : n, a3 = i2[0], s3 = i2[1];
  return a3 = a3 || 0, s3 = (s3 || 0) * o, [P, W].indexOf(r) >= 0 ? { x: s3, y: a3 } : { x: a3, y: s3 };
}
function tn$1(t2) {
  var e2 = t2.state, n = t2.options, r = t2.name, o = n.offset, i2 = o === void 0 ? [0, 0] : o, a3 = Ee$1.reduce(function(u2, m3) {
    return u2[m3] = en$1(m3, e2.rects, i2), u2;
  }, {}), s3 = a3[e2.placement], f = s3.x, c2 = s3.y;
  e2.modifiersData.popperOffsets != null && (e2.modifiersData.popperOffsets.x += f, e2.modifiersData.popperOffsets.y += c2), e2.modifiersData[r] = a3;
}
var wt = { name: "offset", enabled: true, phase: "main", requires: ["popperOffsets"], fn: tn$1 };
function nn$1(t2) {
  var e2 = t2.state, n = t2.name;
  e2.modifiersData[n] = mt$1({ reference: e2.rects.reference, element: e2.rects.popper, strategy: "absolute", placement: e2.placement });
}
var He = { name: "popperOffsets", enabled: true, phase: "read", fn: nn$1, data: {} };
function rn(t2) {
  return t2 === "x" ? "y" : "x";
}
function on(t2) {
  var e2 = t2.state, n = t2.options, r = t2.name, o = n.mainAxis, i2 = o === void 0 ? true : o, a3 = n.altAxis, s3 = a3 === void 0 ? false : a3, f = n.boundary, c2 = n.rootBoundary, u2 = n.altBoundary, m3 = n.padding, v = n.tether, l = v === void 0 ? true : v, h4 = n.tetherOffset, p = h4 === void 0 ? 0 : h4, g = ne(e2, { boundary: f, rootBoundary: c2, padding: m3, altBoundary: u2 }), x2 = q(e2.placement), y3 = te(e2.placement), $ = !y3, d3 = Le(x2), b2 = rn(d3), w2 = e2.modifiersData.popperOffsets, O2 = e2.rects.reference, j = e2.rects.popper, A = typeof p == "function" ? p(Object.assign({}, e2.rects, { placement: e2.placement })) : p, k2 = typeof A == "number" ? { mainAxis: A, altAxis: A } : Object.assign({ mainAxis: 0, altAxis: 0 }, A), D2 = e2.modifiersData.offset ? e2.modifiersData.offset[e2.placement] : null, S3 = { x: 0, y: 0 };
  if (w2) {
    if (i2) {
      var L2, re = d3 === "y" ? E : P, oe = d3 === "y" ? R : W, M3 = d3 === "y" ? "height" : "width", T2 = w2[d3], pe = T2 + g[re], _2 = T2 - g[oe], ue = l ? -j[M3] / 2 : 0, xe2 = y3 === U ? O2[M3] : j[M3], ie = y3 === U ? -j[M3] : -O2[M3], le = e2.elements.arrow, z2 = l && le ? ke$1(le) : { width: 0, height: 0 }, V = e2.modifiersData["arrow#persistent"] ? e2.modifiersData["arrow#persistent"].padding : st(), de = V[re], ae = V[oe], Y2 = fe(0, O2[M3], z2[M3]), jt = $ ? O2[M3] / 2 - ue - Y2 - de - k2.mainAxis : xe2 - Y2 - de - k2.mainAxis, Dt2 = $ ? -O2[M3] / 2 + ue + Y2 + ae + k2.mainAxis : ie + Y2 + ae + k2.mainAxis, Oe = e2.elements.arrow && se(e2.elements.arrow), Et2 = Oe ? d3 === "y" ? Oe.clientTop || 0 : Oe.clientLeft || 0 : 0, Ce2 = (L2 = D2 == null ? void 0 : D2[d3]) != null ? L2 : 0, Pt = T2 + jt - Ce2 - Et2, At = T2 + Dt2 - Ce2, qe2 = fe(l ? ve(pe, Pt) : pe, T2, l ? X(_2, At) : _2);
      w2[d3] = qe2, S3[d3] = qe2 - T2;
    }
    if (s3) {
      var Ve2, kt = d3 === "x" ? E : P, Lt = d3 === "x" ? R : W, F = w2[b2], he = b2 === "y" ? "height" : "width", Ne = F + g[kt], Ie2 = F - g[Lt], $e = [E, P].indexOf(x2) !== -1, _e = (Ve2 = D2 == null ? void 0 : D2[b2]) != null ? Ve2 : 0, ze = $e ? Ne : F - O2[he] - j[he] - _e + k2.altAxis, Fe = $e ? F + O2[he] + j[he] - _e - k2.altAxis : Ie2, Ue2 = l && $e ? St(ze, F, Fe) : fe(l ? ze : Ne, F, l ? Fe : Ie2);
      w2[b2] = Ue2, S3[b2] = Ue2 - F;
    }
    e2.modifiersData[r] = S3;
  }
}
var xt$1 = { name: "preventOverflow", enabled: true, phase: "main", fn: on, requiresIfExists: ["offset"] };
function an(t2) {
  return { scrollLeft: t2.scrollLeft, scrollTop: t2.scrollTop };
}
function sn(t2) {
  return t2 === H$1(t2) || !B(t2) ? We$1(t2) : an(t2);
}
function fn(t2) {
  var e2 = t2.getBoundingClientRect(), n = Z(e2.width) / t2.offsetWidth || 1, r = Z(e2.height) / t2.offsetHeight || 1;
  return n !== 1 || r !== 1;
}
function cn(t2, e2, n) {
  n === void 0 && (n = false);
  var r = B(e2), o = B(e2) && fn(e2), i2 = I(e2), a3 = ee(t2, o), s3 = { scrollLeft: 0, scrollTop: 0 }, f = { x: 0, y: 0 };
  return (r || !r && !n) && ((C(e2) !== "body" || Se$1(i2)) && (s3 = sn(e2)), B(e2) ? (f = ee(e2, true), f.x += e2.clientLeft, f.y += e2.clientTop) : i2 && (f.x = Be$1(i2))), { x: a3.left + s3.scrollLeft - f.x, y: a3.top + s3.scrollTop - f.y, width: a3.width, height: a3.height };
}
function pn$1(t2) {
  var e2 = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Set(), r = [];
  t2.forEach(function(i2) {
    e2.set(i2.name, i2);
  });
  function o(i2) {
    n.add(i2.name);
    var a3 = [].concat(i2.requires || [], i2.requiresIfExists || []);
    a3.forEach(function(s3) {
      if (!n.has(s3)) {
        var f = e2.get(s3);
        f && o(f);
      }
    }), r.push(i2);
  }
  return t2.forEach(function(i2) {
    n.has(i2.name) || o(i2);
  }), r;
}
function un(t2) {
  var e2 = pn$1(t2);
  return ot$1.reduce(function(n, r) {
    return n.concat(e2.filter(function(o) {
      return o.phase === r;
    }));
  }, []);
}
function ln(t2) {
  var e2;
  return function() {
    return e2 || (e2 = new Promise(function(n) {
      Promise.resolve().then(function() {
        e2 = void 0, n(t2());
      });
    })), e2;
  };
}
function dn(t2) {
  var e2 = t2.reduce(function(n, r) {
    var o = n[r.name];
    return n[r.name] = o ? Object.assign({}, o, r, { options: Object.assign({}, o.options, r.options), data: Object.assign({}, o.data, r.data) }) : r, n;
  }, {});
  return Object.keys(e2).map(function(n) {
    return e2[n];
  });
}
var Ot = { placement: "bottom", modifiers: [], strategy: "absolute" };
function $t() {
  for (var t2 = arguments.length, e2 = new Array(t2), n = 0; n < t2; n++)
    e2[n] = arguments[n];
  return !e2.some(function(r) {
    return !(r && typeof r.getBoundingClientRect == "function");
  });
}
function we(t2) {
  t2 === void 0 && (t2 = {});
  var e2 = t2, n = e2.defaultModifiers, r = n === void 0 ? [] : n, o = e2.defaultOptions, i2 = o === void 0 ? Ot : o;
  return function(a3, s3, f) {
    f === void 0 && (f = i2);
    var c2 = { placement: "bottom", orderedModifiers: [], options: Object.assign({}, Ot, i2), modifiersData: {}, elements: { reference: a3, popper: s3 }, attributes: {}, styles: {} }, u2 = [], m3 = false, v = { state: c2, setOptions: function(p) {
      var g = typeof p == "function" ? p(c2.options) : p;
      h4(), c2.options = Object.assign({}, i2, c2.options, g), c2.scrollParents = { reference: Q(a3) ? ce(a3) : a3.contextElement ? ce(a3.contextElement) : [], popper: ce(s3) };
      var x2 = un(dn([].concat(r, c2.options.modifiers)));
      return c2.orderedModifiers = x2.filter(function(y3) {
        return y3.enabled;
      }), l(), v.update();
    }, forceUpdate: function() {
      if (!m3) {
        var p = c2.elements, g = p.reference, x2 = p.popper;
        if ($t(g, x2)) {
          c2.rects = { reference: cn(g, se(x2), c2.options.strategy === "fixed"), popper: ke$1(x2) }, c2.reset = false, c2.placement = c2.options.placement, c2.orderedModifiers.forEach(function(j) {
            return c2.modifiersData[j.name] = Object.assign({}, j.data);
          });
          for (var y3 = 0; y3 < c2.orderedModifiers.length; y3++) {
            if (c2.reset === true) {
              c2.reset = false, y3 = -1;
              continue;
            }
            var $ = c2.orderedModifiers[y3], d3 = $.fn, b2 = $.options, w2 = b2 === void 0 ? {} : b2, O2 = $.name;
            typeof d3 == "function" && (c2 = d3({ state: c2, options: w2, name: O2, instance: v }) || c2);
          }
        }
      }
    }, update: ln(function() {
      return new Promise(function(p) {
        v.forceUpdate(), p(c2);
      });
    }), destroy: function() {
      h4(), m3 = true;
    } };
    if (!$t(a3, s3))
      return v;
    v.setOptions(f).then(function(p) {
      !m3 && f.onFirstUpdate && f.onFirstUpdate(p);
    });
    function l() {
      c2.orderedModifiers.forEach(function(p) {
        var g = p.name, x2 = p.options, y3 = x2 === void 0 ? {} : x2, $ = p.effect;
        if (typeof $ == "function") {
          var d3 = $({ state: c2, name: g, instance: v, options: y3 }), b2 = function() {
          };
          u2.push(d3 || b2);
        }
      });
    }
    function h4() {
      u2.forEach(function(p) {
        return p();
      }), u2 = [];
    }
    return v;
  };
}
we();
var mn$1 = [Re$1, He, Me, Ae$1];
we({ defaultModifiers: mn$1 });
var gn$1 = [Re$1, He, Me, Ae$1, wt, vt, xt$1, pt$1, bt$1];
var yn$1 = we({ defaultModifiers: gn$1 });
var obtainAllFocusableElements = (element) => {
  const nodes = [];
  const walker = document.createTreeWalker(element, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (node) => {
      const isHiddenInput = node.tagName === "INPUT" && node.type === "hidden";
      if (node.disabled || node.hidden || isHiddenInput)
        return NodeFilter.FILTER_SKIP;
      return node.tabIndex >= 0 || node === document.activeElement ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  while (walker.nextNode())
    nodes.push(walker.currentNode);
  return nodes;
};
var getVisibleElement = (elements, container) => {
  for (const element of elements) {
    if (!isHidden(element, container))
      return element;
  }
};
var isHidden = (element, container) => {
  if (getComputedStyle(element).visibility === "hidden")
    return true;
  while (element) {
    if (container && element === container)
      return false;
    if (getComputedStyle(element).display === "none")
      return true;
    element = element.parentElement;
  }
  return false;
};
var getEdges = (container) => {
  const focusable = obtainAllFocusableElements(container);
  const first = getVisibleElement(focusable, container);
  const last2 = getVisibleElement(focusable.reverse(), container);
  return [first, last2];
};
var isSelectable = (element) => {
  return element instanceof HTMLInputElement && "select" in element;
};
var tryFocus = (element, shouldSelect) => {
  if (element && element.focus) {
    const prevFocusedElement = document.activeElement;
    element.focus({ preventScroll: true });
    if (element !== prevFocusedElement && isSelectable(element) && shouldSelect) {
      element.select();
    }
  }
};
function removeFromStack(list, item) {
  const copy = [...list];
  const idx = list.indexOf(item);
  if (idx !== -1) {
    copy.splice(idx, 1);
  }
  return copy;
}
var createFocusableStack = () => {
  let stack = [];
  const push = (layer) => {
    const currentLayer = stack[0];
    if (currentLayer && layer !== currentLayer) {
      currentLayer.pause();
    }
    stack = removeFromStack(stack, layer);
    stack.unshift(layer);
  };
  const remove = (layer) => {
    var _a2, _b;
    stack = removeFromStack(stack, layer);
    (_b = (_a2 = stack[0]) == null ? void 0 : _a2.resume) == null ? void 0 : _b.call(_a2);
  };
  return {
    push,
    remove
  };
};
var focusFirstDescendant = (elements, shouldSelect = false) => {
  const prevFocusedElement = document.activeElement;
  for (const element of elements) {
    tryFocus(element, shouldSelect);
    if (document.activeElement !== prevFocusedElement)
      return;
  }
};
var focusableStack = createFocusableStack();
var FOCUS_AFTER_TRAPPED = "focus-trap.focus-after-trapped";
var FOCUS_AFTER_RELEASED = "focus-trap.focus-after-released";
var FOCUS_AFTER_TRAPPED_OPTS = {
  cancelable: true,
  bubbles: false
};
var ON_TRAP_FOCUS_EVT = "focusAfterTrapped";
var ON_RELEASE_FOCUS_EVT = "focusAfterReleased";
var FOCUS_TRAP_INJECTION_KEY = Symbol("elFocusTrap");
var _sfc_main$1e = defineComponent({
  name: "ElFocusTrap",
  inheritAttrs: false,
  props: {
    loop: Boolean,
    trapped: Boolean,
    focusTrapEl: Object,
    focusStartEl: {
      type: [Object, String],
      default: "first"
    }
  },
  emits: [
    ON_TRAP_FOCUS_EVT,
    ON_RELEASE_FOCUS_EVT,
    "focusin",
    "focusout",
    "focusout-prevented",
    "release-requested"
  ],
  setup(props2, { emit }) {
    const forwardRef = ref();
    let lastFocusBeforeTrapped;
    let lastFocusAfterTrapped;
    useEscapeKeydown((event) => {
      if (props2.trapped && !focusLayer.paused) {
        emit("release-requested", event);
      }
    });
    const focusLayer = {
      paused: false,
      pause() {
        this.paused = true;
      },
      resume() {
        this.paused = false;
      }
    };
    const onKeydown = (e2) => {
      if (!props2.loop && !props2.trapped)
        return;
      if (focusLayer.paused)
        return;
      const { key, altKey, ctrlKey, metaKey, currentTarget, shiftKey } = e2;
      const { loop } = props2;
      const isTabbing = key === EVENT_CODE.tab && !altKey && !ctrlKey && !metaKey;
      const currentFocusingEl = document.activeElement;
      if (isTabbing && currentFocusingEl) {
        const container = currentTarget;
        const [first, last2] = getEdges(container);
        const isTabbable = first && last2;
        if (!isTabbable) {
          if (currentFocusingEl === container) {
            e2.preventDefault();
            emit("focusout-prevented");
          }
        } else {
          if (!shiftKey && currentFocusingEl === last2) {
            e2.preventDefault();
            if (loop)
              tryFocus(first, true);
            emit("focusout-prevented");
          } else if (shiftKey && [first, container].includes(currentFocusingEl)) {
            e2.preventDefault();
            if (loop)
              tryFocus(last2, true);
            emit("focusout-prevented");
          }
        }
      }
    };
    provide(FOCUS_TRAP_INJECTION_KEY, {
      focusTrapRef: forwardRef,
      onKeydown
    });
    watch(() => props2.focusTrapEl, (focusTrapEl) => {
      if (focusTrapEl) {
        forwardRef.value = focusTrapEl;
      }
    }, { immediate: true });
    watch([forwardRef], ([forwardRef2], [oldForwardRef]) => {
      if (forwardRef2) {
        forwardRef2.addEventListener("keydown", onKeydown);
        forwardRef2.addEventListener("focusin", onFocusIn);
        forwardRef2.addEventListener("focusout", onFocusOut);
      }
      if (oldForwardRef) {
        oldForwardRef.removeEventListener("keydown", onKeydown);
        oldForwardRef.removeEventListener("focusin", onFocusIn);
        oldForwardRef.removeEventListener("focusout", onFocusOut);
      }
    });
    const trapOnFocus = (e2) => {
      emit(ON_TRAP_FOCUS_EVT, e2);
    };
    const releaseOnFocus = (e2) => emit(ON_RELEASE_FOCUS_EVT, e2);
    const onFocusIn = (e2) => {
      const trapContainer = unref(forwardRef);
      if (!trapContainer)
        return;
      const target = e2.target;
      const isFocusedInTrap = target && trapContainer.contains(target);
      if (isFocusedInTrap)
        emit("focusin", e2);
      if (focusLayer.paused)
        return;
      if (props2.trapped) {
        if (isFocusedInTrap) {
          lastFocusAfterTrapped = target;
        } else {
          tryFocus(lastFocusAfterTrapped, true);
        }
      }
    };
    const onFocusOut = (e2) => {
      const trapContainer = unref(forwardRef);
      if (focusLayer.paused || !trapContainer)
        return;
      if (props2.trapped) {
        const relatedTarget = e2.relatedTarget;
        if (!isNil(relatedTarget) && !trapContainer.contains(relatedTarget)) {
          setTimeout(() => {
            if (!focusLayer.paused && props2.trapped) {
              tryFocus(lastFocusAfterTrapped, true);
            }
          }, 0);
        }
      } else {
        const target = e2.target;
        const isFocusedInTrap = target && trapContainer.contains(target);
        if (!isFocusedInTrap)
          emit("focusout", e2);
      }
    };
    async function startTrap() {
      await nextTick();
      const trapContainer = unref(forwardRef);
      if (trapContainer) {
        focusableStack.push(focusLayer);
        const prevFocusedElement = document.activeElement;
        lastFocusBeforeTrapped = prevFocusedElement;
        const isPrevFocusContained = trapContainer.contains(prevFocusedElement);
        if (!isPrevFocusContained) {
          const focusEvent = new Event(FOCUS_AFTER_TRAPPED, FOCUS_AFTER_TRAPPED_OPTS);
          trapContainer.addEventListener(FOCUS_AFTER_TRAPPED, trapOnFocus);
          trapContainer.dispatchEvent(focusEvent);
          if (!focusEvent.defaultPrevented) {
            nextTick(() => {
              let focusStartEl = props2.focusStartEl;
              if (!isString(focusStartEl)) {
                tryFocus(focusStartEl);
                if (document.activeElement !== focusStartEl) {
                  focusStartEl = "first";
                }
              }
              if (focusStartEl === "first") {
                focusFirstDescendant(obtainAllFocusableElements(trapContainer), true);
              }
              if (document.activeElement === prevFocusedElement || focusStartEl === "container") {
                tryFocus(trapContainer);
              }
            });
          }
        }
      }
    }
    function stopTrap() {
      const trapContainer = unref(forwardRef);
      if (trapContainer) {
        trapContainer.removeEventListener(FOCUS_AFTER_TRAPPED, trapOnFocus);
        const releasedEvent = new Event(FOCUS_AFTER_RELEASED, FOCUS_AFTER_TRAPPED_OPTS);
        trapContainer.addEventListener(FOCUS_AFTER_RELEASED, releaseOnFocus);
        trapContainer.dispatchEvent(releasedEvent);
        if (!releasedEvent.defaultPrevented) {
          tryFocus(lastFocusBeforeTrapped != null ? lastFocusBeforeTrapped : document.body, true);
        }
        trapContainer.removeEventListener(FOCUS_AFTER_RELEASED, trapOnFocus);
        focusableStack.remove(focusLayer);
      }
    }
    onMounted(() => {
      if (props2.trapped) {
        startTrap();
      }
      watch(() => props2.trapped, (trapped) => {
        if (trapped) {
          startTrap();
        } else {
          stopTrap();
        }
      });
    });
    onBeforeUnmount(() => {
      if (props2.trapped) {
        stopTrap();
      }
    });
    return {
      onKeydown
    };
  }
});
function _sfc_render$d(_ctx, _cache, $props, $setup, $data, $options) {
  return renderSlot(_ctx.$slots, "default", { handleKeydown: _ctx.onKeydown });
}
var ElFocusTrap = _export_sfc(_sfc_main$1e, [["render", _sfc_render$d], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);
var POSITIONING_STRATEGIES = ["fixed", "absolute"];
var usePopperCoreConfigProps = buildProps({
  boundariesPadding: {
    type: Number,
    default: 0
  },
  fallbackPlacements: {
    type: definePropType(Array),
    default: () => []
  },
  gpuAcceleration: {
    type: Boolean,
    default: true
  },
  offset: {
    type: Number,
    default: 12
  },
  placement: {
    type: String,
    values: Ee$1,
    default: "bottom"
  },
  popperOptions: {
    type: definePropType(Object),
    default: () => ({})
  },
  strategy: {
    type: String,
    values: POSITIONING_STRATEGIES,
    default: "absolute"
  }
});
var usePopperContentProps = buildProps({
  ...usePopperCoreConfigProps,
  id: String,
  style: { type: definePropType([String, Array, Object]) },
  className: { type: definePropType([String, Array, Object]) },
  effect: {
    type: String,
    default: "dark"
  },
  visible: Boolean,
  enterable: {
    type: Boolean,
    default: true
  },
  pure: Boolean,
  focusOnShow: {
    type: Boolean,
    default: false
  },
  trapping: {
    type: Boolean,
    default: false
  },
  popperClass: {
    type: definePropType([String, Array, Object])
  },
  popperStyle: {
    type: definePropType([String, Array, Object])
  },
  referenceEl: {
    type: definePropType(Object)
  },
  triggerTargetEl: {
    type: definePropType(Object)
  },
  stopPopperMouseEvent: {
    type: Boolean,
    default: true
  },
  ariaLabel: {
    type: String,
    default: void 0
  },
  virtualTriggering: Boolean,
  zIndex: Number
});
var usePopperContentEmits = [
  "mouseenter",
  "mouseleave",
  "focus",
  "blur",
  "close"
];
var buildPopperOptions = (props2, arrowProps) => {
  const { placement, strategy, popperOptions } = props2;
  const options = {
    placement,
    strategy,
    ...popperOptions,
    modifiers: genModifiers(props2)
  };
  attachArrow(options, arrowProps);
  deriveExtraModifiers(options, popperOptions == null ? void 0 : popperOptions.modifiers);
  return options;
};
var unwrapMeasurableEl = ($el) => {
  if (!isClient)
    return;
  return unrefElement($el);
};
function genModifiers(options) {
  const { offset, gpuAcceleration, fallbackPlacements } = options;
  return [
    {
      name: "offset",
      options: {
        offset: [0, offset != null ? offset : 12]
      }
    },
    {
      name: "preventOverflow",
      options: {
        padding: {
          top: 2,
          bottom: 2,
          left: 5,
          right: 5
        }
      }
    },
    {
      name: "flip",
      options: {
        padding: 5,
        fallbackPlacements: fallbackPlacements != null ? fallbackPlacements : []
      }
    },
    {
      name: "computeStyles",
      options: {
        gpuAcceleration,
        adaptive: gpuAcceleration
      }
    }
  ];
}
function attachArrow(options, { arrowEl, arrowOffset }) {
  options.modifiers.push({
    name: "arrow",
    options: {
      element: arrowEl,
      padding: arrowOffset != null ? arrowOffset : 5
    }
  });
}
function deriveExtraModifiers(options, modifiers) {
  if (modifiers) {
    options.modifiers = [...options.modifiers, ...modifiers != null ? modifiers : []];
  }
}
var __default__$e = {
  name: "ElPopperContent"
};
var _sfc_main$1d = defineComponent({
  ...__default__$e,
  props: usePopperContentProps,
  emits: usePopperContentEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const { popperInstanceRef, contentRef, triggerRef: triggerRef2, role } = inject(POPPER_INJECTION_KEY, void 0);
    const formItemContext = inject(formItemContextKey, void 0);
    const { nextZIndex } = useZIndex();
    const ns2 = useNamespace("popper");
    const popperContentRef = ref();
    const focusStartRef = ref("first");
    const arrowRef = ref();
    const arrowOffset = ref();
    provide(POPPER_CONTENT_INJECTION_KEY, {
      arrowRef,
      arrowOffset
    });
    if (formItemContext && (formItemContext.addInputId || formItemContext.removeInputId)) {
      provide(formItemContextKey, {
        ...formItemContext,
        addInputId: NOOP,
        removeInputId: NOOP
      });
    }
    const contentZIndex = ref(props2.zIndex || nextZIndex());
    const trapped = ref(false);
    let triggerTargetAriaStopWatch = void 0;
    const computedReference = computed(() => unwrapMeasurableEl(props2.referenceEl) || unref(triggerRef2));
    const contentStyle = computed(() => [{ zIndex: unref(contentZIndex) }, props2.popperStyle]);
    const contentClass = computed(() => [
      ns2.b(),
      ns2.is("pure", props2.pure),
      ns2.is(props2.effect),
      props2.popperClass
    ]);
    const ariaModal = computed(() => {
      return role && role.value === "dialog" ? "false" : void 0;
    });
    const createPopperInstance = ({ referenceEl, popperContentEl, arrowEl }) => {
      const options = buildPopperOptions(props2, {
        arrowEl,
        arrowOffset: unref(arrowOffset)
      });
      return yn$1(referenceEl, popperContentEl, options);
    };
    const updatePopper = (shouldUpdateZIndex = true) => {
      var _a2;
      (_a2 = unref(popperInstanceRef)) == null ? void 0 : _a2.update();
      shouldUpdateZIndex && (contentZIndex.value = props2.zIndex || nextZIndex());
    };
    const togglePopperAlive = () => {
      var _a2, _b;
      const monitorable = { name: "eventListeners", enabled: props2.visible };
      (_b = (_a2 = unref(popperInstanceRef)) == null ? void 0 : _a2.setOptions) == null ? void 0 : _b.call(_a2, (options) => ({
        ...options,
        modifiers: [...options.modifiers || [], monitorable]
      }));
      updatePopper(false);
      if (props2.visible && props2.focusOnShow) {
        trapped.value = true;
      } else if (props2.visible === false) {
        trapped.value = false;
      }
    };
    const onFocusAfterTrapped = () => {
      emit("focus");
    };
    const onFocusAfterReleased = () => {
      focusStartRef.value = "first";
      emit("blur");
    };
    const onFocusInTrap = (event) => {
      var _a2;
      if (props2.visible && !trapped.value) {
        if (event.target) {
          focusStartRef.value = event.target;
        }
        trapped.value = true;
        if (event.relatedTarget) {
          (_a2 = event.relatedTarget) == null ? void 0 : _a2.focus();
        }
      }
    };
    const onFocusoutPrevented = () => {
      if (!props2.trapping) {
        trapped.value = false;
      }
    };
    const onReleaseRequested = () => {
      trapped.value = false;
      emit("close");
    };
    onMounted(() => {
      let updateHandle;
      watch(computedReference, (referenceEl) => {
        var _a2;
        updateHandle == null ? void 0 : updateHandle();
        const popperInstance = unref(popperInstanceRef);
        (_a2 = popperInstance == null ? void 0 : popperInstance.destroy) == null ? void 0 : _a2.call(popperInstance);
        if (referenceEl) {
          const popperContentEl = unref(popperContentRef);
          contentRef.value = popperContentEl;
          popperInstanceRef.value = createPopperInstance({
            referenceEl,
            popperContentEl,
            arrowEl: unref(arrowRef)
          });
          updateHandle = watch(() => referenceEl.getBoundingClientRect(), () => updatePopper(), {
            immediate: true
          });
        } else {
          popperInstanceRef.value = void 0;
        }
      }, {
        immediate: true
      });
      watch(() => props2.triggerTargetEl, (triggerTargetEl, prevTriggerTargetEl) => {
        triggerTargetAriaStopWatch == null ? void 0 : triggerTargetAriaStopWatch();
        triggerTargetAriaStopWatch = void 0;
        const el2 = unref(triggerTargetEl || popperContentRef.value);
        const prevEl = unref(prevTriggerTargetEl || popperContentRef.value);
        if (isElement$1(el2)) {
          const { ariaLabel, id } = toRefs(props2);
          triggerTargetAriaStopWatch = watch([role, ariaLabel, ariaModal, id], (watches) => {
            ["role", "aria-label", "aria-modal", "id"].forEach((key, idx) => {
              isNil(watches[idx]) ? el2.removeAttribute(key) : el2.setAttribute(key, watches[idx]);
            });
          }, { immediate: true });
        }
        if (isElement$1(prevEl)) {
          ["role", "aria-label", "aria-modal", "id"].forEach((key) => {
            prevEl.removeAttribute(key);
          });
        }
      }, { immediate: true });
      watch(() => props2.visible, togglePopperAlive, { immediate: true });
      watch(() => buildPopperOptions(props2, {
        arrowEl: unref(arrowRef),
        arrowOffset: unref(arrowOffset)
      }), (option2) => {
        var _a2;
        return (_a2 = popperInstanceRef.value) == null ? void 0 : _a2.setOptions(option2);
      });
    });
    onBeforeUnmount(() => {
      triggerTargetAriaStopWatch == null ? void 0 : triggerTargetAriaStopWatch();
      triggerTargetAriaStopWatch = void 0;
    });
    expose({
      popperContentRef,
      popperInstanceRef,
      updatePopper,
      contentStyle
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "popperContentRef",
        ref: popperContentRef,
        style: normalizeStyle(unref(contentStyle)),
        class: normalizeClass(unref(contentClass)),
        tabindex: "-1",
        onMouseenter: _cache[0] || (_cache[0] = (e2) => _ctx.$emit("mouseenter", e2)),
        onMouseleave: _cache[1] || (_cache[1] = (e2) => _ctx.$emit("mouseleave", e2))
      }, [
        createVNode(unref(ElFocusTrap), {
          trapped: trapped.value,
          "trap-on-focus-in": true,
          "focus-trap-el": popperContentRef.value,
          "focus-start-el": focusStartRef.value,
          onFocusAfterTrapped,
          onFocusAfterReleased,
          onFocusin: onFocusInTrap,
          onFocusoutPrevented,
          onReleaseRequested
        }, {
          default: withCtx(() => [
            renderSlot(_ctx.$slots, "default")
          ]),
          _: 3
        }, 8, ["trapped", "focus-trap-el", "focus-start-el"])
      ], 38);
    };
  }
});
var ElPopperContent = _export_sfc(_sfc_main$1d, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);
var ElPopper = withInstall(Popper);
var ns = useNamespace("tooltip");
var useTooltipContentProps = buildProps({
  ...useDelayedToggleProps,
  ...usePopperContentProps,
  appendTo: {
    type: definePropType([String, Object]),
    default: POPPER_CONTAINER_SELECTOR
  },
  content: {
    type: String,
    default: ""
  },
  rawContent: {
    type: Boolean,
    default: false
  },
  persistent: Boolean,
  ariaLabel: String,
  visible: {
    type: definePropType(Boolean),
    default: null
  },
  transition: {
    type: String,
    default: `${ns.namespace.value}-fade-in-linear`
  },
  teleported: {
    type: Boolean,
    default: true
  },
  disabled: {
    type: Boolean
  }
});
var useTooltipTriggerProps = buildProps({
  ...usePopperTriggerProps,
  disabled: Boolean,
  trigger: {
    type: definePropType([String, Array]),
    default: "hover"
  },
  triggerKeys: {
    type: definePropType(Array),
    default: () => [EVENT_CODE.enter, EVENT_CODE.space]
  }
});
var useTooltipProps = buildProps({
  openDelay: {
    type: Number
  },
  visibleArrow: {
    type: Boolean,
    default: void 0
  },
  hideAfter: {
    type: Number,
    default: 200
  },
  showArrow: {
    type: Boolean,
    default: true
  }
});
var TOOLTIP_INJECTION_KEY = Symbol("elTooltip");
var _sfc_main$1c = defineComponent({
  name: "ElTooltipContent",
  components: {
    ElPopperContent
  },
  inheritAttrs: false,
  props: useTooltipContentProps,
  setup(props2) {
    const contentRef = ref(null);
    const intermediateOpen = ref(false);
    const entering = ref(false);
    const leaving = ref(false);
    const destroyed = ref(false);
    const {
      controlled,
      id,
      open,
      trigger,
      onClose,
      onOpen,
      onShow,
      onHide,
      onBeforeShow,
      onBeforeHide
    } = inject(TOOLTIP_INJECTION_KEY, void 0);
    const persistentRef = computed(() => {
      return props2.persistent;
    });
    onBeforeUnmount(() => {
      destroyed.value = true;
    });
    const shouldRender = computed(() => {
      return unref(persistentRef) ? true : unref(open);
    });
    const shouldShow = computed(() => {
      return props2.disabled ? false : unref(open);
    });
    const contentStyle = computed(() => {
      var _a2;
      return (_a2 = props2.style) != null ? _a2 : {};
    });
    const ariaHidden = computed(() => !unref(open));
    const onTransitionLeave = () => {
      onHide();
    };
    const stopWhenControlled = () => {
      if (unref(controlled))
        return true;
    };
    const onContentEnter = composeEventHandlers(stopWhenControlled, () => {
      if (props2.enterable && unref(trigger) === "hover") {
        onOpen();
      }
    });
    const onContentLeave = composeEventHandlers(stopWhenControlled, () => {
      if (unref(trigger) === "hover") {
        onClose();
      }
    });
    const onBeforeEnter = () => {
      var _a2, _b;
      (_b = (_a2 = contentRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
      onBeforeShow == null ? void 0 : onBeforeShow();
    };
    const onBeforeLeave = () => {
      onBeforeHide == null ? void 0 : onBeforeHide();
    };
    const onAfterShow = () => {
      onShow();
      stopHandle = onClickOutside(computed(() => {
        var _a2;
        return (_a2 = contentRef.value) == null ? void 0 : _a2.popperContentRef;
      }), () => {
        if (unref(controlled))
          return;
        const $trigger = unref(trigger);
        if ($trigger !== "hover") {
          onClose();
        }
      });
    };
    const onBlur = () => {
      if (!props2.virtualTriggering) {
        onClose();
      }
    };
    let stopHandle;
    watch(() => unref(open), (val) => {
      if (!val) {
        stopHandle == null ? void 0 : stopHandle();
      }
    }, {
      flush: "post"
    });
    return {
      ariaHidden,
      entering,
      leaving,
      id,
      intermediateOpen,
      contentStyle,
      contentRef,
      destroyed,
      shouldRender,
      shouldShow,
      onClose,
      open,
      onAfterShow,
      onBeforeEnter,
      onBeforeLeave,
      onContentEnter,
      onContentLeave,
      onTransitionLeave,
      onBlur
    };
  }
});
function _sfc_render$c(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_el_popper_content = resolveComponent("el-popper-content");
  return openBlock(), createBlock(Teleport, {
    disabled: !_ctx.teleported,
    to: _ctx.appendTo
  }, [
    createVNode(Transition, {
      name: _ctx.transition,
      onAfterLeave: _ctx.onTransitionLeave,
      onBeforeEnter: _ctx.onBeforeEnter,
      onAfterEnter: _ctx.onAfterShow,
      onBeforeLeave: _ctx.onBeforeLeave
    }, {
      default: withCtx(() => [
        _ctx.shouldRender ? withDirectives((openBlock(), createBlock(_component_el_popper_content, mergeProps({
          key: 0,
          id: _ctx.id,
          ref: "contentRef"
        }, _ctx.$attrs, {
          "aria-label": _ctx.ariaLabel,
          "aria-hidden": _ctx.ariaHidden,
          "boundaries-padding": _ctx.boundariesPadding,
          "fallback-placements": _ctx.fallbackPlacements,
          "gpu-acceleration": _ctx.gpuAcceleration,
          offset: _ctx.offset,
          placement: _ctx.placement,
          "popper-options": _ctx.popperOptions,
          strategy: _ctx.strategy,
          effect: _ctx.effect,
          enterable: _ctx.enterable,
          pure: _ctx.pure,
          "popper-class": _ctx.popperClass,
          "popper-style": [_ctx.popperStyle, _ctx.contentStyle],
          "reference-el": _ctx.referenceEl,
          "trigger-target-el": _ctx.triggerTargetEl,
          visible: _ctx.shouldShow,
          "z-index": _ctx.zIndex,
          onMouseenter: _ctx.onContentEnter,
          onMouseleave: _ctx.onContentLeave,
          onBlur: _ctx.onBlur,
          onClose: _ctx.onClose
        }), {
          default: withCtx(() => [
            createCommentVNode(" Workaround bug #6378 "),
            !_ctx.destroyed ? renderSlot(_ctx.$slots, "default", { key: 0 }) : createCommentVNode("v-if", true)
          ]),
          _: 3
        }, 16, ["id", "aria-label", "aria-hidden", "boundaries-padding", "fallback-placements", "gpu-acceleration", "offset", "placement", "popper-options", "strategy", "effect", "enterable", "pure", "popper-class", "popper-style", "reference-el", "trigger-target-el", "visible", "z-index", "onMouseenter", "onMouseleave", "onBlur", "onClose"])), [
          [vShow, _ctx.shouldShow]
        ]) : createCommentVNode("v-if", true)
      ]),
      _: 3
    }, 8, ["name", "onAfterLeave", "onBeforeEnter", "onAfterEnter", "onBeforeLeave"])
  ], 8, ["disabled", "to"]);
}
var ElTooltipContent = _export_sfc(_sfc_main$1c, [["render", _sfc_render$c], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);
var isTriggerType = (trigger, type) => {
  if (isArray(trigger)) {
    return trigger.includes(type);
  }
  return trigger === type;
};
var whenTrigger = (trigger, type, handler) => {
  return (e2) => {
    isTriggerType(unref(trigger), type) && handler(e2);
  };
};
var _sfc_main$1b = defineComponent({
  name: "ElTooltipTrigger",
  components: {
    ElPopperTrigger
  },
  props: useTooltipTriggerProps,
  setup(props2) {
    const ns2 = useNamespace("tooltip");
    const { controlled, id, open, onOpen, onClose, onToggle } = inject(TOOLTIP_INJECTION_KEY, void 0);
    const triggerRef2 = ref(null);
    const stopWhenControlledOrDisabled = () => {
      if (unref(controlled) || props2.disabled) {
        return true;
      }
    };
    const trigger = toRef(props2, "trigger");
    const onMouseenter = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "hover", onOpen));
    const onMouseleave = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "hover", onClose));
    const onClick = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "click", (e2) => {
      if (e2.button === 0) {
        onToggle(e2);
      }
    }));
    const onFocus = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "focus", onOpen));
    const onBlur = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "focus", onClose));
    const onContextMenu = composeEventHandlers(stopWhenControlledOrDisabled, whenTrigger(trigger, "contextmenu", (e2) => {
      e2.preventDefault();
      onToggle(e2);
    }));
    const onKeydown = composeEventHandlers(stopWhenControlledOrDisabled, (e2) => {
      const { code } = e2;
      if (props2.triggerKeys.includes(code)) {
        e2.preventDefault();
        onToggle(e2);
      }
    });
    return {
      onBlur,
      onContextMenu,
      onFocus,
      onMouseenter,
      onMouseleave,
      onClick,
      onKeydown,
      open,
      id,
      triggerRef: triggerRef2,
      ns: ns2
    };
  }
});
function _sfc_render$b(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_el_popper_trigger = resolveComponent("el-popper-trigger");
  return openBlock(), createBlock(_component_el_popper_trigger, {
    id: _ctx.id,
    "virtual-ref": _ctx.virtualRef,
    open: _ctx.open,
    "virtual-triggering": _ctx.virtualTriggering,
    class: normalizeClass(_ctx.ns.e("trigger")),
    onBlur: _ctx.onBlur,
    onClick: _ctx.onClick,
    onContextmenu: _ctx.onContextMenu,
    onFocus: _ctx.onFocus,
    onMouseenter: _ctx.onMouseenter,
    onMouseleave: _ctx.onMouseleave,
    onKeydown: _ctx.onKeydown
  }, {
    default: withCtx(() => [
      renderSlot(_ctx.$slots, "default")
    ]),
    _: 3
  }, 8, ["id", "virtual-ref", "open", "virtual-triggering", "class", "onBlur", "onClick", "onContextmenu", "onFocus", "onMouseenter", "onMouseleave", "onKeydown"]);
}
var ElTooltipTrigger = _export_sfc(_sfc_main$1b, [["render", _sfc_render$b], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);
var { useModelToggleProps, useModelToggle, useModelToggleEmits } = createModelToggleComposable("visible");
var _sfc_main$1a = defineComponent({
  name: "ElTooltip",
  components: {
    ElPopper,
    ElPopperArrow,
    ElTooltipContent,
    ElTooltipTrigger
  },
  props: {
    ...usePopperProps,
    ...useModelToggleProps,
    ...useTooltipContentProps,
    ...useTooltipTriggerProps,
    ...usePopperArrowProps,
    ...useTooltipProps
  },
  emits: [
    ...useModelToggleEmits,
    "before-show",
    "before-hide",
    "show",
    "hide",
    "open",
    "close"
  ],
  setup(props2, { emit }) {
    usePopperContainer();
    const compatShowAfter = computed(() => {
      if (!isUndefined(props2.openDelay))
        ;
      return props2.openDelay || props2.showAfter;
    });
    const compatShowArrow = computed(() => {
      if (!isUndefined(props2.visibleArrow))
        ;
      return isBoolean(props2.visibleArrow) ? props2.visibleArrow : props2.showArrow;
    });
    const id = useId();
    const popperRef = ref(null);
    const contentRef = ref(null);
    const updatePopper = () => {
      var _a2;
      const popperComponent = unref(popperRef);
      if (popperComponent) {
        (_a2 = popperComponent.popperInstanceRef) == null ? void 0 : _a2.update();
      }
    };
    const open = ref(false);
    const toggleReason = ref(void 0);
    const { show, hide, hasUpdateHandler } = useModelToggle({
      indicator: open,
      toggleReason
    });
    const { onOpen, onClose } = useDelayedToggle({
      showAfter: compatShowAfter,
      hideAfter: toRef(props2, "hideAfter"),
      open: show,
      close: hide
    });
    const controlled = computed(() => isBoolean(props2.visible) && !hasUpdateHandler.value);
    provide(TOOLTIP_INJECTION_KEY, {
      controlled,
      id,
      open: readonly(open),
      trigger: toRef(props2, "trigger"),
      onOpen: (event) => {
        onOpen(event);
      },
      onClose: (event) => {
        onClose(event);
      },
      onToggle: (event) => {
        if (unref(open)) {
          onClose(event);
        } else {
          onOpen(event);
        }
      },
      onShow: () => {
        emit("show", toggleReason.value);
      },
      onHide: () => {
        emit("hide", toggleReason.value);
      },
      onBeforeShow: () => {
        emit("before-show", toggleReason.value);
      },
      onBeforeHide: () => {
        emit("before-hide", toggleReason.value);
      },
      updatePopper
    });
    watch(() => props2.disabled, (disabled) => {
      if (disabled && open.value) {
        open.value = false;
      }
    });
    const isFocusInsideContent = () => {
      var _a2, _b;
      const popperContent = (_b = (_a2 = contentRef.value) == null ? void 0 : _a2.contentRef) == null ? void 0 : _b.popperContentRef;
      return popperContent && popperContent.contains(document.activeElement);
    };
    onDeactivated(() => open.value && hide());
    return {
      compatShowAfter,
      compatShowArrow,
      popperRef,
      contentRef,
      open,
      hide,
      isFocusInsideContent,
      updatePopper,
      onOpen,
      onClose
    };
  }
});
var _hoisted_1$R = ["innerHTML"];
var _hoisted_2$D = { key: 1 };
function _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_el_tooltip_trigger = resolveComponent("el-tooltip-trigger");
  const _component_el_popper_arrow = resolveComponent("el-popper-arrow");
  const _component_el_tooltip_content = resolveComponent("el-tooltip-content");
  const _component_el_popper = resolveComponent("el-popper");
  return openBlock(), createBlock(_component_el_popper, {
    ref: "popperRef",
    role: _ctx.role
  }, {
    default: withCtx(() => [
      createVNode(_component_el_tooltip_trigger, {
        disabled: _ctx.disabled,
        trigger: _ctx.trigger,
        "trigger-keys": _ctx.triggerKeys,
        "virtual-ref": _ctx.virtualRef,
        "virtual-triggering": _ctx.virtualTriggering
      }, {
        default: withCtx(() => [
          _ctx.$slots.default ? renderSlot(_ctx.$slots, "default", { key: 0 }) : createCommentVNode("v-if", true)
        ]),
        _: 3
      }, 8, ["disabled", "trigger", "trigger-keys", "virtual-ref", "virtual-triggering"]),
      createVNode(_component_el_tooltip_content, {
        ref: "contentRef",
        "aria-label": _ctx.ariaLabel,
        "boundaries-padding": _ctx.boundariesPadding,
        content: _ctx.content,
        disabled: _ctx.disabled,
        effect: _ctx.effect,
        enterable: _ctx.enterable,
        "fallback-placements": _ctx.fallbackPlacements,
        "hide-after": _ctx.hideAfter,
        "gpu-acceleration": _ctx.gpuAcceleration,
        offset: _ctx.offset,
        persistent: _ctx.persistent,
        "popper-class": _ctx.popperClass,
        "popper-style": _ctx.popperStyle,
        placement: _ctx.placement,
        "popper-options": _ctx.popperOptions,
        pure: _ctx.pure,
        "raw-content": _ctx.rawContent,
        "reference-el": _ctx.referenceEl,
        "trigger-target-el": _ctx.triggerTargetEl,
        "show-after": _ctx.compatShowAfter,
        strategy: _ctx.strategy,
        teleported: _ctx.teleported,
        transition: _ctx.transition,
        "virtual-triggering": _ctx.virtualTriggering,
        "z-index": _ctx.zIndex,
        "append-to": _ctx.appendTo
      }, {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "content", {}, () => [
            _ctx.rawContent ? (openBlock(), createElementBlock("span", {
              key: 0,
              innerHTML: _ctx.content
            }, null, 8, _hoisted_1$R)) : (openBlock(), createElementBlock("span", _hoisted_2$D, toDisplayString(_ctx.content), 1))
          ]),
          _ctx.compatShowArrow ? (openBlock(), createBlock(_component_el_popper_arrow, {
            key: 0,
            "arrow-offset": _ctx.arrowOffset
          }, null, 8, ["arrow-offset"])) : createCommentVNode("v-if", true)
        ]),
        _: 3
      }, 8, ["aria-label", "boundaries-padding", "content", "disabled", "effect", "enterable", "fallback-placements", "hide-after", "gpu-acceleration", "offset", "persistent", "popper-class", "popper-style", "placement", "popper-options", "pure", "raw-content", "reference-el", "trigger-target-el", "show-after", "strategy", "teleported", "transition", "virtual-triggering", "z-index", "append-to"])
    ]),
    _: 3
  }, 8, ["role"]);
}
var Tooltip$1 = _export_sfc(_sfc_main$1a, [["render", _sfc_render$a], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);
var ElTooltip = withInstall(Tooltip$1);
var buttonTypes = [
  "default",
  "primary",
  "success",
  "warning",
  "info",
  "danger",
  "text",
  ""
];
var buttonNativeTypes = ["button", "submit", "reset"];
var buttonProps = buildProps({
  size: useSizeProp,
  disabled: Boolean,
  type: {
    type: String,
    values: buttonTypes,
    default: ""
  },
  icon: {
    type: iconPropType
  },
  nativeType: {
    type: String,
    values: buttonNativeTypes,
    default: "button"
  },
  loading: Boolean,
  loadingIcon: {
    type: iconPropType,
    default: () => loading_default
  },
  plain: Boolean,
  text: Boolean,
  link: Boolean,
  bg: Boolean,
  autofocus: Boolean,
  round: Boolean,
  circle: Boolean,
  color: String,
  dark: Boolean,
  autoInsertSpace: {
    type: Boolean,
    default: void 0
  }
});
var buttonEmits = {
  click: (evt) => evt instanceof MouseEvent
};
function bound01(n, max) {
  if (isOnePointZero(n)) {
    n = "100%";
  }
  var isPercent = isPercentage(n);
  n = max === 360 ? n : Math.min(max, Math.max(0, parseFloat(n)));
  if (isPercent) {
    n = parseInt(String(n * max), 10) / 100;
  }
  if (Math.abs(n - max) < 1e-6) {
    return 1;
  }
  if (max === 360) {
    n = (n < 0 ? n % max + max : n % max) / parseFloat(String(max));
  } else {
    n = n % max / parseFloat(String(max));
  }
  return n;
}
function clamp01(val) {
  return Math.min(1, Math.max(0, val));
}
function isOnePointZero(n) {
  return typeof n === "string" && n.indexOf(".") !== -1 && parseFloat(n) === 1;
}
function isPercentage(n) {
  return typeof n === "string" && n.indexOf("%") !== -1;
}
function boundAlpha(a3) {
  a3 = parseFloat(a3);
  if (isNaN(a3) || a3 < 0 || a3 > 1) {
    a3 = 1;
  }
  return a3;
}
function convertToPercentage(n) {
  if (n <= 1) {
    return "".concat(Number(n) * 100, "%");
  }
  return n;
}
function pad2(c2) {
  return c2.length === 1 ? "0" + c2 : String(c2);
}
function rgbToRgb(r, g, b2) {
  return {
    r: bound01(r, 255) * 255,
    g: bound01(g, 255) * 255,
    b: bound01(b2, 255) * 255
  };
}
function rgbToHsl(r, g, b2) {
  r = bound01(r, 255);
  g = bound01(g, 255);
  b2 = bound01(b2, 255);
  var max = Math.max(r, g, b2);
  var min = Math.min(r, g, b2);
  var h4 = 0;
  var s3 = 0;
  var l = (max + min) / 2;
  if (max === min) {
    s3 = 0;
    h4 = 0;
  } else {
    var d3 = max - min;
    s3 = l > 0.5 ? d3 / (2 - max - min) : d3 / (max + min);
    switch (max) {
      case r:
        h4 = (g - b2) / d3 + (g < b2 ? 6 : 0);
        break;
      case g:
        h4 = (b2 - r) / d3 + 2;
        break;
      case b2:
        h4 = (r - g) / d3 + 4;
        break;
    }
    h4 /= 6;
  }
  return { h: h4, s: s3, l };
}
function hue2rgb(p, q3, t2) {
  if (t2 < 0) {
    t2 += 1;
  }
  if (t2 > 1) {
    t2 -= 1;
  }
  if (t2 < 1 / 6) {
    return p + (q3 - p) * (6 * t2);
  }
  if (t2 < 1 / 2) {
    return q3;
  }
  if (t2 < 2 / 3) {
    return p + (q3 - p) * (2 / 3 - t2) * 6;
  }
  return p;
}
function hslToRgb(h4, s3, l) {
  var r;
  var g;
  var b2;
  h4 = bound01(h4, 360);
  s3 = bound01(s3, 100);
  l = bound01(l, 100);
  if (s3 === 0) {
    g = l;
    b2 = l;
    r = l;
  } else {
    var q3 = l < 0.5 ? l * (1 + s3) : l + s3 - l * s3;
    var p = 2 * l - q3;
    r = hue2rgb(p, q3, h4 + 1 / 3);
    g = hue2rgb(p, q3, h4);
    b2 = hue2rgb(p, q3, h4 - 1 / 3);
  }
  return { r: r * 255, g: g * 255, b: b2 * 255 };
}
function rgbToHsv(r, g, b2) {
  r = bound01(r, 255);
  g = bound01(g, 255);
  b2 = bound01(b2, 255);
  var max = Math.max(r, g, b2);
  var min = Math.min(r, g, b2);
  var h4 = 0;
  var v = max;
  var d3 = max - min;
  var s3 = max === 0 ? 0 : d3 / max;
  if (max === min) {
    h4 = 0;
  } else {
    switch (max) {
      case r:
        h4 = (g - b2) / d3 + (g < b2 ? 6 : 0);
        break;
      case g:
        h4 = (b2 - r) / d3 + 2;
        break;
      case b2:
        h4 = (r - g) / d3 + 4;
        break;
    }
    h4 /= 6;
  }
  return { h: h4, s: s3, v };
}
function hsvToRgb(h4, s3, v) {
  h4 = bound01(h4, 360) * 6;
  s3 = bound01(s3, 100);
  v = bound01(v, 100);
  var i2 = Math.floor(h4);
  var f = h4 - i2;
  var p = v * (1 - s3);
  var q3 = v * (1 - f * s3);
  var t2 = v * (1 - (1 - f) * s3);
  var mod = i2 % 6;
  var r = [v, q3, p, p, t2, v][mod];
  var g = [t2, v, v, q3, p, p][mod];
  var b2 = [p, p, t2, v, v, q3][mod];
  return { r: r * 255, g: g * 255, b: b2 * 255 };
}
function rgbToHex(r, g, b2, allow3Char) {
  var hex = [
    pad2(Math.round(r).toString(16)),
    pad2(Math.round(g).toString(16)),
    pad2(Math.round(b2).toString(16))
  ];
  if (allow3Char && hex[0].startsWith(hex[0].charAt(1)) && hex[1].startsWith(hex[1].charAt(1)) && hex[2].startsWith(hex[2].charAt(1))) {
    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);
  }
  return hex.join("");
}
function rgbaToHex(r, g, b2, a3, allow4Char) {
  var hex = [
    pad2(Math.round(r).toString(16)),
    pad2(Math.round(g).toString(16)),
    pad2(Math.round(b2).toString(16)),
    pad2(convertDecimalToHex(a3))
  ];
  if (allow4Char && hex[0].startsWith(hex[0].charAt(1)) && hex[1].startsWith(hex[1].charAt(1)) && hex[2].startsWith(hex[2].charAt(1)) && hex[3].startsWith(hex[3].charAt(1))) {
    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);
  }
  return hex.join("");
}
function convertDecimalToHex(d3) {
  return Math.round(parseFloat(d3) * 255).toString(16);
}
function convertHexToDecimal(h4) {
  return parseIntFromHex(h4) / 255;
}
function parseIntFromHex(val) {
  return parseInt(val, 16);
}
function numberInputToObject(color) {
  return {
    r: color >> 16,
    g: (color & 65280) >> 8,
    b: color & 255
  };
}
var names = {
  aliceblue: "#f0f8ff",
  antiquewhite: "#faebd7",
  aqua: "#00ffff",
  aquamarine: "#7fffd4",
  azure: "#f0ffff",
  beige: "#f5f5dc",
  bisque: "#ffe4c4",
  black: "#000000",
  blanchedalmond: "#ffebcd",
  blue: "#0000ff",
  blueviolet: "#8a2be2",
  brown: "#a52a2a",
  burlywood: "#deb887",
  cadetblue: "#5f9ea0",
  chartreuse: "#7fff00",
  chocolate: "#d2691e",
  coral: "#ff7f50",
  cornflowerblue: "#6495ed",
  cornsilk: "#fff8dc",
  crimson: "#dc143c",
  cyan: "#00ffff",
  darkblue: "#00008b",
  darkcyan: "#008b8b",
  darkgoldenrod: "#b8860b",
  darkgray: "#a9a9a9",
  darkgreen: "#006400",
  darkgrey: "#a9a9a9",
  darkkhaki: "#bdb76b",
  darkmagenta: "#8b008b",
  darkolivegreen: "#556b2f",
  darkorange: "#ff8c00",
  darkorchid: "#9932cc",
  darkred: "#8b0000",
  darksalmon: "#e9967a",
  darkseagreen: "#8fbc8f",
  darkslateblue: "#483d8b",
  darkslategray: "#2f4f4f",
  darkslategrey: "#2f4f4f",
  darkturquoise: "#00ced1",
  darkviolet: "#9400d3",
  deeppink: "#ff1493",
  deepskyblue: "#00bfff",
  dimgray: "#696969",
  dimgrey: "#696969",
  dodgerblue: "#1e90ff",
  firebrick: "#b22222",
  floralwhite: "#fffaf0",
  forestgreen: "#228b22",
  fuchsia: "#ff00ff",
  gainsboro: "#dcdcdc",
  ghostwhite: "#f8f8ff",
  goldenrod: "#daa520",
  gold: "#ffd700",
  gray: "#808080",
  green: "#008000",
  greenyellow: "#adff2f",
  grey: "#808080",
  honeydew: "#f0fff0",
  hotpink: "#ff69b4",
  indianred: "#cd5c5c",
  indigo: "#4b0082",
  ivory: "#fffff0",
  khaki: "#f0e68c",
  lavenderblush: "#fff0f5",
  lavender: "#e6e6fa",
  lawngreen: "#7cfc00",
  lemonchiffon: "#fffacd",
  lightblue: "#add8e6",
  lightcoral: "#f08080",
  lightcyan: "#e0ffff",
  lightgoldenrodyellow: "#fafad2",
  lightgray: "#d3d3d3",
  lightgreen: "#90ee90",
  lightgrey: "#d3d3d3",
  lightpink: "#ffb6c1",
  lightsalmon: "#ffa07a",
  lightseagreen: "#20b2aa",
  lightskyblue: "#87cefa",
  lightslategray: "#778899",
  lightslategrey: "#778899",
  lightsteelblue: "#b0c4de",
  lightyellow: "#ffffe0",
  lime: "#00ff00",
  limegreen: "#32cd32",
  linen: "#faf0e6",
  magenta: "#ff00ff",
  maroon: "#800000",
  mediumaquamarine: "#66cdaa",
  mediumblue: "#0000cd",
  mediumorchid: "#ba55d3",
  mediumpurple: "#9370db",
  mediumseagreen: "#3cb371",
  mediumslateblue: "#7b68ee",
  mediumspringgreen: "#00fa9a",
  mediumturquoise: "#48d1cc",
  mediumvioletred: "#c71585",
  midnightblue: "#191970",
  mintcream: "#f5fffa",
  mistyrose: "#ffe4e1",
  moccasin: "#ffe4b5",
  navajowhite: "#ffdead",
  navy: "#000080",
  oldlace: "#fdf5e6",
  olive: "#808000",
  olivedrab: "#6b8e23",
  orange: "#ffa500",
  orangered: "#ff4500",
  orchid: "#da70d6",
  palegoldenrod: "#eee8aa",
  palegreen: "#98fb98",
  paleturquoise: "#afeeee",
  palevioletred: "#db7093",
  papayawhip: "#ffefd5",
  peachpuff: "#ffdab9",
  peru: "#cd853f",
  pink: "#ffc0cb",
  plum: "#dda0dd",
  powderblue: "#b0e0e6",
  purple: "#800080",
  rebeccapurple: "#663399",
  red: "#ff0000",
  rosybrown: "#bc8f8f",
  royalblue: "#4169e1",
  saddlebrown: "#8b4513",
  salmon: "#fa8072",
  sandybrown: "#f4a460",
  seagreen: "#2e8b57",
  seashell: "#fff5ee",
  sienna: "#a0522d",
  silver: "#c0c0c0",
  skyblue: "#87ceeb",
  slateblue: "#6a5acd",
  slategray: "#708090",
  slategrey: "#708090",
  snow: "#fffafa",
  springgreen: "#00ff7f",
  steelblue: "#4682b4",
  tan: "#d2b48c",
  teal: "#008080",
  thistle: "#d8bfd8",
  tomato: "#ff6347",
  turquoise: "#40e0d0",
  violet: "#ee82ee",
  wheat: "#f5deb3",
  white: "#ffffff",
  whitesmoke: "#f5f5f5",
  yellow: "#ffff00",
  yellowgreen: "#9acd32"
};
function inputToRGB(color) {
  var rgb = { r: 0, g: 0, b: 0 };
  var a3 = 1;
  var s3 = null;
  var v = null;
  var l = null;
  var ok = false;
  var format2 = false;
  if (typeof color === "string") {
    color = stringInputToObject(color);
  }
  if (typeof color === "object") {
    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {
      rgb = rgbToRgb(color.r, color.g, color.b);
      ok = true;
      format2 = String(color.r).substr(-1) === "%" ? "prgb" : "rgb";
    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {
      s3 = convertToPercentage(color.s);
      v = convertToPercentage(color.v);
      rgb = hsvToRgb(color.h, s3, v);
      ok = true;
      format2 = "hsv";
    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {
      s3 = convertToPercentage(color.s);
      l = convertToPercentage(color.l);
      rgb = hslToRgb(color.h, s3, l);
      ok = true;
      format2 = "hsl";
    }
    if (Object.prototype.hasOwnProperty.call(color, "a")) {
      a3 = color.a;
    }
  }
  a3 = boundAlpha(a3);
  return {
    ok,
    format: color.format || format2,
    r: Math.min(255, Math.max(rgb.r, 0)),
    g: Math.min(255, Math.max(rgb.g, 0)),
    b: Math.min(255, Math.max(rgb.b, 0)),
    a: a3
  };
}
var CSS_INTEGER = "[-\\+]?\\d+%?";
var CSS_NUMBER = "[-\\+]?\\d*\\.\\d+%?";
var CSS_UNIT = "(?:".concat(CSS_NUMBER, ")|(?:").concat(CSS_INTEGER, ")");
var PERMISSIVE_MATCH3 = "[\\s|\\(]+(".concat(CSS_UNIT, ")[,|\\s]+(").concat(CSS_UNIT, ")[,|\\s]+(").concat(CSS_UNIT, ")\\s*\\)?");
var PERMISSIVE_MATCH4 = "[\\s|\\(]+(".concat(CSS_UNIT, ")[,|\\s]+(").concat(CSS_UNIT, ")[,|\\s]+(").concat(CSS_UNIT, ")[,|\\s]+(").concat(CSS_UNIT, ")\\s*\\)?");
var matchers = {
  CSS_UNIT: new RegExp(CSS_UNIT),
  rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),
  rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),
  hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),
  hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),
  hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),
  hsva: new RegExp("hsva" + PERMISSIVE_MATCH4),
  hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
  hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
};
function stringInputToObject(color) {
  color = color.trim().toLowerCase();
  if (color.length === 0) {
    return false;
  }
  var named = false;
  if (names[color]) {
    color = names[color];
    named = true;
  } else if (color === "transparent") {
    return { r: 0, g: 0, b: 0, a: 0, format: "name" };
  }
  var match2 = matchers.rgb.exec(color);
  if (match2) {
    return { r: match2[1], g: match2[2], b: match2[3] };
  }
  match2 = matchers.rgba.exec(color);
  if (match2) {
    return { r: match2[1], g: match2[2], b: match2[3], a: match2[4] };
  }
  match2 = matchers.hsl.exec(color);
  if (match2) {
    return { h: match2[1], s: match2[2], l: match2[3] };
  }
  match2 = matchers.hsla.exec(color);
  if (match2) {
    return { h: match2[1], s: match2[2], l: match2[3], a: match2[4] };
  }
  match2 = matchers.hsv.exec(color);
  if (match2) {
    return { h: match2[1], s: match2[2], v: match2[3] };
  }
  match2 = matchers.hsva.exec(color);
  if (match2) {
    return { h: match2[1], s: match2[2], v: match2[3], a: match2[4] };
  }
  match2 = matchers.hex8.exec(color);
  if (match2) {
    return {
      r: parseIntFromHex(match2[1]),
      g: parseIntFromHex(match2[2]),
      b: parseIntFromHex(match2[3]),
      a: convertHexToDecimal(match2[4]),
      format: named ? "name" : "hex8"
    };
  }
  match2 = matchers.hex6.exec(color);
  if (match2) {
    return {
      r: parseIntFromHex(match2[1]),
      g: parseIntFromHex(match2[2]),
      b: parseIntFromHex(match2[3]),
      format: named ? "name" : "hex"
    };
  }
  match2 = matchers.hex4.exec(color);
  if (match2) {
    return {
      r: parseIntFromHex(match2[1] + match2[1]),
      g: parseIntFromHex(match2[2] + match2[2]),
      b: parseIntFromHex(match2[3] + match2[3]),
      a: convertHexToDecimal(match2[4] + match2[4]),
      format: named ? "name" : "hex8"
    };
  }
  match2 = matchers.hex3.exec(color);
  if (match2) {
    return {
      r: parseIntFromHex(match2[1] + match2[1]),
      g: parseIntFromHex(match2[2] + match2[2]),
      b: parseIntFromHex(match2[3] + match2[3]),
      format: named ? "name" : "hex"
    };
  }
  return false;
}
function isValidCSSUnit(color) {
  return Boolean(matchers.CSS_UNIT.exec(String(color)));
}
var TinyColor = function() {
  function TinyColor2(color, opts) {
    if (color === void 0) {
      color = "";
    }
    if (opts === void 0) {
      opts = {};
    }
    var _a2;
    if (color instanceof TinyColor2) {
      return color;
    }
    if (typeof color === "number") {
      color = numberInputToObject(color);
    }
    this.originalInput = color;
    var rgb = inputToRGB(color);
    this.originalInput = color;
    this.r = rgb.r;
    this.g = rgb.g;
    this.b = rgb.b;
    this.a = rgb.a;
    this.roundA = Math.round(100 * this.a) / 100;
    this.format = (_a2 = opts.format) !== null && _a2 !== void 0 ? _a2 : rgb.format;
    this.gradientType = opts.gradientType;
    if (this.r < 1) {
      this.r = Math.round(this.r);
    }
    if (this.g < 1) {
      this.g = Math.round(this.g);
    }
    if (this.b < 1) {
      this.b = Math.round(this.b);
    }
    this.isValid = rgb.ok;
  }
  TinyColor2.prototype.isDark = function() {
    return this.getBrightness() < 128;
  };
  TinyColor2.prototype.isLight = function() {
    return !this.isDark();
  };
  TinyColor2.prototype.getBrightness = function() {
    var rgb = this.toRgb();
    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1e3;
  };
  TinyColor2.prototype.getLuminance = function() {
    var rgb = this.toRgb();
    var R3;
    var G3;
    var B3;
    var RsRGB = rgb.r / 255;
    var GsRGB = rgb.g / 255;
    var BsRGB = rgb.b / 255;
    if (RsRGB <= 0.03928) {
      R3 = RsRGB / 12.92;
    } else {
      R3 = Math.pow((RsRGB + 0.055) / 1.055, 2.4);
    }
    if (GsRGB <= 0.03928) {
      G3 = GsRGB / 12.92;
    } else {
      G3 = Math.pow((GsRGB + 0.055) / 1.055, 2.4);
    }
    if (BsRGB <= 0.03928) {
      B3 = BsRGB / 12.92;
    } else {
      B3 = Math.pow((BsRGB + 0.055) / 1.055, 2.4);
    }
    return 0.2126 * R3 + 0.7152 * G3 + 0.0722 * B3;
  };
  TinyColor2.prototype.getAlpha = function() {
    return this.a;
  };
  TinyColor2.prototype.setAlpha = function(alpha) {
    this.a = boundAlpha(alpha);
    this.roundA = Math.round(100 * this.a) / 100;
    return this;
  };
  TinyColor2.prototype.toHsv = function() {
    var hsv = rgbToHsv(this.r, this.g, this.b);
    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this.a };
  };
  TinyColor2.prototype.toHsvString = function() {
    var hsv = rgbToHsv(this.r, this.g, this.b);
    var h4 = Math.round(hsv.h * 360);
    var s3 = Math.round(hsv.s * 100);
    var v = Math.round(hsv.v * 100);
    return this.a === 1 ? "hsv(".concat(h4, ", ").concat(s3, "%, ").concat(v, "%)") : "hsva(".concat(h4, ", ").concat(s3, "%, ").concat(v, "%, ").concat(this.roundA, ")");
  };
  TinyColor2.prototype.toHsl = function() {
    var hsl = rgbToHsl(this.r, this.g, this.b);
    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this.a };
  };
  TinyColor2.prototype.toHslString = function() {
    var hsl = rgbToHsl(this.r, this.g, this.b);
    var h4 = Math.round(hsl.h * 360);
    var s3 = Math.round(hsl.s * 100);
    var l = Math.round(hsl.l * 100);
    return this.a === 1 ? "hsl(".concat(h4, ", ").concat(s3, "%, ").concat(l, "%)") : "hsla(".concat(h4, ", ").concat(s3, "%, ").concat(l, "%, ").concat(this.roundA, ")");
  };
  TinyColor2.prototype.toHex = function(allow3Char) {
    if (allow3Char === void 0) {
      allow3Char = false;
    }
    return rgbToHex(this.r, this.g, this.b, allow3Char);
  };
  TinyColor2.prototype.toHexString = function(allow3Char) {
    if (allow3Char === void 0) {
      allow3Char = false;
    }
    return "#" + this.toHex(allow3Char);
  };
  TinyColor2.prototype.toHex8 = function(allow4Char) {
    if (allow4Char === void 0) {
      allow4Char = false;
    }
    return rgbaToHex(this.r, this.g, this.b, this.a, allow4Char);
  };
  TinyColor2.prototype.toHex8String = function(allow4Char) {
    if (allow4Char === void 0) {
      allow4Char = false;
    }
    return "#" + this.toHex8(allow4Char);
  };
  TinyColor2.prototype.toRgb = function() {
    return {
      r: Math.round(this.r),
      g: Math.round(this.g),
      b: Math.round(this.b),
      a: this.a
    };
  };
  TinyColor2.prototype.toRgbString = function() {
    var r = Math.round(this.r);
    var g = Math.round(this.g);
    var b2 = Math.round(this.b);
    return this.a === 1 ? "rgb(".concat(r, ", ").concat(g, ", ").concat(b2, ")") : "rgba(".concat(r, ", ").concat(g, ", ").concat(b2, ", ").concat(this.roundA, ")");
  };
  TinyColor2.prototype.toPercentageRgb = function() {
    var fmt = function(x2) {
      return "".concat(Math.round(bound01(x2, 255) * 100), "%");
    };
    return {
      r: fmt(this.r),
      g: fmt(this.g),
      b: fmt(this.b),
      a: this.a
    };
  };
  TinyColor2.prototype.toPercentageRgbString = function() {
    var rnd = function(x2) {
      return Math.round(bound01(x2, 255) * 100);
    };
    return this.a === 1 ? "rgb(".concat(rnd(this.r), "%, ").concat(rnd(this.g), "%, ").concat(rnd(this.b), "%)") : "rgba(".concat(rnd(this.r), "%, ").concat(rnd(this.g), "%, ").concat(rnd(this.b), "%, ").concat(this.roundA, ")");
  };
  TinyColor2.prototype.toName = function() {
    if (this.a === 0) {
      return "transparent";
    }
    if (this.a < 1) {
      return false;
    }
    var hex = "#" + rgbToHex(this.r, this.g, this.b, false);
    for (var _i = 0, _a2 = Object.entries(names); _i < _a2.length; _i++) {
      var _b = _a2[_i], key = _b[0], value = _b[1];
      if (hex === value) {
        return key;
      }
    }
    return false;
  };
  TinyColor2.prototype.toString = function(format2) {
    var formatSet = Boolean(format2);
    format2 = format2 !== null && format2 !== void 0 ? format2 : this.format;
    var formattedString = false;
    var hasAlpha = this.a < 1 && this.a >= 0;
    var needsAlphaFormat = !formatSet && hasAlpha && (format2.startsWith("hex") || format2 === "name");
    if (needsAlphaFormat) {
      if (format2 === "name" && this.a === 0) {
        return this.toName();
      }
      return this.toRgbString();
    }
    if (format2 === "rgb") {
      formattedString = this.toRgbString();
    }
    if (format2 === "prgb") {
      formattedString = this.toPercentageRgbString();
    }
    if (format2 === "hex" || format2 === "hex6") {
      formattedString = this.toHexString();
    }
    if (format2 === "hex3") {
      formattedString = this.toHexString(true);
    }
    if (format2 === "hex4") {
      formattedString = this.toHex8String(true);
    }
    if (format2 === "hex8") {
      formattedString = this.toHex8String();
    }
    if (format2 === "name") {
      formattedString = this.toName();
    }
    if (format2 === "hsl") {
      formattedString = this.toHslString();
    }
    if (format2 === "hsv") {
      formattedString = this.toHsvString();
    }
    return formattedString || this.toHexString();
  };
  TinyColor2.prototype.toNumber = function() {
    return (Math.round(this.r) << 16) + (Math.round(this.g) << 8) + Math.round(this.b);
  };
  TinyColor2.prototype.clone = function() {
    return new TinyColor2(this.toString());
  };
  TinyColor2.prototype.lighten = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    var hsl = this.toHsl();
    hsl.l += amount / 100;
    hsl.l = clamp01(hsl.l);
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.brighten = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    var rgb = this.toRgb();
    rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));
    rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));
    rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));
    return new TinyColor2(rgb);
  };
  TinyColor2.prototype.darken = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    var hsl = this.toHsl();
    hsl.l -= amount / 100;
    hsl.l = clamp01(hsl.l);
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.tint = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    return this.mix("white", amount);
  };
  TinyColor2.prototype.shade = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    return this.mix("black", amount);
  };
  TinyColor2.prototype.desaturate = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    var hsl = this.toHsl();
    hsl.s -= amount / 100;
    hsl.s = clamp01(hsl.s);
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.saturate = function(amount) {
    if (amount === void 0) {
      amount = 10;
    }
    var hsl = this.toHsl();
    hsl.s += amount / 100;
    hsl.s = clamp01(hsl.s);
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.greyscale = function() {
    return this.desaturate(100);
  };
  TinyColor2.prototype.spin = function(amount) {
    var hsl = this.toHsl();
    var hue = (hsl.h + amount) % 360;
    hsl.h = hue < 0 ? 360 + hue : hue;
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.mix = function(color, amount) {
    if (amount === void 0) {
      amount = 50;
    }
    var rgb1 = this.toRgb();
    var rgb2 = new TinyColor2(color).toRgb();
    var p = amount / 100;
    var rgba = {
      r: (rgb2.r - rgb1.r) * p + rgb1.r,
      g: (rgb2.g - rgb1.g) * p + rgb1.g,
      b: (rgb2.b - rgb1.b) * p + rgb1.b,
      a: (rgb2.a - rgb1.a) * p + rgb1.a
    };
    return new TinyColor2(rgba);
  };
  TinyColor2.prototype.analogous = function(results, slices) {
    if (results === void 0) {
      results = 6;
    }
    if (slices === void 0) {
      slices = 30;
    }
    var hsl = this.toHsl();
    var part = 360 / slices;
    var ret = [this];
    for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results; ) {
      hsl.h = (hsl.h + part) % 360;
      ret.push(new TinyColor2(hsl));
    }
    return ret;
  };
  TinyColor2.prototype.complement = function() {
    var hsl = this.toHsl();
    hsl.h = (hsl.h + 180) % 360;
    return new TinyColor2(hsl);
  };
  TinyColor2.prototype.monochromatic = function(results) {
    if (results === void 0) {
      results = 6;
    }
    var hsv = this.toHsv();
    var h4 = hsv.h;
    var s3 = hsv.s;
    var v = hsv.v;
    var res = [];
    var modification = 1 / results;
    while (results--) {
      res.push(new TinyColor2({ h: h4, s: s3, v }));
      v = (v + modification) % 1;
    }
    return res;
  };
  TinyColor2.prototype.splitcomplement = function() {
    var hsl = this.toHsl();
    var h4 = hsl.h;
    return [
      this,
      new TinyColor2({ h: (h4 + 72) % 360, s: hsl.s, l: hsl.l }),
      new TinyColor2({ h: (h4 + 216) % 360, s: hsl.s, l: hsl.l })
    ];
  };
  TinyColor2.prototype.onBackground = function(background) {
    var fg = this.toRgb();
    var bg = new TinyColor2(background).toRgb();
    return new TinyColor2({
      r: bg.r + (fg.r - bg.r) * fg.a,
      g: bg.g + (fg.g - bg.g) * fg.a,
      b: bg.b + (fg.b - bg.b) * fg.a
    });
  };
  TinyColor2.prototype.triad = function() {
    return this.polyad(3);
  };
  TinyColor2.prototype.tetrad = function() {
    return this.polyad(4);
  };
  TinyColor2.prototype.polyad = function(n) {
    var hsl = this.toHsl();
    var h4 = hsl.h;
    var result = [this];
    var increment = 360 / n;
    for (var i2 = 1; i2 < n; i2++) {
      result.push(new TinyColor2({ h: (h4 + i2 * increment) % 360, s: hsl.s, l: hsl.l }));
    }
    return result;
  };
  TinyColor2.prototype.equals = function(color) {
    return this.toRgbString() === new TinyColor2(color).toRgbString();
  };
  return TinyColor2;
}();
function darken(color, amount = 20) {
  return color.mix("#141414", amount).toString();
}
function useButtonCustomStyle(props2) {
  const _disabled = useDisabled();
  const ns2 = useNamespace("button");
  return computed(() => {
    let styles = {};
    const buttonColor = props2.color;
    if (buttonColor) {
      const color = new TinyColor(buttonColor);
      const activeBgColor = props2.dark ? color.tint(20).toString() : darken(color, 20);
      if (props2.plain) {
        styles = ns2.cssVarBlock({
          "bg-color": props2.dark ? darken(color, 90) : color.tint(90).toString(),
          "text-color": buttonColor,
          "border-color": props2.dark ? darken(color, 50) : color.tint(50).toString(),
          "hover-text-color": `var(${ns2.cssVarName("color-white")})`,
          "hover-bg-color": buttonColor,
          "hover-border-color": buttonColor,
          "active-bg-color": activeBgColor,
          "active-text-color": `var(${ns2.cssVarName("color-white")})`,
          "active-border-color": activeBgColor
        });
        if (_disabled.value) {
          styles[ns2.cssVarBlockName("disabled-bg-color")] = props2.dark ? darken(color, 90) : color.tint(90).toString();
          styles[ns2.cssVarBlockName("disabled-text-color")] = props2.dark ? darken(color, 50) : color.tint(50).toString();
          styles[ns2.cssVarBlockName("disabled-border-color")] = props2.dark ? darken(color, 80) : color.tint(80).toString();
        }
      } else {
        const hoverBgColor = props2.dark ? darken(color, 30) : color.tint(30).toString();
        const textColor = color.isDark() ? `var(${ns2.cssVarName("color-white")})` : `var(${ns2.cssVarName("color-black")})`;
        styles = ns2.cssVarBlock({
          "bg-color": buttonColor,
          "text-color": textColor,
          "border-color": buttonColor,
          "hover-bg-color": hoverBgColor,
          "hover-text-color": textColor,
          "hover-border-color": hoverBgColor,
          "active-bg-color": activeBgColor,
          "active-border-color": activeBgColor
        });
        if (_disabled.value) {
          const disabledButtonColor = props2.dark ? darken(color, 50) : color.tint(50).toString();
          styles[ns2.cssVarBlockName("disabled-bg-color")] = disabledButtonColor;
          styles[ns2.cssVarBlockName("disabled-text-color")] = props2.dark ? "rgba(255, 255, 255, 0.5)" : `var(${ns2.cssVarName("color-white")})`;
          styles[ns2.cssVarBlockName("disabled-border-color")] = disabledButtonColor;
        }
      }
    }
    return styles;
  });
}
var _hoisted_1$Q = ["aria-disabled", "disabled", "autofocus", "type"];
var __default__$d = {
  name: "ElButton"
};
var _sfc_main$19 = defineComponent({
  ...__default__$d,
  props: buttonProps,
  emits: buttonEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const slots = useSlots();
    useDeprecated({
      from: "type.text",
      replacement: "type.link",
      version: "3.0.0",
      scope: "props",
      ref: "https://element-plus.org/en-US/component/button.html#button-attributes"
    }, computed(() => props2.type === "text"));
    const buttonGroupContext = inject(buttonGroupContextKey, void 0);
    const globalConfig2 = useGlobalConfig("button");
    const ns2 = useNamespace("button");
    const { form } = useFormItem();
    const _size = useSize(computed(() => buttonGroupContext == null ? void 0 : buttonGroupContext.size));
    const _disabled = useDisabled();
    const _ref = ref();
    const _type = computed(() => props2.type || (buttonGroupContext == null ? void 0 : buttonGroupContext.type) || "");
    const autoInsertSpace = computed(() => {
      var _a2, _b, _c;
      return (_c = (_b = props2.autoInsertSpace) != null ? _b : (_a2 = globalConfig2.value) == null ? void 0 : _a2.autoInsertSpace) != null ? _c : false;
    });
    const shouldAddSpace = computed(() => {
      var _a2;
      const defaultSlot = (_a2 = slots.default) == null ? void 0 : _a2.call(slots);
      if (autoInsertSpace.value && (defaultSlot == null ? void 0 : defaultSlot.length) === 1) {
        const slot = defaultSlot[0];
        if ((slot == null ? void 0 : slot.type) === Text) {
          const text = slot.children;
          return /^\p{Unified_Ideograph}{2}$/u.test(text.trim());
        }
      }
      return false;
    });
    const buttonStyle = useButtonCustomStyle(props2);
    const handleClick = (evt) => {
      if (props2.nativeType === "reset") {
        form == null ? void 0 : form.resetFields();
      }
      emit("click", evt);
    };
    expose({
      ref: _ref,
      size: _size,
      type: _type,
      disabled: _disabled,
      shouldAddSpace
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("button", {
        ref_key: "_ref",
        ref: _ref,
        class: normalizeClass([
          unref(ns2).b(),
          unref(ns2).m(unref(_type)),
          unref(ns2).m(unref(_size)),
          unref(ns2).is("disabled", unref(_disabled)),
          unref(ns2).is("loading", _ctx.loading),
          unref(ns2).is("plain", _ctx.plain),
          unref(ns2).is("round", _ctx.round),
          unref(ns2).is("circle", _ctx.circle),
          unref(ns2).is("text", _ctx.text),
          unref(ns2).is("link", _ctx.link),
          unref(ns2).is("has-bg", _ctx.bg)
        ]),
        "aria-disabled": unref(_disabled) || _ctx.loading,
        disabled: unref(_disabled) || _ctx.loading,
        autofocus: _ctx.autofocus,
        type: _ctx.nativeType,
        style: normalizeStyle(unref(buttonStyle)),
        onClick: handleClick
      }, [
        _ctx.loading ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
          _ctx.$slots.loading ? renderSlot(_ctx.$slots, "loading", { key: 0 }) : (openBlock(), createBlock(unref(ElIcon), {
            key: 1,
            class: normalizeClass(unref(ns2).is("loading"))
          }, {
            default: withCtx(() => [
              (openBlock(), createBlock(resolveDynamicComponent(_ctx.loadingIcon)))
            ]),
            _: 1
          }, 8, ["class"]))
        ], 64)) : _ctx.icon || _ctx.$slots.icon ? (openBlock(), createBlock(unref(ElIcon), { key: 1 }, {
          default: withCtx(() => [
            _ctx.icon ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.icon), { key: 0 })) : renderSlot(_ctx.$slots, "icon", { key: 1 })
          ]),
          _: 3
        })) : createCommentVNode("v-if", true),
        _ctx.$slots.default ? (openBlock(), createElementBlock("span", {
          key: 2,
          class: normalizeClass({ [unref(ns2).em("text", "expand")]: unref(shouldAddSpace) })
        }, [
          renderSlot(_ctx.$slots, "default")
        ], 2)) : createCommentVNode("v-if", true)
      ], 14, _hoisted_1$Q);
    };
  }
});
var Button = _export_sfc(_sfc_main$19, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);
var buttonGroupProps = {
  size: buttonProps.size,
  type: buttonProps.type
};
var __default__$c = {
  name: "ElButtonGroup"
};
var _sfc_main$18 = defineComponent({
  ...__default__$c,
  props: buttonGroupProps,
  setup(__props) {
    const props2 = __props;
    provide(buttonGroupContextKey, reactive({
      size: toRef(props2, "size"),
      type: toRef(props2, "type")
    }));
    const ns2 = useNamespace("button");
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(`${unref(ns2).b("group")}`)
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 2);
    };
  }
});
var ButtonGroup = _export_sfc(_sfc_main$18, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);
var ElButton = withInstall(Button, {
  ButtonGroup
});
withNoopInstall(ButtonGroup);
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
var dayjs_min = { exports: {} };
(function(module2, exports2) {
  !function(t2, e2) {
    module2.exports = e2();
  }(commonjsGlobal, function() {
    var t2 = 1e3, e2 = 6e4, n = 36e5, r = "millisecond", i2 = "second", s3 = "minute", u2 = "hour", a3 = "day", o = "week", f = "month", h4 = "quarter", c2 = "year", d3 = "date", $ = "Invalid Date", l = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, y3 = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, M3 = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") }, m3 = function(t3, e3, n2) {
      var r2 = String(t3);
      return !r2 || r2.length >= e3 ? t3 : "" + Array(e3 + 1 - r2.length).join(n2) + t3;
    }, g = { s: m3, z: function(t3) {
      var e3 = -t3.utcOffset(), n2 = Math.abs(e3), r2 = Math.floor(n2 / 60), i3 = n2 % 60;
      return (e3 <= 0 ? "+" : "-") + m3(r2, 2, "0") + ":" + m3(i3, 2, "0");
    }, m: function t3(e3, n2) {
      if (e3.date() < n2.date())
        return -t3(n2, e3);
      var r2 = 12 * (n2.year() - e3.year()) + (n2.month() - e3.month()), i3 = e3.clone().add(r2, f), s4 = n2 - i3 < 0, u3 = e3.clone().add(r2 + (s4 ? -1 : 1), f);
      return +(-(r2 + (n2 - i3) / (s4 ? i3 - u3 : u3 - i3)) || 0);
    }, a: function(t3) {
      return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
    }, p: function(t3) {
      return { M: f, y: c2, w: o, d: a3, D: d3, h: u2, m: s3, s: i2, ms: r, Q: h4 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
    }, u: function(t3) {
      return void 0 === t3;
    } }, v = "en", D2 = {};
    D2[v] = M3;
    var p = function(t3) {
      return t3 instanceof _2;
    }, S3 = function t3(e3, n2, r2) {
      var i3;
      if (!e3)
        return v;
      if ("string" == typeof e3) {
        var s4 = e3.toLowerCase();
        D2[s4] && (i3 = s4), n2 && (D2[s4] = n2, i3 = s4);
        var u3 = e3.split("-");
        if (!i3 && u3.length > 1)
          return t3(u3[0]);
      } else {
        var a4 = e3.name;
        D2[a4] = e3, i3 = a4;
      }
      return !r2 && i3 && (v = i3), i3 || !r2 && v;
    }, w2 = function(t3, e3) {
      if (p(t3))
        return t3.clone();
      var n2 = "object" == typeof e3 ? e3 : {};
      return n2.date = t3, n2.args = arguments, new _2(n2);
    }, O2 = g;
    O2.l = S3, O2.i = p, O2.w = function(t3, e3) {
      return w2(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
    };
    var _2 = function() {
      function M4(t3) {
        this.$L = S3(t3.locale, null, true), this.parse(t3);
      }
      var m4 = M4.prototype;
      return m4.parse = function(t3) {
        this.$d = function(t4) {
          var e3 = t4.date, n2 = t4.utc;
          if (null === e3)
            return new Date(NaN);
          if (O2.u(e3))
            return new Date();
          if (e3 instanceof Date)
            return new Date(e3);
          if ("string" == typeof e3 && !/Z$/i.test(e3)) {
            var r2 = e3.match(l);
            if (r2) {
              var i3 = r2[2] - 1 || 0, s4 = (r2[7] || "0").substring(0, 3);
              return n2 ? new Date(Date.UTC(r2[1], i3, r2[3] || 1, r2[4] || 0, r2[5] || 0, r2[6] || 0, s4)) : new Date(r2[1], i3, r2[3] || 1, r2[4] || 0, r2[5] || 0, r2[6] || 0, s4);
            }
          }
          return new Date(e3);
        }(t3), this.$x = t3.x || {}, this.init();
      }, m4.init = function() {
        var t3 = this.$d;
        this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
      }, m4.$utils = function() {
        return O2;
      }, m4.isValid = function() {
        return !(this.$d.toString() === $);
      }, m4.isSame = function(t3, e3) {
        var n2 = w2(t3);
        return this.startOf(e3) <= n2 && n2 <= this.endOf(e3);
      }, m4.isAfter = function(t3, e3) {
        return w2(t3) < this.startOf(e3);
      }, m4.isBefore = function(t3, e3) {
        return this.endOf(e3) < w2(t3);
      }, m4.$g = function(t3, e3, n2) {
        return O2.u(t3) ? this[e3] : this.set(n2, t3);
      }, m4.unix = function() {
        return Math.floor(this.valueOf() / 1e3);
      }, m4.valueOf = function() {
        return this.$d.getTime();
      }, m4.startOf = function(t3, e3) {
        var n2 = this, r2 = !!O2.u(e3) || e3, h5 = O2.p(t3), $2 = function(t4, e4) {
          var i3 = O2.w(n2.$u ? Date.UTC(n2.$y, e4, t4) : new Date(n2.$y, e4, t4), n2);
          return r2 ? i3 : i3.endOf(a3);
        }, l2 = function(t4, e4) {
          return O2.w(n2.toDate()[t4].apply(n2.toDate("s"), (r2 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n2);
        }, y4 = this.$W, M5 = this.$M, m5 = this.$D, g2 = "set" + (this.$u ? "UTC" : "");
        switch (h5) {
          case c2:
            return r2 ? $2(1, 0) : $2(31, 11);
          case f:
            return r2 ? $2(1, M5) : $2(0, M5 + 1);
          case o:
            var v2 = this.$locale().weekStart || 0, D3 = (y4 < v2 ? y4 + 7 : y4) - v2;
            return $2(r2 ? m5 - D3 : m5 + (6 - D3), M5);
          case a3:
          case d3:
            return l2(g2 + "Hours", 0);
          case u2:
            return l2(g2 + "Minutes", 1);
          case s3:
            return l2(g2 + "Seconds", 2);
          case i2:
            return l2(g2 + "Milliseconds", 3);
          default:
            return this.clone();
        }
      }, m4.endOf = function(t3) {
        return this.startOf(t3, false);
      }, m4.$set = function(t3, e3) {
        var n2, o2 = O2.p(t3), h5 = "set" + (this.$u ? "UTC" : ""), $2 = (n2 = {}, n2[a3] = h5 + "Date", n2[d3] = h5 + "Date", n2[f] = h5 + "Month", n2[c2] = h5 + "FullYear", n2[u2] = h5 + "Hours", n2[s3] = h5 + "Minutes", n2[i2] = h5 + "Seconds", n2[r] = h5 + "Milliseconds", n2)[o2], l2 = o2 === a3 ? this.$D + (e3 - this.$W) : e3;
        if (o2 === f || o2 === c2) {
          var y4 = this.clone().set(d3, 1);
          y4.$d[$2](l2), y4.init(), this.$d = y4.set(d3, Math.min(this.$D, y4.daysInMonth())).$d;
        } else
          $2 && this.$d[$2](l2);
        return this.init(), this;
      }, m4.set = function(t3, e3) {
        return this.clone().$set(t3, e3);
      }, m4.get = function(t3) {
        return this[O2.p(t3)]();
      }, m4.add = function(r2, h5) {
        var d4, $2 = this;
        r2 = Number(r2);
        var l2 = O2.p(h5), y4 = function(t3) {
          var e3 = w2($2);
          return O2.w(e3.date(e3.date() + Math.round(t3 * r2)), $2);
        };
        if (l2 === f)
          return this.set(f, this.$M + r2);
        if (l2 === c2)
          return this.set(c2, this.$y + r2);
        if (l2 === a3)
          return y4(1);
        if (l2 === o)
          return y4(7);
        var M5 = (d4 = {}, d4[s3] = e2, d4[u2] = n, d4[i2] = t2, d4)[l2] || 1, m5 = this.$d.getTime() + r2 * M5;
        return O2.w(m5, this);
      }, m4.subtract = function(t3, e3) {
        return this.add(-1 * t3, e3);
      }, m4.format = function(t3) {
        var e3 = this, n2 = this.$locale();
        if (!this.isValid())
          return n2.invalidDate || $;
        var r2 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = O2.z(this), s4 = this.$H, u3 = this.$m, a4 = this.$M, o2 = n2.weekdays, f2 = n2.months, h5 = function(t4, n3, i4, s5) {
          return t4 && (t4[n3] || t4(e3, r2)) || i4[n3].slice(0, s5);
        }, c3 = function(t4) {
          return O2.s(s4 % 12 || 12, t4, "0");
        }, d4 = n2.meridiem || function(t4, e4, n3) {
          var r3 = t4 < 12 ? "AM" : "PM";
          return n3 ? r3.toLowerCase() : r3;
        }, l2 = { YY: String(this.$y).slice(-2), YYYY: this.$y, M: a4 + 1, MM: O2.s(a4 + 1, 2, "0"), MMM: h5(n2.monthsShort, a4, f2, 3), MMMM: h5(f2, a4), D: this.$D, DD: O2.s(this.$D, 2, "0"), d: String(this.$W), dd: h5(n2.weekdaysMin, this.$W, o2, 2), ddd: h5(n2.weekdaysShort, this.$W, o2, 3), dddd: o2[this.$W], H: String(s4), HH: O2.s(s4, 2, "0"), h: c3(1), hh: c3(2), a: d4(s4, u3, true), A: d4(s4, u3, false), m: String(u3), mm: O2.s(u3, 2, "0"), s: String(this.$s), ss: O2.s(this.$s, 2, "0"), SSS: O2.s(this.$ms, 3, "0"), Z: i3 };
        return r2.replace(y3, function(t4, e4) {
          return e4 || l2[t4] || i3.replace(":", "");
        });
      }, m4.utcOffset = function() {
        return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
      }, m4.diff = function(r2, d4, $2) {
        var l2, y4 = O2.p(d4), M5 = w2(r2), m5 = (M5.utcOffset() - this.utcOffset()) * e2, g2 = this - M5, v2 = O2.m(this, M5);
        return v2 = (l2 = {}, l2[c2] = v2 / 12, l2[f] = v2, l2[h4] = v2 / 3, l2[o] = (g2 - m5) / 6048e5, l2[a3] = (g2 - m5) / 864e5, l2[u2] = g2 / n, l2[s3] = g2 / e2, l2[i2] = g2 / t2, l2)[y4] || g2, $2 ? v2 : O2.a(v2);
      }, m4.daysInMonth = function() {
        return this.endOf(f).$D;
      }, m4.$locale = function() {
        return D2[this.$L];
      }, m4.locale = function(t3, e3) {
        if (!t3)
          return this.$L;
        var n2 = this.clone(), r2 = S3(t3, e3, true);
        return r2 && (n2.$L = r2), n2;
      }, m4.clone = function() {
        return O2.w(this.$d, this);
      }, m4.toDate = function() {
        return new Date(this.valueOf());
      }, m4.toJSON = function() {
        return this.isValid() ? this.toISOString() : null;
      }, m4.toISOString = function() {
        return this.$d.toISOString();
      }, m4.toString = function() {
        return this.$d.toUTCString();
      }, M4;
    }(), T2 = _2.prototype;
    return w2.prototype = T2, [["$ms", r], ["$s", i2], ["$m", s3], ["$H", u2], ["$W", a3], ["$M", f], ["$y", c2], ["$D", d3]].forEach(function(t3) {
      T2[t3[1]] = function(e3) {
        return this.$g(e3, t3[0], t3[1]);
      };
    }), w2.extend = function(t3, e3) {
      return t3.$i || (t3(e3, _2, w2), t3.$i = true), w2;
    }, w2.locale = S3, w2.isDayjs = p, w2.unix = function(t3) {
      return w2(1e3 * t3);
    }, w2.en = D2[v], w2.Ls = D2, w2.p = {}, w2;
  });
})(dayjs_min);
var dayjs = dayjs_min.exports;
var localeData$1 = { exports: {} };
(function(module2, exports2) {
  !function(n, e2) {
    module2.exports = e2();
  }(commonjsGlobal, function() {
    return function(n, e2, t2) {
      var r = e2.prototype, o = function(n2) {
        return n2 && (n2.indexOf ? n2 : n2.s);
      }, u2 = function(n2, e3, t3, r2, u3) {
        var i3 = n2.name ? n2 : n2.$locale(), a4 = o(i3[e3]), s4 = o(i3[t3]), f = a4 || s4.map(function(n3) {
          return n3.slice(0, r2);
        });
        if (!u3)
          return f;
        var d3 = i3.weekStart;
        return f.map(function(n3, e4) {
          return f[(e4 + (d3 || 0)) % 7];
        });
      }, i2 = function() {
        return t2.Ls[t2.locale()];
      }, a3 = function(n2, e3) {
        return n2.formats[e3] || function(n3) {
          return n3.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function(n4, e4, t3) {
            return e4 || t3.slice(1);
          });
        }(n2.formats[e3.toUpperCase()]);
      }, s3 = function() {
        var n2 = this;
        return { months: function(e3) {
          return e3 ? e3.format("MMMM") : u2(n2, "months");
        }, monthsShort: function(e3) {
          return e3 ? e3.format("MMM") : u2(n2, "monthsShort", "months", 3);
        }, firstDayOfWeek: function() {
          return n2.$locale().weekStart || 0;
        }, weekdays: function(e3) {
          return e3 ? e3.format("dddd") : u2(n2, "weekdays");
        }, weekdaysMin: function(e3) {
          return e3 ? e3.format("dd") : u2(n2, "weekdaysMin", "weekdays", 2);
        }, weekdaysShort: function(e3) {
          return e3 ? e3.format("ddd") : u2(n2, "weekdaysShort", "weekdays", 3);
        }, longDateFormat: function(e3) {
          return a3(n2.$locale(), e3);
        }, meridiem: this.$locale().meridiem, ordinal: this.$locale().ordinal };
      };
      r.localeData = function() {
        return s3.bind(this)();
      }, t2.localeData = function() {
        var n2 = i2();
        return { firstDayOfWeek: function() {
          return n2.weekStart || 0;
        }, weekdays: function() {
          return t2.weekdays();
        }, weekdaysShort: function() {
          return t2.weekdaysShort();
        }, weekdaysMin: function() {
          return t2.weekdaysMin();
        }, months: function() {
          return t2.months();
        }, monthsShort: function() {
          return t2.monthsShort();
        }, longDateFormat: function(e3) {
          return a3(n2, e3);
        }, meridiem: n2.meridiem, ordinal: n2.ordinal };
      }, t2.months = function() {
        return u2(i2(), "months");
      }, t2.monthsShort = function() {
        return u2(i2(), "monthsShort", "months", 3);
      }, t2.weekdays = function(n2) {
        return u2(i2(), "weekdays", null, null, n2);
      }, t2.weekdaysShort = function(n2) {
        return u2(i2(), "weekdaysShort", "weekdays", 3, n2);
      }, t2.weekdaysMin = function(n2) {
        return u2(i2(), "weekdaysMin", "weekdays", 2, n2);
      };
    };
  });
})(localeData$1);
var localeData = localeData$1.exports;
var customParseFormat$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    var e2 = { LTS: "h:mm:ss A", LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, t2 = /(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g, n = /\d\d/, r = /\d\d?/, i2 = /\d*[^-_:/,()\s\d]+/, o = {}, s3 = function(e3) {
      return (e3 = +e3) + (e3 > 68 ? 1900 : 2e3);
    };
    var a3 = function(e3) {
      return function(t3) {
        this[e3] = +t3;
      };
    }, f = [/[+-]\d\d:?(\d\d)?|Z/, function(e3) {
      (this.zone || (this.zone = {})).offset = function(e4) {
        if (!e4)
          return 0;
        if ("Z" === e4)
          return 0;
        var t3 = e4.match(/([+-]|\d\d)/g), n2 = 60 * t3[1] + (+t3[2] || 0);
        return 0 === n2 ? 0 : "+" === t3[0] ? -n2 : n2;
      }(e3);
    }], h4 = function(e3) {
      var t3 = o[e3];
      return t3 && (t3.indexOf ? t3 : t3.s.concat(t3.f));
    }, u2 = function(e3, t3) {
      var n2, r2 = o.meridiem;
      if (r2) {
        for (var i3 = 1; i3 <= 24; i3 += 1)
          if (e3.indexOf(r2(i3, 0, t3)) > -1) {
            n2 = i3 > 12;
            break;
          }
      } else
        n2 = e3 === (t3 ? "pm" : "PM");
      return n2;
    }, d3 = { A: [i2, function(e3) {
      this.afternoon = u2(e3, false);
    }], a: [i2, function(e3) {
      this.afternoon = u2(e3, true);
    }], S: [/\d/, function(e3) {
      this.milliseconds = 100 * +e3;
    }], SS: [n, function(e3) {
      this.milliseconds = 10 * +e3;
    }], SSS: [/\d{3}/, function(e3) {
      this.milliseconds = +e3;
    }], s: [r, a3("seconds")], ss: [r, a3("seconds")], m: [r, a3("minutes")], mm: [r, a3("minutes")], H: [r, a3("hours")], h: [r, a3("hours")], HH: [r, a3("hours")], hh: [r, a3("hours")], D: [r, a3("day")], DD: [n, a3("day")], Do: [i2, function(e3) {
      var t3 = o.ordinal, n2 = e3.match(/\d+/);
      if (this.day = n2[0], t3)
        for (var r2 = 1; r2 <= 31; r2 += 1)
          t3(r2).replace(/\[|\]/g, "") === e3 && (this.day = r2);
    }], M: [r, a3("month")], MM: [n, a3("month")], MMM: [i2, function(e3) {
      var t3 = h4("months"), n2 = (h4("monthsShort") || t3.map(function(e4) {
        return e4.slice(0, 3);
      })).indexOf(e3) + 1;
      if (n2 < 1)
        throw new Error();
      this.month = n2 % 12 || n2;
    }], MMMM: [i2, function(e3) {
      var t3 = h4("months").indexOf(e3) + 1;
      if (t3 < 1)
        throw new Error();
      this.month = t3 % 12 || t3;
    }], Y: [/[+-]?\d+/, a3("year")], YY: [n, function(e3) {
      this.year = s3(e3);
    }], YYYY: [/\d{4}/, a3("year")], Z: f, ZZ: f };
    function c2(n2) {
      var r2, i3;
      r2 = n2, i3 = o && o.formats;
      for (var s4 = (n2 = r2.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function(t3, n3, r3) {
        var o2 = r3 && r3.toUpperCase();
        return n3 || i3[r3] || e2[r3] || i3[o2].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function(e3, t4, n4) {
          return t4 || n4.slice(1);
        });
      })).match(t2), a4 = s4.length, f2 = 0; f2 < a4; f2 += 1) {
        var h5 = s4[f2], u3 = d3[h5], c3 = u3 && u3[0], l = u3 && u3[1];
        s4[f2] = l ? { regex: c3, parser: l } : h5.replace(/^\[|\]$/g, "");
      }
      return function(e3) {
        for (var t3 = {}, n3 = 0, r3 = 0; n3 < a4; n3 += 1) {
          var i4 = s4[n3];
          if ("string" == typeof i4)
            r3 += i4.length;
          else {
            var o2 = i4.regex, f3 = i4.parser, h6 = e3.slice(r3), u4 = o2.exec(h6)[0];
            f3.call(t3, u4), e3 = e3.replace(u4, "");
          }
        }
        return function(e4) {
          var t4 = e4.afternoon;
          if (void 0 !== t4) {
            var n4 = e4.hours;
            t4 ? n4 < 12 && (e4.hours += 12) : 12 === n4 && (e4.hours = 0), delete e4.afternoon;
          }
        }(t3), t3;
      };
    }
    return function(e3, t3, n2) {
      n2.p.customParseFormat = true, e3 && e3.parseTwoDigitYear && (s3 = e3.parseTwoDigitYear);
      var r2 = t3.prototype, i3 = r2.parse;
      r2.parse = function(e4) {
        var t4 = e4.date, r3 = e4.utc, s4 = e4.args;
        this.$u = r3;
        var a4 = s4[1];
        if ("string" == typeof a4) {
          var f2 = true === s4[2], h5 = true === s4[3], u3 = f2 || h5, d4 = s4[2];
          h5 && (d4 = s4[2]), o = this.$locale(), !f2 && d4 && (o = n2.Ls[d4]), this.$d = function(e5, t5, n3) {
            try {
              if (["x", "X"].indexOf(t5) > -1)
                return new Date(("X" === t5 ? 1e3 : 1) * e5);
              var r4 = c2(t5)(e5), i4 = r4.year, o2 = r4.month, s5 = r4.day, a5 = r4.hours, f3 = r4.minutes, h6 = r4.seconds, u4 = r4.milliseconds, d5 = r4.zone, l2 = new Date(), m4 = s5 || (i4 || o2 ? 1 : l2.getDate()), M4 = i4 || l2.getFullYear(), Y2 = 0;
              i4 && !o2 || (Y2 = o2 > 0 ? o2 - 1 : l2.getMonth());
              var p = a5 || 0, v = f3 || 0, D2 = h6 || 0, g = u4 || 0;
              return d5 ? new Date(Date.UTC(M4, Y2, m4, p, v, D2, g + 60 * d5.offset * 1e3)) : n3 ? new Date(Date.UTC(M4, Y2, m4, p, v, D2, g)) : new Date(M4, Y2, m4, p, v, D2, g);
            } catch (e6) {
              return new Date("");
            }
          }(t4, a4, r3), this.init(), d4 && true !== d4 && (this.$L = this.locale(d4).$L), u3 && t4 != this.format(a4) && (this.$d = new Date("")), o = {};
        } else if (a4 instanceof Array)
          for (var l = a4.length, m3 = 1; m3 <= l; m3 += 1) {
            s4[1] = a4[m3 - 1];
            var M3 = n2.apply(this, s4);
            if (M3.isValid()) {
              this.$d = M3.$d, this.$L = M3.$L, this.init();
              break;
            }
            m3 === l && (this.$d = new Date(""));
          }
        else
          i3.call(this, e4);
      };
    };
  });
})(customParseFormat$1);
var customParseFormat = customParseFormat$1.exports;
var timeUnits = ["hours", "minutes", "seconds"];
var DEFAULT_FORMATS_TIME = "HH:mm:ss";
var DEFAULT_FORMATS_DATE = "YYYY-MM-DD";
var DEFAULT_FORMATS_DATEPICKER = {
  date: DEFAULT_FORMATS_DATE,
  dates: DEFAULT_FORMATS_DATE,
  week: "gggg[w]ww",
  year: "YYYY",
  month: "YYYY-MM",
  datetime: `${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`,
  monthrange: "YYYY-MM",
  daterange: DEFAULT_FORMATS_DATE,
  datetimerange: `${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`
};
var buildTimeList = (value, bound) => {
  return [
    value > 0 ? value - 1 : void 0,
    value,
    value < bound ? value + 1 : void 0
  ];
};
var rangeArr = (n) => Array.from(Array.from({ length: n }).keys());
var extractDateFormat = (format2) => {
  return format2.replace(/\W?m{1,2}|\W?ZZ/g, "").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi, "").trim();
};
var extractTimeFormat = (format2) => {
  return format2.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g, "").trim();
};
var dateEquals = function(a3, b2) {
  const aIsDate = isDate$1(a3);
  const bIsDate = isDate$1(b2);
  if (aIsDate && bIsDate) {
    return a3.getTime() === b2.getTime();
  }
  if (!aIsDate && !bIsDate) {
    return a3 === b2;
  }
  return false;
};
var valueEquals = function(a3, b2) {
  const aIsArray = isArray(a3);
  const bIsArray = isArray(b2);
  if (aIsArray && bIsArray) {
    if (a3.length !== b2.length) {
      return false;
    }
    return a3.every((item, index) => dateEquals(item, b2[index]));
  }
  if (!aIsArray && !bIsArray) {
    return dateEquals(a3, b2);
  }
  return false;
};
var parseDate$1 = function(date2, format2, lang) {
  const day = isEmpty(format2) || format2 === "x" ? dayjs(date2).locale(lang) : dayjs(date2, format2).locale(lang);
  return day.isValid() ? day : void 0;
};
var formatter = function(date2, format2, lang) {
  if (isEmpty(format2))
    return date2;
  if (format2 === "x")
    return +date2;
  return dayjs(date2).locale(lang).format(format2);
};
var makeList = (total, method) => {
  var _a2;
  const arr = [];
  const disabledArr = method == null ? void 0 : method();
  for (let i2 = 0; i2 < total; i2++) {
    arr.push((_a2 = disabledArr == null ? void 0 : disabledArr.includes(i2)) != null ? _a2 : false);
  }
  return arr;
};
var disabledTimeListsProps = buildProps({
  disabledHours: {
    type: definePropType(Function)
  },
  disabledMinutes: {
    type: definePropType(Function)
  },
  disabledSeconds: {
    type: definePropType(Function)
  }
});
var timePanelSharedProps = buildProps({
  visible: Boolean,
  actualVisible: {
    type: Boolean,
    default: void 0
  },
  format: {
    type: String,
    default: ""
  }
});
var timePickerDefaultProps = buildProps({
  id: {
    type: definePropType([Array, String])
  },
  name: {
    type: definePropType([Array, String]),
    default: ""
  },
  popperClass: {
    type: String,
    default: ""
  },
  format: String,
  valueFormat: String,
  type: {
    type: String,
    default: ""
  },
  clearable: {
    type: Boolean,
    default: true
  },
  clearIcon: {
    type: definePropType([String, Object]),
    default: circle_close_default
  },
  editable: {
    type: Boolean,
    default: true
  },
  prefixIcon: {
    type: definePropType([String, Object]),
    default: ""
  },
  size: useSizeProp,
  readonly: {
    type: Boolean,
    default: false
  },
  disabled: {
    type: Boolean,
    default: false
  },
  placeholder: {
    type: String,
    default: ""
  },
  popperOptions: {
    type: definePropType(Object),
    default: () => ({})
  },
  modelValue: {
    type: definePropType([Date, Array, String, Number]),
    default: ""
  },
  rangeSeparator: {
    type: String,
    default: "-"
  },
  startPlaceholder: String,
  endPlaceholder: String,
  defaultValue: {
    type: definePropType([Date, Array])
  },
  defaultTime: {
    type: definePropType([Date, Array])
  },
  isRange: {
    type: Boolean,
    default: false
  },
  ...disabledTimeListsProps,
  disabledDate: {
    type: Function
  },
  cellClassName: {
    type: Function
  },
  shortcuts: {
    type: Array,
    default: () => []
  },
  arrowControl: {
    type: Boolean,
    default: false
  },
  label: {
    type: String,
    default: void 0
  },
  tabindex: {
    type: definePropType([String, Number]),
    default: 0
  },
  validateEvent: {
    type: Boolean,
    default: true
  },
  unlinkPanels: Boolean
});
var _hoisted_1$P = ["id", "name", "placeholder", "value", "disabled", "readonly"];
var _hoisted_2$C = ["id", "name", "placeholder", "value", "disabled", "readonly"];
var __default__$b = {
  name: "Picker"
};
var _sfc_main$17 = defineComponent({
  ...__default__$b,
  props: timePickerDefaultProps,
  emits: [
    "update:modelValue",
    "change",
    "focus",
    "blur",
    "calendar-change",
    "panel-change",
    "visible-change",
    "keydown"
  ],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const { lang } = useLocale();
    const nsDate = useNamespace("date");
    const nsInput = useNamespace("input");
    const nsRange = useNamespace("range");
    const { form, formItem } = useFormItem();
    const elPopperOptions = inject("ElPopperOptions", {});
    const refPopper = ref();
    const inputRef = ref();
    const pickerVisible = ref(false);
    const pickerActualVisible = ref(false);
    const valueOnOpen = ref(null);
    let hasJustTabExitedInput = false;
    let ignoreFocusEvent = false;
    watch(pickerVisible, (val) => {
      if (!val) {
        userInput.value = null;
        nextTick(() => {
          emitChange(props2.modelValue);
        });
      } else {
        valueOnOpen.value = props2.modelValue;
      }
    });
    const emitChange = (val, isClear) => {
      if (isClear || !valueEquals(val, valueOnOpen.value)) {
        emit("change", val);
        props2.validateEvent && (formItem == null ? void 0 : formItem.validate("change").catch((err) => debugWarn()));
      }
    };
    const emitInput = (input2) => {
      if (!valueEquals(props2.modelValue, input2)) {
        let formatted;
        if (isArray(input2)) {
          formatted = input2.map((item) => formatter(item, props2.valueFormat, lang.value));
        } else if (input2) {
          formatted = formatter(input2, props2.valueFormat, lang.value);
        }
        emit("update:modelValue", input2 ? formatted : input2, lang.value);
      }
    };
    const emitKeydown = (e2) => {
      emit("keydown", e2);
    };
    const refInput = computed(() => {
      if (inputRef.value) {
        const _r2 = isRangeInput.value ? inputRef.value : inputRef.value.$el;
        return Array.from(_r2.querySelectorAll("input"));
      }
      return [];
    });
    const setSelectionRange = (start, end, pos) => {
      const _inputs = refInput.value;
      if (!_inputs.length)
        return;
      if (!pos || pos === "min") {
        _inputs[0].setSelectionRange(start, end);
        _inputs[0].focus();
      } else if (pos === "max") {
        _inputs[1].setSelectionRange(start, end);
        _inputs[1].focus();
      }
    };
    const focusOnInputBox = () => {
      focus(true, true);
      nextTick(() => {
        ignoreFocusEvent = false;
      });
    };
    const onPick = (date2 = "", visible = false) => {
      if (!visible) {
        focusOnInputBox();
      }
      pickerVisible.value = visible;
      let result;
      if (isArray(date2)) {
        result = date2.map((_2) => _2.toDate());
      } else {
        result = date2 ? date2.toDate() : date2;
      }
      userInput.value = null;
      emitInput(result);
    };
    const onBeforeShow = () => {
      pickerActualVisible.value = true;
    };
    const onShow = () => {
      emit("visible-change", true);
    };
    const onKeydownPopperContent = (event) => {
      if ((event == null ? void 0 : event.key) === EVENT_CODE.esc) {
        focus(true, true);
      }
    };
    const onHide = () => {
      pickerActualVisible.value = false;
      ignoreFocusEvent = false;
      emit("visible-change", false);
    };
    const handleOpen = () => {
      pickerVisible.value = true;
    };
    const handleClose = () => {
      pickerVisible.value = false;
    };
    const focus = (focusStartInput = true, isIgnoreFocusEvent = false) => {
      ignoreFocusEvent = isIgnoreFocusEvent;
      const [leftInput, rightInput] = unref(refInput);
      let input2 = leftInput;
      if (!focusStartInput && isRangeInput.value) {
        input2 = rightInput;
      }
      if (input2) {
        input2.focus();
      }
    };
    const handleFocusInput = (e2) => {
      if (props2.readonly || pickerDisabled.value || pickerVisible.value || ignoreFocusEvent) {
        return;
      }
      pickerVisible.value = true;
      emit("focus", e2);
    };
    let currentHandleBlurDeferCallback = void 0;
    const handleBlurInput = (e2) => {
      const handleBlurDefer = async () => {
        setTimeout(() => {
          var _a2;
          if (currentHandleBlurDeferCallback === handleBlurDefer) {
            if (!(((_a2 = refPopper.value) == null ? void 0 : _a2.isFocusInsideContent()) && !hasJustTabExitedInput) && refInput.value.filter((input2) => {
              return input2.contains(document.activeElement);
            }).length === 0) {
              handleChange();
              pickerVisible.value = false;
              emit("blur", e2);
              props2.validateEvent && (formItem == null ? void 0 : formItem.validate("blur").catch((err) => debugWarn()));
            }
            hasJustTabExitedInput = false;
          }
        }, 0);
      };
      currentHandleBlurDeferCallback = handleBlurDefer;
      handleBlurDefer();
    };
    const pickerDisabled = computed(() => {
      return props2.disabled || (form == null ? void 0 : form.disabled);
    });
    const parsedValue2 = computed(() => {
      let dayOrDays;
      if (valueIsEmpty.value) {
        if (pickerOptions.value.getDefaultValue) {
          dayOrDays = pickerOptions.value.getDefaultValue();
        }
      } else {
        if (isArray(props2.modelValue)) {
          dayOrDays = props2.modelValue.map((d3) => parseDate$1(d3, props2.valueFormat, lang.value));
        } else {
          dayOrDays = parseDate$1(props2.modelValue, props2.valueFormat, lang.value);
        }
      }
      if (pickerOptions.value.getRangeAvailableTime) {
        const availableResult = pickerOptions.value.getRangeAvailableTime(dayOrDays);
        if (!isEqual$1(availableResult, dayOrDays)) {
          dayOrDays = availableResult;
          emitInput(isArray(dayOrDays) ? dayOrDays.map((_2) => _2.toDate()) : dayOrDays.toDate());
        }
      }
      if (isArray(dayOrDays) && dayOrDays.some((day) => !day)) {
        dayOrDays = [];
      }
      return dayOrDays;
    });
    const displayValue = computed(() => {
      if (!pickerOptions.value.panelReady)
        return "";
      const formattedValue = formatDayjsToString(parsedValue2.value);
      if (isArray(userInput.value)) {
        return [
          userInput.value[0] || formattedValue && formattedValue[0] || "",
          userInput.value[1] || formattedValue && formattedValue[1] || ""
        ];
      } else if (userInput.value !== null) {
        return userInput.value;
      }
      if (!isTimePicker.value && valueIsEmpty.value)
        return "";
      if (!pickerVisible.value && valueIsEmpty.value)
        return "";
      if (formattedValue) {
        return isDatesPicker.value ? formattedValue.join(", ") : formattedValue;
      }
      return "";
    });
    const isTimeLikePicker = computed(() => props2.type.includes("time"));
    const isTimePicker = computed(() => props2.type.startsWith("time"));
    const isDatesPicker = computed(() => props2.type === "dates");
    const triggerIcon = computed(() => props2.prefixIcon || (isTimeLikePicker.value ? clock_default : calendar_default));
    const showClose = ref(false);
    const onClearIconClick = (event) => {
      if (props2.readonly || pickerDisabled.value)
        return;
      if (showClose.value) {
        event.stopPropagation();
        focusOnInputBox();
        emitInput(null);
        emitChange(null, true);
        showClose.value = false;
        pickerVisible.value = false;
        pickerOptions.value.handleClear && pickerOptions.value.handleClear();
      }
    };
    const valueIsEmpty = computed(() => {
      const { modelValue } = props2;
      return !modelValue || isArray(modelValue) && !modelValue.filter(Boolean).length;
    });
    const onMouseDownInput = async (event) => {
      var _a2;
      if (props2.readonly || pickerDisabled.value)
        return;
      if (((_a2 = event.target) == null ? void 0 : _a2.tagName) !== "INPUT" || refInput.value.includes(document.activeElement)) {
        pickerVisible.value = true;
      }
    };
    const onMouseEnter = () => {
      if (props2.readonly || pickerDisabled.value)
        return;
      if (!valueIsEmpty.value && props2.clearable) {
        showClose.value = true;
      }
    };
    const onMouseLeave = () => {
      showClose.value = false;
    };
    const onTouchStartInput = (event) => {
      var _a2;
      if (((_a2 = event.touches[0].target) == null ? void 0 : _a2.tagName) !== "INPUT" || refInput.value.includes(document.activeElement)) {
        pickerVisible.value = true;
      }
    };
    const isRangeInput = computed(() => {
      return props2.type.includes("range");
    });
    const pickerSize = useSize();
    const popperEl = computed(() => {
      var _a2, _b;
      return (_b = (_a2 = unref(refPopper)) == null ? void 0 : _a2.popperRef) == null ? void 0 : _b.contentRef;
    });
    const actualInputRef = computed(() => {
      var _a2;
      if (unref(isRangeInput)) {
        return unref(inputRef);
      }
      return (_a2 = unref(inputRef)) == null ? void 0 : _a2.$el;
    });
    onClickOutside(actualInputRef, (e2) => {
      const unrefedPopperEl = unref(popperEl);
      const inputEl = unref(actualInputRef);
      if (unrefedPopperEl && (e2.target === unrefedPopperEl || e2.composedPath().includes(unrefedPopperEl)) || e2.target === inputEl || e2.composedPath().includes(inputEl))
        return;
      pickerVisible.value = false;
    });
    const userInput = ref(null);
    const handleChange = () => {
      if (userInput.value) {
        const value = parseUserInputToDayjs(displayValue.value);
        if (value) {
          if (isValidValue(value)) {
            emitInput(isArray(value) ? value.map((_2) => _2.toDate()) : value.toDate());
            userInput.value = null;
          }
        }
      }
      if (userInput.value === "") {
        emitInput(null);
        emitChange(null);
        userInput.value = null;
      }
    };
    const parseUserInputToDayjs = (value) => {
      if (!value)
        return null;
      return pickerOptions.value.parseUserInput(value);
    };
    const formatDayjsToString = (value) => {
      if (!value)
        return null;
      return pickerOptions.value.formatToString(value);
    };
    const isValidValue = (value) => {
      return pickerOptions.value.isValidValue(value);
    };
    const handleKeydownInput = async (event) => {
      if (props2.readonly || pickerDisabled.value)
        return;
      const { code } = event;
      emitKeydown(event);
      if (code === EVENT_CODE.esc) {
        if (pickerVisible.value === true) {
          pickerVisible.value = false;
          event.preventDefault();
          event.stopPropagation();
        }
        return;
      }
      if (code === EVENT_CODE.down) {
        if (pickerOptions.value.handleFocusPicker) {
          event.preventDefault();
          event.stopPropagation();
        }
        if (pickerVisible.value === false) {
          pickerVisible.value = true;
          await nextTick();
        }
        if (pickerOptions.value.handleFocusPicker) {
          pickerOptions.value.handleFocusPicker();
          return;
        }
      }
      if (code === EVENT_CODE.tab) {
        hasJustTabExitedInput = true;
        return;
      }
      if (code === EVENT_CODE.enter || code === EVENT_CODE.numpadEnter) {
        if (userInput.value === null || userInput.value === "" || isValidValue(parseUserInputToDayjs(displayValue.value))) {
          handleChange();
          pickerVisible.value = false;
        }
        event.stopPropagation();
        return;
      }
      if (userInput.value) {
        event.stopPropagation();
        return;
      }
      if (pickerOptions.value.handleKeydownInput) {
        pickerOptions.value.handleKeydownInput(event);
      }
    };
    const onUserInput = (e2) => {
      userInput.value = e2;
      if (!pickerVisible.value) {
        pickerVisible.value = true;
      }
    };
    const handleStartInput = (event) => {
      const target = event.target;
      if (userInput.value) {
        userInput.value = [target.value, userInput.value[1]];
      } else {
        userInput.value = [target.value, null];
      }
    };
    const handleEndInput = (event) => {
      const target = event.target;
      if (userInput.value) {
        userInput.value = [userInput.value[0], target.value];
      } else {
        userInput.value = [null, target.value];
      }
    };
    const handleStartChange = () => {
      var _a2;
      const values2 = userInput.value;
      const value = parseUserInputToDayjs(values2 && values2[0]);
      const parsedVal = unref(parsedValue2);
      if (value && value.isValid()) {
        userInput.value = [
          formatDayjsToString(value),
          ((_a2 = displayValue.value) == null ? void 0 : _a2[1]) || null
        ];
        const newValue = [value, parsedVal && (parsedVal[1] || null)];
        if (isValidValue(newValue)) {
          emitInput(newValue);
          userInput.value = null;
        }
      }
    };
    const handleEndChange = () => {
      var _a2;
      const values2 = unref(userInput);
      const value = parseUserInputToDayjs(values2 && values2[1]);
      const parsedVal = unref(parsedValue2);
      if (value && value.isValid()) {
        userInput.value = [
          ((_a2 = unref(displayValue)) == null ? void 0 : _a2[0]) || null,
          formatDayjsToString(value)
        ];
        const newValue = [parsedVal && parsedVal[0], value];
        if (isValidValue(newValue)) {
          emitInput(newValue);
          userInput.value = null;
        }
      }
    };
    const pickerOptions = ref({});
    const onSetPickerOption = (e2) => {
      pickerOptions.value[e2[0]] = e2[1];
      pickerOptions.value.panelReady = true;
    };
    const onCalendarChange = (e2) => {
      emit("calendar-change", e2);
    };
    const onPanelChange = (value, mode, view) => {
      emit("panel-change", value, mode, view);
    };
    provide("EP_PICKER_BASE", {
      props: props2
    });
    expose({
      focus,
      handleFocusInput,
      handleBlurInput,
      handleOpen,
      handleClose,
      onPick
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(ElTooltip), mergeProps({
        ref_key: "refPopper",
        ref: refPopper,
        visible: pickerVisible.value,
        effect: "light",
        pure: "",
        trigger: "click"
      }, _ctx.$attrs, {
        role: "dialog",
        teleported: "",
        transition: `${unref(nsDate).namespace.value}-zoom-in-top`,
        "popper-class": [`${unref(nsDate).namespace.value}-picker__popper`, _ctx.popperClass],
        "popper-options": unref(elPopperOptions),
        "fallback-placements": ["bottom", "top", "right", "left"],
        "gpu-acceleration": false,
        "stop-popper-mouse-event": false,
        "hide-after": 0,
        persistent: "",
        onBeforeShow,
        onShow,
        onHide
      }), {
        default: withCtx(() => [
          !unref(isRangeInput) ? (openBlock(), createBlock(unref(ElInput), {
            key: 0,
            id: _ctx.id,
            ref_key: "inputRef",
            ref: inputRef,
            "container-role": "combobox",
            "model-value": unref(displayValue),
            name: _ctx.name,
            size: unref(pickerSize),
            disabled: unref(pickerDisabled),
            placeholder: _ctx.placeholder,
            class: normalizeClass([unref(nsDate).b("editor"), unref(nsDate).bm("editor", _ctx.type), _ctx.$attrs.class]),
            style: normalizeStyle(_ctx.$attrs.style),
            readonly: !_ctx.editable || _ctx.readonly || unref(isDatesPicker) || _ctx.type === "week",
            label: _ctx.label,
            tabindex: _ctx.tabindex,
            "validate-event": false,
            onInput: onUserInput,
            onFocus: handleFocusInput,
            onBlur: handleBlurInput,
            onKeydown: handleKeydownInput,
            onChange: handleChange,
            onMousedown: onMouseDownInput,
            onMouseenter: onMouseEnter,
            onMouseleave: onMouseLeave,
            onTouchstart: onTouchStartInput,
            onClick: _cache[0] || (_cache[0] = withModifiers(() => {
            }, ["stop"]))
          }, {
            prefix: withCtx(() => [
              unref(triggerIcon) ? (openBlock(), createBlock(unref(ElIcon), {
                key: 0,
                class: normalizeClass(unref(nsInput).e("icon")),
                onMousedown: withModifiers(onMouseDownInput, ["prevent"]),
                onTouchstart: onTouchStartInput
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(unref(triggerIcon))))
                ]),
                _: 1
              }, 8, ["class", "onMousedown"])) : createCommentVNode("v-if", true)
            ]),
            suffix: withCtx(() => [
              showClose.value && _ctx.clearIcon ? (openBlock(), createBlock(unref(ElIcon), {
                key: 0,
                class: normalizeClass(`${unref(nsInput).e("icon")} clear-icon`),
                onClick: withModifiers(onClearIconClick, ["stop"])
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(_ctx.clearIcon)))
                ]),
                _: 1
              }, 8, ["class", "onClick"])) : createCommentVNode("v-if", true)
            ]),
            _: 1
          }, 8, ["id", "model-value", "name", "size", "disabled", "placeholder", "class", "style", "readonly", "label", "tabindex", "onKeydown"])) : (openBlock(), createElementBlock("div", {
            key: 1,
            ref_key: "inputRef",
            ref: inputRef,
            class: normalizeClass([
              unref(nsDate).b("editor"),
              unref(nsDate).bm("editor", _ctx.type),
              unref(nsInput).e("wrapper"),
              unref(nsDate).is("disabled", unref(pickerDisabled)),
              unref(nsDate).is("active", pickerVisible.value),
              unref(nsRange).b("editor"),
              unref(pickerSize) ? unref(nsRange).bm("editor", unref(pickerSize)) : "",
              _ctx.$attrs.class
            ]),
            style: normalizeStyle(_ctx.$attrs.style),
            onClick: handleFocusInput,
            onMouseenter: onMouseEnter,
            onMouseleave: onMouseLeave,
            onTouchstart: onTouchStartInput,
            onKeydown: handleKeydownInput
          }, [
            unref(triggerIcon) ? (openBlock(), createBlock(unref(ElIcon), {
              key: 0,
              class: normalizeClass([unref(nsInput).e("icon"), unref(nsRange).e("icon")]),
              onMousedown: withModifiers(onMouseDownInput, ["prevent"]),
              onTouchstart: onTouchStartInput
            }, {
              default: withCtx(() => [
                (openBlock(), createBlock(resolveDynamicComponent(unref(triggerIcon))))
              ]),
              _: 1
            }, 8, ["class", "onMousedown"])) : createCommentVNode("v-if", true),
            createBaseVNode("input", {
              id: _ctx.id && _ctx.id[0],
              autocomplete: "off",
              name: _ctx.name && _ctx.name[0],
              placeholder: _ctx.startPlaceholder,
              value: unref(displayValue) && unref(displayValue)[0],
              disabled: unref(pickerDisabled),
              readonly: !_ctx.editable || _ctx.readonly,
              class: normalizeClass(unref(nsRange).b("input")),
              onMousedown: onMouseDownInput,
              onInput: handleStartInput,
              onChange: handleStartChange,
              onFocus: handleFocusInput,
              onBlur: handleBlurInput
            }, null, 42, _hoisted_1$P),
            renderSlot(_ctx.$slots, "range-separator", {}, () => [
              createBaseVNode("span", {
                class: normalizeClass(unref(nsRange).b("separator"))
              }, toDisplayString(_ctx.rangeSeparator), 3)
            ]),
            createBaseVNode("input", {
              id: _ctx.id && _ctx.id[1],
              autocomplete: "off",
              name: _ctx.name && _ctx.name[1],
              placeholder: _ctx.endPlaceholder,
              value: unref(displayValue) && unref(displayValue)[1],
              disabled: unref(pickerDisabled),
              readonly: !_ctx.editable || _ctx.readonly,
              class: normalizeClass(unref(nsRange).b("input")),
              onMousedown: onMouseDownInput,
              onFocus: handleFocusInput,
              onBlur: handleBlurInput,
              onInput: handleEndInput,
              onChange: handleEndChange
            }, null, 42, _hoisted_2$C),
            _ctx.clearIcon ? (openBlock(), createBlock(unref(ElIcon), {
              key: 1,
              class: normalizeClass([
                unref(nsInput).e("icon"),
                unref(nsRange).e("close-icon"),
                {
                  [unref(nsRange).e("close-icon--hidden")]: !showClose.value
                }
              ]),
              onClick: onClearIconClick
            }, {
              default: withCtx(() => [
                (openBlock(), createBlock(resolveDynamicComponent(_ctx.clearIcon)))
              ]),
              _: 1
            }, 8, ["class"])) : createCommentVNode("v-if", true)
          ], 38))
        ]),
        content: withCtx(() => [
          renderSlot(_ctx.$slots, "default", {
            visible: pickerVisible.value,
            actualVisible: pickerActualVisible.value,
            parsedValue: unref(parsedValue2),
            format: _ctx.format,
            unlinkPanels: _ctx.unlinkPanels,
            type: _ctx.type,
            defaultValue: _ctx.defaultValue,
            onPick,
            onSelectRange: setSelectionRange,
            onSetPickerOption,
            onCalendarChange,
            onPanelChange,
            onKeydown: onKeydownPopperContent,
            onMousedown: _cache[1] || (_cache[1] = withModifiers(() => {
            }, ["stop"]))
          })
        ]),
        _: 3
      }, 16, ["visible", "transition", "popper-class", "popper-options"]);
    };
  }
});
var CommonPicker = _export_sfc(_sfc_main$17, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);
var panelTimePickerProps = buildProps({
  ...timePanelSharedProps,
  datetimeRole: String,
  parsedValue: {
    type: definePropType(Object)
  }
});
var useTimePanel = ({
  getAvailableHours,
  getAvailableMinutes,
  getAvailableSeconds
}) => {
  const getAvailableTime = (date2, role, first, compareDate) => {
    const availableTimeGetters = {
      hour: getAvailableHours,
      minute: getAvailableMinutes,
      second: getAvailableSeconds
    };
    let result = date2;
    ["hour", "minute", "second"].forEach((type) => {
      if (availableTimeGetters[type]) {
        let availableTimeSlots;
        const method = availableTimeGetters[type];
        switch (type) {
          case "minute": {
            availableTimeSlots = method(result.hour(), role, compareDate);
            break;
          }
          case "second": {
            availableTimeSlots = method(result.hour(), result.minute(), role, compareDate);
            break;
          }
          default: {
            availableTimeSlots = method(role, compareDate);
            break;
          }
        }
        if ((availableTimeSlots == null ? void 0 : availableTimeSlots.length) && !availableTimeSlots.includes(result[type]())) {
          const pos = first ? 0 : availableTimeSlots.length - 1;
          result = result[type](availableTimeSlots[pos]);
        }
      }
    });
    return result;
  };
  const timePickerOptions = {};
  const onSetOption = ([key, val]) => {
    timePickerOptions[key] = val;
  };
  return {
    timePickerOptions,
    getAvailableTime,
    onSetOption
  };
};
var makeAvailableArr = (disabledList) => {
  const trueOrNumber = (isDisabled, index) => isDisabled || index;
  const getNumber = (predicate) => predicate !== true;
  return disabledList.map(trueOrNumber).filter(getNumber);
};
var getTimeLists = (disabledHours, disabledMinutes, disabledSeconds) => {
  const getHoursList = (role, compare) => {
    return makeList(24, disabledHours && (() => disabledHours == null ? void 0 : disabledHours(role, compare)));
  };
  const getMinutesList = (hour, role, compare) => {
    return makeList(60, disabledMinutes && (() => disabledMinutes == null ? void 0 : disabledMinutes(hour, role, compare)));
  };
  const getSecondsList = (hour, minute, role, compare) => {
    return makeList(60, disabledSeconds && (() => disabledSeconds == null ? void 0 : disabledSeconds(hour, minute, role, compare)));
  };
  return {
    getHoursList,
    getMinutesList,
    getSecondsList
  };
};
var buildAvailableTimeSlotGetter = (disabledHours, disabledMinutes, disabledSeconds) => {
  const { getHoursList, getMinutesList, getSecondsList } = getTimeLists(disabledHours, disabledMinutes, disabledSeconds);
  const getAvailableHours = (role, compare) => {
    return makeAvailableArr(getHoursList(role, compare));
  };
  const getAvailableMinutes = (hour, role, compare) => {
    return makeAvailableArr(getMinutesList(hour, role, compare));
  };
  const getAvailableSeconds = (hour, minute, role, compare) => {
    return makeAvailableArr(getSecondsList(hour, minute, role, compare));
  };
  return {
    getAvailableHours,
    getAvailableMinutes,
    getAvailableSeconds
  };
};
var useOldValue = (props2) => {
  const oldValue = ref(props2.parsedValue);
  watch(() => props2.visible, (val) => {
    if (!val) {
      oldValue.value = props2.parsedValue;
    }
  });
  return oldValue;
};
var nodeList = /* @__PURE__ */ new Map();
var startClick;
if (isClient) {
  document.addEventListener("mousedown", (e2) => startClick = e2);
  document.addEventListener("mouseup", (e2) => {
    for (const handlers of nodeList.values()) {
      for (const { documentHandler } of handlers) {
        documentHandler(e2, startClick);
      }
    }
  });
}
function createDocumentHandler(el2, binding) {
  let excludes = [];
  if (Array.isArray(binding.arg)) {
    excludes = binding.arg;
  } else if (isElement$1(binding.arg)) {
    excludes.push(binding.arg);
  }
  return function(mouseup, mousedown) {
    const popperRef = binding.instance.popperRef;
    const mouseUpTarget = mouseup.target;
    const mouseDownTarget = mousedown == null ? void 0 : mousedown.target;
    const isBound = !binding || !binding.instance;
    const isTargetExists = !mouseUpTarget || !mouseDownTarget;
    const isContainedByEl = el2.contains(mouseUpTarget) || el2.contains(mouseDownTarget);
    const isSelf = el2 === mouseUpTarget;
    const isTargetExcluded = excludes.length && excludes.some((item) => item == null ? void 0 : item.contains(mouseUpTarget)) || excludes.length && excludes.includes(mouseDownTarget);
    const isContainedByPopper = popperRef && (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget));
    if (isBound || isTargetExists || isContainedByEl || isSelf || isTargetExcluded || isContainedByPopper) {
      return;
    }
    binding.value(mouseup, mousedown);
  };
}
var ClickOutside = {
  beforeMount(el2, binding) {
    if (!nodeList.has(el2)) {
      nodeList.set(el2, []);
    }
    nodeList.get(el2).push({
      documentHandler: createDocumentHandler(el2, binding),
      bindingFn: binding.value
    });
  },
  updated(el2, binding) {
    if (!nodeList.has(el2)) {
      nodeList.set(el2, []);
    }
    const handlers = nodeList.get(el2);
    const oldHandlerIndex = handlers.findIndex((item) => item.bindingFn === binding.oldValue);
    const newHandler = {
      documentHandler: createDocumentHandler(el2, binding),
      bindingFn: binding.value
    };
    if (oldHandlerIndex >= 0) {
      handlers.splice(oldHandlerIndex, 1, newHandler);
    } else {
      handlers.push(newHandler);
    }
  },
  unmounted(el2) {
    nodeList.delete(el2);
  }
};
var REPEAT_INTERVAL = 100;
var REPEAT_DELAY = 600;
var RepeatClick = {
  beforeMount(el2, binding) {
    let interval = null;
    let delay = null;
    const handler = () => binding.value && binding.value();
    const clear = () => {
      if (delay) {
        clearTimeout(delay);
        delay = null;
      }
      if (interval) {
        clearInterval(interval);
        interval = null;
      }
    };
    el2.addEventListener("mousedown", (e2) => {
      if (e2.button !== 0)
        return;
      handler();
      document.addEventListener("mouseup", clear, { once: true });
      clear();
      delay = setTimeout(() => {
        interval = setInterval(() => {
          handler();
        }, REPEAT_INTERVAL);
      }, REPEAT_DELAY);
    });
  }
};
var basicTimeSpinnerProps = buildProps({
  role: {
    type: String,
    required: true
  },
  spinnerDate: {
    type: definePropType(Object),
    required: true
  },
  showSeconds: {
    type: Boolean,
    default: true
  },
  arrowControl: Boolean,
  amPmMode: {
    type: definePropType(String),
    default: ""
  },
  ...disabledTimeListsProps
});
var _hoisted_1$O = ["onClick"];
var _hoisted_2$B = ["onMouseenter"];
var _sfc_main$16 = defineComponent({
  __name: "basic-time-spinner",
  props: basicTimeSpinnerProps,
  emits: ["change", "select-range", "set-option"],
  setup(__props, { emit }) {
    const props2 = __props;
    const ns2 = useNamespace("time");
    const { getHoursList, getMinutesList, getSecondsList } = getTimeLists(props2.disabledHours, props2.disabledMinutes, props2.disabledSeconds);
    let isScrolling = false;
    const currentScrollbar = ref();
    const listHoursRef = ref();
    const listMinutesRef = ref();
    const listSecondsRef = ref();
    const listRefsMap = {
      hours: listHoursRef,
      minutes: listMinutesRef,
      seconds: listSecondsRef
    };
    const spinnerItems = computed(() => {
      return props2.showSeconds ? timeUnits : timeUnits.slice(0, 2);
    });
    const timePartials = computed(() => {
      const { spinnerDate } = props2;
      const hours = spinnerDate.hour();
      const minutes = spinnerDate.minute();
      const seconds = spinnerDate.second();
      return { hours, minutes, seconds };
    });
    const timeList = computed(() => {
      const { hours, minutes } = unref(timePartials);
      return {
        hours: getHoursList(props2.role),
        minutes: getMinutesList(hours, props2.role),
        seconds: getSecondsList(hours, minutes, props2.role)
      };
    });
    const arrowControlTimeList = computed(() => {
      const { hours, minutes, seconds } = unref(timePartials);
      return {
        hours: buildTimeList(hours, 23),
        minutes: buildTimeList(minutes, 59),
        seconds: buildTimeList(seconds, 59)
      };
    });
    const debouncedResetScroll = debounce$1((type) => {
      isScrolling = false;
      adjustCurrentSpinner(type);
    }, 200);
    const getAmPmFlag = (hour) => {
      const shouldShowAmPm = !!props2.amPmMode;
      if (!shouldShowAmPm)
        return "";
      const isCapital = props2.amPmMode === "A";
      let content = hour < 12 ? " am" : " pm";
      if (isCapital)
        content = content.toUpperCase();
      return content;
    };
    const emitSelectRange = (type) => {
      let range;
      switch (type) {
        case "hours":
          range = [0, 2];
          break;
        case "minutes":
          range = [3, 5];
          break;
        case "seconds":
          range = [6, 8];
          break;
      }
      const [left, right] = range;
      emit("select-range", left, right);
      currentScrollbar.value = type;
    };
    const adjustCurrentSpinner = (type) => {
      adjustSpinner(type, unref(timePartials)[type]);
    };
    const adjustSpinners = () => {
      adjustCurrentSpinner("hours");
      adjustCurrentSpinner("minutes");
      adjustCurrentSpinner("seconds");
    };
    const getScrollbarElement = (el2) => el2.querySelector(`.${ns2.namespace.value}-scrollbar__wrap`);
    const adjustSpinner = (type, value) => {
      if (props2.arrowControl)
        return;
      const scrollbar2 = unref(listRefsMap[type]);
      if (scrollbar2 && scrollbar2.$el) {
        getScrollbarElement(scrollbar2.$el).scrollTop = Math.max(0, value * typeItemHeight(type));
      }
    };
    const typeItemHeight = (type) => {
      const scrollbar2 = unref(listRefsMap[type]);
      return (scrollbar2 == null ? void 0 : scrollbar2.$el.querySelector("li").offsetHeight) || 0;
    };
    const onIncrement = () => {
      scrollDown(1);
    };
    const onDecrement = () => {
      scrollDown(-1);
    };
    const scrollDown = (step) => {
      if (!currentScrollbar.value) {
        emitSelectRange("hours");
      }
      const label = currentScrollbar.value;
      const now2 = unref(timePartials)[label];
      const total = currentScrollbar.value === "hours" ? 24 : 60;
      const next = findNextUnDisabled(label, now2, step, total);
      modifyDateField(label, next);
      adjustSpinner(label, next);
      nextTick(() => emitSelectRange(label));
    };
    const findNextUnDisabled = (type, now2, step, total) => {
      let next = (now2 + step + total) % total;
      const list = unref(timeList)[type];
      while (list[next] && next !== now2) {
        next = (next + step + total) % total;
      }
      return next;
    };
    const modifyDateField = (type, value) => {
      const list = unref(timeList)[type];
      const isDisabled = list[value];
      if (isDisabled)
        return;
      const { hours, minutes, seconds } = unref(timePartials);
      let changeTo;
      switch (type) {
        case "hours":
          changeTo = props2.spinnerDate.hour(value).minute(minutes).second(seconds);
          break;
        case "minutes":
          changeTo = props2.spinnerDate.hour(hours).minute(value).second(seconds);
          break;
        case "seconds":
          changeTo = props2.spinnerDate.hour(hours).minute(minutes).second(value);
          break;
      }
      emit("change", changeTo);
    };
    const handleClick = (type, { value, disabled }) => {
      if (!disabled) {
        modifyDateField(type, value);
        emitSelectRange(type);
        adjustSpinner(type, value);
      }
    };
    const handleScroll = (type) => {
      isScrolling = true;
      debouncedResetScroll(type);
      const value = Math.min(Math.round((getScrollbarElement(unref(listRefsMap[type]).$el).scrollTop - (scrollBarHeight(type) * 0.5 - 10) / typeItemHeight(type) + 3) / typeItemHeight(type)), type === "hours" ? 23 : 59);
      modifyDateField(type, value);
    };
    const scrollBarHeight = (type) => {
      return unref(listRefsMap[type]).$el.offsetHeight;
    };
    const bindScrollEvent = () => {
      const bindFunction = (type) => {
        const scrollbar2 = unref(listRefsMap[type]);
        if (scrollbar2 && scrollbar2.$el) {
          getScrollbarElement(scrollbar2.$el).onscroll = () => {
            handleScroll(type);
          };
        }
      };
      bindFunction("hours");
      bindFunction("minutes");
      bindFunction("seconds");
    };
    onMounted(() => {
      nextTick(() => {
        !props2.arrowControl && bindScrollEvent();
        adjustSpinners();
        if (props2.role === "start")
          emitSelectRange("hours");
      });
    });
    const setRef = (scrollbar2, type) => {
      listRefsMap[type].value = scrollbar2;
    };
    emit("set-option", [`${props2.role}_scrollDown`, scrollDown]);
    emit("set-option", [`${props2.role}_emitSelectRange`, emitSelectRange]);
    watch(() => props2.spinnerDate, () => {
      if (isScrolling)
        return;
      adjustSpinners();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass([unref(ns2).b("spinner"), { "has-seconds": _ctx.showSeconds }])
      }, [
        !_ctx.arrowControl ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(unref(spinnerItems), (item) => {
          return openBlock(), createBlock(unref(ElScrollbar), {
            key: item,
            ref_for: true,
            ref: (scollbar) => setRef(scollbar, item),
            class: normalizeClass(unref(ns2).be("spinner", "wrapper")),
            "wrap-style": "max-height: inherit;",
            "view-class": unref(ns2).be("spinner", "list"),
            noresize: "",
            tag: "ul",
            onMouseenter: ($event) => emitSelectRange(item),
            onMousemove: ($event) => adjustCurrentSpinner(item)
          }, {
            default: withCtx(() => [
              (openBlock(true), createElementBlock(Fragment, null, renderList(unref(timeList)[item], (disabled, key) => {
                return openBlock(), createElementBlock("li", {
                  key,
                  class: normalizeClass([
                    unref(ns2).be("spinner", "item"),
                    unref(ns2).is("active", key === unref(timePartials)[item]),
                    unref(ns2).is("disabled", disabled)
                  ]),
                  onClick: ($event) => handleClick(item, { value: key, disabled })
                }, [
                  item === "hours" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                    createTextVNode(toDisplayString(("0" + (_ctx.amPmMode ? key % 12 || 12 : key)).slice(-2)) + toDisplayString(getAmPmFlag(key)), 1)
                  ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                    createTextVNode(toDisplayString(("0" + key).slice(-2)), 1)
                  ], 64))
                ], 10, _hoisted_1$O);
              }), 128))
            ]),
            _: 2
          }, 1032, ["class", "view-class", "onMouseenter", "onMousemove"]);
        }), 128)) : createCommentVNode("v-if", true),
        _ctx.arrowControl ? (openBlock(true), createElementBlock(Fragment, { key: 1 }, renderList(unref(spinnerItems), (item) => {
          return openBlock(), createElementBlock("div", {
            key: item,
            class: normalizeClass([unref(ns2).be("spinner", "wrapper"), unref(ns2).is("arrow")]),
            onMouseenter: ($event) => emitSelectRange(item)
          }, [
            withDirectives((openBlock(), createBlock(unref(ElIcon), {
              class: normalizeClass(["arrow-up", unref(ns2).be("spinner", "arrow")])
            }, {
              default: withCtx(() => [
                createVNode(unref(arrow_up_default))
              ]),
              _: 1
            }, 8, ["class"])), [
              [unref(RepeatClick), onDecrement]
            ]),
            withDirectives((openBlock(), createBlock(unref(ElIcon), {
              class: normalizeClass(["arrow-down", unref(ns2).be("spinner", "arrow")])
            }, {
              default: withCtx(() => [
                createVNode(unref(arrow_down_default))
              ]),
              _: 1
            }, 8, ["class"])), [
              [unref(RepeatClick), onIncrement]
            ]),
            createBaseVNode("ul", {
              class: normalizeClass(unref(ns2).be("spinner", "list"))
            }, [
              (openBlock(true), createElementBlock(Fragment, null, renderList(unref(arrowControlTimeList)[item], (time, key) => {
                return openBlock(), createElementBlock("li", {
                  key,
                  class: normalizeClass([
                    unref(ns2).be("spinner", "item"),
                    unref(ns2).is("active", time === unref(timePartials)[item]),
                    unref(ns2).is("disabled", unref(timeList)[item][time])
                  ])
                }, [
                  typeof time === "number" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                    item === "hours" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                      createTextVNode(toDisplayString(("0" + (_ctx.amPmMode ? time % 12 || 12 : time)).slice(-2)) + toDisplayString(getAmPmFlag(time)), 1)
                    ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                      createTextVNode(toDisplayString(("0" + time).slice(-2)), 1)
                    ], 64))
                  ], 64)) : createCommentVNode("v-if", true)
                ], 2);
              }), 128))
            ], 2)
          ], 42, _hoisted_2$B);
        }), 128)) : createCommentVNode("v-if", true)
      ], 2);
    };
  }
});
var TimeSpinner = _export_sfc(_sfc_main$16, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);
var _sfc_main$15 = defineComponent({
  __name: "panel-time-pick",
  props: panelTimePickerProps,
  emits: ["pick", "select-range", "set-picker-option"],
  setup(__props, { emit }) {
    const props2 = __props;
    const pickerBase = inject("EP_PICKER_BASE");
    const {
      arrowControl,
      disabledHours,
      disabledMinutes,
      disabledSeconds,
      defaultValue
    } = pickerBase.props;
    const { getAvailableHours, getAvailableMinutes, getAvailableSeconds } = buildAvailableTimeSlotGetter(disabledHours, disabledMinutes, disabledSeconds);
    const ns2 = useNamespace("time");
    const { t: t2, lang } = useLocale();
    const selectionRange = ref([0, 2]);
    const oldValue = useOldValue(props2);
    const transitionName = computed(() => {
      return isUndefined(props2.actualVisible) ? `${ns2.namespace.value}-zoom-in-top` : "";
    });
    const showSeconds = computed(() => {
      return props2.format.includes("ss");
    });
    const amPmMode = computed(() => {
      if (props2.format.includes("A"))
        return "A";
      if (props2.format.includes("a"))
        return "a";
      return "";
    });
    const isValidValue = (_date) => {
      const parsedDate = dayjs(_date).locale(lang.value);
      const result = getRangeAvailableTime(parsedDate);
      return parsedDate.isSame(result);
    };
    const handleCancel = () => {
      emit("pick", oldValue.value, false);
    };
    const handleConfirm = (visible = false, first = false) => {
      if (first)
        return;
      emit("pick", props2.parsedValue, visible);
    };
    const handleChange = (_date) => {
      if (!props2.visible) {
        return;
      }
      const result = getRangeAvailableTime(_date).millisecond(0);
      emit("pick", result, true);
    };
    const setSelectionRange = (start, end) => {
      emit("select-range", start, end);
      selectionRange.value = [start, end];
    };
    const changeSelectionRange = (step) => {
      const list = [0, 3].concat(showSeconds.value ? [6] : []);
      const mapping = ["hours", "minutes"].concat(showSeconds.value ? ["seconds"] : []);
      const index = list.indexOf(selectionRange.value[0]);
      const next = (index + step + list.length) % list.length;
      timePickerOptions["start_emitSelectRange"](mapping[next]);
    };
    const handleKeydown = (event) => {
      const code = event.code;
      const { left, right, up, down } = EVENT_CODE;
      if ([left, right].includes(code)) {
        const step = code === left ? -1 : 1;
        changeSelectionRange(step);
        event.preventDefault();
        return;
      }
      if ([up, down].includes(code)) {
        const step = code === up ? -1 : 1;
        timePickerOptions["start_scrollDown"](step);
        event.preventDefault();
        return;
      }
    };
    const { timePickerOptions, onSetOption, getAvailableTime } = useTimePanel({
      getAvailableHours,
      getAvailableMinutes,
      getAvailableSeconds
    });
    const getRangeAvailableTime = (date2) => {
      return getAvailableTime(date2, props2.datetimeRole || "", true);
    };
    const parseUserInput = (value) => {
      if (!value)
        return null;
      return dayjs(value, props2.format).locale(lang.value);
    };
    const formatToString = (value) => {
      if (!value)
        return null;
      return value.format(props2.format);
    };
    const getDefaultValue2 = () => {
      return dayjs(defaultValue).locale(lang.value);
    };
    emit("set-picker-option", ["isValidValue", isValidValue]);
    emit("set-picker-option", ["formatToString", formatToString]);
    emit("set-picker-option", ["parseUserInput", parseUserInput]);
    emit("set-picker-option", ["handleKeydownInput", handleKeydown]);
    emit("set-picker-option", ["getRangeAvailableTime", getRangeAvailableTime]);
    emit("set-picker-option", ["getDefaultValue", getDefaultValue2]);
    return (_ctx, _cache) => {
      return openBlock(), createBlock(Transition, { name: unref(transitionName) }, {
        default: withCtx(() => [
          _ctx.actualVisible || _ctx.visible ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ns2).b("panel"))
          }, [
            createBaseVNode("div", {
              class: normalizeClass([unref(ns2).be("panel", "content"), { "has-seconds": unref(showSeconds) }])
            }, [
              createVNode(TimeSpinner, {
                ref: "spinner",
                role: _ctx.datetimeRole || "start",
                "arrow-control": unref(arrowControl),
                "show-seconds": unref(showSeconds),
                "am-pm-mode": unref(amPmMode),
                "spinner-date": _ctx.parsedValue,
                "disabled-hours": unref(disabledHours),
                "disabled-minutes": unref(disabledMinutes),
                "disabled-seconds": unref(disabledSeconds),
                onChange: handleChange,
                onSetOption: unref(onSetOption),
                onSelectRange: setSelectionRange
              }, null, 8, ["role", "arrow-control", "show-seconds", "am-pm-mode", "spinner-date", "disabled-hours", "disabled-minutes", "disabled-seconds", "onSetOption"])
            ], 2),
            createBaseVNode("div", {
              class: normalizeClass(unref(ns2).be("panel", "footer"))
            }, [
              createBaseVNode("button", {
                type: "button",
                class: normalizeClass([unref(ns2).be("panel", "btn"), "cancel"]),
                onClick: handleCancel
              }, toDisplayString(unref(t2)("el.datepicker.cancel")), 3),
              createBaseVNode("button", {
                type: "button",
                class: normalizeClass([unref(ns2).be("panel", "btn"), "confirm"]),
                onClick: _cache[0] || (_cache[0] = ($event) => handleConfirm())
              }, toDisplayString(unref(t2)("el.datepicker.confirm")), 3)
            ], 2)
          ], 2)) : createCommentVNode("v-if", true)
        ]),
        _: 1
      }, 8, ["name"]);
    };
  }
});
var TimePickPanel = _export_sfc(_sfc_main$15, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);
var tagProps = buildProps({
  closable: Boolean,
  type: {
    type: String,
    values: ["success", "info", "warning", "danger", ""],
    default: ""
  },
  hit: Boolean,
  disableTransitions: Boolean,
  color: {
    type: String,
    default: ""
  },
  size: {
    type: String,
    values: componentSizes,
    default: ""
  },
  effect: {
    type: String,
    values: ["dark", "light", "plain"],
    default: "light"
  },
  round: Boolean
});
var tagEmits = {
  close: (evt) => evt instanceof MouseEvent,
  click: (evt) => evt instanceof MouseEvent
};
var __default__$a = {
  name: "ElTag"
};
var _sfc_main$14 = defineComponent({
  ...__default__$a,
  props: tagProps,
  emits: tagEmits,
  setup(__props, { emit }) {
    const props2 = __props;
    const tagSize = useSize();
    const ns2 = useNamespace("tag");
    const classes = computed(() => {
      const { type, hit, effect, closable, round } = props2;
      return [
        ns2.b(),
        ns2.is("closable", closable),
        ns2.m(type),
        ns2.m(tagSize.value),
        ns2.m(effect),
        ns2.is("hit", hit),
        ns2.is("round", round)
      ];
    });
    const handleClose = (event) => {
      emit("close", event);
    };
    const handleClick = (event) => {
      emit("click", event);
    };
    return (_ctx, _cache) => {
      return _ctx.disableTransitions ? (openBlock(), createElementBlock("span", {
        key: 0,
        class: normalizeClass(unref(classes)),
        style: normalizeStyle({ backgroundColor: _ctx.color }),
        onClick: handleClick
      }, [
        createBaseVNode("span", {
          class: normalizeClass(unref(ns2).e("content"))
        }, [
          renderSlot(_ctx.$slots, "default")
        ], 2),
        _ctx.closable ? (openBlock(), createBlock(unref(ElIcon), {
          key: 0,
          class: normalizeClass(unref(ns2).e("close")),
          onClick: withModifiers(handleClose, ["stop"])
        }, {
          default: withCtx(() => [
            createVNode(unref(close_default))
          ]),
          _: 1
        }, 8, ["class", "onClick"])) : createCommentVNode("v-if", true)
      ], 6)) : (openBlock(), createBlock(Transition, {
        key: 1,
        name: `${unref(ns2).namespace.value}-zoom-in-center`,
        appear: ""
      }, {
        default: withCtx(() => [
          createBaseVNode("span", {
            class: normalizeClass(unref(classes)),
            style: normalizeStyle({ backgroundColor: _ctx.color }),
            onClick: handleClick
          }, [
            createBaseVNode("span", {
              class: normalizeClass(unref(ns2).e("content"))
            }, [
              renderSlot(_ctx.$slots, "default")
            ], 2),
            _ctx.closable ? (openBlock(), createBlock(unref(ElIcon), {
              key: 0,
              class: normalizeClass(unref(ns2).e("close")),
              onClick: withModifiers(handleClose, ["stop"])
            }, {
              default: withCtx(() => [
                createVNode(unref(close_default))
              ]),
              _: 1
            }, 8, ["class", "onClick"])) : createCommentVNode("v-if", true)
          ], 6)
        ]),
        _: 3
      }, 8, ["name"]));
    };
  }
});
var Tag = _export_sfc(_sfc_main$14, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);
var ElTag = withInstall(Tag);
var advancedFormat$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    return function(e2, t2, r) {
      var n = t2.prototype, s3 = n.format;
      r.en.ordinal = function(e3) {
        var t3 = ["th", "st", "nd", "rd"], r2 = e3 % 100;
        return "[" + e3 + (t3[(r2 - 20) % 10] || t3[r2] || t3[0]) + "]";
      }, n.format = function(e3) {
        var t3 = this, r2 = this.$locale();
        if (!this.isValid())
          return s3.bind(this)(e3);
        var n2 = this.$utils(), a3 = (e3 || "YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g, function(e4) {
          switch (e4) {
            case "Q":
              return Math.ceil((t3.$M + 1) / 3);
            case "Do":
              return r2.ordinal(t3.$D);
            case "gggg":
              return t3.weekYear();
            case "GGGG":
              return t3.isoWeekYear();
            case "wo":
              return r2.ordinal(t3.week(), "W");
            case "w":
            case "ww":
              return n2.s(t3.week(), "w" === e4 ? 1 : 2, "0");
            case "W":
            case "WW":
              return n2.s(t3.isoWeek(), "W" === e4 ? 1 : 2, "0");
            case "k":
            case "kk":
              return n2.s(String(0 === t3.$H ? 24 : t3.$H), "k" === e4 ? 1 : 2, "0");
            case "X":
              return Math.floor(t3.$d.getTime() / 1e3);
            case "x":
              return t3.$d.getTime();
            case "z":
              return "[" + t3.offsetName() + "]";
            case "zzz":
              return "[" + t3.offsetName("long") + "]";
            default:
              return e4;
          }
        });
        return s3.bind(this)(a3);
      };
    };
  });
})(advancedFormat$1);
var advancedFormat = advancedFormat$1.exports;
var weekOfYear$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    var e2 = "week", t2 = "year";
    return function(i2, n, r) {
      var f = n.prototype;
      f.week = function(i3) {
        if (void 0 === i3 && (i3 = null), null !== i3)
          return this.add(7 * (i3 - this.week()), "day");
        var n2 = this.$locale().yearStart || 1;
        if (11 === this.month() && this.date() > 25) {
          var f2 = r(this).startOf(t2).add(1, t2).date(n2), s3 = r(this).endOf(e2);
          if (f2.isBefore(s3))
            return 1;
        }
        var a3 = r(this).startOf(t2).date(n2).startOf(e2).subtract(1, "millisecond"), o = this.diff(a3, e2, true);
        return o < 0 ? r(this).startOf("week").week() : Math.ceil(o);
      }, f.weeks = function(e3) {
        return void 0 === e3 && (e3 = null), this.week(e3);
      };
    };
  });
})(weekOfYear$1);
var weekOfYear = weekOfYear$1.exports;
var weekYear$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    return function(e2, t2) {
      t2.prototype.weekYear = function() {
        var e3 = this.month(), t3 = this.week(), n = this.year();
        return 1 === t3 && 11 === e3 ? n + 1 : 0 === e3 && t3 >= 52 ? n - 1 : n;
      };
    };
  });
})(weekYear$1);
var weekYear = weekYear$1.exports;
var dayOfYear$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    return function(e2, t2, n) {
      t2.prototype.dayOfYear = function(e3) {
        var t3 = Math.round((n(this).startOf("day") - n(this).startOf("year")) / 864e5) + 1;
        return null == e3 ? t3 : this.add(e3 - t3, "day");
      };
    };
  });
})(dayOfYear$1);
var dayOfYear = dayOfYear$1.exports;
var isSameOrAfter$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, t2) {
    module2.exports = t2();
  }(commonjsGlobal, function() {
    return function(e2, t2) {
      t2.prototype.isSameOrAfter = function(e3, t3) {
        return this.isSame(e3, t3) || this.isAfter(e3, t3);
      };
    };
  });
})(isSameOrAfter$1);
var isSameOrAfter = isSameOrAfter$1.exports;
var isSameOrBefore$1 = { exports: {} };
(function(module2, exports2) {
  !function(e2, i2) {
    module2.exports = i2();
  }(commonjsGlobal, function() {
    return function(e2, i2) {
      i2.prototype.isSameOrBefore = function(e3, i3) {
        return this.isSame(e3, i3) || this.isBefore(e3, i3);
      };
    };
  });
})(isSameOrBefore$1);
var isSameOrBefore = isSameOrBefore$1.exports;
var datePickerProps = buildProps({
  type: {
    type: definePropType(String),
    default: "date"
  }
});
var selectionModes = ["date", "dates", "year", "month", "week", "range"];
var datePickerSharedProps = buildProps({
  disabledDate: {
    type: definePropType(Function)
  },
  date: {
    type: definePropType(Object),
    required: true
  },
  minDate: {
    type: definePropType(Object)
  },
  maxDate: {
    type: definePropType(Object)
  },
  parsedValue: {
    type: definePropType([Object, Array])
  },
  rangeState: {
    type: definePropType(Object),
    default: () => ({
      endDate: null,
      selecting: false
    })
  }
});
var panelSharedProps = buildProps({
  type: {
    type: definePropType(String),
    required: true,
    values: datePickTypes
  }
});
var panelRangeSharedProps = buildProps({
  unlinkPanels: Boolean,
  parsedValue: {
    type: definePropType(Array)
  }
});
var selectionModeWithDefault = (mode) => {
  return {
    type: String,
    values: selectionModes,
    default: mode
  };
};
var panelDatePickProps = buildProps({
  ...panelSharedProps,
  parsedValue: {
    type: definePropType([Object, Array])
  },
  visible: {
    type: Boolean
  },
  format: {
    type: String,
    default: ""
  }
});
var basicDateTableProps = buildProps({
  ...datePickerSharedProps,
  cellClassName: {
    type: definePropType(Function)
  },
  showWeekNumber: Boolean,
  selectionMode: selectionModeWithDefault("date")
});
var isValidRange = (range) => {
  if (!isArray(range))
    return false;
  const [left, right] = range;
  return dayjs.isDayjs(left) && dayjs.isDayjs(right) && left.isSameOrBefore(right);
};
var getDefaultValue = (defaultValue, { lang, unit, unlinkPanels }) => {
  let start;
  if (isArray(defaultValue)) {
    let [left, right] = defaultValue.map((d3) => dayjs(d3).locale(lang));
    if (!unlinkPanels) {
      right = left.add(1, unit);
    }
    return [left, right];
  } else if (defaultValue) {
    start = dayjs(defaultValue);
  } else {
    start = dayjs();
  }
  start = start.locale(lang);
  return [start, start.add(1, unit)];
};
var buildPickerTable = (dimension, rows, {
  columnIndexOffset,
  startDate,
  nextEndDate,
  now: now2,
  unit,
  relativeDateGetter,
  setCellMetadata,
  setRowMetadata
}) => {
  for (let rowIndex = 0; rowIndex < dimension.row; rowIndex++) {
    const row = rows[rowIndex];
    for (let columnIndex = 0; columnIndex < dimension.column; columnIndex++) {
      let cell = row[columnIndex + columnIndexOffset];
      if (!cell) {
        cell = {
          row: rowIndex,
          column: columnIndex,
          type: "normal",
          inRange: false,
          start: false,
          end: false
        };
      }
      const index = rowIndex * dimension.column + columnIndex;
      const nextStartDate = relativeDateGetter(index);
      cell.dayjs = nextStartDate;
      cell.date = nextStartDate.toDate();
      cell.timestamp = nextStartDate.valueOf();
      cell.type = "normal";
      cell.inRange = !!(startDate && nextStartDate.isSameOrAfter(startDate, unit) && nextEndDate && nextStartDate.isSameOrBefore(nextEndDate, unit)) || !!(startDate && nextStartDate.isSameOrBefore(startDate, unit) && nextEndDate && nextStartDate.isSameOrAfter(nextEndDate, unit));
      if (startDate == null ? void 0 : startDate.isSameOrAfter(nextEndDate)) {
        cell.start = !!nextEndDate && nextStartDate.isSame(nextEndDate, unit);
        cell.end = startDate && nextStartDate.isSame(startDate, unit);
      } else {
        cell.start = !!startDate && nextStartDate.isSame(startDate, unit);
        cell.end = !!nextEndDate && nextStartDate.isSame(nextEndDate, unit);
      }
      const isToday = nextStartDate.isSame(now2, unit);
      if (isToday) {
        cell.type = "today";
      }
      setCellMetadata == null ? void 0 : setCellMetadata(cell, { rowIndex, columnIndex });
      row[columnIndex + columnIndexOffset] = cell;
    }
    setRowMetadata == null ? void 0 : setRowMetadata(row);
  }
};
var basicCellProps = buildProps({
  cell: {
    type: definePropType(Object)
  }
});
var ElDatePickerCell = defineComponent({
  name: "ElDatePickerCell",
  props: basicCellProps,
  setup(props2) {
    const ns2 = useNamespace("date-table-cell");
    const {
      slots
    } = inject(ROOT_PICKER_INJECTION_KEY);
    return () => {
      const {
        cell
      } = props2;
      if (slots.default) {
        const list = slots.default(cell).filter((item) => {
          return item.patchFlag !== -2 && item.type.toString() !== "Symbol(Comment)";
        });
        if (list.length) {
          return list;
        }
      }
      return createVNode("div", {
        "class": ns2.b()
      }, [createVNode("span", {
        "class": ns2.e("text")
      }, [cell == null ? void 0 : cell.text])]);
    };
  }
});
var _hoisted_1$N = ["aria-label"];
var _hoisted_2$A = {
  key: 0,
  scope: "col"
};
var _hoisted_3$w = ["aria-label"];
var _hoisted_4$o = ["aria-current", "aria-selected", "tabindex"];
var _sfc_main$13 = defineComponent({
  __name: "basic-date-table",
  props: basicDateTableProps,
  emits: ["changerange", "pick", "select"],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const ns2 = useNamespace("date-table");
    const { t: t2, lang } = useLocale();
    const tbodyRef = ref();
    const currentCellRef = ref();
    const lastRow = ref();
    const lastColumn = ref();
    const tableRows = ref([[], [], [], [], [], []]);
    let focusWithClick = false;
    const firstDayOfWeek = props2.date.$locale().weekStart || 7;
    const WEEKS_CONSTANT = props2.date.locale("en").localeData().weekdaysShort().map((_2) => _2.toLowerCase());
    const offsetDay = computed(() => {
      return firstDayOfWeek > 3 ? 7 - firstDayOfWeek : -firstDayOfWeek;
    });
    const startDate = computed(() => {
      const startDayOfMonth = props2.date.startOf("month");
      return startDayOfMonth.subtract(startDayOfMonth.day() || 7, "day");
    });
    const WEEKS = computed(() => {
      return WEEKS_CONSTANT.concat(WEEKS_CONSTANT).slice(firstDayOfWeek, firstDayOfWeek + 7);
    });
    const hasCurrent = computed(() => {
      return flatten$1(rows.value).some((row) => {
        return row.isCurrent;
      });
    });
    const days = computed(() => {
      const startOfMonth = props2.date.startOf("month");
      const startOfMonthDay = startOfMonth.day() || 7;
      const dateCountOfMonth = startOfMonth.daysInMonth();
      const dateCountOfLastMonth = startOfMonth.subtract(1, "month").daysInMonth();
      return {
        startOfMonthDay,
        dateCountOfMonth,
        dateCountOfLastMonth
      };
    });
    const selectedDate = computed(() => {
      return props2.selectionMode === "dates" ? castArray(props2.parsedValue) : [];
    });
    const setDateText = (cell, {
      count,
      rowIndex,
      columnIndex
    }) => {
      const { startOfMonthDay, dateCountOfMonth, dateCountOfLastMonth } = unref(days);
      const offset = unref(offsetDay);
      if (rowIndex >= 0 && rowIndex <= 1) {
        const numberOfDaysFromPreviousMonth = startOfMonthDay + offset < 0 ? 7 + startOfMonthDay + offset : startOfMonthDay + offset;
        if (columnIndex + rowIndex * 7 >= numberOfDaysFromPreviousMonth) {
          cell.text = count;
          return true;
        } else {
          cell.text = dateCountOfLastMonth - (numberOfDaysFromPreviousMonth - columnIndex % 7) + 1 + rowIndex * 7;
          cell.type = "prev-month";
        }
      } else {
        if (count <= dateCountOfMonth) {
          cell.text = count;
        } else {
          cell.text = count - dateCountOfMonth;
          cell.type = "next-month";
        }
        return true;
      }
      return false;
    };
    const setCellMetadata = (cell, {
      columnIndex,
      rowIndex
    }, count) => {
      const { disabledDate: disabledDate2, cellClassName } = props2;
      const _selectedDate = unref(selectedDate);
      const shouldIncrement = setDateText(cell, { count, rowIndex, columnIndex });
      const cellDate = cell.dayjs.toDate();
      cell.selected = _selectedDate.find((d3) => d3.valueOf() === cell.dayjs.valueOf());
      cell.isSelected = !!cell.selected;
      cell.isCurrent = isCurrent(cell);
      cell.disabled = disabledDate2 == null ? void 0 : disabledDate2(cellDate);
      cell.customClass = cellClassName == null ? void 0 : cellClassName(cellDate);
      return shouldIncrement;
    };
    const setRowMetadata = (row) => {
      if (props2.selectionMode === "week") {
        const [start, end] = props2.showWeekNumber ? [1, 7] : [0, 6];
        const isActive = isWeekActive(row[start + 1]);
        row[start].inRange = isActive;
        row[start].start = isActive;
        row[end].inRange = isActive;
        row[end].end = isActive;
      }
    };
    const rows = computed(() => {
      const { minDate, maxDate, rangeState, showWeekNumber } = props2;
      const offset = offsetDay.value;
      const rows_ = tableRows.value;
      const dateUnit = "day";
      let count = 1;
      if (showWeekNumber) {
        for (let rowIndex = 0; rowIndex < 6; rowIndex++) {
          if (!rows_[rowIndex][0]) {
            rows_[rowIndex][0] = {
              type: "week",
              text: startDate.value.add(rowIndex * 7 + 1, dateUnit).week()
            };
          }
        }
      }
      buildPickerTable({ row: 6, column: 7 }, rows_, {
        startDate: minDate,
        columnIndexOffset: showWeekNumber ? 1 : 0,
        nextEndDate: rangeState.endDate || maxDate || rangeState.selecting && minDate || null,
        now: dayjs().locale(unref(lang)).startOf(dateUnit),
        unit: dateUnit,
        relativeDateGetter: (idx) => startDate.value.add(idx - offset, dateUnit),
        setCellMetadata: (...args) => {
          if (setCellMetadata(...args, count)) {
            count += 1;
          }
        },
        setRowMetadata
      });
      return rows_;
    });
    watch(() => props2.date, async () => {
      var _a2, _b;
      if ((_a2 = tbodyRef.value) == null ? void 0 : _a2.contains(document.activeElement)) {
        await nextTick();
        (_b = currentCellRef.value) == null ? void 0 : _b.focus();
      }
    });
    const focus = async () => {
      var _a2;
      (_a2 = currentCellRef.value) == null ? void 0 : _a2.focus();
    };
    const isNormalDay = (type = "") => {
      return ["normal", "today"].includes(type);
    };
    const isCurrent = (cell) => {
      return props2.selectionMode === "date" && isNormalDay(cell.type) && cellMatchesDate(cell, props2.parsedValue);
    };
    const cellMatchesDate = (cell, date2) => {
      if (!date2)
        return false;
      return dayjs(date2).locale(lang.value).isSame(props2.date.date(Number(cell.text)), "day");
    };
    const getCellClasses = (cell) => {
      const classes = [];
      if (isNormalDay(cell.type) && !cell.disabled) {
        classes.push("available");
        if (cell.type === "today") {
          classes.push("today");
        }
      } else {
        classes.push(cell.type);
      }
      if (isCurrent(cell)) {
        classes.push("current");
      }
      if (cell.inRange && (isNormalDay(cell.type) || props2.selectionMode === "week")) {
        classes.push("in-range");
        if (cell.start) {
          classes.push("start-date");
        }
        if (cell.end) {
          classes.push("end-date");
        }
      }
      if (cell.disabled) {
        classes.push("disabled");
      }
      if (cell.selected) {
        classes.push("selected");
      }
      if (cell.customClass) {
        classes.push(cell.customClass);
      }
      return classes.join(" ");
    };
    const getDateOfCell = (row, column) => {
      const offsetFromStart = row * 7 + (column - (props2.showWeekNumber ? 1 : 0)) - offsetDay.value;
      return startDate.value.add(offsetFromStart, "day");
    };
    const handleMouseMove = (event) => {
      var _a2;
      if (!props2.rangeState.selecting)
        return;
      let target = event.target;
      if (target.tagName === "SPAN") {
        target = (_a2 = target.parentNode) == null ? void 0 : _a2.parentNode;
      }
      if (target.tagName === "DIV") {
        target = target.parentNode;
      }
      if (target.tagName !== "TD")
        return;
      const row = target.parentNode.rowIndex - 1;
      const column = target.cellIndex;
      if (rows.value[row][column].disabled)
        return;
      if (row !== lastRow.value || column !== lastColumn.value) {
        lastRow.value = row;
        lastColumn.value = column;
        emit("changerange", {
          selecting: true,
          endDate: getDateOfCell(row, column)
        });
      }
    };
    const isSelectedCell = (cell) => {
      return !hasCurrent.value && (cell == null ? void 0 : cell.text) === 1 && cell.type === "normal" || cell.isCurrent;
    };
    const handleFocus = (event) => {
      if (focusWithClick || hasCurrent.value || props2.selectionMode !== "date")
        return;
      handlePickDate(event, true);
    };
    const handleMouseDown = (event) => {
      const target = event.target.closest("td");
      if (!target)
        return;
      focusWithClick = true;
    };
    const handleMouseUp = (event) => {
      const target = event.target.closest("td");
      if (!target)
        return;
      focusWithClick = false;
    };
    const handlePickDate = (event, isKeyboardMovement = false) => {
      const target = event.target.closest("td");
      if (!target)
        return;
      const row = target.parentNode.rowIndex - 1;
      const column = target.cellIndex;
      const cell = rows.value[row][column];
      if (cell.disabled || cell.type === "week")
        return;
      const newDate = getDateOfCell(row, column);
      if (props2.selectionMode === "range") {
        if (!props2.rangeState.selecting || !props2.minDate) {
          emit("pick", { minDate: newDate, maxDate: null });
          emit("select", true);
        } else {
          if (newDate >= props2.minDate) {
            emit("pick", { minDate: props2.minDate, maxDate: newDate });
          } else {
            emit("pick", { minDate: newDate, maxDate: props2.minDate });
          }
          emit("select", false);
        }
      } else if (props2.selectionMode === "date") {
        emit("pick", newDate, isKeyboardMovement);
      } else if (props2.selectionMode === "week") {
        const weekNumber = newDate.week();
        const value = `${newDate.year()}w${weekNumber}`;
        emit("pick", {
          year: newDate.year(),
          week: weekNumber,
          value,
          date: newDate.startOf("week")
        });
      } else if (props2.selectionMode === "dates") {
        const newValue = cell.selected ? castArray(props2.parsedValue).filter((d3) => (d3 == null ? void 0 : d3.valueOf()) !== newDate.valueOf()) : castArray(props2.parsedValue).concat([newDate]);
        emit("pick", newValue);
      }
    };
    const isWeekActive = (cell) => {
      if (props2.selectionMode !== "week")
        return false;
      let newDate = props2.date.startOf("day");
      if (cell.type === "prev-month") {
        newDate = newDate.subtract(1, "month");
      }
      if (cell.type === "next-month") {
        newDate = newDate.add(1, "month");
      }
      newDate = newDate.date(Number.parseInt(cell.text, 10));
      if (props2.parsedValue && !Array.isArray(props2.parsedValue)) {
        const dayOffset = (props2.parsedValue.day() - firstDayOfWeek + 7) % 7 - 1;
        const weekDate = props2.parsedValue.subtract(dayOffset, "day");
        return weekDate.isSame(newDate, "day");
      }
      return false;
    };
    expose({
      focus
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("table", {
        role: "grid",
        "aria-label": unref(t2)("el.datepicker.dateTablePrompt"),
        cellspacing: "0",
        cellpadding: "0",
        class: normalizeClass([unref(ns2).b(), { "is-week-mode": _ctx.selectionMode === "week" }]),
        onClick: handlePickDate,
        onMousemove: handleMouseMove,
        onMousedown: handleMouseDown,
        onMouseup: handleMouseUp
      }, [
        createBaseVNode("tbody", {
          ref_key: "tbodyRef",
          ref: tbodyRef
        }, [
          createBaseVNode("tr", null, [
            _ctx.showWeekNumber ? (openBlock(), createElementBlock("th", _hoisted_2$A, toDisplayString(unref(t2)("el.datepicker.week")), 1)) : createCommentVNode("v-if", true),
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(WEEKS), (week, key) => {
              return openBlock(), createElementBlock("th", {
                key,
                scope: "col",
                "aria-label": unref(t2)("el.datepicker.weeksFull." + week)
              }, toDisplayString(unref(t2)("el.datepicker.weeks." + week)), 9, _hoisted_3$w);
            }), 128))
          ]),
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(rows), (row, rowKey) => {
            return openBlock(), createElementBlock("tr", {
              key: rowKey,
              class: normalizeClass([unref(ns2).e("row"), { current: isWeekActive(row[1]) }])
            }, [
              (openBlock(true), createElementBlock(Fragment, null, renderList(row, (cell, columnKey) => {
                return openBlock(), createElementBlock("td", {
                  key: `${rowKey}.${columnKey}`,
                  ref_for: true,
                  ref: (el2) => isSelectedCell(cell) && (currentCellRef.value = el2),
                  class: normalizeClass(getCellClasses(cell)),
                  "aria-current": cell.isCurrent ? "date" : void 0,
                  "aria-selected": cell.isCurrent,
                  tabindex: isSelectedCell(cell) ? 0 : -1,
                  onFocus: handleFocus
                }, [
                  createVNode(unref(ElDatePickerCell), { cell }, null, 8, ["cell"])
                ], 42, _hoisted_4$o);
              }), 128))
            ], 2);
          }), 128))
        ], 512)
      ], 42, _hoisted_1$N);
    };
  }
});
var DateTable = _export_sfc(_sfc_main$13, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);
var basicMonthTableProps = buildProps({
  ...datePickerSharedProps,
  selectionMode: selectionModeWithDefault("month")
});
var _hoisted_1$M = ["aria-label"];
var _hoisted_2$z = ["aria-selected", "aria-label", "tabindex", "onKeydown"];
var _hoisted_3$v = { class: "cell" };
var _sfc_main$12 = defineComponent({
  __name: "basic-month-table",
  props: basicMonthTableProps,
  emits: ["changerange", "pick", "select"],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const datesInMonth = (year, month, lang2) => {
      const firstDay = dayjs().locale(lang2).startOf("month").month(month).year(year);
      const numOfDays = firstDay.daysInMonth();
      return rangeArr(numOfDays).map((n) => firstDay.add(n, "day").toDate());
    };
    const ns2 = useNamespace("month-table");
    const { t: t2, lang } = useLocale();
    const tbodyRef = ref();
    const currentCellRef = ref();
    const months = ref(props2.date.locale("en").localeData().monthsShort().map((_2) => _2.toLowerCase()));
    const tableRows = ref([
      [],
      [],
      []
    ]);
    const lastRow = ref();
    const lastColumn = ref();
    const rows = computed(() => {
      var _a2, _b;
      const rows2 = tableRows.value;
      const now2 = dayjs().locale(lang.value).startOf("month");
      for (let i2 = 0; i2 < 3; i2++) {
        const row = rows2[i2];
        for (let j = 0; j < 4; j++) {
          const cell = row[j] || (row[j] = {
            row: i2,
            column: j,
            type: "normal",
            inRange: false,
            start: false,
            end: false,
            text: -1,
            disabled: false
          });
          cell.type = "normal";
          const index = i2 * 4 + j;
          const calTime = props2.date.startOf("year").month(index);
          const calEndDate = props2.rangeState.endDate || props2.maxDate || props2.rangeState.selecting && props2.minDate || null;
          cell.inRange = !!(props2.minDate && calTime.isSameOrAfter(props2.minDate, "month") && calEndDate && calTime.isSameOrBefore(calEndDate, "month")) || !!(props2.minDate && calTime.isSameOrBefore(props2.minDate, "month") && calEndDate && calTime.isSameOrAfter(calEndDate, "month"));
          if ((_a2 = props2.minDate) == null ? void 0 : _a2.isSameOrAfter(calEndDate)) {
            cell.start = !!(calEndDate && calTime.isSame(calEndDate, "month"));
            cell.end = props2.minDate && calTime.isSame(props2.minDate, "month");
          } else {
            cell.start = !!(props2.minDate && calTime.isSame(props2.minDate, "month"));
            cell.end = !!(calEndDate && calTime.isSame(calEndDate, "month"));
          }
          const isToday = now2.isSame(calTime);
          if (isToday) {
            cell.type = "today";
          }
          cell.text = index;
          cell.disabled = ((_b = props2.disabledDate) == null ? void 0 : _b.call(props2, calTime.toDate())) || false;
        }
      }
      return rows2;
    });
    const focus = () => {
      var _a2;
      (_a2 = currentCellRef.value) == null ? void 0 : _a2.focus();
    };
    const getCellStyle = (cell) => {
      const style2 = {};
      const year = props2.date.year();
      const today = new Date();
      const month = cell.text;
      style2.disabled = props2.disabledDate ? datesInMonth(year, month, lang.value).every(props2.disabledDate) : false;
      style2.current = castArray(props2.parsedValue).findIndex((date2) => dayjs.isDayjs(date2) && date2.year() === year && date2.month() === month) >= 0;
      style2.today = today.getFullYear() === year && today.getMonth() === month;
      if (cell.inRange) {
        style2["in-range"] = true;
        if (cell.start) {
          style2["start-date"] = true;
        }
        if (cell.end) {
          style2["end-date"] = true;
        }
      }
      return style2;
    };
    const isSelectedCell = (cell) => {
      const year = props2.date.year();
      const month = cell.text;
      return castArray(props2.date).findIndex((date2) => date2.year() === year && date2.month() === month) >= 0;
    };
    const handleMouseMove = (event) => {
      var _a2;
      if (!props2.rangeState.selecting)
        return;
      let target = event.target;
      if (target.tagName === "A") {
        target = (_a2 = target.parentNode) == null ? void 0 : _a2.parentNode;
      }
      if (target.tagName === "DIV") {
        target = target.parentNode;
      }
      if (target.tagName !== "TD")
        return;
      const row = target.parentNode.rowIndex;
      const column = target.cellIndex;
      if (rows.value[row][column].disabled)
        return;
      if (row !== lastRow.value || column !== lastColumn.value) {
        lastRow.value = row;
        lastColumn.value = column;
        emit("changerange", {
          selecting: true,
          endDate: props2.date.startOf("year").month(row * 4 + column)
        });
      }
    };
    const handleMonthTableClick = (event) => {
      var _a2;
      const target = (_a2 = event.target) == null ? void 0 : _a2.closest("td");
      if ((target == null ? void 0 : target.tagName) !== "TD")
        return;
      if (hasClass(target, "disabled"))
        return;
      const column = target.cellIndex;
      const row = target.parentNode.rowIndex;
      const month = row * 4 + column;
      const newDate = props2.date.startOf("year").month(month);
      if (props2.selectionMode === "range") {
        if (!props2.rangeState.selecting) {
          emit("pick", { minDate: newDate, maxDate: null });
          emit("select", true);
        } else {
          if (props2.minDate && newDate >= props2.minDate) {
            emit("pick", { minDate: props2.minDate, maxDate: newDate });
          } else {
            emit("pick", { minDate: newDate, maxDate: props2.minDate });
          }
          emit("select", false);
        }
      } else {
        emit("pick", month);
      }
    };
    watch(() => props2.date, async () => {
      var _a2, _b;
      if ((_a2 = tbodyRef.value) == null ? void 0 : _a2.contains(document.activeElement)) {
        await nextTick();
        (_b = currentCellRef.value) == null ? void 0 : _b.focus();
      }
    });
    expose({
      focus
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("table", {
        role: "grid",
        "aria-label": unref(t2)("el.datepicker.monthTablePrompt"),
        class: normalizeClass(unref(ns2).b()),
        onClick: handleMonthTableClick,
        onMousemove: handleMouseMove
      }, [
        createBaseVNode("tbody", {
          ref_key: "tbodyRef",
          ref: tbodyRef
        }, [
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(rows), (row, key) => {
            return openBlock(), createElementBlock("tr", { key }, [
              (openBlock(true), createElementBlock(Fragment, null, renderList(row, (cell, key_) => {
                return openBlock(), createElementBlock("td", {
                  key: key_,
                  ref_for: true,
                  ref: (el2) => isSelectedCell(cell) && (currentCellRef.value = el2),
                  class: normalizeClass(getCellStyle(cell)),
                  "aria-selected": `${isSelectedCell(cell)}`,
                  "aria-label": unref(t2)(`el.datepicker.month${+cell.text + 1}`),
                  tabindex: isSelectedCell(cell) ? 0 : -1,
                  onKeydown: [
                    withKeys(withModifiers(handleMonthTableClick, ["prevent", "stop"]), ["space"]),
                    withKeys(withModifiers(handleMonthTableClick, ["prevent", "stop"]), ["enter"])
                  ]
                }, [
                  createBaseVNode("div", null, [
                    createBaseVNode("span", _hoisted_3$v, toDisplayString(unref(t2)("el.datepicker.months." + months.value[cell.text])), 1)
                  ])
                ], 42, _hoisted_2$z);
              }), 128))
            ]);
          }), 128))
        ], 512)
      ], 42, _hoisted_1$M);
    };
  }
});
var MonthTable = _export_sfc(_sfc_main$12, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);
var { date, disabledDate, parsedValue } = datePickerSharedProps;
var basicYearTableProps = buildProps({
  date,
  disabledDate,
  parsedValue
});
var _hoisted_1$L = ["aria-label"];
var _hoisted_2$y = ["aria-selected", "tabindex", "onKeydown"];
var _hoisted_3$u = { class: "cell" };
var _hoisted_4$n = { key: 1 };
var _sfc_main$11 = defineComponent({
  __name: "basic-year-table",
  props: basicYearTableProps,
  emits: ["pick"],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const datesInYear = (year, lang2) => {
      const firstDay = dayjs(String(year)).locale(lang2).startOf("year");
      const lastDay = firstDay.endOf("year");
      const numOfDays = lastDay.dayOfYear();
      return rangeArr(numOfDays).map((n) => firstDay.add(n, "day").toDate());
    };
    const ns2 = useNamespace("year-table");
    const { t: t2, lang } = useLocale();
    const tbodyRef = ref();
    const currentCellRef = ref();
    const startYear = computed(() => {
      return Math.floor(props2.date.year() / 10) * 10;
    });
    const focus = () => {
      var _a2;
      (_a2 = currentCellRef.value) == null ? void 0 : _a2.focus();
    };
    const getCellKls = (year) => {
      const kls = {};
      const today = dayjs().locale(lang.value);
      kls.disabled = props2.disabledDate ? datesInYear(year, lang.value).every(props2.disabledDate) : false;
      kls.current = castArray(props2.parsedValue).findIndex((d3) => d3.year() === year) >= 0;
      kls.today = today.year() === year;
      return kls;
    };
    const isSelectedCell = (year) => {
      return year === startYear.value && props2.date.year() < startYear.value && props2.date.year() > startYear.value + 9 || castArray(props2.date).findIndex((date2) => date2.year() === year) >= 0;
    };
    const handleYearTableClick = (event) => {
      const clickTarget = event.target;
      const target = clickTarget.closest("td");
      if (target && target.textContent) {
        if (hasClass(target, "disabled"))
          return;
        const year = target.textContent || target.innerText;
        emit("pick", Number(year));
      }
    };
    watch(() => props2.date, async () => {
      var _a2, _b;
      if ((_a2 = tbodyRef.value) == null ? void 0 : _a2.contains(document.activeElement)) {
        await nextTick();
        (_b = currentCellRef.value) == null ? void 0 : _b.focus();
      }
    });
    expose({
      focus
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("table", {
        role: "grid",
        "aria-label": unref(t2)("el.datepicker.yearTablePrompt"),
        class: normalizeClass(unref(ns2).b()),
        onClick: handleYearTableClick
      }, [
        createBaseVNode("tbody", {
          ref_key: "tbodyRef",
          ref: tbodyRef
        }, [
          (openBlock(), createElementBlock(Fragment, null, renderList(3, (_2, i2) => {
            return createBaseVNode("tr", { key: i2 }, [
              (openBlock(), createElementBlock(Fragment, null, renderList(4, (__, j) => {
                return openBlock(), createElementBlock(Fragment, {
                  key: i2 + "_" + j
                }, [
                  i2 * 4 + j < 10 ? (openBlock(), createElementBlock("td", {
                    key: 0,
                    ref_for: true,
                    ref: (el2) => isSelectedCell(unref(startYear) + i2 * 4 + j) && (currentCellRef.value = el2),
                    class: normalizeClass(["available", getCellKls(unref(startYear) + i2 * 4 + j)]),
                    "aria-selected": `${isSelectedCell(unref(startYear) + i2 * 4 + j)}`,
                    tabindex: isSelectedCell(unref(startYear) + i2 * 4 + j) ? 0 : -1,
                    onKeydown: [
                      withKeys(withModifiers(handleYearTableClick, ["prevent", "stop"]), ["space"]),
                      withKeys(withModifiers(handleYearTableClick, ["prevent", "stop"]), ["enter"])
                    ]
                  }, [
                    createBaseVNode("span", _hoisted_3$u, toDisplayString(unref(startYear) + i2 * 4 + j), 1)
                  ], 42, _hoisted_2$y)) : (openBlock(), createElementBlock("td", _hoisted_4$n))
                ], 64);
              }), 64))
            ]);
          }), 64))
        ], 512)
      ], 10, _hoisted_1$L);
    };
  }
});
var YearTable = _export_sfc(_sfc_main$11, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);
var _hoisted_1$K = ["onClick"];
var _hoisted_2$x = ["aria-label"];
var _hoisted_3$t = ["aria-label"];
var _hoisted_4$m = ["aria-label"];
var _hoisted_5$c = ["aria-label"];
var _sfc_main$10 = defineComponent({
  __name: "panel-date-pick",
  props: panelDatePickProps,
  emits: ["pick", "set-picker-option", "panel-change"],
  setup(__props, { emit: contextEmit }) {
    const props2 = __props;
    const timeWithinRange = (_2, __, ___) => true;
    const ppNs = useNamespace("picker-panel");
    const dpNs = useNamespace("date-picker");
    const attrs = useAttrs();
    const slots = useSlots();
    const { t: t2, lang } = useLocale();
    const pickerBase = inject("EP_PICKER_BASE");
    const popper2 = inject(TOOLTIP_INJECTION_KEY);
    const { shortcuts, disabledDate: disabledDate2, cellClassName, defaultTime, arrowControl } = pickerBase.props;
    const defaultValue = toRef(pickerBase.props, "defaultValue");
    const currentViewRef = ref();
    const innerDate = ref(dayjs().locale(lang.value));
    const defaultTimeD = computed(() => {
      return dayjs(defaultTime).locale(lang.value);
    });
    const month = computed(() => {
      return innerDate.value.month();
    });
    const year = computed(() => {
      return innerDate.value.year();
    });
    const selectableRange = ref([]);
    const userInputDate = ref(null);
    const userInputTime = ref(null);
    const checkDateWithinRange = (date2) => {
      return selectableRange.value.length > 0 ? timeWithinRange(date2, selectableRange.value, props2.format || "HH:mm:ss") : true;
    };
    const formatEmit = (emitDayjs) => {
      if (defaultTime && !visibleTime.value) {
        return defaultTimeD.value.year(emitDayjs.year()).month(emitDayjs.month()).date(emitDayjs.date());
      }
      if (showTime.value)
        return emitDayjs.millisecond(0);
      return emitDayjs.startOf("day");
    };
    const emit = (value, ...args) => {
      if (!value) {
        contextEmit("pick", value, ...args);
      } else if (isArray(value)) {
        const dates = value.map(formatEmit);
        contextEmit("pick", dates, ...args);
      } else {
        contextEmit("pick", formatEmit(value), ...args);
      }
      userInputDate.value = null;
      userInputTime.value = null;
    };
    const handleDatePick = (value, keepOpen) => {
      if (selectionMode.value === "date") {
        value = value;
        let newDate = props2.parsedValue ? props2.parsedValue.year(value.year()).month(value.month()).date(value.date()) : value;
        if (!checkDateWithinRange(newDate)) {
          newDate = selectableRange.value[0][0].year(value.year()).month(value.month()).date(value.date());
        }
        innerDate.value = newDate;
        emit(newDate, showTime.value || keepOpen);
      } else if (selectionMode.value === "week") {
        emit(value.date);
      } else if (selectionMode.value === "dates") {
        emit(value, true);
      }
    };
    const moveByMonth = (forward) => {
      const action = forward ? "add" : "subtract";
      innerDate.value = innerDate.value[action](1, "month");
      handlePanelChange("month");
    };
    const moveByYear = (forward) => {
      const currentDate = innerDate.value;
      const action = forward ? "add" : "subtract";
      innerDate.value = currentView.value === "year" ? currentDate[action](10, "year") : currentDate[action](1, "year");
      handlePanelChange("year");
    };
    const currentView = ref("date");
    const yearLabel = computed(() => {
      const yearTranslation = t2("el.datepicker.year");
      if (currentView.value === "year") {
        const startYear = Math.floor(year.value / 10) * 10;
        if (yearTranslation) {
          return `${startYear} ${yearTranslation} - ${startYear + 9} ${yearTranslation}`;
        }
        return `${startYear} - ${startYear + 9}`;
      }
      return `${year.value} ${yearTranslation}`;
    });
    const handleShortcutClick = (shortcut) => {
      const shortcutValue = isFunction$1(shortcut.value) ? shortcut.value() : shortcut.value;
      if (shortcutValue) {
        emit(dayjs(shortcutValue).locale(lang.value));
        return;
      }
      if (shortcut.onClick) {
        shortcut.onClick({
          attrs,
          slots,
          emit: contextEmit
        });
      }
    };
    const selectionMode = computed(() => {
      const { type } = props2;
      if (["week", "month", "year", "dates"].includes(type))
        return type;
      return "date";
    });
    const keyboardMode = computed(() => {
      return selectionMode.value === "date" ? currentView.value : selectionMode.value;
    });
    const hasShortcuts = computed(() => !!shortcuts.length);
    const handleMonthPick = async (month2) => {
      innerDate.value = innerDate.value.startOf("month").month(month2);
      if (selectionMode.value === "month") {
        emit(innerDate.value, false);
      } else {
        currentView.value = "date";
        if (["month", "year", "date", "week"].includes(selectionMode.value)) {
          emit(innerDate.value, true);
          await nextTick();
          handleFocusPicker();
        }
      }
      handlePanelChange("month");
    };
    const handleYearPick = async (year2) => {
      if (selectionMode.value === "year") {
        innerDate.value = innerDate.value.startOf("year").year(year2);
        emit(innerDate.value, false);
      } else {
        innerDate.value = innerDate.value.year(year2);
        currentView.value = "month";
        if (["month", "year", "date", "week"].includes(selectionMode.value)) {
          emit(innerDate.value, true);
          await nextTick();
          handleFocusPicker();
        }
      }
      handlePanelChange("year");
    };
    const showPicker = async (view) => {
      currentView.value = view;
      await nextTick();
      handleFocusPicker();
    };
    const showTime = computed(() => props2.type === "datetime" || props2.type === "datetimerange");
    const footerVisible = computed(() => {
      return showTime.value || selectionMode.value === "dates";
    });
    const onConfirm = () => {
      if (selectionMode.value === "dates") {
        emit(props2.parsedValue);
      } else {
        let result = props2.parsedValue;
        if (!result) {
          const defaultTimeD2 = dayjs(defaultTime).locale(lang.value);
          const defaultValueD = getDefaultValue2();
          result = defaultTimeD2.year(defaultValueD.year()).month(defaultValueD.month()).date(defaultValueD.date());
        }
        innerDate.value = result;
        emit(result);
      }
    };
    const changeToNow = () => {
      const now2 = dayjs().locale(lang.value);
      const nowDate = now2.toDate();
      if ((!disabledDate2 || !disabledDate2(nowDate)) && checkDateWithinRange(nowDate)) {
        innerDate.value = dayjs().locale(lang.value);
        emit(innerDate.value);
      }
    };
    const timeFormat = computed(() => {
      return extractTimeFormat(props2.format);
    });
    const dateFormat = computed(() => {
      return extractDateFormat(props2.format);
    });
    const visibleTime = computed(() => {
      if (userInputTime.value)
        return userInputTime.value;
      if (!props2.parsedValue && !defaultValue.value)
        return;
      return (props2.parsedValue || innerDate.value).format(timeFormat.value);
    });
    const visibleDate = computed(() => {
      if (userInputDate.value)
        return userInputDate.value;
      if (!props2.parsedValue && !defaultValue.value)
        return;
      return (props2.parsedValue || innerDate.value).format(dateFormat.value);
    });
    const timePickerVisible = ref(false);
    const onTimePickerInputFocus = () => {
      timePickerVisible.value = true;
    };
    const handleTimePickClose = () => {
      timePickerVisible.value = false;
    };
    const getUnits = (date2) => {
      return {
        hour: date2.hour(),
        minute: date2.minute(),
        second: date2.second(),
        year: date2.year(),
        month: date2.month(),
        date: date2.date()
      };
    };
    const handleTimePick = (value, visible, first) => {
      const { hour, minute, second } = getUnits(value);
      const newDate = props2.parsedValue ? props2.parsedValue.hour(hour).minute(minute).second(second) : value;
      innerDate.value = newDate;
      emit(innerDate.value, true);
      if (!first) {
        timePickerVisible.value = visible;
      }
    };
    const handleVisibleTimeChange = (value) => {
      const newDate = dayjs(value, timeFormat.value).locale(lang.value);
      if (newDate.isValid() && checkDateWithinRange(newDate)) {
        const { year: year2, month: month2, date: date2 } = getUnits(innerDate.value);
        innerDate.value = newDate.year(year2).month(month2).date(date2);
        userInputTime.value = null;
        timePickerVisible.value = false;
        emit(innerDate.value, true);
      }
    };
    const handleVisibleDateChange = (value) => {
      const newDate = dayjs(value, dateFormat.value).locale(lang.value);
      if (newDate.isValid()) {
        if (disabledDate2 && disabledDate2(newDate.toDate())) {
          return;
        }
        const { hour, minute, second } = getUnits(innerDate.value);
        innerDate.value = newDate.hour(hour).minute(minute).second(second);
        userInputDate.value = null;
        emit(innerDate.value, true);
      }
    };
    const isValidValue = (date2) => {
      return dayjs.isDayjs(date2) && date2.isValid() && (disabledDate2 ? !disabledDate2(date2.toDate()) : true);
    };
    const formatToString = (value) => {
      if (selectionMode.value === "dates") {
        return value.map((_2) => _2.format(props2.format));
      }
      return value.format(props2.format);
    };
    const parseUserInput = (value) => {
      return dayjs(value, props2.format).locale(lang.value);
    };
    const getDefaultValue2 = () => {
      const parseDate2 = dayjs(defaultValue.value).locale(lang.value);
      if (!defaultValue.value) {
        const defaultTimeDValue = defaultTimeD.value;
        return dayjs().hour(defaultTimeDValue.hour()).minute(defaultTimeDValue.minute()).second(defaultTimeDValue.second()).locale(lang.value);
      }
      return parseDate2;
    };
    const handleFocusPicker = async () => {
      var _a2;
      if (["week", "month", "year", "date"].includes(selectionMode.value)) {
        (_a2 = currentViewRef.value) == null ? void 0 : _a2.focus();
        if (selectionMode.value === "week") {
          handleKeyControl(EVENT_CODE.down);
        }
      }
    };
    const handleKeydownTable = (event) => {
      const { code } = event;
      const validCode = [
        EVENT_CODE.up,
        EVENT_CODE.down,
        EVENT_CODE.left,
        EVENT_CODE.right,
        EVENT_CODE.home,
        EVENT_CODE.end,
        EVENT_CODE.pageUp,
        EVENT_CODE.pageDown
      ];
      if (validCode.includes(code)) {
        handleKeyControl(code);
        event.stopPropagation();
        event.preventDefault();
      }
      if ([EVENT_CODE.enter, EVENT_CODE.space].includes(code) && userInputDate.value === null && userInputTime.value === null) {
        event.preventDefault();
        emit(innerDate.value, false);
      }
    };
    const handleKeyControl = (code) => {
      var _a2;
      const { up, down, left, right, home, end, pageUp, pageDown } = EVENT_CODE;
      const mapping = {
        year: {
          [up]: -4,
          [down]: 4,
          [left]: -1,
          [right]: 1,
          offset: (date2, step) => date2.setFullYear(date2.getFullYear() + step)
        },
        month: {
          [up]: -4,
          [down]: 4,
          [left]: -1,
          [right]: 1,
          offset: (date2, step) => date2.setMonth(date2.getMonth() + step)
        },
        week: {
          [up]: -1,
          [down]: 1,
          [left]: -1,
          [right]: 1,
          offset: (date2, step) => date2.setDate(date2.getDate() + step * 7)
        },
        date: {
          [up]: -7,
          [down]: 7,
          [left]: -1,
          [right]: 1,
          [home]: (date2) => -date2.getDay(),
          [end]: (date2) => -date2.getDay() + 6,
          [pageUp]: (date2) => -new Date(date2.getFullYear(), date2.getMonth(), 0).getDate(),
          [pageDown]: (date2) => new Date(date2.getFullYear(), date2.getMonth() + 1, 0).getDate(),
          offset: (date2, step) => date2.setDate(date2.getDate() + step)
        }
      };
      const newDate = innerDate.value.toDate();
      while (Math.abs(innerDate.value.diff(newDate, "year", true)) < 1) {
        const map = mapping[keyboardMode.value];
        if (!map)
          return;
        map.offset(newDate, isFunction$1(map[code]) ? map[code](newDate) : (_a2 = map[code]) != null ? _a2 : 0);
        if (disabledDate2 && disabledDate2(newDate)) {
          break;
        }
        const result = dayjs(newDate).locale(lang.value);
        innerDate.value = result;
        contextEmit("pick", result, true);
        break;
      }
    };
    const handlePanelChange = (mode) => {
      contextEmit("panel-change", innerDate.value.toDate(), mode, currentView.value);
    };
    watch(() => selectionMode.value, (val) => {
      if (["month", "year"].includes(val)) {
        currentView.value = val;
        return;
      }
      currentView.value = "date";
    }, { immediate: true });
    watch(() => currentView.value, () => {
      popper2 == null ? void 0 : popper2.updatePopper();
    });
    watch(() => defaultValue.value, (val) => {
      if (val) {
        innerDate.value = getDefaultValue2();
      }
    }, { immediate: true });
    watch(() => props2.parsedValue, (val) => {
      if (val) {
        if (selectionMode.value === "dates")
          return;
        if (Array.isArray(val))
          return;
        innerDate.value = val;
      } else {
        innerDate.value = getDefaultValue2();
      }
    }, { immediate: true });
    contextEmit("set-picker-option", ["isValidValue", isValidValue]);
    contextEmit("set-picker-option", ["formatToString", formatToString]);
    contextEmit("set-picker-option", ["parseUserInput", parseUserInput]);
    contextEmit("set-picker-option", ["handleFocusPicker", handleFocusPicker]);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass([
          unref(ppNs).b(),
          unref(dpNs).b(),
          {
            "has-sidebar": _ctx.$slots.sidebar || unref(hasShortcuts),
            "has-time": unref(showTime)
          }
        ])
      }, [
        createBaseVNode("div", {
          class: normalizeClass(unref(ppNs).e("body-wrapper"))
        }, [
          renderSlot(_ctx.$slots, "sidebar", {
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }),
          unref(hasShortcuts) ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(shortcuts), (shortcut, key) => {
              return openBlock(), createElementBlock("button", {
                key,
                type: "button",
                class: normalizeClass(unref(ppNs).e("shortcut")),
                onClick: ($event) => handleShortcutClick(shortcut)
              }, toDisplayString(shortcut.text), 11, _hoisted_1$K);
            }), 128))
          ], 2)) : createCommentVNode("v-if", true),
          createBaseVNode("div", {
            class: normalizeClass(unref(ppNs).e("body"))
          }, [
            unref(showTime) ? (openBlock(), createElementBlock("div", {
              key: 0,
              class: normalizeClass(unref(dpNs).e("time-header"))
            }, [
              createBaseVNode("span", {
                class: normalizeClass(unref(dpNs).e("editor-wrap"))
              }, [
                createVNode(unref(ElInput), {
                  placeholder: unref(t2)("el.datepicker.selectDate"),
                  "model-value": unref(visibleDate),
                  size: "small",
                  "validate-event": false,
                  onInput: _cache[0] || (_cache[0] = (val) => userInputDate.value = val),
                  onChange: handleVisibleDateChange
                }, null, 8, ["placeholder", "model-value"])
              ], 2),
              withDirectives((openBlock(), createElementBlock("span", {
                class: normalizeClass(unref(dpNs).e("editor-wrap"))
              }, [
                createVNode(unref(ElInput), {
                  placeholder: unref(t2)("el.datepicker.selectTime"),
                  "model-value": unref(visibleTime),
                  size: "small",
                  "validate-event": false,
                  onFocus: onTimePickerInputFocus,
                  onInput: _cache[1] || (_cache[1] = (val) => userInputTime.value = val),
                  onChange: handleVisibleTimeChange
                }, null, 8, ["placeholder", "model-value"]),
                createVNode(unref(TimePickPanel), {
                  visible: timePickerVisible.value,
                  format: unref(timeFormat),
                  "time-arrow-control": unref(arrowControl),
                  "parsed-value": innerDate.value,
                  onPick: handleTimePick
                }, null, 8, ["visible", "format", "time-arrow-control", "parsed-value"])
              ], 2)), [
                [unref(ClickOutside), handleTimePickClose]
              ])
            ], 2)) : createCommentVNode("v-if", true),
            withDirectives(createBaseVNode("div", {
              class: normalizeClass([
                unref(dpNs).e("header"),
                (currentView.value === "year" || currentView.value === "month") && unref(dpNs).e("header--bordered")
              ])
            }, [
              createBaseVNode("span", {
                class: normalizeClass(unref(dpNs).e("prev-btn"))
              }, [
                createBaseVNode("button", {
                  type: "button",
                  "aria-label": unref(t2)(`el.datepicker.prevYear`),
                  class: normalizeClass(["d-arrow-left", unref(ppNs).e("icon-btn")]),
                  onClick: _cache[2] || (_cache[2] = ($event) => moveByYear(false))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_2$x),
                withDirectives(createBaseVNode("button", {
                  type: "button",
                  "aria-label": unref(t2)(`el.datepicker.prevMonth`),
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "arrow-left"]),
                  onClick: _cache[3] || (_cache[3] = ($event) => moveByMonth(false))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_3$t), [
                  [vShow, currentView.value === "date"]
                ])
              ], 2),
              createBaseVNode("span", {
                role: "button",
                class: normalizeClass(unref(dpNs).e("header-label")),
                "aria-live": "polite",
                tabindex: "0",
                onKeydown: _cache[4] || (_cache[4] = withKeys(($event) => showPicker("year"), ["enter"])),
                onClick: _cache[5] || (_cache[5] = ($event) => showPicker("year"))
              }, toDisplayString(unref(yearLabel)), 35),
              withDirectives(createBaseVNode("span", {
                role: "button",
                "aria-live": "polite",
                tabindex: "0",
                class: normalizeClass([
                  unref(dpNs).e("header-label"),
                  { active: currentView.value === "month" }
                ]),
                onKeydown: _cache[6] || (_cache[6] = withKeys(($event) => showPicker("month"), ["enter"])),
                onClick: _cache[7] || (_cache[7] = ($event) => showPicker("month"))
              }, toDisplayString(unref(t2)(`el.datepicker.month${unref(month) + 1}`)), 35), [
                [vShow, currentView.value === "date"]
              ]),
              createBaseVNode("span", {
                class: normalizeClass(unref(dpNs).e("next-btn"))
              }, [
                withDirectives(createBaseVNode("button", {
                  type: "button",
                  "aria-label": unref(t2)(`el.datepicker.nextMonth`),
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "arrow-right"]),
                  onClick: _cache[8] || (_cache[8] = ($event) => moveByMonth(true))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_4$m), [
                  [vShow, currentView.value === "date"]
                ]),
                createBaseVNode("button", {
                  type: "button",
                  "aria-label": unref(t2)(`el.datepicker.nextYear`),
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "d-arrow-right"]),
                  onClick: _cache[9] || (_cache[9] = ($event) => moveByYear(true))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_5$c)
              ], 2)
            ], 2), [
              [vShow, currentView.value !== "time"]
            ]),
            createBaseVNode("div", {
              class: normalizeClass(unref(ppNs).e("content")),
              onKeydown: handleKeydownTable
            }, [
              currentView.value === "date" ? (openBlock(), createBlock(DateTable, {
                key: 0,
                ref_key: "currentViewRef",
                ref: currentViewRef,
                "selection-mode": unref(selectionMode),
                date: innerDate.value,
                "parsed-value": _ctx.parsedValue,
                "disabled-date": unref(disabledDate2),
                "cell-class-name": unref(cellClassName),
                onPick: handleDatePick
              }, null, 8, ["selection-mode", "date", "parsed-value", "disabled-date", "cell-class-name"])) : createCommentVNode("v-if", true),
              currentView.value === "year" ? (openBlock(), createBlock(YearTable, {
                key: 1,
                ref_key: "currentViewRef",
                ref: currentViewRef,
                date: innerDate.value,
                "disabled-date": unref(disabledDate2),
                "parsed-value": _ctx.parsedValue,
                onPick: handleYearPick
              }, null, 8, ["date", "disabled-date", "parsed-value"])) : createCommentVNode("v-if", true),
              currentView.value === "month" ? (openBlock(), createBlock(MonthTable, {
                key: 2,
                ref_key: "currentViewRef",
                ref: currentViewRef,
                date: innerDate.value,
                "parsed-value": _ctx.parsedValue,
                "disabled-date": unref(disabledDate2),
                onPick: handleMonthPick
              }, null, 8, ["date", "parsed-value", "disabled-date"])) : createCommentVNode("v-if", true)
            ], 34)
          ], 2)
        ], 2),
        withDirectives(createBaseVNode("div", {
          class: normalizeClass(unref(ppNs).e("footer"))
        }, [
          withDirectives(createVNode(unref(ElButton), {
            text: "",
            size: "small",
            class: normalizeClass(unref(ppNs).e("link-btn")),
            onClick: changeToNow
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(unref(t2)("el.datepicker.now")), 1)
            ]),
            _: 1
          }, 8, ["class"]), [
            [vShow, unref(selectionMode) !== "dates"]
          ]),
          createVNode(unref(ElButton), {
            plain: "",
            size: "small",
            class: normalizeClass(unref(ppNs).e("link-btn")),
            onClick: onConfirm
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(unref(t2)("el.datepicker.confirm")), 1)
            ]),
            _: 1
          }, 8, ["class"])
        ], 2), [
          [vShow, unref(footerVisible) && currentView.value === "date"]
        ])
      ], 2);
    };
  }
});
var DatePickPanel = _export_sfc(_sfc_main$10, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);
var panelDateRangeProps = buildProps({
  ...panelSharedProps,
  ...panelRangeSharedProps
});
var useShortcut = (lang) => {
  const { emit } = getCurrentInstance();
  const attrs = useAttrs();
  const slots = useSlots();
  const handleShortcutClick = (shortcut) => {
    const shortcutValues = isFunction$1(shortcut.value) ? shortcut.value() : shortcut.value;
    if (shortcutValues) {
      emit("pick", [
        dayjs(shortcutValues[0]).locale(lang.value),
        dayjs(shortcutValues[1]).locale(lang.value)
      ]);
      return;
    }
    if (shortcut.onClick) {
      shortcut.onClick({
        attrs,
        slots,
        emit
      });
    }
  };
  return handleShortcutClick;
};
var useRangePicker = (props2, {
  defaultValue,
  leftDate,
  rightDate,
  unit,
  onParsedValueChanged
}) => {
  const { emit } = getCurrentInstance();
  const { pickerNs } = inject(ROOT_PICKER_INJECTION_KEY);
  const drpNs = useNamespace("date-range-picker");
  const { t: t2, lang } = useLocale();
  const handleShortcutClick = useShortcut(lang);
  const minDate = ref();
  const maxDate = ref();
  const rangeState = ref({
    endDate: null,
    selecting: false
  });
  const handleChangeRange = (val) => {
    rangeState.value = val;
  };
  const handleRangeConfirm = (visible = false) => {
    const _minDate = unref(minDate);
    const _maxDate = unref(maxDate);
    if (isValidRange([_minDate, _maxDate])) {
      emit("pick", [_minDate, _maxDate], visible);
    }
  };
  const onSelect = (selecting) => {
    rangeState.value.selecting = selecting;
    if (!selecting) {
      rangeState.value.endDate = null;
    }
  };
  const restoreDefault = () => {
    const [start, end] = getDefaultValue(unref(defaultValue), {
      lang: unref(lang),
      unit,
      unlinkPanels: props2.unlinkPanels
    });
    minDate.value = void 0;
    maxDate.value = void 0;
    leftDate.value = start;
    rightDate.value = end;
  };
  watch(defaultValue, (val) => {
    if (val) {
      restoreDefault();
    }
  }, { immediate: true });
  watch(() => props2.parsedValue, (parsedValue2) => {
    if (isArray(parsedValue2) && parsedValue2.length === 2) {
      const [start, end] = parsedValue2;
      minDate.value = start;
      leftDate.value = start;
      maxDate.value = end;
      onParsedValueChanged(unref(minDate), unref(maxDate));
    } else {
      restoreDefault();
    }
  }, { immediate: true });
  return {
    minDate,
    maxDate,
    rangeState,
    lang,
    ppNs: pickerNs,
    drpNs,
    handleChangeRange,
    handleRangeConfirm,
    handleShortcutClick,
    onSelect,
    t: t2
  };
};
var _hoisted_1$J = ["onClick"];
var _hoisted_2$w = ["disabled"];
var _hoisted_3$s = ["disabled"];
var _hoisted_4$l = ["disabled"];
var _hoisted_5$b = ["disabled"];
var _sfc_main$$ = defineComponent({
  __name: "panel-date-range",
  props: panelDateRangeProps,
  emits: [
    "pick",
    "set-picker-option",
    "calendar-change",
    "panel-change"
  ],
  setup(__props, { emit }) {
    const props2 = __props;
    const unit = "month";
    const pickerBase = inject("EP_PICKER_BASE");
    const {
      disabledDate: disabledDate2,
      cellClassName,
      format: format2,
      defaultTime,
      arrowControl,
      clearable
    } = pickerBase.props;
    const shortcuts = toRef(pickerBase.props, "shortcuts");
    const defaultValue = toRef(pickerBase.props, "defaultValue");
    const { lang } = useLocale();
    const leftDate = ref(dayjs().locale(lang.value));
    const rightDate = ref(dayjs().locale(lang.value).add(1, unit));
    const {
      minDate,
      maxDate,
      rangeState,
      ppNs,
      drpNs,
      handleChangeRange,
      handleRangeConfirm,
      handleShortcutClick,
      onSelect,
      t: t2
    } = useRangePicker(props2, {
      defaultValue,
      leftDate,
      rightDate,
      unit,
      onParsedValueChanged
    });
    const dateUserInput = ref({
      min: null,
      max: null
    });
    const timeUserInput = ref({
      min: null,
      max: null
    });
    const leftLabel = computed(() => {
      return `${leftDate.value.year()} ${t2("el.datepicker.year")} ${t2(`el.datepicker.month${leftDate.value.month() + 1}`)}`;
    });
    const rightLabel = computed(() => {
      return `${rightDate.value.year()} ${t2("el.datepicker.year")} ${t2(`el.datepicker.month${rightDate.value.month() + 1}`)}`;
    });
    const leftYear = computed(() => {
      return leftDate.value.year();
    });
    const leftMonth = computed(() => {
      return leftDate.value.month();
    });
    const rightYear = computed(() => {
      return rightDate.value.year();
    });
    const rightMonth = computed(() => {
      return rightDate.value.month();
    });
    const hasShortcuts = computed(() => !!shortcuts.value.length);
    const minVisibleDate = computed(() => {
      if (dateUserInput.value.min !== null)
        return dateUserInput.value.min;
      if (minDate.value)
        return minDate.value.format(dateFormat.value);
      return "";
    });
    const maxVisibleDate = computed(() => {
      if (dateUserInput.value.max !== null)
        return dateUserInput.value.max;
      if (maxDate.value || minDate.value)
        return (maxDate.value || minDate.value).format(dateFormat.value);
      return "";
    });
    const minVisibleTime = computed(() => {
      if (timeUserInput.value.min !== null)
        return timeUserInput.value.min;
      if (minDate.value)
        return minDate.value.format(timeFormat.value);
      return "";
    });
    const maxVisibleTime = computed(() => {
      if (timeUserInput.value.max !== null)
        return timeUserInput.value.max;
      if (maxDate.value || minDate.value)
        return (maxDate.value || minDate.value).format(timeFormat.value);
      return "";
    });
    const timeFormat = computed(() => {
      return extractTimeFormat(format2);
    });
    const dateFormat = computed(() => {
      return extractDateFormat(format2);
    });
    const leftPrevYear = () => {
      leftDate.value = leftDate.value.subtract(1, "year");
      if (!props2.unlinkPanels) {
        rightDate.value = leftDate.value.add(1, "month");
      }
      handlePanelChange("year");
    };
    const leftPrevMonth = () => {
      leftDate.value = leftDate.value.subtract(1, "month");
      if (!props2.unlinkPanels) {
        rightDate.value = leftDate.value.add(1, "month");
      }
      handlePanelChange("month");
    };
    const rightNextYear = () => {
      if (!props2.unlinkPanels) {
        leftDate.value = leftDate.value.add(1, "year");
        rightDate.value = leftDate.value.add(1, "month");
      } else {
        rightDate.value = rightDate.value.add(1, "year");
      }
      handlePanelChange("year");
    };
    const rightNextMonth = () => {
      if (!props2.unlinkPanels) {
        leftDate.value = leftDate.value.add(1, "month");
        rightDate.value = leftDate.value.add(1, "month");
      } else {
        rightDate.value = rightDate.value.add(1, "month");
      }
      handlePanelChange("month");
    };
    const leftNextYear = () => {
      leftDate.value = leftDate.value.add(1, "year");
      handlePanelChange("year");
    };
    const leftNextMonth = () => {
      leftDate.value = leftDate.value.add(1, "month");
      handlePanelChange("month");
    };
    const rightPrevYear = () => {
      rightDate.value = rightDate.value.subtract(1, "year");
      handlePanelChange("year");
    };
    const rightPrevMonth = () => {
      rightDate.value = rightDate.value.subtract(1, "month");
      handlePanelChange("month");
    };
    const handlePanelChange = (mode) => {
      emit("panel-change", [leftDate.value.toDate(), rightDate.value.toDate()], mode);
    };
    const enableMonthArrow = computed(() => {
      const nextMonth = (leftMonth.value + 1) % 12;
      const yearOffset = leftMonth.value + 1 >= 12 ? 1 : 0;
      return props2.unlinkPanels && new Date(leftYear.value + yearOffset, nextMonth) < new Date(rightYear.value, rightMonth.value);
    });
    const enableYearArrow = computed(() => {
      return props2.unlinkPanels && rightYear.value * 12 + rightMonth.value - (leftYear.value * 12 + leftMonth.value + 1) >= 12;
    });
    const btnDisabled = computed(() => {
      return !(minDate.value && maxDate.value && !rangeState.value.selecting && isValidRange([minDate.value, maxDate.value]));
    });
    const showTime = computed(() => props2.type === "datetime" || props2.type === "datetimerange");
    const formatEmit = (emitDayjs, index) => {
      if (!emitDayjs)
        return;
      if (defaultTime) {
        const defaultTimeD = dayjs(defaultTime[index] || defaultTime).locale(lang.value);
        return defaultTimeD.year(emitDayjs.year()).month(emitDayjs.month()).date(emitDayjs.date());
      }
      return emitDayjs;
    };
    const handleRangePick = (val, close2 = true) => {
      const min_ = val.minDate;
      const max_ = val.maxDate;
      const minDate_ = formatEmit(min_, 0);
      const maxDate_ = formatEmit(max_, 1);
      if (maxDate.value === maxDate_ && minDate.value === minDate_) {
        return;
      }
      emit("calendar-change", [min_.toDate(), max_ && max_.toDate()]);
      maxDate.value = maxDate_;
      minDate.value = minDate_;
      if (!close2 || showTime.value)
        return;
      handleRangeConfirm();
    };
    const minTimePickerVisible = ref(false);
    const maxTimePickerVisible = ref(false);
    const handleMinTimeClose = () => {
      minTimePickerVisible.value = false;
    };
    const handleMaxTimeClose = () => {
      maxTimePickerVisible.value = false;
    };
    const handleDateInput = (value, type) => {
      dateUserInput.value[type] = value;
      const parsedValueD = dayjs(value, dateFormat.value).locale(lang.value);
      if (parsedValueD.isValid()) {
        if (disabledDate2 && disabledDate2(parsedValueD.toDate())) {
          return;
        }
        if (type === "min") {
          leftDate.value = parsedValueD;
          minDate.value = (minDate.value || leftDate.value).year(parsedValueD.year()).month(parsedValueD.month()).date(parsedValueD.date());
          if (!props2.unlinkPanels) {
            rightDate.value = parsedValueD.add(1, "month");
            maxDate.value = minDate.value.add(1, "month");
          }
        } else {
          rightDate.value = parsedValueD;
          maxDate.value = (maxDate.value || rightDate.value).year(parsedValueD.year()).month(parsedValueD.month()).date(parsedValueD.date());
          if (!props2.unlinkPanels) {
            leftDate.value = parsedValueD.subtract(1, "month");
            minDate.value = maxDate.value.subtract(1, "month");
          }
        }
      }
    };
    const handleDateChange = (_2, type) => {
      dateUserInput.value[type] = null;
    };
    const handleTimeInput = (value, type) => {
      timeUserInput.value[type] = value;
      const parsedValueD = dayjs(value, timeFormat.value).locale(lang.value);
      if (parsedValueD.isValid()) {
        if (type === "min") {
          minTimePickerVisible.value = true;
          minDate.value = (minDate.value || leftDate.value).hour(parsedValueD.hour()).minute(parsedValueD.minute()).second(parsedValueD.second());
          if (!maxDate.value || maxDate.value.isBefore(minDate.value)) {
            maxDate.value = minDate.value;
          }
        } else {
          maxTimePickerVisible.value = true;
          maxDate.value = (maxDate.value || rightDate.value).hour(parsedValueD.hour()).minute(parsedValueD.minute()).second(parsedValueD.second());
          rightDate.value = maxDate.value;
          if (maxDate.value && maxDate.value.isBefore(minDate.value)) {
            minDate.value = maxDate.value;
          }
        }
      }
    };
    const handleTimeChange = (value, type) => {
      timeUserInput.value[type] = null;
      if (type === "min") {
        leftDate.value = minDate.value;
        minTimePickerVisible.value = false;
      } else {
        rightDate.value = maxDate.value;
        maxTimePickerVisible.value = false;
      }
    };
    const handleMinTimePick = (value, visible, first) => {
      if (timeUserInput.value.min)
        return;
      if (value) {
        leftDate.value = value;
        minDate.value = (minDate.value || leftDate.value).hour(value.hour()).minute(value.minute()).second(value.second());
      }
      if (!first) {
        minTimePickerVisible.value = visible;
      }
      if (!maxDate.value || maxDate.value.isBefore(minDate.value)) {
        maxDate.value = minDate.value;
        rightDate.value = value;
      }
    };
    const handleMaxTimePick = (value, visible, first) => {
      if (timeUserInput.value.max)
        return;
      if (value) {
        rightDate.value = value;
        maxDate.value = (maxDate.value || rightDate.value).hour(value.hour()).minute(value.minute()).second(value.second());
      }
      if (!first) {
        maxTimePickerVisible.value = visible;
      }
      if (maxDate.value && maxDate.value.isBefore(minDate.value)) {
        minDate.value = maxDate.value;
      }
    };
    const handleClear = () => {
      leftDate.value = getDefaultValue(unref(defaultValue), {
        lang: unref(lang),
        unit: "month",
        unlinkPanels: props2.unlinkPanels
      })[0];
      rightDate.value = leftDate.value.add(1, "month");
      emit("pick", null);
    };
    const formatToString = (value) => {
      return isArray(value) ? value.map((_2) => _2.format(format2)) : value.format(format2);
    };
    const parseUserInput = (value) => {
      return isArray(value) ? value.map((_2) => dayjs(_2, format2).locale(lang.value)) : dayjs(value, format2).locale(lang.value);
    };
    function onParsedValueChanged(minDate2, maxDate2) {
      if (props2.unlinkPanels && maxDate2) {
        const minDateYear = (minDate2 == null ? void 0 : minDate2.year()) || 0;
        const minDateMonth = (minDate2 == null ? void 0 : minDate2.month()) || 0;
        const maxDateYear = maxDate2.year();
        const maxDateMonth = maxDate2.month();
        rightDate.value = minDateYear === maxDateYear && minDateMonth === maxDateMonth ? maxDate2.add(1, unit) : maxDate2;
      } else {
        rightDate.value = leftDate.value.add(1, unit);
        if (maxDate2) {
          rightDate.value = rightDate.value.hour(maxDate2.hour()).minute(maxDate2.minute()).second(maxDate2.second());
        }
      }
    }
    emit("set-picker-option", ["isValidValue", isValidRange]);
    emit("set-picker-option", ["parseUserInput", parseUserInput]);
    emit("set-picker-option", ["formatToString", formatToString]);
    emit("set-picker-option", ["handleClear", handleClear]);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass([
          unref(ppNs).b(),
          unref(drpNs).b(),
          {
            "has-sidebar": _ctx.$slots.sidebar || unref(hasShortcuts),
            "has-time": unref(showTime)
          }
        ])
      }, [
        createBaseVNode("div", {
          class: normalizeClass(unref(ppNs).e("body-wrapper"))
        }, [
          renderSlot(_ctx.$slots, "sidebar", {
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }),
          unref(hasShortcuts) ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(shortcuts), (shortcut, key) => {
              return openBlock(), createElementBlock("button", {
                key,
                type: "button",
                class: normalizeClass(unref(ppNs).e("shortcut")),
                onClick: ($event) => unref(handleShortcutClick)(shortcut)
              }, toDisplayString(shortcut.text), 11, _hoisted_1$J);
            }), 128))
          ], 2)) : createCommentVNode("v-if", true),
          createBaseVNode("div", {
            class: normalizeClass(unref(ppNs).e("body"))
          }, [
            unref(showTime) ? (openBlock(), createElementBlock("div", {
              key: 0,
              class: normalizeClass(unref(drpNs).e("time-header"))
            }, [
              createBaseVNode("span", {
                class: normalizeClass(unref(drpNs).e("editors-wrap"))
              }, [
                createBaseVNode("span", {
                  class: normalizeClass(unref(drpNs).e("time-picker-wrap"))
                }, [
                  createVNode(unref(ElInput), {
                    size: "small",
                    disabled: unref(rangeState).selecting,
                    placeholder: unref(t2)("el.datepicker.startDate"),
                    class: normalizeClass(unref(drpNs).e("editor")),
                    "model-value": unref(minVisibleDate),
                    "validate-event": false,
                    onInput: _cache[0] || (_cache[0] = (val) => handleDateInput(val, "min")),
                    onChange: _cache[1] || (_cache[1] = (val) => handleDateChange(val, "min"))
                  }, null, 8, ["disabled", "placeholder", "class", "model-value"])
                ], 2),
                withDirectives((openBlock(), createElementBlock("span", {
                  class: normalizeClass(unref(drpNs).e("time-picker-wrap"))
                }, [
                  createVNode(unref(ElInput), {
                    size: "small",
                    class: normalizeClass(unref(drpNs).e("editor")),
                    disabled: unref(rangeState).selecting,
                    placeholder: unref(t2)("el.datepicker.startTime"),
                    "model-value": unref(minVisibleTime),
                    "validate-event": false,
                    onFocus: _cache[2] || (_cache[2] = ($event) => minTimePickerVisible.value = true),
                    onInput: _cache[3] || (_cache[3] = (val) => handleTimeInput(val, "min")),
                    onChange: _cache[4] || (_cache[4] = (val) => handleTimeChange(val, "min"))
                  }, null, 8, ["class", "disabled", "placeholder", "model-value"]),
                  createVNode(unref(TimePickPanel), {
                    visible: minTimePickerVisible.value,
                    format: unref(timeFormat),
                    "datetime-role": "start",
                    "time-arrow-control": unref(arrowControl),
                    "parsed-value": leftDate.value,
                    onPick: handleMinTimePick
                  }, null, 8, ["visible", "format", "time-arrow-control", "parsed-value"])
                ], 2)), [
                  [unref(ClickOutside), handleMinTimeClose]
                ])
              ], 2),
              createBaseVNode("span", null, [
                createVNode(unref(ElIcon), null, {
                  default: withCtx(() => [
                    createVNode(unref(arrow_right_default))
                  ]),
                  _: 1
                })
              ]),
              createBaseVNode("span", {
                class: normalizeClass([unref(drpNs).e("editors-wrap"), "is-right"])
              }, [
                createBaseVNode("span", {
                  class: normalizeClass(unref(drpNs).e("time-picker-wrap"))
                }, [
                  createVNode(unref(ElInput), {
                    size: "small",
                    class: normalizeClass(unref(drpNs).e("editor")),
                    disabled: unref(rangeState).selecting,
                    placeholder: unref(t2)("el.datepicker.endDate"),
                    "model-value": unref(maxVisibleDate),
                    readonly: !unref(minDate),
                    "validate-event": false,
                    onInput: _cache[5] || (_cache[5] = (val) => handleDateInput(val, "max")),
                    onChange: _cache[6] || (_cache[6] = (val) => handleDateChange(val, "max"))
                  }, null, 8, ["class", "disabled", "placeholder", "model-value", "readonly"])
                ], 2),
                withDirectives((openBlock(), createElementBlock("span", {
                  class: normalizeClass(unref(drpNs).e("time-picker-wrap"))
                }, [
                  createVNode(unref(ElInput), {
                    size: "small",
                    class: normalizeClass(unref(drpNs).e("editor")),
                    disabled: unref(rangeState).selecting,
                    placeholder: unref(t2)("el.datepicker.endTime"),
                    "model-value": unref(maxVisibleTime),
                    readonly: !unref(minDate),
                    "validate-event": false,
                    onFocus: _cache[7] || (_cache[7] = ($event) => unref(minDate) && (maxTimePickerVisible.value = true)),
                    onInput: _cache[8] || (_cache[8] = (val) => handleTimeInput(val, "max")),
                    onChange: _cache[9] || (_cache[9] = (val) => handleTimeChange(val, "max"))
                  }, null, 8, ["class", "disabled", "placeholder", "model-value", "readonly"]),
                  createVNode(unref(TimePickPanel), {
                    "datetime-role": "end",
                    visible: maxTimePickerVisible.value,
                    format: unref(timeFormat),
                    "time-arrow-control": unref(arrowControl),
                    "parsed-value": rightDate.value,
                    onPick: handleMaxTimePick
                  }, null, 8, ["visible", "format", "time-arrow-control", "parsed-value"])
                ], 2)), [
                  [unref(ClickOutside), handleMaxTimeClose]
                ])
              ], 2)
            ], 2)) : createCommentVNode("v-if", true),
            createBaseVNode("div", {
              class: normalizeClass([[unref(ppNs).e("content"), unref(drpNs).e("content")], "is-left"])
            }, [
              createBaseVNode("div", {
                class: normalizeClass(unref(drpNs).e("header"))
              }, [
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "d-arrow-left"]),
                  onClick: leftPrevYear
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 2),
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "arrow-left"]),
                  onClick: leftPrevMonth
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 2),
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 0,
                  type: "button",
                  disabled: !unref(enableYearArrow),
                  class: normalizeClass([[unref(ppNs).e("icon-btn"), { "is-disabled": !unref(enableYearArrow) }], "d-arrow-right"]),
                  onClick: leftNextYear
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_2$w)) : createCommentVNode("v-if", true),
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 1,
                  type: "button",
                  disabled: !unref(enableMonthArrow),
                  class: normalizeClass([[
                    unref(ppNs).e("icon-btn"),
                    { "is-disabled": !unref(enableMonthArrow) }
                  ], "arrow-right"]),
                  onClick: leftNextMonth
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_3$s)) : createCommentVNode("v-if", true),
                createBaseVNode("div", null, toDisplayString(unref(leftLabel)), 1)
              ], 2),
              createVNode(DateTable, {
                "selection-mode": "range",
                date: leftDate.value,
                "min-date": unref(minDate),
                "max-date": unref(maxDate),
                "range-state": unref(rangeState),
                "disabled-date": unref(disabledDate2),
                "cell-class-name": unref(cellClassName),
                onChangerange: unref(handleChangeRange),
                onPick: handleRangePick,
                onSelect: unref(onSelect)
              }, null, 8, ["date", "min-date", "max-date", "range-state", "disabled-date", "cell-class-name", "onChangerange", "onSelect"])
            ], 2),
            createBaseVNode("div", {
              class: normalizeClass([[unref(ppNs).e("content"), unref(drpNs).e("content")], "is-right"])
            }, [
              createBaseVNode("div", {
                class: normalizeClass(unref(drpNs).e("header"))
              }, [
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 0,
                  type: "button",
                  disabled: !unref(enableYearArrow),
                  class: normalizeClass([[unref(ppNs).e("icon-btn"), { "is-disabled": !unref(enableYearArrow) }], "d-arrow-left"]),
                  onClick: rightPrevYear
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_4$l)) : createCommentVNode("v-if", true),
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 1,
                  type: "button",
                  disabled: !unref(enableMonthArrow),
                  class: normalizeClass([[
                    unref(ppNs).e("icon-btn"),
                    { "is-disabled": !unref(enableMonthArrow) }
                  ], "arrow-left"]),
                  onClick: rightPrevMonth
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_5$b)) : createCommentVNode("v-if", true),
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "d-arrow-right"]),
                  onClick: rightNextYear
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 2),
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "arrow-right"]),
                  onClick: rightNextMonth
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 2),
                createBaseVNode("div", null, toDisplayString(unref(rightLabel)), 1)
              ], 2),
              createVNode(DateTable, {
                "selection-mode": "range",
                date: rightDate.value,
                "min-date": unref(minDate),
                "max-date": unref(maxDate),
                "range-state": unref(rangeState),
                "disabled-date": unref(disabledDate2),
                "cell-class-name": unref(cellClassName),
                onChangerange: unref(handleChangeRange),
                onPick: handleRangePick,
                onSelect: unref(onSelect)
              }, null, 8, ["date", "min-date", "max-date", "range-state", "disabled-date", "cell-class-name", "onChangerange", "onSelect"])
            ], 2)
          ], 2)
        ], 2),
        unref(showTime) ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: normalizeClass(unref(ppNs).e("footer"))
        }, [
          unref(clearable) ? (openBlock(), createBlock(unref(ElButton), {
            key: 0,
            text: "",
            size: "small",
            class: normalizeClass(unref(ppNs).e("link-btn")),
            onClick: handleClear
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(unref(t2)("el.datepicker.clear")), 1)
            ]),
            _: 1
          }, 8, ["class"])) : createCommentVNode("v-if", true),
          createVNode(unref(ElButton), {
            plain: "",
            size: "small",
            class: normalizeClass(unref(ppNs).e("link-btn")),
            disabled: unref(btnDisabled),
            onClick: _cache[10] || (_cache[10] = ($event) => unref(handleRangeConfirm)(false))
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(unref(t2)("el.datepicker.confirm")), 1)
            ]),
            _: 1
          }, 8, ["class", "disabled"])
        ], 2)) : createCommentVNode("v-if", true)
      ], 2);
    };
  }
});
var DateRangePickPanel = _export_sfc(_sfc_main$$, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);
var panelMonthRangeProps = buildProps({
  ...panelRangeSharedProps
});
var panelMonthRangeEmits = ["pick", "set-picker-option"];
var useMonthRangeHeader = ({
  unlinkPanels,
  leftDate,
  rightDate
}) => {
  const { t: t2 } = useLocale();
  const leftPrevYear = () => {
    leftDate.value = leftDate.value.subtract(1, "year");
    if (!unlinkPanels) {
      rightDate.value = rightDate.value.subtract(1, "year");
    }
  };
  const rightNextYear = () => {
    if (!unlinkPanels) {
      leftDate.value = leftDate.value.add(1, "year");
    }
    rightDate.value = rightDate.value.add(1, "year");
  };
  const leftNextYear = () => {
    leftDate.value = leftDate.value.add(1, "year");
  };
  const rightPrevYear = () => {
    rightDate.value = rightDate.value.subtract(1, "year");
  };
  const leftLabel = computed(() => {
    return `${leftDate.value.year()} ${t2("el.datepicker.year")}`;
  });
  const rightLabel = computed(() => {
    return `${rightDate.value.year()} ${t2("el.datepicker.year")}`;
  });
  const leftYear = computed(() => {
    return leftDate.value.year();
  });
  const rightYear = computed(() => {
    return rightDate.value.year() === leftDate.value.year() ? leftDate.value.year() + 1 : rightDate.value.year();
  });
  return {
    leftPrevYear,
    rightNextYear,
    leftNextYear,
    rightPrevYear,
    leftLabel,
    rightLabel,
    leftYear,
    rightYear
  };
};
var _hoisted_1$I = ["onClick"];
var _hoisted_2$v = ["disabled"];
var _hoisted_3$r = ["disabled"];
var __default__$9 = {
  name: "DatePickerMonthRange"
};
var _sfc_main$_ = defineComponent({
  ...__default__$9,
  props: panelMonthRangeProps,
  emits: panelMonthRangeEmits,
  setup(__props, { emit }) {
    const props2 = __props;
    const unit = "year";
    const { lang } = useLocale();
    const pickerBase = inject("EP_PICKER_BASE");
    const { shortcuts, disabledDate: disabledDate2, format: format2 } = pickerBase.props;
    const defaultValue = toRef(pickerBase.props, "defaultValue");
    const leftDate = ref(dayjs().locale(lang.value));
    const rightDate = ref(dayjs().locale(lang.value).add(1, unit));
    const {
      minDate,
      maxDate,
      rangeState,
      ppNs,
      drpNs,
      handleChangeRange,
      handleRangeConfirm,
      handleShortcutClick,
      onSelect
    } = useRangePicker(props2, {
      defaultValue,
      leftDate,
      rightDate,
      unit,
      onParsedValueChanged
    });
    const hasShortcuts = computed(() => !!shortcuts.length);
    const {
      leftPrevYear,
      rightNextYear,
      leftNextYear,
      rightPrevYear,
      leftLabel,
      rightLabel,
      leftYear,
      rightYear
    } = useMonthRangeHeader({
      unlinkPanels: toRef(props2, "unlinkPanels"),
      leftDate,
      rightDate
    });
    const enableYearArrow = computed(() => {
      return props2.unlinkPanels && rightYear.value > leftYear.value + 1;
    });
    const handleRangePick = (val, close2 = true) => {
      const minDate_ = val.minDate;
      const maxDate_ = val.maxDate;
      if (maxDate.value === maxDate_ && minDate.value === minDate_) {
        return;
      }
      maxDate.value = maxDate_;
      minDate.value = minDate_;
      if (!close2)
        return;
      handleRangeConfirm();
    };
    const formatToString = (days) => {
      return days.map((day) => day.format(format2));
    };
    function onParsedValueChanged(minDate2, maxDate2) {
      if (props2.unlinkPanels && maxDate2) {
        const minDateYear = (minDate2 == null ? void 0 : minDate2.year()) || 0;
        const maxDateYear = maxDate2.year();
        rightDate.value = minDateYear === maxDateYear ? maxDate2.add(1, unit) : maxDate2;
      } else {
        rightDate.value = leftDate.value.add(1, unit);
      }
    }
    emit("set-picker-option", ["formatToString", formatToString]);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass([
          unref(ppNs).b(),
          unref(drpNs).b(),
          {
            "has-sidebar": Boolean(_ctx.$slots.sidebar) || unref(hasShortcuts)
          }
        ])
      }, [
        createBaseVNode("div", {
          class: normalizeClass(unref(ppNs).e("body-wrapper"))
        }, [
          renderSlot(_ctx.$slots, "sidebar", {
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }),
          unref(hasShortcuts) ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ppNs).e("sidebar"))
          }, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(shortcuts), (shortcut, key) => {
              return openBlock(), createElementBlock("button", {
                key,
                type: "button",
                class: normalizeClass(unref(ppNs).e("shortcut")),
                onClick: ($event) => unref(handleShortcutClick)(shortcut)
              }, toDisplayString(shortcut.text), 11, _hoisted_1$I);
            }), 128))
          ], 2)) : createCommentVNode("v-if", true),
          createBaseVNode("div", {
            class: normalizeClass(unref(ppNs).e("body"))
          }, [
            createBaseVNode("div", {
              class: normalizeClass([[unref(ppNs).e("content"), unref(drpNs).e("content")], "is-left"])
            }, [
              createBaseVNode("div", {
                class: normalizeClass(unref(drpNs).e("header"))
              }, [
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "d-arrow-left"]),
                  onClick: _cache[0] || (_cache[0] = (...args) => unref(leftPrevYear) && unref(leftPrevYear)(...args))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 2),
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 0,
                  type: "button",
                  disabled: !unref(enableYearArrow),
                  class: normalizeClass([[
                    unref(ppNs).e("icon-btn"),
                    { [unref(ppNs).is("disabled")]: !unref(enableYearArrow) }
                  ], "d-arrow-right"]),
                  onClick: _cache[1] || (_cache[1] = (...args) => unref(leftNextYear) && unref(leftNextYear)(...args))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_2$v)) : createCommentVNode("v-if", true),
                createBaseVNode("div", null, toDisplayString(unref(leftLabel)), 1)
              ], 2),
              createVNode(MonthTable, {
                "selection-mode": "range",
                date: leftDate.value,
                "min-date": unref(minDate),
                "max-date": unref(maxDate),
                "range-state": unref(rangeState),
                "disabled-date": unref(disabledDate2),
                onChangerange: unref(handleChangeRange),
                onPick: handleRangePick,
                onSelect: unref(onSelect)
              }, null, 8, ["date", "min-date", "max-date", "range-state", "disabled-date", "onChangerange", "onSelect"])
            ], 2),
            createBaseVNode("div", {
              class: normalizeClass([[unref(ppNs).e("content"), unref(drpNs).e("content")], "is-right"])
            }, [
              createBaseVNode("div", {
                class: normalizeClass(unref(drpNs).e("header"))
              }, [
                _ctx.unlinkPanels ? (openBlock(), createElementBlock("button", {
                  key: 0,
                  type: "button",
                  disabled: !unref(enableYearArrow),
                  class: normalizeClass([[unref(ppNs).e("icon-btn"), { "is-disabled": !unref(enableYearArrow) }], "d-arrow-left"]),
                  onClick: _cache[2] || (_cache[2] = (...args) => unref(rightPrevYear) && unref(rightPrevYear)(...args))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_left_default))
                    ]),
                    _: 1
                  })
                ], 10, _hoisted_3$r)) : createCommentVNode("v-if", true),
                createBaseVNode("button", {
                  type: "button",
                  class: normalizeClass([unref(ppNs).e("icon-btn"), "d-arrow-right"]),
                  onClick: _cache[3] || (_cache[3] = (...args) => unref(rightNextYear) && unref(rightNextYear)(...args))
                }, [
                  createVNode(unref(ElIcon), null, {
                    default: withCtx(() => [
                      createVNode(unref(d_arrow_right_default))
                    ]),
                    _: 1
                  })
                ], 2),
                createBaseVNode("div", null, toDisplayString(unref(rightLabel)), 1)
              ], 2),
              createVNode(MonthTable, {
                "selection-mode": "range",
                date: rightDate.value,
                "min-date": unref(minDate),
                "max-date": unref(maxDate),
                "range-state": unref(rangeState),
                "disabled-date": unref(disabledDate2),
                onChangerange: unref(handleChangeRange),
                onPick: handleRangePick,
                onSelect: unref(onSelect)
              }, null, 8, ["date", "min-date", "max-date", "range-state", "disabled-date", "onChangerange", "onSelect"])
            ], 2)
          ], 2)
        ], 2)
      ], 2);
    };
  }
});
var MonthRangePickPanel = _export_sfc(_sfc_main$_, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);
var getPanel = function(type) {
  switch (type) {
    case "daterange":
    case "datetimerange": {
      return DateRangePickPanel;
    }
    case "monthrange": {
      return MonthRangePickPanel;
    }
    default: {
      return DatePickPanel;
    }
  }
};
dayjs.extend(localeData);
dayjs.extend(advancedFormat);
dayjs.extend(customParseFormat);
dayjs.extend(weekOfYear);
dayjs.extend(weekYear);
dayjs.extend(dayOfYear);
dayjs.extend(isSameOrAfter);
dayjs.extend(isSameOrBefore);
var DatePicker = defineComponent({
  name: "ElDatePicker",
  install: null,
  props: {
    ...timePickerDefaultProps,
    ...datePickerProps
  },
  emits: ["update:modelValue"],
  setup(props2, {
    expose,
    emit,
    slots
  }) {
    const ns2 = useNamespace("picker-panel");
    provide("ElPopperOptions", reactive(toRef(props2, "popperOptions")));
    provide(ROOT_PICKER_INJECTION_KEY, {
      slots,
      pickerNs: ns2
    });
    const commonPicker = ref();
    const refProps = {
      focus: (focusStartInput = true) => {
        var _a2;
        (_a2 = commonPicker.value) == null ? void 0 : _a2.focus(focusStartInput);
      },
      handleOpen: () => {
        var _a2;
        (_a2 = commonPicker.value) == null ? void 0 : _a2.handleOpen();
      },
      handleClose: () => {
        var _a2;
        (_a2 = commonPicker.value) == null ? void 0 : _a2.handleClose();
      }
    };
    expose(refProps);
    const onModelValueUpdated = (val) => {
      emit("update:modelValue", val);
    };
    return () => {
      var _a2;
      const format2 = (_a2 = props2.format) != null ? _a2 : DEFAULT_FORMATS_DATEPICKER[props2.type] || DEFAULT_FORMATS_DATE;
      const Component2 = getPanel(props2.type);
      return createVNode(CommonPicker, mergeProps(props2, {
        "format": format2,
        "type": props2.type,
        "ref": commonPicker,
        "onUpdate:modelValue": onModelValueUpdated
      }), {
        default: (scopedProps) => createVNode(Component2, scopedProps, null),
        "range-separator": slots["range-separator"]
      });
    };
  }
});
var _DatePicker = DatePicker;
_DatePicker.install = (app) => {
  app.component(_DatePicker.name, _DatePicker);
};
var ElDatePicker = _DatePicker;
var overlayProps = buildProps({
  mask: {
    type: Boolean,
    default: true
  },
  customMaskEvent: {
    type: Boolean,
    default: false
  },
  overlayClass: {
    type: definePropType([
      String,
      Array,
      Object
    ])
  },
  zIndex: {
    type: definePropType([String, Number])
  }
});
var overlayEmits = {
  click: (evt) => evt instanceof MouseEvent
};
var Overlay = defineComponent({
  name: "ElOverlay",
  props: overlayProps,
  emits: overlayEmits,
  setup(props2, { slots, emit }) {
    const ns2 = useNamespace("overlay");
    const onMaskClick = (e2) => {
      emit("click", e2);
    };
    const { onClick, onMousedown, onMouseup } = useSameTarget(props2.customMaskEvent ? void 0 : onMaskClick);
    return () => {
      return props2.mask ? createVNode("div", {
        class: [ns2.b(), props2.overlayClass],
        style: {
          zIndex: props2.zIndex
        },
        onClick,
        onMousedown,
        onMouseup
      }, [renderSlot(slots, "default")], PatchFlags.STYLE | PatchFlags.CLASS | PatchFlags.PROPS, ["onClick", "onMouseup", "onMousedown"]) : h("div", {
        class: props2.overlayClass,
        style: {
          zIndex: props2.zIndex,
          position: "fixed",
          top: "0px",
          right: "0px",
          bottom: "0px",
          left: "0px"
        }
      }, [renderSlot(slots, "default")]);
    };
  }
});
var ElOverlay = Overlay;
var dialogContentProps = buildProps({
  center: {
    type: Boolean,
    default: false
  },
  alignCenter: {
    type: Boolean,
    default: false
  },
  closeIcon: {
    type: iconPropType
  },
  customClass: {
    type: String,
    default: ""
  },
  draggable: {
    type: Boolean,
    default: false
  },
  fullscreen: {
    type: Boolean,
    default: false
  },
  showClose: {
    type: Boolean,
    default: true
  },
  title: {
    type: String,
    default: ""
  }
});
var dialogContentEmits = {
  close: () => true
};
var _hoisted_1$H = ["aria-label"];
var _hoisted_2$u = ["id"];
var __default__$8 = { name: "ElDialogContent" };
var _sfc_main$Z = defineComponent({
  ...__default__$8,
  props: dialogContentProps,
  emits: dialogContentEmits,
  setup(__props) {
    const props2 = __props;
    const { t: t2 } = useLocale();
    const { Close } = CloseComponents;
    const { dialogRef, headerRef, bodyId, ns: ns2, style: style2 } = inject(dialogInjectionKey);
    const { focusTrapRef } = inject(FOCUS_TRAP_INJECTION_KEY);
    const composedDialogRef = composeRefs(focusTrapRef, dialogRef);
    const draggable = computed(() => props2.draggable);
    useDraggable(dialogRef, headerRef, draggable);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref: unref(composedDialogRef),
        class: normalizeClass([
          unref(ns2).b(),
          unref(ns2).is("fullscreen", _ctx.fullscreen),
          unref(ns2).is("draggable", unref(draggable)),
          unref(ns2).is("align-center", _ctx.alignCenter),
          { [unref(ns2).m("center")]: _ctx.center },
          _ctx.customClass
        ]),
        style: normalizeStyle(unref(style2)),
        tabindex: "-1",
        onClick: _cache[1] || (_cache[1] = withModifiers(() => {
        }, ["stop"]))
      }, [
        createBaseVNode("header", {
          ref_key: "headerRef",
          ref: headerRef,
          class: normalizeClass(unref(ns2).e("header"))
        }, [
          renderSlot(_ctx.$slots, "header", {}, () => [
            createBaseVNode("span", {
              role: "heading",
              class: normalizeClass(unref(ns2).e("title"))
            }, toDisplayString(_ctx.title), 3)
          ]),
          _ctx.showClose ? (openBlock(), createElementBlock("button", {
            key: 0,
            "aria-label": unref(t2)("el.dialog.close"),
            class: normalizeClass(unref(ns2).e("headerbtn")),
            type: "button",
            onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("close"))
          }, [
            createVNode(unref(ElIcon), {
              class: normalizeClass(unref(ns2).e("close"))
            }, {
              default: withCtx(() => [
                (openBlock(), createBlock(resolveDynamicComponent(_ctx.closeIcon || unref(Close))))
              ]),
              _: 1
            }, 8, ["class"])
          ], 10, _hoisted_1$H)) : createCommentVNode("v-if", true)
        ], 2),
        createBaseVNode("div", {
          id: unref(bodyId),
          class: normalizeClass(unref(ns2).e("body"))
        }, [
          renderSlot(_ctx.$slots, "default")
        ], 10, _hoisted_2$u),
        _ctx.$slots.footer ? (openBlock(), createElementBlock("footer", {
          key: 0,
          class: normalizeClass(unref(ns2).e("footer"))
        }, [
          renderSlot(_ctx.$slots, "footer")
        ], 2)) : createCommentVNode("v-if", true)
      ], 6);
    };
  }
});
var ElDialogContent = _export_sfc(_sfc_main$Z, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);
var dialogProps = buildProps({
  ...dialogContentProps,
  appendToBody: {
    type: Boolean,
    default: false
  },
  beforeClose: {
    type: definePropType(Function)
  },
  destroyOnClose: {
    type: Boolean,
    default: false
  },
  closeOnClickModal: {
    type: Boolean,
    default: true
  },
  closeOnPressEscape: {
    type: Boolean,
    default: true
  },
  lockScroll: {
    type: Boolean,
    default: true
  },
  modal: {
    type: Boolean,
    default: true
  },
  openDelay: {
    type: Number,
    default: 0
  },
  closeDelay: {
    type: Number,
    default: 0
  },
  top: {
    type: String
  },
  modelValue: {
    type: Boolean,
    default: false
  },
  modalClass: String,
  width: {
    type: [String, Number]
  },
  zIndex: {
    type: Number
  },
  trapFocus: {
    type: Boolean,
    default: false
  }
});
var dialogEmits = {
  open: () => true,
  opened: () => true,
  close: () => true,
  closed: () => true,
  [UPDATE_MODEL_EVENT]: (value) => isBoolean(value),
  openAutoFocus: () => true,
  closeAutoFocus: () => true
};
var useDialog = (props2, targetRef) => {
  const instance = getCurrentInstance();
  const emit = instance.emit;
  const { nextZIndex } = useZIndex();
  let lastPosition = "";
  const titleId = useId();
  const bodyId = useId();
  const visible = ref(false);
  const closed = ref(false);
  const rendered = ref(false);
  const zIndex2 = ref(props2.zIndex || nextZIndex());
  let openTimer = void 0;
  let closeTimer = void 0;
  const namespace = useGlobalConfig("namespace", defaultNamespace);
  const style2 = computed(() => {
    const style22 = {};
    const varPrefix = `--${namespace.value}-dialog`;
    if (!props2.fullscreen) {
      if (props2.top) {
        style22[`${varPrefix}-margin-top`] = props2.top;
      }
      if (props2.width) {
        style22[`${varPrefix}-width`] = addUnit(props2.width);
      }
    }
    return style22;
  });
  const overlayDialogStyle = computed(() => {
    if (props2.alignCenter) {
      return { display: "flex" };
    }
    return {};
  });
  function afterEnter() {
    emit("opened");
  }
  function afterLeave() {
    emit("closed");
    emit(UPDATE_MODEL_EVENT, false);
    if (props2.destroyOnClose) {
      rendered.value = false;
    }
  }
  function beforeLeave() {
    emit("close");
  }
  function open() {
    closeTimer == null ? void 0 : closeTimer();
    openTimer == null ? void 0 : openTimer();
    if (props2.openDelay && props2.openDelay > 0) {
      ({ stop: openTimer } = useTimeoutFn(() => doOpen(), props2.openDelay));
    } else {
      doOpen();
    }
  }
  function close2() {
    openTimer == null ? void 0 : openTimer();
    closeTimer == null ? void 0 : closeTimer();
    if (props2.closeDelay && props2.closeDelay > 0) {
      ({ stop: closeTimer } = useTimeoutFn(() => doClose(), props2.closeDelay));
    } else {
      doClose();
    }
  }
  function handleClose() {
    function hide(shouldCancel) {
      if (shouldCancel)
        return;
      closed.value = true;
      visible.value = false;
    }
    if (props2.beforeClose) {
      props2.beforeClose(hide);
    } else {
      close2();
    }
  }
  function onModalClick() {
    if (props2.closeOnClickModal) {
      handleClose();
    }
  }
  function doOpen() {
    if (!isClient)
      return;
    visible.value = true;
  }
  function doClose() {
    visible.value = false;
  }
  function onOpenAutoFocus() {
    emit("openAutoFocus");
  }
  function onCloseAutoFocus() {
    emit("closeAutoFocus");
  }
  if (props2.lockScroll) {
    useLockscreen(visible);
  }
  function onCloseRequested() {
    if (props2.closeOnPressEscape) {
      handleClose();
    }
  }
  watch(() => props2.modelValue, (val) => {
    if (val) {
      closed.value = false;
      open();
      rendered.value = true;
      zIndex2.value = props2.zIndex ? zIndex2.value++ : nextZIndex();
      nextTick(() => {
        emit("open");
        if (targetRef.value) {
          targetRef.value.scrollTop = 0;
        }
      });
    } else {
      if (visible.value) {
        close2();
      }
    }
  });
  watch(() => props2.fullscreen, (val) => {
    if (!targetRef.value)
      return;
    if (val) {
      lastPosition = targetRef.value.style.transform;
      targetRef.value.style.transform = "";
    } else {
      targetRef.value.style.transform = lastPosition;
    }
  });
  onMounted(() => {
    if (props2.modelValue) {
      visible.value = true;
      rendered.value = true;
      open();
    }
  });
  return {
    afterEnter,
    afterLeave,
    beforeLeave,
    handleClose,
    onModalClick,
    close: close2,
    doClose,
    onOpenAutoFocus,
    onCloseAutoFocus,
    onCloseRequested,
    titleId,
    bodyId,
    closed,
    style: style2,
    overlayDialogStyle,
    rendered,
    visible,
    zIndex: zIndex2
  };
};
var _hoisted_1$G = ["aria-label", "aria-labelledby", "aria-describedby"];
var __default__$7 = {
  name: "ElDialog",
  inheritAttrs: false
};
var _sfc_main$Y = defineComponent({
  ...__default__$7,
  props: dialogProps,
  emits: dialogEmits,
  setup(__props, { expose }) {
    const props2 = __props;
    const slots = useSlots();
    useDeprecated({
      scope: "el-dialog",
      from: "the title slot",
      replacement: "the header slot",
      version: "3.0.0",
      ref: "https://element-plus.org/en-US/component/dialog.html#slots"
    }, computed(() => !!slots.title));
    useDeprecated({
      scope: "el-dialog",
      from: "custom-class",
      replacement: "class",
      version: "2.3.0",
      ref: "https://element-plus.org/en-US/component/dialog.html#attributes",
      type: "Attribute"
    }, computed(() => !!props2.customClass));
    const ns2 = useNamespace("dialog");
    const dialogRef = ref();
    const headerRef = ref();
    const dialogContentRef = ref();
    const {
      visible,
      titleId,
      bodyId,
      style: style2,
      overlayDialogStyle,
      rendered,
      zIndex: zIndex2,
      afterEnter,
      afterLeave,
      beforeLeave,
      handleClose,
      onModalClick,
      onOpenAutoFocus,
      onCloseAutoFocus,
      onCloseRequested
    } = useDialog(props2, dialogRef);
    provide(dialogInjectionKey, {
      dialogRef,
      headerRef,
      bodyId,
      ns: ns2,
      rendered,
      style: style2
    });
    const overlayEvent = useSameTarget(onModalClick);
    const draggable = computed(() => props2.draggable && !props2.fullscreen);
    expose({
      visible,
      dialogContentRef
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(Teleport, {
        to: "body",
        disabled: !_ctx.appendToBody
      }, [
        createVNode(Transition, {
          name: "dialog-fade",
          onAfterEnter: unref(afterEnter),
          onAfterLeave: unref(afterLeave),
          onBeforeLeave: unref(beforeLeave),
          persisted: ""
        }, {
          default: withCtx(() => [
            withDirectives(createVNode(unref(ElOverlay), {
              "custom-mask-event": "",
              mask: _ctx.modal,
              "overlay-class": _ctx.modalClass,
              "z-index": unref(zIndex2)
            }, {
              default: withCtx(() => [
                createBaseVNode("div", {
                  role: "dialog",
                  "aria-modal": "true",
                  "aria-label": _ctx.title || void 0,
                  "aria-labelledby": !_ctx.title ? unref(titleId) : void 0,
                  "aria-describedby": unref(bodyId),
                  class: normalizeClass(`${unref(ns2).namespace.value}-overlay-dialog`),
                  style: normalizeStyle(unref(overlayDialogStyle)),
                  onClick: _cache[0] || (_cache[0] = (...args) => unref(overlayEvent).onClick && unref(overlayEvent).onClick(...args)),
                  onMousedown: _cache[1] || (_cache[1] = (...args) => unref(overlayEvent).onMousedown && unref(overlayEvent).onMousedown(...args)),
                  onMouseup: _cache[2] || (_cache[2] = (...args) => unref(overlayEvent).onMouseup && unref(overlayEvent).onMouseup(...args))
                }, [
                  createVNode(unref(ElFocusTrap), {
                    loop: "",
                    trapped: unref(visible),
                    "focus-start-el": "container",
                    onFocusAfterTrapped: unref(onOpenAutoFocus),
                    onFocusAfterReleased: unref(onCloseAutoFocus),
                    onReleaseRequested: unref(onCloseRequested)
                  }, {
                    default: withCtx(() => [
                      unref(rendered) ? (openBlock(), createBlock(ElDialogContent, mergeProps({
                        key: 0,
                        ref_key: "dialogContentRef",
                        ref: dialogContentRef
                      }, _ctx.$attrs, {
                        "custom-class": _ctx.customClass,
                        center: _ctx.center,
                        "align-center": _ctx.alignCenter,
                        "close-icon": _ctx.closeIcon,
                        draggable: unref(draggable),
                        fullscreen: _ctx.fullscreen,
                        "show-close": _ctx.showClose,
                        title: _ctx.title,
                        onClose: unref(handleClose)
                      }), createSlots({
                        header: withCtx(() => [
                          !_ctx.$slots.title ? renderSlot(_ctx.$slots, "header", {
                            key: 0,
                            close: unref(handleClose),
                            titleId: unref(titleId),
                            titleClass: unref(ns2).e("title")
                          }) : renderSlot(_ctx.$slots, "title", { key: 1 })
                        ]),
                        default: withCtx(() => [
                          renderSlot(_ctx.$slots, "default")
                        ]),
                        _: 2
                      }, [
                        _ctx.$slots.footer ? {
                          name: "footer",
                          fn: withCtx(() => [
                            renderSlot(_ctx.$slots, "footer")
                          ])
                        } : void 0
                      ]), 1040, ["custom-class", "center", "align-center", "close-icon", "draggable", "fullscreen", "show-close", "title", "onClose"])) : createCommentVNode("v-if", true)
                    ]),
                    _: 3
                  }, 8, ["trapped", "onFocusAfterTrapped", "onFocusAfterReleased", "onReleaseRequested"])
                ], 46, _hoisted_1$G)
              ]),
              _: 3
            }, 8, ["mask", "overlay-class", "z-index"]), [
              [vShow, unref(visible)]
            ])
          ]),
          _: 3
        }, 8, ["onAfterEnter", "onAfterLeave", "onBeforeLeave"])
      ], 8, ["disabled"]);
    };
  }
});
var Dialog = _export_sfc(_sfc_main$Y, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);
var ElDialog = withInstall(Dialog);
var drawerProps = buildProps({
  ...dialogProps,
  direction: {
    type: String,
    default: "rtl",
    values: ["ltr", "rtl", "ttb", "btt"]
  },
  size: {
    type: [String, Number],
    default: "30%"
  },
  withHeader: {
    type: Boolean,
    default: true
  },
  modalFade: {
    type: Boolean,
    default: true
  }
});
var drawerEmits = dialogEmits;
var _sfc_main$X = defineComponent({
  name: "ElDrawer",
  components: {
    ElOverlay,
    ElFocusTrap,
    ElIcon,
    Close: close_default
  },
  props: drawerProps,
  emits: drawerEmits,
  setup(props2, { slots }) {
    useDeprecated({
      scope: "el-drawer",
      from: "the title slot",
      replacement: "the header slot",
      version: "3.0.0",
      ref: "https://element-plus.org/en-US/component/drawer.html#slots"
    }, computed(() => !!slots.title));
    const drawerRef = ref();
    const focusStartRef = ref();
    const ns2 = useNamespace("drawer");
    const { t: t2 } = useLocale();
    const isHorizontal = computed(() => props2.direction === "rtl" || props2.direction === "ltr");
    const drawerSize = computed(() => addUnit(props2.size));
    return {
      ...useDialog(props2, drawerRef),
      drawerRef,
      focusStartRef,
      isHorizontal,
      drawerSize,
      ns: ns2,
      t: t2
    };
  }
});
var _hoisted_1$F = ["aria-label", "aria-labelledby", "aria-describedby"];
var _hoisted_2$t = ["id"];
var _hoisted_3$q = ["aria-label"];
var _hoisted_4$k = ["id"];
function _sfc_render$9(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_close = resolveComponent("close");
  const _component_el_icon = resolveComponent("el-icon");
  const _component_el_focus_trap = resolveComponent("el-focus-trap");
  const _component_el_overlay = resolveComponent("el-overlay");
  return openBlock(), createBlock(Teleport, {
    to: "body",
    disabled: !_ctx.appendToBody
  }, [
    createVNode(Transition, {
      name: _ctx.ns.b("fade"),
      onAfterEnter: _ctx.afterEnter,
      onAfterLeave: _ctx.afterLeave,
      onBeforeLeave: _ctx.beforeLeave,
      persisted: ""
    }, {
      default: withCtx(() => [
        withDirectives(createVNode(_component_el_overlay, {
          mask: _ctx.modal,
          "overlay-class": _ctx.modalClass,
          "z-index": _ctx.zIndex,
          onClick: _ctx.onModalClick
        }, {
          default: withCtx(() => [
            createVNode(_component_el_focus_trap, {
              loop: "",
              trapped: _ctx.visible,
              "focus-trap-el": _ctx.drawerRef,
              "focus-start-el": _ctx.focusStartRef,
              onReleaseRequested: _ctx.onCloseRequested
            }, {
              default: withCtx(() => [
                createBaseVNode("div", {
                  ref: "drawerRef",
                  "aria-modal": "true",
                  "aria-label": _ctx.title || void 0,
                  "aria-labelledby": !_ctx.title ? _ctx.titleId : void 0,
                  "aria-describedby": _ctx.bodyId,
                  class: normalizeClass([_ctx.ns.b(), _ctx.direction, _ctx.visible && "open", _ctx.customClass]),
                  style: normalizeStyle(_ctx.isHorizontal ? "width: " + _ctx.drawerSize : "height: " + _ctx.drawerSize),
                  role: "dialog",
                  onClick: _cache[1] || (_cache[1] = withModifiers(() => {
                  }, ["stop"]))
                }, [
                  createBaseVNode("span", {
                    ref: "focusStartRef",
                    class: normalizeClass(_ctx.ns.e("sr-focus")),
                    tabindex: "-1"
                  }, null, 2),
                  _ctx.withHeader ? (openBlock(), createElementBlock("header", {
                    key: 0,
                    class: normalizeClass(_ctx.ns.e("header"))
                  }, [
                    !_ctx.$slots.title ? renderSlot(_ctx.$slots, "header", {
                      key: 0,
                      close: _ctx.handleClose,
                      titleId: _ctx.titleId,
                      titleClass: _ctx.ns.e("title")
                    }, () => [
                      !_ctx.$slots.title ? (openBlock(), createElementBlock("span", {
                        key: 0,
                        id: _ctx.titleId,
                        role: "heading",
                        class: normalizeClass(_ctx.ns.e("title"))
                      }, toDisplayString(_ctx.title), 11, _hoisted_2$t)) : createCommentVNode("v-if", true)
                    ]) : renderSlot(_ctx.$slots, "title", { key: 1 }, () => [
                      createCommentVNode(" DEPRECATED SLOT ")
                    ]),
                    _ctx.showClose ? (openBlock(), createElementBlock("button", {
                      key: 2,
                      "aria-label": _ctx.t("el.drawer.close"),
                      class: normalizeClass(_ctx.ns.e("close-btn")),
                      type: "button",
                      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClose && _ctx.handleClose(...args))
                    }, [
                      createVNode(_component_el_icon, {
                        class: normalizeClass(_ctx.ns.e("close"))
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_close)
                        ]),
                        _: 1
                      }, 8, ["class"])
                    ], 10, _hoisted_3$q)) : createCommentVNode("v-if", true)
                  ], 2)) : createCommentVNode("v-if", true),
                  _ctx.rendered ? (openBlock(), createElementBlock("div", {
                    key: 1,
                    id: _ctx.bodyId,
                    class: normalizeClass(_ctx.ns.e("body"))
                  }, [
                    renderSlot(_ctx.$slots, "default")
                  ], 10, _hoisted_4$k)) : createCommentVNode("v-if", true),
                  _ctx.$slots.footer ? (openBlock(), createElementBlock("div", {
                    key: 2,
                    class: normalizeClass(_ctx.ns.e("footer"))
                  }, [
                    renderSlot(_ctx.$slots, "footer")
                  ], 2)) : createCommentVNode("v-if", true)
                ], 14, _hoisted_1$F)
              ]),
              _: 3
            }, 8, ["trapped", "focus-trap-el", "focus-start-el", "onReleaseRequested"])
          ]),
          _: 3
        }, 8, ["mask", "overlay-class", "z-index", "onClick"]), [
          [vShow, _ctx.visible]
        ])
      ]),
      _: 3
    }, 8, ["name", "onAfterEnter", "onAfterLeave", "onBeforeLeave"])
  ], 8, ["disabled"]);
}
var Drawer = _export_sfc(_sfc_main$X, [["render", _sfc_render$9], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);
var ElDrawer = withInstall(Drawer);
var _sfc_main$W = {
  inheritAttrs: false
};
function _sfc_render$8(_ctx, _cache, $props, $setup, $data, $options) {
  return renderSlot(_ctx.$slots, "default");
}
var Collection = _export_sfc(_sfc_main$W, [["render", _sfc_render$8], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);
var _sfc_main$V = {
  name: "ElCollectionItem",
  inheritAttrs: false
};
function _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {
  return renderSlot(_ctx.$slots, "default");
}
var CollectionItem = _export_sfc(_sfc_main$V, [["render", _sfc_render$7], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);
var COLLECTION_ITEM_SIGN = `data-el-collection-item`;
var createCollectionWithScope = (name) => {
  const COLLECTION_NAME = `El${name}Collection`;
  const COLLECTION_ITEM_NAME = `${COLLECTION_NAME}Item`;
  const COLLECTION_INJECTION_KEY = Symbol(COLLECTION_NAME);
  const COLLECTION_ITEM_INJECTION_KEY = Symbol(COLLECTION_ITEM_NAME);
  const ElCollection = {
    ...Collection,
    name: COLLECTION_NAME,
    setup() {
      const collectionRef = ref(null);
      const itemMap = /* @__PURE__ */ new Map();
      const getItems = () => {
        const collectionEl = unref(collectionRef);
        if (!collectionEl)
          return [];
        const orderedNodes = Array.from(collectionEl.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`));
        const items = [...itemMap.values()];
        return items.sort((a3, b2) => orderedNodes.indexOf(a3.ref) - orderedNodes.indexOf(b2.ref));
      };
      provide(COLLECTION_INJECTION_KEY, {
        itemMap,
        getItems,
        collectionRef
      });
    }
  };
  const ElCollectionItem = {
    ...CollectionItem,
    name: COLLECTION_ITEM_NAME,
    setup(_2, { attrs }) {
      const collectionItemRef = ref(null);
      const collectionInjection = inject(COLLECTION_INJECTION_KEY, void 0);
      provide(COLLECTION_ITEM_INJECTION_KEY, {
        collectionItemRef
      });
      onMounted(() => {
        const collectionItemEl = unref(collectionItemRef);
        if (collectionItemEl) {
          collectionInjection.itemMap.set(collectionItemEl, {
            ref: collectionItemEl,
            ...attrs
          });
        }
      });
      onBeforeUnmount(() => {
        const collectionItemEl = unref(collectionItemRef);
        collectionInjection.itemMap.delete(collectionItemEl);
      });
    }
  };
  return {
    COLLECTION_INJECTION_KEY,
    COLLECTION_ITEM_INJECTION_KEY,
    ElCollection,
    ElCollectionItem
  };
};
var dropdownProps = buildProps({
  trigger: useTooltipTriggerProps.trigger,
  effect: {
    ...useTooltipContentProps.effect,
    default: "light"
  },
  type: {
    type: definePropType(String)
  },
  placement: {
    type: definePropType(String),
    default: "bottom"
  },
  popperOptions: {
    type: definePropType(Object),
    default: () => ({})
  },
  id: String,
  size: {
    type: String,
    default: ""
  },
  splitButton: Boolean,
  hideOnClick: {
    type: Boolean,
    default: true
  },
  loop: {
    type: Boolean,
    default: true
  },
  showTimeout: {
    type: Number,
    default: 150
  },
  hideTimeout: {
    type: Number,
    default: 150
  },
  tabindex: {
    type: definePropType([Number, String]),
    default: 0
  },
  maxHeight: {
    type: definePropType([Number, String]),
    default: ""
  },
  popperClass: {
    type: String,
    default: ""
  },
  disabled: {
    type: Boolean,
    default: false
  },
  role: {
    type: String,
    default: "menu"
  },
  buttonProps: {
    type: definePropType(Object)
  }
});
buildProps({
  command: {
    type: [Object, String, Number],
    default: () => ({})
  },
  disabled: Boolean,
  divided: Boolean,
  textValue: String,
  icon: {
    type: iconPropType
  }
});
buildProps({
  onKeydown: { type: definePropType(Function) }
});
createCollectionWithScope("Dropdown");
var selectGroupKey = "ElSelectGroup";
var selectKey = "ElSelect";
function useOption(props2, states) {
  const select2 = inject(selectKey);
  const selectGroup = inject(selectGroupKey, { disabled: false });
  const isObject2 = computed(() => {
    return Object.prototype.toString.call(props2.value).toLowerCase() === "[object object]";
  });
  const itemSelected = computed(() => {
    if (!select2.props.multiple) {
      return isEqual2(props2.value, select2.props.modelValue);
    } else {
      return contains(select2.props.modelValue, props2.value);
    }
  });
  const limitReached = computed(() => {
    if (select2.props.multiple) {
      const modelValue = select2.props.modelValue || [];
      return !itemSelected.value && modelValue.length >= select2.props.multipleLimit && select2.props.multipleLimit > 0;
    } else {
      return false;
    }
  });
  const currentLabel = computed(() => {
    return props2.label || (isObject2.value ? "" : props2.value);
  });
  const currentValue = computed(() => {
    return props2.value || props2.label || "";
  });
  const isDisabled = computed(() => {
    return props2.disabled || states.groupDisabled || limitReached.value;
  });
  const instance = getCurrentInstance();
  const contains = (arr = [], target) => {
    if (!isObject2.value) {
      return arr && arr.includes(target);
    } else {
      const valueKey = select2.props.valueKey;
      return arr && arr.some((item) => {
        return toRaw(get$1(item, valueKey)) === get$1(target, valueKey);
      });
    }
  };
  const isEqual2 = (a3, b2) => {
    if (!isObject2.value) {
      return a3 === b2;
    } else {
      const { valueKey } = select2.props;
      return get$1(a3, valueKey) === get$1(b2, valueKey);
    }
  };
  const hoverItem = () => {
    if (!props2.disabled && !selectGroup.disabled) {
      select2.hoverIndex = select2.optionsArray.indexOf(instance.proxy);
    }
  };
  watch(() => currentLabel.value, () => {
    if (!props2.created && !select2.props.remote)
      select2.setSelected();
  });
  watch(() => props2.value, (val, oldVal) => {
    const { remote, valueKey } = select2.props;
    if (!Object.is(val, oldVal)) {
      select2.onOptionDestroy(oldVal, instance.proxy);
      select2.onOptionCreate(instance.proxy);
    }
    if (!props2.created && !remote) {
      if (valueKey && typeof val === "object" && typeof oldVal === "object" && val[valueKey] === oldVal[valueKey]) {
        return;
      }
      select2.setSelected();
    }
  });
  watch(() => selectGroup.disabled, () => {
    states.groupDisabled = selectGroup.disabled;
  }, { immediate: true });
  const { queryChange } = toRaw(select2);
  watch(queryChange, (changes) => {
    const { query } = unref(changes);
    const regexp = new RegExp(escapeStringRegexp(query), "i");
    states.visible = regexp.test(currentLabel.value) || props2.created;
    if (!states.visible) {
      select2.filteredOptionsCount--;
    }
  });
  return {
    select: select2,
    currentLabel,
    currentValue,
    itemSelected,
    isDisabled,
    hoverItem
  };
}
var _sfc_main$U = defineComponent({
  name: "ElOption",
  componentName: "ElOption",
  props: {
    value: {
      required: true,
      type: [String, Number, Boolean, Object]
    },
    label: [String, Number],
    created: Boolean,
    disabled: {
      type: Boolean,
      default: false
    }
  },
  setup(props2) {
    const ns2 = useNamespace("select");
    const states = reactive({
      index: -1,
      groupDisabled: false,
      visible: true,
      hitState: false,
      hover: false
    });
    const { currentLabel, itemSelected, isDisabled, select: select2, hoverItem } = useOption(props2, states);
    const { visible, hover } = toRefs(states);
    const vm = getCurrentInstance().proxy;
    select2.onOptionCreate(vm);
    onBeforeUnmount(() => {
      const key = vm.value;
      const { selected } = select2;
      const selectedOptions = select2.props.multiple ? selected : [selected];
      const doesSelected = selectedOptions.some((item) => {
        return item.value === vm.value;
      });
      nextTick(() => {
        if (select2.cachedOptions.get(key) === vm && !doesSelected) {
          select2.cachedOptions.delete(key);
        }
      });
      select2.onOptionDestroy(key, vm);
    });
    function selectOptionClick() {
      if (props2.disabled !== true && states.groupDisabled !== true) {
        select2.handleOptionSelect(vm, true);
      }
    }
    return {
      ns: ns2,
      currentLabel,
      itemSelected,
      isDisabled,
      select: select2,
      hoverItem,
      visible,
      hover,
      selectOptionClick,
      states
    };
  }
});
function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
  return withDirectives((openBlock(), createElementBlock("li", {
    class: normalizeClass([
      _ctx.ns.be("dropdown", "item"),
      _ctx.ns.is("disabled", _ctx.isDisabled),
      {
        selected: _ctx.itemSelected,
        hover: _ctx.hover
      }
    ]),
    onMouseenter: _cache[0] || (_cache[0] = (...args) => _ctx.hoverItem && _ctx.hoverItem(...args)),
    onClick: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.selectOptionClick && _ctx.selectOptionClick(...args), ["stop"]))
  }, [
    renderSlot(_ctx.$slots, "default", {}, () => [
      createBaseVNode("span", null, toDisplayString(_ctx.currentLabel), 1)
    ])
  ], 34)), [
    [vShow, _ctx.visible]
  ]);
}
var Option = _export_sfc(_sfc_main$U, [["render", _sfc_render$6], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);
var _sfc_main$T = defineComponent({
  name: "ElSelectDropdown",
  componentName: "ElSelectDropdown",
  setup() {
    const select2 = inject(selectKey);
    const ns2 = useNamespace("select");
    const popperClass = computed(() => select2.props.popperClass);
    const isMultiple = computed(() => select2.props.multiple);
    const isFitInputWidth = computed(() => select2.props.fitInputWidth);
    const minWidth = ref("");
    function updateMinWidth() {
      var _a2;
      minWidth.value = `${(_a2 = select2.selectWrapper) == null ? void 0 : _a2.offsetWidth}px`;
    }
    onMounted(() => {
      updateMinWidth();
      useResizeObserver(select2.selectWrapper, updateMinWidth);
    });
    return {
      ns: ns2,
      minWidth,
      popperClass,
      isMultiple,
      isFitInputWidth
    };
  }
});
function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", {
    class: normalizeClass([_ctx.ns.b("dropdown"), _ctx.ns.is("multiple", _ctx.isMultiple), _ctx.popperClass]),
    style: normalizeStyle({ [_ctx.isFitInputWidth ? "width" : "minWidth"]: _ctx.minWidth })
  }, [
    renderSlot(_ctx.$slots, "default")
  ], 6);
}
var ElSelectMenu = _export_sfc(_sfc_main$T, [["render", _sfc_render$5], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);
function useSelectStates(props2) {
  const { t: t2 } = useLocale();
  return reactive({
    options: /* @__PURE__ */ new Map(),
    cachedOptions: /* @__PURE__ */ new Map(),
    createdLabel: null,
    createdSelected: false,
    selected: props2.multiple ? [] : {},
    inputLength: 20,
    inputWidth: 0,
    optionsCount: 0,
    filteredOptionsCount: 0,
    visible: false,
    softFocus: false,
    selectedLabel: "",
    hoverIndex: -1,
    query: "",
    previousQuery: null,
    inputHovering: false,
    cachedPlaceHolder: "",
    currentPlaceholder: t2("el.select.placeholder"),
    menuVisibleOnFocus: false,
    isOnComposition: false,
    isSilentBlur: false,
    prefixWidth: 11,
    tagInMultiLine: false
  });
}
var useSelect = (props2, states, ctx) => {
  const { t: t2 } = useLocale();
  const ns2 = useNamespace("select");
  const reference = ref(null);
  const input2 = ref(null);
  const tooltipRef = ref(null);
  const tags = ref(null);
  const selectWrapper = ref(null);
  const scrollbar2 = ref(null);
  const hoverOption = ref(-1);
  const queryChange = shallowRef({ query: "" });
  const groupQueryChange = shallowRef("");
  const { form, formItem } = useFormItem();
  const readonly2 = computed(() => !props2.filterable || props2.multiple || !states.visible);
  const selectDisabled = computed(() => props2.disabled || (form == null ? void 0 : form.disabled));
  const showClose = computed(() => {
    const hasValue = props2.multiple ? Array.isArray(props2.modelValue) && props2.modelValue.length > 0 : props2.modelValue !== void 0 && props2.modelValue !== null && props2.modelValue !== "";
    const criteria = props2.clearable && !selectDisabled.value && states.inputHovering && hasValue;
    return criteria;
  });
  const iconComponent = computed(() => props2.remote && props2.filterable ? "" : props2.suffixIcon);
  const iconReverse = computed(() => ns2.is("reverse", iconComponent.value && states.visible));
  const debounce$1$1 = computed(() => props2.remote ? 300 : 0);
  const emptyText = computed(() => {
    if (props2.loading) {
      return props2.loadingText || t2("el.select.loading");
    } else {
      if (props2.remote && states.query === "" && states.options.size === 0)
        return false;
      if (props2.filterable && states.query && states.options.size > 0 && states.filteredOptionsCount === 0) {
        return props2.noMatchText || t2("el.select.noMatch");
      }
      if (states.options.size === 0) {
        return props2.noDataText || t2("el.select.noData");
      }
    }
    return null;
  });
  const optionsArray = computed(() => Array.from(states.options.values()));
  const cachedOptionsArray = computed(() => Array.from(states.cachedOptions.values()));
  const showNewOption = computed(() => {
    const hasExistingOption = optionsArray.value.filter((option2) => {
      return !option2.created;
    }).some((option2) => {
      return option2.currentLabel === states.query;
    });
    return props2.filterable && props2.allowCreate && states.query !== "" && !hasExistingOption;
  });
  const selectSize = useSize();
  const collapseTagSize = computed(() => ["small"].includes(selectSize.value) ? "small" : "default");
  const dropMenuVisible = computed({
    get() {
      return states.visible && emptyText.value !== false;
    },
    set(val) {
      states.visible = val;
    }
  });
  watch([() => selectDisabled.value, () => selectSize.value, () => form == null ? void 0 : form.size], () => {
    nextTick(() => {
      resetInputHeight();
    });
  });
  watch(() => props2.placeholder, (val) => {
    states.cachedPlaceHolder = states.currentPlaceholder = val;
  });
  watch(() => props2.modelValue, (val, oldVal) => {
    if (props2.multiple) {
      resetInputHeight();
      if (val && val.length > 0 || input2.value && states.query !== "") {
        states.currentPlaceholder = "";
      } else {
        states.currentPlaceholder = states.cachedPlaceHolder;
      }
      if (props2.filterable && !props2.reserveKeyword) {
        states.query = "";
        handleQueryChange(states.query);
      }
    }
    setSelected();
    if (props2.filterable && !props2.multiple) {
      states.inputLength = 20;
    }
    if (!isEqual$1(val, oldVal) && props2.validateEvent) {
      formItem == null ? void 0 : formItem.validate("change").catch((err) => debugWarn());
    }
  }, {
    flush: "post",
    deep: true
  });
  watch(() => states.visible, (val) => {
    var _a2, _b, _c;
    if (!val) {
      input2.value && input2.value.blur();
      states.query = "";
      states.previousQuery = null;
      states.selectedLabel = "";
      states.inputLength = 20;
      states.menuVisibleOnFocus = false;
      resetHoverIndex();
      nextTick(() => {
        if (input2.value && input2.value.value === "" && states.selected.length === 0) {
          states.currentPlaceholder = states.cachedPlaceHolder;
        }
      });
      if (!props2.multiple) {
        if (states.selected) {
          if (props2.filterable && props2.allowCreate && states.createdSelected && states.createdLabel) {
            states.selectedLabel = states.createdLabel;
          } else {
            states.selectedLabel = states.selected.currentLabel;
          }
          if (props2.filterable)
            states.query = states.selectedLabel;
        }
        if (props2.filterable) {
          states.currentPlaceholder = states.cachedPlaceHolder;
        }
      }
    } else {
      (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
      if (props2.filterable) {
        states.filteredOptionsCount = states.optionsCount;
        states.query = props2.remote ? "" : states.selectedLabel;
        if (props2.multiple) {
          (_c = input2.value) == null ? void 0 : _c.focus();
        } else {
          if (states.selectedLabel) {
            states.currentPlaceholder = `${states.selectedLabel}`;
            states.selectedLabel = "";
          }
        }
        handleQueryChange(states.query);
        if (!props2.multiple && !props2.remote) {
          queryChange.value.query = "";
          triggerRef(queryChange);
          triggerRef(groupQueryChange);
        }
      }
    }
    ctx.emit("visible-change", val);
  });
  watch(() => states.options.entries(), () => {
    var _a2, _b, _c;
    if (!isClient)
      return;
    (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
    if (props2.multiple) {
      resetInputHeight();
    }
    const inputs = ((_c = selectWrapper.value) == null ? void 0 : _c.querySelectorAll("input")) || [];
    if (!Array.from(inputs).includes(document.activeElement)) {
      setSelected();
    }
    if (props2.defaultFirstOption && (props2.filterable || props2.remote) && states.filteredOptionsCount) {
      checkDefaultFirstOption();
    }
  }, {
    flush: "post"
  });
  watch(() => states.hoverIndex, (val) => {
    if (typeof val === "number" && val > -1) {
      hoverOption.value = optionsArray.value[val] || {};
    }
    optionsArray.value.forEach((option2) => {
      option2.hover = hoverOption.value === option2;
    });
  });
  const resetInputHeight = () => {
    if (props2.collapseTags && !props2.filterable)
      return;
    nextTick(() => {
      var _a2, _b;
      if (!reference.value)
        return;
      const input22 = reference.value.$el.querySelector("input");
      const _tags = tags.value;
      const sizeInMap = getComponentSize(selectSize.value || (form == null ? void 0 : form.size));
      input22.style.height = `${(states.selected.length === 0 ? sizeInMap : Math.max(_tags ? _tags.clientHeight + (_tags.clientHeight > sizeInMap ? 6 : 0) : 0, sizeInMap)) - 2}px`;
      states.tagInMultiLine = Number.parseFloat(input22.style.height) >= sizeInMap;
      if (states.visible && emptyText.value !== false) {
        (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
      }
    });
  };
  const handleQueryChange = async (val) => {
    if (states.previousQuery === val || states.isOnComposition)
      return;
    if (states.previousQuery === null && (typeof props2.filterMethod === "function" || typeof props2.remoteMethod === "function")) {
      states.previousQuery = val;
      return;
    }
    states.previousQuery = val;
    nextTick(() => {
      var _a2, _b;
      if (states.visible)
        (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
    });
    states.hoverIndex = -1;
    if (props2.multiple && props2.filterable) {
      nextTick(() => {
        const length = input2.value.value.length * 15 + 20;
        states.inputLength = props2.collapseTags ? Math.min(50, length) : length;
        managePlaceholder();
        resetInputHeight();
      });
    }
    if (props2.remote && typeof props2.remoteMethod === "function") {
      states.hoverIndex = -1;
      props2.remoteMethod(val);
    } else if (typeof props2.filterMethod === "function") {
      props2.filterMethod(val);
      triggerRef(groupQueryChange);
    } else {
      states.filteredOptionsCount = states.optionsCount;
      queryChange.value.query = val;
      triggerRef(queryChange);
      triggerRef(groupQueryChange);
    }
    if (props2.defaultFirstOption && (props2.filterable || props2.remote) && states.filteredOptionsCount) {
      await nextTick();
      checkDefaultFirstOption();
    }
  };
  const managePlaceholder = () => {
    if (states.currentPlaceholder !== "") {
      states.currentPlaceholder = input2.value.value ? "" : states.cachedPlaceHolder;
    }
  };
  const checkDefaultFirstOption = () => {
    const optionsInDropdown = optionsArray.value.filter((n) => n.visible && !n.disabled && !n.states.groupDisabled);
    const userCreatedOption = optionsInDropdown.find((n) => n.created);
    const firstOriginOption = optionsInDropdown[0];
    states.hoverIndex = getValueIndex(optionsArray.value, userCreatedOption || firstOriginOption);
  };
  const setSelected = () => {
    var _a2;
    if (!props2.multiple) {
      const option2 = getOption(props2.modelValue);
      if ((_a2 = option2.props) == null ? void 0 : _a2.created) {
        states.createdLabel = option2.props.value;
        states.createdSelected = true;
      } else {
        states.createdSelected = false;
      }
      states.selectedLabel = option2.currentLabel;
      states.selected = option2;
      if (props2.filterable)
        states.query = states.selectedLabel;
      return;
    } else {
      states.selectedLabel = "";
    }
    const result = [];
    if (Array.isArray(props2.modelValue)) {
      props2.modelValue.forEach((value) => {
        result.push(getOption(value));
      });
    }
    states.selected = result;
    nextTick(() => {
      resetInputHeight();
    });
  };
  const getOption = (value) => {
    let option2;
    const isObjectValue = toRawType(value).toLowerCase() === "object";
    const isNull = toRawType(value).toLowerCase() === "null";
    const isUndefined2 = toRawType(value).toLowerCase() === "undefined";
    for (let i2 = states.cachedOptions.size - 1; i2 >= 0; i2--) {
      const cachedOption = cachedOptionsArray.value[i2];
      const isEqualValue = isObjectValue ? get$1(cachedOption.value, props2.valueKey) === get$1(value, props2.valueKey) : cachedOption.value === value;
      if (isEqualValue) {
        option2 = {
          value,
          currentLabel: cachedOption.currentLabel,
          isDisabled: cachedOption.isDisabled
        };
        break;
      }
    }
    if (option2)
      return option2;
    const label = isObjectValue ? value.label : !isNull && !isUndefined2 ? value : "";
    const newOption = {
      value,
      currentLabel: label
    };
    if (props2.multiple) {
      newOption.hitState = false;
    }
    return newOption;
  };
  const resetHoverIndex = () => {
    setTimeout(() => {
      const valueKey = props2.valueKey;
      if (!props2.multiple) {
        states.hoverIndex = optionsArray.value.findIndex((item) => {
          return getValueKey(item) === getValueKey(states.selected);
        });
      } else {
        if (states.selected.length > 0) {
          states.hoverIndex = Math.min.apply(null, states.selected.map((selected) => {
            return optionsArray.value.findIndex((item) => {
              return get$1(item, valueKey) === get$1(selected, valueKey);
            });
          }));
        } else {
          states.hoverIndex = -1;
        }
      }
    }, 300);
  };
  const handleResize = () => {
    var _a2, _b;
    resetInputWidth();
    (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.updatePopper) == null ? void 0 : _b.call(_a2);
    if (props2.multiple && !props2.filterable)
      resetInputHeight();
  };
  const resetInputWidth = () => {
    var _a2;
    states.inputWidth = (_a2 = reference.value) == null ? void 0 : _a2.$el.getBoundingClientRect().width;
  };
  const onInputChange = () => {
    if (props2.filterable && states.query !== states.selectedLabel) {
      states.query = states.selectedLabel;
      handleQueryChange(states.query);
    }
  };
  const debouncedOnInputChange = debounce$1(() => {
    onInputChange();
  }, debounce$1$1.value);
  const debouncedQueryChange = debounce$1((e2) => {
    handleQueryChange(e2.target.value);
  }, debounce$1$1.value);
  const emitChange = (val) => {
    if (!isEqual$1(props2.modelValue, val)) {
      ctx.emit(CHANGE_EVENT, val);
    }
  };
  const deletePrevTag = (e2) => {
    if (e2.target.value.length <= 0 && !toggleLastOptionHitState()) {
      const value = props2.modelValue.slice();
      value.pop();
      ctx.emit(UPDATE_MODEL_EVENT, value);
      emitChange(value);
    }
    if (e2.target.value.length === 1 && props2.modelValue.length === 0) {
      states.currentPlaceholder = states.cachedPlaceHolder;
    }
  };
  const deleteTag = (event, tag2) => {
    const index = states.selected.indexOf(tag2);
    if (index > -1 && !selectDisabled.value) {
      const value = props2.modelValue.slice();
      value.splice(index, 1);
      ctx.emit(UPDATE_MODEL_EVENT, value);
      emitChange(value);
      ctx.emit("remove-tag", tag2.value);
    }
    event.stopPropagation();
  };
  const deleteSelected = (event) => {
    event.stopPropagation();
    const value = props2.multiple ? [] : "";
    if (typeof value !== "string") {
      for (const item of states.selected) {
        if (item.isDisabled)
          value.push(item.value);
      }
    }
    ctx.emit(UPDATE_MODEL_EVENT, value);
    emitChange(value);
    states.visible = false;
    ctx.emit("clear");
  };
  const handleOptionSelect = (option2, byClick) => {
    var _a2;
    if (props2.multiple) {
      const value = (props2.modelValue || []).slice();
      const optionIndex = getValueIndex(value, option2.value);
      if (optionIndex > -1) {
        value.splice(optionIndex, 1);
      } else if (props2.multipleLimit <= 0 || value.length < props2.multipleLimit) {
        value.push(option2.value);
      }
      ctx.emit(UPDATE_MODEL_EVENT, value);
      emitChange(value);
      if (option2.created) {
        states.query = "";
        handleQueryChange("");
        states.inputLength = 20;
      }
      if (props2.filterable)
        (_a2 = input2.value) == null ? void 0 : _a2.focus();
    } else {
      ctx.emit(UPDATE_MODEL_EVENT, option2.value);
      emitChange(option2.value);
      states.visible = false;
    }
    states.isSilentBlur = byClick;
    setSoftFocus();
    if (states.visible)
      return;
    nextTick(() => {
      scrollToOption(option2);
    });
  };
  const getValueIndex = (arr = [], value) => {
    if (!isObject$1(value))
      return arr.indexOf(value);
    const valueKey = props2.valueKey;
    let index = -1;
    arr.some((item, i2) => {
      if (toRaw(get$1(item, valueKey)) === get$1(value, valueKey)) {
        index = i2;
        return true;
      }
      return false;
    });
    return index;
  };
  const setSoftFocus = () => {
    states.softFocus = true;
    const _input = input2.value || reference.value;
    if (_input) {
      _input == null ? void 0 : _input.focus();
    }
  };
  const scrollToOption = (option2) => {
    var _a2, _b, _c, _d, _e;
    const targetOption = Array.isArray(option2) ? option2[0] : option2;
    let target = null;
    if (targetOption == null ? void 0 : targetOption.value) {
      const options = optionsArray.value.filter((item) => item.value === targetOption.value);
      if (options.length > 0) {
        target = options[0].$el;
      }
    }
    if (tooltipRef.value && target) {
      const menu = (_d = (_c = (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.popperRef) == null ? void 0 : _b.contentRef) == null ? void 0 : _c.querySelector) == null ? void 0 : _d.call(_c, `.${ns2.be("dropdown", "wrap")}`);
      if (menu) {
        scrollIntoView(menu, target);
      }
    }
    (_e = scrollbar2.value) == null ? void 0 : _e.handleScroll();
  };
  const onOptionCreate = (vm) => {
    states.optionsCount++;
    states.filteredOptionsCount++;
    states.options.set(vm.value, vm);
    states.cachedOptions.set(vm.value, vm);
  };
  const onOptionDestroy = (key, vm) => {
    if (states.options.get(key) === vm) {
      states.optionsCount--;
      states.filteredOptionsCount--;
      states.options.delete(key);
    }
  };
  const resetInputState = (e2) => {
    if (e2.code !== EVENT_CODE.backspace)
      toggleLastOptionHitState(false);
    states.inputLength = input2.value.value.length * 15 + 20;
    resetInputHeight();
  };
  const toggleLastOptionHitState = (hit) => {
    if (!Array.isArray(states.selected))
      return;
    const option2 = states.selected[states.selected.length - 1];
    if (!option2)
      return;
    if (hit === true || hit === false) {
      option2.hitState = hit;
      return hit;
    }
    option2.hitState = !option2.hitState;
    return option2.hitState;
  };
  const handleComposition = (event) => {
    const text = event.target.value;
    if (event.type === "compositionend") {
      states.isOnComposition = false;
      nextTick(() => handleQueryChange(text));
    } else {
      const lastCharacter = text[text.length - 1] || "";
      states.isOnComposition = !isKorean(lastCharacter);
    }
  };
  const handleMenuEnter = () => {
    nextTick(() => scrollToOption(states.selected));
  };
  const handleFocus = (event) => {
    if (!states.softFocus) {
      if (props2.automaticDropdown || props2.filterable) {
        if (props2.filterable && !states.visible) {
          states.menuVisibleOnFocus = true;
        }
        states.visible = true;
      }
      ctx.emit("focus", event);
    } else {
      states.softFocus = false;
    }
  };
  const blur = () => {
    var _a2;
    states.visible = false;
    (_a2 = reference.value) == null ? void 0 : _a2.blur();
  };
  const handleBlur = (event) => {
    nextTick(() => {
      if (states.isSilentBlur) {
        states.isSilentBlur = false;
      } else {
        ctx.emit("blur", event);
      }
    });
    states.softFocus = false;
  };
  const handleClearClick = (event) => {
    deleteSelected(event);
  };
  const handleClose = () => {
    states.visible = false;
  };
  const handleKeydownEscape = (event) => {
    if (states.visible) {
      event.preventDefault();
      event.stopPropagation();
      states.visible = false;
    }
  };
  const toggleMenu = () => {
    var _a2;
    if (!selectDisabled.value) {
      if (states.menuVisibleOnFocus) {
        states.menuVisibleOnFocus = false;
      } else {
        states.visible = !states.visible;
      }
      if (states.visible) {
        (_a2 = input2.value || reference.value) == null ? void 0 : _a2.focus();
      }
    }
  };
  const selectOption = () => {
    if (!states.visible) {
      toggleMenu();
    } else {
      if (optionsArray.value[states.hoverIndex]) {
        handleOptionSelect(optionsArray.value[states.hoverIndex], void 0);
      }
    }
  };
  const getValueKey = (item) => {
    return isObject$1(item.value) ? get$1(item.value, props2.valueKey) : item.value;
  };
  const optionsAllDisabled = computed(() => optionsArray.value.filter((option2) => option2.visible).every((option2) => option2.disabled));
  const navigateOptions = (direction) => {
    if (!states.visible) {
      states.visible = true;
      return;
    }
    if (states.options.size === 0 || states.filteredOptionsCount === 0)
      return;
    if (states.isOnComposition)
      return;
    if (!optionsAllDisabled.value) {
      if (direction === "next") {
        states.hoverIndex++;
        if (states.hoverIndex === states.options.size) {
          states.hoverIndex = 0;
        }
      } else if (direction === "prev") {
        states.hoverIndex--;
        if (states.hoverIndex < 0) {
          states.hoverIndex = states.options.size - 1;
        }
      }
      const option2 = optionsArray.value[states.hoverIndex];
      if (option2.disabled === true || option2.states.groupDisabled === true || !option2.visible) {
        navigateOptions(direction);
      }
      nextTick(() => scrollToOption(hoverOption.value));
    }
  };
  return {
    optionsArray,
    selectSize,
    handleResize,
    debouncedOnInputChange,
    debouncedQueryChange,
    deletePrevTag,
    deleteTag,
    deleteSelected,
    handleOptionSelect,
    scrollToOption,
    readonly: readonly2,
    resetInputHeight,
    showClose,
    iconComponent,
    iconReverse,
    showNewOption,
    collapseTagSize,
    setSelected,
    managePlaceholder,
    selectDisabled,
    emptyText,
    toggleLastOptionHitState,
    resetInputState,
    handleComposition,
    onOptionCreate,
    onOptionDestroy,
    handleMenuEnter,
    handleFocus,
    blur,
    handleBlur,
    handleClearClick,
    handleClose,
    handleKeydownEscape,
    toggleMenu,
    selectOption,
    getValueKey,
    navigateOptions,
    dropMenuVisible,
    queryChange,
    groupQueryChange,
    reference,
    input: input2,
    tooltipRef,
    tags,
    selectWrapper,
    scrollbar: scrollbar2
  };
};
var COMPONENT_NAME$1 = "ElSelect";
var _sfc_main$S = defineComponent({
  name: COMPONENT_NAME$1,
  componentName: COMPONENT_NAME$1,
  components: {
    ElInput,
    ElSelectMenu,
    ElOption: Option,
    ElTag,
    ElScrollbar,
    ElTooltip,
    ElIcon
  },
  directives: { ClickOutside },
  props: {
    name: String,
    id: String,
    modelValue: {
      type: [Array, String, Number, Boolean, Object],
      default: void 0
    },
    autocomplete: {
      type: String,
      default: "off"
    },
    automaticDropdown: Boolean,
    size: {
      type: String,
      validator: isValidComponentSize
    },
    effect: {
      type: String,
      default: "light"
    },
    disabled: Boolean,
    clearable: Boolean,
    filterable: Boolean,
    allowCreate: Boolean,
    loading: Boolean,
    popperClass: {
      type: String,
      default: ""
    },
    remote: Boolean,
    loadingText: String,
    noMatchText: String,
    noDataText: String,
    remoteMethod: Function,
    filterMethod: Function,
    multiple: Boolean,
    multipleLimit: {
      type: Number,
      default: 0
    },
    placeholder: {
      type: String
    },
    defaultFirstOption: Boolean,
    reserveKeyword: {
      type: Boolean,
      default: true
    },
    valueKey: {
      type: String,
      default: "value"
    },
    collapseTags: Boolean,
    collapseTagsTooltip: {
      type: Boolean,
      default: false
    },
    teleported: useTooltipContentProps.teleported,
    persistent: {
      type: Boolean,
      default: true
    },
    clearIcon: {
      type: [String, Object],
      default: circle_close_default
    },
    fitInputWidth: {
      type: Boolean,
      default: false
    },
    suffixIcon: {
      type: [String, Object],
      default: arrow_up_default
    },
    tagType: { ...tagProps.type, default: "info" },
    validateEvent: {
      type: Boolean,
      default: true
    }
  },
  emits: [
    UPDATE_MODEL_EVENT,
    CHANGE_EVENT,
    "remove-tag",
    "clear",
    "visible-change",
    "focus",
    "blur"
  ],
  setup(props2, ctx) {
    const nsSelect = useNamespace("select");
    const nsInput = useNamespace("input");
    const { t: t2 } = useLocale();
    const states = useSelectStates(props2);
    const {
      optionsArray,
      selectSize,
      readonly: readonly2,
      handleResize,
      collapseTagSize,
      debouncedOnInputChange,
      debouncedQueryChange,
      deletePrevTag,
      deleteTag,
      deleteSelected,
      handleOptionSelect,
      scrollToOption,
      setSelected,
      resetInputHeight,
      managePlaceholder,
      showClose,
      selectDisabled,
      iconComponent,
      iconReverse,
      showNewOption,
      emptyText,
      toggleLastOptionHitState,
      resetInputState,
      handleComposition,
      onOptionCreate,
      onOptionDestroy,
      handleMenuEnter,
      handleFocus,
      blur,
      handleBlur,
      handleClearClick,
      handleClose,
      handleKeydownEscape,
      toggleMenu,
      selectOption,
      getValueKey,
      navigateOptions,
      dropMenuVisible,
      reference,
      input: input2,
      tooltipRef,
      tags,
      selectWrapper,
      scrollbar: scrollbar2,
      queryChange,
      groupQueryChange
    } = useSelect(props2, states, ctx);
    const { focus } = useFocus(reference);
    const {
      inputWidth,
      selected,
      inputLength,
      filteredOptionsCount,
      visible,
      softFocus,
      selectedLabel,
      hoverIndex,
      query,
      inputHovering,
      currentPlaceholder,
      menuVisibleOnFocus,
      isOnComposition,
      isSilentBlur,
      options,
      cachedOptions,
      optionsCount,
      prefixWidth,
      tagInMultiLine
    } = toRefs(states);
    const wrapperKls = computed(() => {
      const classList = [nsSelect.b()];
      const _selectSize = unref(selectSize);
      if (_selectSize) {
        classList.push(nsSelect.m(_selectSize));
      }
      if (props2.disabled) {
        classList.push(nsSelect.m("disabled"));
      }
      return classList;
    });
    const selectTagsStyle = computed(() => ({
      maxWidth: `${unref(inputWidth) - 32}px`,
      width: "100%"
    }));
    provide(selectKey, reactive({
      props: props2,
      options,
      optionsArray,
      cachedOptions,
      optionsCount,
      filteredOptionsCount,
      hoverIndex,
      handleOptionSelect,
      onOptionCreate,
      onOptionDestroy,
      selectWrapper,
      selected,
      setSelected,
      queryChange,
      groupQueryChange
    }));
    onMounted(() => {
      states.cachedPlaceHolder = currentPlaceholder.value = props2.placeholder || t2("el.select.placeholder");
      if (props2.multiple && Array.isArray(props2.modelValue) && props2.modelValue.length > 0) {
        currentPlaceholder.value = "";
      }
      useResizeObserver(selectWrapper, handleResize);
      if (props2.remote && props2.multiple) {
        resetInputHeight();
      }
      nextTick(() => {
        const refEl = reference.value && reference.value.$el;
        if (!refEl)
          return;
        inputWidth.value = refEl.getBoundingClientRect().width;
        if (ctx.slots.prefix) {
          const prefix = refEl.querySelector(`.${nsInput.e("prefix")}`);
          prefixWidth.value = Math.max(prefix.getBoundingClientRect().width + 5, 30);
        }
      });
      setSelected();
    });
    if (props2.multiple && !Array.isArray(props2.modelValue)) {
      ctx.emit(UPDATE_MODEL_EVENT, []);
    }
    if (!props2.multiple && Array.isArray(props2.modelValue)) {
      ctx.emit(UPDATE_MODEL_EVENT, "");
    }
    const popperPaneRef = computed(() => {
      var _a2, _b;
      return (_b = (_a2 = tooltipRef.value) == null ? void 0 : _a2.popperRef) == null ? void 0 : _b.contentRef;
    });
    return {
      tagInMultiLine,
      prefixWidth,
      selectSize,
      readonly: readonly2,
      handleResize,
      collapseTagSize,
      debouncedOnInputChange,
      debouncedQueryChange,
      deletePrevTag,
      deleteTag,
      deleteSelected,
      handleOptionSelect,
      scrollToOption,
      inputWidth,
      selected,
      inputLength,
      filteredOptionsCount,
      visible,
      softFocus,
      selectedLabel,
      hoverIndex,
      query,
      inputHovering,
      currentPlaceholder,
      menuVisibleOnFocus,
      isOnComposition,
      isSilentBlur,
      options,
      resetInputHeight,
      managePlaceholder,
      showClose,
      selectDisabled,
      iconComponent,
      iconReverse,
      showNewOption,
      emptyText,
      toggleLastOptionHitState,
      resetInputState,
      handleComposition,
      handleMenuEnter,
      handleFocus,
      blur,
      handleBlur,
      handleClearClick,
      handleClose,
      handleKeydownEscape,
      toggleMenu,
      selectOption,
      getValueKey,
      navigateOptions,
      dropMenuVisible,
      focus,
      reference,
      input: input2,
      tooltipRef,
      popperPaneRef,
      tags,
      selectWrapper,
      scrollbar: scrollbar2,
      wrapperKls,
      selectTagsStyle,
      nsSelect
    };
  }
});
var _hoisted_1$E = { class: "select-trigger" };
var _hoisted_2$s = ["disabled", "autocomplete"];
var _hoisted_3$p = { style: { "height": "100%", "display": "flex", "justify-content": "center", "align-items": "center" } };
function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_el_tag = resolveComponent("el-tag");
  const _component_el_tooltip = resolveComponent("el-tooltip");
  const _component_el_icon = resolveComponent("el-icon");
  const _component_el_input = resolveComponent("el-input");
  const _component_el_option = resolveComponent("el-option");
  const _component_el_scrollbar = resolveComponent("el-scrollbar");
  const _component_el_select_menu = resolveComponent("el-select-menu");
  const _directive_click_outside = resolveDirective("click-outside");
  return withDirectives((openBlock(), createElementBlock("div", {
    ref: "selectWrapper",
    class: normalizeClass(_ctx.wrapperKls),
    onClick: _cache[22] || (_cache[22] = withModifiers((...args) => _ctx.toggleMenu && _ctx.toggleMenu(...args), ["stop"]))
  }, [
    createVNode(_component_el_tooltip, {
      ref: "tooltipRef",
      visible: _ctx.dropMenuVisible,
      placement: "bottom-start",
      teleported: _ctx.teleported,
      "popper-class": [_ctx.nsSelect.e("popper"), _ctx.popperClass],
      "fallback-placements": ["bottom-start", "top-start", "right", "left"],
      effect: _ctx.effect,
      pure: "",
      trigger: "click",
      transition: `${_ctx.nsSelect.namespace.value}-zoom-in-top`,
      "stop-popper-mouse-event": false,
      "gpu-acceleration": false,
      persistent: _ctx.persistent,
      onShow: _ctx.handleMenuEnter
    }, {
      default: withCtx(() => [
        createBaseVNode("div", _hoisted_1$E, [
          _ctx.multiple ? (openBlock(), createElementBlock("div", {
            key: 0,
            ref: "tags",
            class: normalizeClass(_ctx.nsSelect.e("tags")),
            style: normalizeStyle(_ctx.selectTagsStyle)
          }, [
            _ctx.collapseTags && _ctx.selected.length ? (openBlock(), createElementBlock("span", {
              key: 0,
              class: normalizeClass([
                _ctx.nsSelect.b("tags-wrapper"),
                { "has-prefix": _ctx.prefixWidth && _ctx.selected.length }
              ])
            }, [
              createVNode(_component_el_tag, {
                closable: !_ctx.selectDisabled && !_ctx.selected[0].isDisabled,
                size: _ctx.collapseTagSize,
                hit: _ctx.selected[0].hitState,
                type: _ctx.tagType,
                "disable-transitions": "",
                onClose: _cache[0] || (_cache[0] = ($event) => _ctx.deleteTag($event, _ctx.selected[0]))
              }, {
                default: withCtx(() => [
                  createBaseVNode("span", {
                    class: normalizeClass(_ctx.nsSelect.e("tags-text")),
                    style: normalizeStyle({ maxWidth: _ctx.inputWidth - 123 + "px" })
                  }, toDisplayString(_ctx.selected[0].currentLabel), 7)
                ]),
                _: 1
              }, 8, ["closable", "size", "hit", "type"]),
              _ctx.selected.length > 1 ? (openBlock(), createBlock(_component_el_tag, {
                key: 0,
                closable: false,
                size: _ctx.collapseTagSize,
                type: _ctx.tagType,
                "disable-transitions": ""
              }, {
                default: withCtx(() => [
                  _ctx.collapseTagsTooltip ? (openBlock(), createBlock(_component_el_tooltip, {
                    key: 0,
                    disabled: _ctx.dropMenuVisible,
                    "fallback-placements": ["bottom", "top", "right", "left"],
                    effect: _ctx.effect,
                    placement: "bottom",
                    teleported: _ctx.teleported
                  }, {
                    default: withCtx(() => [
                      createBaseVNode("span", {
                        class: normalizeClass(_ctx.nsSelect.e("tags-text"))
                      }, "+ " + toDisplayString(_ctx.selected.length - 1), 3)
                    ]),
                    content: withCtx(() => [
                      createBaseVNode("div", {
                        class: normalizeClass(_ctx.nsSelect.e("collapse-tags"))
                      }, [
                        (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.selected.slice(1), (item, idx) => {
                          return openBlock(), createElementBlock("div", {
                            key: idx,
                            class: normalizeClass(_ctx.nsSelect.e("collapse-tag"))
                          }, [
                            (openBlock(), createBlock(_component_el_tag, {
                              key: _ctx.getValueKey(item),
                              class: "in-tooltip",
                              closable: !_ctx.selectDisabled && !item.isDisabled,
                              size: _ctx.collapseTagSize,
                              hit: item.hitState,
                              type: _ctx.tagType,
                              "disable-transitions": "",
                              style: { margin: "2px" },
                              onClose: ($event) => _ctx.deleteTag($event, item)
                            }, {
                              default: withCtx(() => [
                                createBaseVNode("span", {
                                  class: normalizeClass(_ctx.nsSelect.e("tags-text")),
                                  style: normalizeStyle({
                                    maxWidth: _ctx.inputWidth - 75 + "px"
                                  })
                                }, toDisplayString(item.currentLabel), 7)
                              ]),
                              _: 2
                            }, 1032, ["closable", "size", "hit", "type", "onClose"]))
                          ], 2);
                        }), 128))
                      ], 2)
                    ]),
                    _: 1
                  }, 8, ["disabled", "effect", "teleported"])) : (openBlock(), createElementBlock("span", {
                    key: 1,
                    class: normalizeClass(_ctx.nsSelect.e("tags-text"))
                  }, "+ " + toDisplayString(_ctx.selected.length - 1), 3))
                ]),
                _: 1
              }, 8, ["size", "type"])) : createCommentVNode("v-if", true)
            ], 2)) : createCommentVNode("v-if", true),
            createCommentVNode(" <div> "),
            !_ctx.collapseTags ? (openBlock(), createBlock(Transition, {
              key: 1,
              onAfterLeave: _ctx.resetInputHeight
            }, {
              default: withCtx(() => [
                createBaseVNode("span", {
                  class: normalizeClass([
                    _ctx.nsSelect.b("tags-wrapper"),
                    { "has-prefix": _ctx.prefixWidth && _ctx.selected.length }
                  ])
                }, [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.selected, (item) => {
                    return openBlock(), createBlock(_component_el_tag, {
                      key: _ctx.getValueKey(item),
                      closable: !_ctx.selectDisabled && !item.isDisabled,
                      size: _ctx.collapseTagSize,
                      hit: item.hitState,
                      type: _ctx.tagType,
                      "disable-transitions": "",
                      onClose: ($event) => _ctx.deleteTag($event, item)
                    }, {
                      default: withCtx(() => [
                        createBaseVNode("span", {
                          class: normalizeClass(_ctx.nsSelect.e("tags-text")),
                          style: normalizeStyle({ maxWidth: _ctx.inputWidth - 75 + "px" })
                        }, toDisplayString(item.currentLabel), 7)
                      ]),
                      _: 2
                    }, 1032, ["closable", "size", "hit", "type", "onClose"]);
                  }), 128))
                ], 2)
              ]),
              _: 1
            }, 8, ["onAfterLeave"])) : createCommentVNode("v-if", true),
            createCommentVNode(" </div> "),
            _ctx.filterable ? withDirectives((openBlock(), createElementBlock("input", {
              key: 2,
              ref: "input",
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => _ctx.query = $event),
              type: "text",
              class: normalizeClass([_ctx.nsSelect.e("input"), _ctx.nsSelect.is(_ctx.selectSize)]),
              disabled: _ctx.selectDisabled,
              autocomplete: _ctx.autocomplete,
              style: normalizeStyle({
                marginLeft: _ctx.prefixWidth && !_ctx.selected.length || _ctx.tagInMultiLine ? `${_ctx.prefixWidth}px` : "",
                flexGrow: 1,
                width: `${_ctx.inputLength / (_ctx.inputWidth - 32)}%`,
                maxWidth: `${_ctx.inputWidth - 42}px`
              }),
              onFocus: _cache[2] || (_cache[2] = (...args) => _ctx.handleFocus && _ctx.handleFocus(...args)),
              onBlur: _cache[3] || (_cache[3] = (...args) => _ctx.handleBlur && _ctx.handleBlur(...args)),
              onKeyup: _cache[4] || (_cache[4] = (...args) => _ctx.managePlaceholder && _ctx.managePlaceholder(...args)),
              onKeydown: [
                _cache[5] || (_cache[5] = (...args) => _ctx.resetInputState && _ctx.resetInputState(...args)),
                _cache[6] || (_cache[6] = withKeys(withModifiers(($event) => _ctx.navigateOptions("next"), ["prevent"]), ["down"])),
                _cache[7] || (_cache[7] = withKeys(withModifiers(($event) => _ctx.navigateOptions("prev"), ["prevent"]), ["up"])),
                _cache[8] || (_cache[8] = withKeys((...args) => _ctx.handleKeydownEscape && _ctx.handleKeydownEscape(...args), ["esc"])),
                _cache[9] || (_cache[9] = withKeys(withModifiers((...args) => _ctx.selectOption && _ctx.selectOption(...args), ["stop", "prevent"]), ["enter"])),
                _cache[10] || (_cache[10] = withKeys((...args) => _ctx.deletePrevTag && _ctx.deletePrevTag(...args), ["delete"])),
                _cache[11] || (_cache[11] = withKeys(($event) => _ctx.visible = false, ["tab"]))
              ],
              onCompositionstart: _cache[12] || (_cache[12] = (...args) => _ctx.handleComposition && _ctx.handleComposition(...args)),
              onCompositionupdate: _cache[13] || (_cache[13] = (...args) => _ctx.handleComposition && _ctx.handleComposition(...args)),
              onCompositionend: _cache[14] || (_cache[14] = (...args) => _ctx.handleComposition && _ctx.handleComposition(...args)),
              onInput: _cache[15] || (_cache[15] = (...args) => _ctx.debouncedQueryChange && _ctx.debouncedQueryChange(...args))
            }, null, 46, _hoisted_2$s)), [
              [vModelText, _ctx.query]
            ]) : createCommentVNode("v-if", true)
          ], 6)) : createCommentVNode("v-if", true),
          createVNode(_component_el_input, {
            id: _ctx.id,
            ref: "reference",
            modelValue: _ctx.selectedLabel,
            "onUpdate:modelValue": _cache[16] || (_cache[16] = ($event) => _ctx.selectedLabel = $event),
            type: "text",
            placeholder: _ctx.currentPlaceholder,
            name: _ctx.name,
            autocomplete: _ctx.autocomplete,
            size: _ctx.selectSize,
            disabled: _ctx.selectDisabled,
            readonly: _ctx.readonly,
            "validate-event": false,
            class: normalizeClass([_ctx.nsSelect.is("focus", _ctx.visible)]),
            tabindex: _ctx.multiple && _ctx.filterable ? -1 : void 0,
            onFocus: _ctx.handleFocus,
            onBlur: _ctx.handleBlur,
            onInput: _ctx.debouncedOnInputChange,
            onPaste: _ctx.debouncedOnInputChange,
            onCompositionstart: _ctx.handleComposition,
            onCompositionupdate: _ctx.handleComposition,
            onCompositionend: _ctx.handleComposition,
            onKeydown: [
              _cache[17] || (_cache[17] = withKeys(withModifiers(($event) => _ctx.navigateOptions("next"), ["stop", "prevent"]), ["down"])),
              _cache[18] || (_cache[18] = withKeys(withModifiers(($event) => _ctx.navigateOptions("prev"), ["stop", "prevent"]), ["up"])),
              withKeys(withModifiers(_ctx.selectOption, ["stop", "prevent"]), ["enter"]),
              withKeys(_ctx.handleKeydownEscape, ["esc"]),
              _cache[19] || (_cache[19] = withKeys(($event) => _ctx.visible = false, ["tab"]))
            ],
            onMouseenter: _cache[20] || (_cache[20] = ($event) => _ctx.inputHovering = true),
            onMouseleave: _cache[21] || (_cache[21] = ($event) => _ctx.inputHovering = false)
          }, createSlots({
            suffix: withCtx(() => [
              _ctx.iconComponent && !_ctx.showClose ? (openBlock(), createBlock(_component_el_icon, {
                key: 0,
                class: normalizeClass([_ctx.nsSelect.e("caret"), _ctx.nsSelect.e("icon"), _ctx.iconReverse])
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(_ctx.iconComponent)))
                ]),
                _: 1
              }, 8, ["class"])) : createCommentVNode("v-if", true),
              _ctx.showClose && _ctx.clearIcon ? (openBlock(), createBlock(_component_el_icon, {
                key: 1,
                class: normalizeClass([_ctx.nsSelect.e("caret"), _ctx.nsSelect.e("icon")]),
                onClick: _ctx.handleClearClick
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(_ctx.clearIcon)))
                ]),
                _: 1
              }, 8, ["class", "onClick"])) : createCommentVNode("v-if", true)
            ]),
            _: 2
          }, [
            _ctx.$slots.prefix ? {
              name: "prefix",
              fn: withCtx(() => [
                createBaseVNode("div", _hoisted_3$p, [
                  renderSlot(_ctx.$slots, "prefix")
                ])
              ])
            } : void 0
          ]), 1032, ["id", "modelValue", "placeholder", "name", "autocomplete", "size", "disabled", "readonly", "class", "tabindex", "onFocus", "onBlur", "onInput", "onPaste", "onCompositionstart", "onCompositionupdate", "onCompositionend", "onKeydown"])
        ])
      ]),
      content: withCtx(() => [
        createVNode(_component_el_select_menu, null, {
          default: withCtx(() => [
            withDirectives(createVNode(_component_el_scrollbar, {
              ref: "scrollbar",
              tag: "ul",
              "wrap-class": _ctx.nsSelect.be("dropdown", "wrap"),
              "view-class": _ctx.nsSelect.be("dropdown", "list"),
              class: normalizeClass([
                _ctx.nsSelect.is("empty", !_ctx.allowCreate && Boolean(_ctx.query) && _ctx.filteredOptionsCount === 0)
              ])
            }, {
              default: withCtx(() => [
                _ctx.showNewOption ? (openBlock(), createBlock(_component_el_option, {
                  key: 0,
                  value: _ctx.query,
                  created: true
                }, null, 8, ["value"])) : createCommentVNode("v-if", true),
                renderSlot(_ctx.$slots, "default")
              ]),
              _: 3
            }, 8, ["wrap-class", "view-class", "class"]), [
              [vShow, _ctx.options.size > 0 && !_ctx.loading]
            ]),
            _ctx.emptyText && (!_ctx.allowCreate || _ctx.loading || _ctx.allowCreate && _ctx.options.size === 0) ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
              _ctx.$slots.empty ? renderSlot(_ctx.$slots, "empty", { key: 0 }) : (openBlock(), createElementBlock("p", {
                key: 1,
                class: normalizeClass(_ctx.nsSelect.be("dropdown", "empty"))
              }, toDisplayString(_ctx.emptyText), 3))
            ], 64)) : createCommentVNode("v-if", true)
          ]),
          _: 3
        })
      ]),
      _: 3
    }, 8, ["visible", "teleported", "popper-class", "effect", "transition", "persistent", "onShow"])
  ], 2)), [
    [_directive_click_outside, _ctx.handleClose, _ctx.popperPaneRef]
  ]);
}
var Select = _export_sfc(_sfc_main$S, [["render", _sfc_render$4], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);
var _sfc_main$R = defineComponent({
  name: "ElOptionGroup",
  componentName: "ElOptionGroup",
  props: {
    label: String,
    disabled: {
      type: Boolean,
      default: false
    }
  },
  setup(props2) {
    const ns2 = useNamespace("select");
    const visible = ref(true);
    const instance = getCurrentInstance();
    const children = ref([]);
    provide(selectGroupKey, reactive({
      ...toRefs(props2)
    }));
    const select2 = inject(selectKey);
    onMounted(() => {
      children.value = flattedChildren(instance.subTree);
    });
    const flattedChildren = (node) => {
      const children2 = [];
      if (Array.isArray(node.children)) {
        node.children.forEach((child) => {
          var _a2;
          if (child.type && child.type.name === "ElOption" && child.component && child.component.proxy) {
            children2.push(child.component.proxy);
          } else if ((_a2 = child.children) == null ? void 0 : _a2.length) {
            children2.push(...flattedChildren(child));
          }
        });
      }
      return children2;
    };
    const { groupQueryChange } = toRaw(select2);
    watch(groupQueryChange, () => {
      visible.value = children.value.some((option2) => option2.visible === true);
    });
    return {
      visible,
      ns: ns2
    };
  }
});
function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
  return withDirectives((openBlock(), createElementBlock("ul", {
    class: normalizeClass(_ctx.ns.be("group", "wrap"))
  }, [
    createBaseVNode("li", {
      class: normalizeClass(_ctx.ns.be("group", "title"))
    }, toDisplayString(_ctx.label), 3),
    createBaseVNode("li", null, [
      createBaseVNode("ul", {
        class: normalizeClass(_ctx.ns.b("group"))
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 2)
    ])
  ], 2)), [
    [vShow, _ctx.visible]
  ]);
}
var OptionGroup = _export_sfc(_sfc_main$R, [["render", _sfc_render$3], ["__file", "/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);
var ElSelect = withInstall(Select, {
  Option,
  OptionGroup
});
var ElOption = withNoopInstall(Option);
var ElOptionGroup = withNoopInstall(OptionGroup);
var popoverProps = buildProps({
  trigger: useTooltipTriggerProps.trigger,
  placement: dropdownProps.placement,
  disabled: useTooltipTriggerProps.disabled,
  visible: useTooltipContentProps.visible,
  transition: useTooltipContentProps.transition,
  popperOptions: dropdownProps.popperOptions,
  tabindex: dropdownProps.tabindex,
  content: useTooltipContentProps.content,
  popperStyle: useTooltipContentProps.popperStyle,
  popperClass: useTooltipContentProps.popperClass,
  enterable: {
    ...useTooltipContentProps.enterable,
    default: true
  },
  effect: {
    ...useTooltipContentProps.effect,
    default: "light"
  },
  teleported: useTooltipContentProps.teleported,
  title: String,
  width: {
    type: [String, Number],
    default: 150
  },
  offset: {
    type: Number,
    default: void 0
  },
  showAfter: {
    type: Number,
    default: 0
  },
  hideAfter: {
    type: Number,
    default: 200
  },
  autoClose: {
    type: Number,
    default: 0
  },
  showArrow: {
    type: Boolean,
    default: true
  },
  persistent: {
    type: Boolean,
    default: true
  },
  "onUpdate:visible": {
    type: Function
  }
});
var popoverEmits = {
  "update:visible": (value) => isBoolean(value),
  "before-enter": () => true,
  "before-leave": () => true,
  "after-enter": () => true,
  "after-leave": () => true
};
var __default__$6 = {
  name: "ElPopover"
};
var _sfc_main$Q = defineComponent({
  ...__default__$6,
  props: popoverProps,
  emits: popoverEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const updateEventKeyRaw = `onUpdate:visible`;
    const onUpdateVisible = computed(() => {
      return props2[updateEventKeyRaw];
    });
    const ns2 = useNamespace("popover");
    const tooltipRef = ref();
    const popperRef = computed(() => {
      var _a2;
      return (_a2 = unref(tooltipRef)) == null ? void 0 : _a2.popperRef;
    });
    const style2 = computed(() => {
      return [
        {
          width: addUnit(props2.width)
        },
        props2.popperStyle
      ];
    });
    const kls = computed(() => {
      return [ns2.b(), props2.popperClass, { [ns2.m("plain")]: !!props2.content }];
    });
    const gpuAcceleration = computed(() => {
      return props2.transition === `${ns2.namespace.value}-fade-in-linear`;
    });
    const hide = () => {
      var _a2;
      (_a2 = tooltipRef.value) == null ? void 0 : _a2.hide();
    };
    const beforeEnter = () => {
      emit("before-enter");
    };
    const beforeLeave = () => {
      emit("before-leave");
    };
    const afterEnter = () => {
      emit("after-enter");
    };
    const afterLeave = () => {
      emit("update:visible", false);
      emit("after-leave");
    };
    expose({
      popperRef,
      hide
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(ElTooltip), mergeProps({
        ref_key: "tooltipRef",
        ref: tooltipRef
      }, _ctx.$attrs, {
        trigger: _ctx.trigger,
        placement: _ctx.placement,
        disabled: _ctx.disabled,
        visible: _ctx.visible,
        transition: _ctx.transition,
        "popper-options": _ctx.popperOptions,
        tabindex: _ctx.tabindex,
        content: _ctx.content,
        offset: _ctx.offset,
        "show-after": _ctx.showAfter,
        "hide-after": _ctx.hideAfter,
        "auto-close": _ctx.autoClose,
        "show-arrow": _ctx.showArrow,
        "aria-label": _ctx.title,
        effect: _ctx.effect,
        enterable: _ctx.enterable,
        "popper-class": unref(kls),
        "popper-style": unref(style2),
        teleported: _ctx.teleported,
        persistent: _ctx.persistent,
        "gpu-acceleration": unref(gpuAcceleration),
        "onUpdate:visible": unref(onUpdateVisible),
        onBeforeShow: beforeEnter,
        onBeforeHide: beforeLeave,
        onShow: afterEnter,
        onHide: afterLeave
      }), {
        content: withCtx(() => [
          _ctx.title ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ns2).e("title")),
            role: "title"
          }, toDisplayString(_ctx.title), 3)) : createCommentVNode("v-if", true),
          renderSlot(_ctx.$slots, "default", {}, () => [
            createTextVNode(toDisplayString(_ctx.content), 1)
          ])
        ]),
        default: withCtx(() => [
          _ctx.$slots.reference ? renderSlot(_ctx.$slots, "reference", { key: 0 }) : createCommentVNode("v-if", true)
        ]),
        _: 3
      }, 16, ["trigger", "placement", "disabled", "visible", "transition", "popper-options", "tabindex", "content", "offset", "show-after", "hide-after", "auto-close", "show-arrow", "aria-label", "effect", "enterable", "popper-class", "popper-style", "teleported", "persistent", "gpu-acceleration", "onUpdate:visible"]);
    };
  }
});
var Popover = _export_sfc(_sfc_main$Q, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);
var attachEvents = (el2, binding) => {
  const popperComponent = binding.arg || binding.value;
  const popover2 = popperComponent == null ? void 0 : popperComponent.popperRef;
  if (popover2) {
    popover2.triggerRef = el2;
  }
};
var PopoverDirective = {
  mounted(el2, binding) {
    attachEvents(el2, binding);
  },
  updated(el2, binding) {
    attachEvents(el2, binding);
  }
};
var VPopover = "popover";
var ElPopoverDirective = withInstallDirective(PopoverDirective, VPopover);
var ElPopover = withInstall(Popover, {
  directive: ElPopoverDirective
});
var switchProps = buildProps({
  modelValue: {
    type: [Boolean, String, Number],
    default: false
  },
  value: {
    type: [Boolean, String, Number],
    default: false
  },
  disabled: {
    type: Boolean,
    default: false
  },
  width: {
    type: [String, Number],
    default: ""
  },
  inlinePrompt: {
    type: Boolean,
    default: false
  },
  activeIcon: {
    type: iconPropType
  },
  inactiveIcon: {
    type: iconPropType
  },
  activeText: {
    type: String,
    default: ""
  },
  inactiveText: {
    type: String,
    default: ""
  },
  activeColor: {
    type: String,
    default: ""
  },
  inactiveColor: {
    type: String,
    default: ""
  },
  borderColor: {
    type: String,
    default: ""
  },
  activeValue: {
    type: [Boolean, String, Number],
    default: true
  },
  inactiveValue: {
    type: [Boolean, String, Number],
    default: false
  },
  name: {
    type: String,
    default: ""
  },
  validateEvent: {
    type: Boolean,
    default: true
  },
  id: String,
  loading: {
    type: Boolean,
    default: false
  },
  beforeChange: {
    type: definePropType(Function)
  },
  size: {
    type: String,
    validator: isValidComponentSize
  },
  tabindex: {
    type: [String, Number]
  }
});
var switchEmits = {
  [UPDATE_MODEL_EVENT]: (val) => isBoolean(val) || isString(val) || isNumber(val),
  [CHANGE_EVENT]: (val) => isBoolean(val) || isString(val) || isNumber(val),
  [INPUT_EVENT]: (val) => isBoolean(val) || isString(val) || isNumber(val)
};
var _hoisted_1$D = ["onClick"];
var _hoisted_2$r = ["id", "aria-checked", "aria-disabled", "name", "true-value", "false-value", "disabled", "tabindex", "onKeydown"];
var _hoisted_3$o = ["aria-hidden"];
var _hoisted_4$j = ["aria-hidden"];
var _hoisted_5$a = ["aria-hidden"];
var _hoisted_6$8 = ["aria-hidden"];
var __default__$5 = {
  name: "ElSwitch"
};
var _sfc_main$P = defineComponent({
  ...__default__$5,
  props: switchProps,
  emits: switchEmits,
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const COMPONENT_NAME2 = "ElSwitch";
    const vm = getCurrentInstance();
    const { formItem } = useFormItem();
    const switchSize = useSize();
    const ns2 = useNamespace("switch");
    useDeprecated({
      from: '"value"',
      replacement: '"model-value" or "v-model"',
      scope: COMPONENT_NAME2,
      version: "2.3.0",
      ref: "https://element-plus.org/en-US/component/switch.html#attributes",
      type: "Attribute"
    }, computed(() => {
      var _a2;
      return !!((_a2 = vm.vnode.props) == null ? void 0 : _a2.value);
    }));
    const { inputId } = useFormItemInputId(props2, {
      formItemContext: formItem
    });
    const switchDisabled = useDisabled(computed(() => props2.loading));
    const isControlled = ref(props2.modelValue !== false);
    const input2 = ref();
    const core = ref();
    const switchKls = computed(() => [
      ns2.b(),
      ns2.m(switchSize.value),
      ns2.is("disabled", switchDisabled.value),
      ns2.is("checked", checked.value)
    ]);
    const coreStyle = computed(() => ({
      width: addUnit(props2.width)
    }));
    watch(() => props2.modelValue, () => {
      isControlled.value = true;
    });
    watch(() => props2.value, () => {
      isControlled.value = false;
    });
    const actualValue = computed(() => {
      return isControlled.value ? props2.modelValue : props2.value;
    });
    const checked = computed(() => actualValue.value === props2.activeValue);
    if (![props2.activeValue, props2.inactiveValue].includes(actualValue.value)) {
      emit(UPDATE_MODEL_EVENT, props2.inactiveValue);
      emit(CHANGE_EVENT, props2.inactiveValue);
      emit(INPUT_EVENT, props2.inactiveValue);
    }
    watch(checked, (val) => {
      var _a2;
      input2.value.checked = val;
      if (props2.validateEvent) {
        (_a2 = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a2.call(formItem, "change").catch((err) => debugWarn());
      }
    });
    const handleChange = () => {
      const val = checked.value ? props2.inactiveValue : props2.activeValue;
      emit(UPDATE_MODEL_EVENT, val);
      emit(CHANGE_EVENT, val);
      emit(INPUT_EVENT, val);
      nextTick(() => {
        input2.value.checked = checked.value;
      });
    };
    const switchValue = () => {
      if (switchDisabled.value)
        return;
      const { beforeChange } = props2;
      if (!beforeChange) {
        handleChange();
        return;
      }
      const shouldChange = beforeChange();
      const isPromiseOrBool = [
        isPromise(shouldChange),
        isBoolean(shouldChange)
      ].includes(true);
      if (!isPromiseOrBool) {
        throwError(COMPONENT_NAME2, "beforeChange must return type `Promise<boolean>` or `boolean`");
      }
      if (isPromise(shouldChange)) {
        shouldChange.then((result) => {
          if (result) {
            handleChange();
          }
        }).catch((e2) => {
        });
      } else if (shouldChange) {
        handleChange();
      }
    };
    const styles = computed(() => {
      return ns2.cssVarBlock({
        ...props2.activeColor ? { "on-color": props2.activeColor } : null,
        ...props2.inactiveColor ? { "off-color": props2.inactiveColor } : null,
        ...props2.borderColor ? { "border-color": props2.borderColor } : null
      });
    });
    const focus = () => {
      var _a2, _b;
      (_b = (_a2 = input2.value) == null ? void 0 : _a2.focus) == null ? void 0 : _b.call(_a2);
    };
    onMounted(() => {
      input2.value.checked = checked.value;
    });
    expose({
      focus,
      checked
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(unref(switchKls)),
        style: normalizeStyle(unref(styles)),
        onClick: withModifiers(switchValue, ["prevent"])
      }, [
        createBaseVNode("input", {
          id: unref(inputId),
          ref_key: "input",
          ref: input2,
          class: normalizeClass(unref(ns2).e("input")),
          type: "checkbox",
          role: "switch",
          "aria-checked": unref(checked),
          "aria-disabled": unref(switchDisabled),
          name: _ctx.name,
          "true-value": _ctx.activeValue,
          "false-value": _ctx.inactiveValue,
          disabled: unref(switchDisabled),
          tabindex: _ctx.tabindex,
          onChange: handleChange,
          onKeydown: withKeys(switchValue, ["enter"])
        }, null, 42, _hoisted_2$r),
        !_ctx.inlinePrompt && (_ctx.inactiveIcon || _ctx.inactiveText) ? (openBlock(), createElementBlock("span", {
          key: 0,
          class: normalizeClass([
            unref(ns2).e("label"),
            unref(ns2).em("label", "left"),
            unref(ns2).is("active", !unref(checked))
          ])
        }, [
          _ctx.inactiveIcon ? (openBlock(), createBlock(unref(ElIcon), { key: 0 }, {
            default: withCtx(() => [
              (openBlock(), createBlock(resolveDynamicComponent(_ctx.inactiveIcon)))
            ]),
            _: 1
          })) : createCommentVNode("v-if", true),
          !_ctx.inactiveIcon && _ctx.inactiveText ? (openBlock(), createElementBlock("span", {
            key: 1,
            "aria-hidden": unref(checked)
          }, toDisplayString(_ctx.inactiveText), 9, _hoisted_3$o)) : createCommentVNode("v-if", true)
        ], 2)) : createCommentVNode("v-if", true),
        createBaseVNode("span", {
          ref_key: "core",
          ref: core,
          class: normalizeClass(unref(ns2).e("core")),
          style: normalizeStyle(unref(coreStyle))
        }, [
          _ctx.inlinePrompt ? (openBlock(), createElementBlock("div", {
            key: 0,
            class: normalizeClass(unref(ns2).e("inner"))
          }, [
            _ctx.activeIcon || _ctx.inactiveIcon ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
              _ctx.activeIcon ? (openBlock(), createBlock(unref(ElIcon), {
                key: 0,
                class: normalizeClass([unref(ns2).is("icon"), unref(checked) ? unref(ns2).is("show") : unref(ns2).is("hide")])
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(_ctx.activeIcon)))
                ]),
                _: 1
              }, 8, ["class"])) : createCommentVNode("v-if", true),
              _ctx.inactiveIcon ? (openBlock(), createBlock(unref(ElIcon), {
                key: 1,
                class: normalizeClass([unref(ns2).is("icon"), !unref(checked) ? unref(ns2).is("show") : unref(ns2).is("hide")])
              }, {
                default: withCtx(() => [
                  (openBlock(), createBlock(resolveDynamicComponent(_ctx.inactiveIcon)))
                ]),
                _: 1
              }, 8, ["class"])) : createCommentVNode("v-if", true)
            ], 64)) : _ctx.activeText || _ctx.inactiveIcon ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [
              _ctx.activeText ? (openBlock(), createElementBlock("span", {
                key: 0,
                class: normalizeClass([unref(ns2).is("text"), unref(checked) ? unref(ns2).is("show") : unref(ns2).is("hide")]),
                "aria-hidden": !unref(checked)
              }, toDisplayString(_ctx.activeText.substring(0, 3)), 11, _hoisted_4$j)) : createCommentVNode("v-if", true),
              _ctx.inactiveText ? (openBlock(), createElementBlock("span", {
                key: 1,
                class: normalizeClass([unref(ns2).is("text"), !unref(checked) ? unref(ns2).is("show") : unref(ns2).is("hide")]),
                "aria-hidden": unref(checked)
              }, toDisplayString(_ctx.inactiveText.substring(0, 3)), 11, _hoisted_5$a)) : createCommentVNode("v-if", true)
            ], 64)) : createCommentVNode("v-if", true)
          ], 2)) : createCommentVNode("v-if", true),
          createBaseVNode("div", {
            class: normalizeClass(unref(ns2).e("action"))
          }, [
            _ctx.loading ? (openBlock(), createBlock(unref(ElIcon), {
              key: 0,
              class: normalizeClass(unref(ns2).is("loading"))
            }, {
              default: withCtx(() => [
                createVNode(unref(loading_default))
              ]),
              _: 1
            }, 8, ["class"])) : createCommentVNode("v-if", true)
          ], 2)
        ], 6),
        !_ctx.inlinePrompt && (_ctx.activeIcon || _ctx.activeText) ? (openBlock(), createElementBlock("span", {
          key: 1,
          class: normalizeClass([
            unref(ns2).e("label"),
            unref(ns2).em("label", "right"),
            unref(ns2).is("active", unref(checked))
          ])
        }, [
          _ctx.activeIcon ? (openBlock(), createBlock(unref(ElIcon), { key: 0 }, {
            default: withCtx(() => [
              (openBlock(), createBlock(resolveDynamicComponent(_ctx.activeIcon)))
            ]),
            _: 1
          })) : createCommentVNode("v-if", true),
          !_ctx.activeIcon && _ctx.activeText ? (openBlock(), createElementBlock("span", {
            key: 1,
            "aria-hidden": !unref(checked)
          }, toDisplayString(_ctx.activeText), 9, _hoisted_6$8)) : createCommentVNode("v-if", true)
        ], 2)) : createCommentVNode("v-if", true)
      ], 14, _hoisted_1$D);
    };
  }
});
var Switch = _export_sfc(_sfc_main$P, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);
var ElSwitch = withInstall(Switch);
var tabBarProps = buildProps({
  tabs: {
    type: definePropType(Array),
    default: () => mutable([])
  }
});
var __default__$4 = {
  name: "ElTabBar"
};
var _sfc_main$O = defineComponent({
  ...__default__$4,
  props: tabBarProps,
  setup(__props, { expose }) {
    const props2 = __props;
    const COMPONENT_NAME2 = "ElTabBar";
    const instance = getCurrentInstance();
    const rootTabs = inject(tabsRootContextKey);
    if (!rootTabs)
      throwError(COMPONENT_NAME2, "<el-tabs><el-tab-bar /></el-tabs>");
    const ns2 = useNamespace("tabs");
    const barRef = ref();
    const barStyle = ref();
    const getBarStyle = () => {
      let offset = 0;
      let tabSize = 0;
      const sizeName = ["top", "bottom"].includes(rootTabs.props.tabPosition) ? "width" : "height";
      const sizeDir = sizeName === "width" ? "x" : "y";
      props2.tabs.every((tab) => {
        var _a2, _b, _c, _d;
        const $el = (_b = (_a2 = instance.parent) == null ? void 0 : _a2.refs) == null ? void 0 : _b[`tab-${tab.uid}`];
        if (!$el)
          return false;
        if (!tab.active) {
          return true;
        }
        tabSize = $el[`client${capitalize$1(sizeName)}`];
        const position = sizeDir === "x" ? "left" : "top";
        offset = $el.getBoundingClientRect()[position] - ((_d = (_c = $el.parentElement) == null ? void 0 : _c.getBoundingClientRect()[position]) != null ? _d : 0);
        const tabStyles = window.getComputedStyle($el);
        if (sizeName === "width") {
          if (props2.tabs.length > 1) {
            tabSize -= Number.parseFloat(tabStyles.paddingLeft) + Number.parseFloat(tabStyles.paddingRight);
          }
          offset += Number.parseFloat(tabStyles.paddingLeft);
        }
        return false;
      });
      return {
        [sizeName]: `${tabSize}px`,
        transform: `translate${capitalize$1(sizeDir)}(${offset}px)`
      };
    };
    const update = () => barStyle.value = getBarStyle();
    watch(() => props2.tabs, async () => {
      await nextTick();
      update();
    }, { immediate: true });
    useResizeObserver(barRef, () => update());
    expose({
      ref: barRef,
      update
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "barRef",
        ref: barRef,
        class: normalizeClass([unref(ns2).e("active-bar"), unref(ns2).is(unref(rootTabs).props.tabPosition)]),
        style: normalizeStyle(barStyle.value)
      }, null, 6);
    };
  }
});
var TabBar = _export_sfc(_sfc_main$O, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);
var tabNavProps = buildProps({
  panes: {
    type: definePropType(Array),
    default: () => mutable([])
  },
  currentName: {
    type: [String, Number],
    default: ""
  },
  editable: Boolean,
  onTabClick: {
    type: definePropType(Function),
    default: NOOP
  },
  onTabRemove: {
    type: definePropType(Function),
    default: NOOP
  },
  type: {
    type: String,
    values: ["card", "border-card", ""],
    default: ""
  },
  stretch: Boolean
});
var COMPONENT_NAME = "ElTabNav";
var TabNav = defineComponent({
  name: COMPONENT_NAME,
  props: tabNavProps,
  setup(props2, {
    expose
  }) {
    const vm = getCurrentInstance();
    const rootTabs = inject(tabsRootContextKey);
    if (!rootTabs)
      throwError(COMPONENT_NAME, `<el-tabs><tab-nav /></el-tabs>`);
    const ns2 = useNamespace("tabs");
    const visibility = useDocumentVisibility();
    const focused = useWindowFocus();
    const navScroll$ = ref();
    const nav$ = ref();
    const el$ = ref();
    const scrollable = ref(false);
    const navOffset = ref(0);
    const isFocus = ref(false);
    const focusable = ref(true);
    const sizeName = computed(() => ["top", "bottom"].includes(rootTabs.props.tabPosition) ? "width" : "height");
    const navStyle = computed(() => {
      const dir = sizeName.value === "width" ? "X" : "Y";
      return {
        transform: `translate${dir}(-${navOffset.value}px)`
      };
    });
    const scrollPrev = () => {
      if (!navScroll$.value)
        return;
      const containerSize = navScroll$.value[`offset${capitalize$1(sizeName.value)}`];
      const currentOffset = navOffset.value;
      if (!currentOffset)
        return;
      const newOffset = currentOffset > containerSize ? currentOffset - containerSize : 0;
      navOffset.value = newOffset;
    };
    const scrollNext = () => {
      if (!navScroll$.value || !nav$.value)
        return;
      const navSize = nav$.value[`offset${capitalize$1(sizeName.value)}`];
      const containerSize = navScroll$.value[`offset${capitalize$1(sizeName.value)}`];
      const currentOffset = navOffset.value;
      if (navSize - currentOffset <= containerSize)
        return;
      const newOffset = navSize - currentOffset > containerSize * 2 ? currentOffset + containerSize : navSize - containerSize;
      navOffset.value = newOffset;
    };
    const scrollToActiveTab = async () => {
      const nav = nav$.value;
      if (!scrollable.value || !el$.value || !navScroll$.value || !nav)
        return;
      await nextTick();
      const activeTab = el$.value.querySelector(".is-active");
      if (!activeTab)
        return;
      const navScroll = navScroll$.value;
      const isHorizontal = ["top", "bottom"].includes(rootTabs.props.tabPosition);
      const activeTabBounding = activeTab.getBoundingClientRect();
      const navScrollBounding = navScroll.getBoundingClientRect();
      const maxOffset = isHorizontal ? nav.offsetWidth - navScrollBounding.width : nav.offsetHeight - navScrollBounding.height;
      const currentOffset = navOffset.value;
      let newOffset = currentOffset;
      if (isHorizontal) {
        if (activeTabBounding.left < navScrollBounding.left) {
          newOffset = currentOffset - (navScrollBounding.left - activeTabBounding.left);
        }
        if (activeTabBounding.right > navScrollBounding.right) {
          newOffset = currentOffset + activeTabBounding.right - navScrollBounding.right;
        }
      } else {
        if (activeTabBounding.top < navScrollBounding.top) {
          newOffset = currentOffset - (navScrollBounding.top - activeTabBounding.top);
        }
        if (activeTabBounding.bottom > navScrollBounding.bottom) {
          newOffset = currentOffset + (activeTabBounding.bottom - navScrollBounding.bottom);
        }
      }
      newOffset = Math.max(newOffset, 0);
      navOffset.value = Math.min(newOffset, maxOffset);
    };
    const update = () => {
      if (!nav$.value || !navScroll$.value)
        return;
      const navSize = nav$.value[`offset${capitalize$1(sizeName.value)}`];
      const containerSize = navScroll$.value[`offset${capitalize$1(sizeName.value)}`];
      const currentOffset = navOffset.value;
      if (containerSize < navSize) {
        const currentOffset2 = navOffset.value;
        scrollable.value = scrollable.value || {};
        scrollable.value.prev = currentOffset2;
        scrollable.value.next = currentOffset2 + containerSize < navSize;
        if (navSize - currentOffset2 < containerSize) {
          navOffset.value = navSize - containerSize;
        }
      } else {
        scrollable.value = false;
        if (currentOffset > 0) {
          navOffset.value = 0;
        }
      }
    };
    const changeTab = (e2) => {
      const code = e2.code;
      const {
        up,
        down,
        left,
        right
      } = EVENT_CODE;
      if (![up, down, left, right].includes(code))
        return;
      const tabList = Array.from(e2.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));
      const currentIndex = tabList.indexOf(e2.target);
      let nextIndex;
      if (code === left || code === up) {
        if (currentIndex === 0) {
          nextIndex = tabList.length - 1;
        } else {
          nextIndex = currentIndex - 1;
        }
      } else {
        if (currentIndex < tabList.length - 1) {
          nextIndex = currentIndex + 1;
        } else {
          nextIndex = 0;
        }
      }
      tabList[nextIndex].focus();
      tabList[nextIndex].click();
      setFocus();
    };
    const setFocus = () => {
      if (focusable.value)
        isFocus.value = true;
    };
    const removeFocus = () => isFocus.value = false;
    watch(visibility, (visibility2) => {
      if (visibility2 === "hidden") {
        focusable.value = false;
      } else if (visibility2 === "visible") {
        setTimeout(() => focusable.value = true, 50);
      }
    });
    watch(focused, (focused2) => {
      if (focused2) {
        setTimeout(() => focusable.value = true, 50);
      } else {
        focusable.value = false;
      }
    });
    useResizeObserver(el$, update);
    onMounted(() => setTimeout(() => scrollToActiveTab(), 0));
    onUpdated(() => update());
    expose({
      scrollToActiveTab,
      removeFocus
    });
    watch(() => props2.panes, () => vm.update(), {
      flush: "post"
    });
    return () => {
      const scrollBtn = scrollable.value ? [createVNode("span", {
        "class": [ns2.e("nav-prev"), ns2.is("disabled", !scrollable.value.prev)],
        "onClick": scrollPrev
      }, [createVNode(ElIcon, null, {
        default: () => [createVNode(arrow_left_default, null, null)]
      })]), createVNode("span", {
        "class": [ns2.e("nav-next"), ns2.is("disabled", !scrollable.value.next)],
        "onClick": scrollNext
      }, [createVNode(ElIcon, null, {
        default: () => [createVNode(arrow_right_default, null, null)]
      })])] : null;
      const tabs2 = props2.panes.map((pane, index) => {
        var _a2, _b, _c, _d;
        const uid = pane.uid;
        const disabled = pane.props.disabled;
        const tabName = (_b = (_a2 = pane.props.name) != null ? _a2 : pane.index) != null ? _b : `${index}`;
        const closable = !disabled && (pane.isClosable || props2.editable);
        pane.index = `${index}`;
        const btnClose = closable ? createVNode(ElIcon, {
          "class": "is-icon-close",
          "onClick": (ev) => props2.onTabRemove(pane, ev)
        }, {
          default: () => [createVNode(close_default, null, null)]
        }) : null;
        const tabLabelContent = ((_d = (_c = pane.slots).label) == null ? void 0 : _d.call(_c)) || pane.props.label;
        const tabindex = !disabled && pane.active ? 0 : -1;
        return createVNode("div", {
          "ref": `tab-${uid}`,
          "class": [ns2.e("item"), ns2.is(rootTabs.props.tabPosition), ns2.is("active", pane.active), ns2.is("disabled", disabled), ns2.is("closable", closable), ns2.is("focus", isFocus.value)],
          "id": `tab-${tabName}`,
          "key": `tab-${uid}`,
          "aria-controls": `pane-${tabName}`,
          "role": "tab",
          "aria-selected": pane.active,
          "tabindex": tabindex,
          "onFocus": () => setFocus(),
          "onBlur": () => removeFocus(),
          "onClick": (ev) => {
            removeFocus();
            props2.onTabClick(pane, tabName, ev);
          },
          "onKeydown": (ev) => {
            if (closable && (ev.code === EVENT_CODE.delete || ev.code === EVENT_CODE.backspace)) {
              props2.onTabRemove(pane, ev);
            }
          }
        }, [...[tabLabelContent, btnClose]]);
      });
      return createVNode("div", {
        "ref": el$,
        "class": [ns2.e("nav-wrap"), ns2.is("scrollable", !!scrollable.value), ns2.is(rootTabs.props.tabPosition)]
      }, [scrollBtn, createVNode("div", {
        "class": ns2.e("nav-scroll"),
        "ref": navScroll$
      }, [createVNode("div", {
        "class": [ns2.e("nav"), ns2.is(rootTabs.props.tabPosition), ns2.is("stretch", props2.stretch && ["top", "bottom"].includes(rootTabs.props.tabPosition))],
        "ref": nav$,
        "style": navStyle.value,
        "role": "tablist",
        "onKeydown": changeTab
      }, [...[!props2.type ? createVNode(TabBar, {
        "tabs": [...props2.panes]
      }, null) : null, tabs2]])])]);
    };
  }
});
var tabsProps = buildProps({
  type: {
    type: String,
    values: ["card", "border-card", ""],
    default: ""
  },
  activeName: {
    type: [String, Number]
  },
  closable: Boolean,
  addable: Boolean,
  modelValue: {
    type: [String, Number]
  },
  editable: Boolean,
  tabPosition: {
    type: String,
    values: ["top", "right", "bottom", "left"],
    default: "top"
  },
  beforeLeave: {
    type: definePropType(Function),
    default: () => true
  },
  stretch: Boolean
});
var isPanelName = (value) => isString(value) || isNumber(value);
var tabsEmits = {
  [UPDATE_MODEL_EVENT]: (name) => isPanelName(name),
  "tab-click": (pane, ev) => ev instanceof Event,
  "tab-change": (name) => isPanelName(name),
  edit: (paneName, action) => ["remove", "add"].includes(action),
  "tab-remove": (name) => isPanelName(name),
  "tab-add": () => true
};
var Tabs = defineComponent({
  name: "ElTabs",
  props: tabsProps,
  emits: tabsEmits,
  setup(props2, {
    emit,
    slots,
    expose
  }) {
    var _a2, _b;
    const ns2 = useNamespace("tabs");
    const nav$ = ref();
    const panes = reactive({});
    const currentName = ref((_b = (_a2 = props2.modelValue) != null ? _a2 : props2.activeName) != null ? _b : "0");
    const changeCurrentName = (value) => {
      currentName.value = value;
      emit(UPDATE_MODEL_EVENT, value);
      emit("tab-change", value);
    };
    const setCurrentName = async (value) => {
      var _a22, _b2, _c;
      if (currentName.value === value || isUndefined(value))
        return;
      try {
        const canLeave = await ((_a22 = props2.beforeLeave) == null ? void 0 : _a22.call(props2, value, currentName.value));
        if (canLeave !== false) {
          changeCurrentName(value);
          (_c = (_b2 = nav$.value) == null ? void 0 : _b2.removeFocus) == null ? void 0 : _c.call(_b2);
        }
      } catch (e2) {
      }
    };
    const handleTabClick = (tab, tabName, event) => {
      if (tab.props.disabled)
        return;
      setCurrentName(tabName);
      emit("tab-click", tab, event);
    };
    const handleTabRemove = (pane, ev) => {
      if (pane.props.disabled || isUndefined(pane.props.name))
        return;
      ev.stopPropagation();
      emit("edit", pane.props.name, "remove");
      emit("tab-remove", pane.props.name);
    };
    const handleTabAdd = () => {
      emit("edit", void 0, "add");
      emit("tab-add");
    };
    useDeprecated({
      from: '"activeName"',
      replacement: '"model-value" or "v-model"',
      scope: "ElTabs",
      version: "2.3.0",
      ref: "https://element-plus.org/en-US/component/tabs.html#attributes",
      type: "Attribute"
    }, computed(() => !!props2.activeName));
    watch(() => props2.activeName, (modelValue) => setCurrentName(modelValue));
    watch(() => props2.modelValue, (modelValue) => setCurrentName(modelValue));
    watch(currentName, async () => {
      var _a22;
      await nextTick();
      (_a22 = nav$.value) == null ? void 0 : _a22.scrollToActiveTab();
    });
    {
      const registerPane = (pane) => panes[pane.uid] = pane;
      const unregisterPane = (uid) => delete panes[uid];
      provide(tabsRootContextKey, {
        props: props2,
        currentName,
        registerPane,
        unregisterPane
      });
    }
    expose({
      currentName
    });
    return () => {
      const newButton = props2.editable || props2.addable ? createVNode("span", {
        "class": ns2.e("new-tab"),
        "tabindex": "0",
        "onClick": handleTabAdd,
        "onKeydown": (ev) => {
          if (ev.code === EVENT_CODE.enter)
            handleTabAdd();
        }
      }, [createVNode(ElIcon, {
        "class": ns2.is("icon-plus")
      }, {
        default: () => [createVNode(plus_default, null, null)]
      })]) : null;
      const header = createVNode("div", {
        "class": [ns2.e("header"), ns2.is(props2.tabPosition)]
      }, [newButton, createVNode(TabNav, {
        "ref": nav$,
        "currentName": currentName.value,
        "editable": props2.editable,
        "type": props2.type,
        "panes": Object.values(panes),
        "stretch": props2.stretch,
        "onTabClick": handleTabClick,
        "onTabRemove": handleTabRemove
      }, null)]);
      const panels = createVNode("div", {
        "class": ns2.e("content")
      }, [renderSlot(slots, "default")]);
      return createVNode("div", {
        "class": [ns2.b(), ns2.m(props2.tabPosition), {
          [ns2.m("card")]: props2.type === "card",
          [ns2.m("border-card")]: props2.type === "border-card"
        }]
      }, [...props2.tabPosition !== "bottom" ? [header, panels] : [panels, header]]);
    };
  }
});
var tabPaneProps = buildProps({
  label: {
    type: String,
    default: ""
  },
  name: {
    type: [String, Number]
  },
  closable: Boolean,
  disabled: Boolean,
  lazy: Boolean
});
var _hoisted_1$C = ["id", "aria-hidden", "aria-labelledby"];
var __default__$3 = {
  name: "ElTabPane"
};
var _sfc_main$N = defineComponent({
  ...__default__$3,
  props: tabPaneProps,
  setup(__props) {
    const props2 = __props;
    const COMPONENT_NAME2 = "ElTabPane";
    const instance = getCurrentInstance();
    const slots = useSlots();
    const tabsRoot = inject(tabsRootContextKey);
    if (!tabsRoot)
      throwError(COMPONENT_NAME2, "usage: <el-tabs><el-tab-pane /></el-tabs/>");
    const ns2 = useNamespace("tab-pane");
    const index = ref();
    const isClosable = computed(() => props2.closable || tabsRoot.props.closable);
    const active = computedEager(() => {
      var _a2;
      return tabsRoot.currentName.value === ((_a2 = props2.name) != null ? _a2 : index.value);
    });
    const loaded = ref(active.value);
    const paneName = computed(() => {
      var _a2;
      return (_a2 = props2.name) != null ? _a2 : index.value;
    });
    const shouldBeRender = computedEager(() => !props2.lazy || loaded.value || active.value);
    watch(active, (val) => {
      if (val)
        loaded.value = true;
    });
    const pane = reactive({
      uid: instance.uid,
      slots,
      props: props2,
      paneName,
      active,
      index,
      isClosable
    });
    onMounted(() => {
      tabsRoot.registerPane(pane);
    });
    onUnmounted(() => {
      tabsRoot.unregisterPane(pane.uid);
    });
    return (_ctx, _cache) => {
      return unref(shouldBeRender) ? withDirectives((openBlock(), createElementBlock("div", {
        key: 0,
        id: `pane-${unref(paneName)}`,
        class: normalizeClass(unref(ns2).b()),
        role: "tabpanel",
        "aria-hidden": !unref(active),
        "aria-labelledby": `tab-${unref(paneName)}`
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 10, _hoisted_1$C)), [
        [vShow, unref(active)]
      ]) : createCommentVNode("v-if", true);
    };
  }
});
var TabPane = _export_sfc(_sfc_main$N, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);
var ElTabs = withInstall(Tabs, {
  TabPane
});
var ElTabPane = withNoopInstall(TabPane);
var notificationTypes = [
  "success",
  "info",
  "warning",
  "error"
];
var notificationProps = buildProps({
  customClass: {
    type: String,
    default: ""
  },
  dangerouslyUseHTMLString: {
    type: Boolean,
    default: false
  },
  duration: {
    type: Number,
    default: 4500
  },
  icon: {
    type: iconPropType
  },
  id: {
    type: String,
    default: ""
  },
  message: {
    type: definePropType([String, Object]),
    default: ""
  },
  offset: {
    type: Number,
    default: 0
  },
  onClick: {
    type: definePropType(Function),
    default: () => void 0
  },
  onClose: {
    type: definePropType(Function),
    required: true
  },
  position: {
    type: String,
    values: ["top-right", "top-left", "bottom-right", "bottom-left"],
    default: "top-right"
  },
  showClose: {
    type: Boolean,
    default: true
  },
  title: {
    type: String,
    default: ""
  },
  type: {
    type: String,
    values: [...notificationTypes, ""],
    default: ""
  },
  zIndex: {
    type: Number,
    default: 0
  }
});
var notificationEmits = {
  destroy: () => true
};
var _hoisted_1$B = ["id"];
var _hoisted_2$q = ["textContent"];
var _hoisted_3$n = { key: 0 };
var _hoisted_4$i = ["innerHTML"];
var __default__$2 = {
  name: "ElNotification"
};
var _sfc_main$M = defineComponent({
  ...__default__$2,
  props: notificationProps,
  emits: notificationEmits,
  setup(__props, { expose }) {
    const props2 = __props;
    const ns2 = useNamespace("notification");
    const { Close } = CloseComponents;
    const visible = ref(false);
    let timer = void 0;
    const typeClass = computed(() => {
      const type = props2.type;
      return type && TypeComponentsMap[props2.type] ? ns2.m(type) : "";
    });
    const iconComponent = computed(() => {
      if (!props2.type)
        return props2.icon;
      return TypeComponentsMap[props2.type] || props2.icon;
    });
    const horizontalClass = computed(() => props2.position.endsWith("right") ? "right" : "left");
    const verticalProperty = computed(() => props2.position.startsWith("top") ? "top" : "bottom");
    const positionStyle = computed(() => {
      return {
        [verticalProperty.value]: `${props2.offset}px`,
        zIndex: props2.zIndex
      };
    });
    function startTimer() {
      if (props2.duration > 0) {
        ({ stop: timer } = useTimeoutFn(() => {
          if (visible.value)
            close2();
        }, props2.duration));
      }
    }
    function clearTimer() {
      timer == null ? void 0 : timer();
    }
    function close2() {
      visible.value = false;
    }
    function onKeydown({ code }) {
      if (code === EVENT_CODE.delete || code === EVENT_CODE.backspace) {
        clearTimer();
      } else if (code === EVENT_CODE.esc) {
        if (visible.value) {
          close2();
        }
      } else {
        startTimer();
      }
    }
    onMounted(() => {
      startTimer();
      visible.value = true;
    });
    useEventListener(document, "keydown", onKeydown);
    expose({
      visible,
      close: close2
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(Transition, {
        name: unref(ns2).b("fade"),
        onBeforeLeave: _ctx.onClose,
        onAfterLeave: _cache[1] || (_cache[1] = ($event) => _ctx.$emit("destroy")),
        persisted: ""
      }, {
        default: withCtx(() => [
          withDirectives(createBaseVNode("div", {
            id: _ctx.id,
            class: normalizeClass([unref(ns2).b(), _ctx.customClass, unref(horizontalClass)]),
            style: normalizeStyle(unref(positionStyle)),
            role: "alert",
            onMouseenter: clearTimer,
            onMouseleave: startTimer,
            onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))
          }, [
            unref(iconComponent) ? (openBlock(), createBlock(unref(ElIcon), {
              key: 0,
              class: normalizeClass([unref(ns2).e("icon"), unref(typeClass)])
            }, {
              default: withCtx(() => [
                (openBlock(), createBlock(resolveDynamicComponent(unref(iconComponent))))
              ]),
              _: 1
            }, 8, ["class"])) : createCommentVNode("v-if", true),
            createBaseVNode("div", {
              class: normalizeClass(unref(ns2).e("group"))
            }, [
              createBaseVNode("h2", {
                class: normalizeClass(unref(ns2).e("title")),
                textContent: toDisplayString(_ctx.title)
              }, null, 10, _hoisted_2$q),
              withDirectives(createBaseVNode("div", {
                class: normalizeClass(unref(ns2).e("content")),
                style: normalizeStyle(!!_ctx.title ? void 0 : { margin: 0 })
              }, [
                renderSlot(_ctx.$slots, "default", {}, () => [
                  !_ctx.dangerouslyUseHTMLString ? (openBlock(), createElementBlock("p", _hoisted_3$n, toDisplayString(_ctx.message), 1)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                    createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),
                    createBaseVNode("p", { innerHTML: _ctx.message }, null, 8, _hoisted_4$i)
                  ], 2112))
                ])
              ], 6), [
                [vShow, _ctx.message]
              ]),
              _ctx.showClose ? (openBlock(), createBlock(unref(ElIcon), {
                key: 0,
                class: normalizeClass(unref(ns2).e("closeBtn")),
                onClick: withModifiers(close2, ["stop"])
              }, {
                default: withCtx(() => [
                  createVNode(unref(Close))
                ]),
                _: 1
              }, 8, ["class", "onClick"])) : createCommentVNode("v-if", true)
            ], 2)
          ], 46, _hoisted_1$B), [
            [vShow, visible.value]
          ])
        ]),
        _: 3
      }, 8, ["name", "onBeforeLeave"]);
    };
  }
});
var NotificationConstructor = _export_sfc(_sfc_main$M, [["__file", "/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);
var notifications = {
  "top-left": [],
  "top-right": [],
  "bottom-left": [],
  "bottom-right": []
};
var GAP_SIZE = 16;
var seed = 1;
var notify = function(options = {}, context = null) {
  if (!isClient)
    return { close: () => void 0 };
  if (typeof options === "string" || isVNode(options)) {
    options = { message: options };
  }
  const position = options.position || "top-right";
  let verticalOffset = options.offset || 0;
  notifications[position].forEach(({ vm: vm2 }) => {
    var _a2;
    verticalOffset += (((_a2 = vm2.el) == null ? void 0 : _a2.offsetHeight) || 0) + GAP_SIZE;
  });
  verticalOffset += GAP_SIZE;
  const { nextZIndex } = useZIndex();
  const id = `notification_${seed++}`;
  const userOnClose = options.onClose;
  const props2 = {
    ...options,
    zIndex: nextZIndex(),
    offset: verticalOffset,
    id,
    onClose: () => {
      close(id, position, userOnClose);
    }
  };
  let appendTo = document.body;
  if (isElement$1(options.appendTo)) {
    appendTo = options.appendTo;
  } else if (isString(options.appendTo)) {
    appendTo = document.querySelector(options.appendTo);
  }
  if (!isElement$1(appendTo)) {
    appendTo = document.body;
  }
  const container = document.createElement("div");
  const vm = createVNode(NotificationConstructor, props2, isVNode(props2.message) ? {
    default: () => props2.message
  } : null);
  vm.appContext = context != null ? context : notify._context;
  vm.props.onDestroy = () => {
    render(null, container);
  };
  render(vm, container);
  notifications[position].push({ vm });
  appendTo.appendChild(container.firstElementChild);
  return {
    close: () => {
      vm.component.exposed.visible.value = false;
    }
  };
};
notificationTypes.forEach((type) => {
  notify[type] = (options = {}) => {
    if (typeof options === "string" || isVNode(options)) {
      options = {
        message: options
      };
    }
    return notify({
      ...options,
      type
    });
  };
});
function close(id, position, userOnClose) {
  const orientedNotifications = notifications[position];
  const idx = orientedNotifications.findIndex(({ vm: vm2 }) => {
    var _a2;
    return ((_a2 = vm2.component) == null ? void 0 : _a2.props.id) === id;
  });
  if (idx === -1)
    return;
  const { vm } = orientedNotifications[idx];
  if (!vm)
    return;
  userOnClose == null ? void 0 : userOnClose(vm);
  const removedHeight = vm.el.offsetHeight;
  const verticalPos = position.split("-")[0];
  orientedNotifications.splice(idx, 1);
  const len = orientedNotifications.length;
  if (len < 1)
    return;
  for (let i2 = idx; i2 < len; i2++) {
    const { el: el2, component } = orientedNotifications[i2].vm;
    const pos = Number.parseInt(el2.style[verticalPos], 10) - removedHeight - GAP_SIZE;
    component.props.offset = pos;
  }
}
function closeAll() {
  for (const orientedNotifications of Object.values(notifications)) {
    orientedNotifications.forEach(({ vm }) => {
      vm.component.exposed.visible.value = false;
    });
  }
}
notify.closeAll = closeAll;
notify._context = null;
var ElNotification = withInstallFunction(notify, "$notify");
var _hoisted_1$A = { class: "hy-popover" };
var _sfc_main$L = defineComponent({
  props: {
    buttonRef: null,
    placement: null,
    popperClass: null,
    isShowArrow: { type: Boolean },
    popperStyle: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$A, [
        createVNode(unref(ElPopover), {
          "popper-class": __props.popperClass,
          "popper-style": __props.popperStyle,
          "virtual-ref": __props.buttonRef,
          trigger: "click",
          "virtual-triggering": "",
          width: "auto",
          placement: __props.placement,
          "show-arrow": !!__props.isShowArrow
        }, {
          default: withCtx(() => [
            renderSlot(_ctx.$slots, "default")
          ]),
          _: 3
        }, 8, ["popper-class", "popper-style", "virtual-ref", "placement", "show-arrow"])
      ]);
    };
  }
});
var _sfc_main$K = {};
var _hoisted_1$z = { class: "hy-background-mask" };
function _sfc_render$2(_ctx, _cache) {
  return openBlock(), createElementBlock("div", _hoisted_1$z, [
    renderSlot(_ctx.$slots, "default")
  ]);
}
var BackgroundMask = _export_sfc$1(_sfc_main$K, [["render", _sfc_render$2]]);
function _typeof(o) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
    return typeof o2;
  } : function(o2) {
    return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
  }, _typeof(o);
}
function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}
function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + " argument" + (required > 1 ? "s" : "") + " required, but only " + args.length + " present");
  }
}
function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);
  if (argument instanceof Date || _typeof(argument) === "object" && argStr === "[object Date]") {
    return new Date(argument.getTime());
  } else if (typeof argument === "number" || argStr === "[object Number]") {
    return new Date(argument);
  } else {
    if ((typeof argument === "string" || argStr === "[object String]") && typeof console !== "undefined") {
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}
function addDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);
  if (isNaN(amount)) {
    return new Date(NaN);
  }
  if (!amount) {
    return date2;
  }
  date2.setDate(date2.getDate() + amount);
  return date2;
}
function addMonths(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);
  if (isNaN(amount)) {
    return new Date(NaN);
  }
  if (!amount) {
    return date2;
  }
  var dayOfMonth = date2.getDate();
  var endOfDesiredMonth = new Date(date2.getTime());
  endOfDesiredMonth.setMonth(date2.getMonth() + amount + 1, 0);
  var daysInMonth = endOfDesiredMonth.getDate();
  if (dayOfMonth >= daysInMonth) {
    return endOfDesiredMonth;
  } else {
    date2.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);
    return date2;
  }
}
function add(dirtyDate, duration) {
  requiredArgs(2, arguments);
  if (!duration || _typeof(duration) !== "object")
    return new Date(NaN);
  var years = duration.years ? toInteger(duration.years) : 0;
  var months = duration.months ? toInteger(duration.months) : 0;
  var weeks = duration.weeks ? toInteger(duration.weeks) : 0;
  var days = duration.days ? toInteger(duration.days) : 0;
  var hours = duration.hours ? toInteger(duration.hours) : 0;
  var minutes = duration.minutes ? toInteger(duration.minutes) : 0;
  var seconds = duration.seconds ? toInteger(duration.seconds) : 0;
  var date2 = toDate(dirtyDate);
  var dateWithMonths = months || years ? addMonths(date2, months + years * 12) : date2;
  var dateWithDays = days || weeks ? addDays(dateWithMonths, days + weeks * 7) : dateWithMonths;
  var minutesToAdd = minutes + hours * 60;
  var secondsToAdd = seconds + minutesToAdd * 60;
  var msToAdd = secondsToAdd * 1e3;
  var finalDate = new Date(dateWithDays.getTime() + msToAdd);
  return finalDate;
}
function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}
function startOfWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  var date2 = toDate(dirtyDate);
  var day = date2.getDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date2.setDate(date2.getDate() - diff);
  date2.setHours(0, 0, 0, 0);
  return date2;
}
function startOfISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  return startOfWeek(dirtyDate, {
    weekStartsOn: 1
  });
}
function getISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);
  var startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);
  var startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);
  if (date2.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date2.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setFullYear(year, 0, 4);
  fourthOfJanuary.setHours(0, 0, 0, 0);
  var date2 = startOfISOWeek(fourthOfJanuary);
  return date2;
}
function getTimezoneOffsetInMilliseconds(date2) {
  var utcDate = new Date(Date.UTC(date2.getFullYear(), date2.getMonth(), date2.getDate(), date2.getHours(), date2.getMinutes(), date2.getSeconds(), date2.getMilliseconds()));
  utcDate.setUTCFullYear(date2.getFullYear());
  return date2.getTime() - utcDate.getTime();
}
function startOfDay(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  date2.setHours(0, 0, 0, 0);
  return date2;
}
var MILLISECONDS_IN_DAY$1 = 864e5;
function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var startOfDayLeft = startOfDay(dirtyDateLeft);
  var startOfDayRight = startOfDay(dirtyDateRight);
  var timestampLeft = startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft);
  var timestampRight = startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight);
  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY$1);
}
function addQuarters(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  var months = amount * 3;
  return addMonths(dirtyDate, months);
}
function addYears(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMonths(dirtyDate, amount * 12);
}
var millisecondsInMinute = 6e4;
var millisecondsInHour = 36e5;
var millisecondsInSecond = 1e3;
function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || _typeof(value) === "object" && Object.prototype.toString.call(value) === "[object Date]";
}
function isValid(dirtyDate) {
  requiredArgs(1, arguments);
  if (!isDate(dirtyDate) && typeof dirtyDate !== "number") {
    return false;
  }
  var date2 = toDate(dirtyDate);
  return !isNaN(Number(date2));
}
function eachDayOfInterval(dirtyInterval, options) {
  var _options$step;
  requiredArgs(1, arguments);
  var interval = dirtyInterval || {};
  var startDate = toDate(interval.start);
  var endDate = toDate(interval.end);
  var endTime = endDate.getTime();
  if (!(startDate.getTime() <= endTime)) {
    throw new RangeError("Invalid interval");
  }
  var dates = [];
  var currentDate = startDate;
  currentDate.setHours(0, 0, 0, 0);
  var step = Number((_options$step = options === null || options === void 0 ? void 0 : options.step) !== null && _options$step !== void 0 ? _options$step : 1);
  if (step < 1 || isNaN(step))
    throw new RangeError("`options.step` must be a number greater than 1");
  while (currentDate.getTime() <= endTime) {
    dates.push(toDate(currentDate));
    currentDate.setDate(currentDate.getDate() + step);
    currentDate.setHours(0, 0, 0, 0);
  }
  return dates;
}
function startOfQuarter(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var currentMonth = date2.getMonth();
  var month = currentMonth - currentMonth % 3;
  date2.setMonth(month, 1);
  date2.setHours(0, 0, 0, 0);
  return date2;
}
function eachQuarterOfInterval(dirtyInterval) {
  requiredArgs(1, arguments);
  var interval = dirtyInterval || {};
  var startDate = toDate(interval.start);
  var endDate = toDate(interval.end);
  var endTime = endDate.getTime();
  if (!(startDate.getTime() <= endTime)) {
    throw new RangeError("Invalid interval");
  }
  var startDateQuarter = startOfQuarter(startDate);
  var endDateQuarter = startOfQuarter(endDate);
  endTime = endDateQuarter.getTime();
  var quarters = [];
  var currentQuarter = startDateQuarter;
  while (currentQuarter.getTime() <= endTime) {
    quarters.push(toDate(currentQuarter));
    currentQuarter = addQuarters(currentQuarter, 1);
  }
  return quarters;
}
function endOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getFullYear();
  date2.setFullYear(year + 1, 0, 0);
  date2.setHours(23, 59, 59, 999);
  return date2;
}
function startOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var cleanDate = toDate(dirtyDate);
  var date2 = new Date(0);
  date2.setFullYear(cleanDate.getFullYear(), 0, 1);
  date2.setHours(0, 0, 0, 0);
  return date2;
}
function endOfWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  var date2 = toDate(dirtyDate);
  var day = date2.getDay();
  var diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);
  date2.setDate(date2.getDate() + diff);
  date2.setHours(23, 59, 59, 999);
  return date2;
}
function endOfQuarter(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var currentMonth = date2.getMonth();
  var month = currentMonth - currentMonth % 3 + 3;
  date2.setMonth(month, 0);
  date2.setHours(23, 59, 59, 999);
  return date2;
}
function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}
var MILLISECONDS_IN_DAY = 864e5;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var timestamp = date2.getTime();
  date2.setUTCMonth(0, 1);
  date2.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date2.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}
function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date2 = toDate(dirtyDate);
  var day = date2.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date2.setUTCDate(date2.getUTCDate() - diff);
  date2.setUTCHours(0, 0, 0, 0);
  return date2;
}
function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);
  if (date2.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date2.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date2 = startOfUTCISOWeek(fourthOfJanuary);
  return date2;
}
var MILLISECONDS_IN_WEEK$3 = 6048e5;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date2).getTime() - startOfUTCISOWeekYear(date2).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK$3) + 1;
}
function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  var date2 = toDate(dirtyDate);
  var day = date2.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date2.setUTCDate(date2.getUTCDate() - diff);
  date2.setUTCHours(0, 0, 0, 0);
  return date2;
}
function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getUTCFullYear();
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);
  if (date2.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date2.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getUTCWeekYear(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date2 = startOfUTCWeek(firstWeek, options);
  return date2;
}
var MILLISECONDS_IN_WEEK$2 = 6048e5;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var diff = startOfUTCWeek(date2, options).getTime() - startOfUTCWeekYear(date2, options).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK$2) + 1;
}
function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? "-" : "";
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = "0" + output;
  }
  return sign + output;
}
var formatters$2 = {
  y: function y(date2, token) {
    var signedYear = date2.getUTCFullYear();
    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  M: function M(date2, token) {
    var month = date2.getUTCMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  d: function d(date2, token) {
    return addLeadingZeros(date2.getUTCDate(), token.length);
  },
  a: function a(date2, token) {
    var dayPeriodEnumValue = date2.getUTCHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  h: function h2(date2, token) {
    return addLeadingZeros(date2.getUTCHours() % 12 || 12, token.length);
  },
  H: function H(date2, token) {
    return addLeadingZeros(date2.getUTCHours(), token.length);
  },
  m: function m(date2, token) {
    return addLeadingZeros(date2.getUTCMinutes(), token.length);
  },
  s: function s(date2, token) {
    return addLeadingZeros(date2.getUTCSeconds(), token.length);
  },
  S: function S(date2, token) {
    var numberOfDigits = token.length;
    var milliseconds = date2.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};
var formatters$3 = formatters$2;
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  G: function G2(date2, token, localize2) {
    var era = date2.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, {
          width: "abbreviated"
        });
      case "GGGGG":
        return localize2.era(era, {
          width: "narrow"
        });
      case "GGGG":
      default:
        return localize2.era(era, {
          width: "wide"
        });
    }
  },
  y: function y2(date2, token, localize2) {
    if (token === "yo") {
      var signedYear = date2.getUTCFullYear();
      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, {
        unit: "year"
      });
    }
    return formatters$3.y(date2, token);
  },
  Y: function Y(date2, token, localize2, options) {
    var signedWeekYear = getUTCWeekYear(date2, options);
    var weekYear2 = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      var twoDigitYear = weekYear2 % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear2, {
        unit: "year"
      });
    }
    return addLeadingZeros(weekYear2, token.length);
  },
  R: function R2(date2, token) {
    var isoWeekYear = getUTCISOWeekYear(date2);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  u: function u(date2, token) {
    var year = date2.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  Q: function Q2(date2, token, localize2) {
    var quarter = Math.ceil((date2.getUTCMonth() + 1) / 3);
    switch (token) {
      case "Q":
        return String(quarter);
      case "QQ":
        return addLeadingZeros(quarter, 2);
      case "Qo":
        return localize2.ordinalNumber(quarter, {
          unit: "quarter"
        });
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  q: function q2(date2, token, localize2) {
    var quarter = Math.ceil((date2.getUTCMonth() + 1) / 3);
    switch (token) {
      case "q":
        return String(quarter);
      case "qq":
        return addLeadingZeros(quarter, 2);
      case "qo":
        return localize2.ordinalNumber(quarter, {
          unit: "quarter"
        });
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  M: function M2(date2, token, localize2) {
    var month = date2.getUTCMonth();
    switch (token) {
      case "M":
      case "MM":
        return formatters$3.M(date2, token);
      case "Mo":
        return localize2.ordinalNumber(month + 1, {
          unit: "month"
        });
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      case "MMMM":
      default:
        return localize2.month(month, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  L: function L(date2, token, localize2) {
    var month = date2.getUTCMonth();
    switch (token) {
      case "L":
        return String(month + 1);
      case "LL":
        return addLeadingZeros(month + 1, 2);
      case "Lo":
        return localize2.ordinalNumber(month + 1, {
          unit: "month"
        });
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      case "LLLL":
      default:
        return localize2.month(month, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  w: function w(date2, token, localize2, options) {
    var week = getUTCWeek(date2, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, {
        unit: "week"
      });
    }
    return addLeadingZeros(week, token.length);
  },
  I: function I2(date2, token, localize2) {
    var isoWeek = getUTCISOWeek(date2);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, {
        unit: "week"
      });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  d: function d2(date2, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date2.getUTCDate(), {
        unit: "date"
      });
    }
    return formatters$3.d(date2, token);
  },
  D: function D(date2, token, localize2) {
    var dayOfYear2 = getUTCDayOfYear(date2);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear2, {
        unit: "dayOfYear"
      });
    }
    return addLeadingZeros(dayOfYear2, token.length);
  },
  E: function E2(date2, token, localize2) {
    var dayOfWeek = date2.getUTCDay();
    switch (token) {
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  e: function e(date2, token, localize2, options) {
    var dayOfWeek = date2.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case "e":
        return String(localDayOfWeek);
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, {
          unit: "day"
        });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  c: function c(date2, token, localize2, options) {
    var dayOfWeek = date2.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case "c":
        return String(localDayOfWeek);
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, {
          unit: "day"
        });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  i: function i(date2, token, localize2) {
    var dayOfWeek = date2.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      case "i":
        return String(isoDayOfWeek);
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, {
          unit: "day"
        });
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  a: function a2(date2, token, localize2) {
    var hours = date2.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  b: function b(date2, token, localize2) {
    var hours = date2.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  B: function B2(date2, token, localize2) {
    var hours = date2.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  h: function h3(date2, token, localize2) {
    if (token === "ho") {
      var hours = date2.getUTCHours() % 12;
      if (hours === 0)
        hours = 12;
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return formatters$3.h(date2, token);
  },
  H: function H2(date2, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date2.getUTCHours(), {
        unit: "hour"
      });
    }
    return formatters$3.H(date2, token);
  },
  K: function K2(date2, token, localize2) {
    var hours = date2.getUTCHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  k: function k(date2, token, localize2) {
    var hours = date2.getUTCHours();
    if (hours === 0)
      hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  m: function m2(date2, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date2.getUTCMinutes(), {
        unit: "minute"
      });
    }
    return formatters$3.m(date2, token);
  },
  s: function s2(date2, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date2.getUTCSeconds(), {
        unit: "second"
      });
    }
    return formatters$3.s(date2, token);
  },
  S: function S2(date2, token) {
    return formatters$3.S(date2, token);
  },
  X: function X2(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      case "XXXXX":
      case "XXX":
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  x: function x(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      case "xxxxx":
      case "xxx":
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  O: function O(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  z: function z(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  t: function t(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timestamp = Math.floor(originalDate.getTime() / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  T: function T(date2, token, _localize, options) {
    var originalDate = options._originalDate || date2;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? "-" : "+";
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || "";
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || "";
  var sign = offset > 0 ? "-" : "+";
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}
var formatters$1 = formatters;
var dateLongFormatter = function dateLongFormatter2(pattern, formatLong2) {
  switch (pattern) {
    case "P":
      return formatLong2.date({
        width: "short"
      });
    case "PP":
      return formatLong2.date({
        width: "medium"
      });
    case "PPP":
      return formatLong2.date({
        width: "long"
      });
    case "PPPP":
    default:
      return formatLong2.date({
        width: "full"
      });
  }
};
var timeLongFormatter = function timeLongFormatter2(pattern, formatLong2) {
  switch (pattern) {
    case "p":
      return formatLong2.time({
        width: "short"
      });
    case "pp":
      return formatLong2.time({
        width: "medium"
      });
    case "ppp":
      return formatLong2.time({
        width: "long"
      });
    case "pppp":
    default:
      return formatLong2.time({
        width: "full"
      });
  }
};
var dateTimeLongFormatter = function dateTimeLongFormatter2(pattern, formatLong2) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({
        width: "short"
      });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({
        width: "medium"
      });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({
        width: "long"
      });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({
        width: "full"
      });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};
var longFormatters$1 = longFormatters;
var protectedDayOfYearTokens = ["D", "DD"];
var protectedWeekYearTokens = ["YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format2, input2) {
  if (token === "YYYY") {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format2, "`) for formatting years to the input `").concat(input2, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "YY") {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format2, "`) for formatting years to the input `").concat(input2, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "D") {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format2, "`) for formatting days of the month to the input `").concat(input2, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "DD") {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format2, "`) for formatting days of the month to the input `").concat(input2, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = function formatDistance2(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};
var formatDistance$1 = formatDistance;
function buildFormatLongFn(args) {
  return function() {
    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};
var formatLong$1 = formatLong;
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = function formatRelative2(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};
var formatRelative$1 = formatRelative;
function buildLocalizeFn(args) {
  return function(dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : "standalone";
    var valuesArray;
    if (context === "formatting" && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    return valuesArray[index];
  };
}
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
  wide: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = function ordinalNumber2(dirtyNumber, _options) {
  var number = Number(dirtyNumber);
  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};
var localize$1 = localize;
function buildMatchFn(args) {
  return function(string) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function(pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function(pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value,
      rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}
function buildMatchPatternFn(args) {
  return function(string) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult)
      return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult)
      return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value,
      rest
    };
  };
}
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: function valueCallback2(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};
var match$1 = match;
var locale = {
  code: "en-US",
  formatDistance: formatDistance$1,
  formatLong: formatLong$1,
  formatRelative: formatRelative$1,
  localize: localize$1,
  match: match$1,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};
var defaultLocale = locale;
var formattingTokensRegExp$1 = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp$1 = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp$1 = /^'([^]*?)'?$/;
var doubleQuoteRegExp$1 = /''/g;
var unescapedLatinCharacterRegExp$1 = /[a-zA-Z]/;
function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions2 = getDefaultOptions();
  var locale2 = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions2.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions2.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions2.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions2.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  if (!locale2.localize) {
    throw new RangeError("locale must contain localize property");
  }
  if (!locale2.formatLong) {
    throw new RangeError("locale must contain formatLong property");
  }
  var originalDate = toDate(dirtyDate);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale: locale2,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp$1).map(function(substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      var longFormatter = longFormatters$1[firstCharacter];
      return longFormatter(substring, locale2.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp$1).map(function(substring) {
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString$1(substring);
    }
    var formatter2 = formatters$1[firstCharacter];
    if (formatter2) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      return formatter2(utcDate, substring, locale2.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp$1)) {
      throw new RangeError("Format string contains an unescaped latin alphabet character `" + firstCharacter + "`");
    }
    return substring;
  }).join("");
  return result;
}
function cleanEscapedString$1(input2) {
  var matched = input2.match(escapedStringRegExp$1);
  if (!matched) {
    return input2;
  }
  return matched[1].replace(doubleQuoteRegExp$1, "'");
}
function assign(target, object) {
  if (target == null) {
    throw new TypeError("assign requires that input parameter not be null or undefined");
  }
  for (var property in object) {
    if (Object.prototype.hasOwnProperty.call(object, property)) {
      target[property] = object[property];
    }
  }
  return target;
}
function getDay(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var day = date2.getDay();
  return day;
}
function getDaysInMonth(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getFullYear();
  var monthIndex = date2.getMonth();
  var lastDayOfMonth = new Date(0);
  lastDayOfMonth.setFullYear(year, monthIndex + 1, 0);
  lastDayOfMonth.setHours(0, 0, 0, 0);
  return lastDayOfMonth.getDate();
}
function getHours(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var hours = date2.getHours();
  return hours;
}
var MILLISECONDS_IN_WEEK$1 = 6048e5;
function getISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var diff = startOfISOWeek(date2).getTime() - startOfISOWeekYear(date2).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}
function getMinutes(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var minutes = date2.getMinutes();
  return minutes;
}
function getMonth(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var month = date2.getMonth();
  return month;
}
function getSeconds(dirtyDate) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var seconds = date2.getSeconds();
  return seconds;
}
function getWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var year = date2.getFullYear();
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setHours(0, 0, 0, 0);
  var startOfNextYear = startOfWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setHours(0, 0, 0, 0);
  var startOfThisYear = startOfWeek(firstWeekOfThisYear, options);
  if (date2.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date2.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getWeekYear(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setHours(0, 0, 0, 0);
  var date2 = startOfWeek(firstWeek, options);
  return date2;
}
var MILLISECONDS_IN_WEEK = 6048e5;
function getWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date2 = toDate(dirtyDate);
  var diff = startOfWeek(date2, options).getTime() - startOfWeekYear(date2, options).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}
function getYear(dirtyDate) {
  requiredArgs(1, arguments);
  return toDate(dirtyDate).getFullYear();
}
function isAfter(dirtyDate, dirtyDateToCompare) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var dateToCompare = toDate(dirtyDateToCompare);
  return date2.getTime() > dateToCompare.getTime();
}
function isBefore(dirtyDate, dirtyDateToCompare) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var dateToCompare = toDate(dirtyDateToCompare);
  return date2.getTime() < dateToCompare.getTime();
}
function isEqual(dirtyLeftDate, dirtyRightDate) {
  requiredArgs(2, arguments);
  var dateLeft = toDate(dirtyLeftDate);
  var dateRight = toDate(dirtyRightDate);
  return dateLeft.getTime() === dateRight.getTime();
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++)
    arr2[i2] = arr[i2];
  return arr2;
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray(o, minLen);
}
function _createForOfIteratorHelper(o, allowArrayLike) {
  var it2 = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it2) {
    if (Array.isArray(o) || (it2 = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it2)
        o = it2;
      var i2 = 0;
      var F = function F2() {
      };
      return {
        s: F,
        n: function n() {
          if (i2 >= o.length)
            return {
              done: true
            };
          return {
            done: false,
            value: o[i2++]
          };
        },
        e: function e2(_e) {
          throw _e;
        },
        f: F
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return {
    s: function s3() {
      it2 = it2.call(o);
    },
    n: function n() {
      var step = it2.next();
      normalCompletion = step.done;
      return step;
    },
    e: function e2(_e2) {
      didErr = true;
      err = _e2;
    },
    f: function f() {
      try {
        if (!normalCompletion && it2["return"] != null)
          it2["return"]();
      } finally {
        if (didErr)
          throw err;
      }
    }
  };
}
function _assertThisInitialized(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf2(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf(o, p);
}
function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  Object.defineProperty(subClass, "prototype", {
    writable: false
  });
  if (superClass)
    _setPrototypeOf(subClass, superClass);
}
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf2(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf(o);
}
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e2) {
    return false;
  }
}
function _possibleConstructorReturn(self2, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized(self2);
}
function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn(this, result);
  };
}
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _toPrimitive(input2, hint) {
  if (_typeof(input2) !== "object" || input2 === null)
    return input2;
  var prim = input2[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input2, hint || "default");
    if (_typeof(res) !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input2);
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return _typeof(key) === "symbol" ? key : String(key);
}
function _defineProperties(target, props2) {
  for (var i2 = 0; i2 < props2.length; i2++) {
    var descriptor = props2[i2];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
var TIMEZONE_UNIT_PRIORITY = 10;
var Setter = function() {
  function Setter2() {
    _classCallCheck(this, Setter2);
    _defineProperty(this, "priority", void 0);
    _defineProperty(this, "subPriority", 0);
  }
  _createClass(Setter2, [{
    key: "validate",
    value: function validate(_utcDate, _options) {
      return true;
    }
  }]);
  return Setter2;
}();
var ValueSetter = function(_Setter) {
  _inherits(ValueSetter2, _Setter);
  var _super = _createSuper(ValueSetter2);
  function ValueSetter2(value, validateValue, setValue, priority, subPriority) {
    var _this;
    _classCallCheck(this, ValueSetter2);
    _this = _super.call(this);
    _this.value = value;
    _this.validateValue = validateValue;
    _this.setValue = setValue;
    _this.priority = priority;
    if (subPriority) {
      _this.subPriority = subPriority;
    }
    return _this;
  }
  _createClass(ValueSetter2, [{
    key: "validate",
    value: function validate(utcDate, options) {
      return this.validateValue(utcDate, this.value, options);
    }
  }, {
    key: "set",
    value: function set2(utcDate, flags, options) {
      return this.setValue(utcDate, flags, this.value, options);
    }
  }]);
  return ValueSetter2;
}(Setter);
var DateToSystemTimezoneSetter = function(_Setter2) {
  _inherits(DateToSystemTimezoneSetter2, _Setter2);
  var _super2 = _createSuper(DateToSystemTimezoneSetter2);
  function DateToSystemTimezoneSetter2() {
    var _this2;
    _classCallCheck(this, DateToSystemTimezoneSetter2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this2 = _super2.call.apply(_super2, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this2), "priority", TIMEZONE_UNIT_PRIORITY);
    _defineProperty(_assertThisInitialized(_this2), "subPriority", -1);
    return _this2;
  }
  _createClass(DateToSystemTimezoneSetter2, [{
    key: "set",
    value: function set2(date2, flags) {
      if (flags.timestampIsSet) {
        return date2;
      }
      var convertedDate = new Date(0);
      convertedDate.setFullYear(date2.getUTCFullYear(), date2.getUTCMonth(), date2.getUTCDate());
      convertedDate.setHours(date2.getUTCHours(), date2.getUTCMinutes(), date2.getUTCSeconds(), date2.getUTCMilliseconds());
      return convertedDate;
    }
  }]);
  return DateToSystemTimezoneSetter2;
}(Setter);
var Parser = function() {
  function Parser2() {
    _classCallCheck(this, Parser2);
    _defineProperty(this, "incompatibleTokens", void 0);
    _defineProperty(this, "priority", void 0);
    _defineProperty(this, "subPriority", void 0);
  }
  _createClass(Parser2, [{
    key: "run",
    value: function run(dateString, token, match2, options) {
      var result = this.parse(dateString, token, match2, options);
      if (!result) {
        return null;
      }
      return {
        setter: new ValueSetter(result.value, this.validate, this.set, this.priority, this.subPriority),
        rest: result.rest
      };
    }
  }, {
    key: "validate",
    value: function validate(_utcDate, _value, _options) {
      return true;
    }
  }]);
  return Parser2;
}();
var EraParser = function(_Parser) {
  _inherits(EraParser2, _Parser);
  var _super = _createSuper(EraParser2);
  function EraParser2() {
    var _this;
    _classCallCheck(this, EraParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 140);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["R", "u", "t", "T"]);
    return _this;
  }
  _createClass(EraParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "G":
        case "GG":
        case "GGG":
          return match2.era(dateString, {
            width: "abbreviated"
          }) || match2.era(dateString, {
            width: "narrow"
          });
        case "GGGGG":
          return match2.era(dateString, {
            width: "narrow"
          });
        case "GGGG":
        default:
          return match2.era(dateString, {
            width: "wide"
          }) || match2.era(dateString, {
            width: "abbreviated"
          }) || match2.era(dateString, {
            width: "narrow"
          });
      }
    }
  }, {
    key: "set",
    value: function set2(date2, flags, value) {
      flags.era = value;
      date2.setUTCFullYear(value, 0, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return EraParser2;
}(Parser);
var numericPatterns = {
  month: /^(1[0-2]|0?\d)/,
  date: /^(3[0-1]|[0-2]?\d)/,
  dayOfYear: /^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,
  week: /^(5[0-3]|[0-4]?\d)/,
  hour23h: /^(2[0-3]|[0-1]?\d)/,
  hour24h: /^(2[0-4]|[0-1]?\d)/,
  hour11h: /^(1[0-1]|0?\d)/,
  hour12h: /^(1[0-2]|0?\d)/,
  minute: /^[0-5]?\d/,
  second: /^[0-5]?\d/,
  singleDigit: /^\d/,
  twoDigits: /^\d{1,2}/,
  threeDigits: /^\d{1,3}/,
  fourDigits: /^\d{1,4}/,
  anyDigitsSigned: /^-?\d+/,
  singleDigitSigned: /^-?\d/,
  twoDigitsSigned: /^-?\d{1,2}/,
  threeDigitsSigned: /^-?\d{1,3}/,
  fourDigitsSigned: /^-?\d{1,4}/
};
var timezonePatterns = {
  basicOptionalMinutes: /^([+-])(\d{2})(\d{2})?|Z/,
  basic: /^([+-])(\d{2})(\d{2})|Z/,
  basicOptionalSeconds: /^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,
  extended: /^([+-])(\d{2}):(\d{2})|Z/,
  extendedOptionalSeconds: /^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/
};
function mapValue(parseFnResult, mapFn) {
  if (!parseFnResult) {
    return parseFnResult;
  }
  return {
    value: mapFn(parseFnResult.value),
    rest: parseFnResult.rest
  };
}
function parseNumericPattern(pattern, dateString) {
  var matchResult = dateString.match(pattern);
  if (!matchResult) {
    return null;
  }
  return {
    value: parseInt(matchResult[0], 10),
    rest: dateString.slice(matchResult[0].length)
  };
}
function parseTimezonePattern(pattern, dateString) {
  var matchResult = dateString.match(pattern);
  if (!matchResult) {
    return null;
  }
  if (matchResult[0] === "Z") {
    return {
      value: 0,
      rest: dateString.slice(1)
    };
  }
  var sign = matchResult[1] === "+" ? 1 : -1;
  var hours = matchResult[2] ? parseInt(matchResult[2], 10) : 0;
  var minutes = matchResult[3] ? parseInt(matchResult[3], 10) : 0;
  var seconds = matchResult[5] ? parseInt(matchResult[5], 10) : 0;
  return {
    value: sign * (hours * millisecondsInHour + minutes * millisecondsInMinute + seconds * millisecondsInSecond),
    rest: dateString.slice(matchResult[0].length)
  };
}
function parseAnyDigitsSigned(dateString) {
  return parseNumericPattern(numericPatterns.anyDigitsSigned, dateString);
}
function parseNDigits(n, dateString) {
  switch (n) {
    case 1:
      return parseNumericPattern(numericPatterns.singleDigit, dateString);
    case 2:
      return parseNumericPattern(numericPatterns.twoDigits, dateString);
    case 3:
      return parseNumericPattern(numericPatterns.threeDigits, dateString);
    case 4:
      return parseNumericPattern(numericPatterns.fourDigits, dateString);
    default:
      return parseNumericPattern(new RegExp("^\\d{1," + n + "}"), dateString);
  }
}
function parseNDigitsSigned(n, dateString) {
  switch (n) {
    case 1:
      return parseNumericPattern(numericPatterns.singleDigitSigned, dateString);
    case 2:
      return parseNumericPattern(numericPatterns.twoDigitsSigned, dateString);
    case 3:
      return parseNumericPattern(numericPatterns.threeDigitsSigned, dateString);
    case 4:
      return parseNumericPattern(numericPatterns.fourDigitsSigned, dateString);
    default:
      return parseNumericPattern(new RegExp("^-?\\d{1," + n + "}"), dateString);
  }
}
function dayPeriodEnumToHours(dayPeriod) {
  switch (dayPeriod) {
    case "morning":
      return 4;
    case "evening":
      return 17;
    case "pm":
    case "noon":
    case "afternoon":
      return 12;
    case "am":
    case "midnight":
    case "night":
    default:
      return 0;
  }
}
function normalizeTwoDigitYear(twoDigitYear, currentYear) {
  var isCommonEra = currentYear > 0;
  var absCurrentYear = isCommonEra ? currentYear : 1 - currentYear;
  var result;
  if (absCurrentYear <= 50) {
    result = twoDigitYear || 100;
  } else {
    var rangeEnd = absCurrentYear + 50;
    var rangeEndCentury = Math.floor(rangeEnd / 100) * 100;
    var isPreviousCentury = twoDigitYear >= rangeEnd % 100;
    result = twoDigitYear + rangeEndCentury - (isPreviousCentury ? 100 : 0);
  }
  return isCommonEra ? result : 1 - result;
}
function isLeapYearIndex$1(year) {
  return year % 400 === 0 || year % 4 === 0 && year % 100 !== 0;
}
var YearParser = function(_Parser) {
  _inherits(YearParser2, _Parser);
  var _super = _createSuper(YearParser2);
  function YearParser2() {
    var _this;
    _classCallCheck(this, YearParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 130);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "u", "w", "I", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(YearParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      var valueCallback3 = function valueCallback4(year) {
        return {
          year,
          isTwoDigitYear: token === "yy"
        };
      };
      switch (token) {
        case "y":
          return mapValue(parseNDigits(4, dateString), valueCallback3);
        case "yo":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "year"
          }), valueCallback3);
        default:
          return mapValue(parseNDigits(token.length, dateString), valueCallback3);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value.isTwoDigitYear || value.year > 0;
    }
  }, {
    key: "set",
    value: function set2(date2, flags, value) {
      var currentYear = date2.getUTCFullYear();
      if (value.isTwoDigitYear) {
        var normalizedTwoDigitYear = normalizeTwoDigitYear(value.year, currentYear);
        date2.setUTCFullYear(normalizedTwoDigitYear, 0, 1);
        date2.setUTCHours(0, 0, 0, 0);
        return date2;
      }
      var year = !("era" in flags) || flags.era === 1 ? value.year : 1 - value.year;
      date2.setUTCFullYear(year, 0, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return YearParser2;
}(Parser);
var LocalWeekYearParser = function(_Parser) {
  _inherits(LocalWeekYearParser2, _Parser);
  var _super = _createSuper(LocalWeekYearParser2);
  function LocalWeekYearParser2() {
    var _this;
    _classCallCheck(this, LocalWeekYearParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 130);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "R", "u", "Q", "q", "M", "L", "I", "d", "D", "i", "t", "T"]);
    return _this;
  }
  _createClass(LocalWeekYearParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      var valueCallback3 = function valueCallback4(year) {
        return {
          year,
          isTwoDigitYear: token === "YY"
        };
      };
      switch (token) {
        case "Y":
          return mapValue(parseNDigits(4, dateString), valueCallback3);
        case "Yo":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "year"
          }), valueCallback3);
        default:
          return mapValue(parseNDigits(token.length, dateString), valueCallback3);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value.isTwoDigitYear || value.year > 0;
    }
  }, {
    key: "set",
    value: function set2(date2, flags, value, options) {
      var currentYear = getUTCWeekYear(date2, options);
      if (value.isTwoDigitYear) {
        var normalizedTwoDigitYear = normalizeTwoDigitYear(value.year, currentYear);
        date2.setUTCFullYear(normalizedTwoDigitYear, 0, options.firstWeekContainsDate);
        date2.setUTCHours(0, 0, 0, 0);
        return startOfUTCWeek(date2, options);
      }
      var year = !("era" in flags) || flags.era === 1 ? value.year : 1 - value.year;
      date2.setUTCFullYear(year, 0, options.firstWeekContainsDate);
      date2.setUTCHours(0, 0, 0, 0);
      return startOfUTCWeek(date2, options);
    }
  }]);
  return LocalWeekYearParser2;
}(Parser);
var ISOWeekYearParser = function(_Parser) {
  _inherits(ISOWeekYearParser2, _Parser);
  var _super = _createSuper(ISOWeekYearParser2);
  function ISOWeekYearParser2() {
    var _this;
    _classCallCheck(this, ISOWeekYearParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 130);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["G", "y", "Y", "u", "Q", "q", "M", "L", "w", "d", "D", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(ISOWeekYearParser2, [{
    key: "parse",
    value: function parse2(dateString, token) {
      if (token === "R") {
        return parseNDigitsSigned(4, dateString);
      }
      return parseNDigitsSigned(token.length, dateString);
    }
  }, {
    key: "set",
    value: function set2(_date, _flags, value) {
      var firstWeekOfYear = new Date(0);
      firstWeekOfYear.setUTCFullYear(value, 0, 4);
      firstWeekOfYear.setUTCHours(0, 0, 0, 0);
      return startOfUTCISOWeek(firstWeekOfYear);
    }
  }]);
  return ISOWeekYearParser2;
}(Parser);
var ExtendedYearParser = function(_Parser) {
  _inherits(ExtendedYearParser2, _Parser);
  var _super = _createSuper(ExtendedYearParser2);
  function ExtendedYearParser2() {
    var _this;
    _classCallCheck(this, ExtendedYearParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 130);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["G", "y", "Y", "R", "w", "I", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(ExtendedYearParser2, [{
    key: "parse",
    value: function parse2(dateString, token) {
      if (token === "u") {
        return parseNDigitsSigned(4, dateString);
      }
      return parseNDigitsSigned(token.length, dateString);
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCFullYear(value, 0, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return ExtendedYearParser2;
}(Parser);
var QuarterParser = function(_Parser) {
  _inherits(QuarterParser2, _Parser);
  var _super = _createSuper(QuarterParser2);
  function QuarterParser2() {
    var _this;
    _classCallCheck(this, QuarterParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 120);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "q", "M", "L", "w", "I", "d", "D", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(QuarterParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "Q":
        case "QQ":
          return parseNDigits(token.length, dateString);
        case "Qo":
          return match2.ordinalNumber(dateString, {
            unit: "quarter"
          });
        case "QQQ":
          return match2.quarter(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.quarter(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "QQQQQ":
          return match2.quarter(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "QQQQ":
        default:
          return match2.quarter(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.quarter(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.quarter(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 4;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMonth((value - 1) * 3, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return QuarterParser2;
}(Parser);
var StandAloneQuarterParser = function(_Parser) {
  _inherits(StandAloneQuarterParser2, _Parser);
  var _super = _createSuper(StandAloneQuarterParser2);
  function StandAloneQuarterParser2() {
    var _this;
    _classCallCheck(this, StandAloneQuarterParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 120);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "Q", "M", "L", "w", "I", "d", "D", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(StandAloneQuarterParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "q":
        case "qq":
          return parseNDigits(token.length, dateString);
        case "qo":
          return match2.ordinalNumber(dateString, {
            unit: "quarter"
          });
        case "qqq":
          return match2.quarter(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.quarter(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "qqqqq":
          return match2.quarter(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "qqqq":
        default:
          return match2.quarter(dateString, {
            width: "wide",
            context: "standalone"
          }) || match2.quarter(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.quarter(dateString, {
            width: "narrow",
            context: "standalone"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 4;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMonth((value - 1) * 3, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return StandAloneQuarterParser2;
}(Parser);
var MonthParser = function(_Parser) {
  _inherits(MonthParser2, _Parser);
  var _super = _createSuper(MonthParser2);
  function MonthParser2() {
    var _this;
    _classCallCheck(this, MonthParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "q", "Q", "L", "w", "I", "D", "i", "e", "c", "t", "T"]);
    _defineProperty(_assertThisInitialized(_this), "priority", 110);
    return _this;
  }
  _createClass(MonthParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      var valueCallback3 = function valueCallback4(value) {
        return value - 1;
      };
      switch (token) {
        case "M":
          return mapValue(parseNumericPattern(numericPatterns.month, dateString), valueCallback3);
        case "MM":
          return mapValue(parseNDigits(2, dateString), valueCallback3);
        case "Mo":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "month"
          }), valueCallback3);
        case "MMM":
          return match2.month(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.month(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "MMMMM":
          return match2.month(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "MMMM":
        default:
          return match2.month(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.month(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.month(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMonth(value, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return MonthParser2;
}(Parser);
var StandAloneMonthParser = function(_Parser) {
  _inherits(StandAloneMonthParser2, _Parser);
  var _super = _createSuper(StandAloneMonthParser2);
  function StandAloneMonthParser2() {
    var _this;
    _classCallCheck(this, StandAloneMonthParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 110);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "q", "Q", "M", "w", "I", "D", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(StandAloneMonthParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      var valueCallback3 = function valueCallback4(value) {
        return value - 1;
      };
      switch (token) {
        case "L":
          return mapValue(parseNumericPattern(numericPatterns.month, dateString), valueCallback3);
        case "LL":
          return mapValue(parseNDigits(2, dateString), valueCallback3);
        case "Lo":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "month"
          }), valueCallback3);
        case "LLL":
          return match2.month(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.month(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "LLLLL":
          return match2.month(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "LLLL":
        default:
          return match2.month(dateString, {
            width: "wide",
            context: "standalone"
          }) || match2.month(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.month(dateString, {
            width: "narrow",
            context: "standalone"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMonth(value, 1);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return StandAloneMonthParser2;
}(Parser);
function setUTCWeek(dirtyDate, dirtyWeek, options) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var week = toInteger(dirtyWeek);
  var diff = getUTCWeek(date2, options) - week;
  date2.setUTCDate(date2.getUTCDate() - diff * 7);
  return date2;
}
var LocalWeekParser = function(_Parser) {
  _inherits(LocalWeekParser2, _Parser);
  var _super = _createSuper(LocalWeekParser2);
  function LocalWeekParser2() {
    var _this;
    _classCallCheck(this, LocalWeekParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 100);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "R", "u", "q", "Q", "M", "L", "I", "d", "D", "i", "t", "T"]);
    return _this;
  }
  _createClass(LocalWeekParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "w":
          return parseNumericPattern(numericPatterns.week, dateString);
        case "wo":
          return match2.ordinalNumber(dateString, {
            unit: "week"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 53;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value, options) {
      return startOfUTCWeek(setUTCWeek(date2, value, options), options);
    }
  }]);
  return LocalWeekParser2;
}(Parser);
function setUTCISOWeek(dirtyDate, dirtyISOWeek) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var isoWeek = toInteger(dirtyISOWeek);
  var diff = getUTCISOWeek(date2) - isoWeek;
  date2.setUTCDate(date2.getUTCDate() - diff * 7);
  return date2;
}
var ISOWeekParser = function(_Parser) {
  _inherits(ISOWeekParser2, _Parser);
  var _super = _createSuper(ISOWeekParser2);
  function ISOWeekParser2() {
    var _this;
    _classCallCheck(this, ISOWeekParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 100);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "Y", "u", "q", "Q", "M", "L", "w", "d", "D", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(ISOWeekParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "I":
          return parseNumericPattern(numericPatterns.week, dateString);
        case "Io":
          return match2.ordinalNumber(dateString, {
            unit: "week"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 53;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      return startOfUTCISOWeek(setUTCISOWeek(date2, value));
    }
  }]);
  return ISOWeekParser2;
}(Parser);
var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var DAYS_IN_MONTH_LEAP_YEAR = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var DateParser = function(_Parser) {
  _inherits(DateParser2, _Parser);
  var _super = _createSuper(DateParser2);
  function DateParser2() {
    var _this;
    _classCallCheck(this, DateParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "subPriority", 1);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "q", "Q", "w", "I", "D", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(DateParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "d":
          return parseNumericPattern(numericPatterns.date, dateString);
        case "do":
          return match2.ordinalNumber(dateString, {
            unit: "date"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(date2, value) {
      var year = date2.getUTCFullYear();
      var isLeapYear = isLeapYearIndex$1(year);
      var month = date2.getUTCMonth();
      if (isLeapYear) {
        return value >= 1 && value <= DAYS_IN_MONTH_LEAP_YEAR[month];
      } else {
        return value >= 1 && value <= DAYS_IN_MONTH[month];
      }
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCDate(value);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return DateParser2;
}(Parser);
var DayOfYearParser = function(_Parser) {
  _inherits(DayOfYearParser2, _Parser);
  var _super = _createSuper(DayOfYearParser2);
  function DayOfYearParser2() {
    var _this;
    _classCallCheck(this, DayOfYearParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "subpriority", 1);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["Y", "R", "q", "Q", "M", "L", "w", "I", "d", "E", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(DayOfYearParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "D":
        case "DD":
          return parseNumericPattern(numericPatterns.dayOfYear, dateString);
        case "Do":
          return match2.ordinalNumber(dateString, {
            unit: "date"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(date2, value) {
      var year = date2.getUTCFullYear();
      var isLeapYear = isLeapYearIndex$1(year);
      if (isLeapYear) {
        return value >= 1 && value <= 366;
      } else {
        return value >= 1 && value <= 365;
      }
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMonth(0, value);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return DayOfYearParser2;
}(Parser);
function setUTCDay(dirtyDate, dirtyDay, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(2, arguments);
  var defaultOptions2 = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  var date2 = toDate(dirtyDate);
  var day = toInteger(dirtyDay);
  var currentDay = date2.getUTCDay();
  var remainder = day % 7;
  var dayIndex = (remainder + 7) % 7;
  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;
  date2.setUTCDate(date2.getUTCDate() + diff);
  return date2;
}
var DayParser = function(_Parser) {
  _inherits(DayParser2, _Parser);
  var _super = _createSuper(DayParser2);
  function DayParser2() {
    var _this;
    _classCallCheck(this, DayParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["D", "i", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(DayParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "E":
        case "EE":
        case "EEE":
          return match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "EEEEE":
          return match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "EEEEEE":
          return match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "EEEE":
        default:
          return match2.day(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value, options) {
      date2 = setUTCDay(date2, value, options);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return DayParser2;
}(Parser);
var LocalDayParser = function(_Parser) {
  _inherits(LocalDayParser2, _Parser);
  var _super = _createSuper(LocalDayParser2);
  function LocalDayParser2() {
    var _this;
    _classCallCheck(this, LocalDayParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "R", "u", "q", "Q", "M", "L", "I", "d", "D", "E", "i", "c", "t", "T"]);
    return _this;
  }
  _createClass(LocalDayParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2, options) {
      var valueCallback3 = function valueCallback4(value) {
        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;
        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays;
      };
      switch (token) {
        case "e":
        case "ee":
          return mapValue(parseNDigits(token.length, dateString), valueCallback3);
        case "eo":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "day"
          }), valueCallback3);
        case "eee":
          return match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "eeeee":
          return match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "eeeeee":
          return match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "eeee":
        default:
          return match2.day(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value, options) {
      date2 = setUTCDay(date2, value, options);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return LocalDayParser2;
}(Parser);
var StandAloneLocalDayParser = function(_Parser) {
  _inherits(StandAloneLocalDayParser2, _Parser);
  var _super = _createSuper(StandAloneLocalDayParser2);
  function StandAloneLocalDayParser2() {
    var _this;
    _classCallCheck(this, StandAloneLocalDayParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "R", "u", "q", "Q", "M", "L", "I", "d", "D", "E", "i", "e", "t", "T"]);
    return _this;
  }
  _createClass(StandAloneLocalDayParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2, options) {
      var valueCallback3 = function valueCallback4(value) {
        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;
        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays;
      };
      switch (token) {
        case "c":
        case "cc":
          return mapValue(parseNDigits(token.length, dateString), valueCallback3);
        case "co":
          return mapValue(match2.ordinalNumber(dateString, {
            unit: "day"
          }), valueCallback3);
        case "ccc":
          return match2.day(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "short",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "ccccc":
          return match2.day(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "cccccc":
          return match2.day(dateString, {
            width: "short",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "standalone"
          });
        case "cccc":
        default:
          return match2.day(dateString, {
            width: "wide",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "abbreviated",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "short",
            context: "standalone"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "standalone"
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value, options) {
      date2 = setUTCDay(date2, value, options);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return StandAloneLocalDayParser2;
}(Parser);
function setUTCISODay(dirtyDate, dirtyDay) {
  requiredArgs(2, arguments);
  var day = toInteger(dirtyDay);
  if (day % 7 === 0) {
    day = day - 7;
  }
  var weekStartsOn = 1;
  var date2 = toDate(dirtyDate);
  var currentDay = date2.getUTCDay();
  var remainder = day % 7;
  var dayIndex = (remainder + 7) % 7;
  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;
  date2.setUTCDate(date2.getUTCDate() + diff);
  return date2;
}
var ISODayParser = function(_Parser) {
  _inherits(ISODayParser2, _Parser);
  var _super = _createSuper(ISODayParser2);
  function ISODayParser2() {
    var _this;
    _classCallCheck(this, ISODayParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 90);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["y", "Y", "u", "q", "Q", "M", "L", "w", "d", "D", "E", "e", "c", "t", "T"]);
    return _this;
  }
  _createClass(ISODayParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      var valueCallback3 = function valueCallback4(value) {
        if (value === 0) {
          return 7;
        }
        return value;
      };
      switch (token) {
        case "i":
        case "ii":
          return parseNDigits(token.length, dateString);
        case "io":
          return match2.ordinalNumber(dateString, {
            unit: "day"
          });
        case "iii":
          return mapValue(match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          }), valueCallback3);
        case "iiiii":
          return mapValue(match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          }), valueCallback3);
        case "iiiiii":
          return mapValue(match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          }), valueCallback3);
        case "iiii":
        default:
          return mapValue(match2.day(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "short",
            context: "formatting"
          }) || match2.day(dateString, {
            width: "narrow",
            context: "formatting"
          }), valueCallback3);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 7;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2 = setUTCISODay(date2, value);
      date2.setUTCHours(0, 0, 0, 0);
      return date2;
    }
  }]);
  return ISODayParser2;
}(Parser);
var AMPMParser = function(_Parser) {
  _inherits(AMPMParser2, _Parser);
  var _super = _createSuper(AMPMParser2);
  function AMPMParser2() {
    var _this;
    _classCallCheck(this, AMPMParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 80);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["b", "B", "H", "k", "t", "T"]);
    return _this;
  }
  _createClass(AMPMParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "a":
        case "aa":
        case "aaa":
          return match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "aaaaa":
          return match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "aaaa":
        default:
          return match2.dayPeriod(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);
      return date2;
    }
  }]);
  return AMPMParser2;
}(Parser);
var AMPMMidnightParser = function(_Parser) {
  _inherits(AMPMMidnightParser2, _Parser);
  var _super = _createSuper(AMPMMidnightParser2);
  function AMPMMidnightParser2() {
    var _this;
    _classCallCheck(this, AMPMMidnightParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 80);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["a", "B", "H", "k", "t", "T"]);
    return _this;
  }
  _createClass(AMPMMidnightParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "b":
        case "bb":
        case "bbb":
          return match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "bbbbb":
          return match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "bbbb":
        default:
          return match2.dayPeriod(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);
      return date2;
    }
  }]);
  return AMPMMidnightParser2;
}(Parser);
var DayPeriodParser = function(_Parser) {
  _inherits(DayPeriodParser2, _Parser);
  var _super = _createSuper(DayPeriodParser2);
  function DayPeriodParser2() {
    var _this;
    _classCallCheck(this, DayPeriodParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 80);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["a", "b", "t", "T"]);
    return _this;
  }
  _createClass(DayPeriodParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "B":
        case "BB":
        case "BBB":
          return match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "BBBBB":
          return match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
        case "BBBB":
        default:
          return match2.dayPeriod(dateString, {
            width: "wide",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "abbreviated",
            context: "formatting"
          }) || match2.dayPeriod(dateString, {
            width: "narrow",
            context: "formatting"
          });
      }
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);
      return date2;
    }
  }]);
  return DayPeriodParser2;
}(Parser);
var Hour1to12Parser = function(_Parser) {
  _inherits(Hour1to12Parser2, _Parser);
  var _super = _createSuper(Hour1to12Parser2);
  function Hour1to12Parser2() {
    var _this;
    _classCallCheck(this, Hour1to12Parser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 70);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["H", "K", "k", "t", "T"]);
    return _this;
  }
  _createClass(Hour1to12Parser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "h":
          return parseNumericPattern(numericPatterns.hour12h, dateString);
        case "ho":
          return match2.ordinalNumber(dateString, {
            unit: "hour"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 12;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      var isPM = date2.getUTCHours() >= 12;
      if (isPM && value < 12) {
        date2.setUTCHours(value + 12, 0, 0, 0);
      } else if (!isPM && value === 12) {
        date2.setUTCHours(0, 0, 0, 0);
      } else {
        date2.setUTCHours(value, 0, 0, 0);
      }
      return date2;
    }
  }]);
  return Hour1to12Parser2;
}(Parser);
var Hour0to23Parser = function(_Parser) {
  _inherits(Hour0to23Parser2, _Parser);
  var _super = _createSuper(Hour0to23Parser2);
  function Hour0to23Parser2() {
    var _this;
    _classCallCheck(this, Hour0to23Parser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 70);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["a", "b", "h", "K", "k", "t", "T"]);
    return _this;
  }
  _createClass(Hour0to23Parser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "H":
          return parseNumericPattern(numericPatterns.hour23h, dateString);
        case "Ho":
          return match2.ordinalNumber(dateString, {
            unit: "hour"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 23;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCHours(value, 0, 0, 0);
      return date2;
    }
  }]);
  return Hour0to23Parser2;
}(Parser);
var Hour0To11Parser = function(_Parser) {
  _inherits(Hour0To11Parser2, _Parser);
  var _super = _createSuper(Hour0To11Parser2);
  function Hour0To11Parser2() {
    var _this;
    _classCallCheck(this, Hour0To11Parser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 70);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["h", "H", "k", "t", "T"]);
    return _this;
  }
  _createClass(Hour0To11Parser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "K":
          return parseNumericPattern(numericPatterns.hour11h, dateString);
        case "Ko":
          return match2.ordinalNumber(dateString, {
            unit: "hour"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      var isPM = date2.getUTCHours() >= 12;
      if (isPM && value < 12) {
        date2.setUTCHours(value + 12, 0, 0, 0);
      } else {
        date2.setUTCHours(value, 0, 0, 0);
      }
      return date2;
    }
  }]);
  return Hour0To11Parser2;
}(Parser);
var Hour1To24Parser = function(_Parser) {
  _inherits(Hour1To24Parser2, _Parser);
  var _super = _createSuper(Hour1To24Parser2);
  function Hour1To24Parser2() {
    var _this;
    _classCallCheck(this, Hour1To24Parser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 70);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["a", "b", "h", "H", "K", "t", "T"]);
    return _this;
  }
  _createClass(Hour1To24Parser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "k":
          return parseNumericPattern(numericPatterns.hour24h, dateString);
        case "ko":
          return match2.ordinalNumber(dateString, {
            unit: "hour"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 24;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      var hours = value <= 24 ? value % 24 : value;
      date2.setUTCHours(hours, 0, 0, 0);
      return date2;
    }
  }]);
  return Hour1To24Parser2;
}(Parser);
var MinuteParser = function(_Parser) {
  _inherits(MinuteParser2, _Parser);
  var _super = _createSuper(MinuteParser2);
  function MinuteParser2() {
    var _this;
    _classCallCheck(this, MinuteParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 60);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["t", "T"]);
    return _this;
  }
  _createClass(MinuteParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "m":
          return parseNumericPattern(numericPatterns.minute, dateString);
        case "mo":
          return match2.ordinalNumber(dateString, {
            unit: "minute"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 59;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMinutes(value, 0, 0);
      return date2;
    }
  }]);
  return MinuteParser2;
}(Parser);
var SecondParser = function(_Parser) {
  _inherits(SecondParser2, _Parser);
  var _super = _createSuper(SecondParser2);
  function SecondParser2() {
    var _this;
    _classCallCheck(this, SecondParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 50);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["t", "T"]);
    return _this;
  }
  _createClass(SecondParser2, [{
    key: "parse",
    value: function parse2(dateString, token, match2) {
      switch (token) {
        case "s":
          return parseNumericPattern(numericPatterns.second, dateString);
        case "so":
          return match2.ordinalNumber(dateString, {
            unit: "second"
          });
        default:
          return parseNDigits(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 59;
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCSeconds(value, 0);
      return date2;
    }
  }]);
  return SecondParser2;
}(Parser);
var FractionOfSecondParser = function(_Parser) {
  _inherits(FractionOfSecondParser2, _Parser);
  var _super = _createSuper(FractionOfSecondParser2);
  function FractionOfSecondParser2() {
    var _this;
    _classCallCheck(this, FractionOfSecondParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 30);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["t", "T"]);
    return _this;
  }
  _createClass(FractionOfSecondParser2, [{
    key: "parse",
    value: function parse2(dateString, token) {
      var valueCallback3 = function valueCallback4(value) {
        return Math.floor(value * Math.pow(10, -token.length + 3));
      };
      return mapValue(parseNDigits(token.length, dateString), valueCallback3);
    }
  }, {
    key: "set",
    value: function set2(date2, _flags, value) {
      date2.setUTCMilliseconds(value);
      return date2;
    }
  }]);
  return FractionOfSecondParser2;
}(Parser);
var ISOTimezoneWithZParser = function(_Parser) {
  _inherits(ISOTimezoneWithZParser2, _Parser);
  var _super = _createSuper(ISOTimezoneWithZParser2);
  function ISOTimezoneWithZParser2() {
    var _this;
    _classCallCheck(this, ISOTimezoneWithZParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 10);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["t", "T", "x"]);
    return _this;
  }
  _createClass(ISOTimezoneWithZParser2, [{
    key: "parse",
    value: function parse2(dateString, token) {
      switch (token) {
        case "X":
          return parseTimezonePattern(timezonePatterns.basicOptionalMinutes, dateString);
        case "XX":
          return parseTimezonePattern(timezonePatterns.basic, dateString);
        case "XXXX":
          return parseTimezonePattern(timezonePatterns.basicOptionalSeconds, dateString);
        case "XXXXX":
          return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds, dateString);
        case "XXX":
        default:
          return parseTimezonePattern(timezonePatterns.extended, dateString);
      }
    }
  }, {
    key: "set",
    value: function set2(date2, flags, value) {
      if (flags.timestampIsSet) {
        return date2;
      }
      return new Date(date2.getTime() - value);
    }
  }]);
  return ISOTimezoneWithZParser2;
}(Parser);
var ISOTimezoneParser = function(_Parser) {
  _inherits(ISOTimezoneParser2, _Parser);
  var _super = _createSuper(ISOTimezoneParser2);
  function ISOTimezoneParser2() {
    var _this;
    _classCallCheck(this, ISOTimezoneParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 10);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", ["t", "T", "X"]);
    return _this;
  }
  _createClass(ISOTimezoneParser2, [{
    key: "parse",
    value: function parse2(dateString, token) {
      switch (token) {
        case "x":
          return parseTimezonePattern(timezonePatterns.basicOptionalMinutes, dateString);
        case "xx":
          return parseTimezonePattern(timezonePatterns.basic, dateString);
        case "xxxx":
          return parseTimezonePattern(timezonePatterns.basicOptionalSeconds, dateString);
        case "xxxxx":
          return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds, dateString);
        case "xxx":
        default:
          return parseTimezonePattern(timezonePatterns.extended, dateString);
      }
    }
  }, {
    key: "set",
    value: function set2(date2, flags, value) {
      if (flags.timestampIsSet) {
        return date2;
      }
      return new Date(date2.getTime() - value);
    }
  }]);
  return ISOTimezoneParser2;
}(Parser);
var TimestampSecondsParser = function(_Parser) {
  _inherits(TimestampSecondsParser2, _Parser);
  var _super = _createSuper(TimestampSecondsParser2);
  function TimestampSecondsParser2() {
    var _this;
    _classCallCheck(this, TimestampSecondsParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 40);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", "*");
    return _this;
  }
  _createClass(TimestampSecondsParser2, [{
    key: "parse",
    value: function parse2(dateString) {
      return parseAnyDigitsSigned(dateString);
    }
  }, {
    key: "set",
    value: function set2(_date, _flags, value) {
      return [new Date(value * 1e3), {
        timestampIsSet: true
      }];
    }
  }]);
  return TimestampSecondsParser2;
}(Parser);
var TimestampMillisecondsParser = function(_Parser) {
  _inherits(TimestampMillisecondsParser2, _Parser);
  var _super = _createSuper(TimestampMillisecondsParser2);
  function TimestampMillisecondsParser2() {
    var _this;
    _classCallCheck(this, TimestampMillisecondsParser2);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _defineProperty(_assertThisInitialized(_this), "priority", 20);
    _defineProperty(_assertThisInitialized(_this), "incompatibleTokens", "*");
    return _this;
  }
  _createClass(TimestampMillisecondsParser2, [{
    key: "parse",
    value: function parse2(dateString) {
      return parseAnyDigitsSigned(dateString);
    }
  }, {
    key: "set",
    value: function set2(_date, _flags, value) {
      return [new Date(value), {
        timestampIsSet: true
      }];
    }
  }]);
  return TimestampMillisecondsParser2;
}(Parser);
var parsers = {
  G: new EraParser(),
  y: new YearParser(),
  Y: new LocalWeekYearParser(),
  R: new ISOWeekYearParser(),
  u: new ExtendedYearParser(),
  Q: new QuarterParser(),
  q: new StandAloneQuarterParser(),
  M: new MonthParser(),
  L: new StandAloneMonthParser(),
  w: new LocalWeekParser(),
  I: new ISOWeekParser(),
  d: new DateParser(),
  D: new DayOfYearParser(),
  E: new DayParser(),
  e: new LocalDayParser(),
  c: new StandAloneLocalDayParser(),
  i: new ISODayParser(),
  a: new AMPMParser(),
  b: new AMPMMidnightParser(),
  B: new DayPeriodParser(),
  h: new Hour1to12Parser(),
  H: new Hour0to23Parser(),
  K: new Hour0To11Parser(),
  k: new Hour1To24Parser(),
  m: new MinuteParser(),
  s: new SecondParser(),
  S: new FractionOfSecondParser(),
  X: new ISOTimezoneWithZParser(),
  x: new ISOTimezoneParser(),
  t: new TimestampSecondsParser(),
  T: new TimestampMillisecondsParser()
};
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var notWhitespaceRegExp = /\S/;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function parse(dirtyDateString, dirtyFormatString, dirtyReferenceDate, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  requiredArgs(3, arguments);
  var dateString = String(dirtyDateString);
  var formatString = String(dirtyFormatString);
  var defaultOptions2 = getDefaultOptions();
  var locale2 = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions2.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  if (!locale2.match) {
    throw new RangeError("locale must contain match property");
  }
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions2.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions2.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions2.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  if (formatString === "") {
    if (dateString === "") {
      return toDate(dirtyReferenceDate);
    } else {
      return new Date(NaN);
    }
  }
  var subFnOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale: locale2
  };
  var setters = [new DateToSystemTimezoneSetter()];
  var tokens = formatString.match(longFormattingTokensRegExp).map(function(substring) {
    var firstCharacter = substring[0];
    if (firstCharacter in longFormatters$1) {
      var longFormatter = longFormatters$1[firstCharacter];
      return longFormatter(substring, locale2.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp);
  var usedTokens = [];
  var _iterator = _createForOfIteratorHelper(tokens), _step;
  try {
    var _loop = function _loop2() {
      var token = _step.value;
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(token)) {
        throwProtectedError(token, formatString, dirtyDateString);
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(token)) {
        throwProtectedError(token, formatString, dirtyDateString);
      }
      var firstCharacter = token[0];
      var parser = parsers[firstCharacter];
      if (parser) {
        var incompatibleTokens = parser.incompatibleTokens;
        if (Array.isArray(incompatibleTokens)) {
          var incompatibleToken = usedTokens.find(function(usedToken) {
            return incompatibleTokens.includes(usedToken.token) || usedToken.token === firstCharacter;
          });
          if (incompatibleToken) {
            throw new RangeError("The format string mustn't contain `".concat(incompatibleToken.fullToken, "` and `").concat(token, "` at the same time"));
          }
        } else if (parser.incompatibleTokens === "*" && usedTokens.length > 0) {
          throw new RangeError("The format string mustn't contain `".concat(token, "` and any other token at the same time"));
        }
        usedTokens.push({
          token: firstCharacter,
          fullToken: token
        });
        var parseResult = parser.run(dateString, token, locale2.match, subFnOptions);
        if (!parseResult) {
          return {
            v: new Date(NaN)
          };
        }
        setters.push(parseResult.setter);
        dateString = parseResult.rest;
      } else {
        if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
          throw new RangeError("Format string contains an unescaped latin alphabet character `" + firstCharacter + "`");
        }
        if (token === "''") {
          token = "'";
        } else if (firstCharacter === "'") {
          token = cleanEscapedString(token);
        }
        if (dateString.indexOf(token) === 0) {
          dateString = dateString.slice(token.length);
        } else {
          return {
            v: new Date(NaN)
          };
        }
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _ret = _loop();
      if (_typeof(_ret) === "object")
        return _ret.v;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  if (dateString.length > 0 && notWhitespaceRegExp.test(dateString)) {
    return new Date(NaN);
  }
  var uniquePrioritySetters = setters.map(function(setter2) {
    return setter2.priority;
  }).sort(function(a3, b2) {
    return b2 - a3;
  }).filter(function(priority, index, array) {
    return array.indexOf(priority) === index;
  }).map(function(priority) {
    return setters.filter(function(setter2) {
      return setter2.priority === priority;
    }).sort(function(a3, b2) {
      return b2.subPriority - a3.subPriority;
    });
  }).map(function(setterArray) {
    return setterArray[0];
  });
  var date2 = toDate(dirtyReferenceDate);
  if (isNaN(date2.getTime())) {
    return new Date(NaN);
  }
  var utcDate = subMilliseconds(date2, getTimezoneOffsetInMilliseconds(date2));
  var flags = {};
  var _iterator2 = _createForOfIteratorHelper(uniquePrioritySetters), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var setter = _step2.value;
      if (!setter.validate(utcDate, subFnOptions)) {
        return new Date(NaN);
      }
      var result = setter.set(utcDate, flags, subFnOptions);
      if (Array.isArray(result)) {
        utcDate = result[0];
        assign(flags, result[1]);
      } else {
        utcDate = result;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  return utcDate;
}
function cleanEscapedString(input2) {
  return input2.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, "'");
}
function isSameQuarter(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeftStartOfQuarter = startOfQuarter(dirtyDateLeft);
  var dateRightStartOfQuarter = startOfQuarter(dirtyDateRight);
  return dateLeftStartOfQuarter.getTime() === dateRightStartOfQuarter.getTime();
}
function subDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addDays(dirtyDate, -amount);
}
function parseISO(argument, options) {
  var _options$additionalDi;
  requiredArgs(1, arguments);
  var additionalDigits = toInteger((_options$additionalDi = options === null || options === void 0 ? void 0 : options.additionalDigits) !== null && _options$additionalDi !== void 0 ? _options$additionalDi : 2);
  if (additionalDigits !== 2 && additionalDigits !== 1 && additionalDigits !== 0) {
    throw new RangeError("additionalDigits must be 0, 1 or 2");
  }
  if (!(typeof argument === "string" || Object.prototype.toString.call(argument) === "[object String]")) {
    return new Date(NaN);
  }
  var dateStrings = splitDateString(argument);
  var date2;
  if (dateStrings.date) {
    var parseYearResult = parseYear(dateStrings.date, additionalDigits);
    date2 = parseDate(parseYearResult.restDateString, parseYearResult.year);
  }
  if (!date2 || isNaN(date2.getTime())) {
    return new Date(NaN);
  }
  var timestamp = date2.getTime();
  var time = 0;
  var offset;
  if (dateStrings.time) {
    time = parseTime(dateStrings.time);
    if (isNaN(time)) {
      return new Date(NaN);
    }
  }
  if (dateStrings.timezone) {
    offset = parseTimezone(dateStrings.timezone);
    if (isNaN(offset)) {
      return new Date(NaN);
    }
  } else {
    var dirtyDate = new Date(timestamp + time);
    var result = new Date(0);
    result.setFullYear(dirtyDate.getUTCFullYear(), dirtyDate.getUTCMonth(), dirtyDate.getUTCDate());
    result.setHours(dirtyDate.getUTCHours(), dirtyDate.getUTCMinutes(), dirtyDate.getUTCSeconds(), dirtyDate.getUTCMilliseconds());
    return result;
  }
  return new Date(timestamp + time + offset);
}
var patterns = {
  dateTimeDelimiter: /[T ]/,
  timeZoneDelimiter: /[Z ]/i,
  timezone: /([Z+-].*)$/
};
var dateRegex = /^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/;
var timeRegex = /^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/;
var timezoneRegex = /^([+-])(\d{2})(?::?(\d{2}))?$/;
function splitDateString(dateString) {
  var dateStrings = {};
  var array = dateString.split(patterns.dateTimeDelimiter);
  var timeString;
  if (array.length > 2) {
    return dateStrings;
  }
  if (/:/.test(array[0])) {
    timeString = array[0];
  } else {
    dateStrings.date = array[0];
    timeString = array[1];
    if (patterns.timeZoneDelimiter.test(dateStrings.date)) {
      dateStrings.date = dateString.split(patterns.timeZoneDelimiter)[0];
      timeString = dateString.substr(dateStrings.date.length, dateString.length);
    }
  }
  if (timeString) {
    var token = patterns.timezone.exec(timeString);
    if (token) {
      dateStrings.time = timeString.replace(token[1], "");
      dateStrings.timezone = token[1];
    } else {
      dateStrings.time = timeString;
    }
  }
  return dateStrings;
}
function parseYear(dateString, additionalDigits) {
  var regex = new RegExp("^(?:(\\d{4}|[+-]\\d{" + (4 + additionalDigits) + "})|(\\d{2}|[+-]\\d{" + (2 + additionalDigits) + "})$)");
  var captures = dateString.match(regex);
  if (!captures)
    return {
      year: NaN,
      restDateString: ""
    };
  var year = captures[1] ? parseInt(captures[1]) : null;
  var century = captures[2] ? parseInt(captures[2]) : null;
  return {
    year: century === null ? year : century * 100,
    restDateString: dateString.slice((captures[1] || captures[2]).length)
  };
}
function parseDate(dateString, year) {
  if (year === null)
    return new Date(NaN);
  var captures = dateString.match(dateRegex);
  if (!captures)
    return new Date(NaN);
  var isWeekDate = !!captures[4];
  var dayOfYear2 = parseDateUnit(captures[1]);
  var month = parseDateUnit(captures[2]) - 1;
  var day = parseDateUnit(captures[3]);
  var week = parseDateUnit(captures[4]);
  var dayOfWeek = parseDateUnit(captures[5]) - 1;
  if (isWeekDate) {
    if (!validateWeekDate(year, week, dayOfWeek)) {
      return new Date(NaN);
    }
    return dayOfISOWeekYear(year, week, dayOfWeek);
  } else {
    var date2 = new Date(0);
    if (!validateDate(year, month, day) || !validateDayOfYearDate(year, dayOfYear2)) {
      return new Date(NaN);
    }
    date2.setUTCFullYear(year, month, Math.max(dayOfYear2, day));
    return date2;
  }
}
function parseDateUnit(value) {
  return value ? parseInt(value) : 1;
}
function parseTime(timeString) {
  var captures = timeString.match(timeRegex);
  if (!captures)
    return NaN;
  var hours = parseTimeUnit(captures[1]);
  var minutes = parseTimeUnit(captures[2]);
  var seconds = parseTimeUnit(captures[3]);
  if (!validateTime(hours, minutes, seconds)) {
    return NaN;
  }
  return hours * millisecondsInHour + minutes * millisecondsInMinute + seconds * 1e3;
}
function parseTimeUnit(value) {
  return value && parseFloat(value.replace(",", ".")) || 0;
}
function parseTimezone(timezoneString) {
  if (timezoneString === "Z")
    return 0;
  var captures = timezoneString.match(timezoneRegex);
  if (!captures)
    return 0;
  var sign = captures[1] === "+" ? -1 : 1;
  var hours = parseInt(captures[2]);
  var minutes = captures[3] && parseInt(captures[3]) || 0;
  if (!validateTimezone(hours, minutes)) {
    return NaN;
  }
  return sign * (hours * millisecondsInHour + minutes * millisecondsInMinute);
}
function dayOfISOWeekYear(isoWeekYear, week, day) {
  var date2 = new Date(0);
  date2.setUTCFullYear(isoWeekYear, 0, 4);
  var fourthOfJanuaryDay = date2.getUTCDay() || 7;
  var diff = (week - 1) * 7 + day + 1 - fourthOfJanuaryDay;
  date2.setUTCDate(date2.getUTCDate() + diff);
  return date2;
}
var daysInMonths = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
function isLeapYearIndex(year) {
  return year % 400 === 0 || year % 4 === 0 && year % 100 !== 0;
}
function validateDate(year, month, date2) {
  return month >= 0 && month <= 11 && date2 >= 1 && date2 <= (daysInMonths[month] || (isLeapYearIndex(year) ? 29 : 28));
}
function validateDayOfYearDate(year, dayOfYear2) {
  return dayOfYear2 >= 1 && dayOfYear2 <= (isLeapYearIndex(year) ? 366 : 365);
}
function validateWeekDate(_year, week, day) {
  return week >= 1 && week <= 53 && day >= 0 && day <= 6;
}
function validateTime(hours, minutes, seconds) {
  if (hours === 24) {
    return minutes === 0 && seconds === 0;
  }
  return seconds >= 0 && seconds < 60 && minutes >= 0 && minutes < 60 && hours >= 0 && hours < 25;
}
function validateTimezone(_hours, minutes) {
  return minutes >= 0 && minutes <= 59;
}
function setMonth(dirtyDate, dirtyMonth) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var month = toInteger(dirtyMonth);
  var year = date2.getFullYear();
  var day = date2.getDate();
  var dateWithDesiredMonth = new Date(0);
  dateWithDesiredMonth.setFullYear(year, month, 15);
  dateWithDesiredMonth.setHours(0, 0, 0, 0);
  var daysInMonth = getDaysInMonth(dateWithDesiredMonth);
  date2.setMonth(month, Math.min(day, daysInMonth));
  return date2;
}
function set$1(dirtyDate, values2) {
  requiredArgs(2, arguments);
  if (_typeof(values2) !== "object" || values2 === null) {
    throw new RangeError("values parameter must be an object");
  }
  var date2 = toDate(dirtyDate);
  if (isNaN(date2.getTime())) {
    return new Date(NaN);
  }
  if (values2.year != null) {
    date2.setFullYear(values2.year);
  }
  if (values2.month != null) {
    date2 = setMonth(date2, values2.month);
  }
  if (values2.date != null) {
    date2.setDate(toInteger(values2.date));
  }
  if (values2.hours != null) {
    date2.setHours(toInteger(values2.hours));
  }
  if (values2.minutes != null) {
    date2.setMinutes(toInteger(values2.minutes));
  }
  if (values2.seconds != null) {
    date2.setSeconds(toInteger(values2.seconds));
  }
  if (values2.milliseconds != null) {
    date2.setMilliseconds(toInteger(values2.milliseconds));
  }
  return date2;
}
function setHours(dirtyDate, dirtyHours) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var hours = toInteger(dirtyHours);
  date2.setHours(hours);
  return date2;
}
function setMilliseconds(dirtyDate, dirtyMilliseconds) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var milliseconds = toInteger(dirtyMilliseconds);
  date2.setMilliseconds(milliseconds);
  return date2;
}
function setMinutes(dirtyDate, dirtyMinutes) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var minutes = toInteger(dirtyMinutes);
  date2.setMinutes(minutes);
  return date2;
}
function setSeconds(dirtyDate, dirtySeconds) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var seconds = toInteger(dirtySeconds);
  date2.setSeconds(seconds);
  return date2;
}
function setYear(dirtyDate, dirtyYear) {
  requiredArgs(2, arguments);
  var date2 = toDate(dirtyDate);
  var year = toInteger(dirtyYear);
  if (isNaN(date2.getTime())) {
    return new Date(NaN);
  }
  date2.setFullYear(year);
  return date2;
}
function subMonths(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMonths(dirtyDate, -amount);
}
function sub(date2, duration) {
  requiredArgs(2, arguments);
  if (!duration || _typeof(duration) !== "object")
    return new Date(NaN);
  var years = duration.years ? toInteger(duration.years) : 0;
  var months = duration.months ? toInteger(duration.months) : 0;
  var weeks = duration.weeks ? toInteger(duration.weeks) : 0;
  var days = duration.days ? toInteger(duration.days) : 0;
  var hours = duration.hours ? toInteger(duration.hours) : 0;
  var minutes = duration.minutes ? toInteger(duration.minutes) : 0;
  var seconds = duration.seconds ? toInteger(duration.seconds) : 0;
  var dateWithoutMonths = subMonths(date2, months + years * 12);
  var dateWithoutDays = subDays(dateWithoutMonths, days + weeks * 7);
  var minutestoSub = minutes + hours * 60;
  var secondstoSub = seconds + minutestoSub * 60;
  var mstoSub = secondstoSub * 1e3;
  var finalDate = new Date(dateWithoutDays.getTime() - mstoSub);
  return finalDate;
}
function subYears(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addYears(dirtyDate, -amount);
}
function Bt() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"
      }),
      createBaseVNode("path", {
        d: "M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      createBaseVNode("path", {
        d: "M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      createBaseVNode("path", {
        d: "M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"
      })
    ]
  );
}
Bt.compatConfig = {
  MODE: 3
};
function Ma() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"
      }),
      createBaseVNode("path", {
        d: "M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
Ma.compatConfig = {
  MODE: 3
};
function Fn() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
Fn.compatConfig = {
  MODE: 3
};
function Hn() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"
      })
    ]
  );
}
Hn.compatConfig = {
  MODE: 3
};
function Vn() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"
      }),
      createBaseVNode("path", {
        d: "M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      })
    ]
  );
}
Vn.compatConfig = {
  MODE: 3
};
function Ln() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
Ln.compatConfig = {
  MODE: 3
};
function Un() {
  return openBlock(), createElementBlock(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon"
    },
    [
      createBaseVNode("path", {
        d: "M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
Un.compatConfig = {
  MODE: 3
};
function zn(e2) {
  return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2.default : e2;
}
var $a = { exports: {} };
(function(e2) {
  function n(a3) {
    return a3 && a3.__esModule ? a3 : {
      default: a3
    };
  }
  e2.exports = n, e2.exports.__esModule = true, e2.exports.default = e2.exports;
})($a);
var sr = $a.exports;
var Sn = { exports: {} };
(function(e2, n) {
  Object.defineProperty(n, "__esModule", {
    value: true
  }), n.default = a3;
  function a3(t2) {
    if (t2 === null || t2 === true || t2 === false)
      return NaN;
    var r = Number(t2);
    return isNaN(r) ? r : r < 0 ? Math.ceil(r) : Math.floor(r);
  }
  e2.exports = n.default;
})(Sn, Sn.exports);
var ir = Sn.exports;
var ur = zn(ir);
var Pn = { exports: {} };
(function(e2, n) {
  Object.defineProperty(n, "__esModule", {
    value: true
  }), n.default = a3;
  function a3(t2) {
    var r = new Date(Date.UTC(t2.getFullYear(), t2.getMonth(), t2.getDate(), t2.getHours(), t2.getMinutes(), t2.getSeconds(), t2.getMilliseconds()));
    return r.setUTCFullYear(t2.getFullYear()), t2.getTime() - r.getTime();
  }
  e2.exports = n.default;
})(Pn, Pn.exports);
var dr = Pn.exports;
var Jn = zn(dr);
function cr(e2, n) {
  var a3 = gr(n);
  return a3.formatToParts ? vr(a3, e2) : mr(a3, e2);
}
var fr = {
  year: 0,
  month: 1,
  day: 2,
  hour: 3,
  minute: 4,
  second: 5
};
function vr(e2, n) {
  try {
    for (var a3 = e2.formatToParts(n), t2 = [], r = 0; r < a3.length; r++) {
      var l = fr[a3[r].type];
      l >= 0 && (t2[l] = parseInt(a3[r].value, 10));
    }
    return t2;
  } catch (c2) {
    if (c2 instanceof RangeError)
      return [NaN];
    throw c2;
  }
}
function mr(e2, n) {
  var a3 = e2.format(n).replace(/\u200E/g, ""), t2 = /(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a3);
  return [t2[3], t2[1], t2[2], t2[4], t2[5], t2[6]];
}
var mn = {};
function gr(e2) {
  if (!mn[e2]) {
    var n = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: "America/New_York",
      year: "numeric",
      month: "numeric",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    }).format(new Date("2014-06-25T04:00:00.123Z")), a3 = n === "06/25/2014, 00:00:00" || n === "\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";
    mn[e2] = a3 ? new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: e2,
      year: "numeric",
      month: "numeric",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    }) : new Intl.DateTimeFormat("en-US", {
      hourCycle: "h23",
      timeZone: e2,
      year: "numeric",
      month: "numeric",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    });
  }
  return mn[e2];
}
function Wn(e2, n, a3, t2, r, l, c2) {
  var b2 = new Date(0);
  return b2.setUTCFullYear(e2, n, a3), b2.setUTCHours(t2, r, l, c2), b2;
}
var xn = 36e5;
var yr = 6e4;
var gn = {
  timezone: /([Z+-].*)$/,
  timezoneZ: /^(Z)$/,
  timezoneHH: /^([+-]\d{2})$/,
  timezoneHHMM: /^([+-]\d{2}):?(\d{2})$/
};
function jn(e2, n, a3) {
  var t2, r;
  if (!e2 || (t2 = gn.timezoneZ.exec(e2), t2))
    return 0;
  var l;
  if (t2 = gn.timezoneHH.exec(e2), t2)
    return l = parseInt(t2[1], 10), ea(l) ? -(l * xn) : NaN;
  if (t2 = gn.timezoneHHMM.exec(e2), t2) {
    l = parseInt(t2[1], 10);
    var c2 = parseInt(t2[2], 10);
    return ea(l, c2) ? (r = Math.abs(l) * xn + c2 * yr, l > 0 ? -r : r) : NaN;
  }
  if (br(e2)) {
    n = new Date(n || Date.now());
    var b2 = a3 ? n : hr(n), k2 = _n(b2, e2), P2 = a3 ? k2 : pr(n, k2, e2);
    return -P2;
  }
  return NaN;
}
function hr(e2) {
  return Wn(
    e2.getFullYear(),
    e2.getMonth(),
    e2.getDate(),
    e2.getHours(),
    e2.getMinutes(),
    e2.getSeconds(),
    e2.getMilliseconds()
  );
}
function _n(e2, n) {
  var a3 = cr(e2, n), t2 = Wn(
    a3[0],
    a3[1] - 1,
    a3[2],
    a3[3] % 24,
    a3[4],
    a3[5],
    0
  ).getTime(), r = e2.getTime(), l = r % 1e3;
  return r -= l >= 0 ? l : 1e3 + l, t2 - r;
}
function pr(e2, n, a3) {
  var t2 = e2.getTime(), r = t2 - n, l = _n(new Date(r), a3);
  if (n === l)
    return n;
  r -= l - n;
  var c2 = _n(new Date(r), a3);
  return l === c2 ? l : Math.max(l, c2);
}
function ea(e2, n) {
  return -23 <= e2 && e2 <= 23 && (n == null || 0 <= n && n <= 59);
}
var ta = {};
function br(e2) {
  if (ta[e2])
    return true;
  try {
    return new Intl.DateTimeFormat(void 0, { timeZone: e2 }), ta[e2] = true, true;
  } catch {
    return false;
  }
}
var Ta = /(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;
var yn = 36e5;
var na = 6e4;
var kr = 2;
var Ee = {
  dateTimePattern: /^([0-9W+-]+)(T| )(.*)/,
  datePattern: /^([0-9W+-]+)(.*)/,
  plainTime: /:/,
  YY: /^(\d{2})$/,
  YYY: [
    /^([+-]\d{2})$/,
    /^([+-]\d{3})$/,
    /^([+-]\d{4})$/
  ],
  YYYY: /^(\d{4})/,
  YYYYY: [
    /^([+-]\d{4})/,
    /^([+-]\d{5})/,
    /^([+-]\d{6})/
  ],
  MM: /^-(\d{2})$/,
  DDD: /^-?(\d{3})$/,
  MMDD: /^-?(\d{2})-?(\d{2})$/,
  Www: /^-?W(\d{2})$/,
  WwwD: /^-?W(\d{2})-?(\d{1})$/,
  HH: /^(\d{2}([.,]\d*)?)$/,
  HHMM: /^(\d{2}):?(\d{2}([.,]\d*)?)$/,
  HHMMSS: /^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,
  timeZone: Ta
};
function Cn(e2, n) {
  if (arguments.length < 1)
    throw new TypeError("1 argument required, but only " + arguments.length + " present");
  if (e2 === null)
    return new Date(NaN);
  var a3 = n || {}, t2 = a3.additionalDigits == null ? kr : ur(a3.additionalDigits);
  if (t2 !== 2 && t2 !== 1 && t2 !== 0)
    throw new RangeError("additionalDigits must be 0, 1 or 2");
  if (e2 instanceof Date || typeof e2 == "object" && Object.prototype.toString.call(e2) === "[object Date]")
    return new Date(e2.getTime());
  if (typeof e2 == "number" || Object.prototype.toString.call(e2) === "[object Number]")
    return new Date(e2);
  if (!(typeof e2 == "string" || Object.prototype.toString.call(e2) === "[object String]"))
    return new Date(NaN);
  var r = wr(e2), l = Dr(r.date, t2), c2 = l.year, b2 = l.restDateString, k2 = Mr(b2, c2);
  if (isNaN(k2))
    return new Date(NaN);
  if (k2) {
    var P2 = k2.getTime(), g = 0, S3;
    if (r.time && (g = $r(r.time), isNaN(g)))
      return new Date(NaN);
    if (r.timeZone || a3.timeZone) {
      if (S3 = jn(r.timeZone || a3.timeZone, new Date(P2 + g)), isNaN(S3))
        return new Date(NaN);
    } else
      S3 = Jn(new Date(P2 + g)), S3 = Jn(new Date(P2 + g + S3));
    return new Date(P2 + g + S3);
  } else
    return new Date(NaN);
}
function wr(e2) {
  var n = {}, a3 = Ee.dateTimePattern.exec(e2), t2;
  if (a3 ? (n.date = a3[1], t2 = a3[3]) : (a3 = Ee.datePattern.exec(e2), a3 ? (n.date = a3[1], t2 = a3[2]) : (n.date = null, t2 = e2)), t2) {
    var r = Ee.timeZone.exec(t2);
    r ? (n.time = t2.replace(r[1], ""), n.timeZone = r[1].trim()) : n.time = t2;
  }
  return n;
}
function Dr(e2, n) {
  var a3 = Ee.YYY[n], t2 = Ee.YYYYY[n], r;
  if (r = Ee.YYYY.exec(e2) || t2.exec(e2), r) {
    var l = r[1];
    return {
      year: parseInt(l, 10),
      restDateString: e2.slice(l.length)
    };
  }
  if (r = Ee.YY.exec(e2) || a3.exec(e2), r) {
    var c2 = r[1];
    return {
      year: parseInt(c2, 10) * 100,
      restDateString: e2.slice(c2.length)
    };
  }
  return {
    year: null
  };
}
function Mr(e2, n) {
  if (n === null)
    return null;
  var a3, t2, r, l;
  if (e2.length === 0)
    return t2 = new Date(0), t2.setUTCFullYear(n), t2;
  if (a3 = Ee.MM.exec(e2), a3)
    return t2 = new Date(0), r = parseInt(a3[1], 10) - 1, ra(n, r) ? (t2.setUTCFullYear(n, r), t2) : new Date(NaN);
  if (a3 = Ee.DDD.exec(e2), a3) {
    t2 = new Date(0);
    var c2 = parseInt(a3[1], 10);
    return Sr(n, c2) ? (t2.setUTCFullYear(n, 0, c2), t2) : new Date(NaN);
  }
  if (a3 = Ee.MMDD.exec(e2), a3) {
    t2 = new Date(0), r = parseInt(a3[1], 10) - 1;
    var b2 = parseInt(a3[2], 10);
    return ra(n, r, b2) ? (t2.setUTCFullYear(n, r, b2), t2) : new Date(NaN);
  }
  if (a3 = Ee.Www.exec(e2), a3)
    return l = parseInt(a3[1], 10) - 1, la(n, l) ? aa(n, l) : new Date(NaN);
  if (a3 = Ee.WwwD.exec(e2), a3) {
    l = parseInt(a3[1], 10) - 1;
    var k2 = parseInt(a3[2], 10) - 1;
    return la(n, l, k2) ? aa(n, l, k2) : new Date(NaN);
  }
  return null;
}
function $r(e2) {
  var n, a3, t2;
  if (n = Ee.HH.exec(e2), n)
    return a3 = parseFloat(n[1].replace(",", ".")), hn(a3) ? a3 % 24 * yn : NaN;
  if (n = Ee.HHMM.exec(e2), n)
    return a3 = parseInt(n[1], 10), t2 = parseFloat(n[2].replace(",", ".")), hn(a3, t2) ? a3 % 24 * yn + t2 * na : NaN;
  if (n = Ee.HHMMSS.exec(e2), n) {
    a3 = parseInt(n[1], 10), t2 = parseInt(n[2], 10);
    var r = parseFloat(n[3].replace(",", "."));
    return hn(a3, t2, r) ? a3 % 24 * yn + t2 * na + r * 1e3 : NaN;
  }
  return null;
}
function aa(e2, n, a3) {
  n = n || 0, a3 = a3 || 0;
  var t2 = new Date(0);
  t2.setUTCFullYear(e2, 0, 4);
  var r = t2.getUTCDay() || 7, l = n * 7 + a3 + 1 - r;
  return t2.setUTCDate(t2.getUTCDate() + l), t2;
}
var Tr = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var Ar = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
function Aa(e2) {
  return e2 % 400 === 0 || e2 % 4 === 0 && e2 % 100 !== 0;
}
function ra(e2, n, a3) {
  if (n < 0 || n > 11)
    return false;
  if (a3 != null) {
    if (a3 < 1)
      return false;
    var t2 = Aa(e2);
    if (t2 && a3 > Ar[n] || !t2 && a3 > Tr[n])
      return false;
  }
  return true;
}
function Sr(e2, n) {
  if (n < 1)
    return false;
  var a3 = Aa(e2);
  return !(a3 && n > 366 || !a3 && n > 365);
}
function la(e2, n, a3) {
  return !(n < 0 || n > 52 || a3 != null && (a3 < 0 || a3 > 6));
}
function hn(e2, n, a3) {
  return !(e2 != null && (e2 < 0 || e2 >= 25) || n != null && (n < 0 || n >= 60) || a3 != null && (a3 < 0 || a3 >= 60));
}
var Rn = { exports: {} };
var Yn = { exports: {} };
(function(e2, n) {
  Object.defineProperty(n, "__esModule", {
    value: true
  }), n.default = a3;
  function a3(t2, r) {
    if (t2 == null)
      throw new TypeError("assign requires that input parameter not be null or undefined");
    for (var l in r)
      Object.prototype.hasOwnProperty.call(r, l) && (t2[l] = r[l]);
    return t2;
  }
  e2.exports = n.default;
})(Yn, Yn.exports);
var Pr = Yn.exports;
(function(e2, n) {
  var a3 = sr.default;
  Object.defineProperty(n, "__esModule", {
    value: true
  }), n.default = r;
  var t2 = a3(Pr);
  function r(l) {
    return (0, t2.default)({}, l);
  }
  e2.exports = n.default;
})(Rn, Rn.exports);
var _r = Rn.exports;
var Cr = zn(_r);
function Rr(e2, n, a3) {
  var t2 = Cn(e2, a3), r = jn(n, t2, true), l = new Date(t2.getTime() - r), c2 = new Date(0);
  return c2.setFullYear(l.getUTCFullYear(), l.getUTCMonth(), l.getUTCDate()), c2.setHours(l.getUTCHours(), l.getUTCMinutes(), l.getUTCSeconds(), l.getUTCMilliseconds()), c2;
}
function Yr(e2, n, a3) {
  if (typeof e2 == "string" && !e2.match(Ta)) {
    var t2 = Cr(a3);
    return t2.timeZone = n, Cn(e2, t2);
  }
  var r = Cn(e2, a3), l = Wn(
    r.getFullYear(),
    r.getMonth(),
    r.getDate(),
    r.getHours(),
    r.getMinutes(),
    r.getSeconds(),
    r.getMilliseconds()
  ).getTime(), c2 = jn(n, new Date(l));
  return new Date(l + c2);
}
function oa(e2) {
  return (n) => new Intl.DateTimeFormat(e2, { weekday: "short", timeZone: "UTC" }).format(new Date(`2017-01-0${n}T00:00:00+00:00`)).slice(0, 2);
}
function Or(e2) {
  return (n) => format(new Date(`2017-01-0${n}T00:00:00+00:00`), "EEEEEE", { locale: e2 });
}
var Nr = (e2, n, a3) => {
  const t2 = [1, 2, 3, 4, 5, 6, 7];
  let r;
  if (e2 !== null)
    try {
      r = t2.map(Or(e2));
    } catch {
      r = t2.map(oa(n));
    }
  else
    r = t2.map(oa(n));
  const l = r.slice(0, a3), c2 = r.slice(a3 + 1, r.length);
  return [r[a3]].concat(...c2).concat(...l);
};
var Kn = (e2, n) => {
  const a3 = [];
  for (let t2 = +e2[0]; t2 <= +e2[1]; t2++)
    a3.push({ value: +t2, text: `${t2}` });
  return n ? a3.reverse() : a3;
};
var Sa = (e2, n, a3) => {
  const t2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((l) => {
    const c2 = l < 10 ? `0${l}` : l;
    return new Date(`2017-${c2}-01T00:00:00+00:00`);
  });
  if (e2 !== null)
    try {
      const l = a3 === "long" ? "MMMM" : "MMM";
      return t2.map((c2, b2) => {
        const k2 = format(c2, l, { locale: e2 });
        return {
          text: k2.charAt(0).toUpperCase() + k2.substring(1),
          value: b2
        };
      });
    } catch {
    }
  const r = new Intl.DateTimeFormat(n, { month: a3, timeZone: "UTC" });
  return t2.map((l, c2) => {
    const b2 = r.format(l);
    return {
      text: b2.charAt(0).toUpperCase() + b2.substring(1),
      value: c2
    };
  });
};
var Ir = (e2) => [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][e2];
var Se = (e2) => {
  const n = unref(e2);
  return n != null && n.$el ? n == null ? void 0 : n.$el : n;
};
var Br = (e2) => Object.assign({ type: "dot" }, e2);
var Pa = (e2) => Array.isArray(e2) ? !!e2[0] && !!e2[1] : false;
var qt = {
  prop: (e2) => `"${e2}" prop must be enabled!`,
  dateArr: (e2) => `You need to use array as "model-value" binding in order to support "${e2}"`
};
var Te = (e2) => e2;
var sa = (e2) => e2 === 0 ? e2 : !e2 || isNaN(+e2) ? null : +e2;
var ia = (e2) => e2 === null;
var Er = (e2) => {
  if (e2)
    return [...e2.querySelectorAll("input, button, select, textarea, a[href]")][0];
};
var Fr = (e2) => {
  const n = [], a3 = (t2) => t2.filter((r) => r);
  for (let t2 = 0; t2 < e2.length; t2 += 3) {
    const r = [e2[t2], e2[t2 + 1], e2[t2 + 2]];
    n.push(a3(r));
  }
  return n;
};
var Nt = (e2, n, a3) => {
  const t2 = a3 != null ? a3 : a3 === 0, r = n != null ? n : n === 0;
  if (!t2 && !r)
    return false;
  const l = +a3, c2 = +n;
  return t2 && r ? +e2 > l || +e2 < c2 : t2 ? +e2 > l : r ? +e2 < c2 : false;
};
var Dt = (e2, n) => Fr(e2).map((a3) => a3.map((t2) => {
  const { active: r, disabled: l, isBetween: c2 } = n(t2);
  return {
    ...t2,
    active: r,
    disabled: l,
    className: {
      dp__overlay_cell_active: r,
      dp__overlay_cell: !r,
      dp__overlay_cell_disabled: l,
      dp__overlay_cell_pad: true,
      dp__overlay_cell_active_disabled: l && r,
      dp__cell_in_between: c2
    }
  };
}));
var lt = (e2, n, a3 = false) => {
  e2 && n.allowStopPropagation && (a3 && e2.stopImmediatePropagation(), e2.stopPropagation());
};
var ua = (e2, n, a3, t2, r) => {
  const l = parse(e2, n.slice(0, e2.length), new Date());
  return isValid(l) && isDate(l) ? t2 || r ? l : set$1(l, {
    hours: +a3.hours,
    minutes: +(a3 == null ? void 0 : a3.minutes),
    seconds: +(a3 == null ? void 0 : a3.seconds),
    milliseconds: 0
  }) : null;
};
var Hr = (e2, n, a3, t2, r) => {
  const l = Array.isArray(a3) ? a3[0] : a3;
  if (typeof n == "string")
    return ua(e2, n, l, t2, r);
  if (Array.isArray(n)) {
    let c2 = null;
    for (const b2 of n)
      if (c2 = ua(e2, b2, l, t2, r), c2)
        break;
    return c2;
  }
  return typeof n == "function" ? n(e2) : null;
};
var H3 = (e2) => e2 ? new Date(e2) : new Date();
var Vr = (e2, n, a3) => {
  if (n) {
    const r = (e2.getMonth() + 1).toString().padStart(2, "0"), l = e2.getDate().toString().padStart(2, "0"), c2 = e2.getHours().toString().padStart(2, "0"), b2 = e2.getMinutes().toString().padStart(2, "0"), k2 = a3 ? e2.getSeconds().toString().padStart(2, "0") : "00";
    return `${e2.getFullYear()}-${r}-${l}T${c2}:${b2}:${k2}.000Z`;
  }
  const t2 = Date.UTC(
    e2.getUTCFullYear(),
    e2.getUTCMonth(),
    e2.getUTCDate(),
    e2.getUTCHours(),
    e2.getUTCMinutes(),
    e2.getUTCSeconds()
  );
  return new Date(t2).toISOString();
};
var We = (e2) => {
  let n = H3(JSON.parse(JSON.stringify(e2)));
  return n = setHours(n, 0), n = setMinutes(n, 0), n = setSeconds(n, 0), n = setMilliseconds(n, 0), n;
};
var ot = (e2, n, a3, t2) => {
  let r = e2 ? H3(e2) : H3();
  return (n || n === 0) && (r = setHours(r, +n)), (a3 || a3 === 0) && (r = setMinutes(r, +a3)), (t2 || t2 === 0) && (r = setSeconds(r, +t2)), setMilliseconds(r, 0);
};
var Re = (e2, n) => !e2 || !n ? false : isBefore(We(e2), We(n));
var ye = (e2, n) => !e2 || !n ? false : isEqual(We(e2), We(n));
var Ie = (e2, n) => !e2 || !n ? false : isAfter(We(e2), We(n));
var Xt = (e2, n, a3) => e2 != null && e2[0] && (e2 != null && e2[1]) ? Ie(a3, e2[0]) && Re(a3, e2[1]) : e2 != null && e2[0] && n ? Ie(a3, e2[0]) && Re(a3, n) || Re(a3, e2[0]) && Ie(a3, n) : false;
var Ge = (e2) => {
  const n = set$1(new Date(e2), { date: 1 });
  return We(n);
};
var pn = (e2, n, a3) => n && (a3 || a3 === 0) ? Object.fromEntries(
  ["hours", "minutes", "seconds"].map((t2) => t2 === n ? [t2, a3] : [t2, isNaN(+e2[t2]) ? void 0 : +e2[t2]])
) : {
  hours: isNaN(+e2.hours) ? void 0 : +e2.hours,
  minutes: isNaN(+e2.minutes) ? void 0 : +e2.minutes,
  seconds: isNaN(+e2.seconds) ? void 0 : +e2.seconds
};
var mt = (e2) => ({
  hours: getHours(e2),
  minutes: getMinutes(e2),
  seconds: getSeconds(e2)
});
var _a$1 = (e2, n) => {
  if (n) {
    const a3 = getYear(H3(n));
    if (a3 > e2)
      return 12;
    if (a3 === e2)
      return getMonth(H3(n));
  }
};
var Ca = (e2, n) => {
  if (n) {
    const a3 = getYear(H3(n));
    return a3 < e2 ? -1 : a3 === e2 ? getMonth(H3(n)) : void 0;
  }
};
var Mt = (e2) => {
  if (e2)
    return getYear(H3(e2));
};
var Ue = (e2, n) => n ? Rr(e2, n) : e2;
var Ra = (e2, n) => n ? Yr(e2, n) : e2;
var da = (e2) => e2 instanceof Date ? e2 : parseISO(e2);
var Ya = (e2, n) => {
  const a3 = Ie(e2, n) ? n : e2, t2 = Ie(n, e2) ? n : e2;
  return eachDayOfInterval({ start: a3, end: t2 });
};
var Lr = (e2) => {
  const n = addMonths(e2, 1);
  return { month: getMonth(n), year: getYear(n) };
};
var Zt = (e2, n, a3) => {
  const t2 = startOfWeek(Ue(e2, n), { weekStartsOn: +a3 }), r = endOfWeek(Ue(e2, n), { weekStartsOn: +a3 });
  return [t2, r];
};
var Oa = (e2, n) => {
  const a3 = {
    hours: getHours(H3()),
    minutes: getMinutes(H3()),
    seconds: n ? getSeconds(H3()) : 0
  };
  return Object.assign(a3, e2);
};
var at = (e2, n, a3) => [set$1(H3(e2), { date: 1 }), set$1(H3(), { month: n, year: a3, date: 1 })];
var xe = (e2, n, a3) => {
  let t2 = e2 ? H3(e2) : H3();
  return (n || n === 0) && (t2 = setMonth(t2, n)), a3 && (t2 = setYear(t2, a3)), t2;
};
var Na = (e2, n, a3, t2, r) => {
  if (!t2 || r && !n || !r && !a3)
    return false;
  const l = r ? addMonths(e2, 1) : subMonths(e2, 1), c2 = [getMonth(l), getYear(l)];
  return r ? !zr(...c2, n) : !Ur(...c2, a3);
};
var Ur = (e2, n, a3) => Re(...at(a3, e2, n)) || ye(...at(a3, e2, n));
var zr = (e2, n, a3) => Ie(...at(a3, e2, n)) || ye(...at(a3, e2, n));
var Ia = (e2, n, a3, t2, r, l, c2) => {
  if (typeof n == "function" && !c2)
    return n(e2);
  const b2 = a3 ? { locale: a3 } : void 0;
  return Array.isArray(e2) ? `${format(e2[0], l, b2)}${r && !e2[1] ? "" : t2}${e2[1] ? format(e2[1], l, b2) : ""}` : format(e2, l, b2);
};
var pt = (e2) => {
  if (e2)
    return null;
  throw new Error(qt.prop("partial-range"));
};
var zt = (e2, n) => {
  if (n)
    return e2();
  throw new Error(qt.prop("range"));
};
var On = (e2) => Array.isArray(e2) ? isValid(e2[0]) && (e2[1] ? isValid(e2[1]) : true) : e2 ? isValid(e2) : false;
var Wr = (e2) => set$1(H3(), {
  hours: +e2.hours || 0,
  minutes: +e2.minutes || 0,
  seconds: +e2.seconds || 0
});
var bn = (e2, n, a3, t2) => {
  if (!e2)
    return true;
  if (t2) {
    const r = a3 === "max" ? isBefore(e2, n) : isAfter(e2, n), l = { seconds: 0, milliseconds: 0 };
    return r || isEqual(set$1(e2, l), set$1(n, l));
  }
  return a3 === "max" ? e2.getTime() <= n.getTime() : e2.getTime() >= n.getTime();
};
var ca = (e2, n, a3, t2, r) => {
  const l = e2 ? Wr(e2) : H3(n);
  return Array.isArray(t2) ? bn(t2[0], l, a3, !!n) && bn(t2[1], l, a3, !!n) && r : bn(t2, l, a3, !!n) && r;
};
var kn = (e2) => set$1(H3(), mt(e2));
var jr = (e2, n) => Array.isArray(e2) ? e2.map((a3) => H3(a3)).filter((a3) => getYear(H3(a3)) === n).map((a3) => getMonth(a3)) : [];
var _t = reactive({
  menuFocused: false,
  shiftKeyInMenu: false
});
var Ba = () => {
  const e2 = (t2) => {
    _t.menuFocused = t2;
  }, n = (t2) => {
    _t.shiftKeyInMenu !== t2 && (_t.shiftKeyInMenu = t2);
  };
  return {
    control: computed(() => ({ shiftKeyInMenu: _t.shiftKeyInMenu, menuFocused: _t.menuFocused })),
    setMenuFocused: e2,
    setShiftKey: n
  };
};
var ke = reactive({
  monthYear: [],
  calendar: [],
  time: [],
  actionRow: [],
  selectionGrid: [],
  timePicker: {
    0: [],
    1: []
  },
  monthPicker: []
});
var wn = ref(null);
var Wt = ref(false);
var Dn = ref(false);
var Mn = ref(false);
var $n = ref(false);
var Be = ref(0);
var Ce = ref(0);
var it = () => {
  const e2 = computed(() => Wt.value ? [...ke.selectionGrid, ke.actionRow].filter((h4) => h4.length) : Dn.value ? [
    ...ke.timePicker[0],
    ...ke.timePicker[1],
    $n.value ? [] : [wn.value],
    ke.actionRow
  ].filter((h4) => h4.length) : Mn.value ? [...ke.monthPicker, ke.actionRow] : [ke.monthYear, ...ke.calendar, ke.time, ke.actionRow].filter((h4) => h4.length)), n = (h4) => {
    Be.value = h4 ? Be.value + 1 : Be.value - 1;
    let O2 = null;
    e2.value[Ce.value] && (O2 = e2.value[Ce.value][Be.value]), O2 || (Be.value = h4 ? Be.value - 1 : Be.value + 1);
  }, a3 = (h4) => {
    if (Ce.value === 0 && !h4 || Ce.value === e2.value.length && h4)
      return;
    Ce.value = h4 ? Ce.value + 1 : Ce.value - 1, e2.value[Ce.value] ? e2.value[Ce.value] && !e2.value[Ce.value][Be.value] && Be.value !== 0 && (Be.value = e2.value[Ce.value].length - 1) : Ce.value = h4 ? Ce.value - 1 : Ce.value + 1;
  }, t2 = (h4) => {
    let O2 = null;
    e2.value[Ce.value] && (O2 = e2.value[Ce.value][Be.value]), O2 ? O2.focus({ preventScroll: !Wt.value }) : Be.value = h4 ? Be.value - 1 : Be.value + 1;
  }, r = () => {
    n(true), t2(true);
  }, l = () => {
    n(false), t2(false);
  }, c2 = () => {
    a3(false), t2(true);
  }, b2 = () => {
    a3(true), t2(true);
  }, k2 = (h4, O2) => {
    ke[O2] = h4;
  }, P2 = (h4, O2) => {
    ke[O2] = h4;
  }, g = () => {
    Be.value = 0, Ce.value = 0;
  };
  return {
    buildMatrix: k2,
    buildMultiLevelMatrix: P2,
    setTimePickerBackRef: (h4) => {
      wn.value = h4;
    },
    setSelectionGrid: (h4) => {
      Wt.value = h4, g(), h4 || (ke.selectionGrid = []);
    },
    setTimePicker: (h4, O2 = false) => {
      Dn.value = h4, $n.value = O2, g(), h4 || (ke.timePicker[0] = [], ke.timePicker[1] = []);
    },
    setTimePickerElements: (h4, O2 = 0) => {
      ke.timePicker[O2] = h4;
    },
    arrowRight: r,
    arrowLeft: l,
    arrowUp: c2,
    arrowDown: b2,
    clearArrowNav: () => {
      ke.monthYear = [], ke.calendar = [], ke.time = [], ke.actionRow = [], ke.selectionGrid = [], ke.timePicker[0] = [], ke.timePicker[1] = [], Wt.value = false, Dn.value = false, $n.value = false, Mn.value = false, g(), wn.value = null;
    },
    setMonthPicker: (h4) => {
      Mn.value = h4, g();
    },
    refSets: ke
  };
};
var fa = (e2) => ({
  menuAppearTop: "dp-menu-appear-top",
  menuAppearBottom: "dp-menu-appear-bottom",
  open: "dp-slide-down",
  close: "dp-slide-up",
  next: "calendar-next",
  previous: "calendar-prev",
  vNext: "dp-slide-up",
  vPrevious: "dp-slide-down",
  ...e2 != null ? e2 : {}
});
var Kr = (e2) => ({
  toggleOverlay: "Toggle overlay",
  menu: "Datepicker menu",
  input: "Datepicker input",
  calendarWrap: "Calendar wrapper",
  calendarDays: "Calendar days",
  openTimePicker: "Open time picker",
  closeTimePicker: "Close time Picker",
  incrementValue: (n) => `Increment ${n}`,
  decrementValue: (n) => `Decrement ${n}`,
  openTpOverlay: (n) => `Open ${n} overlay`,
  amPmButton: "Switch AM/PM mode",
  openYearsOverlay: "Open years overlay",
  openMonthsOverlay: "Open months overlay",
  nextMonth: "Next month",
  prevMonth: "Previous month",
  nextYear: "Next year",
  prevYear: "Previous year",
  day: () => "",
  ...e2 != null ? e2 : {}
});
var va = (e2) => e2 ? typeof e2 == "boolean" ? e2 ? 2 : 0 : +e2 >= 2 ? +e2 : 2 : 0;
var Gr = (e2) => {
  var _a2;
  const n = typeof e2 == "object" && e2, a3 = {
    static: true,
    solo: false
  };
  if (!e2)
    return { ...a3, count: va(false) };
  const t2 = n ? e2 : {}, r = n ? (_a2 = t2.count) != null ? _a2 : true : e2, l = va(r);
  return Object.assign(a3, t2, { count: l });
};
var Zr = (e2, n, a3) => e2 || (typeof a3 == "string" ? a3 : n);
var Qr = (e2) => typeof e2 == "boolean" ? e2 ? fa({}) : false : fa(e2);
var qr = (e2) => {
  const n = {
    enterSubmit: true,
    tabSubmit: true,
    openMenu: true,
    selectOnFocus: false,
    rangeSeparator: " - "
  };
  return typeof e2 == "object" ? { ...n, ...e2 != null ? e2 : {}, enabled: true } : { ...n, enabled: e2 };
};
var Xr = (e2) => ({
  months: [],
  years: [],
  times: { hours: [], minutes: [], seconds: [] },
  ...e2 != null ? e2 : {}
});
var Jr = (e2) => ({
  showSelect: true,
  showCancel: true,
  showNow: false,
  showPreview: true,
  ...e2 != null ? e2 : {}
});
var xr = (e2) => {
  const n = { input: false };
  return typeof e2 == "object" ? { ...n, ...e2 != null ? e2 : {}, enabled: true } : {
    enabled: e2,
    ...n
  };
};
var el = (e2) => ({ ...{
  allowStopPropagation: true,
  closeOnScroll: false,
  modeHeight: 255,
  allowPreventDefault: false,
  closeOnClearValue: true,
  closeOnAutoApply: true,
  noSwipe: false,
  keepActionRow: false,
  onClickOutside: void 0
}, ...e2 != null ? e2 : {} });
var Ae = (e2) => {
  const n = () => {
    const K3 = e2.enableSeconds ? ":ss" : "";
    return e2.is24 ? `HH:mm${K3}` : `hh:mm${K3} aa`;
  }, a3 = () => e2.format ? e2.format : e2.monthPicker ? "MM/yyyy" : e2.timePicker ? n() : e2.weekPicker ? "MM/dd/yyyy" : e2.yearPicker ? "yyyy" : e2.quarterPicker ? "QQQ/yyyy" : e2.enableTimePicker ? `MM/dd/yyyy, ${n()}` : "MM/dd/yyyy", t2 = (K3) => Oa(K3, e2.enableSeconds), r = () => e2.range ? e2.startTime && Array.isArray(e2.startTime) ? [t2(e2.startTime[0]), t2(e2.startTime[1])] : null : e2.startTime && !Array.isArray(e2.startTime) ? t2(e2.startTime) : null, l = computed(() => Gr(e2.multiCalendars)), c2 = computed(() => r()), b2 = computed(() => Kr(e2.ariaLabels)), k2 = computed(() => Xr(e2.filters)), P2 = computed(() => Qr(e2.transitions)), g = computed(() => Jr(e2.actionRow)), S3 = computed(
    () => Zr(e2.previewFormat, e2.format, a3())
  ), Y2 = computed(() => qr(e2.textInput)), G3 = computed(() => xr(e2.inline)), N2 = computed(() => el(e2.config));
  return {
    defaultedTransitions: P2,
    defaultedMultiCalendars: l,
    defaultedStartTime: c2,
    defaultedAriaLabels: b2,
    defaultedFilters: k2,
    defaultedActionRow: g,
    defaultedPreviewFormat: S3,
    defaultedTextInput: Y2,
    defaultedInline: G3,
    defaultedConfig: N2,
    getDefaultPattern: a3,
    getDefaultStartTime: r
  };
};
var tl = (e2, n, a3) => {
  const t2 = ref(), { defaultedTextInput: r, getDefaultPattern: l } = Ae(n), c2 = ref(""), b2 = toRef(n, "format");
  watch(t2, () => {
    e2("internal-model-change", t2.value);
  }), watch(b2, () => {
    v();
  });
  const k2 = (s3) => Ra(s3, n.timezone), P2 = (s3) => Ue(s3, n.timezone), g = (s3, I3, pe = false) => Ia(
    s3,
    n.format,
    n.formatLocale,
    r.value.rangeSeparator,
    n.modelAuto,
    I3 != null ? I3 : l(),
    pe
  ), S3 = (s3) => s3 ? n.modelType ? M3(s3) : {
    hours: getHours(s3),
    minutes: getMinutes(s3),
    seconds: n.enableSeconds ? getSeconds(s3) : 0
  } : null, Y2 = (s3) => n.modelType ? M3(s3) : { month: getMonth(s3), year: getYear(s3) }, G3 = (s3) => Array.isArray(s3) ? zt(
    () => [
      setYear(H3(), s3[0]),
      s3[1] ? setYear(H3(), s3[1]) : pt(n.partialRange)
    ],
    n.range
  ) : setYear(H3(), +s3), N2 = (s3, I3) => (typeof s3 == "string" || typeof s3 == "number") && n.modelType ? E3(s3) : I3, K3 = (s3) => Array.isArray(s3) ? [
    N2(
      s3[0],
      ot(null, +s3[0].hours, +s3[0].minutes, s3[0].seconds)
    ),
    N2(
      s3[1],
      ot(null, +s3[1].hours, +s3[1].minutes, s3[1].seconds)
    )
  ] : N2(s3, ot(null, s3.hours, s3.minutes, s3.seconds)), J2 = (s3) => Array.isArray(s3) ? n.multiDates ? s3.map((I3) => N2(I3, xe(null, +I3.month, +I3.year))) : zt(
    () => [
      N2(s3[0], xe(null, +s3[0].month, +s3[0].year)),
      N2(
        s3[1],
        s3[1] ? xe(null, +s3[1].month, +s3[1].year) : pt(n.partialRange)
      )
    ],
    n.range
  ) : N2(s3, xe(null, +s3.month, +s3.year)), h4 = (s3) => {
    if (Array.isArray(s3))
      return s3.map((I3) => E3(I3));
    throw new Error(qt.dateArr("multi-dates"));
  }, O2 = (s3) => {
    if (Array.isArray(s3))
      return [H3(s3[0]), H3(s3[1])];
    throw new Error(qt.dateArr("week-picker"));
  }, p = (s3) => n.modelAuto ? Array.isArray(s3) ? [E3(s3[0]), E3(s3[1])] : n.autoApply ? [E3(s3)] : [E3(s3), null] : Array.isArray(s3) ? zt(
    () => [
      E3(s3[0]),
      s3[1] ? E3(s3[1]) : pt(n.partialRange)
    ],
    n.range
  ) : E3(s3), m3 = () => {
    Array.isArray(t2.value) && n.range && t2.value.length === 1 && t2.value.push(pt(n.partialRange));
  }, C2 = () => {
    const s3 = t2.value;
    return [
      M3(s3[0]),
      s3[1] ? M3(s3[1]) : pt(n.partialRange)
    ];
  }, j = () => t2.value[1] ? C2() : M3(Te(t2.value[0])), re = () => (t2.value || []).map((s3) => M3(s3)), ue = () => (m3(), n.modelAuto ? j() : n.multiDates ? re() : Array.isArray(t2.value) ? zt(() => C2(), n.range) : M3(Te(t2.value))), Q3 = (s3) => !s3 || Array.isArray(s3) && !s3.length ? null : n.timePicker ? K3(Te(s3)) : n.monthPicker ? J2(Te(s3)) : n.yearPicker ? G3(Te(s3)) : n.multiDates ? h4(Te(s3)) : n.weekPicker ? O2(Te(s3)) : p(Te(s3)), y3 = (s3) => {
    const I3 = Q3(s3);
    On(Te(I3)) ? (t2.value = Te(I3), v()) : (t2.value = null, c2.value = "");
  }, w2 = () => {
    const s3 = (I3) => format(I3, r.value.format);
    return `${s3(t2.value[0])} ${r.value.rangeSeparator} ${t2.value[1] ? s3(t2.value[1]) : ""}`;
  }, L2 = () => a3.value && t2.value ? Array.isArray(t2.value) ? w2() : format(t2.value, r.value.format) : g(t2.value), x2 = () => t2.value ? n.multiDates ? t2.value.map((s3) => g(s3)).join("; ") : r.value.enabled && typeof r.value.format == "string" ? L2() : g(t2.value) : "", v = () => {
    !n.format || typeof n.format == "string" || r.value.enabled && typeof r.value.format == "string" ? c2.value = x2() : c2.value = n.format(t2.value);
  }, E3 = (s3) => {
    if (n.utc) {
      const I3 = new Date(s3);
      return n.utc === "preserve" ? new Date(I3.getTime() + I3.getTimezoneOffset() * 6e4) : I3;
    }
    return n.modelType ? n.modelType === "date" || n.modelType === "timestamp" ? P2(new Date(s3)) : n.modelType === "format" && (typeof n.format == "string" || !n.format) ? parse(s3, l(), new Date()) : P2(parse(s3, n.modelType, new Date())) : P2(new Date(s3));
  }, M3 = (s3) => s3 ? n.utc ? Vr(s3, n.utc === "preserve", n.enableSeconds) : n.modelType ? n.modelType === "timestamp" ? +k2(s3) : n.modelType === "format" && (typeof n.format == "string" || !n.format) ? g(k2(s3)) : g(k2(s3), n.modelType, true) : k2(s3) : "", A = (s3, I3 = false) => {
    if (e2("update:model-value", s3), n.emitTimezone && I3) {
      const pe = Array.isArray(s3) ? s3.map((u2) => Ue(Te(u2)), n.emitTimezone) : Ue(Te(s3), n.emitTimezone);
      e2("update:model-timezone-value", pe);
    }
  }, i2 = (s3) => Array.isArray(t2.value) ? n.multiDates ? t2.value.map((I3) => s3(I3)) : [
    s3(t2.value[0]),
    t2.value[1] ? s3(t2.value[1]) : pt(n.partialRange)
  ] : s3(Te(t2.value)), o = (s3) => A(Te(i2(s3)));
  return {
    inputValue: c2,
    internalModelValue: t2,
    checkBeforeEmit: () => t2.value ? n.range ? n.partialRange ? t2.value.length >= 1 : t2.value.length === 2 : !!t2.value : false,
    parseExternalModelValue: y3,
    formatInputValue: v,
    emitModelValue: () => (v(), n.monthPicker ? o(Y2) : n.timePicker ? o(S3) : n.yearPicker ? o(getYear) : n.weekPicker ? A(
      t2.value.map((s3) => M3(s3)),
      true
    ) : A(ue(), true))
  };
};
var nl = (e2, n) => {
  const { defaultedFilters: a3 } = Ae(e2), { validateMonthYearInRange: t2 } = Tt(e2), r = (P2, g) => {
    let S3 = P2;
    return a3.value.months.includes(getMonth(S3)) ? (S3 = g ? addMonths(P2, 1) : subMonths(P2, 1), r(S3, g)) : S3;
  }, l = (P2, g) => {
    let S3 = P2;
    return a3.value.years.includes(getYear(S3)) ? (S3 = g ? addYears(P2, 1) : subYears(P2, 1), l(S3, g)) : S3;
  }, c2 = (P2, g = false) => {
    const S3 = set$1(new Date(), { month: e2.month, year: e2.year });
    let Y2 = P2 ? addMonths(S3, 1) : subMonths(S3, 1);
    e2.disableYearSelect && (Y2 = setYear(Y2, e2.year));
    let G3 = getMonth(Y2), N2 = getYear(Y2);
    a3.value.months.includes(G3) && (Y2 = r(Y2, P2), G3 = getMonth(Y2), N2 = getYear(Y2)), a3.value.years.includes(N2) && (Y2 = l(Y2, P2), N2 = getYear(Y2)), t2(G3, N2, P2, e2.preventMinMaxNavigation) && b2(G3, N2, g);
  }, b2 = (P2, g, S3) => {
    n("update-month-year", { month: P2, year: g, fromNav: S3 });
  }, k2 = computed(() => (P2) => Na(
    set$1(new Date(), { month: e2.month, year: e2.year }),
    e2.maxDate,
    e2.minDate,
    e2.preventMinMaxNavigation,
    P2
  ));
  return { handleMonthYearChange: c2, isDisabled: k2, updateMonthYear: b2 };
};
var bt = ((e2) => (e2.center = "center", e2.left = "left", e2.right = "right", e2))(bt || {});
var Ke = ((e2) => (e2.month = "month", e2.year = "year", e2))(Ke || {});
var dt = ((e2) => (e2.top = "top", e2.bottom = "bottom", e2))(dt || {});
var gt = ((e2) => (e2.header = "header", e2.calendar = "calendar", e2.timePicker = "timePicker", e2))(gt || {});
var Xe = ((e2) => (e2.month = "month", e2.year = "year", e2.calendar = "calendar", e2.time = "time", e2.minutes = "minutes", e2.hours = "hours", e2.seconds = "seconds", e2))(Xe || {});
var al = ({
  menuRef: e2,
  menuRefInner: n,
  inputRef: a3,
  pickerWrapperRef: t2,
  inline: r,
  emit: l,
  props: c2,
  slots: b2
}) => {
  const k2 = ref({}), P2 = ref(false), g = ref({
    top: "0",
    left: "0"
  }), S3 = ref(false), Y2 = toRef(c2, "teleportCenter");
  watch(Y2, () => {
    g.value = JSON.parse(JSON.stringify({})), m3();
  });
  const G3 = (M3) => {
    if (c2.teleport) {
      const A = M3.getBoundingClientRect();
      return {
        left: A.left + window.scrollX,
        top: A.top + window.scrollY
      };
    }
    return { top: 0, left: 0 };
  }, N2 = (M3, A) => {
    g.value.left = `${M3 + A - k2.value.width}px`;
  }, K3 = (M3) => {
    g.value.left = `${M3}px`;
  }, J2 = (M3, A) => {
    c2.position === bt.left && K3(M3), c2.position === bt.right && N2(M3, A), c2.position === bt.center && (g.value.left = `${M3 + A / 2 - k2.value.width / 2}px`);
  }, h$1 = (M3) => {
    const { width: A, height: i2 } = M3.getBoundingClientRect(), { top: o, left: $ } = c2.altPosition ? c2.altPosition(M3) : G3(M3);
    return { top: +o, left: +$, width: A, height: i2 };
  }, O2 = () => {
    g.value.left = "50%", g.value.top = "50%", g.value.transform = "translate(-50%, -50%)", g.value.position = "fixed", delete g.value.opacity;
  }, p = () => {
    const M3 = Se(a3), { top: A, left: i2, transform: o } = c2.altPosition(M3);
    g.value = { top: `${A}px`, left: `${i2}px`, transform: o != null ? o : "" };
  }, m3 = (M3 = true) => {
    var A;
    if (!r.value.enabled) {
      if (Y2.value)
        return O2();
      if (c2.altPosition !== null)
        return p();
      if (M3) {
        const i2 = c2.teleport ? (A = n.value) == null ? void 0 : A.$el : e2.value;
        i2 && (k2.value = i2.getBoundingClientRect()), l("recalculate-position");
      }
      return w2();
    }
  }, C2 = ({ inputEl: M3, left: A, width: i2 }) => {
    window.screen.width > 768 && !P2.value && J2(A, i2), ue(M3);
  }, j = (M3) => {
    const { top: A, left: i2, height: o, width: $ } = h$1(M3);
    g.value.top = `${o + A + +c2.offset}px`, S3.value = false, P2.value || (g.value.left = `${i2 + $ / 2 - k2.value.width / 2}px`), C2({ inputEl: M3, left: i2, width: $ });
  }, re = (M3) => {
    const { top: A, left: i2, width: o } = h$1(M3);
    g.value.top = `${A - +c2.offset - k2.value.height}px`, S3.value = true, C2({ inputEl: M3, left: i2, width: o });
  }, ue = (M3) => {
    if (c2.autoPosition) {
      const { left: A, width: i2 } = h$1(M3), { left: o, right: $ } = k2.value;
      if (!P2.value) {
        if (Math.abs(o) !== Math.abs($)) {
          if (o <= 0)
            return P2.value = true, K3(A);
          if ($ >= document.documentElement.clientWidth)
            return P2.value = true, N2(A, i2);
        }
        return J2(A, i2);
      }
    }
  }, Q3 = () => {
    const M3 = Se(a3);
    if (M3) {
      const { height: A } = k2.value, { top: i2, height: o } = M3.getBoundingClientRect(), Z2 = window.innerHeight - i2 - o, s3 = i2;
      return A <= Z2 ? dt.bottom : A > Z2 && A <= s3 ? dt.top : Z2 >= s3 ? dt.bottom : dt.top;
    }
    return dt.bottom;
  }, y3 = (M3) => Q3() === dt.bottom ? j(M3) : re(M3), w2 = () => {
    const M3 = Se(a3);
    if (M3)
      return c2.autoPosition ? y3(M3) : j(M3);
  }, L2 = function(M3) {
    if (M3) {
      const A = M3.scrollHeight > M3.clientHeight, o = window.getComputedStyle(M3).overflowY.indexOf("hidden") !== -1;
      return A && !o;
    }
    return true;
  }, x2 = function(M3) {
    return !M3 || M3 === document.body || M3.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? window : L2(M3) ? M3 : x2(M3.parentNode);
  }, v = (M3) => {
    if (M3)
      switch (c2.position) {
        case bt.left:
          return { left: 0, transform: "translateX(0)" };
        case bt.right:
          return { left: `${M3.width}px`, transform: "translateX(-100%)" };
        default:
          return { left: `${M3.width / 2}px`, transform: "translateX(-50%)" };
      }
    return {};
  };
  return {
    openOnTop: S3,
    menuStyle: g,
    xCorrect: P2,
    setMenuPosition: m3,
    getScrollableParent: x2,
    shadowRender: (M3, A) => {
      var pe, u2, B3;
      const i2 = document.createElement("div"), o = (pe = Se(a3)) == null ? void 0 : pe.getBoundingClientRect();
      i2.setAttribute("id", "dp--temp-container");
      const $ = (u2 = t2.value) != null && u2.clientWidth ? t2.value : document.body;
      $.append(i2);
      const Z2 = document.getElementById("dp--temp-container"), s3 = v(o), I3 = h(
        M3,
        {
          ...A,
          shadow: true,
          style: { opacity: 0, position: "absolute", ...s3 }
        },
        Object.fromEntries(
          Object.keys(b2).filter((U2) => ["right-sidebar", "left-sidebar"].includes(U2)).map((U2) => [U2, b2[U2]])
        )
      );
      render(I3, Z2), k2.value = (B3 = I3.el) == null ? void 0 : B3.getBoundingClientRect(), render(null, Z2), $.removeChild(Z2);
    }
  };
};
var nt = [
  { name: "clock-icon", use: ["time", "calendar", "shared"] },
  { name: "arrow-left", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-right", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-up", use: ["time", "calendar", "month-year", "shared"] },
  { name: "arrow-down", use: ["time", "calendar", "month-year", "shared"] },
  { name: "calendar-icon", use: ["month-year", "time", "calendar", "shared", "year-mode"] },
  { name: "day", use: ["calendar", "shared"] },
  { name: "month-overlay-value", use: ["calendar", "month-year", "shared"] },
  { name: "year-overlay-value", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "year-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay-header", use: ["month-year", "shared"] },
  { name: "year-overlay-header", use: ["month-year", "shared"] },
  { name: "hours-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "hours", use: ["calendar", "time", "shared"] },
  { name: "minutes", use: ["calendar", "time", "shared"] },
  { name: "month", use: ["calendar", "month-year", "shared"] },
  { name: "year", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "action-buttons", use: ["action"] },
  { name: "action-preview", use: ["action"] },
  { name: "calendar-header", use: ["calendar", "shared"] },
  { name: "marker-tooltip", use: ["calendar", "shared"] },
  { name: "action-extra", use: ["menu"] },
  { name: "time-picker-overlay", use: ["calendar", "time", "shared"] },
  { name: "am-pm-button", use: ["calendar", "time", "shared"] },
  { name: "left-sidebar", use: ["menu"] },
  { name: "right-sidebar", use: ["menu"] },
  { name: "month-year", use: ["month-year", "shared"] },
  { name: "time-picker", use: ["menu", "shared"] },
  { name: "action-row", use: ["action"] },
  { name: "marker", use: ["calendar", "shared"] },
  { name: "quarter", use: ["shared"] }
];
var rl = [{ name: "trigger" }, { name: "input-icon" }, { name: "clear-icon" }, { name: "dp-input" }];
var ll = {
  all: () => nt,
  monthYear: () => nt.filter((e2) => e2.use.includes("month-year")),
  input: () => rl,
  timePicker: () => nt.filter((e2) => e2.use.includes("time")),
  action: () => nt.filter((e2) => e2.use.includes("action")),
  calendar: () => nt.filter((e2) => e2.use.includes("calendar")),
  menu: () => nt.filter((e2) => e2.use.includes("menu")),
  shared: () => nt.filter((e2) => e2.use.includes("shared")),
  yearMode: () => nt.filter((e2) => e2.use.includes("year-mode"))
};
var Ve = (e2, n, a3) => {
  const t2 = [];
  return ll[n]().forEach((r) => {
    e2[r.name] && t2.push(r.name);
  }), a3 != null && a3.length && a3.forEach((r) => {
    r.slot && t2.push(r.slot);
  }), t2;
};
var Et = (e2) => {
  const n = computed(() => (t2) => e2.value ? t2 ? e2.value.open : e2.value.close : ""), a3 = computed(() => (t2) => e2.value ? t2 ? e2.value.menuAppearTop : e2.value.menuAppearBottom : "");
  return { transitionName: n, showTransition: !!e2.value, menuTransition: a3 };
};
var Ft = (e2, n) => {
  const a3 = H3(Ue(new Date(), e2.timezone)), t2 = ref([{ month: getMonth(a3), year: getYear(a3) }]), r = reactive({
    hours: e2.range ? [getHours(a3), getHours(a3)] : getHours(a3),
    minutes: e2.range ? [getMinutes(a3), getMinutes(a3)] : getMinutes(a3),
    seconds: e2.range ? [0, 0] : 0
  }), l = computed({
    get: () => e2.internalModelValue,
    set: (k2) => {
      !e2.readonly && !e2.disabled && n("update:internal-model-value", k2);
    }
  }), c2 = computed(
    () => (k2) => t2.value[k2] ? t2.value[k2].month : 0
  ), b2 = computed(
    () => (k2) => t2.value[k2] ? t2.value[k2].year : 0
  );
  return {
    calendars: t2,
    time: r,
    modelValue: l,
    month: c2,
    year: b2
  };
};
var ol = (e2, n) => {
  const { defaultedMultiCalendars: a3 } = Ae(n), { isDisabled: t2, matchDate: r } = Tt(n), l = ref(null), c2 = ref(H3(Ue(new Date(), n.timezone))), b2 = (o) => {
    !o.current && n.hideOffsetDates || (l.value = o.value);
  }, k2 = () => {
    l.value = null;
  }, P2 = (o) => Array.isArray(e2.value) && n.range && e2.value[0] && l.value ? o ? Ie(l.value, e2.value[0]) : Re(l.value, e2.value[0]) : true, g = (o, $) => {
    const Z2 = () => e2.value ? $ ? e2.value[0] || null : e2.value[1] : null, s3 = e2.value && Array.isArray(e2.value) ? Z2() : null;
    return ye(H3(o.value), s3);
  }, S3 = (o) => {
    var _a2;
    const $ = Array.isArray(e2.value) ? e2.value[0] : null;
    return o ? !Re((_a2 = l.value) != null ? _a2 : null, $) : true;
  }, Y2 = (o, $ = true) => (n.range || n.weekPicker) && Array.isArray(e2.value) && e2.value.length === 2 ? n.hideOffsetDates && !o.current ? false : ye(H3(o.value), e2.value[$ ? 0 : 1]) : n.range ? g(o, $) && S3($) || ye(o.value, Array.isArray(e2.value) ? e2.value[0] : null) && P2($) : false, G3 = (o, $, Z2) => Array.isArray(e2.value) && e2.value[0] && e2.value.length === 1 ? o ? false : Z2 ? Ie(e2.value[0], $.value) : Re(e2.value[0], $.value) : false, N2 = (o) => !e2.value || n.hideOffsetDates && !o.current ? false : n.range ? n.modelAuto && Array.isArray(e2.value) ? ye(o.value, e2.value[0] ? e2.value[0] : c2.value) : false : n.multiDates && Array.isArray(e2.value) ? e2.value.some(($) => ye($, o.value)) : ye(o.value, e2.value ? e2.value : c2.value), K3 = (o) => {
    if (n.autoRange || n.weekPicker) {
      if (l.value) {
        if (n.hideOffsetDates && !o.current)
          return false;
        const $ = addDays(l.value, +n.autoRange), Z2 = Zt(H3(l.value), n.timezone, n.weekStart);
        return n.weekPicker ? ye(Z2[1], H3(o.value)) : ye($, H3(o.value));
      }
      return false;
    }
    return false;
  }, J2 = (o) => {
    if (n.autoRange || n.weekPicker) {
      if (l.value) {
        const $ = addDays(l.value, +n.autoRange);
        if (n.hideOffsetDates && !o.current)
          return false;
        const Z2 = Zt(H3(l.value), n.timezone, n.weekStart);
        return n.weekPicker ? Ie(o.value, Z2[0]) && Re(o.value, Z2[1]) : Ie(o.value, l.value) && Re(o.value, $);
      }
      return false;
    }
    return false;
  }, h4 = (o) => {
    if (n.autoRange || n.weekPicker) {
      if (l.value) {
        if (n.hideOffsetDates && !o.current)
          return false;
        const $ = Zt(H3(l.value), n.timezone, n.weekStart);
        return n.weekPicker ? ye($[0], o.value) : ye(l.value, o.value);
      }
      return false;
    }
    return false;
  }, O2 = (o) => Xt(e2.value, l.value, o.value), p = () => n.modelAuto && Array.isArray(n.internalModelValue) ? !!n.internalModelValue[0] : false, m3 = () => n.modelAuto ? Pa(n.internalModelValue) : true, C2 = (o) => {
    if (Array.isArray(e2.value) && e2.value.length || n.weekPicker)
      return false;
    const $ = n.range ? !Y2(o) && !Y2(o, false) : true;
    return !t2(o.value) && !N2(o) && !(!o.current && n.hideOffsetDates) && $;
  }, j = (o) => n.range ? n.modelAuto ? p() && N2(o) : false : N2(o), re = (o) => {
    var $;
    return n.highlight ? r(
      o.value,
      ($ = n.arrMapValues) != null && $.highlightedDates ? n.arrMapValues.highlightedDates : n.highlight
    ) : false;
  }, ue = (o) => t2(o.value) && n.highlightDisabledDays === false, Q3 = (o) => {
    var $;
    return ($ = n.highlightWeekDays) == null ? void 0 : $.includes(o.value.getDay());
  }, y3 = (o) => (n.range || n.weekPicker) && (!(a3.value.count > 0) || o.current) && m3() && !(!o.current && n.hideOffsetDates) && !N2(o) ? O2(o) : false, w2 = (o) => {
    const { isRangeStart: $, isRangeEnd: Z2 } = v(o), s3 = n.range ? $ || Z2 : false;
    return {
      dp__cell_offset: !o.current,
      dp__pointer: !n.disabled && !(!o.current && n.hideOffsetDates) && !t2(o.value),
      dp__cell_disabled: t2(o.value),
      dp__cell_highlight: !ue(o) && (re(o) || Q3(o)) && !j(o) && !s3,
      dp__cell_highlight_active: !ue(o) && (re(o) || Q3(o)) && j(o),
      dp__today: !n.noToday && ye(o.value, c2.value) && o.current
    };
  }, L2 = (o) => ({
    dp__active_date: j(o),
    dp__date_hover: C2(o)
  }), x2 = (o) => ({
    ...E3(o),
    ...M3(o),
    dp__range_between_week: y3(o) && n.weekPicker
  }), v = (o) => {
    const $ = a3.value.count > 0 ? o.current && Y2(o) && m3() : Y2(o) && m3(), Z2 = a3.value.count > 0 ? o.current && Y2(o, false) && m3() : Y2(o, false) && m3();
    return { isRangeStart: $, isRangeEnd: Z2 };
  }, E3 = (o) => {
    const { isRangeStart: $, isRangeEnd: Z2 } = v(o);
    return {
      dp__range_start: $,
      dp__range_end: Z2,
      dp__range_between: y3(o) && !n.weekPicker,
      dp__date_hover_start: G3(C2(o), o, true),
      dp__date_hover_end: G3(C2(o), o, false)
    };
  }, M3 = (o) => ({
    ...E3(o),
    dp__cell_auto_range: J2(o),
    dp__cell_auto_range_start: h4(o),
    dp__cell_auto_range_end: K3(o)
  }), A = (o) => n.range ? n.autoRange ? M3(o) : n.modelAuto ? { ...L2(o), ...E3(o) } : E3(o) : n.weekPicker ? x2(o) : L2(o);
  return {
    setHoverDate: b2,
    clearHoverDate: k2,
    getDayClassData: (o) => n.hideOffsetDates && !o.current ? {} : {
      ...w2(o),
      ...A(o),
      [n.dayClass ? n.dayClass(o.value) : ""]: true,
      [n.calendarCellClassName]: !!n.calendarCellClassName
    }
  };
};
var Tt = (e2) => {
  const { defaultedFilters: n } = Ae(e2), a3 = () => {
    if (e2.timezone)
      return e2.timezone;
    if (e2.utc)
      return "UTC";
  }, t2 = (y3) => {
    const w2 = We(r(H3(y3))).toISOString(), [L2] = w2.split("T");
    return L2;
  }, r = (y3) => e2.utc === "preserve" ? Ra(y3, a3()) : Ue(y3, a3()), l = (y3) => {
    var $;
    const w2 = e2.maxDate ? Ie(r(y3), r(H3(e2.maxDate))) : false, L2 = e2.minDate ? Re(r(y3), r(H3(e2.minDate))) : false, x2 = P2(
      r(y3),
      ($ = e2.arrMapValues) != null && $.disabledDates ? e2.arrMapValues.disabledDates : e2.disabledDates
    ), E3 = n.value.months.map((Z2) => +Z2).includes(getMonth(y3)), M3 = e2.disabledWeekDays.length ? e2.disabledWeekDays.some((Z2) => +Z2 === getDay(y3)) : false, A = S3(y3), i2 = getYear(y3), o = i2 < +e2.yearRange[0] || i2 > +e2.yearRange[1];
    return !(w2 || L2 || x2 || E3 || o || M3 || A);
  }, c2 = (y3, w2) => Re(...at(e2.minDate, y3, w2)) || ye(...at(e2.minDate, y3, w2)), b2 = (y3, w2) => Ie(...at(e2.maxDate, y3, w2)) || ye(...at(e2.maxDate, y3, w2)), k2 = (y3, w2, L2) => {
    let x2 = false;
    return e2.maxDate && L2 && b2(y3, w2) && (x2 = true), e2.minDate && !L2 && c2(y3, w2) && (x2 = true), x2;
  }, P2 = (y3, w2) => y3 ? w2 instanceof Map ? !!w2.get(t2(y3)) : Array.isArray(w2) ? w2.some((L2) => ye(r(H3(L2)), r(y3))) : w2 ? w2(H3(JSON.parse(JSON.stringify(y3)))) : false : true, g = (y3, w2, L2, x2) => {
    let v = false;
    return x2 ? e2.minDate && e2.maxDate ? v = k2(y3, w2, L2) : (e2.minDate && c2(y3, w2) || e2.maxDate && b2(y3, w2)) && (v = true) : v = true, v;
  }, S3 = (y3) => {
    var w2, L2, x2, v, E3;
    return Array.isArray(e2.allowedDates) && !((w2 = e2.allowedDates) != null && w2.length) ? true : (L2 = e2.arrMapValues) != null && L2.allowedDates ? !P2(y3, (x2 = e2.arrMapValues) == null ? void 0 : x2.allowedDates) : (v = e2.allowedDates) != null && v.length ? !((E3 = e2.allowedDates) != null && E3.some((M3) => ye(r(H3(M3)), r(y3)))) : false;
  }, Y2 = (y3) => !l(y3), G3 = (y3) => e2.noDisabledRange ? !eachDayOfInterval({ start: y3[0], end: y3[1] }).some((L2) => Y2(L2)) : true, N2 = (y3, w2, L2 = 0) => {
    if (Array.isArray(w2) && w2[L2]) {
      const x2 = differenceInCalendarDays(y3, w2[L2]), v = Ya(w2[L2], y3), E3 = v.length === 1 ? 0 : v.filter((A) => Y2(A)).length, M3 = Math.abs(x2) - E3;
      if (e2.minRange && e2.maxRange)
        return M3 >= +e2.minRange && M3 <= +e2.maxRange;
      if (e2.minRange)
        return M3 >= +e2.minRange;
      if (e2.maxRange)
        return M3 <= +e2.maxRange;
    }
    return true;
  }, K3 = (y3) => new Map(y3.map((w2) => [t2(w2), true])), J2 = (y3) => Array.isArray(y3) && y3.length > 0, h4 = () => {
    const y3 = {
      disabledDates: null,
      allowedDates: null,
      highlightedDates: null
    };
    return J2(e2.allowedDates) && (y3.allowedDates = K3(e2.allowedDates)), J2(e2.highlight) && (y3.highlightedDates = K3(e2.highlight)), J2(e2.disabledDates) && (y3.disabledDates = K3(e2.disabledDates)), y3;
  }, O2 = () => !e2.enableTimePicker || e2.monthPicker || e2.yearPicker || e2.ignoreTimeValidation, p = (y3) => Array.isArray(y3) ? [y3[0] ? kn(y3[0]) : null, y3[1] ? kn(y3[1]) : null] : kn(y3), m3 = (y3, w2, L2) => y3.find(
    (x2) => +x2.hours === getHours(w2) && x2.minutes === "*" ? true : +x2.minutes === getMinutes(w2) && +x2.hours === getHours(w2)
  ) && L2, C2 = (y3, w2, L2) => {
    const [x2, v] = y3, [E3, M3] = w2;
    return !m3(x2, E3, L2) && !m3(v, M3, L2) && L2;
  }, j = (y3, w2) => {
    const L2 = Array.isArray(w2) ? w2 : [w2];
    return Array.isArray(e2.disabledTimes) ? Array.isArray(e2.disabledTimes[0]) ? C2(e2.disabledTimes, L2, y3) : !L2.some((x2) => m3(e2.disabledTimes, x2, y3)) : y3;
  }, re = (y3, w2) => {
    const L2 = Array.isArray(w2) ? [mt(w2[0]), w2[1] ? mt(w2[1]) : void 0] : mt(w2), x2 = !e2.disabledTimes(L2);
    return y3 && x2;
  }, ue = (y3, w2) => e2.disabledTimes ? Array.isArray(e2.disabledTimes) ? j(w2, y3) : re(w2, y3) : w2;
  return {
    isDisabled: Y2,
    validateDate: l,
    validateMonthYearInRange: g,
    isDateRangeAllowed: G3,
    checkMinMaxRange: N2,
    matchDate: P2,
    mapDatesArrToMap: h4,
    isValidTime: (y3) => {
      let w2 = true;
      if (!y3 || O2())
        return true;
      const L2 = !e2.minDate && !e2.maxDate ? p(y3) : y3;
      return (e2.maxTime || e2.maxDate) && (w2 = ca(e2.maxTime, e2.maxDate, "max", Te(L2), w2)), (e2.minTime || e2.minDate) && (w2 = ca(e2.minTime, e2.minDate, "min", Te(L2), w2)), ue(y3, w2);
    }
  };
};
var Jt = () => {
  const e2 = computed(() => (t2, r) => t2 == null ? void 0 : t2.includes(r)), n = computed(() => (t2, r) => t2.count ? t2.solo ? true : r === 0 : true), a3 = computed(() => (t2, r) => t2.count ? t2.solo ? true : r === t2.count - 1 : true);
  return { hideNavigationButtons: e2, showLeftIcon: n, showRightIcon: a3 };
};
var sl = (e2, n, a3) => {
  const t2 = ref(0), r = reactive({
    [gt.timePicker]: !e2.enableTimePicker || e2.timePicker || e2.monthPicker,
    [gt.calendar]: false,
    [gt.header]: false
  }), l = (g) => {
    var S3;
    (S3 = e2.flow) != null && S3.length && (r[g] = true, Object.keys(r).filter((Y2) => !r[Y2]).length || P2());
  }, c2 = () => {
    var g;
    (g = e2.flow) != null && g.length && t2.value !== -1 && (t2.value += 1, n("flow-step", t2.value), P2());
  }, b2 = () => {
    t2.value = -1;
  }, k2 = (g, S3, ...Y2) => {
    e2.flow[t2.value] === g && a3.value && a3.value[S3](...Y2);
  }, P2 = () => {
    k2(Xe.month, "toggleMonthPicker", true), k2(Xe.year, "toggleYearPicker", true), k2(Xe.calendar, "toggleTimePicker", false, true), k2(Xe.time, "toggleTimePicker", true, true);
    const g = e2.flow[t2.value];
    (g === Xe.hours || g === Xe.minutes || g === Xe.seconds) && k2(g, "toggleTimePicker", true, true, g);
  };
  return { childMount: l, updateFlowStep: c2, resetFlow: b2, flowStep: t2 };
};
var xt = {
  multiCalendars: { type: [Boolean, Number, String, Object], default: void 0 },
  modelValue: { type: [String, Date, Array, Object, Number], default: null },
  modelType: { type: String, default: null },
  position: { type: String, default: "center" },
  dark: { type: Boolean, default: false },
  format: {
    type: [String, Function],
    default: () => null
  },
  autoPosition: { type: Boolean, default: true },
  altPosition: { type: Function, default: null },
  transitions: { type: [Boolean, Object], default: true },
  formatLocale: { type: Object, default: null },
  utc: { type: [Boolean, String], default: false },
  ariaLabels: { type: Object, default: () => ({}) },
  offset: { type: [Number, String], default: 10 },
  hideNavigation: { type: Array, default: () => [] },
  timezone: { type: String, default: null },
  emitTimezone: { type: String, default: null },
  vertical: { type: Boolean, default: false },
  disableMonthYearSelect: { type: Boolean, default: false },
  disableYearSelect: { type: Boolean, default: false },
  menuClassName: { type: String, default: null },
  dayClass: { type: Function, default: null },
  yearRange: { type: Array, default: () => [1900, 2100] },
  calendarCellClassName: { type: String, default: null },
  enableTimePicker: { type: Boolean, default: true },
  autoApply: { type: Boolean, default: false },
  disabledDates: { type: [Array, Function], default: () => [] },
  monthNameFormat: { type: String, default: "short" },
  startDate: { type: [Date, String], default: null },
  startTime: { type: [Object, Array], default: null },
  hideOffsetDates: { type: Boolean, default: false },
  autoRange: { type: [Number, String], default: null },
  noToday: { type: Boolean, default: false },
  disabledWeekDays: { type: Array, default: () => [] },
  allowedDates: { type: Array, default: null },
  nowButtonLabel: { type: String, default: "Now" },
  markers: { type: Array, default: () => [] },
  escClose: { type: Boolean, default: true },
  spaceConfirm: { type: Boolean, default: true },
  monthChangeOnArrows: { type: Boolean, default: true },
  presetDates: { type: Array, default: () => [] },
  flow: { type: Array, default: () => [] },
  partialFlow: { type: Boolean, default: false },
  preventMinMaxNavigation: { type: Boolean, default: false },
  minRange: { type: [Number, String], default: null },
  maxRange: { type: [Number, String], default: null },
  multiDatesLimit: { type: [Number, String], default: null },
  reverseYears: { type: Boolean, default: false },
  weekPicker: { type: Boolean, default: false },
  filters: { type: Object, default: () => ({}) },
  arrowNavigation: { type: Boolean, default: false },
  disableTimeRangeValidation: { type: Boolean, default: false },
  highlight: {
    type: [Array, Function],
    default: null
  },
  highlightWeekDays: {
    type: Array,
    default: null
  },
  highlightDisabledDays: { type: Boolean, default: false },
  teleport: { type: [String, Boolean], default: null },
  teleportCenter: { type: Boolean, default: false },
  locale: { type: String, default: "en-Us" },
  weekNumName: { type: String, default: "W" },
  weekStart: { type: [Number, String], default: 1 },
  weekNumbers: {
    type: [String, Function],
    default: null
  },
  calendarClassName: { type: String, default: null },
  monthChangeOnScroll: { type: [Boolean, String], default: true },
  dayNames: {
    type: [Function, Array],
    default: null
  },
  monthPicker: { type: Boolean, default: false },
  customProps: { type: Object, default: null },
  yearPicker: { type: Boolean, default: false },
  modelAuto: { type: Boolean, default: false },
  selectText: { type: String, default: "Select" },
  cancelText: { type: String, default: "Cancel" },
  previewFormat: {
    type: [String, Function],
    default: () => ""
  },
  multiDates: { type: Boolean, default: false },
  partialRange: { type: Boolean, default: true },
  ignoreTimeValidation: { type: Boolean, default: false },
  minDate: { type: [Date, String], default: null },
  maxDate: { type: [Date, String], default: null },
  minTime: { type: Object, default: null },
  maxTime: { type: Object, default: null },
  name: { type: String, default: null },
  placeholder: { type: String, default: "" },
  hideInputIcon: { type: Boolean, default: false },
  clearable: { type: Boolean, default: true },
  state: { type: Boolean, default: null },
  required: { type: Boolean, default: false },
  autocomplete: { type: String, default: "off" },
  inputClassName: { type: String, default: null },
  fixedStart: { type: Boolean, default: false },
  fixedEnd: { type: Boolean, default: false },
  timePicker: { type: Boolean, default: false },
  enableSeconds: { type: Boolean, default: false },
  is24: { type: Boolean, default: true },
  noHoursOverlay: { type: Boolean, default: false },
  noMinutesOverlay: { type: Boolean, default: false },
  noSecondsOverlay: { type: Boolean, default: false },
  hoursGridIncrement: { type: [String, Number], default: 1 },
  minutesGridIncrement: { type: [String, Number], default: 5 },
  secondsGridIncrement: { type: [String, Number], default: 5 },
  hoursIncrement: { type: [Number, String], default: 1 },
  minutesIncrement: { type: [Number, String], default: 1 },
  secondsIncrement: { type: [Number, String], default: 1 },
  range: { type: Boolean, default: false },
  uid: { type: String, default: null },
  disabled: { type: Boolean, default: false },
  readonly: { type: Boolean, default: false },
  inline: { type: [Boolean, Object], default: false },
  textInput: { type: [Boolean, Object], default: false },
  noDisabledRange: { type: Boolean, default: false },
  sixWeeks: { type: [Boolean, String], default: false },
  actionRow: { type: Object, default: () => ({}) },
  focusStartDate: { type: Boolean, default: false },
  disabledTimes: { type: [Function, Array], default: void 0 },
  showLastInRange: { type: Boolean, default: true },
  timePickerInline: { type: Boolean, default: false },
  calendar: { type: Function, default: null },
  config: { type: Object, default: void 0 },
  quarterPicker: { type: Boolean, default: false }
};
var qe = {
  ...xt,
  shadow: { type: Boolean, default: false },
  flowStep: { type: Number, default: 0 },
  internalModelValue: { type: [Date, Array], default: null },
  arrMapValues: { type: Object, default: () => ({}) }
};
var il = {
  key: 1,
  class: "dp__input_wrap"
};
var ul = ["id", "name", "inputmode", "placeholder", "disabled", "readonly", "required", "value", "autocomplete", "aria-label", "aria-disabled", "aria-invalid", "onKeydown"];
var dl = {
  key: 2,
  class: "dp__clear_icon"
};
var cl = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerInput",
  props: {
    isMenuOpen: { type: Boolean, default: false },
    inputValue: { type: String, default: "" },
    ...xt
  },
  emits: [
    "clear",
    "open",
    "update:input-value",
    "set-input-date",
    "close",
    "select-date",
    "set-empty-date",
    "toggle",
    "focus-prev",
    "focus",
    "blur",
    "real-blur"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, {
      defaultedTextInput: r,
      defaultedAriaLabels: l,
      defaultedInline: c2,
      defaultedConfig: b2,
      getDefaultPattern: k2,
      getDefaultStartTime: P2
    } = Ae(t2), g = ref(), S3 = ref(null), Y2 = ref(false), G3 = ref(false), N2 = computed(
      () => ({
        dp__pointer: !t2.disabled && !t2.readonly && !r.value.enabled,
        dp__disabled: t2.disabled,
        dp__input_readonly: !r.value.enabled,
        dp__input: true,
        dp__input_icon_pad: !t2.hideInputIcon,
        dp__input_valid: !!t2.state,
        dp__input_invalid: t2.state === false,
        dp__input_focus: Y2.value || t2.isMenuOpen,
        dp__input_reg: !r.value.enabled,
        [t2.inputClassName]: !!t2.inputClassName
      })
    ), K3 = () => {
      a3("set-input-date", null), t2.autoApply && (a3("set-empty-date"), g.value = null);
    }, J2 = (v) => {
      var _a2;
      const E3 = P2();
      return Hr(
        v,
        (_a2 = r.value.format) != null ? _a2 : k2(),
        E3 != null ? E3 : Oa({}, t2.enableSeconds),
        t2.inputValue,
        G3.value
      );
    }, h4 = (v) => {
      const { rangeSeparator: E3 } = r.value, [M3, A] = v.split(`${E3}`);
      if (M3) {
        const i2 = J2(M3.trim()), o = A ? J2(A.trim()) : null, $ = i2 && o ? [i2, o] : [i2];
        g.value = i2 ? $ : null;
      }
    }, O2 = () => {
      G3.value = true;
    }, p = (v) => {
      if (t2.range)
        h4(v);
      else if (t2.multiDates) {
        const E3 = v.split(";");
        g.value = E3.map((M3) => J2(M3.trim())).filter((M3) => M3);
      } else
        g.value = J2(v);
    }, m3 = (v) => {
      var M3;
      const E3 = typeof v == "string" ? v : (M3 = v.target) == null ? void 0 : M3.value;
      E3 !== "" ? (r.value.openMenu && !t2.isMenuOpen && a3("open"), p(E3), a3("set-input-date", g.value)) : K3(), G3.value = false, a3("update:input-value", E3);
    }, C2 = (v) => {
      r.value.enabled ? (p(v.target.value), r.value.enterSubmit && On(g.value) && t2.inputValue !== "" ? (a3("set-input-date", g.value, true), g.value = null) : r.value.enterSubmit && t2.inputValue === "" && (g.value = null, a3("clear"))) : ue(v);
    }, j = (v) => {
      r.value.enabled && r.value.tabSubmit && p(v.target.value), r.value.tabSubmit && On(g.value) && t2.inputValue !== "" ? (a3("set-input-date", g.value, true), g.value = null) : r.value.tabSubmit && t2.inputValue === "" && (g.value = null, a3("clear"));
    }, re = () => {
      var v;
      Y2.value = true, a3("focus"), r.value.enabled && r.value.selectOnFocus && ((v = S3.value) == null || v.select());
    }, ue = (v) => {
      v.preventDefault(), lt(v, b2.value, true), r.value.enabled && r.value.openMenu && !c2.value.input && !t2.isMenuOpen ? a3("open") : r.value.enabled || a3("toggle");
    }, Q3 = () => {
      a3("real-blur"), Y2.value = false, (!t2.isMenuOpen || c2.value.enabled && c2.value.input) && a3("blur"), t2.autoApply && r.value.enabled && g.value && !t2.isMenuOpen && (a3("set-input-date", g.value), a3("select-date"), g.value = null);
    }, y3 = (v) => {
      lt(v, b2.value, true), a3("clear");
    }, w2 = (v) => {
      if (!r.value.enabled) {
        if (v.code === "Tab")
          return;
        v.preventDefault();
      }
    };
    return n({
      focusInput: () => {
        var v;
        (v = S3.value) == null || v.focus({ preventScroll: true });
      },
      setParsedDate: (v) => {
        g.value = v;
      }
    }), (v, E3) => {
      var M3;
      return openBlock(), createElementBlock("div", { onClick: ue }, [
        v.$slots.trigger && !v.$slots["dp-input"] && !unref(c2).enabled ? renderSlot(v.$slots, "trigger", { key: 0 }) : createCommentVNode("", true),
        !v.$slots.trigger && (!unref(c2).enabled || unref(c2).input) ? (openBlock(), createElementBlock("div", il, [
          v.$slots["dp-input"] && !v.$slots.trigger && !unref(c2).enabled ? renderSlot(v.$slots, "dp-input", {
            key: 0,
            value: e2.inputValue,
            isMenuOpen: e2.isMenuOpen,
            onInput: m3,
            onEnter: C2,
            onTab: j,
            onClear: y3,
            onBlur: Q3,
            onKeypress: w2,
            onPaste: O2
          }) : createCommentVNode("", true),
          v.$slots["dp-input"] ? createCommentVNode("", true) : (openBlock(), createElementBlock("input", {
            key: 1,
            ref_key: "inputRef",
            ref: S3,
            id: v.uid ? `dp-input-${v.uid}` : void 0,
            name: v.name,
            class: normalizeClass(N2.value),
            inputmode: unref(r).enabled ? "text" : "none",
            placeholder: v.placeholder,
            disabled: v.disabled,
            readonly: v.readonly,
            required: v.required,
            value: e2.inputValue,
            autocomplete: v.autocomplete,
            "aria-label": (M3 = unref(l)) == null ? void 0 : M3.input,
            "aria-disabled": v.disabled || void 0,
            "aria-invalid": v.state === false ? true : void 0,
            onInput: m3,
            onKeydown: [
              withKeys(C2, ["enter"]),
              withKeys(j, ["tab"]),
              w2
            ],
            onBlur: Q3,
            onFocus: re,
            onKeypress: w2,
            onPaste: O2
          }, null, 42, ul)),
          createBaseVNode("div", {
            onClick: E3[2] || (E3[2] = (A) => a3("toggle"))
          }, [
            v.$slots["input-icon"] && !v.hideInputIcon ? (openBlock(), createElementBlock("span", {
              key: 0,
              class: "dp__input_icon",
              onClick: E3[0] || (E3[0] = (A) => a3("toggle"))
            }, [
              renderSlot(v.$slots, "input-icon")
            ])) : createCommentVNode("", true),
            !v.$slots["input-icon"] && !v.hideInputIcon && !v.$slots["dp-input"] ? (openBlock(), createBlock(unref(Bt), {
              key: 1,
              onClick: E3[1] || (E3[1] = (A) => a3("toggle")),
              class: "dp__input_icon dp__input_icons"
            })) : createCommentVNode("", true)
          ]),
          v.$slots["clear-icon"] && e2.inputValue && v.clearable && !v.disabled && !v.readonly ? (openBlock(), createElementBlock("span", dl, [
            renderSlot(v.$slots, "clear-icon", { clear: y3 })
          ])) : createCommentVNode("", true),
          v.clearable && !v.$slots["clear-icon"] && e2.inputValue && !v.disabled && !v.readonly ? (openBlock(), createBlock(unref(Ma), {
            key: 3,
            class: "dp__clear_icon dp__input_icons",
            onClick: E3[3] || (E3[3] = withModifiers((A) => y3(A), ["prevent"]))
          })) : createCommentVNode("", true)
        ])) : createCommentVNode("", true)
      ]);
    };
  }
});
var fl = ["title"];
var vl = { class: "dp__action_buttons" };
var ml = ["onKeydown", "disabled"];
var gl = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "ActionRow",
  props: {
    menuMount: { type: Boolean, default: false },
    calendarWidth: { type: Number, default: 0 },
    ...qe
  },
  emits: ["close-picker", "select-date", "select-now", "invalid-select"],
  setup(e2, { emit: n }) {
    const a3 = e2, {
      defaultedActionRow: t2,
      defaultedPreviewFormat: r,
      defaultedMultiCalendars: l,
      defaultedTextInput: c2,
      defaultedInline: b2,
      getDefaultPattern: k2
    } = Ae(a3), { isValidTime: P2 } = Tt(a3), { buildMatrix: g } = it(), S3 = ref(null), Y2 = ref(null);
    onMounted(() => {
      a3.arrowNavigation && g([Se(S3), Se(Y2)], "actionRow");
    });
    const G3 = computed(() => a3.range && !a3.partialRange && a3.internalModelValue ? a3.internalModelValue.length === 2 : true), N2 = computed(() => !K3.value || !J2.value || !G3.value), K3 = computed(() => !a3.enableTimePicker || a3.ignoreTimeValidation ? true : P2(a3.internalModelValue)), J2 = computed(() => a3.monthPicker ? a3.range && Array.isArray(a3.internalModelValue) ? !a3.internalModelValue.filter((y3) => !re(y3)).length : re(a3.internalModelValue) : true), h4 = () => {
      const Q3 = r.value;
      return a3.timePicker || a3.monthPicker, Q3(Te(a3.internalModelValue));
    }, O2 = () => {
      const Q3 = a3.internalModelValue;
      return l.value.count > 0 ? `${p(Q3[0])} - ${p(Q3[1])}` : [p(Q3[0]), p(Q3[1])];
    }, p = (Q3) => Ia(
      Q3,
      r.value,
      a3.formatLocale,
      c2.value.rangeSeparator,
      a3.modelAuto,
      k2()
    ), m3 = computed(() => !a3.internalModelValue || !a3.menuMount ? "" : typeof r.value == "string" ? Array.isArray(a3.internalModelValue) ? a3.internalModelValue.length === 2 && a3.internalModelValue[1] ? O2() : a3.multiDates ? a3.internalModelValue.map((Q3) => `${p(Q3)}`) : a3.modelAuto ? `${p(a3.internalModelValue[0])}` : `${p(a3.internalModelValue[0])} -` : p(a3.internalModelValue) : h4()), C2 = () => a3.multiDates ? "; " : " - ", j = computed(
      () => Array.isArray(m3.value) ? m3.value.join(C2()) : m3.value
    ), re = (Q3) => {
      if (!a3.monthPicker)
        return true;
      let y3 = true;
      const w2 = H3(Ge(Q3));
      if (a3.minDate && a3.maxDate) {
        const L2 = H3(Ge(a3.minDate)), x2 = H3(Ge(a3.maxDate));
        return Ie(w2, L2) && Re(w2, x2) || ye(w2, L2) || ye(w2, x2);
      }
      if (a3.minDate) {
        const L2 = H3(Ge(a3.minDate));
        y3 = Ie(w2, L2) || ye(w2, L2);
      }
      if (a3.maxDate) {
        const L2 = H3(Ge(a3.maxDate));
        y3 = Re(w2, L2) || ye(w2, L2);
      }
      return y3;
    }, ue = () => {
      K3.value && J2.value && G3.value ? n("select-date") : n("invalid-select");
    };
    return (Q3, y3) => (openBlock(), createElementBlock("div", {
      class: "dp__action_row",
      style: normalizeStyle(e2.calendarWidth ? { width: `${e2.calendarWidth}px` } : {})
    }, [
      Q3.$slots["action-row"] ? renderSlot(Q3.$slots, "action-row", normalizeProps(mergeProps({ key: 0 }, {
        internalModelValue: Q3.internalModelValue,
        disabled: N2.value,
        selectDate: () => Q3.$emit("select-date"),
        closePicker: () => Q3.$emit("close-picker")
      }))) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
        unref(t2).showPreview ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: "dp__selection_preview",
          title: j.value
        }, [
          Q3.$slots["action-preview"] ? renderSlot(Q3.$slots, "action-preview", {
            key: 0,
            value: Q3.internalModelValue
          }) : createCommentVNode("", true),
          Q3.$slots["action-preview"] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
            createTextVNode(toDisplayString(j.value), 1)
          ], 64))
        ], 8, fl)) : createCommentVNode("", true),
        createBaseVNode("div", vl, [
          Q3.$slots["action-buttons"] ? renderSlot(Q3.$slots, "action-buttons", {
            key: 0,
            value: Q3.internalModelValue
          }) : createCommentVNode("", true),
          Q3.$slots["action-buttons"] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
            !unref(b2).enabled && unref(t2).showCancel ? (openBlock(), createElementBlock("button", {
              key: 0,
              type: "button",
              ref_key: "cancelButtonRef",
              ref: S3,
              class: "dp__action_button dp__action_cancel",
              onClick: y3[0] || (y3[0] = (w2) => Q3.$emit("close-picker")),
              onKeydown: [
                y3[1] || (y3[1] = withKeys((w2) => Q3.$emit("close-picker"), ["enter"])),
                y3[2] || (y3[2] = withKeys((w2) => Q3.$emit("close-picker"), ["space"]))
              ]
            }, toDisplayString(Q3.cancelText), 545)) : createCommentVNode("", true),
            unref(t2).showNow ? (openBlock(), createElementBlock("button", {
              key: 1,
              type: "button",
              ref_key: "cancelButtonRef",
              ref: S3,
              class: "dp__action_button dp__action_cancel",
              onClick: y3[3] || (y3[3] = (w2) => Q3.$emit("select-now")),
              onKeydown: [
                y3[4] || (y3[4] = withKeys((w2) => Q3.$emit("select-now"), ["enter"])),
                y3[5] || (y3[5] = withKeys((w2) => Q3.$emit("select-now"), ["space"]))
              ]
            }, toDisplayString(Q3.nowButtonLabel), 545)) : createCommentVNode("", true),
            unref(t2).showSelect ? (openBlock(), createElementBlock("button", {
              key: 2,
              type: "button",
              class: "dp__action_button dp__action_select",
              onKeydown: [
                withKeys(ue, ["enter"]),
                withKeys(ue, ["space"])
              ],
              onClick: ue,
              disabled: N2.value,
              ref_key: "selectButtonRef",
              ref: Y2
            }, toDisplayString(Q3.selectText), 41, ml)) : createCommentVNode("", true)
          ], 64))
        ])
      ], 64))
    ], 4));
  }
});
var yl = ["onKeydown"];
var hl = { class: "dp__selection_grid_header" };
var pl = ["aria-selected", "aria-disabled", "onClick", "onKeydown", "onMouseover"];
var bl = ["aria-label", "onKeydown"];
var Ht = defineComponent({
  __name: "SelectionOverlay",
  props: {
    items: {},
    type: {},
    isLast: { type: Boolean },
    arrowNavigation: { type: Boolean },
    skipButtonRef: { type: Boolean },
    headerRefs: {},
    hideNavigation: {},
    escClose: { type: Boolean },
    useRelative: { type: Boolean },
    height: {},
    textInput: { type: [Boolean, Object] },
    config: {}
  },
  emits: ["selected", "toggle", "reset-flow", "hover-value"],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, { setSelectionGrid: r, buildMultiLevelMatrix: l, setMonthPicker: c2 } = it(), { defaultedAriaLabels: b2, defaultedTextInput: k2, defaultedConfig: P2 } = Ae(
      t2
    ), { hideNavigationButtons: g } = Jt(), S3 = ref(false), Y2 = ref(null), G3 = ref(null), N2 = ref([]), K3 = ref(), J2 = ref(null), h4 = ref(0), O2 = ref(null);
    onBeforeUpdate(() => {
      Y2.value = null;
    }), onMounted(() => {
      nextTick().then(() => y3()), m3(), p(true);
    }), onUnmounted(() => p(false));
    const p = (i2) => {
      var o;
      t2.arrowNavigation && ((o = t2.headerRefs) != null && o.length ? c2(i2) : r(i2));
    }, m3 = () => {
      var o;
      const i2 = Se(G3);
      i2 && (k2.value.enabled || (Y2.value ? (o = Y2.value) == null || o.focus({ preventScroll: true }) : i2.focus({ preventScroll: true })), S3.value = i2.clientHeight < i2.scrollHeight);
    }, C2 = computed(
      () => ({
        dp__overlay: true,
        "dp--overlay-absolute": !t2.useRelative,
        "dp--overlay-relative": t2.useRelative
      })
    ), j = computed(
      () => t2.useRelative ? { height: `${t2.height}px`, width: "260px" } : void 0
    ), re = computed(() => ({
      dp__overlay_col: true
    })), ue = computed(
      () => ({
        dp__btn: true,
        dp__button: true,
        dp__overlay_action: true,
        dp__over_action_scroll: S3.value,
        dp__button_bottom: t2.isLast
      })
    ), Q3 = computed(() => {
      var i2, o;
      return {
        dp__overlay_container: true,
        dp__container_flex: ((i2 = t2.items) == null ? void 0 : i2.length) <= 6,
        dp__container_block: ((o = t2.items) == null ? void 0 : o.length) > 6
      };
    }), y3 = () => {
      nextTick().then(() => {
        const i2 = Se(Y2), o = Se(G3), $ = Se(J2), Z2 = Se(O2), s3 = $ ? $.getBoundingClientRect().height : 0;
        o && (h4.value = o.getBoundingClientRect().height - s3), i2 && Z2 && (Z2.scrollTop = i2.offsetTop - Z2.offsetTop - (h4.value / 2 - i2.getBoundingClientRect().height) - s3);
      });
    }, w2 = (i2) => {
      i2.disabled || a3("selected", i2.value);
    }, L2 = () => {
      a3("toggle"), a3("reset-flow");
    }, x2 = () => {
      t2.escClose && L2();
    }, v = (i2, o, $, Z2) => {
      i2 && (o.active && (Y2.value = i2), t2.arrowNavigation && (Array.isArray(N2.value[$]) ? N2.value[$][Z2] = i2 : N2.value[$] = [i2], E3()));
    }, E3 = () => {
      var o, $;
      const i2 = (o = t2.headerRefs) != null && o.length ? [t2.headerRefs].concat(N2.value) : N2.value.concat([t2.skipButtonRef ? [] : [J2.value]]);
      l(Te(i2), ($ = t2.headerRefs) != null && $.length ? "monthPicker" : "selectionGrid");
    }, M3 = (i2) => {
      t2.arrowNavigation || lt(i2, P2.value, true);
    }, A = (i2) => {
      K3.value = i2, a3("hover-value", i2);
    };
    return n({ focusGrid: m3 }), (i2, o) => {
      var $;
      return openBlock(), createElementBlock("div", {
        ref_key: "gridWrapRef",
        ref: G3,
        class: normalizeClass(C2.value),
        style: normalizeStyle(j.value),
        role: "dialog",
        tabindex: "0",
        onKeydown: [
          withKeys(withModifiers(x2, ["prevent"]), ["esc"]),
          o[0] || (o[0] = withKeys(withModifiers((Z2) => M3(Z2), ["prevent"]), ["left"])),
          o[1] || (o[1] = withKeys(withModifiers((Z2) => M3(Z2), ["prevent"]), ["up"])),
          o[2] || (o[2] = withKeys(withModifiers((Z2) => M3(Z2), ["prevent"]), ["down"])),
          o[3] || (o[3] = withKeys(withModifiers((Z2) => M3(Z2), ["prevent"]), ["right"]))
        ]
      }, [
        createBaseVNode("div", {
          class: normalizeClass(Q3.value),
          ref_key: "containerRef",
          ref: O2,
          role: "grid",
          style: normalizeStyle({ height: `${h4.value}px` })
        }, [
          createBaseVNode("div", hl, [
            renderSlot(i2.$slots, "header")
          ]),
          i2.$slots.overlay ? renderSlot(i2.$slots, "overlay", { key: 0 }) : (openBlock(true), createElementBlock(Fragment, { key: 1 }, renderList(i2.items, (Z2, s3) => (openBlock(), createElementBlock("div", {
            class: normalizeClass(["dp__overlay_row", { dp__flex_row: i2.items.length >= 3 }]),
            key: s3,
            role: "row"
          }, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(Z2, (I3, pe) => (openBlock(), createElementBlock("div", {
              role: "gridcell",
              class: normalizeClass(re.value),
              key: I3.value,
              "aria-selected": I3.active,
              "aria-disabled": I3.disabled || void 0,
              ref_for: true,
              ref: (u2) => v(u2, I3, s3, pe),
              tabindex: "0",
              onClick: (u2) => w2(I3),
              onKeydown: [
                withKeys(withModifiers((u2) => w2(I3), ["prevent"]), ["enter"]),
                withKeys(withModifiers((u2) => w2(I3), ["prevent"]), ["space"])
              ],
              onMouseover: (u2) => A(I3.value)
            }, [
              createBaseVNode("div", {
                class: normalizeClass(I3.className)
              }, [
                i2.$slots.item ? renderSlot(i2.$slots, "item", {
                  key: 0,
                  item: I3
                }) : createCommentVNode("", true),
                i2.$slots.item ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  createTextVNode(toDisplayString(I3.text), 1)
                ], 64))
              ], 2)
            ], 42, pl))), 128))
          ], 2))), 128))
        ], 6),
        i2.$slots["button-icon"] ? withDirectives((openBlock(), createElementBlock("button", {
          key: 0,
          type: "button",
          "aria-label": ($ = unref(b2)) == null ? void 0 : $.toggleOverlay,
          class: normalizeClass(ue.value),
          tabindex: "0",
          ref_key: "toggleButton",
          ref: J2,
          onClick: L2,
          onKeydown: [
            withKeys(L2, ["enter"]),
            withKeys(L2, ["tab"])
          ]
        }, [
          renderSlot(i2.$slots, "button-icon")
        ], 42, bl)), [
          [vShow, !unref(g)(i2.hideNavigation, i2.type)]
        ]) : createCommentVNode("", true)
      ], 46, yl);
    };
  }
});
var en = defineComponent({
  __name: "InstanceWrap",
  props: {
    multiCalendars: {},
    stretch: { type: Boolean }
  },
  setup(e2) {
    const n = e2, a3 = computed(
      () => n.multiCalendars > 0 ? [...Array(n.multiCalendars).keys()] : [0]
    ), t2 = computed(() => ({
      dp__instance_calendar: n.multiCalendars > 0
    }));
    return (r, l) => (openBlock(), createElementBlock("div", {
      class: normalizeClass({
        dp__menu_inner: !r.stretch,
        "dp--menu--inner-stretched": r.stretch,
        dp__flex_display: r.multiCalendars > 0
      })
    }, [
      (openBlock(true), createElementBlock(Fragment, null, renderList(a3.value, (c2, b2) => (openBlock(), createElementBlock("div", {
        key: c2,
        class: normalizeClass(t2.value)
      }, [
        renderSlot(r.$slots, "default", {
          instance: c2,
          index: b2
        })
      ], 2))), 128))
    ], 2));
  }
});
var kl = ["aria-label", "aria-disabled"];
var Ct = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "ArrowBtn",
  props: {
    ariaLabel: {},
    disabled: { type: Boolean }
  },
  emits: ["activate", "set-ref"],
  setup(e2, { emit: n }) {
    const a3 = ref(null);
    return onMounted(() => n("set-ref", a3)), (t2, r) => (openBlock(), createElementBlock("button", {
      type: "button",
      class: "dp__btn dp--arrow-btn-nav",
      onClick: r[0] || (r[0] = (l) => t2.$emit("activate")),
      onKeydown: [
        r[1] || (r[1] = withKeys(withModifiers((l) => t2.$emit("activate"), ["prevent"]), ["enter"])),
        r[2] || (r[2] = withKeys(withModifiers((l) => t2.$emit("activate"), ["prevent"]), ["space"]))
      ],
      tabindex: "0",
      "aria-label": t2.ariaLabel,
      "aria-disabled": t2.disabled || void 0,
      ref_key: "elRef",
      ref: a3
    }, [
      createBaseVNode("span", {
        class: normalizeClass(["dp__inner_nav", { dp__inner_nav_disabled: t2.disabled }])
      }, [
        renderSlot(t2.$slots, "default")
      ], 2)
    ], 40, kl));
  }
});
var wl = { class: "dp--year-mode-picker" };
var Dl = ["aria-label"];
var Ea = defineComponent({
  __name: "YearModePicker",
  props: {
    ...qe,
    showYearPicker: { type: Boolean, default: false },
    items: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    isDisabled: { type: Function, default: () => false }
  },
  emits: ["toggle-year-picker", "year-select", "handle-year"],
  setup(e2, { emit: n }) {
    const a3 = e2, { showRightIcon: t2, showLeftIcon: r } = Jt(), { defaultedConfig: l, defaultedMultiCalendars: c2, defaultedAriaLabels: b2, defaultedTransitions: k2 } = Ae(a3), { showTransition: P2, transitionName: g } = Et(k2), S3 = (N2 = false, K3) => {
      n("toggle-year-picker", { flow: N2, show: K3 });
    }, Y2 = (N2) => {
      n("year-select", N2);
    }, G3 = (N2 = false) => {
      n("handle-year", N2);
    };
    return (N2, K3) => {
      var J2, h4, O2;
      return openBlock(), createElementBlock("div", wl, [
        unref(r)(unref(c2), e2.instance) ? (openBlock(), createBlock(Ct, {
          key: 0,
          ref: "mpPrevIconRef",
          "aria-label": (J2 = unref(b2)) == null ? void 0 : J2.prevYear,
          disabled: e2.isDisabled(false),
          onActivate: K3[0] || (K3[0] = (p) => G3(false))
        }, {
          default: withCtx(() => [
            N2.$slots["arrow-left"] ? renderSlot(N2.$slots, "arrow-left", { key: 0 }) : createCommentVNode("", true),
            N2.$slots["arrow-left"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Fn), { key: 1 }))
          ]),
          _: 3
        }, 8, ["aria-label", "disabled"])) : createCommentVNode("", true),
        createBaseVNode("button", {
          class: "dp__btn dp--year-select",
          type: "button",
          ref: "mpYearButtonRef",
          "aria-label": (h4 = unref(b2)) == null ? void 0 : h4.openYearsOverlay,
          onClick: K3[1] || (K3[1] = () => S3(false)),
          onKeydown: K3[2] || (K3[2] = withKeys(() => S3(false), ["enter"]))
        }, [
          N2.$slots.year ? renderSlot(N2.$slots, "year", {
            key: 0,
            year: e2.year
          }) : createCommentVNode("", true),
          N2.$slots.year ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
            createTextVNode(toDisplayString(e2.year), 1)
          ], 64))
        ], 40, Dl),
        unref(t2)(unref(c2), e2.instance) ? (openBlock(), createBlock(Ct, {
          key: 1,
          ref: "mpNextIconRef",
          "aria-label": (O2 = unref(b2)) == null ? void 0 : O2.nextYear,
          disabled: e2.isDisabled(true),
          onActivate: K3[3] || (K3[3] = (p) => G3(true))
        }, {
          default: withCtx(() => [
            N2.$slots["arrow-right"] ? renderSlot(N2.$slots, "arrow-right", { key: 0 }) : createCommentVNode("", true),
            N2.$slots["arrow-right"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Hn), { key: 1 }))
          ]),
          _: 3
        }, 8, ["aria-label", "disabled"])) : createCommentVNode("", true),
        createVNode(Transition, {
          name: unref(g)(e2.showYearPicker),
          css: unref(P2)
        }, {
          default: withCtx(() => [
            e2.showYearPicker ? (openBlock(), createBlock(Ht, {
              key: 0,
              items: e2.items,
              "text-input": N2.textInput,
              "esc-close": N2.escClose,
              config: N2.config,
              onToggle: S3,
              onSelected: K3[4] || (K3[4] = (p) => Y2(p)),
              "is-last": N2.autoApply && !unref(l).keepActionRow,
              type: "year"
            }, createSlots({
              "button-icon": withCtx(() => [
                N2.$slots["calendar-icon"] ? renderSlot(N2.$slots, "calendar-icon", { key: 0 }) : createCommentVNode("", true),
                N2.$slots["calendar-icon"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Bt), { key: 1 }))
              ]),
              _: 2
            }, [
              N2.$slots["year-overlay-value"] ? {
                name: "item",
                fn: withCtx(({ item: p }) => [
                  renderSlot(N2.$slots, "year-overlay-value", {
                    text: p.text,
                    value: p.value
                  })
                ]),
                key: "0"
              } : void 0
            ]), 1032, ["items", "text-input", "esc-close", "config", "is-last"])) : createCommentVNode("", true)
          ]),
          _: 3
        }, 8, ["name", "css"])
      ]);
    };
  }
});
var tn = (e2, n, a3) => {
  if (n.value && Array.isArray(n.value))
    if (n.value.some((t2) => ye(e2, t2))) {
      const t2 = n.value.filter((r) => !ye(r, e2));
      n.value = t2.length ? t2 : null;
    } else
      (a3 && +a3 > n.value.length || !a3) && n.value.push(e2);
  else
    n.value = [e2];
};
var Gn = (e2, n, a3) => {
  let t2 = e2.value ? e2.value.slice() : [];
  return t2.length === 2 && t2[1] !== null && (t2 = []), t2.length ? Re(n, t2[0]) ? (t2.unshift(n), a3("range-start", t2[0]), a3("range-start", t2[1])) : (t2[1] = n, a3("range-end", n)) : (t2 = [n], a3("range-start", n)), e2.value = t2, t2;
};
var nn = (e2, n, a3, t2) => {
  e2[0] && e2[1] && a3 && n("auto-apply"), e2[0] && !e2[1] && t2 && a3 && n("auto-apply");
};
var Fa = ({ multiCalendars: e2, calendars: n, modelValue: a3, props: t2, year: r, month: l, emit: c2 }) => {
  const b2 = computed(() => Kn(t2.yearRange, t2.reverseYears)), k2 = ref([false]), P2 = computed(() => (p, m3) => {
    const C2 = set$1(Ge(new Date()), {
      month: l.value(p),
      year: r.value(p)
    });
    return Na(C2, t2.maxDate, t2.minDate, t2.preventMinMaxNavigation, m3);
  }), g = () => {
    for (let p = 0; p < e2.value.count; p++)
      if (p === 0)
        n.value[p] = n.value[0];
      else {
        const m3 = set$1(H3(), n.value[p - 1]);
        n.value[p] = { month: getMonth(m3), year: getYear(addYears(m3, 1)) };
      }
  }, S3 = (p) => {
    if (!p)
      return g();
    const m3 = set$1(H3(), n.value[p]);
    return n.value[0].year = getYear(subYears(m3, e2.value.count - 1)), g();
  }, Y2 = (p) => t2.focusStartDate ? p[0] : p[1] ? p[1] : p[0], G3 = () => {
    if (a3.value) {
      const p = Array.isArray(a3.value) ? Y2(a3.value) : a3.value;
      n.value[0] = { month: getMonth(p), year: getYear(p) };
    }
  };
  onMounted(() => {
    G3(), e2.value.count && g();
  });
  const N2 = (p, m3) => {
    n.value[m3].year = p, e2.value.count && !e2.value.solo && S3(m3);
  }, K3 = computed(() => (p) => Dt(b2.value, (m3) => {
    const C2 = r.value(p) === m3.value, j = Nt(m3.value, Mt(t2.minDate), Mt(t2.maxDate));
    return { active: C2, disabled: j };
  })), J2 = (p, m3) => {
    N2(p, m3), O2(m3);
  }, h4 = (p, m3 = false) => {
    if (!P2.value(p, m3)) {
      const C2 = m3 ? r.value(p) + 1 : r.value(p) - 1;
      N2(C2, p);
    }
  }, O2 = (p, m3 = false, C2) => {
    m3 || c2("reset-flow"), C2 !== void 0 ? k2.value[p] = C2 : k2.value[p] = !k2.value[p], k2.value || c2("overlay-closed");
  };
  return {
    isDisabled: P2,
    groupedYears: K3,
    showYearPicker: k2,
    selectYear: N2,
    toggleYearPicker: O2,
    handleYearSelect: J2,
    handleYear: h4
  };
};
var Ml = (e2, n) => {
  const { defaultedMultiCalendars: a3, defaultedAriaLabels: t2, defaultedTransitions: r, defaultedConfig: l } = Ae(e2), { modelValue: c2, year: b2, month: k2, calendars: P2 } = Ft(e2, n), g = computed(() => Sa(e2.formatLocale, e2.locale, e2.monthNameFormat)), S3 = ref(null), {
    selectYear: Y2,
    groupedYears: G3,
    showYearPicker: N2,
    toggleYearPicker: K3,
    handleYearSelect: J2,
    handleYear: h4,
    isDisabled: O2
  } = Fa({
    modelValue: c2,
    multiCalendars: a3,
    calendars: P2,
    year: b2,
    month: k2,
    props: e2,
    emit: n
  }), p = (A) => A ? { month: getMonth(A), year: getYear(A) } : { month: null, year: null }, m3 = () => c2.value ? Array.isArray(c2.value) ? c2.value.map((A) => p(A)) : p(c2.value) : p(), C2 = (A, i2) => {
    const o = P2.value[A], $ = m3();
    return Array.isArray($) ? $.some((Z2) => Z2.year === (o == null ? void 0 : o.year) && Z2.month === i2) : (o == null ? void 0 : o.year) === $.year && i2 === $.month;
  }, j = (A, i2, o) => {
    var Z2, s3;
    const $ = m3();
    return Array.isArray($) ? b2.value(i2) === ((Z2 = $[o]) == null ? void 0 : Z2.year) && A === ((s3 = $[o]) == null ? void 0 : s3.month) : false;
  }, re = (A, i2) => {
    if (e2.range) {
      const o = m3();
      if (Array.isArray(c2.value) && Array.isArray(o)) {
        const $ = j(A, i2, 0) || j(A, i2, 1), Z2 = xe(Ge(H3()), A, b2.value(i2));
        return Xt(c2.value, S3.value, Z2) && !$;
      }
      return false;
    }
    return false;
  }, ue = computed(() => (A) => Dt(g.value, (i2) => {
    const o = C2(A, i2.value), $ = Nt(
      i2.value,
      _a$1(b2.value(A), e2.minDate),
      Ca(b2.value(A), e2.maxDate)
    ) || jr(e2.disabledDates, b2.value(A)).includes(i2.value), Z2 = re(i2.value, A);
    return { active: o, disabled: $, isBetween: Z2 };
  })), Q3 = (A, i2) => xe(Ge(H3()), A, b2.value(i2)), y3 = (A, i2) => {
    const o = c2.value ? c2.value : Ge(new Date());
    c2.value = xe(o, A, b2.value(i2)), n("auto-apply");
  }, w2 = (A, i2) => {
    const o = Gn(c2, Q3(A, i2), n);
    nn(o, n, e2.autoApply, e2.modelAuto);
  }, L2 = (A, i2) => {
    tn(Q3(A, i2), c2, e2.multiDatesLimit), n("auto-apply", true);
  }, x2 = (A, i2) => (P2.value[i2].month = A, E3(i2, P2.value[i2].year, A), e2.multiDates ? L2(A, i2) : e2.range ? w2(A, i2) : y3(A, i2)), v = (A, i2) => {
    Y2(A, i2), E3(i2, A, null);
  }, E3 = (A, i2, o) => {
    let $ = o;
    if (!$) {
      const Z2 = m3();
      $ = Array.isArray(Z2) ? Z2[A].month : Z2.month;
    }
    n("update-month-year", { instance: A, year: i2, month: $ });
  };
  return {
    groupedMonths: ue,
    groupedYears: G3,
    year: b2,
    isDisabled: O2,
    defaultedMultiCalendars: a3,
    defaultedAriaLabels: t2,
    defaultedTransitions: r,
    defaultedConfig: l,
    showYearPicker: N2,
    setHoverDate: (A, i2) => {
      S3.value = Q3(A, i2);
    },
    selectMonth: x2,
    selectYear: v,
    toggleYearPicker: K3,
    handleYearSelect: J2,
    handleYear: h4
  };
};
var $l = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "MonthPicker",
  props: {
    ...qe
  },
  emits: [
    "update:internal-model-value",
    "overlay-closed",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year"
  ],
  setup(e2, { emit: n }) {
    const a3 = e2, t2 = useSlots(), r = Ve(t2, "yearMode"), {
      groupedMonths: l,
      groupedYears: c2,
      year: b2,
      isDisabled: k2,
      defaultedMultiCalendars: P2,
      defaultedConfig: g,
      showYearPicker: S3,
      setHoverDate: Y2,
      selectMonth: G3,
      selectYear: N2,
      toggleYearPicker: K3,
      handleYearSelect: J2,
      handleYear: h4
    } = Ml(a3, n);
    return (O2, p) => (openBlock(), createBlock(en, {
      "multi-calendars": unref(P2).count,
      stretch: ""
    }, {
      default: withCtx(({ instance: m3 }) => [
        O2.$slots["month-year"] ? renderSlot(O2.$slots, "month-year", normalizeProps(mergeProps({ key: 0 }, {
          year: unref(b2),
          months: unref(l)(m3),
          years: unref(c2)(m3),
          selectMonth: unref(G3),
          selectYear: unref(N2),
          instance: m3
        }))) : (openBlock(), createBlock(Ht, {
          key: 1,
          items: unref(l)(m3),
          "arrow-navigation": O2.arrowNavigation,
          "is-last": O2.autoApply && !unref(g).keepActionRow,
          "esc-close": O2.escClose,
          height: unref(g).modeHeight,
          config: O2.config,
          onSelected: (C2) => unref(G3)(C2, m3),
          onHoverValue: (C2) => unref(Y2)(C2, m3),
          "use-relative": "",
          type: "month"
        }, {
          header: withCtx(() => [
            createVNode(Ea, mergeProps(O2.$props, {
              items: unref(c2)(m3),
              instance: m3,
              "show-year-picker": unref(S3)[m3],
              year: unref(b2)(m3),
              "is-disabled": (C2) => unref(k2)(m3, C2),
              onHandleYear: (C2) => unref(h4)(m3, C2),
              onYearSelect: (C2) => unref(J2)(C2, m3),
              onToggleYearPicker: (C2) => unref(K3)(m3, C2 == null ? void 0 : C2.flow, C2 == null ? void 0 : C2.show)
            }), createSlots({ _: 2 }, [
              renderList(unref(r), (C2, j) => ({
                name: C2,
                fn: withCtx((re) => [
                  renderSlot(O2.$slots, C2, normalizeProps(guardReactiveProps(re)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          _: 2
        }, 1032, ["items", "arrow-navigation", "is-last", "esc-close", "height", "config", "onSelected", "onHoverValue"]))
      ]),
      _: 3
    }, 8, ["multi-calendars"]));
  }
});
var Tl = (e2, n) => {
  const { modelValue: a3 } = Ft(e2, n), t2 = ref(null), r = (g) => Array.isArray(a3.value) ? a3.value.some((S3) => getYear(S3) === g) : a3.value ? getYear(a3.value) === g : false, l = (g) => e2.range && Array.isArray(a3.value) ? Xt(a3.value, t2.value, b2(g)) : false, c2 = computed(() => Dt(Kn(e2.yearRange, e2.reverseYears), (g) => {
    const S3 = r(g.value), Y2 = Nt(g.value, Mt(e2.minDate), Mt(e2.maxDate)), G3 = l(g.value);
    return { active: S3, disabled: Y2, isBetween: G3 };
  })), b2 = (g) => setYear(Ge(new Date()), g);
  return {
    groupedYears: c2,
    setHoverValue: (g) => {
      t2.value = setYear(Ge(new Date()), g);
    },
    selectYear: (g) => {
      if (e2.multiDates)
        return tn(b2(g), a3, e2.multiDatesLimit), n("auto-apply", true);
      if (e2.range) {
        const S3 = Gn(a3, b2(g), n);
        return nn(S3, n, e2.autoApply, e2.modelAuto);
      }
      a3.value = b2(g), n("auto-apply");
    }
  };
};
var Al = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "YearPicker",
  props: {
    ...qe
  },
  emits: ["update:internal-model-value", "reset-flow", "range-start", "range-end", "auto-apply"],
  setup(e2, { emit: n }) {
    const a3 = e2, { groupedYears: t2, selectYear: r, setHoverValue: l } = Tl(a3, n), { defaultedConfig: c2 } = Ae(a3);
    return (b2, k2) => (openBlock(), createElementBlock("div", null, [
      b2.$slots["month-year"] ? renderSlot(b2.$slots, "month-year", normalizeProps(mergeProps({ key: 0 }, {
        years: unref(t2),
        selectYear: unref(r)
      }))) : (openBlock(), createBlock(Ht, {
        key: 1,
        items: unref(t2),
        "is-last": b2.autoApply && !unref(c2).keepActionRow,
        height: unref(c2).modeHeight,
        config: b2.config,
        type: "year",
        "use-relative": "",
        onSelected: unref(r),
        onHoverValue: unref(l)
      }, createSlots({ _: 2 }, [
        b2.$slots["year-overlay-value"] ? {
          name: "item",
          fn: withCtx(({ item: P2 }) => [
            renderSlot(b2.$slots, "year-overlay-value", {
              text: P2.text,
              value: P2.value
            })
          ]),
          key: "0"
        } : void 0
      ]), 1032, ["items", "is-last", "height", "config", "onSelected", "onHoverValue"]))
    ]));
  }
});
var Sl = {
  key: 0,
  class: "dp__time_input"
};
var Pl = ["aria-label", "onKeydown", "onClick"];
var _l = createBaseVNode("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1);
var Cl = createBaseVNode("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1);
var Rl = ["aria-label", "disabled", "onKeydown", "onClick"];
var Yl = ["aria-label", "onKeydown", "onClick"];
var Ol = createBaseVNode("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1);
var Nl = createBaseVNode("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1);
var Il = { key: 0 };
var Bl = ["aria-label", "onKeydown"];
var El = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "TimeInput",
  props: {
    hours: { type: Number, default: 0 },
    minutes: { type: Number, default: 0 },
    seconds: { type: Number, default: 0 },
    closeTimePickerBtn: { type: Object, default: null },
    order: { type: Number, default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: { type: Function, default: () => false },
    ...qe
  },
  emits: [
    "set-hours",
    "set-minutes",
    "update:hours",
    "update:minutes",
    "update:seconds",
    "reset-flow",
    "mounted",
    "overlay-closed",
    "am-pm-change"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, { setTimePickerElements: r, setTimePickerBackRef: l } = it(), { defaultedAriaLabels: c2, defaultedTransitions: b2, defaultedFilters: k2, defaultedConfig: P2 } = Ae(t2), { transitionName: g, showTransition: S3 } = Et(b2), Y2 = reactive({
      hours: false,
      minutes: false,
      seconds: false
    }), G3 = ref("AM"), N2 = ref(null), K3 = ref([]);
    onMounted(() => {
      a3("mounted");
    });
    const J2 = (u2) => set$1(new Date(), {
      hours: u2.hours,
      minutes: u2.minutes,
      seconds: t2.enableSeconds ? u2.seconds : 0,
      milliseconds: 0
    }), h4 = computed(
      () => (u2) => x2(u2, t2[u2]) || p(u2, t2[u2])
    ), O2 = computed(() => ({ hours: t2.hours, minutes: t2.minutes, seconds: t2.seconds })), p = (u2, B3) => t2.range && !t2.disableTimeRangeValidation ? !t2.validateTime(u2, B3) : false, m3 = (u2, B3) => {
      if (t2.range && !t2.disableTimeRangeValidation) {
        const U2 = B3 ? +t2[`${u2}Increment`] : -+t2[`${u2}Increment`], _2 = t2[u2] + U2;
        return !t2.validateTime(u2, _2);
      }
      return false;
    }, C2 = computed(() => (u2) => !E3(+t2[u2] + +t2[`${u2}Increment`], u2) || m3(u2, true)), j = computed(() => (u2) => !E3(+t2[u2] - +t2[`${u2}Increment`], u2) || m3(u2, false)), re = (u2, B3) => add(set$1(H3(), u2), B3), ue = (u2, B3) => sub(set$1(H3(), u2), B3), Q3 = computed(
      () => ({
        dp__time_col: true,
        dp__time_col_block: !t2.timePickerInline,
        dp__time_col_reg_block: !t2.enableSeconds && t2.is24 && !t2.timePickerInline,
        dp__time_col_reg_inline: !t2.enableSeconds && t2.is24 && t2.timePickerInline,
        dp__time_col_reg_with_button: !t2.enableSeconds && !t2.is24,
        dp__time_col_sec: t2.enableSeconds && t2.is24,
        dp__time_col_sec_with_button: t2.enableSeconds && !t2.is24
      })
    ), y3 = computed(() => {
      const u2 = [{ type: "hours" }, { type: "", separator: true }, { type: "minutes" }];
      return t2.enableSeconds ? u2.concat([{ type: "", separator: true }, { type: "seconds" }]) : u2;
    }), w2 = computed(() => y3.value.filter((u2) => !u2.separator)), L2 = computed(() => (u2) => {
      if (u2 === "hours") {
        const B3 = $(+t2.hours);
        return { text: B3 < 10 ? `0${B3}` : `${B3}`, value: B3 };
      }
      return { text: t2[u2] < 10 ? `0${t2[u2]}` : `${t2[u2]}`, value: t2[u2] };
    }), x2 = (u2, B3) => {
      var _2;
      if (!t2.disabledTimesConfig)
        return false;
      const U2 = t2.disabledTimesConfig(t2.order, u2 === "hours" ? B3 : void 0);
      return U2[u2] ? !!((_2 = U2[u2]) != null && _2.includes(B3)) : true;
    }, v = (u2) => {
      const B3 = t2.is24 ? 24 : 12, U2 = u2 === "hours" ? B3 : 60, _2 = +t2[`${u2}GridIncrement`], q3 = u2 === "hours" && !t2.is24 ? _2 : 0, ce2 = [];
      for (let fe2 = q3; fe2 < U2; fe2 += _2)
        ce2.push({ value: fe2, text: fe2 < 10 ? `0${fe2}` : `${fe2}` });
      return u2 === "hours" && !t2.is24 && ce2.push({ value: 0, text: "12" }), Dt(ce2, (fe2) => ({ active: false, disabled: k2.value.times[u2].includes(fe2.value) || !E3(fe2.value, u2) || x2(u2, fe2.value) || p(u2, fe2.value) }));
    }, E3 = (u2, B3) => {
      const U2 = t2.minTime ? J2(pn(t2.minTime)) : null, _2 = t2.maxTime ? J2(pn(t2.maxTime)) : null, q3 = J2(pn(O2.value, B3, u2));
      return U2 && _2 ? (isBefore(q3, _2) || isEqual(q3, _2)) && (isAfter(q3, U2) || isEqual(q3, U2)) : U2 ? isAfter(q3, U2) || isEqual(q3, U2) : _2 ? isBefore(q3, _2) || isEqual(q3, _2) : true;
    }, M3 = (u2) => t2[`no${u2[0].toUpperCase() + u2.slice(1)}Overlay`], A = (u2) => {
      M3(u2) || (Y2[u2] = !Y2[u2], Y2[u2] || a3("overlay-closed"));
    }, i2 = (u2) => u2 === "hours" ? getHours : u2 === "minutes" ? getMinutes : getSeconds, o = (u2, B3 = true) => {
      const U2 = B3 ? re : ue, _2 = B3 ? +t2[`${u2}Increment`] : -+t2[`${u2}Increment`];
      E3(+t2[u2] + _2, u2) && a3(
        `update:${u2}`,
        i2(u2)(U2({ [u2]: +t2[u2] }, { [u2]: +t2[`${u2}Increment`] }))
      );
    }, $ = (u2) => t2.is24 ? u2 : (u2 >= 12 ? G3.value = "PM" : G3.value = "AM", Ir(u2)), Z2 = () => {
      G3.value === "PM" ? (G3.value = "AM", a3("update:hours", t2.hours - 12)) : (G3.value = "PM", a3("update:hours", t2.hours + 12)), a3("am-pm-change", G3.value);
    }, s3 = (u2) => {
      Y2[u2] = true;
    }, I3 = (u2, B3, U2) => {
      if (u2 && t2.arrowNavigation) {
        Array.isArray(K3.value[B3]) ? K3.value[B3][U2] = u2 : K3.value[B3] = [u2];
        const _2 = K3.value.reduce(
          (q3, ce2) => ce2.map((fe2, R3) => [...q3[R3] || [], ce2[R3]]),
          []
        );
        l(t2.closeTimePickerBtn), N2.value && (_2[1] = _2[1].concat(N2.value)), r(_2, t2.order);
      }
    }, pe = (u2, B3) => (A(u2), u2 === "hours" && !t2.is24 ? a3(`update:${u2}`, G3.value === "PM" ? B3 + 12 : B3) : a3(`update:${u2}`, B3));
    return n({ openChildCmp: s3 }), (u2, B3) => {
      var U2;
      return u2.disabled ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", Sl, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(y3.value, (_2, q3) => {
          var ce2, fe2, R3;
          return openBlock(), createElementBlock("div", {
            key: q3,
            class: normalizeClass(Q3.value)
          }, [
            _2.separator ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
              createTextVNode(" : ")
            ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
              createBaseVNode("button", {
                type: "button",
                class: normalizeClass({
                  dp__btn: true,
                  dp__inc_dec_button: !u2.timePickerInline,
                  dp__inc_dec_button_inline: u2.timePickerInline,
                  dp__tp_inline_btn_top: u2.timePickerInline,
                  dp__inc_dec_button_disabled: C2.value(_2.type)
                }),
                "aria-label": (ce2 = unref(c2)) == null ? void 0 : ce2.incrementValue(_2.type),
                tabindex: "0",
                onKeydown: [
                  withKeys(withModifiers((F) => o(_2.type), ["prevent"]), ["enter"]),
                  withKeys(withModifiers((F) => o(_2.type), ["prevent"]), ["space"])
                ],
                onClick: (F) => o(_2.type),
                ref_for: true,
                ref: (F) => I3(F, q3, 0)
              }, [
                t2.timePickerInline ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  _l,
                  Cl
                ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                  u2.$slots["arrow-up"] ? renderSlot(u2.$slots, "arrow-up", { key: 0 }) : createCommentVNode("", true),
                  u2.$slots["arrow-up"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Ln), { key: 1 }))
                ], 64))
              ], 42, Pl),
              createBaseVNode("button", {
                type: "button",
                "aria-label": (fe2 = unref(c2)) == null ? void 0 : fe2.openTpOverlay(_2.type),
                class: normalizeClass({
                  dp__time_display: true,
                  dp__time_display_block: !u2.timePickerInline,
                  dp__time_display_inline: u2.timePickerInline,
                  "dp--time-invalid": h4.value(_2.type),
                  "dp--time-overlay-btn": !h4.value(_2.type)
                }),
                disabled: M3(_2.type),
                tabindex: "0",
                onKeydown: [
                  withKeys(withModifiers((F) => A(_2.type), ["prevent"]), ["enter"]),
                  withKeys(withModifiers((F) => A(_2.type), ["prevent"]), ["space"])
                ],
                onClick: (F) => A(_2.type),
                ref_for: true,
                ref: (F) => I3(F, q3, 1)
              }, [
                u2.$slots[_2.type] ? renderSlot(u2.$slots, _2.type, {
                  key: 0,
                  text: L2.value(_2.type).text,
                  value: L2.value(_2.type).value
                }) : createCommentVNode("", true),
                u2.$slots[_2.type] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  createTextVNode(toDisplayString(L2.value(_2.type).text), 1)
                ], 64))
              ], 42, Rl),
              createBaseVNode("button", {
                type: "button",
                class: normalizeClass({
                  dp__btn: true,
                  dp__inc_dec_button: !u2.timePickerInline,
                  dp__inc_dec_button_inline: u2.timePickerInline,
                  dp__tp_inline_btn_bottom: u2.timePickerInline,
                  dp__inc_dec_button_disabled: j.value(_2.type)
                }),
                "aria-label": (R3 = unref(c2)) == null ? void 0 : R3.decrementValue(_2.type),
                tabindex: "0",
                onKeydown: [
                  withKeys(withModifiers((F) => o(_2.type, false), ["prevent"]), ["enter"]),
                  withKeys(withModifiers((F) => o(_2.type, false), ["prevent"]), ["space"])
                ],
                onClick: (F) => o(_2.type, false),
                ref_for: true,
                ref: (F) => I3(F, q3, 2)
              }, [
                t2.timePickerInline ? (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  Ol,
                  Nl
                ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                  u2.$slots["arrow-down"] ? renderSlot(u2.$slots, "arrow-down", { key: 0 }) : createCommentVNode("", true),
                  u2.$slots["arrow-down"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Un), { key: 1 }))
                ], 64))
              ], 42, Yl)
            ], 64))
          ], 2);
        }), 128)),
        u2.is24 ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", Il, [
          u2.$slots["am-pm-button"] ? renderSlot(u2.$slots, "am-pm-button", {
            key: 0,
            toggle: Z2,
            value: G3.value
          }) : createCommentVNode("", true),
          u2.$slots["am-pm-button"] ? createCommentVNode("", true) : (openBlock(), createElementBlock("button", {
            key: 1,
            ref_key: "amPmButton",
            ref: N2,
            type: "button",
            class: "dp__pm_am_button",
            role: "button",
            "aria-label": (U2 = unref(c2)) == null ? void 0 : U2.amPmButton,
            tabindex: "0",
            onClick: Z2,
            onKeydown: [
              withKeys(withModifiers(Z2, ["prevent"]), ["enter"]),
              withKeys(withModifiers(Z2, ["prevent"]), ["space"])
            ]
          }, toDisplayString(G3.value), 41, Bl))
        ])),
        (openBlock(true), createElementBlock(Fragment, null, renderList(w2.value, (_2, q3) => (openBlock(), createBlock(Transition, {
          key: q3,
          name: unref(g)(Y2[_2.type]),
          css: unref(S3)
        }, {
          default: withCtx(() => [
            Y2[_2.type] ? (openBlock(), createBlock(Ht, {
              key: 0,
              items: v(_2.type),
              "is-last": u2.autoApply && !unref(P2).keepActionRow,
              "esc-close": u2.escClose,
              type: _2.type,
              "text-input": u2.textInput,
              config: u2.config,
              "arrow-navigation": u2.arrowNavigation,
              onSelected: (ce2) => pe(_2.type, ce2),
              onToggle: (ce2) => A(_2.type),
              onResetFlow: B3[0] || (B3[0] = (ce2) => u2.$emit("reset-flow"))
            }, createSlots({
              "button-icon": withCtx(() => [
                u2.$slots["clock-icon"] ? renderSlot(u2.$slots, "clock-icon", { key: 0 }) : createCommentVNode("", true),
                u2.$slots["clock-icon"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Vn), { key: 1 }))
              ]),
              _: 2
            }, [
              u2.$slots[`${_2.type}-overlay-value`] ? {
                name: "item",
                fn: withCtx(({ item: ce2 }) => [
                  renderSlot(u2.$slots, `${_2.type}-overlay-value`, {
                    text: ce2.text,
                    value: ce2.value
                  })
                ]),
                key: "0"
              } : void 0
            ]), 1032, ["items", "is-last", "esc-close", "type", "text-input", "config", "arrow-navigation", "onSelected", "onToggle"])) : createCommentVNode("", true)
          ]),
          _: 2
        }, 1032, ["name", "css"]))), 128))
      ]));
    };
  }
});
var Fl = { class: "dp--tp-wrap" };
var Hl = ["aria-label"];
var Vl = ["tabindex"];
var Ll = ["aria-label"];
var Ha = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePicker",
  props: {
    hours: { type: [Number, Array], default: 0 },
    minutes: { type: [Number, Array], default: 0 },
    seconds: { type: [Number, Array], default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: {
      type: Function,
      default: () => false
    },
    ...qe
  },
  emits: [
    "update:hours",
    "update:minutes",
    "update:seconds",
    "mount",
    "reset-flow",
    "overlay-opened",
    "overlay-closed",
    "am-pm-change"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, { buildMatrix: r, setTimePicker: l } = it(), c2 = useSlots(), { defaultedTransitions: b2, defaultedAriaLabels: k2, defaultedTextInput: P2, defaultedConfig: g } = Ae(t2), { transitionName: S3, showTransition: Y2 } = Et(b2), { hideNavigationButtons: G3 } = Jt(), N2 = ref(null), K3 = ref(null), J2 = ref([]), h4 = ref(null);
    onMounted(() => {
      a3("mount"), !t2.timePicker && t2.arrowNavigation ? r([Se(N2.value)], "time") : l(true, t2.timePicker);
    });
    const O2 = computed(() => t2.range && t2.modelAuto ? Pa(t2.internalModelValue) : true), p = ref(false), m3 = (v) => ({
      hours: Array.isArray(t2.hours) ? t2.hours[v] : t2.hours,
      minutes: Array.isArray(t2.minutes) ? t2.minutes[v] : t2.minutes,
      seconds: Array.isArray(t2.seconds) ? t2.seconds[v] : t2.seconds
    }), C2 = computed(() => {
      const v = [];
      if (t2.range)
        for (let E3 = 0; E3 < 2; E3++)
          v.push(m3(E3));
      else
        v.push(m3(0));
      return v;
    }), j = (v, E3 = false, M3 = "") => {
      E3 || a3("reset-flow"), p.value = v, a3(v ? "overlay-opened" : "overlay-closed"), t2.arrowNavigation && l(v), nextTick(() => {
        M3 !== "" && J2.value[0] && J2.value[0].openChildCmp(M3);
      });
    }, re = computed(() => ({
      dp__btn: true,
      dp__button: true,
      dp__button_bottom: t2.autoApply && !g.value.keepActionRow
    })), ue = Ve(c2, "timePicker"), Q3 = (v, E3, M3) => t2.range ? E3 === 0 ? [v, C2.value[1][M3]] : [C2.value[0][M3], v] : v, y3 = (v) => {
      a3("update:hours", v);
    }, w2 = (v) => {
      a3("update:minutes", v);
    }, L2 = (v) => {
      a3("update:seconds", v);
    }, x2 = () => {
      if (h4.value && !P2.value.enabled) {
        const v = Er(h4.value);
        v && v.focus({ preventScroll: true });
      }
    };
    return n({ toggleTimePicker: j }), (v, E3) => {
      var M3;
      return openBlock(), createElementBlock("div", Fl, [
        !v.timePicker && !v.timePickerInline ? withDirectives((openBlock(), createElementBlock("button", {
          key: 0,
          type: "button",
          class: normalizeClass(re.value),
          "aria-label": (M3 = unref(k2)) == null ? void 0 : M3.openTimePicker,
          tabindex: "0",
          ref_key: "openTimePickerBtn",
          ref: N2,
          onKeydown: [
            E3[0] || (E3[0] = withKeys((A) => j(true), ["enter"])),
            E3[1] || (E3[1] = withKeys((A) => j(true), ["space"]))
          ],
          onClick: E3[2] || (E3[2] = (A) => j(true))
        }, [
          v.$slots["clock-icon"] ? renderSlot(v.$slots, "clock-icon", { key: 0 }) : createCommentVNode("", true),
          v.$slots["clock-icon"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Vn), { key: 1 }))
        ], 42, Hl)), [
          [vShow, !unref(G3)(v.hideNavigation, "time")]
        ]) : createCommentVNode("", true),
        createVNode(Transition, {
          name: unref(S3)(p.value),
          css: unref(Y2) && !v.timePickerInline
        }, {
          default: withCtx(() => {
            var A;
            return [
              p.value || v.timePicker || v.timePickerInline ? (openBlock(), createElementBlock("div", {
                key: 0,
                class: normalizeClass({
                  dp__overlay: !v.timePickerInline,
                  "dp--overlay-absolute": !t2.timePicker && !v.timePickerInline,
                  "dp--overlay-relative": t2.timePicker
                }),
                style: normalizeStyle(v.timePicker ? { height: `${unref(g).modeHeight}px` } : void 0),
                ref_key: "overlayRef",
                ref: h4,
                tabindex: v.timePickerInline ? void 0 : 0
              }, [
                createBaseVNode("div", {
                  class: normalizeClass(
                    v.timePickerInline ? "dp__time_picker_inline_container" : "dp__overlay_container dp__container_flex dp__time_picker_overlay_container"
                  ),
                  style: { display: "flex" }
                }, [
                  v.$slots["time-picker-overlay"] ? renderSlot(v.$slots, "time-picker-overlay", {
                    key: 0,
                    hours: e2.hours,
                    minutes: e2.minutes,
                    seconds: e2.seconds,
                    setHours: y3,
                    setMinutes: w2,
                    setSeconds: L2
                  }) : createCommentVNode("", true),
                  v.$slots["time-picker-overlay"] ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", {
                    key: 1,
                    class: normalizeClass(v.timePickerInline ? "dp__flex" : "dp__overlay_row dp__flex_row")
                  }, [
                    (openBlock(true), createElementBlock(Fragment, null, renderList(C2.value, (i2, o) => withDirectives((openBlock(), createBlock(El, mergeProps({ key: o }, {
                      ...v.$props,
                      order: o,
                      hours: i2.hours,
                      minutes: i2.minutes,
                      seconds: i2.seconds,
                      closeTimePickerBtn: K3.value,
                      disabledTimesConfig: e2.disabledTimesConfig,
                      disabled: o === 0 ? v.fixedStart : v.fixedEnd
                    }, {
                      "validate-time": ($, Z2) => e2.validateTime($, Q3(Z2, o, $)),
                      ref_for: true,
                      ref_key: "timeInputRefs",
                      ref: J2,
                      "onUpdate:hours": ($) => y3(Q3($, o, "hours")),
                      "onUpdate:minutes": ($) => w2(Q3($, o, "minutes")),
                      "onUpdate:seconds": ($) => L2(Q3($, o, "seconds")),
                      onMounted: x2,
                      onOverlayClosed: x2,
                      onAmPmChange: E3[3] || (E3[3] = ($) => v.$emit("am-pm-change", $))
                    }), createSlots({ _: 2 }, [
                      renderList(unref(ue), ($, Z2) => ({
                        name: $,
                        fn: withCtx((s3) => [
                          renderSlot(v.$slots, $, normalizeProps(guardReactiveProps(s3)))
                        ])
                      }))
                    ]), 1040, ["validate-time", "onUpdate:hours", "onUpdate:minutes", "onUpdate:seconds"])), [
                      [vShow, o === 0 ? true : O2.value]
                    ])), 128))
                  ], 2)),
                  !v.timePicker && !v.timePickerInline ? withDirectives((openBlock(), createElementBlock("button", {
                    key: 2,
                    type: "button",
                    ref_key: "closeTimePickerBtn",
                    ref: K3,
                    class: normalizeClass(re.value),
                    "aria-label": (A = unref(k2)) == null ? void 0 : A.closeTimePicker,
                    tabindex: "0",
                    onKeydown: [
                      E3[4] || (E3[4] = withKeys((i2) => j(false), ["enter"])),
                      E3[5] || (E3[5] = withKeys((i2) => j(false), ["space"]))
                    ],
                    onClick: E3[6] || (E3[6] = (i2) => j(false))
                  }, [
                    v.$slots["calendar-icon"] ? renderSlot(v.$slots, "calendar-icon", { key: 0 }) : createCommentVNode("", true),
                    v.$slots["calendar-icon"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Bt), { key: 1 }))
                  ], 42, Ll)), [
                    [vShow, !unref(G3)(v.hideNavigation, "time")]
                  ]) : createCommentVNode("", true)
                ], 2)
              ], 14, Vl)) : createCommentVNode("", true)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ]);
    };
  }
});
var Va = (e2, n, a3, t2) => {
  const r = (h4, O2) => Array.isArray(n[h4]) ? n[h4][O2] : n[h4], l = (h4) => e2.enableSeconds ? Array.isArray(n.seconds) ? n.seconds[h4] : n.seconds : 0, c2 = (h4, O2) => h4 ? O2 !== void 0 ? ot(h4, r("hours", O2), r("minutes", O2), l(O2)) : ot(h4, n.hours, n.minutes, l()) : setSeconds(H3(), l(O2)), b2 = (h4, O2) => {
    n[h4] = O2;
  }, k2 = (h4, O2) => {
    const p = Object.fromEntries(
      Object.keys(n).map((m3) => m3 === h4 ? [m3, O2] : [m3, n[m3]].slice())
    );
    if (e2.range && !e2.disableTimeRangeValidation) {
      const m3 = (j) => a3.value ? ot(
        a3.value[j],
        p.hours[j],
        p.minutes[j],
        p.seconds[j]
      ) : null, C2 = (j) => setMilliseconds(a3.value[j], 0);
      return !(ye(m3(0), m3(1)) && (isAfter(m3(0), C2(1)) || isBefore(m3(1), C2(0))));
    }
    return true;
  }, P2 = (h4, O2) => {
    k2(h4, O2) && (b2(h4, O2), t2 && t2());
  }, g = (h4) => {
    P2("hours", h4);
  }, S3 = (h4) => {
    P2("minutes", h4);
  }, Y2 = (h4) => {
    P2("seconds", h4);
  }, G3 = (h4, O2, p, m3) => {
    O2 && g(h4), !O2 && !p && S3(h4), p && Y2(h4), a3.value && m3(a3.value);
  }, N2 = (h4) => {
    if (h4) {
      const O2 = Array.isArray(h4), p = O2 ? [+h4[0].hours, +h4[1].hours] : +h4.hours, m3 = O2 ? [+h4[0].minutes, +h4[1].minutes] : +h4.minutes, C2 = O2 ? [+h4[0].seconds, +h4[1].seconds] : +h4.seconds;
      b2("hours", p), b2("minutes", m3), e2.enableSeconds && b2("seconds", C2);
    }
  }, K3 = (h4, O2) => {
    const p = {
      hours: Array.isArray(n.hours) ? n.hours[h4] : n.hours,
      disabledArr: []
    };
    return (O2 || O2 === 0) && (p.hours = O2), Array.isArray(e2.disabledTimes) && (p.disabledArr = e2.range && Array.isArray(e2.disabledTimes[h4]) ? e2.disabledTimes[h4] : e2.disabledTimes), p;
  }, J2 = computed(() => (h4, O2) => {
    var _a2, _b;
    var p;
    if (Array.isArray(e2.disabledTimes)) {
      const { disabledArr: m3, hours: C2 } = K3(h4, O2), j = m3.filter((re) => +re.hours === C2);
      return ((p = j[0]) == null ? void 0 : p.minutes) === "*" ? { hours: [C2], minutes: void 0, seconds: void 0 } : {
        hours: [],
        minutes: (_a2 = j == null ? void 0 : j.map((re) => +re.minutes)) != null ? _a2 : [],
        seconds: (_b = j == null ? void 0 : j.map((re) => re.seconds ? +re.seconds : void 0)) != null ? _b : []
      };
    }
    return { hours: [], minutes: [], seconds: [] };
  });
  return {
    setTime: b2,
    updateHours: g,
    updateMinutes: S3,
    updateSeconds: Y2,
    getSetDateTime: c2,
    updateTimeValues: G3,
    getSecondsValue: l,
    assignStartTime: N2,
    validateTime: k2,
    disabledTimesConfig: J2
  };
};
var Ul = (e2, n) => {
  const { modelValue: a3, time: t2 } = Ft(e2, n), { defaultedStartTime: r } = Ae(e2), { updateTimeValues: l, getSetDateTime: c2, setTime: b2, assignStartTime: k2, disabledTimesConfig: P2, validateTime: g } = Va(e2, t2, a3), S3 = (p) => {
    const { hours: m3, minutes: C2, seconds: j } = p;
    return { hours: +m3, minutes: +C2, seconds: j ? +j : 0 };
  }, Y2 = () => {
    if (e2.startTime) {
      if (Array.isArray(e2.startTime)) {
        const m3 = S3(e2.startTime[0]), C2 = S3(e2.startTime[1]);
        return [set$1(H3(), m3), set$1(H3(), C2)];
      }
      const p = S3(e2.startTime);
      return set$1(H3(), p);
    }
    return e2.range ? [null, null] : null;
  }, G3 = () => {
    if (e2.range) {
      const [p, m3] = Y2();
      a3.value = [c2(p, 0), c2(m3, 1)];
    } else
      a3.value = c2(Y2());
  }, N2 = (p) => Array.isArray(p) ? [mt(H3(p[0])), mt(H3(p[1]))] : [mt(p != null ? p : H3())], K3 = (p, m3, C2) => {
    b2("hours", p), b2("minutes", m3), b2("seconds", e2.enableSeconds ? C2 : 0);
  }, J2 = () => {
    const [p, m3] = N2(a3.value);
    return e2.range ? K3(
      [p.hours, m3.hours],
      [p.minutes, m3.minutes],
      [p.seconds, m3.minutes]
    ) : K3(p.hours, p.minutes, p.seconds);
  };
  onMounted(() => {
    if (!e2.shadow)
      return k2(r.value), a3.value ? J2() : G3();
  });
  const h4 = () => {
    Array.isArray(a3.value) ? a3.value = a3.value.map((p, m3) => p && c2(p, m3)) : a3.value = c2(a3.value), n("time-update");
  };
  return {
    time: t2,
    disabledTimesConfig: P2,
    updateTime: (p, m3 = true, C2 = false) => {
      l(p, m3, C2, h4);
    },
    validateTime: g
  };
};
var zl = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePickerSolo",
  props: {
    ...qe
  },
  emits: ["update:internal-model-value", "time-update", "am-pm-change"],
  setup(e2, { emit: n }) {
    const a3 = e2, t2 = useSlots(), r = Ve(t2, "timePicker"), { time: l, disabledTimesConfig: c2, updateTime: b2, validateTime: k2 } = Ul(a3, n);
    return (P2, g) => (openBlock(), createBlock(en, {
      "multi-calendars": 0,
      stretch: ""
    }, {
      default: withCtx(() => [
        createVNode(Ha, mergeProps(P2.$props, {
          hours: unref(l).hours,
          minutes: unref(l).minutes,
          seconds: unref(l).seconds,
          "internal-model-value": P2.internalModelValue,
          "disabled-times-config": unref(c2),
          "validate-time": unref(k2),
          "onUpdate:hours": g[0] || (g[0] = (S3) => unref(b2)(S3)),
          "onUpdate:minutes": g[1] || (g[1] = (S3) => unref(b2)(S3, false)),
          "onUpdate:seconds": g[2] || (g[2] = (S3) => unref(b2)(S3, false, true)),
          onAmPmChange: g[3] || (g[3] = (S3) => P2.$emit("am-pm-change", S3))
        }), createSlots({ _: 2 }, [
          renderList(unref(r), (S3, Y2) => ({
            name: S3,
            fn: withCtx((G3) => [
              renderSlot(P2.$slots, S3, normalizeProps(guardReactiveProps(G3)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"])
      ]),
      _: 3
    }));
  }
});
var Wl = { class: "dp__month_year_row" };
var jl = ["aria-label", "onClick", "onKeydown"];
var Kl = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "DpHeader",
  props: {
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    instance: { type: Number, default: 0 },
    years: { type: Array, default: () => [] },
    months: { type: Array, default: () => [] },
    ...qe
  },
  emits: ["update-month-year", "mount", "reset-flow", "overlay-closed"],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, { defaultedTransitions: r, defaultedAriaLabels: l, defaultedMultiCalendars: c2, defaultedFilters: b2, defaultedConfig: k2 } = Ae(t2), { transitionName: P2, showTransition: g } = Et(r), { buildMatrix: S3 } = it(), { handleMonthYearChange: Y2, isDisabled: G3, updateMonthYear: N2 } = nl(t2, a3), { showLeftIcon: K3, showRightIcon: J2 } = Jt(), h4 = ref(false), O2 = ref(false), p = ref([null, null, null, null]);
    onMounted(() => {
      a3("mount");
    });
    const m3 = (i2) => ({
      get: () => t2[i2],
      set: (o) => {
        const $ = i2 === Ke.month ? Ke.year : Ke.month;
        a3("update-month-year", { [i2]: o, [$]: t2[$] }), i2 === Ke.month ? L2(true) : x2(true);
      }
    }), C2 = computed(m3(Ke.month)), j = computed(m3(Ke.year)), re = computed(() => (i2) => ({
      month: t2.month,
      year: t2.year,
      items: i2 === Ke.month ? t2.months : t2.years,
      instance: t2.instance,
      updateMonthYear: N2,
      toggle: i2 === Ke.month ? L2 : x2
    })), ue = computed(() => {
      const i2 = t2.months.find((o) => o.value === t2.month);
      return i2 || { text: "", value: 0 };
    }), Q3 = computed(() => Dt(t2.months, (i2) => {
      const o = t2.month === i2.value, $ = Nt(
        i2.value,
        _a$1(t2.year, t2.minDate),
        Ca(t2.year, t2.maxDate)
      ) || b2.value.months.includes(i2.value);
      return { active: o, disabled: $ };
    })), y3 = computed(() => Dt(t2.years, (i2) => {
      const o = t2.year === i2.value, $ = Nt(i2.value, Mt(t2.minDate), Mt(t2.maxDate)) || b2.value.years.includes(i2.value);
      return { active: o, disabled: $ };
    })), w2 = (i2, o) => {
      o !== void 0 ? i2.value = o : i2.value = !i2.value, i2.value || a3("overlay-closed");
    }, L2 = (i2 = false, o) => {
      v(i2), w2(h4, o);
    }, x2 = (i2 = false, o) => {
      v(i2), w2(O2, o);
    }, v = (i2) => {
      i2 || a3("reset-flow");
    }, E3 = (i2, o) => {
      t2.arrowNavigation && (p.value[o] = Se(i2), S3(p.value, "monthYear"));
    }, M3 = computed(() => {
      var i2, o;
      return [
        {
          type: Ke.month,
          index: 1,
          toggle: L2,
          modelValue: C2.value,
          updateModelValue: ($) => C2.value = $,
          text: ue.value.text,
          showSelectionGrid: h4.value,
          items: Q3.value,
          ariaLabel: (i2 = l.value) == null ? void 0 : i2.openMonthsOverlay
        },
        {
          type: Ke.year,
          index: 2,
          toggle: x2,
          modelValue: j.value,
          updateModelValue: ($) => j.value = $,
          text: t2.year,
          showSelectionGrid: O2.value,
          items: y3.value,
          ariaLabel: (o = l.value) == null ? void 0 : o.openYearsOverlay
        }
      ];
    }), A = computed(
      () => t2.disableYearSelect ? [M3.value[0]] : M3.value
    );
    return n({
      toggleMonthPicker: L2,
      toggleYearPicker: x2,
      handleMonthYearChange: Y2
    }), (i2, o) => {
      var $, Z2, s3;
      return openBlock(), createElementBlock("div", Wl, [
        i2.$slots["month-year"] ? renderSlot(i2.$slots, "month-year", normalizeProps(mergeProps({ key: 0 }, { month: e2.month, year: e2.year, months: e2.months, years: e2.years, updateMonthYear: unref(N2), handleMonthYearChange: unref(Y2), instance: e2.instance }))) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
          unref(K3)(unref(c2), e2.instance) && !i2.vertical ? (openBlock(), createBlock(Ct, {
            key: 0,
            "aria-label": ($ = unref(l)) == null ? void 0 : $.prevMonth,
            disabled: unref(G3)(false),
            onActivate: o[0] || (o[0] = (I3) => unref(Y2)(false, true)),
            onSetRef: o[1] || (o[1] = (I3) => E3(I3, 0))
          }, {
            default: withCtx(() => [
              i2.$slots["arrow-left"] ? renderSlot(i2.$slots, "arrow-left", { key: 0 }) : createCommentVNode("", true),
              i2.$slots["arrow-left"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Fn), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled"])) : createCommentVNode("", true),
          createBaseVNode("div", {
            class: normalizeClass(["dp__month_year_wrap", {
              dp__year_disable_select: i2.disableYearSelect
            }])
          }, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(A.value, (I3, pe) => (openBlock(), createElementBlock(Fragment, {
              key: I3.type
            }, [
              createBaseVNode("button", {
                type: "button",
                class: "dp__btn dp__month_year_select",
                tabindex: "0",
                "aria-label": I3.ariaLabel,
                ref_for: true,
                ref: (u2) => E3(u2, pe + 1),
                onClick: I3.toggle,
                onKeydown: [
                  withKeys(withModifiers(I3.toggle, ["prevent"]), ["enter"]),
                  withKeys(withModifiers(I3.toggle, ["prevent"]), ["space"])
                ]
              }, [
                i2.$slots[I3.type] ? renderSlot(i2.$slots, I3.type, {
                  key: 0,
                  text: I3.text,
                  value: t2[I3.type]
                }) : createCommentVNode("", true),
                i2.$slots[I3.type] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  createTextVNode(toDisplayString(I3.text), 1)
                ], 64))
              ], 40, jl),
              createVNode(Transition, {
                name: unref(P2)(I3.showSelectionGrid),
                css: unref(g)
              }, {
                default: withCtx(() => [
                  I3.showSelectionGrid ? (openBlock(), createBlock(Ht, {
                    key: 0,
                    items: I3.items,
                    "arrow-navigation": i2.arrowNavigation,
                    "hide-navigation": i2.hideNavigation,
                    "is-last": i2.autoApply && !unref(k2).keepActionRow,
                    "skip-button-ref": false,
                    config: i2.config,
                    type: I3.type,
                    "header-refs": [],
                    "esc-close": i2.escClose,
                    "text-input": i2.textInput,
                    onSelected: I3.updateModelValue,
                    onToggle: I3.toggle
                  }, createSlots({
                    "button-icon": withCtx(() => [
                      i2.$slots["calendar-icon"] ? renderSlot(i2.$slots, "calendar-icon", { key: 0 }) : createCommentVNode("", true),
                      i2.$slots["calendar-icon"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Bt), { key: 1 }))
                    ]),
                    _: 2
                  }, [
                    i2.$slots[`${I3.type}-overlay-value`] ? {
                      name: "item",
                      fn: withCtx(({ item: u2 }) => [
                        renderSlot(i2.$slots, `${I3.type}-overlay-value`, {
                          text: u2.text,
                          value: u2.value
                        })
                      ]),
                      key: "0"
                    } : void 0,
                    i2.$slots[`${I3.type}-overlay`] ? {
                      name: "overlay",
                      fn: withCtx(() => [
                        renderSlot(i2.$slots, `${I3.type}-overlay`, normalizeProps(guardReactiveProps(re.value(I3.type))))
                      ]),
                      key: "1"
                    } : void 0,
                    i2.$slots[`${I3.type}-overlay-header`] ? {
                      name: "header",
                      fn: withCtx(() => [
                        renderSlot(i2.$slots, `${I3.type}-overlay-header`, {
                          toggle: I3.toggle
                        })
                      ]),
                      key: "2"
                    } : void 0
                  ]), 1032, ["items", "arrow-navigation", "hide-navigation", "is-last", "config", "type", "esc-close", "text-input", "onSelected", "onToggle"])) : createCommentVNode("", true)
                ]),
                _: 2
              }, 1032, ["name", "css"])
            ], 64))), 128))
          ], 2),
          unref(K3)(unref(c2), e2.instance) && i2.vertical ? (openBlock(), createBlock(Ct, {
            key: 1,
            "aria-label": (Z2 = unref(l)) == null ? void 0 : Z2.prevMonth,
            disabled: unref(G3)(false),
            onActivate: o[2] || (o[2] = (I3) => unref(Y2)(false, true))
          }, {
            default: withCtx(() => [
              i2.$slots["arrow-up"] ? renderSlot(i2.$slots, "arrow-up", { key: 0 }) : createCommentVNode("", true),
              i2.$slots["arrow-up"] ? createCommentVNode("", true) : (openBlock(), createBlock(unref(Ln), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled"])) : createCommentVNode("", true),
          unref(J2)(unref(c2), e2.instance) ? (openBlock(), createBlock(Ct, {
            key: 2,
            ref: "rightIcon",
            disabled: unref(G3)(true),
            "aria-label": (s3 = unref(l)) == null ? void 0 : s3.nextMonth,
            onActivate: o[3] || (o[3] = (I3) => unref(Y2)(true, true)),
            onSetRef: o[4] || (o[4] = (I3) => E3(I3, i2.disableYearSelect ? 2 : 3))
          }, {
            default: withCtx(() => [
              i2.$slots[i2.vertical ? "arrow-down" : "arrow-right"] ? renderSlot(i2.$slots, i2.vertical ? "arrow-down" : "arrow-right", { key: 0 }) : createCommentVNode("", true),
              i2.$slots[i2.vertical ? "arrow-down" : "arrow-right"] ? createCommentVNode("", true) : (openBlock(), createBlock(resolveDynamicComponent(i2.vertical ? unref(Un) : unref(Hn)), { key: 1 }))
            ]),
            _: 3
          }, 8, ["disabled", "aria-label"])) : createCommentVNode("", true)
        ], 64))
      ]);
    };
  }
});
var Gl = ["aria-label"];
var Zl = {
  class: "dp__calendar_header",
  role: "row"
};
var Ql = {
  key: 0,
  class: "dp__calendar_header_item",
  role: "gridcell"
};
var ql = createBaseVNode("div", { class: "dp__calendar_header_separator" }, null, -1);
var Xl = ["aria-label"];
var Jl = {
  key: 0,
  role: "gridcell",
  class: "dp__calendar_item dp__week_num"
};
var xl = { class: "dp__cell_inner" };
var eo = ["aria-selected", "aria-disabled", "aria-label", "onClick", "onKeydown", "onMouseenter", "onMouseleave"];
var to = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "DpCalendar",
  props: {
    mappedDates: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    ...qe
  },
  emits: [
    "select-date",
    "set-hover-date",
    "handle-scroll",
    "mount",
    "handle-swipe",
    "handle-space",
    "tooltip-open",
    "tooltip-close"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, { buildMultiLevelMatrix: r } = it(), { defaultedTransitions: l, defaultedConfig: c2, defaultedAriaLabels: b2, defaultedMultiCalendars: k2 } = Ae(t2), P2 = ref(null), g = ref({
      bottom: "",
      left: "",
      transform: ""
    }), S3 = ref([]), Y2 = ref(null), G3 = ref(true), N2 = ref(""), K3 = ref({ startX: 0, endX: 0, startY: 0, endY: 0 }), J2 = ref([]), h4 = ref({ left: "50%" }), O2 = computed(() => t2.calendar ? t2.calendar(t2.mappedDates) : t2.mappedDates), p = computed(() => t2.dayNames ? Array.isArray(t2.dayNames) ? t2.dayNames : t2.dayNames(t2.locale, +t2.weekStart) : Nr(t2.formatLocale, t2.locale, +t2.weekStart));
    onMounted(() => {
      a3("mount", { cmp: "calendar", refs: S3 }), c2.value.noSwipe || Y2.value && (Y2.value.addEventListener("touchstart", x2, { passive: false }), Y2.value.addEventListener("touchend", v, { passive: false }), Y2.value.addEventListener("touchmove", E3, { passive: false })), t2.monthChangeOnScroll && Y2.value && Y2.value.addEventListener("wheel", i2, { passive: false });
    });
    const m3 = (s3) => s3 ? t2.vertical ? "vNext" : "next" : t2.vertical ? "vPrevious" : "previous", C2 = (s3, I3) => {
      if (t2.transitions) {
        const pe = We(xe(H3(), t2.month, t2.year));
        N2.value = Ie(We(xe(H3(), s3, I3)), pe) ? l.value[m3(true)] : l.value[m3(false)], G3.value = false, nextTick(() => {
          G3.value = true;
        });
      }
    }, j = computed(
      () => ({
        [t2.calendarClassName]: !!t2.calendarClassName
      })
    ), re = computed(() => (s3) => {
      const I3 = Br(s3);
      return {
        dp__marker_dot: I3.type === "dot",
        dp__marker_line: I3.type === "line"
      };
    }), ue = computed(() => (s3) => ye(s3, P2.value)), Q3 = computed(() => ({
      dp__calendar: true,
      dp__calendar_next: k2.value.count > 0 && t2.instance !== 0
    })), y3 = computed(() => (s3) => t2.hideOffsetDates ? s3.current : true), w2 = async (s3, I3, pe) => {
      var u2, B3;
      if (a3("set-hover-date", s3), (B3 = (u2 = s3.marker) == null ? void 0 : u2.tooltip) != null && B3.length) {
        const U2 = Se(S3.value[I3][pe]);
        if (U2) {
          const { width: _2, height: q3 } = U2.getBoundingClientRect();
          P2.value = s3.value;
          let ce2 = { left: `${_2 / 2}px` }, fe2 = -50;
          if (await nextTick(), J2.value[0]) {
            const { left: R3, width: F } = J2.value[0].getBoundingClientRect();
            R3 < 0 && (ce2 = { left: "0" }, fe2 = 0, h4.value.left = `${_2 / 2}px`), window.innerWidth < R3 + F && (ce2 = { right: "0" }, fe2 = 0, h4.value.left = `${F - _2 / 2}px`);
          }
          g.value = {
            bottom: `${q3}px`,
            ...ce2,
            transform: `translateX(${fe2}%)`
          }, a3("tooltip-open", s3.marker);
        }
      }
    }, L2 = (s3) => {
      P2.value && (P2.value = null, g.value = JSON.parse(JSON.stringify({ bottom: "", left: "", transform: "" })), a3("tooltip-close", s3.marker));
    }, x2 = (s3) => {
      K3.value.startX = s3.changedTouches[0].screenX, K3.value.startY = s3.changedTouches[0].screenY;
    }, v = (s3) => {
      K3.value.endX = s3.changedTouches[0].screenX, K3.value.endY = s3.changedTouches[0].screenY, M3();
    }, E3 = (s3) => {
      t2.vertical && !t2.inline && s3.preventDefault();
    }, M3 = () => {
      const s3 = t2.vertical ? "Y" : "X";
      Math.abs(K3.value[`start${s3}`] - K3.value[`end${s3}`]) > 10 && a3("handle-swipe", K3.value[`start${s3}`] > K3.value[`end${s3}`] ? "right" : "left");
    }, A = (s3, I3, pe) => {
      s3 && (Array.isArray(S3.value[I3]) ? S3.value[I3][pe] = s3 : S3.value[I3] = [s3]), t2.arrowNavigation && r(S3.value, "calendar");
    }, i2 = (s3) => {
      t2.monthChangeOnScroll && (s3.preventDefault(), a3("handle-scroll", s3));
    }, o = (s3) => {
      const I3 = s3[0];
      return t2.weekNumbers === "local" ? getWeek(I3.value, { weekStartsOn: +t2.weekStart }) : t2.weekNumbers === "iso" ? getISOWeek(I3.value) : typeof t2.weekNumbers == "function" ? t2.weekNumbers(I3.value) : "";
    }, $ = (s3, I3) => {
      lt(s3, c2.value), a3("select-date", I3);
    }, Z2 = (s3) => {
      lt(s3, c2.value);
    };
    return n({ triggerTransition: C2 }), (s3, I3) => {
      var pe;
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(Q3.value)
      }, [
        createBaseVNode("div", {
          ref_key: "calendarWrapRef",
          ref: Y2,
          role: "grid",
          class: normalizeClass(j.value),
          "aria-label": (pe = unref(b2)) == null ? void 0 : pe.calendarWrap
        }, [
          (openBlock(), createElementBlock(Fragment, { key: 0 }, [
            createBaseVNode("div", Zl, [
              s3.weekNumbers ? (openBlock(), createElementBlock("div", Ql, toDisplayString(s3.weekNumName), 1)) : createCommentVNode("", true),
              (openBlock(true), createElementBlock(Fragment, null, renderList(p.value, (u2, B3) => (openBlock(), createElementBlock("div", {
                class: "dp__calendar_header_item",
                role: "gridcell",
                key: B3
              }, [
                s3.$slots["calendar-header"] ? renderSlot(s3.$slots, "calendar-header", {
                  key: 0,
                  day: u2,
                  index: B3
                }) : createCommentVNode("", true),
                s3.$slots["calendar-header"] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  createTextVNode(toDisplayString(u2), 1)
                ], 64))
              ]))), 128))
            ]),
            ql,
            createVNode(Transition, {
              name: N2.value,
              css: !!s3.transitions
            }, {
              default: withCtx(() => {
                var u2;
                return [
                  G3.value ? (openBlock(), createElementBlock("div", {
                    key: 0,
                    class: "dp__calendar",
                    role: "rowgroup",
                    "aria-label": ((u2 = unref(b2)) == null ? void 0 : u2.calendarDays) || void 0
                  }, [
                    (openBlock(true), createElementBlock(Fragment, null, renderList(O2.value, (B3, U2) => (openBlock(), createElementBlock("div", {
                      class: "dp__calendar_row",
                      role: "row",
                      key: U2
                    }, [
                      s3.weekNumbers ? (openBlock(), createElementBlock("div", Jl, [
                        createBaseVNode("div", xl, toDisplayString(o(B3.days)), 1)
                      ])) : createCommentVNode("", true),
                      (openBlock(true), createElementBlock(Fragment, null, renderList(B3.days, (_2, q3) => {
                        var ce2, fe2, R3;
                        return openBlock(), createElementBlock("div", {
                          role: "gridcell",
                          class: "dp__calendar_item",
                          ref_for: true,
                          ref: (F) => A(F, U2, q3),
                          key: q3 + U2,
                          "aria-selected": _2.classData.dp__active_date || _2.classData.dp__range_start || _2.classData.dp__range_start,
                          "aria-disabled": _2.classData.dp__cell_disabled || void 0,
                          "aria-label": (fe2 = (ce2 = unref(b2)) == null ? void 0 : ce2.day) == null ? void 0 : fe2.call(ce2, _2),
                          tabindex: "0",
                          onClick: withModifiers((F) => $(F, _2), ["prevent"]),
                          onKeydown: [
                            withKeys((F) => s3.$emit("select-date", _2), ["enter"]),
                            withKeys((F) => s3.$emit("handle-space", _2), ["space"])
                          ],
                          onMouseenter: (F) => w2(_2, U2, q3),
                          onMouseleave: (F) => L2(_2)
                        }, [
                          createBaseVNode("div", {
                            class: normalizeClass(["dp__cell_inner", _2.classData])
                          }, [
                            s3.$slots.day && y3.value(_2) ? renderSlot(s3.$slots, "day", {
                              key: 0,
                              day: +_2.text,
                              date: _2.value
                            }) : createCommentVNode("", true),
                            s3.$slots.day ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                              createTextVNode(toDisplayString(_2.text), 1)
                            ], 64)),
                            _2.marker && y3.value(_2) ? (openBlock(), createElementBlock(Fragment, { key: 2 }, [
                              s3.$slots.marker ? renderSlot(s3.$slots, "marker", {
                                key: 0,
                                marker: _2.marker,
                                day: +_2.text,
                                date: _2.value
                              }) : (openBlock(), createElementBlock("div", {
                                key: 1,
                                class: normalizeClass(re.value(_2.marker)),
                                style: normalizeStyle(_2.marker.color ? { backgroundColor: _2.marker.color } : {})
                              }, null, 6))
                            ], 64)) : createCommentVNode("", true),
                            ue.value(_2.value) ? (openBlock(), createElementBlock("div", {
                              key: 3,
                              class: "dp__marker_tooltip",
                              ref_for: true,
                              ref_key: "activeTooltip",
                              ref: J2,
                              style: normalizeStyle(g.value)
                            }, [
                              (R3 = _2.marker) != null && R3.tooltip ? (openBlock(), createElementBlock("div", {
                                key: 0,
                                class: "dp__tooltip_content",
                                onClick: Z2
                              }, [
                                (openBlock(true), createElementBlock(Fragment, null, renderList(_2.marker.tooltip, (F, Me2) => (openBlock(), createElementBlock("div", {
                                  key: Me2,
                                  class: "dp__tooltip_text"
                                }, [
                                  s3.$slots["marker-tooltip"] ? renderSlot(s3.$slots, "marker-tooltip", {
                                    key: 0,
                                    tooltip: F,
                                    day: _2.value
                                  }) : createCommentVNode("", true),
                                  s3.$slots["marker-tooltip"] ? createCommentVNode("", true) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                                    createBaseVNode("div", {
                                      class: "dp__tooltip_mark",
                                      style: normalizeStyle(F.color ? { backgroundColor: F.color } : {})
                                    }, null, 4),
                                    createBaseVNode("div", null, toDisplayString(F.text), 1)
                                  ], 64))
                                ]))), 128)),
                                createBaseVNode("div", {
                                  class: "dp__arrow_bottom_tp",
                                  style: normalizeStyle(h4.value)
                                }, null, 4)
                              ])) : createCommentVNode("", true)
                            ], 4)) : createCommentVNode("", true)
                          ], 2)
                        ], 40, eo);
                      }), 128))
                    ]))), 128))
                  ], 8, Xl)) : createCommentVNode("", true)
                ];
              }),
              _: 3
            }, 8, ["name", "css"])
          ], 64))
        ], 10, Gl)
      ], 2);
    };
  }
});
var ma = (e2) => Array.isArray(e2);
var no = (e2, n, a3, t2) => {
  const r = ref([]), { modelValue: l, calendars: c2, time: b2 } = Ft(e2, n), { defaultedMultiCalendars: k2, defaultedStartTime: P2 } = Ae(e2), { validateMonthYearInRange: g, isDisabled: S3, isDateRangeAllowed: Y2, checkMinMaxRange: G3 } = Tt(e2), { updateTimeValues: N2, getSetDateTime: K3, setTime: J2, assignStartTime: h4, validateTime: O2, disabledTimesConfig: p } = Va(e2, b2, l, t2), m3 = computed(
    () => (d3) => c2.value[d3] ? c2.value[d3].month : 0
  ), C2 = computed(
    () => (d3) => c2.value[d3] ? c2.value[d3].year : 0
  ), j = (d3, T2, ae) => {
    var se2, $e;
    c2.value[d3] || (c2.value[d3] = { month: 0, year: 0 }), c2.value[d3].month = ia(T2) ? (se2 = c2.value[d3]) == null ? void 0 : se2.month : T2, c2.value[d3].year = ia(ae) ? ($e = c2.value[d3]) == null ? void 0 : $e.year : ae;
  }, re = () => {
    e2.autoApply && n("select-date");
  };
  watch(l, (d3, T2) => {
    JSON.stringify(d3) !== JSON.stringify(T2) && y3();
  }), onMounted(() => {
    e2.shadow || (l.value || ($(), P2.value && h4(P2.value)), y3(true), e2.focusStartDate && e2.startDate && $());
  });
  const ue = computed(() => {
    var d3;
    return (d3 = e2.flow) != null && d3.length && !e2.partialFlow ? e2.flowStep === e2.flow.length : true;
  }), Q3 = () => {
    e2.autoApply && ue.value && n("auto-apply", e2.partialFlow);
  }, y3 = (d3 = false) => {
    if (l.value)
      return Array.isArray(l.value) ? (r.value = l.value, M3(d3)) : L2(l.value, d3);
    if (k2.value.count && d3 && !e2.startDate)
      return w2(H3(), d3);
  }, w2 = (d3, T2 = false) => {
    if ((!k2.value.count || !k2.value.static || T2) && j(0, getMonth(d3), getYear(d3)), k2.value.count)
      for (let ae = 1; ae < k2.value.count; ae++) {
        const se2 = set$1(H3(), { month: m3.value(ae - 1), year: C2.value(ae - 1) }), $e = add(se2, { months: 1 });
        c2.value[ae] = { month: getMonth($e), year: getYear($e) };
      }
  }, L2 = (d3, T2) => {
    w2(d3), J2("hours", getHours(d3)), J2("minutes", getMinutes(d3)), J2("seconds", getSeconds(d3)), k2.value.count && T2 && o();
  }, x2 = (d3) => {
    if (k2.value.count) {
      if (k2.value.solo)
        return 0;
      const T2 = getMonth(d3[0]), ae = getMonth(d3[1]);
      return Math.abs(ae - T2) < k2.value.count ? 0 : 1;
    }
    return 1;
  }, v = (d3, T2) => {
    d3[1] && e2.showLastInRange ? w2(d3[x2(d3)], T2) : w2(d3[0], T2);
    const ae = (se2, $e) => [
      se2(d3[0]),
      d3[1] ? se2(d3[1]) : b2[$e][1]
    ];
    J2("hours", ae(getHours, "hours")), J2("minutes", ae(getMinutes, "minutes")), J2("seconds", ae(getSeconds, "seconds"));
  }, E3 = (d3, T2) => {
    if ((e2.range || e2.weekPicker) && !e2.multiDates)
      return v(d3, T2);
    if (e2.multiDates && T2) {
      const ae = d3[d3.length - 1];
      return L2(ae, T2);
    }
  }, M3 = (d3) => {
    const T2 = l.value;
    E3(T2, d3), k2.value.count && k2.value.solo && o();
  }, A = (d3, T2) => {
    const ae = set$1(H3(), { month: m3.value(T2), year: C2.value(T2) }), se2 = d3 < 0 ? addMonths(ae, 1) : subMonths(ae, 1);
    g(getMonth(se2), getYear(se2), d3 < 0, e2.preventMinMaxNavigation) && (j(T2, getMonth(se2), getYear(se2)), k2.value.count && !k2.value.solo && i2(T2), a3());
  }, i2 = (d3) => {
    for (let T2 = d3 - 1; T2 >= 0; T2--) {
      const ae = subMonths(set$1(H3(), { month: m3.value(T2 + 1), year: C2.value(T2 + 1) }), 1);
      j(T2, getMonth(ae), getYear(ae));
    }
    for (let T2 = d3 + 1; T2 <= k2.value.count - 1; T2++) {
      const ae = addMonths(set$1(H3(), { month: m3.value(T2 - 1), year: C2.value(T2 - 1) }), 1);
      j(T2, getMonth(ae), getYear(ae));
    }
  }, o = () => {
    if (Array.isArray(l.value) && l.value.length === 2) {
      const d3 = H3(
        H3(l.value[1] ? l.value[1] : addMonths(l.value[0], 1))
      ), [T2, ae] = [getMonth(l.value[0]), getYear(l.value[0])], [se2, $e] = [getMonth(l.value[1]), getYear(l.value[1])];
      (T2 !== se2 || T2 === se2 && ae !== $e) && k2.value.solo && j(1, getMonth(d3), getYear(d3));
    } else
      l.value && !Array.isArray(l.value) && (j(0, getMonth(l.value), getYear(l.value)), w2(H3()));
  }, $ = () => {
    e2.startDate && (j(0, getMonth(H3(e2.startDate)), getYear(H3(e2.startDate))), k2.value.count && i2(0));
  }, Z2 = (d3, T2) => {
    e2.monthChangeOnScroll && A(e2.monthChangeOnScroll !== "inverse" ? -d3.deltaY : d3.deltaY, T2);
  }, s3 = (d3, T2, ae = false) => {
    e2.monthChangeOnArrows && e2.vertical === ae && I3(d3, T2);
  }, I3 = (d3, T2) => {
    A(d3 === "right" ? -1 : 1, T2);
  }, pe = (d3) => e2.markers.find((T2) => ye(da(d3.value), da(T2.date))), u2 = (d3, T2) => {
    switch (e2.sixWeeks === true ? "append" : e2.sixWeeks) {
      case "prepend":
        return [true, false];
      case "center":
        return [d3 == 0, true];
      case "fair":
        return [d3 == 0 || T2 > d3, true];
      case "append":
        return [false, false];
      default:
        return [false, false];
    }
  }, B3 = (d3, T2, ae, se2) => {
    if (e2.sixWeeks && d3.length < 6) {
      const $e = 6 - d3.length, tt2 = (T2.getDay() + 7 - se2) % 7, Lt = 6 - (ae.getDay() + 7 - se2) % 7, [Pt, fn2] = u2(tt2, Lt);
      for (let ut2 = 1; ut2 <= $e; ut2++)
        if (fn2 ? !!(ut2 % 2) == Pt : Pt) {
          const Ut2 = d3[0].days[0], vn = U2(addDays(Ut2.value, -7), getMonth(T2));
          d3.unshift({ days: vn });
        } else {
          const Ut2 = d3[d3.length - 1], vn = Ut2.days[Ut2.days.length - 1], Ua = U2(addDays(vn.value, 1), getMonth(T2));
          d3.push({ days: Ua });
        }
    }
    return d3;
  }, U2 = (d3, T2) => {
    const ae = H3(d3), se2 = [];
    for (let $e = 0; $e < 7; $e++) {
      const tt2 = addDays(ae, $e), St2 = getMonth(tt2) !== T2;
      se2.push({
        text: e2.hideOffsetDates && St2 ? "" : tt2.getDate(),
        value: tt2,
        current: !St2,
        classData: {}
      });
    }
    return se2;
  }, _2 = (d3, T2) => {
    const ae = [], se2 = H3(Ue(new Date(T2, d3), e2.timezone)), $e = H3(Ue(new Date(T2, d3 + 1, 0), e2.timezone)), tt2 = e2.weekStart, St2 = startOfWeek(se2, { weekStartsOn: tt2 }), Lt = (Pt) => {
      const fn2 = U2(Pt, d3);
      if (ae.push({ days: fn2 }), !ae[ae.length - 1].days.some(
        (ut2) => ye(We(ut2.value), We($e))
      )) {
        const ut2 = addDays(Pt, 7);
        Lt(ut2);
      }
    };
    return Lt(St2), B3(ae, se2, $e, tt2);
  }, q3 = (d3) => (l.value = Zt(H3(d3.value), e2.timezone, e2.weekStart), Q3()), ce2 = (d3) => {
    const T2 = ot(H3(d3.value), b2.hours, b2.minutes, Vt2());
    e2.multiDates ? tn(T2, l, e2.multiDatesLimit) : l.value = T2, t2(), nextTick().then(() => {
      Q3();
    });
  }, fe2 = (d3) => e2.noDisabledRange ? Ya(r.value[0], d3).some((ae) => S3(ae)) : false, R3 = () => {
    r.value = l.value ? l.value.slice() : [], r.value.length === 2 && !(e2.fixedStart || e2.fixedEnd) && (r.value = []);
  }, F = (d3, T2) => {
    const ae = [H3(d3.value), addDays(H3(d3.value), +e2.autoRange)];
    Y2(ae) && (T2 && Me2(d3.value), r.value = ae);
  }, Me2 = (d3) => {
    const T2 = getMonth(H3(d3)), ae = getYear(H3(d3));
    if (j(0, T2, ae), k2.value.count > 0)
      for (let se2 = 1; se2 < k2.value.count; se2++) {
        const $e = Lr(
          set$1(H3(d3), { year: m3.value(se2 - 1), month: C2.value(se2 - 1) })
        );
        j(se2, $e.month, $e.year);
      }
  }, ee2 = (d3) => Array.isArray(l.value) && l.value.length === 2 ? e2.fixedStart && (Ie(d3, l.value[0]) || ye(d3, l.value[0])) ? [l.value[0], d3] : e2.fixedEnd && (Re(d3, l.value[1]) || ye(d3, l.value[1])) ? [d3, l.value[1]] : (n("invalid-fixed-range", d3), l.value) : [], Le2 = (d3) => {
    fe2(d3.value) || !G3(d3.value, l.value, e2.fixedStart ? 0 : 1) || (r.value = ee2(H3(d3.value)));
  }, _e = (d3, T2) => {
    if (R3(), e2.autoRange)
      return F(d3, T2);
    if (e2.fixedStart || e2.fixedEnd)
      return Le2(d3);
    r.value[0] ? G3(H3(d3.value), l.value) && !fe2(d3.value) ? Re(H3(d3.value), H3(r.value[0])) ? (r.value.unshift(H3(d3.value)), n("range-end", r.value[0])) : (r.value[1] = H3(d3.value), n("range-end", r.value[1])) : e2.autoApply && n("auto-apply-invalid", d3.value) : (r.value[0] = H3(d3.value), n("range-start", r.value[0]));
  }, Vt2 = (d3 = true) => e2.enableSeconds ? Array.isArray(b2.seconds) ? d3 ? b2.seconds[0] : b2.seconds[1] : b2.seconds : 0, At = (d3) => {
    r.value[d3] = ot(
      r.value[d3],
      b2.hours[d3],
      b2.minutes[d3],
      Vt2(d3 !== 1)
    );
  }, an2 = () => {
    var d3, T2;
    r.value[0] && r.value[1] && +((d3 = r.value) == null ? void 0 : d3[0]) > +((T2 = r.value) == null ? void 0 : T2[1]) && (r.value.reverse(), n("range-start", r.value[0]), n("range-end", r.value[1]));
  }, rn2 = () => {
    r.value.length && (r.value[0] && !r.value[1] ? At(0) : (At(0), At(1), t2()), an2(), l.value = r.value.slice(), nn(r.value, n, e2.autoApply, e2.modelAuto));
  }, ln2 = (d3, T2 = false) => {
    if (!(S3(d3.value) || !d3.current && e2.hideOffsetDates)) {
      if (e2.weekPicker)
        return q3(d3);
      if (!e2.range)
        return ce2(d3);
      ma(b2.hours) && ma(b2.minutes) && !e2.multiDates && (_e(d3, T2), rn2());
    }
  }, on2 = (d3, T2) => {
    var se2;
    j(d3, T2.month, T2.year), k2.value.count && !k2.value.solo && i2(d3), n("update-month-year", { instance: d3, month: T2.month, year: T2.year }), a3(k2.value.solo ? d3 : void 0);
    const ae = (se2 = e2.flow) != null && se2.length ? e2.flow[e2.flowStep] : void 0;
    !T2.fromNav && (ae === Xe.month || ae === Xe.year) && t2();
  }, sn2 = (d3, T2) => {
    Array.isArray(d3) && d3.length <= 2 && e2.range ? l.value = d3.map((ae) => Ue(H3(ae), T2 ? void 0 : e2.timezone)) : Array.isArray(d3) || (l.value = Ue(H3(d3), T2 ? void 0 : e2.timezone)), re(), e2.multiCalendars && nextTick().then(() => y3(true));
  }, un2 = () => {
    e2.range ? l.value && Array.isArray(l.value) && l.value[0] ? l.value = Re(H3(), l.value[0]) ? [H3(), l.value[0]] : [l.value[0], H3()] : l.value = [H3()] : l.value = H3(), re();
  }, dn2 = () => {
    if (Array.isArray(l.value))
      if (e2.multiDates) {
        const d3 = cn2();
        l.value[l.value.length - 1] = K3(d3);
      } else
        l.value = l.value.map((d3, T2) => d3 && K3(d3, T2));
    else
      l.value = K3(l.value);
    n("time-update");
  }, cn2 = () => Array.isArray(l.value) && l.value.length ? l.value[l.value.length - 1] : null;
  return {
    calendars: c2,
    modelValue: l,
    month: m3,
    year: C2,
    time: b2,
    disabledTimesConfig: p,
    validateTime: O2,
    getCalendarDays: _2,
    getMarker: pe,
    handleScroll: Z2,
    handleSwipe: I3,
    handleArrow: s3,
    selectDate: ln2,
    updateMonthYear: on2,
    presetDate: sn2,
    selectCurrentDate: un2,
    updateTime: (d3, T2 = true, ae = false) => {
      N2(d3, T2, ae, dn2);
    }
  };
};
var ao = { key: 0 };
var ro = defineComponent({
  __name: "DatePicker",
  props: {
    ...qe
  },
  emits: [
    "tooltip-open",
    "tooltip-close",
    "mount",
    "update:internal-model-value",
    "update-flow-step",
    "reset-flow",
    "auto-apply",
    "focus-menu",
    "select-date",
    "range-start",
    "range-end",
    "invalid-fixed-range",
    "time-update",
    "am-pm-change",
    "time-picker-open",
    "time-picker-close",
    "recalculate-position",
    "update-month-year",
    "auto-apply-invalid"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, {
      calendars: r,
      month: l,
      year: c2,
      modelValue: b2,
      time: k2,
      disabledTimesConfig: P2,
      validateTime: g,
      getCalendarDays: S3,
      getMarker: Y2,
      handleArrow: G3,
      handleScroll: N2,
      handleSwipe: K3,
      selectDate: J2,
      updateMonthYear: h4,
      presetDate: O2,
      selectCurrentDate: p,
      updateTime: m3
    } = no(t2, a3, i2, o), C2 = useSlots(), { setHoverDate: j, getDayClassData: re, clearHoverDate: ue } = ol(b2, t2), { defaultedMultiCalendars: Q3 } = Ae(t2), y3 = ref([]), w2 = ref([]), L2 = ref(null), x2 = Ve(C2, "calendar"), v = Ve(C2, "monthYear"), E3 = Ve(C2, "timePicker"), M3 = (u2) => {
      t2.shadow || a3("mount", u2);
    };
    watch(
      r,
      () => {
        t2.shadow || setTimeout(() => {
          a3("recalculate-position");
        }, 0);
      },
      { deep: true }
    );
    const A = computed(() => (u2) => S3(l.value(u2), c2.value(u2)).map((B3) => ({
      ...B3,
      days: B3.days.map((U2) => (U2.marker = Y2(U2), U2.classData = re(U2), U2))
    })));
    function i2(u2) {
      var B3;
      u2 || u2 === 0 ? (B3 = w2.value[u2]) == null || B3.triggerTransition(l.value(u2), c2.value(u2)) : w2.value.forEach((U2, _2) => U2.triggerTransition(l.value(_2), c2.value(_2)));
    }
    function o() {
      a3("update-flow-step");
    }
    const $ = (u2, B3 = false) => {
      J2(u2, B3), t2.spaceConfirm && a3("select-date");
    };
    return n({
      clearHoverDate: ue,
      presetDate: O2,
      selectCurrentDate: p,
      toggleMonthPicker: (u2, B3, U2 = 0) => {
        var _2;
        (_2 = y3.value[U2]) == null || _2.toggleMonthPicker(u2, B3);
      },
      toggleYearPicker: (u2, B3, U2 = 0) => {
        var _2;
        (_2 = y3.value[U2]) == null || _2.toggleYearPicker(u2, B3);
      },
      toggleTimePicker: (u2, B3, U2) => {
        var _2;
        (_2 = L2.value) == null || _2.toggleTimePicker(u2, B3, U2);
      },
      handleArrow: G3,
      updateMonthYear: h4,
      getSidebarProps: () => ({
        modelValue: b2,
        month: l,
        year: c2,
        time: k2,
        updateTime: m3,
        updateMonthYear: h4,
        selectDate: J2,
        presetDate: O2
      })
    }), (u2, B3) => (openBlock(), createElementBlock(Fragment, null, [
      createVNode(en, {
        "multi-calendars": unref(Q3).count
      }, {
        default: withCtx(({ instance: U2, index: _2 }) => [
          u2.disableMonthYearSelect ? createCommentVNode("", true) : (openBlock(), createBlock(Kl, mergeProps({
            key: 0,
            ref: (q3) => {
              q3 && (y3.value[_2] = q3);
            },
            months: unref(Sa)(u2.formatLocale, u2.locale, u2.monthNameFormat),
            years: unref(Kn)(u2.yearRange, u2.reverseYears),
            month: unref(l)(U2),
            year: unref(c2)(U2),
            instance: U2
          }, u2.$props, {
            onMount: B3[0] || (B3[0] = (q3) => M3(unref(gt).header)),
            onResetFlow: B3[1] || (B3[1] = (q3) => u2.$emit("reset-flow")),
            onUpdateMonthYear: (q3) => unref(h4)(U2, q3),
            onOverlayClosed: B3[2] || (B3[2] = (q3) => u2.$emit("focus-menu"))
          }), createSlots({ _: 2 }, [
            renderList(unref(v), (q3, ce2) => ({
              name: q3,
              fn: withCtx((fe2) => [
                renderSlot(u2.$slots, q3, normalizeProps(guardReactiveProps(fe2)))
              ])
            }))
          ]), 1040, ["months", "years", "month", "year", "instance", "onUpdateMonthYear"])),
          createVNode(to, mergeProps({
            ref: (q3) => {
              q3 && (w2.value[_2] = q3);
            },
            "mapped-dates": A.value(U2),
            month: unref(l)(U2),
            year: unref(c2)(U2),
            instance: U2
          }, u2.$props, {
            onSelectDate: (q3) => unref(J2)(q3, U2 !== 1),
            onHandleSpace: (q3) => $(q3, U2 !== 1),
            onSetHoverDate: B3[3] || (B3[3] = (q3) => unref(j)(q3)),
            onHandleScroll: (q3) => unref(N2)(q3, U2),
            onHandleSwipe: (q3) => unref(K3)(q3, U2),
            onMount: B3[4] || (B3[4] = (q3) => M3(unref(gt).calendar)),
            onResetFlow: B3[5] || (B3[5] = (q3) => u2.$emit("reset-flow")),
            onTooltipOpen: B3[6] || (B3[6] = (q3) => u2.$emit("tooltip-open", q3)),
            onTooltipClose: B3[7] || (B3[7] = (q3) => u2.$emit("tooltip-close", q3))
          }), createSlots({ _: 2 }, [
            renderList(unref(x2), (q3, ce2) => ({
              name: q3,
              fn: withCtx((fe2) => [
                renderSlot(u2.$slots, q3, normalizeProps(guardReactiveProps({ ...fe2 })))
              ])
            }))
          ]), 1040, ["mapped-dates", "month", "year", "instance", "onSelectDate", "onHandleSpace", "onHandleScroll", "onHandleSwipe"])
        ]),
        _: 3
      }, 8, ["multi-calendars"]),
      u2.enableTimePicker ? (openBlock(), createElementBlock("div", ao, [
        u2.$slots["time-picker"] ? renderSlot(u2.$slots, "time-picker", normalizeProps(mergeProps({ key: 0 }, { time: unref(k2), updateTime: unref(m3) }))) : (openBlock(), createBlock(Ha, mergeProps({
          key: 1,
          ref_key: "timePickerRef",
          ref: L2
        }, u2.$props, {
          hours: unref(k2).hours,
          minutes: unref(k2).minutes,
          seconds: unref(k2).seconds,
          "internal-model-value": u2.internalModelValue,
          "disabled-times-config": unref(P2),
          "validate-time": unref(g),
          onMount: B3[8] || (B3[8] = (U2) => M3(unref(gt).timePicker)),
          "onUpdate:hours": B3[9] || (B3[9] = (U2) => unref(m3)(U2)),
          "onUpdate:minutes": B3[10] || (B3[10] = (U2) => unref(m3)(U2, false)),
          "onUpdate:seconds": B3[11] || (B3[11] = (U2) => unref(m3)(U2, false, true)),
          onResetFlow: B3[12] || (B3[12] = (U2) => u2.$emit("reset-flow")),
          onOverlayClosed: B3[13] || (B3[13] = (U2) => u2.$emit("time-picker-close")),
          onOverlayOpened: B3[14] || (B3[14] = (U2) => u2.$emit("time-picker-open", U2)),
          onAmPmChange: B3[15] || (B3[15] = (U2) => u2.$emit("am-pm-change", U2))
        }), createSlots({ _: 2 }, [
          renderList(unref(E3), (U2, _2) => ({
            name: U2,
            fn: withCtx((q3) => [
              renderSlot(u2.$slots, U2, normalizeProps(guardReactiveProps(q3)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"]))
      ])) : createCommentVNode("", true)
    ], 64));
  }
});
var lo = (e2, n) => {
  const a3 = ref(), { defaultedMultiCalendars: t2, defaultedConfig: r } = Ae(e2), { modelValue: l, year: c2, month: b2, calendars: k2 } = Ft(e2, n), { isDisabled: P2 } = Tt(e2), { selectYear: g, groupedYears: S3, showYearPicker: Y2, isDisabled: G3, toggleYearPicker: N2, handleYearSelect: K3, handleYear: J2 } = Fa({
    modelValue: l,
    multiCalendars: t2,
    calendars: k2,
    month: b2,
    year: c2,
    props: e2,
    emit: n
  }), h4 = (y3, w2) => [y3, w2].map((L2) => format(L2, "MMMM", { locale: e2.formatLocale })).join("-"), O2 = computed(() => (y3) => l.value ? Array.isArray(l.value) ? l.value.some((w2) => isSameQuarter(y3, w2)) : isSameQuarter(l.value, y3) : false), p = (y3) => {
    if (e2.range) {
      if (Array.isArray(l.value)) {
        const w2 = ye(y3, l.value[0]) || ye(y3, l.value[1]);
        return Xt(l.value, a3.value, y3) && !w2;
      }
      return false;
    }
    return false;
  }, m3 = computed(() => (y3) => {
    const w2 = set$1(new Date(), { year: c2.value(y3) });
    return eachQuarterOfInterval({
      start: startOfYear(w2),
      end: endOfYear(w2)
    }).map((L2) => {
      const x2 = startOfQuarter(L2), v = endOfQuarter(L2), E3 = P2(L2), M3 = p(x2);
      return {
        text: h4(x2, v),
        value: x2,
        active: O2.value(x2),
        disabled: E3,
        isBetween: M3
      };
    });
  }), C2 = (y3) => {
    tn(y3, l, e2.multiDatesLimit), n("auto-apply", true);
  }, j = (y3) => {
    const w2 = Gn(l, y3, n);
    nn(w2, n, e2.autoApply, e2.modelAuto);
  }, re = (y3) => {
    l.value = y3, n("auto-apply");
  };
  return {
    defaultedConfig: r,
    defaultedMultiCalendars: t2,
    groupedYears: S3,
    year: c2,
    isDisabled: G3,
    quarters: m3,
    showYearPicker: Y2,
    setHoverDate: (y3) => {
      a3.value = y3;
    },
    selectYear: g,
    selectQuarter: (y3, w2, L2) => {
      if (!L2)
        return k2.value[w2].month = getMonth(endOfQuarter(y3)), e2.multiDates ? C2(y3) : e2.range ? j(y3) : re(y3);
    },
    toggleYearPicker: N2,
    handleYearSelect: K3,
    handleYear: J2
  };
};
var oo = { class: "dp--quarter-items" };
var so = ["disabled", "onClick", "onMouseover"];
var io = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "QuarterPicker",
  props: {
    ...qe
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "overlay-closed",
    "auto-apply",
    "range-start",
    "range-end"
  ],
  setup(e2, { emit: n }) {
    const a3 = e2, t2 = useSlots(), r = Ve(t2, "yearMode"), {
      defaultedMultiCalendars: l,
      defaultedConfig: c2,
      groupedYears: b2,
      year: k2,
      isDisabled: P2,
      quarters: g,
      showYearPicker: S3,
      setHoverDate: Y2,
      selectQuarter: G3,
      toggleYearPicker: N2,
      handleYearSelect: K3,
      handleYear: J2
    } = lo(a3, n);
    return (h4, O2) => (openBlock(), createBlock(en, {
      "multi-calendars": unref(l).count,
      stretch: ""
    }, {
      default: withCtx(({ instance: p }) => [
        createBaseVNode("div", {
          class: "dp-quarter-picker-wrap",
          style: normalizeStyle({ minHeight: `${unref(c2).modeHeight}px` })
        }, [
          createBaseVNode("div", null, [
            createVNode(Ea, mergeProps(h4.$props, {
              items: unref(b2)(p),
              instance: p,
              "show-year-picker": unref(S3)[p],
              year: unref(k2)(p),
              "is-disabled": (m3) => unref(P2)(p, m3),
              onHandleYear: (m3) => unref(J2)(p, m3),
              onYearSelect: (m3) => unref(K3)(m3, p),
              onToggleYearPicker: (m3) => unref(N2)(p, m3 == null ? void 0 : m3.flow, m3 == null ? void 0 : m3.show)
            }), createSlots({ _: 2 }, [
              renderList(unref(r), (m3, C2) => ({
                name: m3,
                fn: withCtx((j) => [
                  renderSlot(h4.$slots, m3, normalizeProps(guardReactiveProps(j)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          createBaseVNode("div", oo, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(g)(p), (m3, C2) => (openBlock(), createElementBlock("div", { key: C2 }, [
              createBaseVNode("button", {
                type: "button",
                class: normalizeClass(["dp--qr-btn", {
                  "dp--qr-btn-active": m3.active,
                  "dp--qr-btn-between": m3.isBetween,
                  "dp--qr-btn-disabled": m3.disabled
                }]),
                disabled: m3.disabled,
                onClick: (j) => unref(G3)(m3.value, p, m3.disabled),
                onMouseover: (j) => unref(Y2)(m3.value)
              }, [
                h4.$slots.quarter ? renderSlot(h4.$slots, "quarter", {
                  key: 0,
                  value: m3.value,
                  text: m3.text
                }) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
                  createTextVNode(toDisplayString(m3.text), 1)
                ], 64))
              ], 42, so)
            ]))), 128))
          ])
        ], 4)
      ]),
      _: 3
    }, 8, ["multi-calendars"]));
  }
});
var uo = ["id", "onKeydown"];
var co = {
  key: 0,
  class: "dp__sidebar_left"
};
var fo = {
  key: 1,
  class: "dp--preset-dates"
};
var vo = ["onClick", "onKeydown"];
var mo = {
  key: 2,
  class: "dp__sidebar_right"
};
var go = {
  key: 3,
  class: "dp__action_extra"
};
var ga = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerMenu",
  props: {
    ...xt,
    shadow: { type: Boolean, default: false },
    openOnTop: { type: Boolean, default: false },
    internalModelValue: { type: [Date, Array], default: null },
    arrMapValues: { type: Object, default: () => ({}) }
  },
  emits: [
    "close-picker",
    "select-date",
    "auto-apply",
    "time-update",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "update:internal-model-value",
    "recalculate-position",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "auto-apply-invalid"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, r = computed(() => {
      const { openOnTop: R3, ...F } = t2;
      return {
        ...F,
        flowStep: re.value
      };
    }), { setMenuFocused: l, setShiftKey: c2, control: b2 } = Ba(), k2 = useSlots(), { defaultedTextInput: P2, defaultedInline: g, defaultedConfig: S3 } = Ae(t2), Y2 = ref(null), G3 = ref(0), N2 = ref(null), K3 = ref(null), J2 = ref(false), h4 = ref(null);
    onMounted(() => {
      if (!t2.shadow) {
        J2.value = true, O2(), window.addEventListener("resize", O2);
        const R3 = Se(N2);
        if (R3 && !P2.value.enabled && !g.value.enabled && (l(true), L2()), R3) {
          const F = (Me2) => {
            S3.value.allowPreventDefault && Me2.preventDefault(), lt(Me2, S3.value, true);
          };
          R3.addEventListener("pointerdown", F), R3.addEventListener("mousedown", F);
        }
      }
    }), onUnmounted(() => {
      window.removeEventListener("resize", O2);
    });
    const O2 = () => {
      const R3 = Se(K3);
      R3 && (G3.value = R3.getBoundingClientRect().width);
    }, { arrowRight: p, arrowLeft: m3, arrowDown: C2, arrowUp: j } = it(), { flowStep: re, updateFlowStep: ue, childMount: Q3, resetFlow: y3 } = sl(t2, a3, h4), w2 = computed(() => t2.monthPicker ? $l : t2.yearPicker ? Al : t2.timePicker ? zl : t2.quarterPicker ? io : ro), L2 = () => {
      const R3 = Se(N2);
      R3 && R3.focus({ preventScroll: true });
    }, x2 = computed(() => {
      var R3;
      return ((R3 = h4.value) == null ? void 0 : R3.getSidebarProps()) || {};
    }), v = () => {
      t2.openOnTop && a3("recalculate-position");
    }, E3 = Ve(k2, "action"), M3 = computed(() => t2.monthPicker || t2.yearPicker ? Ve(k2, "monthYear") : t2.timePicker ? Ve(k2, "timePicker") : Ve(k2, "shared")), A = computed(() => t2.openOnTop ? "dp__arrow_bottom" : "dp__arrow_top"), i2 = computed(() => ({
      dp__menu_disabled: t2.disabled,
      dp__menu_readonly: t2.readonly
    })), o = computed(
      () => ({
        dp__menu: true,
        dp__menu_index: !g.value.enabled,
        dp__relative: g.value.enabled,
        [t2.menuClassName]: !!t2.menuClassName
      })
    ), $ = (R3) => {
      lt(R3, S3.value, true);
    }, Z2 = () => {
      t2.escClose && a3("close-picker");
    }, s3 = (R3) => {
      if (t2.arrowNavigation) {
        if (R3 === "up")
          return j();
        if (R3 === "down")
          return C2();
        if (R3 === "left")
          return m3();
        if (R3 === "right")
          return p();
      } else
        R3 === "left" || R3 === "up" ? U2("handleArrow", "left", 0, R3 === "up") : U2("handleArrow", "right", 0, R3 === "down");
    }, I3 = (R3) => {
      c2(R3.shiftKey), !t2.disableMonthYearSelect && R3.code === "Tab" && R3.target.classList.contains("dp__menu") && b2.value.shiftKeyInMenu && (R3.preventDefault(), lt(R3, S3.value, true), a3("close-picker"));
    }, pe = () => {
      L2(), a3("time-picker-close");
    }, u2 = (R3) => {
      var F, Me2, ee2;
      (F = h4.value) == null || F.toggleTimePicker(false, false), (Me2 = h4.value) == null || Me2.toggleMonthPicker(false, false, R3), (ee2 = h4.value) == null || ee2.toggleYearPicker(false, false, R3);
    }, B3 = (R3, F = 0) => {
      var Me2, ee2, Le2;
      return R3 === "month" ? (Me2 = h4.value) == null ? void 0 : Me2.toggleMonthPicker(false, true, F) : R3 === "year" ? (ee2 = h4.value) == null ? void 0 : ee2.toggleYearPicker(false, true, F) : R3 === "time" ? (Le2 = h4.value) == null ? void 0 : Le2.toggleTimePicker(true, false) : u2(F);
    }, U2 = (R3, ...F) => {
      var Me2, ee2;
      (Me2 = h4.value) != null && Me2[R3] && ((ee2 = h4.value) == null || ee2[R3](...F));
    }, _2 = () => {
      U2("selectCurrentDate");
    }, q3 = (R3, F) => {
      U2("presetDate", R3, F);
    }, ce2 = () => {
      U2("clearHoverDate");
    };
    return n({
      updateMonthYear: (R3, F) => {
        U2("updateMonthYear", R3, F);
      },
      switchView: B3
    }), (R3, F) => {
      var Me2;
      return openBlock(), createElementBlock("div", {
        id: R3.uid ? `dp-menu-${R3.uid}` : void 0,
        tabindex: "0",
        ref_key: "dpMenuRef",
        ref: N2,
        role: "dialog",
        class: normalizeClass(o.value),
        onMouseleave: ce2,
        onClick: $,
        onKeydown: [
          withKeys(Z2, ["esc"]),
          F[16] || (F[16] = withKeys(withModifiers((ee2) => s3("left"), ["prevent"]), ["left"])),
          F[17] || (F[17] = withKeys(withModifiers((ee2) => s3("up"), ["prevent"]), ["up"])),
          F[18] || (F[18] = withKeys(withModifiers((ee2) => s3("down"), ["prevent"]), ["down"])),
          F[19] || (F[19] = withKeys(withModifiers((ee2) => s3("right"), ["prevent"]), ["right"])),
          I3
        ]
      }, [
        (R3.disabled || R3.readonly) && unref(g).enabled ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: normalizeClass(i2.value)
        }, null, 2)) : createCommentVNode("", true),
        !unref(g).enabled && !R3.teleportCenter ? (openBlock(), createElementBlock("div", {
          key: 1,
          class: normalizeClass(A.value)
        }, null, 2)) : createCommentVNode("", true),
        createBaseVNode("div", {
          ref_key: "innerMenuRef",
          ref: K3,
          class: normalizeClass({
            dp__menu_content_wrapper: ((Me2 = R3.presetDates) == null ? void 0 : Me2.length) || !!R3.$slots["left-sidebar"] || !!R3.$slots["right-sidebar"]
          }),
          style: normalizeStyle({ "--dp-menu-width": `${G3.value}px` })
        }, [
          R3.$slots["left-sidebar"] ? (openBlock(), createElementBlock("div", co, [
            renderSlot(R3.$slots, "left-sidebar", normalizeProps(guardReactiveProps(x2.value)))
          ])) : createCommentVNode("", true),
          R3.presetDates.length ? (openBlock(), createElementBlock("div", fo, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(R3.presetDates, (ee2, Le2) => (openBlock(), createElementBlock(Fragment, { key: Le2 }, [
              ee2.slot ? renderSlot(R3.$slots, ee2.slot, {
                key: 0,
                presetDate: q3,
                label: ee2.label,
                value: ee2.value
              }) : (openBlock(), createElementBlock("button", {
                key: 1,
                type: "button",
                style: normalizeStyle(ee2.style || {}),
                class: "dp__btn dp--preset-range",
                onClick: withModifiers((_e) => q3(ee2.value, ee2.noTz), ["prevent"]),
                onKeydown: [
                  withKeys(withModifiers((_e) => q3(ee2.value, ee2.noTz), ["prevent"]), ["enter"]),
                  withKeys(withModifiers((_e) => q3(ee2.value, ee2.noTz), ["prevent"]), ["space"])
                ]
              }, toDisplayString(ee2.label), 45, vo))
            ], 64))), 128))
          ])) : createCommentVNode("", true),
          createBaseVNode("div", {
            class: "dp__instance_calendar",
            ref_key: "calendarWrapperRef",
            ref: Y2,
            role: "document"
          }, [
            (openBlock(), createBlock(resolveDynamicComponent(w2.value), mergeProps({
              ref_key: "dynCmpRef",
              ref: h4
            }, r.value, {
              "flow-step": unref(re),
              onMount: unref(Q3),
              onUpdateFlowStep: unref(ue),
              onResetFlow: unref(y3),
              onFocusMenu: L2,
              onSelectDate: F[0] || (F[0] = (ee2) => R3.$emit("select-date")),
              onTooltipOpen: F[1] || (F[1] = (ee2) => R3.$emit("tooltip-open", ee2)),
              onTooltipClose: F[2] || (F[2] = (ee2) => R3.$emit("tooltip-close", ee2)),
              onAutoApply: F[3] || (F[3] = (ee2) => R3.$emit("auto-apply", ee2)),
              onRangeStart: F[4] || (F[4] = (ee2) => R3.$emit("range-start", ee2)),
              onRangeEnd: F[5] || (F[5] = (ee2) => R3.$emit("range-end", ee2)),
              onInvalidFixedRange: F[6] || (F[6] = (ee2) => R3.$emit("invalid-fixed-range", ee2)),
              onTimeUpdate: F[7] || (F[7] = (ee2) => R3.$emit("time-update")),
              onAmPmChange: F[8] || (F[8] = (ee2) => R3.$emit("am-pm-change", ee2)),
              onTimePickerOpen: F[9] || (F[9] = (ee2) => R3.$emit("time-picker-open", ee2)),
              onTimePickerClose: pe,
              onRecalculatePosition: v,
              onUpdateMonthYear: F[10] || (F[10] = (ee2) => R3.$emit("update-month-year", ee2)),
              onAutoApplyInvalid: F[11] || (F[11] = (ee2) => R3.$emit("auto-apply-invalid", ee2)),
              "onUpdate:internalModelValue": F[12] || (F[12] = (ee2) => R3.$emit("update:internal-model-value", ee2))
            }), createSlots({ _: 2 }, [
              renderList(M3.value, (ee2, Le2) => ({
                name: ee2,
                fn: withCtx((_e) => [
                  renderSlot(R3.$slots, ee2, normalizeProps(guardReactiveProps({ ..._e })))
                ])
              }))
            ]), 1040, ["flow-step", "onMount", "onUpdateFlowStep", "onResetFlow"]))
          ], 512),
          R3.$slots["right-sidebar"] ? (openBlock(), createElementBlock("div", mo, [
            renderSlot(R3.$slots, "right-sidebar", normalizeProps(guardReactiveProps(x2.value)))
          ])) : createCommentVNode("", true),
          R3.$slots["action-extra"] ? (openBlock(), createElementBlock("div", go, [
            R3.$slots["action-extra"] ? renderSlot(R3.$slots, "action-extra", {
              key: 0,
              selectCurrentDate: _2
            }) : createCommentVNode("", true)
          ])) : createCommentVNode("", true)
        ], 6),
        !R3.autoApply || unref(S3).keepActionRow ? (openBlock(), createBlock(gl, mergeProps({
          key: 2,
          "menu-mount": J2.value
        }, r.value, {
          "calendar-width": G3.value,
          onClosePicker: F[13] || (F[13] = (ee2) => R3.$emit("close-picker")),
          onSelectDate: F[14] || (F[14] = (ee2) => R3.$emit("select-date")),
          onInvalidSelect: F[15] || (F[15] = (ee2) => R3.$emit("invalid-select")),
          onSelectNow: _2
        }), createSlots({ _: 2 }, [
          renderList(unref(E3), (ee2, Le2) => ({
            name: ee2,
            fn: withCtx((_e) => [
              renderSlot(R3.$slots, ee2, normalizeProps(guardReactiveProps({ ..._e })))
            ])
          }))
        ]), 1040, ["menu-mount", "calendar-width"])) : createCommentVNode("", true)
      ], 42, uo);
    };
  }
});
var yo = typeof window < "u" ? window : void 0;
var Tn = () => {
};
var ho = (e2) => getCurrentScope() ? (onScopeDispose(e2), true) : false;
var po = (e2, n, a3, t2) => {
  if (!e2)
    return Tn;
  let r = Tn;
  const l = watch(
    () => unref(e2),
    (b2) => {
      r(), b2 && (b2.addEventListener(n, a3, t2), r = () => {
        b2.removeEventListener(n, a3, t2), r = Tn;
      });
    },
    { immediate: true, flush: "post" }
  ), c2 = () => {
    l(), r();
  };
  return ho(c2), c2;
};
var bo = (e2, n, a3, t2 = {}) => {
  const { window: r = yo, event: l = "pointerdown" } = t2;
  return r ? po(r, l, (b2) => {
    const k2 = Se(e2), P2 = Se(n);
    !k2 || !P2 || k2 === b2.target || b2.composedPath().includes(k2) || b2.composedPath().includes(P2) || a3(b2);
  }, { passive: true }) : void 0;
};
var ko = defineComponent({
  compatConfig: {
    MODE: 3
  },
  __name: "VueDatePicker",
  props: {
    ...xt
  },
  emits: [
    "update:model-value",
    "update:model-timezone-value",
    "text-submit",
    "closed",
    "cleared",
    "open",
    "focus",
    "blur",
    "internal-model-change",
    "recalculate-position",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end"
  ],
  setup(e2, { expose: n, emit: a3 }) {
    const t2 = e2, r = useSlots(), l = ref(false), c2 = toRef(t2, "modelValue"), b2 = toRef(t2, "timezone"), k2 = ref(null), P2 = ref(null), g = ref(null), S3 = ref(false), Y2 = ref(null), { setMenuFocused: G3, setShiftKey: N2 } = Ba(), { clearArrowNav: K3 } = it(), { mapDatesArrToMap: J2, validateDate: h4, isValidTime: O2 } = Tt(t2), { defaultedTransitions: p, defaultedTextInput: m3, defaultedInline: C2, defaultedConfig: j } = Ae(t2), { menuTransition: re, showTransition: ue } = Et(p);
    onMounted(() => {
      $(t2.modelValue), nextTick().then(() => {
        C2.value.enabled || (M3(Y2.value).addEventListener("scroll", U2), window.addEventListener("resize", _2));
      }), C2.value.enabled && (l.value = true);
    });
    const Q3 = computed(() => J2());
    onUnmounted(() => {
      if (!C2.value.enabled) {
        const ne2 = M3(Y2.value);
        ne2 && ne2.removeEventListener("scroll", U2), window.removeEventListener("resize", _2);
      }
    });
    const y3 = Ve(r, "all", t2.presetDates), w2 = Ve(r, "input");
    watch(
      [c2, b2],
      () => {
        $(c2.value);
      },
      { deep: true }
    );
    const { openOnTop: L2, menuStyle: x2, xCorrect: v, setMenuPosition: E3, getScrollableParent: M3, shadowRender: A } = al({
      menuRef: k2,
      menuRefInner: P2,
      inputRef: g,
      pickerWrapperRef: Y2,
      inline: C2,
      emit: a3,
      props: t2,
      slots: r
    }), {
      inputValue: i2,
      internalModelValue: o,
      parseExternalModelValue: $,
      emitModelValue: Z2,
      formatInputValue: s3,
      checkBeforeEmit: I3
    } = tl(a3, t2, S3), pe = computed(
      () => ({
        dp__main: true,
        dp__theme_dark: t2.dark,
        dp__theme_light: !t2.dark,
        dp__flex_display: C2.value.enabled,
        dp__flex_display_with_input: C2.value.input
      })
    ), u2 = computed(() => t2.dark ? "dp__theme_dark" : "dp__theme_light"), B3 = computed(() => t2.teleport ? {
      to: typeof t2.teleport == "boolean" ? "body" : t2.teleport,
      disabled: C2.value.enabled
    } : { class: "dp__outer_menu_wrap" }), U2 = () => {
      l.value && (j.value.closeOnScroll ? _e() : E3());
    }, _2 = () => {
      l.value && E3();
    }, q3 = () => {
      !t2.disabled && !t2.readonly && (A(ga, t2), E3(false), l.value = true, l.value && a3("open"), l.value || Le2(), $(t2.modelValue));
    }, ce2 = () => {
      var ne2;
      i2.value = "", Le2(), (ne2 = g.value) == null || ne2.setParsedDate(null), a3("update:model-value", null), a3("update:model-timezone-value", null), a3("cleared"), j.value.closeOnClearValue && _e();
    }, fe2 = () => {
      const ne2 = o.value;
      return !ne2 || !Array.isArray(ne2) && h4(ne2) ? true : Array.isArray(ne2) ? ne2.length === 2 && h4(ne2[0]) && h4(ne2[1]) ? true : t2.partialRange && !t2.timePicker ? h4(ne2[0]) : false : false;
    }, R3 = () => {
      I3() && fe2() ? (Z2(), _e()) : a3("invalid-select", o.value);
    }, F = (ne2) => {
      Me2(), Z2(), j.value.closeOnAutoApply && !ne2 && _e();
    }, Me2 = () => {
      g.value && m3.value.enabled && g.value.setParsedDate(o.value);
    }, ee2 = (ne2 = false) => {
      t2.autoApply && O2(o.value) && fe2() && (t2.range && Array.isArray(o.value) ? (t2.partialRange || o.value.length === 2) && F(ne2) : F(ne2));
    }, Le2 = () => {
      m3.value.enabled || (o.value = null);
    }, _e = () => {
      C2.value.enabled || (l.value && (l.value = false, v.value = false, G3(false), N2(false), K3(), a3("closed"), i2.value && $(c2.value)), Le2(), a3("blur"));
    }, Vt2 = (ne2, d3) => {
      if (!ne2) {
        o.value = null;
        return;
      }
      const T2 = Array.isArray(ne2) ? !ne2.some((se2) => !h4(se2)) : h4(ne2), ae = O2(ne2);
      T2 && ae && (o.value = ne2, d3 && (R3(), a3("text-submit")));
    }, At = () => {
      t2.autoApply && O2(o.value) && Z2(), Me2();
    }, an2 = () => l.value ? _e() : q3(), rn2 = (ne2) => {
      o.value = ne2;
    }, ln2 = () => {
      m3.value.enabled && (S3.value = true, s3()), a3("focus");
    }, on2 = () => {
      m3.value.enabled && (S3.value = false, $(t2.modelValue)), a3("blur");
    }, sn2 = (ne2) => {
      P2.value && P2.value.updateMonthYear(0, {
        month: sa(ne2.month),
        year: sa(ne2.year)
      });
    }, un2 = (ne2) => {
      $(ne2 != null ? ne2 : t2.modelValue);
    }, dn2 = (ne2, d3) => {
      var T2;
      (T2 = P2.value) == null || T2.switchView(ne2, d3);
    }, cn2 = (ne2) => j.value.onClickOutside ? j.value.onClickOutside(ne2) : _e();
    return bo(k2, g, () => cn2(fe2)), n({
      closeMenu: _e,
      selectDate: R3,
      clearValue: ce2,
      openMenu: q3,
      onScroll: U2,
      formatInputValue: s3,
      updateInternalModelValue: rn2,
      setMonthYear: sn2,
      parseModel: un2,
      switchView: dn2
    }), (ne2, d3) => (openBlock(), createElementBlock("div", {
      class: normalizeClass(pe.value),
      ref_key: "pickerWrapperRef",
      ref: Y2
    }, [
      createVNode(cl, mergeProps({
        ref_key: "inputRef",
        ref: g,
        "is-menu-open": l.value,
        "input-value": unref(i2),
        "onUpdate:inputValue": d3[0] || (d3[0] = (T2) => isRef(i2) ? i2.value = T2 : null)
      }, ne2.$props, {
        onClear: ce2,
        onOpen: q3,
        onSetInputDate: Vt2,
        onSetEmptyDate: unref(Z2),
        onSelectDate: R3,
        onToggle: an2,
        onClose: _e,
        onFocus: ln2,
        onBlur: on2,
        onRealBlur: d3[1] || (d3[1] = (T2) => S3.value = false)
      }), createSlots({ _: 2 }, [
        renderList(unref(w2), (T2, ae) => ({
          name: T2,
          fn: withCtx((se2) => [
            renderSlot(ne2.$slots, T2, normalizeProps(guardReactiveProps(se2)))
          ])
        }))
      ]), 1040, ["is-menu-open", "input-value", "onSetEmptyDate"]),
      createVNode(Transition, {
        name: unref(re)(unref(L2)),
        css: unref(ue) && !unref(C2).enabled
      }, {
        default: withCtx(() => [
          l.value ? (openBlock(), createBlock(resolveDynamicComponent(ne2.teleport ? Teleport : "div"), mergeProps({
            key: 0,
            ref_key: "dpWrapMenuRef",
            ref: k2
          }, B3.value, {
            class: { "dp--menu-wrapper": !unref(C2).enabled },
            style: unref(C2).enabled ? void 0 : unref(x2)
          }), {
            default: withCtx(() => [
              createVNode(ga, mergeProps({
                ref_key: "dpMenuRef",
                ref: P2,
                class: { [u2.value]: true, "dp--menu-wrapper": ne2.teleport },
                style: ne2.teleport ? unref(x2) : void 0,
                "open-on-top": unref(L2),
                "arr-map-values": Q3.value
              }, ne2.$props, {
                "internal-model-value": unref(o),
                "onUpdate:internalModelValue": d3[2] || (d3[2] = (T2) => isRef(o) ? o.value = T2 : null),
                onClosePicker: _e,
                onSelectDate: R3,
                onAutoApply: ee2,
                onTimeUpdate: At,
                onFlowStep: d3[3] || (d3[3] = (T2) => ne2.$emit("flow-step", T2)),
                onUpdateMonthYear: d3[4] || (d3[4] = (T2) => ne2.$emit("update-month-year", T2)),
                onInvalidSelect: d3[5] || (d3[5] = (T2) => ne2.$emit("invalid-select", unref(o))),
                onAutoApplyInvalid: d3[6] || (d3[6] = (T2) => ne2.$emit("invalid-select", T2)),
                onInvalidFixedRange: d3[7] || (d3[7] = (T2) => ne2.$emit("invalid-fixed-range", T2)),
                onRecalculatePosition: unref(E3),
                onTooltipOpen: d3[8] || (d3[8] = (T2) => ne2.$emit("tooltip-open", T2)),
                onTooltipClose: d3[9] || (d3[9] = (T2) => ne2.$emit("tooltip-close", T2)),
                onTimePickerOpen: d3[10] || (d3[10] = (T2) => ne2.$emit("time-picker-open", T2)),
                onTimePickerClose: d3[11] || (d3[11] = (T2) => ne2.$emit("time-picker-close", T2)),
                onAmPmChange: d3[12] || (d3[12] = (T2) => ne2.$emit("am-pm-change", T2)),
                onRangeStart: d3[13] || (d3[13] = (T2) => ne2.$emit("range-start", T2)),
                onRangeEnd: d3[14] || (d3[14] = (T2) => ne2.$emit("range-end", T2))
              }), createSlots({ _: 2 }, [
                renderList(unref(y3), (T2, ae) => ({
                  name: T2,
                  fn: withCtx((se2) => [
                    renderSlot(ne2.$slots, T2, normalizeProps(guardReactiveProps({ ...se2 })))
                  ])
                }))
              ]), 1040, ["class", "style", "open-on-top", "arr-map-values", "internal-model-value", "onRecalculatePosition"])
            ]),
            _: 3
          }, 16, ["class", "style"])) : createCommentVNode("", true)
        ]),
        _: 3
      }, 8, ["name", "css"])
    ], 2));
  }
});
var La = (() => {
  const e2 = ko;
  return e2.install = (n) => {
    n.component("Vue3DatePicker", e2);
  }, e2;
})();
var wo = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: La
}, Symbol.toStringTag, { value: "Module" }));
Object.entries(wo).forEach(([e2, n]) => {
  e2 !== "default" && (La[e2] = n);
});
var _hoisted_1$y = { class: "hy-date-picker-wrapper" };
var _sfc_main$J = defineComponent({
  props: {
    defaultDate: null,
    clearable: { type: Boolean },
    range: { type: Boolean },
    maxRange: null,
    minRange: null,
    maxDate: null,
    minDate: null,
    getDateClass: null,
    autoApply: { type: Boolean },
    placeholder: null,
    partialRange: { type: Boolean }
  },
  emits: ["updateDate", "selectRangeStartDate", "selectRangeEndDate"],
  setup(__props, { emit }) {
    const props2 = __props;
    const date2 = ref(props2.defaultDate && [...props2.defaultDate]);
    const defaultMaxDate = props2.maxDate ? props2.maxDate : new Date();
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$y, [
        createVNode(unref(La), {
          modelValue: date2.value,
          "onUpdate:modelValue": [
            _cache[0] || (_cache[0] = ($event) => date2.value = $event),
            _cache[3] || (_cache[3] = ($event) => emit("updateDate", date2.value))
          ],
          clearable: __props.clearable,
          range: __props.range,
          "max-range": __props.maxRange,
          "min-range": __props.minRange,
          "max-date": unref(defaultMaxDate),
          "min-date": __props.minDate,
          "enable-time-picker": false,
          "partial-range": __props.partialRange,
          "day-class": __props.getDateClass,
          "auto-apply": __props.autoApply,
          placeholder: __props.placeholder,
          onRangeStart: _cache[1] || (_cache[1] = (date22) => emit("selectRangeStartDate", date22)),
          onRangeEnd: _cache[2] || (_cache[2] = (date22) => emit("selectRangeEndDate", date22))
        }, null, 8, ["modelValue", "clearable", "range", "max-range", "min-range", "max-date", "min-date", "partial-range", "day-class", "auto-apply", "placeholder"]),
        createVNode(unref(_sfc_main$1w), {
          class: "date-picker-icon",
          icon: unref(Icons).CALENDAR
        }, null, 8, ["icon"])
      ]);
    };
  }
});
var _hoisted_1$x = { class: "flex align-items-center" };
var _hoisted_2$p = { class: "ml-2 mb-1" };
var _hoisted_3$m = { class: "hy-lang-option-list" };
var _hoisted_4$h = ["onClick"];
var _sfc_main$I = defineComponent({
  props: {
    currentLang: null,
    languageOption: null
  },
  emits: ["selectLang"],
  setup(__props, { emit }) {
    const showOption = ref(false);
    const langOptionList = ref(null);
    useClickAway(langOptionList, () => {
      showOption.value = false;
    });
    const selectLang = (lang) => {
      emit("selectLang", lang);
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "langOptionList",
        ref: langOptionList,
        class: "hy-lang-box main-color"
      }, [
        createBaseVNode("div", _hoisted_1$x, [
          createVNode(unref(_sfc_main$1w), {
            class: "lang-icon",
            icon: unref(Icons).LANGUAGE,
            onClick: _cache[0] || (_cache[0] = ($event) => showOption.value = !showOption.value)
          }, null, 8, ["icon"]),
          createBaseVNode("div", _hoisted_2$p, toDisplayString(__props.currentLang), 1)
        ]),
        withDirectives(createBaseVNode("div", _hoisted_3$m, [
          createBaseVNode("ul", null, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(__props.languageOption, (lang) => {
              return openBlock(), createElementBlock("li", {
                key: lang.value,
                class: normalizeClass(["hy-lang-option-item", { "hy-lang-active ": __props.currentLang === lang.label }]),
                onClick: ($event) => selectLang(lang.value)
              }, toDisplayString(lang.label), 11, _hoisted_4$h);
            }), 128))
          ])
        ], 512), [
          [vShow, showOption.value]
        ])
      ], 512);
    };
  }
});
var _hoisted_1$w = { class: "flex" };
var _sfc_main$H = defineComponent({
  props: {
    color: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$w, [
        (openBlock(), createElementBlock(Fragment, null, renderList(3, (n) => {
          return createBaseVNode("div", {
            key: n,
            style: normalizeStyle([`backgroundColor: ${__props.color || "#ffffff"}`]),
            class: "hy-loading-dot"
          }, null, 4);
        }), 64))
      ]);
    };
  }
});
var _sfc_main$G = {};
var _hoisted_1$v = { class: "hy-footer bg-surface-dark text-on-surface-dark p-2 ta-right" };
var _hoisted_2$o = createBaseVNode("small", null, "Copyright ", -1);
var _hoisted_3$l = createBaseVNode("small", { class: "px-1" }, "\xA9", -1);
var _hoisted_4$g = createBaseVNode("small", { class: "px-2" }, "Hyena.", -1);
var _hoisted_5$9 = createBaseVNode("small", null, "All rights reserved.", -1);
function _sfc_render$1(_ctx, _cache) {
  return openBlock(), createElementBlock("footer", _hoisted_1$v, [
    _hoisted_2$o,
    _hoisted_3$l,
    createBaseVNode("small", null, toDisplayString(new Date().getFullYear()), 1),
    _hoisted_4$g,
    _hoisted_5$9
  ]);
}
var PageFooter = _export_sfc$1(_sfc_main$G, [["render", _sfc_render$1]]);
var _hoisted_1$u = { class: "hy-page-header flex fs-label-lg" };
var _hoisted_2$n = { class: "avatar ml-auto ta-right" };
var _hoisted_3$k = { class: "page-title" };
var _hoisted_4$f = { class: "description fs-title lh-title fw-semi-bold mb-2" };
var _hoisted_5$8 = { class: "flex" };
var _hoisted_6$7 = { class: "title fs-display lh-display fw-bold" };
var _hoisted_7$6 = { class: "button ml-auto" };
var _sfc_main$F = defineComponent({
  props: {
    title: null,
    description: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("nav", _hoisted_1$u, [
        renderSlot(_ctx.$slots, "left"),
        createBaseVNode("div", _hoisted_2$n, [
          renderSlot(_ctx.$slots, "right")
        ]),
        createBaseVNode("div", _hoisted_3$k, [
          createBaseVNode("div", _hoisted_4$f, [
            createBaseVNode("span", null, toDisplayString(__props.description), 1),
            renderSlot(_ctx.$slots, "tag")
          ]),
          createBaseVNode("div", _hoisted_5$8, [
            createBaseVNode("div", _hoisted_6$7, toDisplayString(__props.title), 1),
            createBaseVNode("div", _hoisted_7$6, [
              renderSlot(_ctx.$slots, "action")
            ])
          ])
        ])
      ]);
    };
  }
});
var _hoisted_1$t = { class: "hy-login" };
var _hoisted_2$m = createBaseVNode("div", { class: "login-background" }, [
  createBaseVNode("div", { class: "bg-square before bg-primary opacity-25" }),
  createBaseVNode("div", { class: "bg-square bg-primary" }),
  createBaseVNode("div", { class: "bg-square after bg-secondary-container opacity-25" })
], -1);
var _hoisted_3$j = { class: "login-card p-5 bg-background shadow-md" };
var _hoisted_4$e = { class: "login-header" };
var _hoisted_5$7 = ["src"];
var _hoisted_6$6 = { class: "header-title text-on-background opacity-50 ta-right fw-normal" };
var _hoisted_7$5 = { class: "login-main pt-3" };
var _hoisted_8$4 = { class: "fs-headline fw-semi-bold" };
var _hoisted_9$2 = { class: "fw-normal" };
var _hoisted_10$1 = { class: "login-footer ta-right" };
var _sfc_main$E = defineComponent({
  props: {
    headerTitle: null,
    title: null,
    subtitle: null,
    headerLogo: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$t, [
        _hoisted_2$m,
        createBaseVNode("div", _hoisted_3$j, [
          createBaseVNode("div", _hoisted_4$e, [
            __props.headerLogo ? (openBlock(), createElementBlock("img", {
              key: 0,
              src: __props.headerLogo
            }, null, 8, _hoisted_5$7)) : createCommentVNode("", true),
            createBaseVNode("span", _hoisted_6$6, toDisplayString(__props.headerTitle), 1)
          ]),
          createBaseVNode("div", _hoisted_7$5, [
            createBaseVNode("h1", _hoisted_8$4, toDisplayString(__props.title), 1),
            createBaseVNode("p", _hoisted_9$2, toDisplayString(__props.subtitle), 1),
            renderSlot(_ctx.$slots, "default")
          ]),
          createBaseVNode("div", _hoisted_10$1, [
            renderSlot(_ctx.$slots, "footer")
          ])
        ])
      ]);
    };
  }
});
var capitalize = (str) => {
  return str.charAt(0).toUpperCase() + str.slice(1);
};
var isObject = (value) => {
  return typeof value === "object" && value !== null;
};
var _hoisted_1$s = { class: "hy-breadcrumb" };
var _hoisted_2$l = ["onClick"];
var _hoisted_3$i = {
  key: 0,
  class: "separator"
};
var _sfc_main$D = defineComponent({
  props: {
    path: null
  },
  emits: ["crumbClicked"],
  setup(__props, { emit }) {
    const props2 = __props;
    const crumbs = computed(() => props2.path.split("/").slice(1, props2.path.length));
    const onClicked = (crumbIdx) => {
      let route = crumbs.value.slice(0, crumbIdx + 1).join("/");
      let isLastCrumb = crumbIdx === crumbs.value.length - 1;
      if (isLastCrumb) {
        return;
      }
      emit("crumbClicked", `/${route}`);
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$s, [
        createBaseVNode("ul", null, [
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(crumbs), (i2, idx) => {
            return openBlock(), createElementBlock("li", {
              key: i2 + idx
            }, [
              createBaseVNode("span", {
                class: normalizeClass({ active: idx === unref(crumbs).length - 1 }),
                onClick: ($event) => onClicked(idx)
              }, toDisplayString(unref(capitalize)(i2)), 11, _hoisted_2$l),
              idx !== unref(crumbs).length - 1 ? (openBlock(), createElementBlock("span", _hoisted_3$i, " / ")) : createCommentVNode("", true)
            ]);
          }), 128))
        ])
      ]);
    };
  }
});
var _hoisted_1$r = { class: "logo flex" };
var _hoisted_2$k = ["src"];
var _sfc_main$C = defineComponent({
  props: {
    isCollapse: { type: Boolean },
    title: null,
    imgSrc: null,
    versionTag: null
  },
  emits: ["collapse"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("aside", {
        class: normalizeClass(["hy-sidebar", { collapse: __props.isCollapse }])
      }, [
        createBaseVNode("div", _hoisted_1$r, [
          createBaseVNode("img", {
            src: __props.imgSrc,
            class: "hy-sidebar-logo"
          }, null, 8, _hoisted_2$k),
          createBaseVNode("span", {
            class: normalizeClass({ hidden: __props.isCollapse })
          }, toDisplayString(__props.title), 3)
        ]),
        renderSlot(_ctx.$slots, "default"),
        createBaseVNode("h5", {
          class: normalizeClass(["version-tag", { hidden: __props.isCollapse }])
        }, toDisplayString(__props.versionTag), 3),
        createBaseVNode("div", {
          class: "toggle-collapse fs-title-lg",
          onClick: _cache[0] || (_cache[0] = ($event) => emit("collapse"))
        }, [
          __props.isCollapse ? (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 0,
            icon: unref(Icons).NAVIGATE_NEXT
          }, null, 8, ["icon"])) : (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 1,
            icon: unref(Icons).NAVIGATE_BEFORE
          }, null, 8, ["icon"]))
        ])
      ], 2);
    };
  }
});
var _sfc_main$B = defineComponent({
  props: {
    label: null,
    isActive: { type: Boolean },
    isMini: { type: Boolean },
    icon: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("li", {
        class: normalizeClass(["section-items", { active: __props.isActive }])
      }, [
        __props.isMini ? (openBlock(), createBlock(unref(Tooltip), {
          key: 0,
          content: __props.label,
          placement: "bottom-left"
        }, {
          default: withCtx(() => [
            __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              icon: __props.icon,
              class: "trailing-icon"
            }, null, 8, ["icon"])) : createCommentVNode("", true)
          ]),
          _: 1
        }, 8, ["content"])) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
          __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 0,
            icon: __props.icon,
            class: "trailing-icon"
          }, null, 8, ["icon"])) : createCommentVNode("", true),
          createBaseVNode("span", null, toDisplayString(__props.label), 1)
        ], 64))
      ], 2);
    };
  }
});
var _sfc_main$A = defineComponent({
  props: {
    header: null,
    noDivider: { type: Boolean },
    isCollapsed: { type: Boolean }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("ul", {
        class: normalizeClass(["hy-sidebar-section", { divider: !__props.noDivider }])
      }, [
        __props.header ? (openBlock(), createElementBlock("p", {
          key: 0,
          class: normalizeClass({ hidden: !__props.isCollapsed })
        }, toDisplayString(__props.header), 3)) : createCommentVNode("", true),
        renderSlot(_ctx.$slots, "default")
      ], 2);
    };
  }
});
var _sfc_main$z = defineComponent({
  props: {
    label: null,
    isActive: { type: Boolean },
    isMini: { type: Boolean },
    icon: null
  },
  setup(__props) {
    const props2 = __props;
    const isCollapse = ref(!props2.isActive);
    const onClick = () => {
      isCollapse.value = !isCollapse.value;
    };
    watch(() => props2.isActive, () => {
      isCollapse.value = !props2.isActive;
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock(Fragment, null, [
        createBaseVNode("li", {
          class: normalizeClass(["section-list-item", "section-items", { hover: __props.isActive }]),
          onClick
        }, [
          __props.isMini ? (openBlock(), createBlock(unref(Tooltip), {
            key: 0,
            content: __props.label,
            placement: "bottom-left"
          }, {
            default: withCtx(() => [
              __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
                key: 0,
                icon: __props.icon,
                class: "trailing-icon"
              }, null, 8, ["icon"])) : createCommentVNode("", true)
            ]),
            _: 1
          }, 8, ["content"])) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [
            __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              icon: __props.icon,
              class: "trailing-icon"
            }, null, 8, ["icon"])) : createCommentVNode("", true),
            createBaseVNode("span", null, toDisplayString(__props.label), 1),
            createVNode(unref(_sfc_main$1w), {
              icon: unref(Icons).ARROW_DROPDOWN,
              class: normalizeClass(["trailing-icon", "drop-down-arrow", { collapse: isCollapse.value }])
            }, null, 8, ["icon", "class"])
          ], 64))
        ], 2),
        withDirectives(createBaseVNode("ul", {
          class: normalizeClass(["hy-sidebar-link-list", { "is-mini": __props.isMini }])
        }, [
          renderSlot(_ctx.$slots, "default")
        ], 2), [
          [vShow, !isCollapse.value]
        ])
      ], 64);
    };
  }
});
var _hoisted_1$q = { class: "hy-sidebar-user-info" };
var _hoisted_2$j = { class: "first-letter ta-center fw-bold" };
var _hoisted_3$h = {
  key: 0,
  class: "fs-body ml-2 text-container"
};
var _hoisted_4$d = { class: "mb-1 username" };
var _hoisted_5$6 = { class: "flex justify-center fs-body detail" };
var _hoisted_6$5 = { class: "detail-option flex align-items-center" };
var _hoisted_7$4 = { class: "detail-first-letter ta-center fw-bold mr-3" };
var _hoisted_8$3 = { class: "detail-username fs-body" };
var _hoisted_9$1 = { class: "mb-1 username" };
var _sfc_main$y = defineComponent({
  props: {
    username: null,
    prefix: null,
    time: null,
    isMini: { type: Boolean },
    labels: { default: () => ({
      logout: "Log out",
      changePassword: "Change Password"
    }) },
    isShowChangePassword: { type: Boolean }
  },
  emits: ["logout", "changePassword"],
  setup(__props, { emit }) {
    const buttonRef = ref();
    const popperStyle = { "border-radius": "1rem", padding: "0" };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$q, [
        createBaseVNode("div", {
          ref_key: "buttonRef",
          ref: buttonRef,
          class: normalizeClass(["hy-sidebar-user-info-wrapper flex align-items-center", { "justify-center": __props.isMini }])
        }, [
          createBaseVNode("div", _hoisted_2$j, toDisplayString(__props.prefix[0]), 1),
          !__props.isMini ? (openBlock(), createElementBlock("div", _hoisted_3$h, [
            createBaseVNode("div", _hoisted_4$d, toDisplayString(__props.username), 1),
            createBaseVNode("div", null, toDisplayString(__props.time), 1)
          ])) : createCommentVNode("", true),
          !__props.isMini ? (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 1,
            class: "ml-1 unfold-icon",
            icon: unref(Icons).UNFOLD_MORE
          }, null, 8, ["icon"])) : createCommentVNode("", true)
        ], 2),
        createVNode(unref(_sfc_main$L), {
          "popper-class": "hy-sidebar-user-info-popover",
          placement: "bottom-start",
          "button-ref": buttonRef.value,
          "popper-style": popperStyle
        }, {
          default: withCtx(() => [
            createBaseVNode("div", _hoisted_5$6, [
              createBaseVNode("div", _hoisted_6$5, [
                createBaseVNode("div", _hoisted_7$4, toDisplayString(__props.prefix[0]), 1),
                createBaseVNode("div", _hoisted_8$3, [
                  createBaseVNode("div", _hoisted_9$1, toDisplayString(__props.prefix), 1),
                  createBaseVNode("div", null, toDisplayString(__props.username), 1)
                ])
              ]),
              __props.isShowChangePassword ? (openBlock(), createElementBlock("div", {
                key: 0,
                class: "detail-option flex align-items-center",
                onClick: _cache[0] || (_cache[0] = ($event) => emit("changePassword"))
              }, [
                createVNode(unref(_sfc_main$1w), {
                  icon: unref(Icons).PARTS_LOCK_OPEN,
                  class: "fs-headline mr-4 ml-1"
                }, null, 8, ["icon"]),
                createBaseVNode("span", null, toDisplayString(__props.labels.changePassword), 1)
              ])) : createCommentVNode("", true),
              createBaseVNode("div", {
                class: "detail-option flex align-items-center",
                onClick: _cache[1] || (_cache[1] = ($event) => emit("logout"))
              }, [
                createVNode(unref(_sfc_main$1w), {
                  icon: unref(Icons).LOGOUT,
                  class: "fs-headline mr-4 ml-1"
                }, null, 8, ["icon"]),
                createBaseVNode("span", null, toDisplayString(__props.labels.logout), 1)
              ])
            ])
          ]),
          _: 1
        }, 8, ["button-ref"])
      ]);
    };
  }
});
var _hoisted_1$p = { class: "hy-tab" };
var _sfc_main$x = defineComponent({
  props: {
    modelValue: null
  },
  emits: ["update:modelValue", "handleTabChange"],
  setup(__props, { emit }) {
    const handleClick = (tab) => {
      emit("handleTabChange", tab);
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$p, [
        createVNode(unref(ElTabs), {
          modelValue: __props.modelValue,
          onTabClick: handleClick,
          "onUpdate:modelValue": _cache[0] || (_cache[0] = (value) => emit("update:modelValue", value))
        }, {
          default: withCtx(() => [
            renderSlot(_ctx.$slots, "default")
          ]),
          _: 3
        }, 8, ["modelValue"])
      ]);
    };
  }
});
var _sfc_main$w = defineComponent({
  props: {
    label: null,
    name: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(ElTabPane), {
        label: __props.label,
        name: __props.name
      }, {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "default")
        ]),
        _: 3
      }, 8, ["label", "name"]);
    };
  }
});
var DefaultNoDataImg = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yMC45MDU4IDk0LjQ1MTNMMTIuMjg2IDIyLjQ3NTZDMTIuMDAwOSAyMC4wOTQ5IDEzLjg1OTkgMTggMTYuMjU3NiAxOEg0NC44MDE2QzQ3LjAwMjcgMTggNDkuMTA2NSAxOC45MDY4IDUwLjYxNzcgMjAuNTA3TDU1LjU2NjEgMjUuNzQ2NUM1Ni4zMjE4IDI2LjU0NjYgNTcuMzczNyAyNyA1OC40NzQyIDI3SDkwLjI1Qzk0LjY2ODMgMjcgOTguMjUgMzAuNTgxNyA5OC4yNSAzNVY5Ny41Qzk4LjI1IDk5LjcwOTEgOTYuNDU5MSAxMDEuNSA5NC4yNSAxMDEuNUgyOC44NDkxQzI0Ljc5ODggMTAxLjUgMjEuMzg3NSA5OC40NzI5IDIwLjkwNTggOTQuNDUxM1oiIGZpbGw9IiNEQkU1REUiLz4KPHBhdGggZD0iTTI0LjYwNjQgOTBIMjAuNzVMMjEuMzc0IDk0Ljk5MjNDMjEuODc0NSA5OC45OTU3IDI1LjI3NzcgMTAyIDI5LjMxMjMgMTAySDEwMC45NThDMTAzLjA4NCAxMDIgMTA0LjgzOSAxMDAuMzM3IDEwNC45NTIgOTguMjEzNEwxMDguMDI1IDQwLjcxMzRDMTA4LjE0NyAzOC40MjM3IDEwNi4zMjQgMzYuNSAxMDQuMDMxIDM2LjVIMzYuODkzNkMzNC44Mjg3IDM2LjUgMzMuMTAzMSAzOC4wNzE4IDMyLjkxMSA0MC4xMjc4TDI4LjU4OSA4Ni4zNzIyQzI4LjM5NjkgODguNDI4MiAyNi42NzEzIDkwIDI0LjYwNjQgOTBaIiBmaWxsPSIjRUFGM0VDIi8+CjxjaXJjbGUgY3g9IjgyLjc1IiBjeT0iNjEuNSIgcj0iNCIgZmlsbD0iI0JGQzlDMiIvPgo8Y2lyY2xlIGN4PSI1OC43NSIgY3k9IjYxLjUiIHI9IjQiIGZpbGw9IiNCRkM5QzIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02Ni4xOTI4IDc5LjgxNTFDNjUuMzA1IDc5LjAxNjEgNjMuOTc1OSA3OC45NTY3IDYzLjAyMDQgNzkuNjczNEw1OS42NTE2IDgyLjJMNTcuODUxNiA3OS44TDYxLjIyMDQgNzcuMjczNEM2My4zMjI2IDc1LjY5NjcgNjYuMjQ2NSA3NS44Mjc0IDY4LjE5OTcgNzcuNTg1Mkw2OC4zMDQ5IDc3LjY4QzY5LjE3MjMgNzguNDYwNiA3MC40NzczIDc4LjQ5ODUgNzEuMzg4NSA3Ny43Njk1QzczLjM1NDYgNzYuMTk2NiA3Ni4xNDg1IDc2LjE5NjYgNzguMTE0NyA3Ny43Njk1TDgwLjY4ODYgNzkuODI4N0w3OC44MTQ1IDgyLjE3MTNMNzYuMjQwNiA4MC4xMTIxQzc1LjM3IDc5LjQxNTcgNzQuMTMzMSA3OS40MTU3IDczLjI2MjYgODAuMTEyMUM3MS4yMDQ1IDgxLjc1ODYgNjguMjU3IDgxLjY3MyA2Ni4yOTggNzkuOTA5OEw2Ni4xOTI4IDc5LjgxNTFaIiBmaWxsPSIjQkZDOUMyIi8+Cjwvc3ZnPgo=";
var _hoisted_1$o = { class: "hy-no-data-box" };
var _hoisted_2$i = ["src"];
var _hoisted_3$g = createBaseVNode("br", null, null, -1);
var _hoisted_4$c = { class: "hy-no-data-text" };
var _sfc_main$v = defineComponent({
  props: {
    message: null,
    imgSrc: null
  },
  setup(__props) {
    const props2 = __props;
    const img = computed(() => props2.imgSrc || DefaultNoDataImg);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$o, [
        createBaseVNode("img", {
          class: "hy-no-data-image mb-2",
          src: unref(img)
        }, null, 8, _hoisted_2$i),
        _hoisted_3$g,
        createBaseVNode("span", _hoisted_4$c, toDisplayString(__props.message), 1)
      ]);
    };
  }
});
var _hoisted_1$n = { class: "hy-table-no-data" };
var _sfc_main$u = defineComponent({
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$n, [
        createVNode(_sfc_main$v, { message: "No Data" })
      ]);
    };
  }
});
function makeNull(value) {
  if (value == null || value === "") {
    return null;
  }
  return value;
}
function exists(value, allowEmptyString) {
  if (allowEmptyString === void 0) {
    allowEmptyString = false;
  }
  return value != null && (value !== "" || allowEmptyString);
}
function missing(value) {
  return !exists(value);
}
function missingOrEmpty(value) {
  return value == null || value.length === 0;
}
function toStringOrNull(value) {
  return value != null && typeof value.toString === "function" ? value.toString() : null;
}
function attrToNumber(value) {
  if (value === void 0) {
    return;
  }
  if (value === null || value === "") {
    return null;
  }
  if (typeof value === "number") {
    return isNaN(value) ? void 0 : value;
  }
  var valueParsed = parseInt(value, 10);
  return isNaN(valueParsed) ? void 0 : valueParsed;
}
function attrToBoolean(value) {
  if (value === void 0) {
    return;
  }
  if (value === null || value === "") {
    return false;
  }
  if (typeof value === "boolean") {
    return value;
  }
  return /true/i.test(value);
}
function attrToString(value) {
  if (value == null || value === "") {
    return;
  }
  return value;
}
function referenceCompare(left, right) {
  if (left == null && right == null) {
    return true;
  }
  if (left == null && right != null) {
    return false;
  }
  if (left != null && right == null) {
    return false;
  }
  return left === right;
}
function jsonEquals(val1, val2) {
  var val1Json = val1 ? JSON.stringify(val1) : null;
  var val2Json = val2 ? JSON.stringify(val2) : null;
  return val1Json === val2Json;
}
function defaultComparator(valueA, valueB, accentedCompare) {
  if (accentedCompare === void 0) {
    accentedCompare = false;
  }
  var valueAMissing = valueA == null;
  var valueBMissing = valueB == null;
  if (valueA && valueA.toNumber) {
    valueA = valueA.toNumber();
  }
  if (valueB && valueB.toNumber) {
    valueB = valueB.toNumber();
  }
  if (valueAMissing && valueBMissing) {
    return 0;
  }
  if (valueAMissing) {
    return -1;
  }
  if (valueBMissing) {
    return 1;
  }
  function doQuickCompare(a3, b2) {
    return a3 > b2 ? 1 : a3 < b2 ? -1 : 0;
  }
  if (typeof valueA !== "string") {
    return doQuickCompare(valueA, valueB);
  }
  if (!accentedCompare) {
    return doQuickCompare(valueA, valueB);
  }
  try {
    return valueA.localeCompare(valueB);
  } catch (e2) {
    return doQuickCompare(valueA, valueB);
  }
}
function values(object) {
  if (object instanceof Set || object instanceof Map) {
    var arr_1 = [];
    object.forEach(function(value) {
      return arr_1.push(value);
    });
    return arr_1;
  }
  return Object.values(object);
}
var GenericUtils = Object.freeze({
  __proto__: null,
  makeNull,
  exists,
  missing,
  missingOrEmpty,
  toStringOrNull,
  attrToNumber,
  attrToBoolean,
  attrToString,
  referenceCompare,
  jsonEquals,
  defaultComparator,
  values
});
var ColumnKeyCreator = function() {
  function ColumnKeyCreator2() {
    this.existingKeys = {};
  }
  ColumnKeyCreator2.prototype.addExistingKeys = function(keys2) {
    for (var i2 = 0; i2 < keys2.length; i2++) {
      this.existingKeys[keys2[i2]] = true;
    }
  };
  ColumnKeyCreator2.prototype.getUniqueKey = function(colId, colField) {
    colId = toStringOrNull(colId);
    var count = 0;
    while (true) {
      var idToTry = void 0;
      if (colId) {
        idToTry = colId;
        if (count !== 0) {
          idToTry += "_" + count;
        }
      } else if (colField) {
        idToTry = colField;
        if (count !== 0) {
          idToTry += "_" + count;
        }
      } else {
        idToTry = "" + count;
      }
      if (!this.existingKeys[idToTry]) {
        this.existingKeys[idToTry] = true;
        return idToTry;
      }
      count++;
    }
  };
  return ColumnKeyCreator2;
}();
function iterateObject(object, callback) {
  if (object == null) {
    return;
  }
  if (Array.isArray(object)) {
    object.forEach(function(value, index) {
      return callback("" + index, value);
    });
  } else {
    Object.keys(object).forEach(function(key) {
      return callback(key, object[key]);
    });
  }
}
function cloneObject(object) {
  var copy = {};
  var keys2 = Object.keys(object);
  for (var i2 = 0; i2 < keys2.length; i2++) {
    var key = keys2[i2];
    var value = object[key];
    copy[key] = value;
  }
  return copy;
}
function deepCloneObject(object) {
  return JSON.parse(JSON.stringify(object));
}
function deepCloneDefinition(object, keysToSkip) {
  if (!object) {
    return;
  }
  var obj = object;
  var res = {};
  Object.keys(obj).forEach(function(key) {
    if (keysToSkip && keysToSkip.indexOf(key) >= 0) {
      return;
    }
    var value = obj[key];
    var sourceIsSimpleObject = isNonNullObject(value) && value.constructor === Object;
    if (sourceIsSimpleObject) {
      res[key] = deepCloneDefinition(value);
    } else {
      res[key] = value;
    }
  });
  return res;
}
function getProperty(object, key) {
  return object[key];
}
function setProperty(object, key, value) {
  object[key] = value;
}
function copyPropertiesIfPresent(source, target) {
  var properties = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    properties[_i - 2] = arguments[_i];
  }
  properties.forEach(function(p) {
    return copyPropertyIfPresent(source, target, p);
  });
}
function copyPropertyIfPresent(source, target, property, transform) {
  var value = getProperty(source, property);
  if (value !== void 0) {
    setProperty(target, property, transform ? transform(value) : value);
  }
}
function getAllKeysInObjects(objects) {
  var allValues = {};
  objects.filter(function(obj) {
    return obj != null;
  }).forEach(function(obj) {
    Object.keys(obj).forEach(function(key) {
      return allValues[key] = null;
    });
  });
  return Object.keys(allValues);
}
function getAllValuesInObject(obj) {
  if (!obj) {
    return [];
  }
  var anyObject = Object;
  if (typeof anyObject.values === "function") {
    return anyObject.values(obj);
  }
  var ret = [];
  for (var key in obj) {
    if (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {
      ret.push(obj[key]);
    }
  }
  return ret;
}
function mergeDeep(dest, source, copyUndefined, makeCopyOfSimpleObjects) {
  if (copyUndefined === void 0) {
    copyUndefined = true;
  }
  if (makeCopyOfSimpleObjects === void 0) {
    makeCopyOfSimpleObjects = false;
  }
  if (!exists(source)) {
    return;
  }
  iterateObject(source, function(key, sourceValue) {
    var destValue = dest[key];
    if (destValue === sourceValue) {
      return;
    }
    if (makeCopyOfSimpleObjects) {
      var objectIsDueToBeCopied = destValue == null && sourceValue != null;
      if (objectIsDueToBeCopied) {
        var sourceIsSimpleObject = typeof sourceValue === "object" && sourceValue.constructor === Object;
        var dontCopy = sourceIsSimpleObject;
        if (dontCopy) {
          destValue = {};
          dest[key] = destValue;
        }
      }
    }
    if (isNonNullObject(sourceValue) && isNonNullObject(destValue) && !Array.isArray(destValue)) {
      mergeDeep(destValue, sourceValue, copyUndefined, makeCopyOfSimpleObjects);
    } else if (copyUndefined || sourceValue !== void 0) {
      dest[key] = sourceValue;
    }
  });
}
function missingOrEmptyObject(value) {
  return missing(value) || Object.keys(value).length === 0;
}
function get(source, expression, defaultValue) {
  if (source == null) {
    return defaultValue;
  }
  var keys2 = expression.split(".");
  var objectToRead = source;
  while (keys2.length > 1) {
    objectToRead = objectToRead[keys2.shift()];
    if (objectToRead == null) {
      return defaultValue;
    }
  }
  var value = objectToRead[keys2[0]];
  return value != null ? value : defaultValue;
}
function set(target, expression, value) {
  if (target == null) {
    return;
  }
  var keys2 = expression.split(".");
  var objectToUpdate = target;
  while (keys2.length > 1) {
    objectToUpdate = objectToUpdate[keys2.shift()];
    if (objectToUpdate == null) {
      return;
    }
  }
  objectToUpdate[keys2[0]] = value;
}
function deepFreeze(object) {
  Object.freeze(object);
  values(object).forEach(function(v) {
    if (isNonNullObject(v) || typeof v === "function") {
      deepFreeze(v);
    }
  });
  return object;
}
function getValueUsingField(data, field, fieldContainsDots) {
  if (!field || !data) {
    return;
  }
  if (!fieldContainsDots) {
    return data[field];
  }
  var fields = field.split(".");
  var currentObject = data;
  for (var i2 = 0; i2 < fields.length; i2++) {
    if (currentObject == null) {
      return void 0;
    }
    currentObject = currentObject[fields[i2]];
  }
  return currentObject;
}
function removeAllReferences(obj, objectName) {
  Object.keys(obj).forEach(function(key) {
    var value = obj[key];
    if (typeof value === "object") {
      obj[key] = void 0;
    }
  });
  var proto = Object.getPrototypeOf(obj);
  var properties = {};
  Object.keys(proto).forEach(function(key) {
    var value = proto[key];
    if (typeof value === "function") {
      var func = function() {
        console.warn("AG Grid: " + objectName + " function " + key + "() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.");
      };
      properties[key] = { value: func, writable: true };
    }
  });
  Object.defineProperties(obj, properties);
}
function isNonNullObject(value) {
  return typeof value === "object" && value !== null;
}
var ObjectUtils = Object.freeze({
  __proto__: null,
  iterateObject,
  cloneObject,
  deepCloneObject,
  deepCloneDefinition,
  getProperty,
  setProperty,
  copyPropertiesIfPresent,
  copyPropertyIfPresent,
  getAllKeysInObjects,
  getAllValuesInObject,
  mergeDeep,
  missingOrEmptyObject,
  get,
  set,
  deepFreeze,
  getValueUsingField,
  removeAllReferences,
  isNonNullObject
});
var doOnceFlags = {};
function doOnce(func, key) {
  if (doOnceFlags[key]) {
    return;
  }
  func();
  doOnceFlags[key] = true;
}
function getFunctionName(funcConstructor) {
  if (funcConstructor.name) {
    return funcConstructor.name;
  }
  var matches = /function\s+([^\(]+)/.exec(funcConstructor.toString());
  return matches && matches.length === 2 ? matches[1].trim() : null;
}
function isFunction(val) {
  return !!(val && val.constructor && val.call && val.apply);
}
function executeInAWhile(funcs) {
  executeAfter(funcs, 400);
}
var executeNextVMTurnFuncs = [];
var executeNextVMTurnPending = false;
function executeNextVMTurn(func) {
  executeNextVMTurnFuncs.push(func);
  if (executeNextVMTurnPending) {
    return;
  }
  executeNextVMTurnPending = true;
  window.setTimeout(function() {
    var funcsCopy = executeNextVMTurnFuncs.slice();
    executeNextVMTurnFuncs.length = 0;
    executeNextVMTurnPending = false;
    funcsCopy.forEach(function(func2) {
      return func2();
    });
  }, 0);
}
function executeAfter(funcs, milliseconds) {
  if (milliseconds === void 0) {
    milliseconds = 0;
  }
  if (funcs.length > 0) {
    window.setTimeout(function() {
      return funcs.forEach(function(func) {
        return func();
      });
    }, milliseconds);
  }
}
function debounce(func, wait, immediate) {
  if (immediate === void 0) {
    immediate = false;
  }
  var timeout;
  return function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    var context = this;
    var callNow = immediate && !timeout;
    window.clearTimeout(timeout);
    timeout = window.setTimeout(function() {
      timeout = null;
      if (!immediate) {
        func.apply(context, args);
      }
    }, wait);
    if (callNow) {
      func.apply(context, args);
    }
  };
}
function throttle(func, wait) {
  var previousCall = 0;
  return function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    var context = this;
    var currentCall = new Date().getTime();
    if (currentCall - previousCall < wait) {
      return;
    }
    previousCall = currentCall;
    func.apply(context, args);
  };
}
function waitUntil(condition, callback, timeout, timeoutMessage) {
  if (timeout === void 0) {
    timeout = 100;
  }
  var timeStamp = new Date().getTime();
  var interval = null;
  var executed = false;
  var internalCallback = function() {
    var reachedTimeout = new Date().getTime() - timeStamp > timeout;
    if (condition() || reachedTimeout) {
      callback();
      executed = true;
      if (interval != null) {
        window.clearInterval(interval);
        interval = null;
      }
      if (reachedTimeout && timeoutMessage) {
        console.warn(timeoutMessage);
      }
    }
  };
  internalCallback();
  if (!executed) {
    interval = window.setInterval(internalCallback, 10);
  }
}
function compose() {
  var fns = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    fns[_i] = arguments[_i];
  }
  return function(arg) {
    return fns.reduce(function(composed, f) {
      return f(composed);
    }, arg);
  };
}
function callIfPresent(func) {
  if (func) {
    func();
  }
}
var noop = function() {
  return;
};
var FunctionUtils = Object.freeze({
  __proto__: null,
  doOnce,
  getFunctionName,
  isFunction,
  executeInAWhile,
  executeNextVMTurn,
  executeAfter,
  debounce,
  throttle,
  waitUntil,
  compose,
  callIfPresent,
  noop
});
var Context = function() {
  function Context2(params, logger) {
    this.beanWrappers = {};
    this.destroyed = false;
    if (!params || !params.beanClasses) {
      return;
    }
    this.contextParams = params;
    this.logger = logger;
    this.logger.log(">> creating ag-Application Context");
    this.createBeans();
    var beanInstances = this.getBeanInstances();
    this.wireBeans(beanInstances);
    this.logger.log(">> ag-Application Context ready - component is alive");
  }
  Context2.prototype.getBeanInstances = function() {
    return values(this.beanWrappers).map(function(beanEntry) {
      return beanEntry.beanInstance;
    });
  };
  Context2.prototype.createBean = function(bean, afterPreCreateCallback) {
    if (!bean) {
      throw Error("Can't wire to bean since it is null");
    }
    this.wireBeans([bean], afterPreCreateCallback);
    return bean;
  };
  Context2.prototype.wireBeans = function(beanInstances, afterPreCreateCallback) {
    this.autoWireBeans(beanInstances);
    this.methodWireBeans(beanInstances);
    this.callLifeCycleMethods(beanInstances, "preConstructMethods");
    if (exists(afterPreCreateCallback)) {
      beanInstances.forEach(afterPreCreateCallback);
    }
    this.callLifeCycleMethods(beanInstances, "postConstructMethods");
  };
  Context2.prototype.createBeans = function() {
    var _this = this;
    this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this));
    iterateObject(this.beanWrappers, function(key, beanEntry) {
      var constructorParamsMeta;
      if (beanEntry.bean.__agBeanMetaData && beanEntry.bean.__agBeanMetaData.autowireMethods && beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor) {
        constructorParamsMeta = beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor;
      }
      var constructorParams = _this.getBeansForParameters(constructorParamsMeta, beanEntry.bean.name);
      var newInstance = applyToConstructor(beanEntry.bean, constructorParams);
      beanEntry.beanInstance = newInstance;
    });
    var createdBeanNames = Object.keys(this.beanWrappers).join(", ");
    this.logger.log("created beans: " + createdBeanNames);
  };
  Context2.prototype.createBeanWrapper = function(BeanClass) {
    var metaData = BeanClass.__agBeanMetaData;
    if (!metaData) {
      var beanName = void 0;
      if (BeanClass.prototype.constructor) {
        beanName = getFunctionName(BeanClass.prototype.constructor);
      } else {
        beanName = "" + BeanClass;
      }
      console.error("Context item " + beanName + " is not a bean");
      return;
    }
    var beanEntry = {
      bean: BeanClass,
      beanInstance: null,
      beanName: metaData.beanName
    };
    this.beanWrappers[metaData.beanName] = beanEntry;
  };
  Context2.prototype.autoWireBeans = function(beanInstances) {
    var _this = this;
    beanInstances.forEach(function(beanInstance) {
      _this.forEachMetaDataInHierarchy(beanInstance, function(metaData, beanName) {
        var attributes = metaData.agClassAttributes;
        if (!attributes) {
          return;
        }
        attributes.forEach(function(attribute) {
          var otherBean = _this.lookupBeanInstance(beanName, attribute.beanName, attribute.optional);
          beanInstance[attribute.attributeName] = otherBean;
        });
      });
    });
  };
  Context2.prototype.methodWireBeans = function(beanInstances) {
    var _this = this;
    beanInstances.forEach(function(beanInstance) {
      _this.forEachMetaDataInHierarchy(beanInstance, function(metaData, beanName) {
        iterateObject(metaData.autowireMethods, function(methodName, wireParams) {
          if (methodName === "agConstructor") {
            return;
          }
          var initParams = _this.getBeansForParameters(wireParams, beanName);
          beanInstance[methodName].apply(beanInstance, initParams);
        });
      });
    });
  };
  Context2.prototype.forEachMetaDataInHierarchy = function(beanInstance, callback) {
    var prototype = Object.getPrototypeOf(beanInstance);
    while (prototype != null) {
      var constructor = prototype.constructor;
      if (constructor.hasOwnProperty("__agBeanMetaData")) {
        var metaData = constructor.__agBeanMetaData;
        var beanName = this.getBeanName(constructor);
        callback(metaData, beanName);
      }
      prototype = Object.getPrototypeOf(prototype);
    }
  };
  Context2.prototype.getBeanName = function(constructor) {
    if (constructor.__agBeanMetaData && constructor.__agBeanMetaData.beanName) {
      return constructor.__agBeanMetaData.beanName;
    }
    var constructorString = constructor.toString();
    var beanName = constructorString.substring(9, constructorString.indexOf("("));
    return beanName;
  };
  Context2.prototype.getBeansForParameters = function(parameters, beanName) {
    var _this = this;
    var beansList = [];
    if (parameters) {
      iterateObject(parameters, function(paramIndex, otherBeanName) {
        var otherBean = _this.lookupBeanInstance(beanName, otherBeanName);
        beansList[Number(paramIndex)] = otherBean;
      });
    }
    return beansList;
  };
  Context2.prototype.lookupBeanInstance = function(wiringBean, beanName, optional) {
    if (optional === void 0) {
      optional = false;
    }
    if (beanName === "context") {
      return this;
    }
    if (this.contextParams.providedBeanInstances && this.contextParams.providedBeanInstances.hasOwnProperty(beanName)) {
      return this.contextParams.providedBeanInstances[beanName];
    }
    var beanEntry = this.beanWrappers[beanName];
    if (beanEntry) {
      return beanEntry.beanInstance;
    }
    if (!optional) {
      console.error("AG Grid: unable to find bean reference " + beanName + " while initialising " + wiringBean);
    }
    return null;
  };
  Context2.prototype.callLifeCycleMethods = function(beanInstances, lifeCycleMethod) {
    var _this = this;
    beanInstances.forEach(function(beanInstance) {
      return _this.callLifeCycleMethodsOnBean(beanInstance, lifeCycleMethod);
    });
  };
  Context2.prototype.callLifeCycleMethodsOnBean = function(beanInstance, lifeCycleMethod, methodToIgnore) {
    var allMethods = {};
    this.forEachMetaDataInHierarchy(beanInstance, function(metaData) {
      var methods = metaData[lifeCycleMethod];
      if (methods) {
        methods.forEach(function(methodName) {
          if (methodName != methodToIgnore) {
            allMethods[methodName] = true;
          }
        });
      }
    });
    var allMethodsList = Object.keys(allMethods);
    allMethodsList.forEach(function(methodName) {
      return beanInstance[methodName]();
    });
  };
  Context2.prototype.getBean = function(name) {
    return this.lookupBeanInstance("getBean", name, true);
  };
  Context2.prototype.destroy = function() {
    if (this.destroyed) {
      return;
    }
    this.logger.log(">> Shutting down ag-Application Context");
    var beanInstances = this.getBeanInstances();
    this.destroyBeans(beanInstances);
    this.contextParams.providedBeanInstances = null;
    this.destroyed = true;
    this.logger.log(">> ag-Application Context shut down - component is dead");
  };
  Context2.prototype.destroyBean = function(bean) {
    if (!bean) {
      return;
    }
    this.destroyBeans([bean]);
  };
  Context2.prototype.destroyBeans = function(beans) {
    var _this = this;
    if (!beans) {
      return [];
    }
    beans.forEach(function(bean) {
      _this.callLifeCycleMethodsOnBean(bean, "preDestroyMethods", "destroy");
      var beanAny = bean;
      if (typeof beanAny.destroy === "function") {
        beanAny.destroy();
      }
    });
    return [];
  };
  return Context2;
}();
function applyToConstructor(constructor, argArray) {
  var args = [null].concat(argArray);
  var factoryFunction = constructor.bind.apply(constructor, args);
  return new factoryFunction();
}
function PreConstruct(target, methodName, descriptor) {
  var props2 = getOrCreateProps$1(target.constructor);
  if (!props2.preConstructMethods) {
    props2.preConstructMethods = [];
  }
  props2.preConstructMethods.push(methodName);
}
function PostConstruct(target, methodName, descriptor) {
  var props2 = getOrCreateProps$1(target.constructor);
  if (!props2.postConstructMethods) {
    props2.postConstructMethods = [];
  }
  props2.postConstructMethods.push(methodName);
}
function PreDestroy(target, methodName, descriptor) {
  var props2 = getOrCreateProps$1(target.constructor);
  if (!props2.preDestroyMethods) {
    props2.preDestroyMethods = [];
  }
  props2.preDestroyMethods.push(methodName);
}
function Bean(beanName) {
  return function(classConstructor) {
    var props2 = getOrCreateProps$1(classConstructor);
    props2.beanName = beanName;
  };
}
function Autowired(name) {
  return function(target, propertyKey, descriptor) {
    autowiredFunc(target, name, false, target, propertyKey, null);
  };
}
function Optional(name) {
  return function(target, propertyKey, descriptor) {
    autowiredFunc(target, name, true, target, propertyKey, null);
  };
}
function autowiredFunc(target, name, optional, classPrototype, methodOrAttributeName, index) {
  if (name === null) {
    console.error("AG Grid: Autowired name should not be null");
    return;
  }
  if (typeof index === "number") {
    console.error("AG Grid: Autowired should be on an attribute");
    return;
  }
  var props2 = getOrCreateProps$1(target.constructor);
  if (!props2.agClassAttributes) {
    props2.agClassAttributes = [];
  }
  props2.agClassAttributes.push({
    attributeName: methodOrAttributeName,
    beanName: name,
    optional
  });
}
function Qualifier(name) {
  return function(classPrototype, methodOrAttributeName, index) {
    var constructor = typeof classPrototype == "function" ? classPrototype : classPrototype.constructor;
    var props2;
    if (typeof index === "number") {
      var methodName = void 0;
      if (methodOrAttributeName) {
        props2 = getOrCreateProps$1(constructor);
        methodName = methodOrAttributeName;
      } else {
        props2 = getOrCreateProps$1(constructor);
        methodName = "agConstructor";
      }
      if (!props2.autowireMethods) {
        props2.autowireMethods = {};
      }
      if (!props2.autowireMethods[methodName]) {
        props2.autowireMethods[methodName] = {};
      }
      props2.autowireMethods[methodName][index] = name;
    }
  };
}
function getOrCreateProps$1(target) {
  if (!target.hasOwnProperty("__agBeanMetaData")) {
    target.__agBeanMetaData = {};
  }
  return target.__agBeanMetaData;
}
var __assign$h = function() {
  __assign$h = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$h.apply(this, arguments);
};
var __decorate$2A = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$a = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var EventService = function() {
  function EventService2() {
    this.allSyncListeners = /* @__PURE__ */ new Map();
    this.allAsyncListeners = /* @__PURE__ */ new Map();
    this.globalSyncListeners = /* @__PURE__ */ new Set();
    this.globalAsyncListeners = /* @__PURE__ */ new Set();
    this.asyncFunctionsQueue = [];
    this.scheduled = false;
    this.firedEvents = {};
  }
  EventService2.prototype.setBeans = function(loggerFactory, gridOptionsWrapper, frameworkOverrides, globalEventListener) {
    if (globalEventListener === void 0) {
      globalEventListener = null;
    }
    this.frameworkOverrides = frameworkOverrides;
    this.gridOptionsWrapper = gridOptionsWrapper;
    if (globalEventListener) {
      var async = gridOptionsWrapper.useAsyncEvents();
      this.addGlobalListener(globalEventListener, async);
    }
  };
  EventService2.prototype.getListeners = function(eventType, async, autoCreateListenerCollection) {
    var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;
    var listeners = listenerMap.get(eventType);
    if (!listeners && autoCreateListenerCollection) {
      listeners = /* @__PURE__ */ new Set();
      listenerMap.set(eventType, listeners);
    }
    return listeners;
  };
  EventService2.prototype.noRegisteredListenersExist = function() {
    return this.allSyncListeners.size === 0 && this.allAsyncListeners.size === 0 && this.globalSyncListeners.size === 0 && this.globalAsyncListeners.size === 0;
  };
  EventService2.prototype.addEventListener = function(eventType, listener, async) {
    if (async === void 0) {
      async = false;
    }
    this.getListeners(eventType, async, true).add(listener);
  };
  EventService2.prototype.removeEventListener = function(eventType, listener, async) {
    if (async === void 0) {
      async = false;
    }
    var listeners = this.getListeners(eventType, async, false);
    if (!listeners) {
      return;
    }
    listeners.delete(listener);
    if (listeners.size === 0) {
      var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;
      listenerMap.delete(eventType);
    }
  };
  EventService2.prototype.addGlobalListener = function(listener, async) {
    if (async === void 0) {
      async = false;
    }
    (async ? this.globalAsyncListeners : this.globalSyncListeners).add(listener);
  };
  EventService2.prototype.removeGlobalListener = function(listener, async) {
    if (async === void 0) {
      async = false;
    }
    (async ? this.globalAsyncListeners : this.globalSyncListeners).delete(listener);
  };
  EventService2.prototype.dispatchEvent = function(event) {
    var agEvent = event;
    if (this.gridOptionsWrapper) {
      agEvent = __assign$h(__assign$h({}, event), { api: this.gridOptionsWrapper.getApi(), columnApi: this.gridOptionsWrapper.getColumnApi(), context: this.gridOptionsWrapper.getContext() });
    }
    this.dispatchToListeners(agEvent, true);
    this.dispatchToListeners(agEvent, false);
    this.firedEvents[agEvent.type] = true;
  };
  EventService2.prototype.dispatchEventOnce = function(event) {
    if (!this.firedEvents[event.type]) {
      this.dispatchEvent(event);
    }
  };
  EventService2.prototype.dispatchToListeners = function(event, async) {
    var _this = this;
    var eventType = event.type;
    var processEventListeners = function(listeners2) {
      return listeners2.forEach(function(listener) {
        if (async) {
          _this.dispatchAsync(function() {
            return listener(event);
          });
        } else {
          listener(event);
        }
      });
    };
    var listeners = this.getListeners(eventType, async, false);
    if (listeners) {
      processEventListeners(listeners);
    }
    var globalListeners = async ? this.globalAsyncListeners : this.globalSyncListeners;
    globalListeners.forEach(function(listener) {
      if (async) {
        _this.dispatchAsync(function() {
          return _this.frameworkOverrides.dispatchEvent(eventType, function() {
            return listener(eventType, event);
          }, true);
        });
      } else {
        _this.frameworkOverrides.dispatchEvent(eventType, function() {
          return listener(eventType, event);
        }, true);
      }
    });
  };
  EventService2.prototype.dispatchAsync = function(func) {
    this.asyncFunctionsQueue.push(func);
    if (!this.scheduled) {
      window.setTimeout(this.flushAsyncQueue.bind(this), 0);
      this.scheduled = true;
    }
  };
  EventService2.prototype.flushAsyncQueue = function() {
    this.scheduled = false;
    var queueCopy = this.asyncFunctionsQueue.slice();
    this.asyncFunctionsQueue = [];
    queueCopy.forEach(function(func) {
      return func();
    });
  };
  __decorate$2A([
    __param$a(0, Qualifier("loggerFactory")),
    __param$a(1, Qualifier("gridOptionsWrapper")),
    __param$a(2, Qualifier("frameworkOverrides")),
    __param$a(3, Qualifier("globalEventListener"))
  ], EventService2.prototype, "setBeans", null);
  EventService2 = __decorate$2A([
    Bean("eventService")
  ], EventService2);
  return EventService2;
}();
var Constants = function() {
  function Constants2() {
  }
  Constants2.ROW_BUFFER_SIZE = 10;
  Constants2.LAYOUT_INTERVAL = 500;
  Constants2.BATCH_WAIT_MILLIS = 50;
  Constants2.EXPORT_TYPE_DRAG_COPY = "dragCopy";
  Constants2.EXPORT_TYPE_CLIPBOARD = "clipboard";
  Constants2.EXPORT_TYPE_EXCEL = "excel";
  Constants2.EXPORT_TYPE_CSV = "csv";
  Constants2.ROW_MODEL_TYPE_INFINITE = "infinite";
  Constants2.ROW_MODEL_TYPE_VIEWPORT = "viewport";
  Constants2.ROW_MODEL_TYPE_CLIENT_SIDE = "clientSide";
  Constants2.ROW_MODEL_TYPE_SERVER_SIDE = "serverSide";
  Constants2.ALWAYS = "always";
  Constants2.ONLY_WHEN_GROUPING = "onlyWhenGrouping";
  Constants2.PINNED_TOP = "top";
  Constants2.PINNED_BOTTOM = "bottom";
  Constants2.DOM_LAYOUT_NORMAL = "normal";
  Constants2.DOM_LAYOUT_PRINT = "print";
  Constants2.DOM_LAYOUT_AUTO_HEIGHT = "autoHeight";
  Constants2.GROUP_AUTO_COLUMN_ID = "ag-Grid-AutoColumn";
  Constants2.SOURCE_PASTE = "paste";
  Constants2.PINNED_RIGHT = "right";
  Constants2.PINNED_LEFT = "left";
  Constants2.SORT_ASC = "asc";
  Constants2.SORT_DESC = "desc";
  Constants2.INPUT_SELECTOR = "input, select, button, textarea";
  Constants2.FOCUSABLE_SELECTOR = "[tabindex], input, select, button, textarea";
  Constants2.FOCUSABLE_EXCLUDE = ".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *";
  return Constants2;
}();
var ModuleNames;
(function(ModuleNames2) {
  ModuleNames2["CommunityCoreModule"] = "@ag-grid-community/core";
  ModuleNames2["CommunityAllModules"] = "@ag-grid-community/all";
  ModuleNames2["InfiniteRowModelModule"] = "@ag-grid-community/infinite-row-model";
  ModuleNames2["ClientSideRowModelModule"] = "@ag-grid-community/client-side-row-model";
  ModuleNames2["CsvExportModule"] = "@ag-grid-community/csv-export";
  ModuleNames2["EnterpriseCoreModule"] = "@ag-grid-enterprise/core";
  ModuleNames2["EnterpriseAllModules"] = "@ag-grid-enterprise/all";
  ModuleNames2["RowGroupingModule"] = "@ag-grid-enterprise/row-grouping";
  ModuleNames2["ColumnToolPanelModule"] = "@ag-grid-enterprise/column-tool-panel";
  ModuleNames2["FiltersToolPanelModule"] = "@ag-grid-enterprise/filter-tool-panel";
  ModuleNames2["MenuModule"] = "@ag-grid-enterprise/menu";
  ModuleNames2["SetFilterModule"] = "@ag-grid-enterprise/set-filter";
  ModuleNames2["MultiFilterModule"] = "@ag-grid-enterprise/multi-filter";
  ModuleNames2["StatusBarModule"] = "@ag-grid-enterprise/status-bar";
  ModuleNames2["SideBarModule"] = "@ag-grid-enterprise/side-bar";
  ModuleNames2["RangeSelectionModule"] = "@ag-grid-enterprise/range-selection";
  ModuleNames2["MasterDetailModule"] = "@ag-grid-enterprise/master-detail";
  ModuleNames2["RichSelectModule"] = "@ag-grid-enterprise/rich-select";
  ModuleNames2["GridChartsModule"] = "@ag-grid-enterprise/charts";
  ModuleNames2["ViewportRowModelModule"] = "@ag-grid-enterprise/viewport-row-model";
  ModuleNames2["ServerSideRowModelModule"] = "@ag-grid-enterprise/server-side-row-model";
  ModuleNames2["ExcelExportModule"] = "@ag-grid-enterprise/excel-export";
  ModuleNames2["ClipboardModule"] = "@ag-grid-enterprise/clipboard";
  ModuleNames2["SparklinesModule"] = "@ag-grid-enterprise/sparklines";
  ModuleNames2["AngularModule"] = "@ag-grid-community/angular";
  ModuleNames2["ReactModule"] = "@ag-grid-community/react";
  ModuleNames2["VueModule"] = "@ag-grid-community/vue";
  ModuleNames2["PolymerModule"] = "@ag-grid-community/polymer";
})(ModuleNames || (ModuleNames = {}));
var ModuleRegistry = function() {
  function ModuleRegistry2() {
  }
  ModuleRegistry2.register = function(module2, moduleBased) {
    if (moduleBased === void 0) {
      moduleBased = true;
    }
    ModuleRegistry2.modulesMap[module2.moduleName] = module2;
    if (ModuleRegistry2.moduleBased === void 0) {
      ModuleRegistry2.moduleBased = moduleBased;
    } else {
      if (ModuleRegistry2.moduleBased !== moduleBased) {
        doOnce(function() {
          console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms.");
          console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.");
        }, "ModulePackageCheck");
      }
    }
  };
  ModuleRegistry2.registerModules = function(modules, moduleBased) {
    if (moduleBased === void 0) {
      moduleBased = true;
    }
    if (!modules) {
      return;
    }
    modules.forEach(function(module2) {
      return ModuleRegistry2.register(module2, moduleBased);
    });
  };
  ModuleRegistry2.assertRegistered = function(moduleName, reason) {
    if (this.isRegistered(moduleName)) {
      return true;
    }
    var warningKey = reason + moduleName;
    var warningMessage;
    if (ModuleRegistry2.moduleBased) {
      warningMessage = "AG Grid: unable to use " + reason + " as module " + moduleName + " is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/";
    } else {
      warningMessage = "AG Grid: unable to use " + reason + " as package 'ag-grid-enterprise' is not present. Please see: https://www.ag-grid.com/javascript-grid/packages/";
    }
    doOnce(function() {
      console.warn(warningMessage);
    }, warningKey);
    return false;
  };
  ModuleRegistry2.isRegistered = function(moduleName) {
    return !!ModuleRegistry2.modulesMap[moduleName];
  };
  ModuleRegistry2.getRegisteredModules = function() {
    return values(ModuleRegistry2.modulesMap);
  };
  ModuleRegistry2.isPackageBased = function() {
    return !ModuleRegistry2.moduleBased;
  };
  ModuleRegistry2.modulesMap = {};
  return ModuleRegistry2;
}();
var __decorate$2z = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var instanceIdSequence$4 = 0;
var Column = function() {
  function Column2(colDef, userProvidedColDef, colId, primary) {
    this.instanceId = instanceIdSequence$4++;
    this.autoHeaderHeight = null;
    this.moving = false;
    this.menuVisible = false;
    this.filterActive = false;
    this.eventService = new EventService();
    this.rowGroupActive = false;
    this.pivotActive = false;
    this.aggregationActive = false;
    this.colDef = colDef;
    this.userProvidedColDef = userProvidedColDef;
    this.colId = colId;
    this.primary = primary;
    this.setState(colDef);
  }
  Column2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  Column2.prototype.setState = function(colDef) {
    if (colDef.sort !== void 0) {
      if (colDef.sort === Constants.SORT_ASC || colDef.sort === Constants.SORT_DESC) {
        this.sort = colDef.sort;
      }
    } else {
      if (colDef.initialSort === Constants.SORT_ASC || colDef.initialSort === Constants.SORT_DESC) {
        this.sort = colDef.initialSort;
      }
    }
    var sortIndex = attrToNumber(colDef.sortIndex);
    var initialSortIndex = attrToNumber(colDef.initialSortIndex);
    if (sortIndex !== void 0) {
      if (sortIndex !== null) {
        this.sortIndex = sortIndex;
      }
    } else {
      if (initialSortIndex !== null) {
        this.sortIndex = initialSortIndex;
      }
    }
    var hide = attrToBoolean(colDef.hide);
    var initialHide = attrToBoolean(colDef.initialHide);
    if (hide !== void 0) {
      this.visible = !hide;
    } else {
      this.visible = !initialHide;
    }
    if (colDef.pinned !== void 0) {
      this.setPinned(colDef.pinned);
    } else {
      this.setPinned(colDef.initialPinned);
    }
    var flex = attrToNumber(colDef.flex);
    var initialFlex = attrToNumber(colDef.initialFlex);
    if (flex !== void 0) {
      this.flex = flex;
    } else if (initialFlex !== void 0) {
      this.flex = initialFlex;
    }
  };
  Column2.prototype.setColDef = function(colDef, userProvidedColDef) {
    this.colDef = colDef;
    this.userProvidedColDef = userProvidedColDef;
    this.initMinAndMaxWidths();
    this.initDotNotation();
    this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_COL_DEF_CHANGED, "api"));
  };
  Column2.prototype.getUserProvidedColDef = function() {
    return this.userProvidedColDef;
  };
  Column2.prototype.setParent = function(parent) {
    this.parent = parent;
  };
  Column2.prototype.getParent = function() {
    return this.parent;
  };
  Column2.prototype.setOriginalParent = function(originalParent) {
    this.originalParent = originalParent;
  };
  Column2.prototype.getOriginalParent = function() {
    return this.originalParent;
  };
  Column2.prototype.initialise = function() {
    this.initMinAndMaxWidths();
    this.resetActualWidth("gridInitializing");
    this.initDotNotation();
    this.validate();
  };
  Column2.prototype.initDotNotation = function() {
    var suppressDotNotation = this.gridOptionsWrapper.isSuppressFieldDotNotation();
    this.fieldContainsDots = exists(this.colDef.field) && this.colDef.field.indexOf(".") >= 0 && !suppressDotNotation;
    this.tooltipFieldContainsDots = exists(this.colDef.tooltipField) && this.colDef.tooltipField.indexOf(".") >= 0 && !suppressDotNotation;
  };
  Column2.prototype.initMinAndMaxWidths = function() {
    var colDef = this.colDef;
    this.minWidth = this.columnUtils.calculateColMinWidth(colDef);
    this.maxWidth = this.columnUtils.calculateColMaxWidth(colDef);
  };
  Column2.prototype.resetActualWidth = function(source) {
    if (source === void 0) {
      source = "api";
    }
    var initialWidth = this.columnUtils.calculateColInitialWidth(this.colDef);
    this.setActualWidth(initialWidth, source, true);
  };
  Column2.prototype.isEmptyGroup = function() {
    return false;
  };
  Column2.prototype.isRowGroupDisplayed = function(colId) {
    if (missing(this.colDef) || missing(this.colDef.showRowGroup)) {
      return false;
    }
    var showingAllGroups = this.colDef.showRowGroup === true;
    var showingThisGroup = this.colDef.showRowGroup === colId;
    return showingAllGroups || showingThisGroup;
  };
  Column2.prototype.isPrimary = function() {
    return this.primary;
  };
  Column2.prototype.isFilterAllowed = function() {
    var filterDefined = !!this.colDef.filter || !!this.colDef.filterFramework;
    return filterDefined;
  };
  Column2.prototype.isFieldContainsDots = function() {
    return this.fieldContainsDots;
  };
  Column2.prototype.isTooltipFieldContainsDots = function() {
    return this.tooltipFieldContainsDots;
  };
  Column2.prototype.validate = function() {
    var colDefAny = this.colDef;
    function warnOnce(msg, key, obj) {
      doOnce(function() {
        if (obj) {
          console.warn(msg, obj);
        } else {
          doOnce(function() {
            return console.warn(msg);
          }, key);
        }
      }, key);
    }
    var usingCSRM = this.gridOptionsWrapper.isRowModelDefault();
    if (usingCSRM && !ModuleRegistry.isRegistered(ModuleNames.RowGroupingModule)) {
      var rowGroupingItems = ["enableRowGroup", "rowGroup", "rowGroupIndex", "enablePivot", "enableValue", "pivot", "pivotIndex", "aggFunc"];
      rowGroupingItems.forEach(function(item) {
        if (exists(colDefAny[item])) {
          if (ModuleRegistry.isPackageBased()) {
            warnOnce("AG Grid: " + item + " is only valid in ag-grid-enterprise, your column definition should not have " + item, "ColumnRowGroupingMissing" + item);
          } else {
            warnOnce("AG Grid: " + item + " is only valid with AG Grid Enterprise Module " + ModuleNames.RowGroupingModule + " - your column definition should not have " + item, "ColumnRowGroupingMissing" + item);
          }
        }
      });
    }
    if (!ModuleRegistry.isRegistered(ModuleNames.RichSelectModule)) {
      if (this.colDef.cellEditor === "agRichSelect" || this.colDef.cellEditor === "agRichSelectCellEditor") {
        if (ModuleRegistry.isPackageBased()) {
          warnOnce("AG Grid: " + this.colDef.cellEditor + " can only be used with ag-grid-enterprise", "ColumnRichSelectMissing");
        } else {
          warnOnce("AG Grid: " + this.colDef.cellEditor + " can only be used with AG Grid Enterprise Module " + ModuleNames.RichSelectModule, "ColumnRichSelectMissing");
        }
      }
    }
    if (this.gridOptionsWrapper.isTreeData()) {
      var itemsNotAllowedWithTreeData = ["rowGroup", "rowGroupIndex", "pivot", "pivotIndex"];
      itemsNotAllowedWithTreeData.forEach(function(item) {
        if (exists(colDefAny[item])) {
          warnOnce("AG Grid: " + item + " is not possible when doing tree data, your column definition should not have " + item, "TreeDataCannotRowGroup");
        }
      });
    }
    if (exists(this.colDef.width) && typeof this.colDef.width !== "number") {
      warnOnce("AG Grid: colDef.width should be a number, not " + typeof this.colDef.width, "ColumnCheck_asdfawef");
    }
    if (colDefAny.pinnedRowCellRenderer) {
      warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
    }
    if (colDefAny.pinnedRowCellRendererParams) {
      warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
    }
    if (colDefAny.pinnedRowCellRendererFramework) {
      warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
    }
    if (colDefAny.pinnedRowValueGetter) {
      warnOnce("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.", "colDef.pinnedRowCellRenderer-deprecated");
    }
  };
  Column2.prototype.addEventListener = function(eventType, listener) {
    this.eventService.addEventListener(eventType, listener);
  };
  Column2.prototype.removeEventListener = function(eventType, listener) {
    this.eventService.removeEventListener(eventType, listener);
  };
  Column2.prototype.createColumnFunctionCallbackParams = function(rowNode) {
    return {
      node: rowNode,
      data: rowNode.data,
      column: this,
      colDef: this.colDef,
      context: this.gridOptionsWrapper.getContext(),
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi()
    };
  };
  Column2.prototype.isSuppressNavigable = function(rowNode) {
    if (typeof this.colDef.suppressNavigable === "boolean") {
      return this.colDef.suppressNavigable;
    }
    if (typeof this.colDef.suppressNavigable === "function") {
      var params = this.createColumnFunctionCallbackParams(rowNode);
      var userFunc = this.colDef.suppressNavigable;
      return userFunc(params);
    }
    return false;
  };
  Column2.prototype.isCellEditable = function(rowNode) {
    if (rowNode.group && !this.gridOptionsWrapper.isEnableGroupEdit()) {
      return false;
    }
    return this.isColumnFunc(rowNode, this.colDef.editable);
  };
  Column2.prototype.isSuppressFillHandle = function() {
    return !!attrToBoolean(this.colDef.suppressFillHandle);
  };
  Column2.prototype.isAutoHeight = function() {
    return !!attrToBoolean(this.colDef.autoHeight);
  };
  Column2.prototype.isAutoHeaderHeight = function() {
    return !!attrToBoolean(this.colDef.autoHeaderHeight);
  };
  Column2.prototype.isRowDrag = function(rowNode) {
    return this.isColumnFunc(rowNode, this.colDef.rowDrag);
  };
  Column2.prototype.isDndSource = function(rowNode) {
    return this.isColumnFunc(rowNode, this.colDef.dndSource);
  };
  Column2.prototype.isCellCheckboxSelection = function(rowNode) {
    return this.isColumnFunc(rowNode, this.colDef.checkboxSelection);
  };
  Column2.prototype.isSuppressPaste = function(rowNode) {
    return this.isColumnFunc(rowNode, this.colDef ? this.colDef.suppressPaste : null);
  };
  Column2.prototype.isResizable = function() {
    return !!attrToBoolean(this.colDef.resizable);
  };
  Column2.prototype.isColumnFunc = function(rowNode, value) {
    if (typeof value === "boolean") {
      return value;
    }
    if (typeof value === "function") {
      var params = this.createColumnFunctionCallbackParams(rowNode);
      var editableFunc = value;
      return editableFunc(params);
    }
    return false;
  };
  Column2.prototype.setMoving = function(moving, source) {
    if (source === void 0) {
      source = "api";
    }
    this.moving = moving;
    this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_MOVING_CHANGED, source));
  };
  Column2.prototype.createColumnEvent = function(type, source) {
    return {
      type,
      column: this,
      columns: [this],
      source,
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext()
    };
  };
  Column2.prototype.isMoving = function() {
    return this.moving;
  };
  Column2.prototype.getSort = function() {
    return this.sort;
  };
  Column2.prototype.setSort = function(sort, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.sort !== sort) {
      this.sort = sort;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_SORT_CHANGED, source));
    }
  };
  Column2.prototype.setMenuVisible = function(visible, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.menuVisible !== visible) {
      this.menuVisible = visible;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_MENU_VISIBLE_CHANGED, source));
    }
  };
  Column2.prototype.isMenuVisible = function() {
    return this.menuVisible;
  };
  Column2.prototype.isSortAscending = function() {
    return this.sort === Constants.SORT_ASC;
  };
  Column2.prototype.isSortDescending = function() {
    return this.sort === Constants.SORT_DESC;
  };
  Column2.prototype.isSortNone = function() {
    return missing(this.sort);
  };
  Column2.prototype.isSorting = function() {
    return exists(this.sort);
  };
  Column2.prototype.getSortIndex = function() {
    return this.sortIndex;
  };
  Column2.prototype.setSortIndex = function(sortOrder) {
    this.sortIndex = sortOrder;
  };
  Column2.prototype.setAggFunc = function(aggFunc) {
    this.aggFunc = aggFunc;
  };
  Column2.prototype.getAggFunc = function() {
    return this.aggFunc;
  };
  Column2.prototype.getLeft = function() {
    return this.left;
  };
  Column2.prototype.getOldLeft = function() {
    return this.oldLeft;
  };
  Column2.prototype.getRight = function() {
    return this.left + this.actualWidth;
  };
  Column2.prototype.setLeft = function(left, source) {
    if (source === void 0) {
      source = "api";
    }
    this.oldLeft = this.left;
    if (this.left !== left) {
      this.left = left;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_LEFT_CHANGED, source));
    }
  };
  Column2.prototype.isFilterActive = function() {
    return this.filterActive;
  };
  Column2.prototype.setFilterActive = function(active, source, additionalEventAttributes) {
    if (source === void 0) {
      source = "api";
    }
    if (this.filterActive !== active) {
      this.filterActive = active;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_FILTER_ACTIVE_CHANGED, source));
    }
    var filterChangedEvent = this.createColumnEvent(Column2.EVENT_FILTER_CHANGED, source);
    if (additionalEventAttributes) {
      mergeDeep(filterChangedEvent, additionalEventAttributes);
    }
    this.eventService.dispatchEvent(filterChangedEvent);
  };
  Column2.prototype.setPinned = function(pinned) {
    if (pinned === true || pinned === Constants.PINNED_LEFT) {
      this.pinned = Constants.PINNED_LEFT;
    } else if (pinned === Constants.PINNED_RIGHT) {
      this.pinned = Constants.PINNED_RIGHT;
    } else {
      this.pinned = null;
    }
  };
  Column2.prototype.setFirstRightPinned = function(firstRightPinned, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.firstRightPinned !== firstRightPinned) {
      this.firstRightPinned = firstRightPinned;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED, source));
    }
  };
  Column2.prototype.setLastLeftPinned = function(lastLeftPinned, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.lastLeftPinned !== lastLeftPinned) {
      this.lastLeftPinned = lastLeftPinned;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_LAST_LEFT_PINNED_CHANGED, source));
    }
  };
  Column2.prototype.isFirstRightPinned = function() {
    return this.firstRightPinned;
  };
  Column2.prototype.isLastLeftPinned = function() {
    return this.lastLeftPinned;
  };
  Column2.prototype.isPinned = function() {
    return this.pinned === Constants.PINNED_LEFT || this.pinned === Constants.PINNED_RIGHT;
  };
  Column2.prototype.isPinnedLeft = function() {
    return this.pinned === Constants.PINNED_LEFT;
  };
  Column2.prototype.isPinnedRight = function() {
    return this.pinned === Constants.PINNED_RIGHT;
  };
  Column2.prototype.getPinned = function() {
    return this.pinned;
  };
  Column2.prototype.setVisible = function(visible, source) {
    if (source === void 0) {
      source = "api";
    }
    var newValue = visible === true;
    if (this.visible !== newValue) {
      this.visible = newValue;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_VISIBLE_CHANGED, source));
    }
  };
  Column2.prototype.isVisible = function() {
    return this.visible;
  };
  Column2.prototype.getColDef = function() {
    return this.colDef;
  };
  Column2.prototype.getColumnGroupShow = function() {
    return this.colDef.columnGroupShow;
  };
  Column2.prototype.getColId = function() {
    return this.colId;
  };
  Column2.prototype.getId = function() {
    return this.getColId();
  };
  Column2.prototype.getUniqueId = function() {
    return this.getId();
  };
  Column2.prototype.getDefinition = function() {
    return this.colDef;
  };
  Column2.prototype.getActualWidth = function() {
    return this.actualWidth;
  };
  Column2.prototype.getAutoHeaderHeight = function() {
    return this.autoHeaderHeight;
  };
  Column2.prototype.setAutoHeaderHeight = function(height) {
    var changed = height !== this.autoHeaderHeight;
    this.autoHeaderHeight = height;
    return changed;
  };
  Column2.prototype.createBaseColDefParams = function(rowNode) {
    var params = {
      node: rowNode,
      data: rowNode.data,
      colDef: this.colDef,
      column: this,
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext()
    };
    return params;
  };
  Column2.prototype.getColSpan = function(rowNode) {
    if (missing(this.colDef.colSpan)) {
      return 1;
    }
    var params = this.createBaseColDefParams(rowNode);
    var colSpan = this.colDef.colSpan(params);
    return Math.max(colSpan, 1);
  };
  Column2.prototype.getRowSpan = function(rowNode) {
    if (missing(this.colDef.rowSpan)) {
      return 1;
    }
    var params = this.createBaseColDefParams(rowNode);
    var rowSpan = this.colDef.rowSpan(params);
    return Math.max(rowSpan, 1);
  };
  Column2.prototype.setActualWidth = function(actualWidth, source, silent) {
    if (source === void 0) {
      source = "api";
    }
    if (silent === void 0) {
      silent = false;
    }
    if (this.minWidth != null) {
      actualWidth = Math.max(actualWidth, this.minWidth);
    }
    if (this.maxWidth != null) {
      actualWidth = Math.min(actualWidth, this.maxWidth);
    }
    if (this.actualWidth !== actualWidth) {
      this.actualWidth = actualWidth;
      if (this.flex && source !== "flex" && source !== "gridInitializing") {
        this.flex = null;
      }
      if (!silent) {
        this.fireColumnWidthChangedEvent(source);
      }
    }
  };
  Column2.prototype.fireColumnWidthChangedEvent = function(source) {
    this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_WIDTH_CHANGED, source));
  };
  Column2.prototype.isGreaterThanMax = function(width) {
    if (this.maxWidth != null) {
      return width > this.maxWidth;
    }
    return false;
  };
  Column2.prototype.getMinWidth = function() {
    return this.minWidth;
  };
  Column2.prototype.getMaxWidth = function() {
    return this.maxWidth;
  };
  Column2.prototype.getFlex = function() {
    return this.flex || 0;
  };
  Column2.prototype.setFlex = function(flex) {
    if (this.flex !== flex) {
      this.flex = flex;
    }
  };
  Column2.prototype.setMinimum = function(source) {
    if (source === void 0) {
      source = "api";
    }
    if (exists(this.minWidth)) {
      this.setActualWidth(this.minWidth, source);
    }
  };
  Column2.prototype.setRowGroupActive = function(rowGroup, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.rowGroupActive !== rowGroup) {
      this.rowGroupActive = rowGroup;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_ROW_GROUP_CHANGED, source));
    }
  };
  Column2.prototype.isRowGroupActive = function() {
    return this.rowGroupActive;
  };
  Column2.prototype.setPivotActive = function(pivot, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.pivotActive !== pivot) {
      this.pivotActive = pivot;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_PIVOT_CHANGED, source));
    }
  };
  Column2.prototype.isPivotActive = function() {
    return this.pivotActive;
  };
  Column2.prototype.isAnyFunctionActive = function() {
    return this.isPivotActive() || this.isRowGroupActive() || this.isValueActive();
  };
  Column2.prototype.isAnyFunctionAllowed = function() {
    return this.isAllowPivot() || this.isAllowRowGroup() || this.isAllowValue();
  };
  Column2.prototype.setValueActive = function(value, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.aggregationActive !== value) {
      this.aggregationActive = value;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_VALUE_CHANGED, source));
    }
  };
  Column2.prototype.isValueActive = function() {
    return this.aggregationActive;
  };
  Column2.prototype.isAllowPivot = function() {
    return this.colDef.enablePivot === true;
  };
  Column2.prototype.isAllowValue = function() {
    return this.colDef.enableValue === true;
  };
  Column2.prototype.isAllowRowGroup = function() {
    return this.colDef.enableRowGroup === true;
  };
  Column2.prototype.getMenuTabs = function(defaultValues) {
    var menuTabs = this.getColDef().menuTabs;
    if (menuTabs == null) {
      menuTabs = defaultValues;
    }
    return menuTabs;
  };
  Column2.prototype.isLockPosition = function() {
    console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead.");
    return this.colDef ? !!this.colDef.lockPosition : false;
  };
  Column2.prototype.isLockVisible = function() {
    console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead.");
    return this.colDef ? !!this.colDef.lockVisible : false;
  };
  Column2.prototype.isLockPinned = function() {
    console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead.");
    return this.colDef ? !!this.colDef.lockPinned : false;
  };
  Column2.EVENT_MOVING_CHANGED = "movingChanged";
  Column2.EVENT_LEFT_CHANGED = "leftChanged";
  Column2.EVENT_WIDTH_CHANGED = "widthChanged";
  Column2.EVENT_LAST_LEFT_PINNED_CHANGED = "lastLeftPinnedChanged";
  Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED = "firstRightPinnedChanged";
  Column2.EVENT_VISIBLE_CHANGED = "visibleChanged";
  Column2.EVENT_FILTER_CHANGED = "filterChanged";
  Column2.EVENT_FILTER_ACTIVE_CHANGED = "filterActiveChanged";
  Column2.EVENT_SORT_CHANGED = "sortChanged";
  Column2.EVENT_COL_DEF_CHANGED = "colDefChanged";
  Column2.EVENT_MENU_VISIBLE_CHANGED = "menuVisibleChanged";
  Column2.EVENT_ROW_GROUP_CHANGED = "columnRowGroupChanged";
  Column2.EVENT_PIVOT_CHANGED = "columnPivotChanged";
  Column2.EVENT_VALUE_CHANGED = "columnValueChanged";
  __decorate$2z([
    Autowired("gridOptionsWrapper")
  ], Column2.prototype, "gridOptionsWrapper", void 0);
  __decorate$2z([
    Autowired("columnUtils")
  ], Column2.prototype, "columnUtils", void 0);
  __decorate$2z([
    PostConstruct
  ], Column2.prototype, "initialise", null);
  return Column2;
}();
function firstExistingValue() {
  var values2 = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    values2[_i] = arguments[_i];
  }
  for (var i2 = 0; i2 < values2.length; i2++) {
    var value = values2[i2];
    if (exists(value)) {
      return value;
    }
  }
  return null;
}
function existsAndNotEmpty(value) {
  return value != null && value.length > 0;
}
function last(arr) {
  if (!arr || !arr.length) {
    return;
  }
  return arr[arr.length - 1];
}
function areEqual(a3, b2, comparator) {
  if (a3 == null && b2 == null) {
    return true;
  }
  return a3 != null && b2 != null && a3.length === b2.length && a3.every(function(value, index) {
    return comparator ? comparator(value, b2[index]) : b2[index] === value;
  });
}
function compareArrays(array1, array2) {
  return areEqual(array1, array2);
}
function shallowCompare(arr1, arr2) {
  return areEqual(arr1, arr2);
}
function sortNumerically(array) {
  return array.sort(function(a3, b2) {
    return a3 - b2;
  });
}
function removeRepeatsFromArray(array, object) {
  if (!array) {
    return;
  }
  for (var index = array.length - 2; index >= 0; index--) {
    var thisOneMatches = array[index] === object;
    var nextOneMatches = array[index + 1] === object;
    if (thisOneMatches && nextOneMatches) {
      array.splice(index + 1, 1);
    }
  }
}
function removeFromArray(array, object) {
  var index = array.indexOf(object);
  if (index >= 0) {
    array.splice(index, 1);
  }
}
function removeAllFromArray(array, toRemove) {
  toRemove.forEach(function(item) {
    return removeFromArray(array, item);
  });
}
function insertIntoArray(array, object, toIndex) {
  array.splice(toIndex, 0, object);
}
function insertArrayIntoArray(dest, src, toIndex) {
  if (dest == null || src == null) {
    return;
  }
  for (var i2 = src.length - 1; i2 >= 0; i2--) {
    var item = src[i2];
    insertIntoArray(dest, item, toIndex);
  }
}
function moveInArray(array, objectsToMove, toIndex) {
  removeAllFromArray(array, objectsToMove);
  objectsToMove.slice().reverse().forEach(function(obj) {
    return insertIntoArray(array, obj, toIndex);
  });
}
function includes(array, value) {
  return array.indexOf(value) > -1;
}
function flatten(arrayOfArrays) {
  return [].concat.apply([], arrayOfArrays);
}
function pushAll(target, source) {
  if (source == null || target == null) {
    return;
  }
  source.forEach(function(value) {
    return target.push(value);
  });
}
function toStrings(array) {
  return array.map(toStringOrNull);
}
function forEachReverse(list, action) {
  if (list == null) {
    return;
  }
  for (var i2 = list.length - 1; i2 >= 0; i2--) {
    action(list[i2], i2);
  }
}
var ArrayUtils = Object.freeze({
  __proto__: null,
  firstExistingValue,
  existsAndNotEmpty,
  last,
  areEqual,
  compareArrays,
  shallowCompare,
  sortNumerically,
  removeRepeatsFromArray,
  removeFromArray,
  removeAllFromArray,
  insertIntoArray,
  insertArrayIntoArray,
  moveInArray,
  includes,
  flatten,
  pushAll,
  toStrings,
  forEachReverse
});
var __decorate$2y = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnGroup = function() {
  function ColumnGroup2(providedColumnGroup, groupId, instanceId, pinned) {
    this.displayedChildren = [];
    this.localEventService = new EventService();
    this.groupId = groupId;
    this.instanceId = instanceId;
    this.providedColumnGroup = providedColumnGroup;
    this.pinned = pinned;
  }
  ColumnGroup2.createUniqueId = function(groupId, instanceId) {
    return groupId + "_" + instanceId;
  };
  ColumnGroup2.prototype.reset = function() {
    this.parent = null;
    this.children = null;
    this.displayedChildren = null;
  };
  ColumnGroup2.prototype.getParent = function() {
    return this.parent;
  };
  ColumnGroup2.prototype.setParent = function(parent) {
    this.parent = parent;
  };
  ColumnGroup2.prototype.getUniqueId = function() {
    return ColumnGroup2.createUniqueId(this.groupId, this.instanceId);
  };
  ColumnGroup2.prototype.isEmptyGroup = function() {
    return this.displayedChildren.length === 0;
  };
  ColumnGroup2.prototype.isMoving = function() {
    var allLeafColumns = this.getProvidedColumnGroup().getLeafColumns();
    if (!allLeafColumns || allLeafColumns.length === 0) {
      return false;
    }
    return allLeafColumns.every(function(col) {
      return col.isMoving();
    });
  };
  ColumnGroup2.prototype.checkLeft = function() {
    this.displayedChildren.forEach(function(child) {
      if (child instanceof ColumnGroup2) {
        child.checkLeft();
      }
    });
    if (this.displayedChildren.length > 0) {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        var lastChild = last(this.displayedChildren);
        var lastChildLeft = lastChild.getLeft();
        this.setLeft(lastChildLeft);
      } else {
        var firstChildLeft = this.displayedChildren[0].getLeft();
        this.setLeft(firstChildLeft);
      }
    } else {
      this.setLeft(null);
    }
  };
  ColumnGroup2.prototype.getLeft = function() {
    return this.left;
  };
  ColumnGroup2.prototype.getOldLeft = function() {
    return this.oldLeft;
  };
  ColumnGroup2.prototype.setLeft = function(left) {
    this.oldLeft = left;
    if (this.left !== left) {
      this.left = left;
      this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_LEFT_CHANGED));
    }
  };
  ColumnGroup2.prototype.getPinned = function() {
    return this.pinned;
  };
  ColumnGroup2.prototype.createAgEvent = function(type) {
    return { type };
  };
  ColumnGroup2.prototype.addEventListener = function(eventType, listener) {
    this.localEventService.addEventListener(eventType, listener);
  };
  ColumnGroup2.prototype.removeEventListener = function(eventType, listener) {
    this.localEventService.removeEventListener(eventType, listener);
  };
  ColumnGroup2.prototype.getGroupId = function() {
    return this.groupId;
  };
  ColumnGroup2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  ColumnGroup2.prototype.isChildInThisGroupDeepSearch = function(wantedChild) {
    var result = false;
    this.children.forEach(function(foundChild) {
      if (wantedChild === foundChild) {
        result = true;
      }
      if (foundChild instanceof ColumnGroup2) {
        if (foundChild.isChildInThisGroupDeepSearch(wantedChild)) {
          result = true;
        }
      }
    });
    return result;
  };
  ColumnGroup2.prototype.getActualWidth = function() {
    var groupActualWidth = 0;
    if (this.displayedChildren) {
      this.displayedChildren.forEach(function(child) {
        groupActualWidth += child.getActualWidth();
      });
    }
    return groupActualWidth;
  };
  ColumnGroup2.prototype.isResizable = function() {
    if (!this.displayedChildren) {
      return false;
    }
    var result = false;
    this.displayedChildren.forEach(function(child) {
      if (child.isResizable()) {
        result = true;
      }
    });
    return result;
  };
  ColumnGroup2.prototype.getMinWidth = function() {
    var result = 0;
    this.displayedChildren.forEach(function(groupChild) {
      result += groupChild.getMinWidth() || 0;
    });
    return result;
  };
  ColumnGroup2.prototype.addChild = function(child) {
    if (!this.children) {
      this.children = [];
    }
    this.children.push(child);
  };
  ColumnGroup2.prototype.getDisplayedChildren = function() {
    return this.displayedChildren;
  };
  ColumnGroup2.prototype.getLeafColumns = function() {
    var result = [];
    this.addLeafColumns(result);
    return result;
  };
  ColumnGroup2.prototype.getDisplayedLeafColumns = function() {
    var result = [];
    this.addDisplayedLeafColumns(result);
    return result;
  };
  ColumnGroup2.prototype.getDefinition = function() {
    return this.providedColumnGroup.getColGroupDef();
  };
  ColumnGroup2.prototype.getColGroupDef = function() {
    return this.providedColumnGroup.getColGroupDef();
  };
  ColumnGroup2.prototype.isPadding = function() {
    return this.providedColumnGroup.isPadding();
  };
  ColumnGroup2.prototype.isExpandable = function() {
    return this.providedColumnGroup.isExpandable();
  };
  ColumnGroup2.prototype.isExpanded = function() {
    return this.providedColumnGroup.isExpanded();
  };
  ColumnGroup2.prototype.setExpanded = function(expanded) {
    this.providedColumnGroup.setExpanded(expanded);
  };
  ColumnGroup2.prototype.addDisplayedLeafColumns = function(leafColumns) {
    this.displayedChildren.forEach(function(child) {
      if (child instanceof Column) {
        leafColumns.push(child);
      } else if (child instanceof ColumnGroup2) {
        child.addDisplayedLeafColumns(leafColumns);
      }
    });
  };
  ColumnGroup2.prototype.addLeafColumns = function(leafColumns) {
    this.children.forEach(function(child) {
      if (child instanceof Column) {
        leafColumns.push(child);
      } else if (child instanceof ColumnGroup2) {
        child.addLeafColumns(leafColumns);
      }
    });
  };
  ColumnGroup2.prototype.getChildren = function() {
    return this.children;
  };
  ColumnGroup2.prototype.getColumnGroupShow = function() {
    return this.providedColumnGroup.getColumnGroupShow();
  };
  ColumnGroup2.prototype.getProvidedColumnGroup = function() {
    return this.providedColumnGroup;
  };
  ColumnGroup2.prototype.getOriginalColumnGroup = function() {
    console.warn("AG Grid: columnGroup.getOriginalColumnGroup() is deprecated due to a method rename, use columnGroup.getProvidedColumnGroup() instead");
    return this.getProvidedColumnGroup();
  };
  ColumnGroup2.prototype.getPaddingLevel = function() {
    var parent = this.getParent();
    if (!this.isPadding() || !parent || !parent.isPadding()) {
      return 0;
    }
    return 1 + parent.getPaddingLevel();
  };
  ColumnGroup2.prototype.calculateDisplayedColumns = function() {
    var _this = this;
    this.displayedChildren = [];
    var parentWithExpansion = this;
    while (parentWithExpansion != null && parentWithExpansion.isPadding()) {
      parentWithExpansion = parentWithExpansion.getParent();
    }
    var isExpandable = parentWithExpansion ? parentWithExpansion.providedColumnGroup.isExpandable() : false;
    if (!isExpandable) {
      this.displayedChildren = this.children;
      this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));
      return;
    }
    this.children.forEach(function(child) {
      var emptyGroup = child instanceof ColumnGroup2 && (!child.displayedChildren || !child.displayedChildren.length);
      if (emptyGroup) {
        return;
      }
      var headerGroupShow = child.getColumnGroupShow();
      switch (headerGroupShow) {
        case ColumnGroup2.HEADER_GROUP_SHOW_OPEN:
          if (parentWithExpansion.providedColumnGroup.isExpanded()) {
            _this.displayedChildren.push(child);
          }
          break;
        case ColumnGroup2.HEADER_GROUP_SHOW_CLOSED:
          if (!parentWithExpansion.providedColumnGroup.isExpanded()) {
            _this.displayedChildren.push(child);
          }
          break;
        default:
          _this.displayedChildren.push(child);
          break;
      }
    });
    this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));
  };
  ColumnGroup2.HEADER_GROUP_SHOW_OPEN = "open";
  ColumnGroup2.HEADER_GROUP_SHOW_CLOSED = "closed";
  ColumnGroup2.EVENT_LEFT_CHANGED = "leftChanged";
  ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED = "displayedChildrenChanged";
  __decorate$2y([
    Autowired("gridOptionsWrapper")
  ], ColumnGroup2.prototype, "gridOptionsWrapper", void 0);
  return ColumnGroup2;
}();
var ProvidedColumnGroup = function() {
  function ProvidedColumnGroup2(colGroupDef, groupId, padding, level) {
    this.localEventService = new EventService();
    this.expandable = false;
    this.colGroupDef = colGroupDef;
    this.groupId = groupId;
    this.expanded = !!colGroupDef && !!colGroupDef.openByDefault;
    this.padding = padding;
    this.level = level;
  }
  ProvidedColumnGroup2.prototype.setOriginalParent = function(originalParent) {
    this.originalParent = originalParent;
  };
  ProvidedColumnGroup2.prototype.getOriginalParent = function() {
    return this.originalParent;
  };
  ProvidedColumnGroup2.prototype.getLevel = function() {
    return this.level;
  };
  ProvidedColumnGroup2.prototype.isVisible = function() {
    if (this.children) {
      return this.children.some(function(child) {
        return child.isVisible();
      });
    }
    return false;
  };
  ProvidedColumnGroup2.prototype.isPadding = function() {
    return this.padding;
  };
  ProvidedColumnGroup2.prototype.setExpanded = function(expanded) {
    this.expanded = expanded === void 0 ? false : expanded;
    var event = {
      type: ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED
    };
    this.localEventService.dispatchEvent(event);
  };
  ProvidedColumnGroup2.prototype.isExpandable = function() {
    return this.expandable;
  };
  ProvidedColumnGroup2.prototype.isExpanded = function() {
    return this.expanded;
  };
  ProvidedColumnGroup2.prototype.getGroupId = function() {
    return this.groupId;
  };
  ProvidedColumnGroup2.prototype.getId = function() {
    return this.getGroupId();
  };
  ProvidedColumnGroup2.prototype.setChildren = function(children) {
    this.children = children;
  };
  ProvidedColumnGroup2.prototype.getChildren = function() {
    return this.children;
  };
  ProvidedColumnGroup2.prototype.getColGroupDef = function() {
    return this.colGroupDef;
  };
  ProvidedColumnGroup2.prototype.getLeafColumns = function() {
    var result = [];
    this.addLeafColumns(result);
    return result;
  };
  ProvidedColumnGroup2.prototype.addLeafColumns = function(leafColumns) {
    if (!this.children) {
      return;
    }
    this.children.forEach(function(child) {
      if (child instanceof Column) {
        leafColumns.push(child);
      } else if (child instanceof ProvidedColumnGroup2) {
        child.addLeafColumns(leafColumns);
      }
    });
  };
  ProvidedColumnGroup2.prototype.getColumnGroupShow = function() {
    var colGroupDef = this.colGroupDef;
    if (!colGroupDef) {
      return;
    }
    return colGroupDef.columnGroupShow;
  };
  ProvidedColumnGroup2.prototype.setupExpandable = function() {
    var _this = this;
    this.setExpandable();
    this.getLeafColumns().forEach(function(col) {
      return col.addEventListener(Column.EVENT_VISIBLE_CHANGED, _this.onColumnVisibilityChanged.bind(_this));
    });
  };
  ProvidedColumnGroup2.prototype.setExpandable = function() {
    if (this.isPadding()) {
      return;
    }
    var atLeastOneShowingWhenOpen = false;
    var atLeastOneShowingWhenClosed = false;
    var atLeastOneChangeable = false;
    var children = this.findChildrenRemovingPadding();
    for (var i2 = 0, j = children.length; i2 < j; i2++) {
      var abstractColumn = children[i2];
      if (!abstractColumn.isVisible()) {
        continue;
      }
      var headerGroupShow = abstractColumn.getColumnGroupShow();
      if (headerGroupShow === ColumnGroup.HEADER_GROUP_SHOW_OPEN) {
        atLeastOneShowingWhenOpen = true;
        atLeastOneChangeable = true;
      } else if (headerGroupShow === ColumnGroup.HEADER_GROUP_SHOW_CLOSED) {
        atLeastOneShowingWhenClosed = true;
        atLeastOneChangeable = true;
      } else {
        atLeastOneShowingWhenOpen = true;
        atLeastOneShowingWhenClosed = true;
      }
    }
    var expandable = atLeastOneShowingWhenOpen && atLeastOneShowingWhenClosed && atLeastOneChangeable;
    if (this.expandable !== expandable) {
      this.expandable = expandable;
      var event_1 = {
        type: ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED
      };
      this.localEventService.dispatchEvent(event_1);
    }
  };
  ProvidedColumnGroup2.prototype.findChildrenRemovingPadding = function() {
    var res = [];
    var process = function(items) {
      items.forEach(function(item) {
        var skipBecausePadding = item instanceof ProvidedColumnGroup2 && item.isPadding();
        if (skipBecausePadding) {
          process(item.children);
        } else {
          res.push(item);
        }
      });
    };
    process(this.children);
    return res;
  };
  ProvidedColumnGroup2.prototype.onColumnVisibilityChanged = function() {
    this.setExpandable();
  };
  ProvidedColumnGroup2.prototype.addEventListener = function(eventType, listener) {
    this.localEventService.addEventListener(eventType, listener);
  };
  ProvidedColumnGroup2.prototype.removeEventListener = function(eventType, listener) {
    this.localEventService.removeEventListener(eventType, listener);
  };
  ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED = "expandedChanged";
  ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED = "expandableChanged";
  return ProvidedColumnGroup2;
}();
var DefaultColumnTypes = {
  numericColumn: {
    headerClass: "ag-right-aligned-header",
    cellClass: "ag-right-aligned-cell"
  },
  rightAligned: {
    headerClass: "ag-right-aligned-header",
    cellClass: "ag-right-aligned-cell"
  }
};
var AG_GRID_STOP_PROPAGATION = "__ag_Grid_Stop_Propagation";
var PASSIVE_EVENTS$1 = ["touchstart", "touchend", "touchmove", "touchcancel"];
var supports = {};
function stopPropagationForAgGrid(event) {
  event[AG_GRID_STOP_PROPAGATION] = true;
}
function isStopPropagationForAgGrid(event) {
  return event[AG_GRID_STOP_PROPAGATION] === true;
}
var isEventSupported = function() {
  var tags = {
    select: "input",
    change: "input",
    submit: "form",
    reset: "form",
    error: "img",
    load: "img",
    abort: "img"
  };
  var eventChecker = function(eventName) {
    if (typeof supports[eventName] === "boolean") {
      return supports[eventName];
    }
    var el2 = document.createElement(tags[eventName] || "div");
    eventName = "on" + eventName;
    return supports[eventName] = eventName in el2;
  };
  return eventChecker;
}();
function getCtrlForEvent(gridOptionsWrapper, event, type) {
  var sourceElement = event.target;
  while (sourceElement) {
    var renderedComp = gridOptionsWrapper.getDomData(sourceElement, type);
    if (renderedComp) {
      return renderedComp;
    }
    sourceElement = sourceElement.parentElement;
  }
  return null;
}
function addChangeListener(element, listener) {
  element.addEventListener("changed", listener);
  element.addEventListener("paste", listener);
  element.addEventListener("input", listener);
}
function isElementInEventPath(element, event) {
  if (!event || !element) {
    return false;
  }
  return getEventPath(event).indexOf(element) >= 0;
}
function createEventPath(event) {
  var res = [];
  var pointer = event.target;
  while (pointer) {
    res.push(pointer);
    pointer = pointer.parentElement;
  }
  return res;
}
function addAgGridEventPath(event) {
  event.__agGridEventPath = getEventPath(event);
}
function getEventPath(event) {
  var eventNoType = event;
  if (eventNoType.path) {
    return eventNoType.path;
  }
  if (eventNoType.composedPath) {
    return eventNoType.composedPath();
  }
  if (eventNoType.__agGridEventPath) {
    return eventNoType.__agGridEventPath;
  }
  return createEventPath(event);
}
function addSafePassiveEventListener(frameworkOverrides, eElement, event, listener) {
  var isPassive = includes(PASSIVE_EVENTS$1, event);
  var options = isPassive ? { passive: true } : void 0;
  if (frameworkOverrides && frameworkOverrides.addEventListener) {
    frameworkOverrides.addEventListener(eElement, event, listener, options);
  }
}
var EventUtils = Object.freeze({
  __proto__: null,
  stopPropagationForAgGrid,
  isStopPropagationForAgGrid,
  isEventSupported,
  getCtrlForEvent,
  addChangeListener,
  isElementInEventPath,
  createEventPath,
  addAgGridEventPath,
  getEventPath,
  addSafePassiveEventListener
});
var __decorate$2x = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var BeanStub = function() {
  function BeanStub2() {
    var _this = this;
    this.destroyFunctions = [];
    this.destroyed = false;
    this.__v_skip = true;
    this.isAlive = function() {
      return !_this.destroyed;
    };
  }
  BeanStub2.prototype.getFrameworkOverrides = function() {
    return this.frameworkOverrides;
  };
  BeanStub2.prototype.getContext = function() {
    return this.context;
  };
  BeanStub2.prototype.destroy = function() {
    this.destroyFunctions.forEach(function(func) {
      return func();
    });
    this.destroyFunctions.length = 0;
    this.destroyed = true;
    this.dispatchEvent({ type: BeanStub2.EVENT_DESTROYED });
  };
  BeanStub2.prototype.addEventListener = function(eventType, listener) {
    if (!this.localEventService) {
      this.localEventService = new EventService();
    }
    this.localEventService.addEventListener(eventType, listener);
  };
  BeanStub2.prototype.removeEventListener = function(eventType, listener) {
    if (this.localEventService) {
      this.localEventService.removeEventListener(eventType, listener);
    }
  };
  BeanStub2.prototype.dispatchEventAsync = function(event) {
    var _this = this;
    window.setTimeout(function() {
      return _this.dispatchEvent(event);
    }, 0);
  };
  BeanStub2.prototype.dispatchEvent = function(event) {
    if (this.localEventService) {
      this.localEventService.dispatchEvent(event);
    }
  };
  BeanStub2.prototype.addManagedListener = function(object, event, listener) {
    var _this = this;
    if (this.destroyed) {
      return;
    }
    if (object instanceof HTMLElement) {
      addSafePassiveEventListener(this.getFrameworkOverrides(), object, event, listener);
    } else {
      object.addEventListener(event, listener);
    }
    var destroyFunc = function() {
      object.removeEventListener(event, listener);
      _this.destroyFunctions = _this.destroyFunctions.filter(function(fn2) {
        return fn2 !== destroyFunc;
      });
      return null;
    };
    this.destroyFunctions.push(destroyFunc);
    return destroyFunc;
  };
  BeanStub2.prototype.addDestroyFunc = function(func) {
    if (this.isAlive()) {
      this.destroyFunctions.push(func);
    } else {
      func();
    }
  };
  BeanStub2.prototype.createManagedBean = function(bean, context) {
    var res = this.createBean(bean, context);
    this.addDestroyFunc(this.destroyBean.bind(this, bean, context));
    return res;
  };
  BeanStub2.prototype.createBean = function(bean, context, afterPreCreateCallback) {
    return (context || this.getContext()).createBean(bean, afterPreCreateCallback);
  };
  BeanStub2.prototype.destroyBean = function(bean, context) {
    return (context || this.getContext()).destroyBean(bean);
  };
  BeanStub2.prototype.destroyBeans = function(beans, context) {
    var _this = this;
    if (beans) {
      beans.forEach(function(bean) {
        return _this.destroyBean(bean, context);
      });
    }
    return [];
  };
  BeanStub2.EVENT_DESTROYED = "destroyed";
  __decorate$2x([
    Autowired("frameworkOverrides")
  ], BeanStub2.prototype, "frameworkOverrides", void 0);
  __decorate$2x([
    Autowired("context")
  ], BeanStub2.prototype, "context", void 0);
  __decorate$2x([
    Autowired("eventService")
  ], BeanStub2.prototype, "eventService", void 0);
  __decorate$2x([
    Autowired("gridOptionsWrapper")
  ], BeanStub2.prototype, "gridOptionsWrapper", void 0);
  __decorate$2x([
    PreDestroy
  ], BeanStub2.prototype, "destroy", null);
  return BeanStub2;
}();
var __extends$2U = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2w = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$9 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var ColumnFactory = function(_super) {
  __extends$2U(ColumnFactory2, _super);
  function ColumnFactory2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ColumnFactory2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("ColumnFactory");
  };
  ColumnFactory2.prototype.createColumnTree = function(defs, primaryColumns, existingTree) {
    var columnKeyCreator = new ColumnKeyCreator();
    var _a2 = this.extractExistingTreeData(existingTree), existingCols = _a2.existingCols, existingGroups = _a2.existingGroups, existingColKeys = _a2.existingColKeys;
    columnKeyCreator.addExistingKeys(existingColKeys);
    var unbalancedTree = this.recursivelyCreateColumns(defs, 0, primaryColumns, existingCols, columnKeyCreator, existingGroups);
    var treeDept = this.findMaxDept(unbalancedTree, 0);
    this.logger.log("Number of levels for grouped columns is " + treeDept);
    var columnTree = this.balanceColumnTree(unbalancedTree, 0, treeDept, columnKeyCreator);
    var deptFirstCallback = function(child, parent) {
      if (child instanceof ProvidedColumnGroup) {
        child.setupExpandable();
      }
      child.setOriginalParent(parent);
    };
    this.columnUtils.depthFirstOriginalTreeSearch(null, columnTree, deptFirstCallback);
    return {
      columnTree,
      treeDept
    };
  };
  ColumnFactory2.prototype.extractExistingTreeData = function(existingTree) {
    var existingCols = [];
    var existingGroups = [];
    var existingColKeys = [];
    if (existingTree) {
      this.columnUtils.depthFirstOriginalTreeSearch(null, existingTree, function(item) {
        if (item instanceof ProvidedColumnGroup) {
          var group = item;
          existingGroups.push(group);
        } else {
          var col = item;
          existingColKeys.push(col.getId());
          existingCols.push(col);
        }
      });
    }
    return { existingCols, existingGroups, existingColKeys };
  };
  ColumnFactory2.prototype.createForAutoGroups = function(autoGroupCols, gridBalancedTree) {
    var _this = this;
    return autoGroupCols.map(function(col) {
      return _this.createAutoGroupTreeItem(gridBalancedTree, col);
    });
  };
  ColumnFactory2.prototype.createAutoGroupTreeItem = function(balancedColumnTree, column) {
    var dept = this.findDepth(balancedColumnTree);
    var nextChild = column;
    for (var i2 = dept - 1; i2 >= 0; i2--) {
      var autoGroup = new ProvidedColumnGroup(null, "FAKE_PATH_" + column.getId() + "}_" + i2, true, i2);
      this.context.createBean(autoGroup);
      autoGroup.setChildren([nextChild]);
      nextChild.setOriginalParent(autoGroup);
      nextChild = autoGroup;
    }
    return nextChild;
  };
  ColumnFactory2.prototype.findDepth = function(balancedColumnTree) {
    var dept = 0;
    var pointer = balancedColumnTree;
    while (pointer && pointer[0] && pointer[0] instanceof ProvidedColumnGroup) {
      dept++;
      pointer = pointer[0].getChildren();
    }
    return dept;
  };
  ColumnFactory2.prototype.balanceColumnTree = function(unbalancedTree, currentDept, columnDept, columnKeyCreator) {
    var result = [];
    for (var i2 = 0; i2 < unbalancedTree.length; i2++) {
      var child = unbalancedTree[i2];
      if (child instanceof ProvidedColumnGroup) {
        var originalGroup = child;
        var newChildren = this.balanceColumnTree(originalGroup.getChildren(), currentDept + 1, columnDept, columnKeyCreator);
        originalGroup.setChildren(newChildren);
        result.push(originalGroup);
      } else {
        var firstPaddedGroup = void 0;
        var currentPaddedGroup = void 0;
        for (var j = columnDept - 1; j >= currentDept; j--) {
          var newColId = columnKeyCreator.getUniqueKey(null, null);
          var colGroupDefMerged = this.createMergedColGroupDef(null);
          var paddedGroup = new ProvidedColumnGroup(colGroupDefMerged, newColId, true, currentDept);
          this.context.createBean(paddedGroup);
          if (currentPaddedGroup) {
            currentPaddedGroup.setChildren([paddedGroup]);
          }
          currentPaddedGroup = paddedGroup;
          if (!firstPaddedGroup) {
            firstPaddedGroup = currentPaddedGroup;
          }
        }
        if (firstPaddedGroup && currentPaddedGroup) {
          result.push(firstPaddedGroup);
          var hasGroups = unbalancedTree.some(function(leaf) {
            return leaf instanceof ProvidedColumnGroup;
          });
          if (hasGroups) {
            currentPaddedGroup.setChildren([child]);
            continue;
          } else {
            currentPaddedGroup.setChildren(unbalancedTree);
            break;
          }
        }
        result.push(child);
      }
    }
    return result;
  };
  ColumnFactory2.prototype.findMaxDept = function(treeChildren, dept) {
    var maxDeptThisLevel = dept;
    for (var i2 = 0; i2 < treeChildren.length; i2++) {
      var abstractColumn = treeChildren[i2];
      if (abstractColumn instanceof ProvidedColumnGroup) {
        var originalGroup = abstractColumn;
        var newDept = this.findMaxDept(originalGroup.getChildren(), dept + 1);
        if (maxDeptThisLevel < newDept) {
          maxDeptThisLevel = newDept;
        }
      }
    }
    return maxDeptThisLevel;
  };
  ColumnFactory2.prototype.recursivelyCreateColumns = function(defs, level, primaryColumns, existingColsCopy, columnKeyCreator, existingGroups) {
    var _this = this;
    return (defs || []).map(function(def2) {
      if (_this.isColumnGroup(def2)) {
        return _this.createColumnGroup(primaryColumns, def2, level, existingColsCopy, columnKeyCreator, existingGroups);
      } else {
        return _this.createColumn(primaryColumns, def2, existingColsCopy, columnKeyCreator);
      }
    });
  };
  ColumnFactory2.prototype.createColumnGroup = function(primaryColumns, colGroupDef, level, existingColumns, columnKeyCreator, existingGroups) {
    var colGroupDefMerged = this.createMergedColGroupDef(colGroupDef);
    var groupId = columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId || null, null);
    var providedGroup = new ProvidedColumnGroup(colGroupDefMerged, groupId, false, level);
    this.context.createBean(providedGroup);
    var existingGroup = this.findExistingGroup(colGroupDef, existingGroups);
    if (existingGroup) {
      removeFromArray(existingGroups, existingGroup);
    }
    if (existingGroup && existingGroup.isExpanded()) {
      providedGroup.setExpanded(true);
    }
    var children = this.recursivelyCreateColumns(colGroupDefMerged.children, level + 1, primaryColumns, existingColumns, columnKeyCreator, existingGroups);
    providedGroup.setChildren(children);
    return providedGroup;
  };
  ColumnFactory2.prototype.createMergedColGroupDef = function(colGroupDef) {
    var colGroupDefMerged = {};
    Object.assign(colGroupDefMerged, this.gridOptionsWrapper.getDefaultColGroupDef());
    Object.assign(colGroupDefMerged, colGroupDef);
    this.checkForDeprecatedItems(colGroupDefMerged);
    return colGroupDefMerged;
  };
  ColumnFactory2.prototype.createColumn = function(primaryColumns, colDef, existingColsCopy, columnKeyCreator) {
    var colDefMerged = this.mergeColDefs(colDef);
    this.checkForDeprecatedItems(colDefMerged);
    var column = this.findExistingColumn(colDef, existingColsCopy);
    if (existingColsCopy && column) {
      removeFromArray(existingColsCopy, column);
    }
    if (!column) {
      var colId = columnKeyCreator.getUniqueKey(colDefMerged.colId, colDefMerged.field);
      column = new Column(colDefMerged, colDef, colId, primaryColumns);
      this.context.createBean(column);
    } else {
      column.setColDef(colDefMerged, colDef);
      this.applyColumnState(column, colDefMerged);
    }
    return column;
  };
  ColumnFactory2.prototype.applyColumnState = function(column, colDef) {
    var flex = attrToNumber(colDef.flex);
    if (flex !== void 0) {
      column.setFlex(flex);
    }
    var noFlexThisCol = column.getFlex() <= 0;
    if (noFlexThisCol) {
      var width = attrToNumber(colDef.width);
      if (width != null) {
        column.setActualWidth(width);
      } else {
        var widthBeforeUpdate = column.getActualWidth();
        column.setActualWidth(widthBeforeUpdate);
      }
    }
    if (colDef.sort !== void 0) {
      if (colDef.sort == Constants.SORT_ASC || colDef.sort == Constants.SORT_DESC) {
        column.setSort(colDef.sort);
      } else {
        column.setSort(void 0);
      }
    }
    var sortIndex = attrToNumber(colDef.sortIndex);
    if (sortIndex !== void 0) {
      column.setSortIndex(sortIndex);
    }
    var hide = attrToBoolean(colDef.hide);
    if (hide !== void 0) {
      column.setVisible(!hide);
    }
    if (colDef.pinned !== void 0) {
      column.setPinned(colDef.pinned);
    }
  };
  ColumnFactory2.prototype.findExistingColumn = function(newColDef, existingColsCopy) {
    return (existingColsCopy || []).find(function(existingCol) {
      var existingColDef = existingCol.getUserProvidedColDef();
      if (!existingColDef) {
        return false;
      }
      var newHasId = newColDef.colId != null;
      var newHasField = newColDef.field != null;
      if (newHasId) {
        return existingCol.getId() === newColDef.colId;
      }
      if (newHasField) {
        return existingColDef.field === newColDef.field;
      }
      if (existingColDef === newColDef) {
        return true;
      }
      return false;
    });
  };
  ColumnFactory2.prototype.findExistingGroup = function(newGroupDef, existingGroups) {
    return existingGroups.find(function(existingGroup) {
      var existingDef = existingGroup.getColGroupDef();
      if (!existingDef) {
        return false;
      }
      var newHasId = newGroupDef.groupId != null;
      if (newHasId) {
        return existingGroup.getId() === newGroupDef.groupId;
      }
      return false;
    });
  };
  ColumnFactory2.prototype.mergeColDefs = function(colDef) {
    var colDefMerged = {};
    var defaultColDef = this.gridOptionsWrapper.getDefaultColDef();
    mergeDeep(colDefMerged, defaultColDef, false, true);
    var columnType = colDef.type;
    if (!columnType) {
      columnType = defaultColDef && defaultColDef.type;
    }
    if (columnType) {
      this.assignColumnTypes(columnType, colDefMerged);
    }
    mergeDeep(colDefMerged, colDef, false, true);
    var autoGroupColDef = this.gridOptionsWrapper.getAutoGroupColumnDef();
    var isSortingCoupled = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    if (colDef.rowGroup && autoGroupColDef && isSortingCoupled) {
      mergeDeep(colDefMerged, { sort: autoGroupColDef.sort, initialSort: autoGroupColDef.initialSort }, false, true);
    }
    return colDefMerged;
  };
  ColumnFactory2.prototype.assignColumnTypes = function(type, colDefMerged) {
    var typeKeys = [];
    if (type instanceof Array) {
      var invalidArray = type.some(function(a3) {
        return typeof a3 !== "string";
      });
      if (invalidArray) {
        console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'");
      } else {
        typeKeys = type;
      }
    } else if (typeof type === "string") {
      typeKeys = type.split(",");
    } else {
      console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");
      return;
    }
    var allColumnTypes = Object.assign({}, DefaultColumnTypes);
    var userTypes = this.gridOptionsWrapper.getColumnTypes() || {};
    iterateObject(userTypes, function(key, value) {
      if (key in allColumnTypes) {
        console.warn("AG Grid: the column type '" + key + "' is a default column type and cannot be overridden.");
      } else {
        allColumnTypes[key] = value;
      }
    });
    typeKeys.forEach(function(t2) {
      var typeColDef = allColumnTypes[t2.trim()];
      if (typeColDef) {
        mergeDeep(colDefMerged, typeColDef, false, true);
      } else {
        console.warn("AG Grid: colDef.type '" + t2 + "' does not correspond to defined gridOptions.columnTypes");
      }
    });
  };
  ColumnFactory2.prototype.checkForDeprecatedItems = function(colDef) {
    if (colDef) {
      var colDefNoType = colDef;
      if (colDefNoType.group !== void 0) {
        console.warn("AG Grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3");
      }
      if (colDefNoType.headerGroup !== void 0) {
        console.warn("AG Grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3");
      }
      if (colDefNoType.headerGroupShow !== void 0) {
        console.warn("AG Grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3");
      }
      if (colDefNoType.suppressRowGroup !== void 0) {
        console.warn("AG Grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead");
      }
      if (colDefNoType.suppressAggregation !== void 0) {
        console.warn("AG Grid: colDef.suppressAggregation is deprecated, please use colDef.type instead");
      }
      if (colDefNoType.suppressRowGroup || colDefNoType.suppressAggregation) {
        console.warn("AG Grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead");
      }
      if (colDefNoType.displayName) {
        console.warn("AG Grid: Found displayName " + colDefNoType.displayName + ", please use headerName instead, displayName is deprecated.");
        colDefNoType.headerName = colDefNoType.displayName;
      }
    }
  };
  ColumnFactory2.prototype.isColumnGroup = function(abstractColDef) {
    return abstractColDef.children !== void 0;
  };
  __decorate$2w([
    Autowired("columnUtils")
  ], ColumnFactory2.prototype, "columnUtils", void 0);
  __decorate$2w([
    __param$9(0, Qualifier("loggerFactory"))
  ], ColumnFactory2.prototype, "setBeans", null);
  ColumnFactory2 = __decorate$2w([
    Bean("columnFactory")
  ], ColumnFactory2);
  return ColumnFactory2;
}(BeanStub);
var Events = function() {
  function Events2() {
  }
  Events2.EVENT_COLUMN_EVERYTHING_CHANGED = "columnEverythingChanged";
  Events2.EVENT_NEW_COLUMNS_LOADED = "newColumnsLoaded";
  Events2.EVENT_COLUMN_PIVOT_MODE_CHANGED = "columnPivotModeChanged";
  Events2.EVENT_COLUMN_ROW_GROUP_CHANGED = "columnRowGroupChanged";
  Events2.EVENT_EXPAND_COLLAPSE_ALL = "expandOrCollapseAll";
  Events2.EVENT_COLUMN_PIVOT_CHANGED = "columnPivotChanged";
  Events2.EVENT_GRID_COLUMNS_CHANGED = "gridColumnsChanged";
  Events2.EVENT_COLUMN_VALUE_CHANGED = "columnValueChanged";
  Events2.EVENT_COLUMN_MOVED = "columnMoved";
  Events2.EVENT_COLUMN_VISIBLE = "columnVisible";
  Events2.EVENT_COLUMN_PINNED = "columnPinned";
  Events2.EVENT_COLUMN_GROUP_OPENED = "columnGroupOpened";
  Events2.EVENT_COLUMN_RESIZED = "columnResized";
  Events2.EVENT_DISPLAYED_COLUMNS_CHANGED = "displayedColumnsChanged";
  Events2.EVENT_VIRTUAL_COLUMNS_CHANGED = "virtualColumnsChanged";
  Events2.EVENT_ASYNC_TRANSACTIONS_FLUSHED = "asyncTransactionsFlushed";
  Events2.EVENT_ROW_GROUP_OPENED = "rowGroupOpened";
  Events2.EVENT_ROW_DATA_CHANGED = "rowDataChanged";
  Events2.EVENT_ROW_DATA_UPDATED = "rowDataUpdated";
  Events2.EVENT_PINNED_ROW_DATA_CHANGED = "pinnedRowDataChanged";
  Events2.EVENT_RANGE_SELECTION_CHANGED = "rangeSelectionChanged";
  Events2.EVENT_CHART_CREATED = "chartCreated";
  Events2.EVENT_CHART_RANGE_SELECTION_CHANGED = "chartRangeSelectionChanged";
  Events2.EVENT_CHART_OPTIONS_CHANGED = "chartOptionsChanged";
  Events2.EVENT_CHART_DESTROYED = "chartDestroyed";
  Events2.EVENT_TOOL_PANEL_VISIBLE_CHANGED = "toolPanelVisibleChanged";
  Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_START = "columnPanelItemDragStart";
  Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_END = "columnPanelItemDragEnd";
  Events2.EVENT_MODEL_UPDATED = "modelUpdated";
  Events2.EVENT_PASTE_START = "pasteStart";
  Events2.EVENT_PASTE_END = "pasteEnd";
  Events2.EVENT_FILL_START = "fillStart";
  Events2.EVENT_FILL_END = "fillEnd";
  Events2.EVENT_CELL_CLICKED = "cellClicked";
  Events2.EVENT_CELL_DOUBLE_CLICKED = "cellDoubleClicked";
  Events2.EVENT_CELL_MOUSE_DOWN = "cellMouseDown";
  Events2.EVENT_CELL_CONTEXT_MENU = "cellContextMenu";
  Events2.EVENT_CELL_VALUE_CHANGED = "cellValueChanged";
  Events2.EVENT_CELL_EDIT_REQUEST = "cellEditRequest";
  Events2.EVENT_ROW_VALUE_CHANGED = "rowValueChanged";
  Events2.EVENT_CELL_FOCUSED = "cellFocused";
  Events2.EVENT_FULL_WIDTH_ROW_FOCUSED = "fullWidthRowFocused";
  Events2.EVENT_ROW_SELECTED = "rowSelected";
  Events2.EVENT_SELECTION_CHANGED = "selectionChanged";
  Events2.EVENT_CELL_KEY_DOWN = "cellKeyDown";
  Events2.EVENT_CELL_KEY_PRESS = "cellKeyPress";
  Events2.EVENT_CELL_MOUSE_OVER = "cellMouseOver";
  Events2.EVENT_CELL_MOUSE_OUT = "cellMouseOut";
  Events2.EVENT_FILTER_CHANGED = "filterChanged";
  Events2.EVENT_FILTER_MODIFIED = "filterModified";
  Events2.EVENT_FILTER_OPENED = "filterOpened";
  Events2.EVENT_SORT_CHANGED = "sortChanged";
  Events2.EVENT_VIRTUAL_ROW_REMOVED = "virtualRowRemoved";
  Events2.EVENT_ROW_CLICKED = "rowClicked";
  Events2.EVENT_ROW_DOUBLE_CLICKED = "rowDoubleClicked";
  Events2.EVENT_GRID_READY = "gridReady";
  Events2.EVENT_GRID_SIZE_CHANGED = "gridSizeChanged";
  Events2.EVENT_VIEWPORT_CHANGED = "viewportChanged";
  Events2.EVENT_SCROLLBAR_WIDTH_CHANGED = "scrollbarWidthChanged";
  Events2.EVENT_FIRST_DATA_RENDERED = "firstDataRendered";
  Events2.EVENT_DRAG_STARTED = "dragStarted";
  Events2.EVENT_DRAG_STOPPED = "dragStopped";
  Events2.EVENT_CHECKBOX_CHANGED = "checkboxChanged";
  Events2.EVENT_ROW_EDITING_STARTED = "rowEditingStarted";
  Events2.EVENT_ROW_EDITING_STOPPED = "rowEditingStopped";
  Events2.EVENT_CELL_EDITING_STARTED = "cellEditingStarted";
  Events2.EVENT_CELL_EDITING_STOPPED = "cellEditingStopped";
  Events2.EVENT_BODY_SCROLL = "bodyScroll";
  Events2.EVENT_BODY_SCROLL_END = "bodyScrollEnd";
  Events2.EVENT_HEIGHT_SCALE_CHANGED = "heightScaleChanged";
  Events2.EVENT_PAGINATION_CHANGED = "paginationChanged";
  Events2.EVENT_COMPONENT_STATE_CHANGED = "componentStateChanged";
  Events2.EVENT_BODY_HEIGHT_CHANGED = "bodyHeightChanged";
  Events2.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED = "displayedColumnsWidthChanged";
  Events2.EVENT_SCROLL_VISIBILITY_CHANGED = "scrollVisibilityChanged";
  Events2.EVENT_COLUMN_HOVER_CHANGED = "columnHoverChanged";
  Events2.EVENT_FLASH_CELLS = "flashCells";
  Events2.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED = "paginationPixelOffsetChanged";
  Events2.EVENT_DISPLAYED_ROWS_CHANGED = "displayedRowsChanged";
  Events2.EVENT_LEFT_PINNED_WIDTH_CHANGED = "leftPinnedWidthChanged";
  Events2.EVENT_RIGHT_PINNED_WIDTH_CHANGED = "rightPinnedWidthChanged";
  Events2.EVENT_ROW_CONTAINER_HEIGHT_CHANGED = "rowContainerHeightChanged";
  Events2.EVENT_HEADER_HEIGHT_CHANGED = "headerHeightChanged";
  Events2.EVENT_COLUMN_HEADER_HEIGHT_CHANGED = "columnHeaderHeightChanged";
  Events2.EVENT_ROW_DRAG_ENTER = "rowDragEnter";
  Events2.EVENT_ROW_DRAG_MOVE = "rowDragMove";
  Events2.EVENT_ROW_DRAG_LEAVE = "rowDragLeave";
  Events2.EVENT_ROW_DRAG_END = "rowDragEnd";
  Events2.EVENT_POPUP_TO_FRONT = "popupToFront";
  Events2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST = "columnRowGroupChangeRequest";
  Events2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST = "columnPivotChangeRequest";
  Events2.EVENT_COLUMN_VALUE_CHANGE_REQUEST = "columnValueChangeRequest";
  Events2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST = "columnAggFuncChangeRequest";
  Events2.EVENT_KEYBOARD_FOCUS = "keyboardFocus";
  Events2.EVENT_MOUSE_FOCUS = "mouseFocus";
  Events2.EVENT_STORE_UPDATED = "storeUpdated";
  return Events2;
}();
var GroupInstanceIdCreator = function() {
  function GroupInstanceIdCreator2() {
    this.existingIds = {};
  }
  GroupInstanceIdCreator2.prototype.getInstanceIdForKey = function(key) {
    var lastResult = this.existingIds[key];
    var result;
    if (typeof lastResult !== "number") {
      result = 0;
    } else {
      result = lastResult + 1;
    }
    this.existingIds[key] = result;
    return result;
  };
  return GroupInstanceIdCreator2;
}();
var reUnescapedHtml = /[&<>"']/g;
var HTML_ESCAPES = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
function utf8_encode(s3) {
  var stringFromCharCode = String.fromCharCode;
  function ucs2decode(string) {
    var output = [];
    if (!string) {
      return [];
    }
    var len = string.length;
    var counter = 0;
    var value;
    var extra;
    while (counter < len) {
      value = string.charCodeAt(counter++);
      if (value >= 55296 && value <= 56319 && counter < len) {
        extra = string.charCodeAt(counter++);
        if ((extra & 64512) == 56320) {
          output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
        } else {
          output.push(value);
          counter--;
        }
      } else {
        output.push(value);
      }
    }
    return output;
  }
  function checkScalarValue(point) {
    if (point >= 55296 && point <= 57343) {
      throw Error("Lone surrogate U+" + point.toString(16).toUpperCase() + " is not a scalar value");
    }
  }
  function createByte(point, shift) {
    return stringFromCharCode(point >> shift & 63 | 128);
  }
  function encodeCodePoint(point) {
    if (point >= 0 && point <= 31 && point !== 10) {
      var convertedCode = point.toString(16).toUpperCase();
      var paddedCode = convertedCode.padStart(4, "0");
      return "_x" + paddedCode + "_";
    }
    if ((point & 4294967168) == 0) {
      return stringFromCharCode(point);
    }
    var symbol = "";
    if ((point & 4294965248) == 0) {
      symbol = stringFromCharCode(point >> 6 & 31 | 192);
    } else if ((point & 4294901760) == 0) {
      checkScalarValue(point);
      symbol = stringFromCharCode(point >> 12 & 15 | 224);
      symbol += createByte(point, 6);
    } else if ((point & 4292870144) == 0) {
      symbol = stringFromCharCode(point >> 18 & 7 | 240);
      symbol += createByte(point, 12);
      symbol += createByte(point, 6);
    }
    symbol += stringFromCharCode(point & 63 | 128);
    return symbol;
  }
  var codePoints = ucs2decode(s3);
  var length = codePoints.length;
  var index = -1;
  var codePoint;
  var byteString = "";
  while (++index < length) {
    codePoint = codePoints[index];
    byteString += encodeCodePoint(codePoint);
  }
  return byteString;
}
function camelCaseToHyphen(str) {
  if (str === null || str === void 0) {
    return null;
  }
  return str.replace(/([A-Z])/g, function(g) {
    return "-" + g[0].toLowerCase();
  });
}
function hyphenToCamelCase(str) {
  if (str === null || str === void 0) {
    return null;
  }
  return str.replace(/-([a-z])/g, function(g) {
    return g[1].toUpperCase();
  });
}
function capitalise(str) {
  return str[0].toUpperCase() + str.substr(1).toLowerCase();
}
function escapeString(toEscape) {
  return toEscape == null ? null : toEscape.toString().toString().replace(reUnescapedHtml, function(chr) {
    return HTML_ESCAPES[chr];
  });
}
function camelCaseToHumanText(camelCase) {
  if (!camelCase || camelCase == null) {
    return null;
  }
  var rex = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;
  var words = camelCase.replace(rex, "$1$4 $2$3$5").replace(".", " ").split(" ");
  return words.map(function(word) {
    return word.substring(0, 1).toUpperCase() + (word.length > 1 ? word.substring(1, word.length) : "");
  }).join(" ");
}
var StringUtils = Object.freeze({
  __proto__: null,
  utf8_encode,
  camelCaseToHyphen,
  hyphenToCamelCase,
  capitalise,
  escapeString,
  camelCaseToHumanText
});
function convertToMap(arr) {
  var map = /* @__PURE__ */ new Map();
  arr.forEach(function(pair) {
    return map.set(pair[0], pair[1]);
  });
  return map;
}
function mapById(arr, callback) {
  var map = /* @__PURE__ */ new Map();
  arr.forEach(function(item) {
    return map.set(callback(item), item);
  });
  return map;
}
function keys(map) {
  var arr = [];
  map.forEach(function(_2, key) {
    return arr.push(key);
  });
  return arr;
}
var MapUtils = Object.freeze({
  __proto__: null,
  convertToMap,
  mapById,
  keys
});
var __read$o = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$i = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$o(arguments[i2]));
  return ar;
};
var ColDefUtil = function() {
  function ColDefUtil2() {
  }
  ColDefUtil2.STRING_PROPERTIES = [
    "headerName",
    "columnGroupShow",
    "headerClass",
    "toolPanelClass",
    "headerValueGetter",
    "pivotKeys",
    "groupId",
    "colId",
    "sort",
    "initialSort",
    "field",
    "type",
    "tooltipComponent",
    "tooltipField",
    "headerTooltip",
    "cellClass",
    "showRowGroup",
    "filter",
    "initialAggFunc",
    "defaultAggFunc",
    "aggFunc",
    "pinned",
    "initialPinned",
    "chartDataType",
    "cellEditorPopupPosition"
  ];
  ColDefUtil2.OBJECT_PROPERTIES = [
    "headerGroupComponent",
    "headerGroupComponentFramework",
    "headerGroupComponentParams",
    "cellStyle",
    "cellRenderer",
    "cellRendererParams",
    "cellRendererFramework",
    "cellEditor",
    "cellEditorFramework",
    "cellEditorParams",
    "pinnedRowCellRendererFramework",
    "pinnedRowCellRendererParams",
    "filterFramework",
    "filterParams",
    "pivotValueColumn",
    "headerComponent",
    "headerComponentFramework",
    "headerComponentParams",
    "floatingFilterComponent",
    "floatingFilterComponentParams",
    "floatingFilterComponentFramework",
    "floatingFilterFramework",
    "tooltipComponent",
    "tooltipComponentParams",
    "tooltipComponentFramework",
    "refData",
    "columnsMenuParams"
  ];
  ColDefUtil2.ARRAY_PROPERTIES = [
    "children",
    "sortingOrder",
    "allowedAggFuncs",
    "menuTabs",
    "pivotTotalColumnIds",
    "cellClassRules",
    "icons"
  ];
  ColDefUtil2.NUMBER_PROPERTIES = [
    "sortedAt",
    "sortIndex",
    "initialSortIndex",
    "flex",
    "initialFlex",
    "width",
    "initialWidth",
    "minWidth",
    "maxWidth",
    "rowGroupIndex",
    "initialRowGroupIndex",
    "pivotIndex",
    "initialPivotIndex"
  ];
  ColDefUtil2.BOOLEAN_PROPERTIES = [
    "suppressCellFlash",
    "suppressColumnsToolPanel",
    "suppressFiltersToolPanel",
    "openByDefault",
    "marryChildren",
    "hide",
    "initialHide",
    "rowGroup",
    "initialRowGroup",
    "pivot",
    "initialPivot",
    "checkboxSelection",
    "showDisabledCheckboxes",
    "headerCheckboxSelection",
    "headerCheckboxSelectionFilteredOnly",
    "suppressMenu",
    "suppressMovable",
    "lockPosition",
    "lockVisible",
    "lockPinned",
    "unSortIcon",
    "suppressSizeToFit",
    "suppressAutoSize",
    "enableRowGroup",
    "enablePivot",
    "enableValue",
    "editable",
    "suppressPaste",
    "suppressNavigable",
    "enableCellChangeFlash",
    "rowDrag",
    "dndSource",
    "autoHeight",
    "wrapText",
    "sortable",
    "resizable",
    "singleClickEdit",
    "floatingFilter",
    "cellEditorPopup",
    "suppressFillHandle",
    "wrapHeaderText",
    "autoHeaderHeight"
  ];
  ColDefUtil2.FUNCTION_PROPERTIES = [
    "dndSourceOnRowDrag",
    "valueGetter",
    "valueSetter",
    "filterValueGetter",
    "keyCreator",
    "pinnedRowCellRenderer",
    "valueFormatter",
    "pinnedRowValueFormatter",
    "valueParser",
    "comparator",
    "equals",
    "pivotComparator",
    "suppressKeyboardEvent",
    "suppressHeaderKeyboardEvent",
    "colSpan",
    "rowSpan",
    "getQuickFilterText",
    "newValueHandler",
    "onCellValueChanged",
    "onCellClicked",
    "onCellDoubleClicked",
    "onCellContextMenu",
    "rowDragText",
    "tooltipValueGetter",
    "tooltipComponent",
    "tooltipComponentFramework",
    "cellRendererSelector",
    "cellEditorSelector"
  ];
  ColDefUtil2.ALL_PROPERTIES = __spread$i(ColDefUtil2.ARRAY_PROPERTIES, ColDefUtil2.OBJECT_PROPERTIES, ColDefUtil2.STRING_PROPERTIES, ColDefUtil2.NUMBER_PROPERTIES, ColDefUtil2.FUNCTION_PROPERTIES, ColDefUtil2.BOOLEAN_PROPERTIES);
  ColDefUtil2.FRAMEWORK_PROPERTIES = [
    "__ob__",
    "__v_skip",
    "__metadata__",
    "mappedColumnProperties",
    "hasChildColumns",
    "toColDef",
    "createColDefFromGridColumn"
  ];
  return ColDefUtil2;
}();
var __read$n = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$h = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$n(arguments[i2]));
  return ar;
};
var PropertyKeys = function() {
  function PropertyKeys2() {
  }
  PropertyKeys2.STRING_PROPERTIES = [
    "sortingOrder",
    "rowClass",
    "rowSelection",
    "overlayLoadingTemplate",
    "overlayNoRowsTemplate",
    "quickFilterText",
    "rowModelType",
    "editType",
    "domLayout",
    "clipboardDelimiter",
    "rowGroupPanelShow",
    "multiSortKey",
    "pivotColumnGroupTotals",
    "pivotRowTotals",
    "pivotPanelShow",
    "fillHandleDirection",
    "serverSideStoreType",
    "groupDisplayType",
    "treeDataDisplayType"
  ];
  PropertyKeys2.OBJECT_PROPERTIES = [
    "components",
    "frameworkComponents",
    "rowStyle",
    "context",
    "autoGroupColumnDef",
    "localeText",
    "icons",
    "datasource",
    "serverSideDatasource",
    "viewportDatasource",
    "groupRowRendererParams",
    "aggFuncs",
    "fullWidthCellRendererParams",
    "defaultColGroupDef",
    "defaultColDef",
    "defaultExportParams",
    "defaultCsvExportParams",
    "defaultExcelExportParams",
    "columnTypes",
    "rowClassRules",
    "detailCellRendererParams",
    "loadingCellRendererParams",
    "loadingOverlayComponentParams",
    "noRowsOverlayComponentParams",
    "popupParent",
    "colResizeDefault",
    "statusBar",
    "sideBar",
    "chartThemeOverrides",
    "customChartThemes"
  ];
  PropertyKeys2.ARRAY_PROPERTIES = [
    "alignedGrids",
    "rowData",
    "columnDefs",
    "excelStyles",
    "pinnedTopRowData",
    "pinnedBottomRowData",
    "chartThemes"
  ];
  PropertyKeys2.NUMBER_PROPERTIES = [
    "rowHeight",
    "detailRowHeight",
    "rowBuffer",
    "colWidth",
    "headerHeight",
    "groupHeaderHeight",
    "floatingFiltersHeight",
    "pivotHeaderHeight",
    "pivotGroupHeaderHeight",
    "groupDefaultExpanded",
    "minColWidth",
    "maxColWidth",
    "viewportRowModelPageSize",
    "viewportRowModelBufferSize",
    "autoSizePadding",
    "maxBlocksInCache",
    "maxConcurrentDatasourceRequests",
    "tooltipShowDelay",
    "tooltipHideDelay",
    "cacheOverflowSize",
    "paginationPageSize",
    "cacheBlockSize",
    "infiniteInitialRowCount",
    "serverSideInitialRowCount",
    "scrollbarWidth",
    "batchUpdateWaitMillis",
    "asyncTransactionWaitMillis",
    "blockLoadDebounceMillis",
    "keepDetailRowsCount",
    "undoRedoCellEditingLimit",
    "cellFlashDelay",
    "cellFadeDelay",
    "tabIndex"
  ];
  PropertyKeys2.BOOLEAN_PROPERTIES = [
    "suppressMakeColumnVisibleAfterUnGroup",
    "suppressRowClickSelection",
    "suppressCellSelection",
    "suppressCellFocus",
    "suppressHorizontalScroll",
    "alwaysShowHorizontalScroll",
    "alwaysShowVerticalScroll",
    "debug",
    "enableBrowserTooltips",
    "enableCellExpressions",
    "angularCompileRows",
    "angularCompileFilters",
    "groupSuppressAutoColumn",
    "groupSelectsChildren",
    "groupIncludeFooter",
    "groupIncludeTotalFooter",
    "groupUseEntireRow",
    "groupSuppressBlankHeader",
    "suppressMenuHide",
    "suppressRowDeselection",
    "unSortIcon",
    "suppressMultiSort",
    "alwaysMultiSort",
    "singleClickEdit",
    "suppressLoadingOverlay",
    "suppressNoRowsOverlay",
    "suppressAutoSize",
    "skipHeaderOnAutoSize",
    "suppressParentsInRowNodes",
    "suppressColumnMoveAnimation",
    "suppressMovableColumns",
    "suppressFieldDotNotation",
    "enableRangeSelection",
    "enableRangeHandle",
    "enableFillHandle",
    "suppressClearOnFillReduction",
    "deltaSort",
    "suppressTouch",
    "suppressAsyncEvents",
    "allowContextMenuWithControlKey",
    "suppressContextMenu",
    "rememberGroupStateWhenNewData",
    "enableCellChangeFlash",
    "suppressDragLeaveHidesColumns",
    "suppressRowGroupHidesColumns",
    "suppressMiddleClickScrolls",
    "suppressPreventDefaultOnMouseWheel",
    "suppressCopyRowsToClipboard",
    "copyHeadersToClipboard",
    "copyGroupHeadersToClipboard",
    "pivotMode",
    "suppressAggFuncInHeader",
    "suppressColumnVirtualisation",
    "suppressAggAtRootLevel",
    "suppressFocusAfterRefresh",
    "functionsPassive",
    "functionsReadOnly",
    "animateRows",
    "groupSelectsFiltered",
    "groupRemoveSingleChildren",
    "groupRemoveLowestSingleChildren",
    "enableRtl",
    "suppressClickEdit",
    "rowDragEntireRow",
    "rowDragManaged",
    "suppressRowDrag",
    "suppressMoveWhenRowDragging",
    "rowDragMultiRow",
    "enableGroupEdit",
    "embedFullWidthRows",
    "deprecatedEmbedFullWidthRows",
    "suppressPaginationPanel",
    "groupHideOpenParents",
    "groupMultiAutoColumn",
    "pagination",
    "stopEditingWhenGridLosesFocus",
    "paginationAutoPageSize",
    "suppressScrollOnNewData",
    "suppressScrollWhenPopupsAreOpen",
    "purgeClosedRowNodes",
    "cacheQuickFilter",
    "deltaRowDataMode",
    "ensureDomOrder",
    "accentedSort",
    "suppressChangeDetection",
    "valueCache",
    "valueCacheNeverExpires",
    "aggregateOnlyChangedColumns",
    "suppressAnimationFrame",
    "suppressExcelExport",
    "suppressCsvExport",
    "treeData",
    "masterDetail",
    "suppressMultiRangeSelection",
    "enterMovesDownAfterEdit",
    "enterMovesDown",
    "suppressPropertyNamesCheck",
    "rowMultiSelectWithClick",
    "suppressEnterpriseResetOnNewColumns",
    "suppressRowHoverHighlight",
    "suppressRowTransform",
    "suppressClipboardPaste",
    "suppressLastEmptyLineOnPaste",
    "suppressSetColumnStateEvents",
    "suppressColumnStateEvents",
    "enableCharts",
    "deltaColumnMode",
    "suppressMaintainUnsortedOrder",
    "enableCellTextSelection",
    "suppressBrowserResizeObserver",
    "suppressMaxRenderedRowRestriction",
    "excludeChildrenWhenTreeDataFiltering",
    "tooltipMouseTrack",
    "keepDetailRows",
    "paginateChildRows",
    "preventDefaultOnContextMenu",
    "undoRedoCellEditing",
    "allowDragFromColumnsToolPanel",
    "immutableData",
    "immutableColumns",
    "pivotSuppressAutoColumn",
    "suppressExpandablePivotGroups",
    "applyColumnDefOrder",
    "debounceVerticalScrollbar",
    "detailRowAutoHeight",
    "serverSideFilteringAlwaysResets",
    "serverSideSortingAlwaysResets",
    "serverSideSortAllLevels",
    "serverSideFilterAllLevels",
    "serverSideSortOnServer",
    "serverSideFilterOnServer",
    "suppressAggFilteredOnly",
    "showOpenedGroup",
    "suppressClipboardApi",
    "suppressModelUpdateAfterUpdateTransaction",
    "stopEditingWhenCellsLoseFocus",
    "maintainColumnOrder",
    "groupMaintainOrder",
    "columnHoverHighlight",
    "reactUi",
    "suppressReactUi",
    "readOnlyEdit",
    "suppressRowVirtualisation",
    "resetRowDataOnUpdate",
    "removePivotHeaderRowWhenSingleValueColumn",
    "suppressCopySingleCellRanges",
    "groupRowsSticky",
    "serverSideInfiniteScroll"
  ];
  PropertyKeys2.FUNCTION_PROPERTIES = [
    "localeTextFunc",
    "getLocaleText",
    "groupRowInnerRenderer",
    "groupRowInnerRendererFramework",
    "groupRowRenderer",
    "groupRowRendererFramework",
    "isExternalFilterPresent",
    "getRowHeight",
    "doesExternalFilterPass",
    "getRowClass",
    "getRowStyle",
    "getContextMenuItems",
    "getMainMenuItems",
    "processRowPostCreate",
    "processCellForClipboard",
    "groupRowAggNodes",
    "getGroupRowAgg",
    "getRowNodeId",
    "isFullWidthCell",
    "isFullWidthRow",
    "fullWidthCellRenderer",
    "fullWidthCellRendererFramework",
    "processSecondaryColDef",
    "processSecondaryColGroupDef",
    "processPivotResultColDef",
    "processPivotResultColGroupDef",
    "getBusinessKeyForNode",
    "sendToClipboard",
    "navigateToNextHeader",
    "tabToNextHeader",
    "navigateToNextCell",
    "tabToNextCell",
    "processCellFromClipboard",
    "getDocument",
    "postProcessPopup",
    "getChildCount",
    "getDataPath",
    "loadingCellRenderer",
    "loadingCellRendererFramework",
    "loadingOverlayComponent",
    "loadingOverlayComponentFramework",
    "noRowsOverlayComponent",
    "noRowsOverlayComponentFramework",
    "detailCellRenderer",
    "detailCellRendererFramework",
    "isRowMaster",
    "isRowSelectable",
    "postSort",
    "postSortRows",
    "processHeaderForClipboard",
    "processGroupHeaderForClipboard",
    "paginationNumberFormatter",
    "processDataFromClipboard",
    "getServerSideGroupKey",
    "isServerSideGroup",
    "suppressKeyboardEvent",
    "createChartContainer",
    "getChartToolbarItems",
    "fillOperation",
    "isApplyServerSideTransaction",
    "getServerSideStoreParams",
    "getServerSideGroupLevelParams",
    "isServerSideGroupOpenByDefault",
    "isGroupOpenByDefault",
    "defaultGroupSortComparator",
    "defaultGroupOrderComparator",
    "initialGroupOrderComparator",
    "loadingCellRendererSelector",
    "getRowId",
    "groupAggFiltering"
  ];
  PropertyKeys2.ALL_PROPERTIES = __spread$h(PropertyKeys2.ARRAY_PROPERTIES, PropertyKeys2.OBJECT_PROPERTIES, PropertyKeys2.STRING_PROPERTIES, PropertyKeys2.NUMBER_PROPERTIES, PropertyKeys2.FUNCTION_PROPERTIES, PropertyKeys2.BOOLEAN_PROPERTIES);
  PropertyKeys2.FRAMEWORK_PROPERTIES = [
    "__ob__",
    "__v_skip",
    "__metadata__",
    "mappedColumnProperties",
    "hasChildColumns",
    "toColDef",
    "createColDefFromGridColumn"
  ];
  return PropertyKeys2;
}();
var __assign$g = function() {
  __assign$g = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$g.apply(this, arguments);
};
var __read$m = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$g = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$m(arguments[i2]));
  return ar;
};
var ComponentUtil = function() {
  function ComponentUtil2() {
  }
  ComponentUtil2.getEventCallbacks = function() {
    if (!ComponentUtil2.EVENT_CALLBACKS) {
      ComponentUtil2.EVENT_CALLBACKS = ComponentUtil2.EVENTS.map(function(event) {
        return ComponentUtil2.getCallbackForEvent(event);
      });
    }
    return ComponentUtil2.EVENT_CALLBACKS;
  };
  ComponentUtil2.copyAttributesToGridOptions = function(gridOptions, component, skipEventDeprecationCheck) {
    if (typeof gridOptions !== "object") {
      gridOptions = {};
    }
    var pGridOptions = gridOptions;
    var keyExists = function(key) {
      return typeof component[key] !== "undefined";
    };
    if (keyExists("groupAggFiltering") && typeof component.groupAggFiltering !== "function") {
      pGridOptions.groupAggFiltering = ComponentUtil2.toBoolean(component.groupAggFiltering);
      delete component.groupAggFiltering;
    }
    __spread$g(ComponentUtil2.ARRAY_PROPERTIES, ComponentUtil2.STRING_PROPERTIES, ComponentUtil2.OBJECT_PROPERTIES, ComponentUtil2.FUNCTION_PROPERTIES, ComponentUtil2.getEventCallbacks()).filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = component[key];
    });
    ComponentUtil2.BOOLEAN_PROPERTIES.filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = ComponentUtil2.toBoolean(component[key]);
    });
    ComponentUtil2.NUMBER_PROPERTIES.filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = ComponentUtil2.toNumber(component[key]);
    });
    return gridOptions;
  };
  ComponentUtil2.getCallbackForEvent = function(eventName) {
    if (!eventName || eventName.length < 2) {
      return eventName;
    }
    return "on" + eventName[0].toUpperCase() + eventName.substr(1);
  };
  ComponentUtil2.processOnChange = function(changes, gridOptions, api, columnApi) {
    if (!changes) {
      return;
    }
    var changesToApply = __assign$g({}, changes);
    var pGridOptions = gridOptions;
    var keyExists = function(key) {
      return changesToApply[key];
    };
    if (keyExists("groupAggFiltering")) {
      if (typeof changesToApply.groupAggFiltering === "function") {
        pGridOptions.groupAggFiltering = changesToApply.groupAggFiltering;
      } else {
        pGridOptions.groupAggFiltering = ComponentUtil2.toBoolean(changesToApply.groupAggFiltering);
      }
      delete changesToApply.groupAggFiltering;
    }
    if (keyExists("groupDisplayType")) {
      if (typeof changesToApply.groupDisplayType.currentValue === "string") {
        api.setGroupDisplayType(changesToApply.groupDisplayType.currentValue);
        delete changesToApply.groupDisplayType;
      }
    }
    if (changesToApply.rowClass) {
      api.setRowClass(changesToApply.rowClass.currentValue);
      delete changesToApply.rowClass;
    }
    __spread$g(ComponentUtil2.ARRAY_PROPERTIES, ComponentUtil2.OBJECT_PROPERTIES, ComponentUtil2.STRING_PROPERTIES, ComponentUtil2.getEventCallbacks()).filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = changesToApply[key].currentValue;
    });
    ComponentUtil2.BOOLEAN_PROPERTIES.filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = ComponentUtil2.toBoolean(changesToApply[key].currentValue);
    });
    ComponentUtil2.NUMBER_PROPERTIES.filter(keyExists).forEach(function(key) {
      return pGridOptions[key] = ComponentUtil2.toNumber(changesToApply[key].currentValue);
    });
    if (changesToApply.enableCellTextSelection) {
      api.setEnableCellTextSelection(ComponentUtil2.toBoolean(changesToApply.enableCellTextSelection.currentValue));
      delete changesToApply.enableCellTextSelection;
    }
    if (changesToApply.quickFilterText) {
      api.setQuickFilter(changesToApply.quickFilterText.currentValue);
      delete changesToApply.quickFilterText;
    }
    if (changesToApply.autoGroupColumnDef) {
      api.setAutoGroupColumnDef(changesToApply.autoGroupColumnDef.currentValue, "gridOptionsChanged");
      delete changesToApply.autoGroupColumnDef;
    }
    if (changesToApply.columnDefs) {
      api.setColumnDefs(changesToApply.columnDefs.currentValue, "gridOptionsChanged");
      delete changesToApply.columnDefs;
    }
    if (changesToApply.defaultColDef) {
      api.setDefaultColDef(changesToApply.defaultColDef.currentValue, "gridOptionsChanged");
      delete changesToApply.defaultColDef;
    }
    if (changesToApply.paginationPageSize) {
      api.paginationSetPageSize(ComponentUtil2.toNumber(changesToApply.paginationPageSize.currentValue));
      delete changesToApply.paginationPageSize;
    }
    if (changesToApply.pivotMode) {
      columnApi.setPivotMode(ComponentUtil2.toBoolean(changesToApply.pivotMode.currentValue));
      delete changesToApply.pivotMode;
    }
    if (changesToApply.groupRemoveSingleChildren) {
      api.setGroupRemoveSingleChildren(ComponentUtil2.toBoolean(changesToApply.groupRemoveSingleChildren.currentValue));
      delete changesToApply.groupRemoveSingleChildren;
    }
    if (changesToApply.suppressRowDrag) {
      api.setSuppressRowDrag(ComponentUtil2.toBoolean(changesToApply.suppressRowDrag.currentValue));
      delete changesToApply.suppressRowDrag;
    }
    if (changesToApply.suppressMoveWhenRowDragging) {
      api.setSuppressMoveWhenRowDragging(ComponentUtil2.toBoolean(changesToApply.suppressMoveWhenRowDragging.currentValue));
      delete changesToApply.suppressMoveWhenRowDragging;
    }
    if (changesToApply.suppressRowClickSelection) {
      api.setSuppressRowClickSelection(ComponentUtil2.toBoolean(changesToApply.suppressRowClickSelection.currentValue));
      delete changesToApply.suppressRowClickSelection;
    }
    if (changesToApply.suppressClipboardPaste) {
      api.setSuppressClipboardPaste(ComponentUtil2.toBoolean(changesToApply.suppressClipboardPaste.currentValue));
      delete changesToApply.suppressClipboardPaste;
    }
    if (changesToApply.headerHeight) {
      api.setHeaderHeight(ComponentUtil2.toNumber(changesToApply.headerHeight.currentValue));
      delete changesToApply.headerHeight;
    }
    var dynamicApi = api;
    Object.keys(changesToApply).forEach(function(property) {
      var setterName = "set" + property.charAt(0).toUpperCase() + property.substring(1);
      if (dynamicApi[setterName]) {
        dynamicApi[setterName](changes[property].currentValue);
      }
    });
    var event = {
      type: Events.EVENT_COMPONENT_STATE_CHANGED
    };
    iterateObject(changes, function(key, value) {
      event[key] = value;
    });
    api.dispatchEvent(event);
  };
  ComponentUtil2.toBoolean = function(value) {
    if (typeof value === "boolean") {
      return value;
    }
    if (typeof value === "string") {
      return value.toUpperCase() === "TRUE" || value == "";
    }
    return false;
  };
  ComponentUtil2.toNumber = function(value) {
    if (typeof value === "number") {
      return value;
    }
    if (typeof value === "string") {
      return Number(value);
    }
  };
  ComponentUtil2.EVENTS = [];
  ComponentUtil2.PUBLIC_EVENTS = [];
  ComponentUtil2.EXCLUDED_INTERNAL_EVENTS = [];
  ComponentUtil2.STRING_PROPERTIES = PropertyKeys.STRING_PROPERTIES;
  ComponentUtil2.OBJECT_PROPERTIES = PropertyKeys.OBJECT_PROPERTIES;
  ComponentUtil2.ARRAY_PROPERTIES = PropertyKeys.ARRAY_PROPERTIES;
  ComponentUtil2.NUMBER_PROPERTIES = PropertyKeys.NUMBER_PROPERTIES;
  ComponentUtil2.BOOLEAN_PROPERTIES = PropertyKeys.BOOLEAN_PROPERTIES;
  ComponentUtil2.FUNCTION_PROPERTIES = PropertyKeys.FUNCTION_PROPERTIES;
  ComponentUtil2.ALL_PROPERTIES = PropertyKeys.ALL_PROPERTIES;
  return ComponentUtil2;
}();
ComponentUtil.EVENTS = values(Events);
ComponentUtil.EXCLUDED_INTERNAL_EVENTS = [
  Events.EVENT_SCROLLBAR_WIDTH_CHANGED,
  Events.EVENT_CHECKBOX_CHANGED,
  Events.EVENT_HEIGHT_SCALE_CHANGED,
  Events.EVENT_BODY_HEIGHT_CHANGED,
  Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,
  Events.EVENT_SCROLL_VISIBILITY_CHANGED,
  Events.EVENT_COLUMN_HOVER_CHANGED,
  Events.EVENT_FLASH_CELLS,
  Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,
  Events.EVENT_DISPLAYED_ROWS_CHANGED,
  Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,
  Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,
  Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,
  Events.EVENT_POPUP_TO_FRONT,
  Events.EVENT_KEYBOARD_FOCUS,
  Events.EVENT_MOUSE_FOCUS,
  Events.EVENT_STORE_UPDATED,
  Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,
  Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,
  Events.EVENT_FILL_START,
  Events.EVENT_FILL_END,
  Events.EVENT_FULL_WIDTH_ROW_FOCUSED,
  Events.EVENT_HEADER_HEIGHT_CHANGED,
  Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED
];
ComponentUtil.PUBLIC_EVENTS = ComponentUtil.EVENTS.filter(function(e2) {
  return !includes(ComponentUtil.EXCLUDED_INTERNAL_EVENTS, e2);
});
var SideBarDefParser = function() {
  function SideBarDefParser2() {
  }
  SideBarDefParser2.parse = function(toParse) {
    if (!toParse) {
      return null;
    }
    if (toParse === true) {
      return {
        toolPanels: [
          SideBarDefParser2.DEFAULT_COLUMN_COMP,
          SideBarDefParser2.DEFAULT_FILTER_COMP
        ],
        defaultToolPanel: "columns"
      };
    }
    if (typeof toParse === "string") {
      return SideBarDefParser2.parse([toParse]);
    }
    if (Array.isArray(toParse)) {
      var comps_1 = [];
      toParse.forEach(function(key) {
        var lookupResult = SideBarDefParser2.DEFAULT_BY_KEY[key];
        if (!lookupResult) {
          console.warn("AG Grid: the key " + key + " is not a valid key for specifying a tool panel, valid keys are: " + Object.keys(SideBarDefParser2.DEFAULT_BY_KEY).join(","));
          return;
        }
        comps_1.push(lookupResult);
      });
      if (comps_1.length === 0) {
        return null;
      }
      return {
        toolPanels: comps_1,
        defaultToolPanel: comps_1[0].id
      };
    }
    var result = {
      toolPanels: SideBarDefParser2.parseComponents(toParse.toolPanels),
      defaultToolPanel: toParse.defaultToolPanel,
      hiddenByDefault: toParse.hiddenByDefault,
      position: toParse.position
    };
    return result;
  };
  SideBarDefParser2.parseComponents = function(from) {
    var result = [];
    if (!from) {
      return result;
    }
    from.forEach(function(it2) {
      var toAdd = null;
      if (typeof it2 === "string") {
        var lookupResult = SideBarDefParser2.DEFAULT_BY_KEY[it2];
        if (!lookupResult) {
          console.warn("AG Grid: the key " + it2 + " is not a valid key for specifying a tool panel, valid keys are: " + Object.keys(SideBarDefParser2.DEFAULT_BY_KEY).join(","));
          return;
        }
        toAdd = lookupResult;
      } else {
        toAdd = it2;
      }
      result.push(toAdd);
    });
    return result;
  };
  SideBarDefParser2.DEFAULT_COLUMN_COMP = {
    id: "columns",
    labelDefault: "Columns",
    labelKey: "columns",
    iconKey: "columns",
    toolPanel: "agColumnsToolPanel"
  };
  SideBarDefParser2.DEFAULT_FILTER_COMP = {
    id: "filters",
    labelDefault: "Filters",
    labelKey: "filters",
    iconKey: "filter",
    toolPanel: "agFiltersToolPanel"
  };
  SideBarDefParser2.DEFAULT_BY_KEY = {
    columns: SideBarDefParser2.DEFAULT_COLUMN_COMP,
    filters: SideBarDefParser2.DEFAULT_FILTER_COMP
  };
  return SideBarDefParser2;
}();
var __values$5 = function(o) {
  var s3 = typeof Symbol === "function" && Symbol.iterator, m3 = s3 && o[s3], i2 = 0;
  if (m3)
    return m3.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i2 >= o.length)
          o = void 0;
        return { value: o && o[i2++], done: !o };
      }
    };
  throw new TypeError(s3 ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var isSafari;
var isIE;
var isEdge;
var isChrome;
var isFirefox;
var isMacOs;
var isIOS;
var invisibleScrollbar;
var browserScrollbarWidth;
var browserInfo;
function getBrowserInfo() {
  if (browserInfo) {
    return browserInfo;
  }
  var userAgent = navigator.userAgent;
  var match2 = userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
  var tem;
  var version;
  if (/trident/i.test(match2[1])) {
    tem = /\brv[ :]+(\d+)/g.exec(userAgent) || [];
    version = tem[1] != null ? parseFloat(tem[1]) : 0;
    return {
      name: "IE",
      version
    };
  }
  if (match2[1] === "Chrome") {
    tem = userAgent.match(/\bOPR|Edge\/(\d+)/);
    if (tem != null) {
      version = tem[1] != null ? parseFloat(tem[1]) : 0;
      return {
        name: "Opera",
        version
      };
    }
  }
  match2 = match2[2] ? [match2[1], match2[2]] : [navigator.appName, navigator.appVersion, "-?"];
  tem = userAgent.match(/version\/(\d+)/i);
  if (tem != null) {
    match2.splice(1, 1, tem[1]);
  }
  var name = match2[0];
  version = match2[1] != null ? parseFloat(match2[1]) : 0;
  browserInfo = { name, version };
  return browserInfo;
}
function isBrowserIE() {
  if (isIE === void 0) {
    isIE = !!document.documentMode;
  }
  return isIE;
}
function isBrowserEdge() {
  if (isEdge === void 0) {
    isEdge = !isBrowserIE() && !!window.StyleMedia;
  }
  return isEdge;
}
function isBrowserSafari() {
  if (isSafari === void 0) {
    isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
  }
  return isSafari;
}
function isBrowserChrome() {
  if (isChrome === void 0) {
    var win = window;
    isChrome = !!win.chrome && (!!win.chrome.webstore || !!win.chrome.runtime) || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
  }
  return isChrome;
}
function isBrowserFirefox() {
  if (isFirefox === void 0) {
    var win = window;
    isFirefox = typeof win.InstallTrigger !== "undefined";
  }
  return isFirefox;
}
function isMacOsUserAgent() {
  if (isMacOs === void 0) {
    isMacOs = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
  }
  return isMacOs;
}
function isIOSUserAgent() {
  if (isIOS === void 0) {
    isIOS = (/iPad|iPhone|iPod/.test(navigator.platform) || navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1) && !window.MSStream;
  }
  return isIOS;
}
function browserSupportsPreventScroll() {
  return !isBrowserSafari() || getBrowserInfo().version >= 15;
}
function getTabIndex(el2) {
  if (!el2) {
    return null;
  }
  var numberTabIndex = el2.tabIndex;
  var tabIndex = el2.getAttribute("tabIndex");
  if (numberTabIndex === -1 && (tabIndex === null || tabIndex === "" && !isBrowserFirefox())) {
    return null;
  }
  return numberTabIndex.toString();
}
function getMaxDivHeight() {
  if (!document.body) {
    return -1;
  }
  var res = 1e6;
  var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6e6 : 1e9;
  var div = document.createElement("div");
  document.body.appendChild(div);
  while (true) {
    var test = res * 2;
    div.style.height = test + "px";
    if (test > testUpTo || div.clientHeight !== test) {
      break;
    } else {
      res = test;
    }
  }
  document.body.removeChild(div);
  return res;
}
function getScrollbarWidth() {
  if (browserScrollbarWidth == null) {
    initScrollbarWidthAndVisibility();
  }
  return browserScrollbarWidth;
}
function initScrollbarWidthAndVisibility() {
  var body = document.body;
  var div = document.createElement("div");
  div.style.width = div.style.height = "100px";
  div.style.opacity = "0";
  div.style.overflow = "scroll";
  div.style.msOverflowStyle = "scrollbar";
  div.style.position = "absolute";
  body.appendChild(div);
  var width = div.offsetWidth - div.clientWidth;
  if (width === 0 && div.clientWidth === 0) {
    width = null;
  }
  if (div.parentNode) {
    div.parentNode.removeChild(div);
  }
  if (width != null) {
    browserScrollbarWidth = width;
    invisibleScrollbar = width === 0;
  }
}
function isInvisibleScrollbar() {
  if (invisibleScrollbar == null) {
    initScrollbarWidthAndVisibility();
  }
  return invisibleScrollbar;
}
function hasOverflowScrolling() {
  var e_1, _a2;
  var prefixes = ["webkit", "moz", "o", "ms"];
  var div = document.createElement("div");
  var body = document.getElementsByTagName("body")[0];
  var found = false;
  var p;
  body.appendChild(div);
  div.setAttribute("style", prefixes.map(function(prefix) {
    return "-" + prefix + "-overflow-scrolling: touch";
  }).concat("overflow-scrolling: touch").join(";"));
  var computedStyle = window.getComputedStyle(div);
  if (computedStyle.overflowScrolling === "touch") {
    found = true;
  }
  if (!found) {
    try {
      for (var prefixes_1 = __values$5(prefixes), prefixes_1_1 = prefixes_1.next(); !prefixes_1_1.done; prefixes_1_1 = prefixes_1.next()) {
        p = prefixes_1_1.value;
        if (computedStyle[p + "OverflowScrolling"] === "touch") {
          found = true;
          break;
        }
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (prefixes_1_1 && !prefixes_1_1.done && (_a2 = prefixes_1.return))
          _a2.call(prefixes_1);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
  }
  if (div.parentNode) {
    div.parentNode.removeChild(div);
  }
  return found;
}
function getBodyWidth() {
  if (document.body) {
    return document.body.clientWidth;
  }
  if (window.innerHeight) {
    return window.innerWidth;
  }
  if (document.documentElement && document.documentElement.clientWidth) {
    return document.documentElement.clientWidth;
  }
  return -1;
}
function getBodyHeight() {
  if (document.body) {
    return document.body.clientHeight;
  }
  if (window.innerHeight) {
    return window.innerHeight;
  }
  if (document.documentElement && document.documentElement.clientHeight) {
    return document.documentElement.clientHeight;
  }
  return -1;
}
var BrowserUtils = Object.freeze({
  __proto__: null,
  getBrowserInfo,
  isBrowserEdge,
  isBrowserSafari,
  isBrowserChrome,
  isBrowserFirefox,
  isMacOsUserAgent,
  isIOSUserAgent,
  browserSupportsPreventScroll,
  getTabIndex,
  getMaxDivHeight,
  getScrollbarWidth,
  isInvisibleScrollbar,
  hasOverflowScrolling,
  getBodyWidth,
  getBodyHeight
});
function fuzzyCheckStrings(inputValues, validValues, allSuggestions) {
  var fuzzyMatches = {};
  var invalidInputs = inputValues.filter(function(inputValue) {
    return !validValues.some(function(validValue) {
      return validValue === inputValue;
    });
  });
  if (invalidInputs.length > 0) {
    invalidInputs.forEach(function(invalidInput) {
      return fuzzyMatches[invalidInput] = fuzzySuggestions(invalidInput, allSuggestions);
    });
  }
  return fuzzyMatches;
}
function fuzzySuggestions(inputValue, allSuggestions, hideIrrelevant, weighted) {
  var search = weighted ? string_weighted_distances : string_distances;
  var thisSuggestions = allSuggestions.map(function(text) {
    return {
      value: text,
      relevance: search(inputValue.toLowerCase(), text.toLocaleLowerCase())
    };
  });
  thisSuggestions.sort(function(a3, b2) {
    return b2.relevance - a3.relevance;
  });
  if (hideIrrelevant) {
    thisSuggestions = thisSuggestions.filter(function(suggestion) {
      return suggestion.relevance !== 0;
    });
  }
  return thisSuggestions.map(function(suggestion) {
    return suggestion.value;
  });
}
function get_bigrams(from) {
  var s3 = from.toLowerCase();
  var v = new Array(s3.length - 1);
  var i2;
  var j;
  var ref2;
  for (i2 = j = 0, ref2 = v.length; j <= ref2; i2 = j += 1) {
    v[i2] = s3.slice(i2, i2 + 2);
  }
  return v;
}
function string_distances(str1, str2) {
  if (str1.length === 0 && str2.length === 0) {
    return 0;
  }
  var pairs1 = get_bigrams(str1);
  var pairs2 = get_bigrams(str2);
  var union = pairs1.length + pairs2.length;
  var hit_count = 0;
  var j;
  var len;
  for (j = 0, len = pairs1.length; j < len; j++) {
    var x2 = pairs1[j];
    var k2 = void 0;
    var len1 = void 0;
    for (k2 = 0, len1 = pairs2.length; k2 < len1; k2++) {
      var y3 = pairs2[k2];
      if (x2 === y3) {
        hit_count++;
      }
    }
  }
  return hit_count > 0 ? 2 * hit_count / union : 0;
}
function string_weighted_distances(str1, str2) {
  var a3 = str1.replace(/\s/g, "");
  var b2 = str2.replace(/\s/g, "");
  var weight = 0;
  var lastIndex = 0;
  for (var i2 = 0; i2 < a3.length; i2++) {
    var idx = b2.indexOf(a3[i2], lastIndex);
    if (idx === -1) {
      continue;
    }
    lastIndex = idx;
    weight += 100 - lastIndex * 100 / 1e4 * 100;
  }
  return weight;
}
var FuzzyMatchUtils = Object.freeze({
  __proto__: null,
  fuzzyCheckStrings,
  fuzzySuggestions,
  get_bigrams,
  string_distances,
  string_weighted_distances
});
function padStartWidthZeros(value, totalStringSize) {
  return value.toString().padStart(totalStringSize, "0");
}
function createArrayOfNumbers(first, last2) {
  var result = [];
  for (var i2 = first; i2 <= last2; i2++) {
    result.push(i2);
  }
  return result;
}
function isNumeric(value) {
  return value !== "" && !isNaN(parseFloat(value)) && isFinite(value);
}
function cleanNumber(value) {
  if (typeof value === "string") {
    value = parseInt(value, 10);
  }
  if (typeof value === "number") {
    return Math.floor(value);
  }
  return null;
}
function decToHex(number, bytes) {
  var hex = "";
  for (var i2 = 0; i2 < bytes; i2++) {
    hex += String.fromCharCode(number & 255);
    number >>>= 8;
  }
  return hex;
}
function formatNumberTwoDecimalPlacesAndCommas(value, thousandSeparator, decimalSeparator) {
  if (typeof value !== "number") {
    return "";
  }
  return formatNumberCommas(Math.round(value * 100) / 100, thousandSeparator, decimalSeparator);
}
function formatNumberCommas(value, thousandSeparator, decimalSeparator) {
  if (typeof value !== "number") {
    return "";
  }
  return value.toString().replace(".", decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + thousandSeparator);
}
function sum(values2) {
  return values2 == null ? null : values2.reduce(function(total, value) {
    return total + value;
  }, 0);
}
var NumberUtils = Object.freeze({
  __proto__: null,
  padStartWidthZeros,
  createArrayOfNumbers,
  isNumeric,
  cleanNumber,
  decToHex,
  formatNumberTwoDecimalPlacesAndCommas,
  formatNumberCommas,
  sum
});
var __assign$f = function() {
  __assign$f = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$f.apply(this, arguments);
};
var __decorate$2v = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$8 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var __read$l = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$f = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$l(arguments[i2]));
  return ar;
};
var DEFAULT_ROW_HEIGHT = 25;
var DEFAULT_DETAIL_ROW_HEIGHT = 300;
var DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE = 5;
var DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE = 5;
var DEFAULT_KEEP_DETAIL_ROW_COUNT = 10;
function isTrue(value) {
  return value === true || value === "true";
}
function toNumber(value) {
  if (typeof value == "number") {
    return value;
  }
  if (typeof value == "string") {
    return parseInt(value, 10);
  }
}
function zeroOrGreater(value, defaultValue) {
  if (value >= 0) {
    return value;
  }
  return defaultValue;
}
function oneOrGreater(value, defaultValue) {
  var valueNumber = parseInt(value, 10);
  if (isNumeric(valueNumber) && valueNumber > 0) {
    return valueNumber;
  }
  return defaultValue;
}
var GridOptionsWrapper = function() {
  function GridOptionsWrapper2() {
    this.propertyEventService = new EventService();
    this.domDataKey = "__AG_" + Math.random().toString();
    this.destroyed = false;
  }
  GridOptionsWrapper_1 = GridOptionsWrapper2;
  GridOptionsWrapper2.prototype.agWire = function(gridApi, columnApi) {
    this.gridOptions.api = gridApi;
    this.gridOptions.columnApi = columnApi;
    this.checkForDeprecated();
    this.checkForViolations();
  };
  GridOptionsWrapper2.prototype.destroy = function() {
    this.gridOptions.api = null;
    this.gridOptions.columnApi = null;
    this.destroyed = true;
  };
  GridOptionsWrapper2.prototype.init = function() {
    var _this = this;
    if (this.gridOptions.suppressPropertyNamesCheck !== true) {
      this.checkGridOptionsProperties();
      this.checkColumnDefProperties();
    }
    if (this.gridOptions.sideBar != null) {
      this.gridOptions.sideBar = SideBarDefParser.parse(this.gridOptions.sideBar);
    }
    var async = this.useAsyncEvents();
    this.eventService.addGlobalListener(this.globalEventHandler.bind(this), async);
    if (this.isGroupSelectsChildren() && this.isSuppressParentsInRowNodes()) {
      console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work");
    }
    if (this.isGroupSelectsChildren()) {
      if (!this.isRowSelectionMulti()) {
        console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense");
      }
      if (this.isRowModelServerSide()) {
        console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.");
      }
    }
    if (this.isGroupRemoveSingleChildren() && this.isGroupHideOpenParents()) {
      console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to use these together on our support forum either, you will get the same answer!");
    }
    if (this.isRowModelServerSide()) {
      var msg = function(prop) {
        return "AG Grid: '" + prop + "' is not supported on the Server-Side Row Model";
      };
      if (exists(this.gridOptions.groupDefaultExpanded)) {
        console.warn(msg("groupDefaultExpanded"));
      }
      if (exists(this.gridOptions.groupDefaultExpanded)) {
        console.warn(msg("groupIncludeFooter"));
      }
      if (exists(this.gridOptions.groupDefaultExpanded)) {
        console.warn(msg("groupIncludeTotalFooter"));
      }
    }
    if (isTrue(this.gridOptions.enableRangeSelection)) {
      ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "enableRangeSelection");
    } else if (this.isEnableRangeHandle() || this.isEnableFillHandle()) {
      console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");
    }
    if (this.isGroupRowsSticky()) {
      if (this.isGroupHideOpenParents()) {
        console.warn("AG Grid: groupRowsSticky and groupHideOpenParents do not work with each other, you need to pick one.");
      }
      if (this.isMasterDetail()) {
        console.warn("AG Grid: groupRowsSticky and masterDetail do not work with each other, you need to pick one.");
      }
      if (this.isPagination()) {
        console.warn("AG Grid: groupRowsSticky and pagination do not work with each other, you need to pick one.");
      }
    }
    var warnOfDeprecaredIcon = function(name) {
      if (_this.gridOptions.icons && _this.gridOptions.icons[name]) {
        console.warn("gridOptions.icons." + name + " is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/");
      }
    };
    warnOfDeprecaredIcon("radioButtonOff");
    warnOfDeprecaredIcon("radioButtonOn");
    warnOfDeprecaredIcon("checkboxChecked");
    warnOfDeprecaredIcon("checkboxUnchecked");
    warnOfDeprecaredIcon("checkboxIndeterminate");
    this.getScrollbarWidth();
  };
  GridOptionsWrapper2.prototype.checkColumnDefProperties = function() {
    var _this = this;
    if (this.gridOptions.columnDefs == null) {
      return;
    }
    this.gridOptions.columnDefs.forEach(function(colDef) {
      var userProperties = Object.getOwnPropertyNames(colDef);
      var validProperties = __spread$f(ColDefUtil.ALL_PROPERTIES, ColDefUtil.FRAMEWORK_PROPERTIES);
      _this.checkProperties(userProperties, validProperties, validProperties, "colDef", "https://www.ag-grid.com/javascript-grid-column-properties/");
    });
  };
  GridOptionsWrapper2.prototype.checkGridOptionsProperties = function() {
    var userProperties = Object.getOwnPropertyNames(this.gridOptions);
    var validProperties = __spread$f(PropertyKeys.ALL_PROPERTIES, PropertyKeys.FRAMEWORK_PROPERTIES, values(Events).map(function(event) {
      return ComponentUtil.getCallbackForEvent(event);
    }));
    var validPropertiesAndExceptions = __spread$f(validProperties, ["api", "columnApi"]);
    this.checkProperties(userProperties, validPropertiesAndExceptions, validProperties, "gridOptions", "https://www.ag-grid.com/javascript-data-grid/grid-options/");
  };
  GridOptionsWrapper2.prototype.checkProperties = function(userProperties, validPropertiesAndExceptions, validProperties, containerName, docsUrl) {
    var invalidProperties = fuzzyCheckStrings(userProperties, validPropertiesAndExceptions, validProperties);
    iterateObject(invalidProperties, function(key, value) {
      console.warn("ag-grid: invalid " + containerName + " property '" + key + "' did you mean any of these: " + value.slice(0, 8).join(", "));
    });
    if (Object.keys(invalidProperties).length > 0) {
      console.warn("ag-grid: to see all the valid " + containerName + " properties please check: " + docsUrl);
    }
  };
  GridOptionsWrapper2.prototype.mergeGridCommonParams = function(callback) {
    var _this = this;
    if (callback) {
      var wrapped = function(callbackParams) {
        var mergedParams = __assign$f(__assign$f({}, callbackParams), { api: _this.getApi(), columnApi: _this.getColumnApi(), context: _this.getContext() });
        return callback(mergedParams);
      };
      return wrapped;
    }
    return callback;
  };
  GridOptionsWrapper2.prototype.getDomDataKey = function() {
    return this.domDataKey;
  };
  GridOptionsWrapper2.prototype.getDomData = function(element, key) {
    var domData = element[this.getDomDataKey()];
    return domData ? domData[key] : void 0;
  };
  GridOptionsWrapper2.prototype.setDomData = function(element, key, value) {
    var domDataKey = this.getDomDataKey();
    var domData = element[domDataKey];
    if (missing(domData)) {
      domData = {};
      element[domDataKey] = domData;
    }
    domData[key] = value;
  };
  GridOptionsWrapper2.prototype.isRowSelection = function() {
    return this.gridOptions.rowSelection === "single" || this.gridOptions.rowSelection === "multiple";
  };
  GridOptionsWrapper2.prototype.isSuppressRowDeselection = function() {
    return isTrue(this.gridOptions.suppressRowDeselection);
  };
  GridOptionsWrapper2.prototype.isRowSelectionMulti = function() {
    return this.gridOptions.rowSelection === "multiple";
  };
  GridOptionsWrapper2.prototype.isRowMultiSelectWithClick = function() {
    return isTrue(this.gridOptions.rowMultiSelectWithClick);
  };
  GridOptionsWrapper2.prototype.getContext = function() {
    return this.gridOptions.context;
  };
  GridOptionsWrapper2.prototype.isPivotMode = function() {
    return isTrue(this.gridOptions.pivotMode);
  };
  GridOptionsWrapper2.prototype.isSuppressExpandablePivotGroups = function() {
    return isTrue(this.gridOptions.suppressExpandablePivotGroups);
  };
  GridOptionsWrapper2.prototype.getPivotColumnGroupTotals = function() {
    return this.gridOptions.pivotColumnGroupTotals;
  };
  GridOptionsWrapper2.prototype.getPivotRowTotals = function() {
    return this.gridOptions.pivotRowTotals;
  };
  GridOptionsWrapper2.prototype.isRowModelInfinite = function() {
    return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_INFINITE;
  };
  GridOptionsWrapper2.prototype.isRowModelViewport = function() {
    return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_VIEWPORT;
  };
  GridOptionsWrapper2.prototype.isRowModelServerSide = function() {
    return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
  };
  GridOptionsWrapper2.prototype.isRowModelDefault = function() {
    return missing(this.gridOptions.rowModelType) || this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
  };
  GridOptionsWrapper2.prototype.isFullRowEdit = function() {
    return this.gridOptions.editType === "fullRow";
  };
  GridOptionsWrapper2.prototype.isSuppressFocusAfterRefresh = function() {
    return isTrue(this.gridOptions.suppressFocusAfterRefresh);
  };
  GridOptionsWrapper2.prototype.isSuppressBrowserResizeObserver = function() {
    return isTrue(this.gridOptions.suppressBrowserResizeObserver);
  };
  GridOptionsWrapper2.prototype.isSuppressMaintainUnsortedOrder = function() {
    return isTrue(this.gridOptions.suppressMaintainUnsortedOrder);
  };
  GridOptionsWrapper2.prototype.isSuppressClearOnFillReduction = function() {
    return isTrue(this.gridOptions.suppressClearOnFillReduction);
  };
  GridOptionsWrapper2.prototype.isShowToolPanel = function() {
    return isTrue(this.gridOptions.sideBar && Array.isArray(this.getSideBar().toolPanels));
  };
  GridOptionsWrapper2.prototype.getSideBar = function() {
    return this.gridOptions.sideBar;
  };
  GridOptionsWrapper2.prototype.isSuppressTouch = function() {
    return isTrue(this.gridOptions.suppressTouch);
  };
  GridOptionsWrapper2.prototype.isMaintainColumnOrder = function() {
    return isTrue(this.gridOptions.maintainColumnOrder);
  };
  GridOptionsWrapper2.prototype.isSuppressRowTransform = function() {
    return isTrue(this.gridOptions.suppressRowTransform);
  };
  GridOptionsWrapper2.prototype.isSuppressColumnStateEvents = function() {
    return isTrue(this.gridOptions.suppressColumnStateEvents);
  };
  GridOptionsWrapper2.prototype.isAllowDragFromColumnsToolPanel = function() {
    return isTrue(this.gridOptions.allowDragFromColumnsToolPanel);
  };
  GridOptionsWrapper2.prototype.useAsyncEvents = function() {
    return !isTrue(this.gridOptions.suppressAsyncEvents);
  };
  GridOptionsWrapper2.prototype.isEnableCellChangeFlash = function() {
    return isTrue(this.gridOptions.enableCellChangeFlash);
  };
  GridOptionsWrapper2.prototype.getCellFlashDelay = function() {
    return this.gridOptions.cellFlashDelay || 500;
  };
  GridOptionsWrapper2.prototype.getCellFadeDelay = function() {
    return this.gridOptions.cellFadeDelay || 1e3;
  };
  GridOptionsWrapper2.prototype.isGroupSelectsChildren = function() {
    return isTrue(this.gridOptions.groupSelectsChildren);
  };
  GridOptionsWrapper2.prototype.isSuppressRowHoverHighlight = function() {
    return isTrue(this.gridOptions.suppressRowHoverHighlight);
  };
  GridOptionsWrapper2.prototype.isColumnHoverHighlight = function() {
    return isTrue(this.gridOptions.columnHoverHighlight);
  };
  GridOptionsWrapper2.prototype.isGroupSelectsFiltered = function() {
    return isTrue(this.gridOptions.groupSelectsFiltered);
  };
  GridOptionsWrapper2.prototype.isGroupHideOpenParents = function() {
    return isTrue(this.gridOptions.groupHideOpenParents);
  };
  GridOptionsWrapper2.prototype.isGroupMaintainOrder = function() {
    return isTrue(this.gridOptions.groupMaintainOrder);
  };
  GridOptionsWrapper2.prototype.getAutoGroupColumnDef = function() {
    return this.gridOptions.autoGroupColumnDef;
  };
  GridOptionsWrapper2.prototype.isColumnsSortingCoupledToGroup = function() {
    var _a2;
    var autoGroupColumnDef = this.getAutoGroupColumnDef();
    var isClientSideRowModel = this.isRowModelDefault();
    return isClientSideRowModel && !((_a2 = autoGroupColumnDef) === null || _a2 === void 0 ? void 0 : _a2.comparator);
  };
  GridOptionsWrapper2.prototype.isGroupMultiAutoColumn = function() {
    if (this.gridOptions.groupDisplayType) {
      return this.matchesGroupDisplayType("multipleColumns", this.gridOptions.groupDisplayType);
    }
    return isTrue(this.gridOptions.groupHideOpenParents);
  };
  GridOptionsWrapper2.prototype.isGroupUseEntireRow = function(pivotMode) {
    if (pivotMode) {
      return false;
    }
    return this.gridOptions.groupDisplayType ? this.matchesGroupDisplayType("groupRows", this.gridOptions.groupDisplayType) : false;
  };
  GridOptionsWrapper2.prototype.isGroupRowsSticky = function() {
    return isTrue(this.gridOptions.groupRowsSticky);
  };
  GridOptionsWrapper2.prototype.isGroupSuppressAutoColumn = function() {
    var isCustomRowGroups = this.gridOptions.groupDisplayType ? this.matchesGroupDisplayType("custom", this.gridOptions.groupDisplayType) : false;
    if (isCustomRowGroups) {
      return true;
    }
    return this.gridOptions.treeDataDisplayType ? this.matchesTreeDataDisplayType("custom", this.gridOptions.treeDataDisplayType) : false;
  };
  GridOptionsWrapper2.prototype.isGroupRemoveSingleChildren = function() {
    return isTrue(this.gridOptions.groupRemoveSingleChildren);
  };
  GridOptionsWrapper2.prototype.isGroupRemoveLowestSingleChildren = function() {
    return isTrue(this.gridOptions.groupRemoveLowestSingleChildren);
  };
  GridOptionsWrapper2.prototype.isGroupIncludeFooter = function() {
    return isTrue(this.gridOptions.groupIncludeFooter);
  };
  GridOptionsWrapper2.prototype.isGroupIncludeTotalFooter = function() {
    return isTrue(this.gridOptions.groupIncludeTotalFooter);
  };
  GridOptionsWrapper2.prototype.isGroupSuppressBlankHeader = function() {
    return isTrue(this.gridOptions.groupSuppressBlankHeader);
  };
  GridOptionsWrapper2.prototype.isSuppressRowClickSelection = function() {
    return isTrue(this.gridOptions.suppressRowClickSelection);
  };
  GridOptionsWrapper2.prototype.isSuppressCellFocus = function() {
    return isTrue(this.gridOptions.suppressCellFocus);
  };
  GridOptionsWrapper2.prototype.isSuppressMultiSort = function() {
    return isTrue(this.gridOptions.suppressMultiSort);
  };
  GridOptionsWrapper2.prototype.isAlwaysMultiSort = function() {
    return isTrue(this.gridOptions.alwaysMultiSort);
  };
  GridOptionsWrapper2.prototype.isMultiSortKeyCtrl = function() {
    return this.gridOptions.multiSortKey === "ctrl";
  };
  GridOptionsWrapper2.prototype.isPivotSuppressAutoColumn = function() {
    return isTrue(this.gridOptions.pivotSuppressAutoColumn);
  };
  GridOptionsWrapper2.prototype.isSuppressDragLeaveHidesColumns = function() {
    return isTrue(this.gridOptions.suppressDragLeaveHidesColumns);
  };
  GridOptionsWrapper2.prototype.isSuppressRowGroupHidesColumns = function() {
    return isTrue(this.gridOptions.suppressRowGroupHidesColumns);
  };
  GridOptionsWrapper2.prototype.isSuppressScrollOnNewData = function() {
    return isTrue(this.gridOptions.suppressScrollOnNewData);
  };
  GridOptionsWrapper2.prototype.isSuppressScrollWhenPopupsAreOpen = function() {
    return isTrue(this.gridOptions.suppressScrollWhenPopupsAreOpen);
  };
  GridOptionsWrapper2.prototype.isRowDragEntireRow = function() {
    return isTrue(this.gridOptions.rowDragEntireRow);
  };
  GridOptionsWrapper2.prototype.isSuppressRowDrag = function() {
    return isTrue(this.gridOptions.suppressRowDrag);
  };
  GridOptionsWrapper2.prototype.isRowDragManaged = function() {
    return isTrue(this.gridOptions.rowDragManaged);
  };
  GridOptionsWrapper2.prototype.isSuppressMoveWhenRowDragging = function() {
    return isTrue(this.gridOptions.suppressMoveWhenRowDragging);
  };
  GridOptionsWrapper2.prototype.isRowDragMultiRow = function() {
    return isTrue(this.gridOptions.rowDragMultiRow);
  };
  GridOptionsWrapper2.prototype.getDomLayout = function() {
    var domLayout = this.gridOptions.domLayout || Constants.DOM_LAYOUT_NORMAL;
    var validLayouts = [
      Constants.DOM_LAYOUT_PRINT,
      Constants.DOM_LAYOUT_AUTO_HEIGHT,
      Constants.DOM_LAYOUT_NORMAL
    ];
    if (validLayouts.indexOf(domLayout) === -1) {
      doOnce(function() {
        return console.warn("AG Grid: " + domLayout + " is not valid for DOM Layout, valid values are " + Constants.DOM_LAYOUT_NORMAL + ", " + Constants.DOM_LAYOUT_AUTO_HEIGHT + " and " + Constants.DOM_LAYOUT_PRINT);
      }, "warn about dom layout values");
      return Constants.DOM_LAYOUT_NORMAL;
    }
    return domLayout;
  };
  GridOptionsWrapper2.prototype.isSuppressHorizontalScroll = function() {
    return isTrue(this.gridOptions.suppressHorizontalScroll);
  };
  GridOptionsWrapper2.prototype.isSuppressMaxRenderedRowRestriction = function() {
    return isTrue(this.gridOptions.suppressMaxRenderedRowRestriction);
  };
  GridOptionsWrapper2.prototype.isExcludeChildrenWhenTreeDataFiltering = function() {
    return isTrue(this.gridOptions.excludeChildrenWhenTreeDataFiltering);
  };
  GridOptionsWrapper2.prototype.isAlwaysShowHorizontalScroll = function() {
    return isTrue(this.gridOptions.alwaysShowHorizontalScroll);
  };
  GridOptionsWrapper2.prototype.isAlwaysShowVerticalScroll = function() {
    return isTrue(this.gridOptions.alwaysShowVerticalScroll);
  };
  GridOptionsWrapper2.prototype.isDebounceVerticalScrollbar = function() {
    return isTrue(this.gridOptions.debounceVerticalScrollbar);
  };
  GridOptionsWrapper2.prototype.isSuppressLoadingOverlay = function() {
    return isTrue(this.gridOptions.suppressLoadingOverlay);
  };
  GridOptionsWrapper2.prototype.isSuppressNoRowsOverlay = function() {
    return isTrue(this.gridOptions.suppressNoRowsOverlay);
  };
  GridOptionsWrapper2.prototype.isSuppressFieldDotNotation = function() {
    return isTrue(this.gridOptions.suppressFieldDotNotation);
  };
  GridOptionsWrapper2.prototype.getPinnedTopRowData = function() {
    return this.gridOptions.pinnedTopRowData;
  };
  GridOptionsWrapper2.prototype.getPinnedBottomRowData = function() {
    return this.gridOptions.pinnedBottomRowData;
  };
  GridOptionsWrapper2.prototype.isFunctionsPassive = function() {
    return isTrue(this.gridOptions.functionsPassive);
  };
  GridOptionsWrapper2.prototype.isSuppressChangeDetection = function() {
    return isTrue(this.gridOptions.suppressChangeDetection);
  };
  GridOptionsWrapper2.prototype.isSuppressAnimationFrame = function() {
    return isTrue(this.gridOptions.suppressAnimationFrame);
  };
  GridOptionsWrapper2.prototype.getQuickFilterText = function() {
    return this.gridOptions.quickFilterText;
  };
  GridOptionsWrapper2.prototype.isCacheQuickFilter = function() {
    return isTrue(this.gridOptions.cacheQuickFilter);
  };
  GridOptionsWrapper2.prototype.isUnSortIcon = function() {
    return isTrue(this.gridOptions.unSortIcon);
  };
  GridOptionsWrapper2.prototype.isSuppressMenuHide = function() {
    return isTrue(this.gridOptions.suppressMenuHide);
  };
  GridOptionsWrapper2.prototype.isEnterMovesDownAfterEdit = function() {
    return isTrue(this.gridOptions.enterMovesDownAfterEdit);
  };
  GridOptionsWrapper2.prototype.isEnterMovesDown = function() {
    return isTrue(this.gridOptions.enterMovesDown);
  };
  GridOptionsWrapper2.prototype.isUndoRedoCellEditing = function() {
    return isTrue(this.gridOptions.undoRedoCellEditing);
  };
  GridOptionsWrapper2.prototype.getUndoRedoCellEditingLimit = function() {
    return toNumber(this.gridOptions.undoRedoCellEditingLimit);
  };
  GridOptionsWrapper2.prototype.getRowStyle = function() {
    return this.gridOptions.rowStyle;
  };
  GridOptionsWrapper2.prototype.getRowClass = function() {
    return this.gridOptions.rowClass;
  };
  GridOptionsWrapper2.prototype.getRowStyleFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getRowStyle);
  };
  GridOptionsWrapper2.prototype.getRowClassFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getRowClass);
  };
  GridOptionsWrapper2.prototype.rowClassRules = function() {
    return this.gridOptions.rowClassRules;
  };
  GridOptionsWrapper2.prototype.isServerSideInfiniteScroll = function() {
    return isTrue(this.gridOptions.serverSideInfiniteScroll);
  };
  GridOptionsWrapper2.prototype.getServerSideGroupLevelParamsFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getServerSideGroupLevelParams);
  };
  GridOptionsWrapper2.prototype.getCreateChartContainerFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.createChartContainer);
  };
  GridOptionsWrapper2.prototype.getPopupParent = function() {
    return this.gridOptions.popupParent;
  };
  GridOptionsWrapper2.prototype.getBlockLoadDebounceMillis = function() {
    return this.gridOptions.blockLoadDebounceMillis;
  };
  GridOptionsWrapper2.prototype.getPostProcessPopupFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.postProcessPopup);
  };
  GridOptionsWrapper2.prototype.getPaginationNumberFormatterFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.paginationNumberFormatter);
  };
  GridOptionsWrapper2.prototype.getChildCountFunc = function() {
    return this.gridOptions.getChildCount;
  };
  GridOptionsWrapper2.prototype.getIsApplyServerSideTransactionFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.isApplyServerSideTransaction);
  };
  GridOptionsWrapper2.prototype.getInitialGroupOrderComparator = function() {
    var _a2 = this.gridOptions, initialGroupOrderComparator = _a2.initialGroupOrderComparator, defaultGroupOrderComparator = _a2.defaultGroupOrderComparator;
    if (initialGroupOrderComparator) {
      return this.mergeGridCommonParams(initialGroupOrderComparator);
    }
    if (defaultGroupOrderComparator) {
      return function(params) {
        return defaultGroupOrderComparator(params.nodeA, params.nodeB);
      };
    }
  };
  GridOptionsWrapper2.prototype.getIsFullWidthCellFunc = function() {
    var _a2 = this.gridOptions, isFullWidthRow = _a2.isFullWidthRow, isFullWidthCell = _a2.isFullWidthCell;
    if (isFullWidthRow) {
      return this.mergeGridCommonParams(isFullWidthRow);
    }
    if (isFullWidthCell) {
      return function(params) {
        return isFullWidthCell(params.rowNode);
      };
    }
  };
  GridOptionsWrapper2.prototype.getFullWidthCellRendererParams = function() {
    return this.gridOptions.fullWidthCellRendererParams;
  };
  GridOptionsWrapper2.prototype.isEmbedFullWidthRows = function() {
    return isTrue(this.gridOptions.embedFullWidthRows) || isTrue(this.gridOptions.deprecatedEmbedFullWidthRows);
  };
  GridOptionsWrapper2.prototype.isDetailRowAutoHeight = function() {
    return isTrue(this.gridOptions.detailRowAutoHeight);
  };
  GridOptionsWrapper2.prototype.getSuppressKeyboardEventFunc = function() {
    return this.gridOptions.suppressKeyboardEvent;
  };
  GridOptionsWrapper2.prototype.getBusinessKeyForNodeFunc = function() {
    return this.gridOptions.getBusinessKeyForNode;
  };
  GridOptionsWrapper2.prototype.getApi = function() {
    return this.gridOptions.api;
  };
  GridOptionsWrapper2.prototype.getColumnApi = function() {
    return this.gridOptions.columnApi;
  };
  GridOptionsWrapper2.prototype.isReadOnlyEdit = function() {
    return isTrue(this.gridOptions.readOnlyEdit);
  };
  GridOptionsWrapper2.prototype.isImmutableData = function() {
    var getRowIdProvided = this.gridOptions.getRowId != null;
    var immutableData = isTrue(this.gridOptions.immutableData);
    var resetRowDataOnUpdate = isTrue(this.gridOptions.resetRowDataOnUpdate);
    if (resetRowDataOnUpdate) {
      return false;
    }
    return getRowIdProvided || immutableData;
  };
  GridOptionsWrapper2.prototype.isEnsureDomOrder = function() {
    return isTrue(this.gridOptions.ensureDomOrder);
  };
  GridOptionsWrapper2.prototype.isEnableCharts = function() {
    if (isTrue(this.gridOptions.enableCharts)) {
      return ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "enableCharts");
    }
    return false;
  };
  GridOptionsWrapper2.prototype.getColResizeDefault = function() {
    return this.gridOptions.colResizeDefault;
  };
  GridOptionsWrapper2.prototype.isSingleClickEdit = function() {
    return isTrue(this.gridOptions.singleClickEdit);
  };
  GridOptionsWrapper2.prototype.isSuppressClickEdit = function() {
    return isTrue(this.gridOptions.suppressClickEdit);
  };
  GridOptionsWrapper2.prototype.isStopEditingWhenCellsLoseFocus = function() {
    return isTrue(this.gridOptions.stopEditingWhenCellsLoseFocus);
  };
  GridOptionsWrapper2.prototype.getGroupDefaultExpanded = function() {
    return this.gridOptions.groupDefaultExpanded;
  };
  GridOptionsWrapper2.prototype.getMaxConcurrentDatasourceRequests = function() {
    var res = toNumber(this.gridOptions.maxConcurrentDatasourceRequests);
    if (res == null) {
      return 2;
    }
    if (res <= 0) {
      return;
    }
    return res;
  };
  GridOptionsWrapper2.prototype.getMaxBlocksInCache = function() {
    return this.gridOptions.maxBlocksInCache;
  };
  GridOptionsWrapper2.prototype.getCacheOverflowSize = function() {
    return this.gridOptions.cacheOverflowSize;
  };
  GridOptionsWrapper2.prototype.getPaginationPageSize = function() {
    return toNumber(this.gridOptions.paginationPageSize);
  };
  GridOptionsWrapper2.prototype.isPaginateChildRows = function() {
    var shouldPaginate = this.isGroupRemoveSingleChildren() || this.isGroupRemoveLowestSingleChildren();
    if (shouldPaginate) {
      return true;
    }
    return isTrue(this.gridOptions.paginateChildRows);
  };
  GridOptionsWrapper2.prototype.getCacheBlockSize = function() {
    return oneOrGreater(this.gridOptions.cacheBlockSize);
  };
  GridOptionsWrapper2.prototype.getInfiniteInitialRowCount = function() {
    return this.gridOptions.infiniteInitialRowCount;
  };
  GridOptionsWrapper2.prototype.getServerSideInitialRowCount = function() {
    var rowCount = this.gridOptions.serverSideInitialRowCount;
    if (typeof rowCount === "number" && rowCount > 0) {
      return rowCount;
    }
    return 1;
  };
  GridOptionsWrapper2.prototype.isPurgeClosedRowNodes = function() {
    return isTrue(this.gridOptions.purgeClosedRowNodes);
  };
  GridOptionsWrapper2.prototype.isSuppressPaginationPanel = function() {
    return isTrue(this.gridOptions.suppressPaginationPanel);
  };
  GridOptionsWrapper2.prototype.getRowData = function() {
    return this.gridOptions.rowData;
  };
  GridOptionsWrapper2.prototype.isEnableRtl = function() {
    return isTrue(this.gridOptions.enableRtl);
  };
  GridOptionsWrapper2.prototype.getRowGroupPanelShow = function() {
    return this.gridOptions.rowGroupPanelShow;
  };
  GridOptionsWrapper2.prototype.getPivotPanelShow = function() {
    return this.gridOptions.pivotPanelShow;
  };
  GridOptionsWrapper2.prototype.isAngularCompileRows = function() {
    return isTrue(this.gridOptions.angularCompileRows);
  };
  GridOptionsWrapper2.prototype.isAngularCompileFilters = function() {
    return isTrue(this.gridOptions.angularCompileFilters);
  };
  GridOptionsWrapper2.prototype.isDebug = function() {
    return isTrue(this.gridOptions.debug);
  };
  GridOptionsWrapper2.prototype.getColumnDefs = function() {
    return this.gridOptions.columnDefs;
  };
  GridOptionsWrapper2.prototype.getColumnTypes = function() {
    return this.gridOptions.columnTypes;
  };
  GridOptionsWrapper2.prototype.getDatasource = function() {
    return this.gridOptions.datasource;
  };
  GridOptionsWrapper2.prototype.getViewportDatasource = function() {
    return this.gridOptions.viewportDatasource;
  };
  GridOptionsWrapper2.prototype.getServerSideDatasource = function() {
    return this.gridOptions.serverSideDatasource;
  };
  GridOptionsWrapper2.prototype.isAccentedSort = function() {
    return isTrue(this.gridOptions.accentedSort);
  };
  GridOptionsWrapper2.prototype.isEnableBrowserTooltips = function() {
    return isTrue(this.gridOptions.enableBrowserTooltips);
  };
  GridOptionsWrapper2.prototype.isEnableCellExpressions = function() {
    return isTrue(this.gridOptions.enableCellExpressions);
  };
  GridOptionsWrapper2.prototype.isEnableGroupEdit = function() {
    return isTrue(this.gridOptions.enableGroupEdit);
  };
  GridOptionsWrapper2.prototype.isSuppressMiddleClickScrolls = function() {
    return isTrue(this.gridOptions.suppressMiddleClickScrolls);
  };
  GridOptionsWrapper2.prototype.isPreventDefaultOnContextMenu = function() {
    return isTrue(this.gridOptions.preventDefaultOnContextMenu);
  };
  GridOptionsWrapper2.prototype.isSuppressPreventDefaultOnMouseWheel = function() {
    return isTrue(this.gridOptions.suppressPreventDefaultOnMouseWheel);
  };
  GridOptionsWrapper2.prototype.isSuppressColumnVirtualisation = function() {
    return isTrue(this.gridOptions.suppressColumnVirtualisation);
  };
  GridOptionsWrapper2.prototype.isSuppressRowVirtualisation = function() {
    return isTrue(this.gridOptions.suppressRowVirtualisation);
  };
  GridOptionsWrapper2.prototype.isSuppressContextMenu = function() {
    return isTrue(this.gridOptions.suppressContextMenu);
  };
  GridOptionsWrapper2.prototype.isAllowContextMenuWithControlKey = function() {
    return isTrue(this.gridOptions.allowContextMenuWithControlKey);
  };
  GridOptionsWrapper2.prototype.isSuppressCopyRowsToClipboard = function() {
    return isTrue(this.gridOptions.suppressCopyRowsToClipboard);
  };
  GridOptionsWrapper2.prototype.isSuppressCopySingleCellRanges = function() {
    return isTrue(this.gridOptions.suppressCopySingleCellRanges);
  };
  GridOptionsWrapper2.prototype.isCopyHeadersToClipboard = function() {
    return isTrue(this.gridOptions.copyHeadersToClipboard);
  };
  GridOptionsWrapper2.prototype.isCopyGroupHeadersToClipboard = function() {
    return isTrue(this.gridOptions.copyGroupHeadersToClipboard);
  };
  GridOptionsWrapper2.prototype.isSuppressClipboardPaste = function() {
    return isTrue(this.gridOptions.suppressClipboardPaste);
  };
  GridOptionsWrapper2.prototype.isSuppressLastEmptyLineOnPaste = function() {
    return isTrue(this.gridOptions.suppressLastEmptyLineOnPaste);
  };
  GridOptionsWrapper2.prototype.isPagination = function() {
    return isTrue(this.gridOptions.pagination);
  };
  GridOptionsWrapper2.prototype.isSuppressEnterpriseResetOnNewColumns = function() {
    return isTrue(this.gridOptions.suppressEnterpriseResetOnNewColumns);
  };
  GridOptionsWrapper2.prototype.getProcessDataFromClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processDataFromClipboard);
  };
  GridOptionsWrapper2.prototype.getAsyncTransactionWaitMillis = function() {
    return exists(this.gridOptions.asyncTransactionWaitMillis) ? this.gridOptions.asyncTransactionWaitMillis : Constants.BATCH_WAIT_MILLIS;
  };
  GridOptionsWrapper2.prototype.isSuppressMovableColumns = function() {
    return isTrue(this.gridOptions.suppressMovableColumns);
  };
  GridOptionsWrapper2.prototype.isAnimateRows = function() {
    if (this.isEnsureDomOrder()) {
      return false;
    }
    return isTrue(this.gridOptions.animateRows);
  };
  GridOptionsWrapper2.prototype.isSuppressColumnMoveAnimation = function() {
    return isTrue(this.gridOptions.suppressColumnMoveAnimation);
  };
  GridOptionsWrapper2.prototype.isSuppressAggFuncInHeader = function() {
    return isTrue(this.gridOptions.suppressAggFuncInHeader);
  };
  GridOptionsWrapper2.prototype.isSuppressAggAtRootLevel = function() {
    return isTrue(this.gridOptions.suppressAggAtRootLevel);
  };
  GridOptionsWrapper2.prototype.isSuppressAggFilteredOnly = function() {
    var isGroupAggFiltering = this.getGroupAggFiltering() !== void 0;
    return isGroupAggFiltering || isTrue(this.gridOptions.suppressAggFilteredOnly);
  };
  GridOptionsWrapper2.prototype.isRemovePivotHeaderRowWhenSingleValueColumn = function() {
    return isTrue(this.gridOptions.removePivotHeaderRowWhenSingleValueColumn);
  };
  GridOptionsWrapper2.prototype.isShowOpenedGroup = function() {
    return isTrue(this.gridOptions.showOpenedGroup);
  };
  GridOptionsWrapper2.prototype.isReactUi = function() {
    return isTrue(this.gridOptions.reactUi);
  };
  GridOptionsWrapper2.prototype.isSuppressReactUi = function() {
    return isTrue(this.gridOptions.suppressReactUi);
  };
  GridOptionsWrapper2.prototype.isEnableRangeSelection = function() {
    return ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule) && isTrue(this.gridOptions.enableRangeSelection);
  };
  GridOptionsWrapper2.prototype.isEnableRangeHandle = function() {
    return isTrue(this.gridOptions.enableRangeHandle);
  };
  GridOptionsWrapper2.prototype.isEnableFillHandle = function() {
    return isTrue(this.gridOptions.enableFillHandle);
  };
  GridOptionsWrapper2.prototype.getFillHandleDirection = function() {
    var direction = this.gridOptions.fillHandleDirection;
    if (!direction) {
      return "xy";
    }
    if (direction !== "x" && direction !== "y" && direction !== "xy") {
      doOnce(function() {
        return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.");
      }, "warn invalid fill direction");
      return "xy";
    }
    return direction;
  };
  GridOptionsWrapper2.prototype.getFillOperation = function() {
    return this.mergeGridCommonParams(this.gridOptions.fillOperation);
  };
  GridOptionsWrapper2.prototype.isSuppressMultiRangeSelection = function() {
    return isTrue(this.gridOptions.suppressMultiRangeSelection);
  };
  GridOptionsWrapper2.prototype.isPaginationAutoPageSize = function() {
    return isTrue(this.gridOptions.paginationAutoPageSize);
  };
  GridOptionsWrapper2.prototype.isRememberGroupStateWhenNewData = function() {
    return isTrue(this.gridOptions.rememberGroupStateWhenNewData);
  };
  GridOptionsWrapper2.prototype.getIcons = function() {
    return this.gridOptions.icons;
  };
  GridOptionsWrapper2.prototype.getGroupAggFiltering = function() {
    var userValue = this.gridOptions.groupAggFiltering;
    if (typeof userValue === "function") {
      return this.mergeGridCommonParams(userValue);
    }
    if (isTrue(userValue)) {
      return function() {
        return true;
      };
    }
    return void 0;
  };
  GridOptionsWrapper2.prototype.getAggFuncs = function() {
    return this.gridOptions.aggFuncs;
  };
  GridOptionsWrapper2.prototype.getSortingOrder = function() {
    return this.gridOptions.sortingOrder;
  };
  GridOptionsWrapper2.prototype.getAlignedGrids = function() {
    return this.gridOptions.alignedGrids;
  };
  GridOptionsWrapper2.prototype.isMasterDetail = function() {
    var masterDetail = isTrue(this.gridOptions.masterDetail);
    if (masterDetail) {
      return ModuleRegistry.assertRegistered(ModuleNames.MasterDetailModule, "masterDetail");
    } else {
      return false;
    }
  };
  GridOptionsWrapper2.prototype.isKeepDetailRows = function() {
    return isTrue(this.gridOptions.keepDetailRows);
  };
  GridOptionsWrapper2.prototype.getKeepDetailRowsCount = function() {
    var keepDetailRowsCount = this.gridOptions.keepDetailRowsCount;
    if (exists(keepDetailRowsCount) && keepDetailRowsCount > 0) {
      return this.gridOptions.keepDetailRowsCount;
    }
    return DEFAULT_KEEP_DETAIL_ROW_COUNT;
  };
  GridOptionsWrapper2.prototype.getIsRowMasterFunc = function() {
    return this.gridOptions.isRowMaster;
  };
  GridOptionsWrapper2.prototype.getIsRowSelectableFunc = function() {
    return this.gridOptions.isRowSelectable;
  };
  GridOptionsWrapper2.prototype.getGroupRowRendererParams = function() {
    return this.gridOptions.groupRowRendererParams;
  };
  GridOptionsWrapper2.prototype.getOverlayLoadingTemplate = function() {
    return this.gridOptions.overlayLoadingTemplate;
  };
  GridOptionsWrapper2.prototype.getOverlayNoRowsTemplate = function() {
    return this.gridOptions.overlayNoRowsTemplate;
  };
  GridOptionsWrapper2.prototype.isSuppressAutoSize = function() {
    return isTrue(this.gridOptions.suppressAutoSize);
  };
  GridOptionsWrapper2.prototype.isEnableCellTextSelection = function() {
    return isTrue(this.gridOptions.enableCellTextSelection);
  };
  GridOptionsWrapper2.prototype.isSuppressParentsInRowNodes = function() {
    return isTrue(this.gridOptions.suppressParentsInRowNodes);
  };
  GridOptionsWrapper2.prototype.isSuppressClipboardApi = function() {
    return isTrue(this.gridOptions.suppressClipboardApi);
  };
  GridOptionsWrapper2.prototype.isFunctionsReadOnly = function() {
    return isTrue(this.gridOptions.functionsReadOnly);
  };
  GridOptionsWrapper2.prototype.isEnableCellTextSelect = function() {
    return isTrue(this.gridOptions.enableCellTextSelection);
  };
  GridOptionsWrapper2.prototype.getDefaultColDef = function() {
    return this.gridOptions.defaultColDef;
  };
  GridOptionsWrapper2.prototype.getDefaultColGroupDef = function() {
    return this.gridOptions.defaultColGroupDef;
  };
  GridOptionsWrapper2.prototype.getDefaultExportParams = function(type) {
    if (this.gridOptions.defaultExportParams) {
      console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default" + capitalise(type) + "ExportParams`'");
      if (type === "csv") {
        return this.gridOptions.defaultExportParams;
      }
      return this.gridOptions.defaultExportParams;
    }
    if (type === "csv" && this.gridOptions.defaultCsvExportParams) {
      return this.gridOptions.defaultCsvExportParams;
    }
    if (type === "excel" && this.gridOptions.defaultExcelExportParams) {
      return this.gridOptions.defaultExcelExportParams;
    }
  };
  GridOptionsWrapper2.prototype.isSuppressCsvExport = function() {
    return isTrue(this.gridOptions.suppressCsvExport);
  };
  GridOptionsWrapper2.prototype.isAllowShowChangeAfterFilter = function() {
    return isTrue(this.gridOptions.allowShowChangeAfterFilter);
  };
  GridOptionsWrapper2.prototype.isSuppressExcelExport = function() {
    return isTrue(this.gridOptions.suppressExcelExport);
  };
  GridOptionsWrapper2.prototype.isSuppressMakeColumnVisibleAfterUnGroup = function() {
    return isTrue(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup);
  };
  GridOptionsWrapper2.prototype.getDataPathFunc = function() {
    return this.gridOptions.getDataPath;
  };
  GridOptionsWrapper2.prototype.getIsServerSideGroupFunc = function() {
    return this.gridOptions.isServerSideGroup;
  };
  GridOptionsWrapper2.prototype.getIsServerSideGroupOpenByDefaultFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.isServerSideGroupOpenByDefault);
  };
  GridOptionsWrapper2.prototype.getIsGroupOpenByDefaultFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.isGroupOpenByDefault);
  };
  GridOptionsWrapper2.prototype.getServerSideGroupKeyFunc = function() {
    return this.gridOptions.getServerSideGroupKey;
  };
  GridOptionsWrapper2.prototype.getGroupRowAggFunc = function() {
    var _a2 = this.gridOptions, getGroupRowAgg = _a2.getGroupRowAgg, groupRowAggNodes = _a2.groupRowAggNodes;
    if (getGroupRowAgg) {
      return this.mergeGridCommonParams(getGroupRowAgg);
    }
    if (groupRowAggNodes) {
      return function(params) {
        return groupRowAggNodes(params.nodes);
      };
    }
  };
  GridOptionsWrapper2.prototype.getContextMenuItemsFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getContextMenuItems);
  };
  GridOptionsWrapper2.prototype.getMainMenuItemsFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getMainMenuItems);
  };
  GridOptionsWrapper2.prototype.getRowIdFunc = function() {
    var _a2 = this.gridOptions, getRowId = _a2.getRowId, getRowNodeId = _a2.getRowNodeId;
    if (getRowId) {
      return this.mergeGridCommonParams(getRowId);
    }
    if (getRowNodeId) {
      return function(params) {
        return getRowNodeId(params.data);
      };
    }
  };
  GridOptionsWrapper2.prototype.getNavigateToNextHeaderFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.navigateToNextHeader);
  };
  GridOptionsWrapper2.prototype.getTabToNextHeaderFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.tabToNextHeader);
  };
  GridOptionsWrapper2.prototype.getNavigateToNextCellFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.navigateToNextCell);
  };
  GridOptionsWrapper2.prototype.getTabToNextCellFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.tabToNextCell);
  };
  GridOptionsWrapper2.prototype.getGridTabIndex = function() {
    return (this.gridOptions.tabIndex || 0).toString();
  };
  GridOptionsWrapper2.prototype.isTreeData = function() {
    var usingTreeData = isTrue(this.gridOptions.treeData);
    if (usingTreeData) {
      return ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule, "Tree Data");
    }
    return false;
  };
  GridOptionsWrapper2.prototype.isValueCache = function() {
    return isTrue(this.gridOptions.valueCache);
  };
  GridOptionsWrapper2.prototype.isValueCacheNeverExpires = function() {
    return isTrue(this.gridOptions.valueCacheNeverExpires);
  };
  GridOptionsWrapper2.prototype.isDeltaSort = function() {
    return isTrue(this.gridOptions.deltaSort);
  };
  GridOptionsWrapper2.prototype.isAggregateOnlyChangedColumns = function() {
    return isTrue(this.gridOptions.aggregateOnlyChangedColumns);
  };
  GridOptionsWrapper2.prototype.getProcessPivotResultColDefFunc = function() {
    return this.gridOptions.processPivotResultColDef || this.gridOptions.processSecondaryColDef;
  };
  GridOptionsWrapper2.prototype.getProcessPivotResultColGroupDefFunc = function() {
    return this.gridOptions.processPivotResultColGroupDef || this.gridOptions.processSecondaryColGroupDef;
  };
  GridOptionsWrapper2.prototype.getSendToClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.sendToClipboard);
  };
  GridOptionsWrapper2.prototype.getProcessRowPostCreateFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processRowPostCreate);
  };
  GridOptionsWrapper2.prototype.getProcessCellForClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processCellForClipboard);
  };
  GridOptionsWrapper2.prototype.getProcessHeaderForClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processHeaderForClipboard);
  };
  GridOptionsWrapper2.prototype.getProcessGroupHeaderForClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processGroupHeaderForClipboard);
  };
  GridOptionsWrapper2.prototype.getProcessCellFromClipboardFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.processCellFromClipboard);
  };
  GridOptionsWrapper2.prototype.getViewportRowModelPageSize = function() {
    return oneOrGreater(this.gridOptions.viewportRowModelPageSize, DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE);
  };
  GridOptionsWrapper2.prototype.getViewportRowModelBufferSize = function() {
    return zeroOrGreater(this.gridOptions.viewportRowModelBufferSize, DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE);
  };
  GridOptionsWrapper2.prototype.isServerSideSortAllLevels = function() {
    var isEnabled = isTrue(this.gridOptions.serverSideSortAllLevels);
    if (!this.isRowModelServerSide() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideSortAllLevels` property can only be used with the server side row model.");
      }, "serverSideSortAllLevels");
      return false;
    }
    return isEnabled;
  };
  GridOptionsWrapper2.prototype.isServerSideFilterAllLevels = function() {
    var isEnabled = isTrue(this.gridOptions.serverSideFilterAllLevels);
    if (!this.isRowModelServerSide() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideFilterAllLevels` property can only be used with the server side row model.");
      }, "serverSideFilterAllLevels");
      return false;
    }
    return isEnabled;
  };
  GridOptionsWrapper2.prototype.isServerSideSortOnServer = function() {
    var isEnabled = isTrue(this.gridOptions.serverSideSortOnServer);
    if (!this.isRowModelServerSide() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideSortOnServer` property can only be used with the server side row model.");
      }, "serverSideSortOnServerRowModel");
      return false;
    }
    if (this.isTreeData() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideSortOnServer` property cannot be used while using tree data.");
      }, "serverSideSortOnServerTreeData");
      return false;
    }
    return isEnabled;
  };
  GridOptionsWrapper2.prototype.isServerSideFilterOnServer = function() {
    var isEnabled = isTrue(this.gridOptions.serverSideFilterOnServer);
    if (!this.isRowModelServerSide() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideFilterOnServer` property can only be used with the server side row model.");
      }, "serverSideFilterOnServerRowModel");
      return false;
    }
    if (this.isTreeData() && isEnabled) {
      doOnce(function() {
        return console.warn("AG Grid: The `serverSideFilterOnServer` property cannot be used while using tree data.");
      }, "serverSideFilterOnServerTreeData");
      return false;
    }
    return isEnabled;
  };
  GridOptionsWrapper2.prototype.getPostSortFunc = function() {
    var _a2 = this.gridOptions, postSortRows = _a2.postSortRows, postSort = _a2.postSort;
    if (postSortRows) {
      return this.mergeGridCommonParams(postSortRows);
    }
    if (postSort) {
      return function(params) {
        return postSort(params.nodes);
      };
    }
  };
  GridOptionsWrapper2.prototype.getChartToolbarItemsFunc = function() {
    return this.mergeGridCommonParams(this.gridOptions.getChartToolbarItems);
  };
  GridOptionsWrapper2.prototype.getChartThemeOverrides = function() {
    return this.gridOptions.chartThemeOverrides;
  };
  GridOptionsWrapper2.prototype.getCustomChartThemes = function() {
    return this.gridOptions.customChartThemes;
  };
  GridOptionsWrapper2.prototype.getChartThemes = function() {
    return this.gridOptions.chartThemes || ["ag-default", "ag-material", "ag-pastel", "ag-vivid", "ag-solar"];
  };
  GridOptionsWrapper2.prototype.getClipboardDelimiter = function() {
    return exists(this.gridOptions.clipboardDelimiter) ? this.gridOptions.clipboardDelimiter : "	";
  };
  GridOptionsWrapper2.prototype.setProperty = function(key, value, force) {
    if (force === void 0) {
      force = false;
    }
    var previousValue = this.gridOptions[key];
    if (force || previousValue !== value) {
      this.gridOptions[key] = value;
      var event_1 = {
        type: key,
        currentValue: value,
        previousValue
      };
      this.propertyEventService.dispatchEvent(event_1);
    }
  };
  GridOptionsWrapper2.prototype.addEventListener = function(key, listener) {
    this.propertyEventService.addEventListener(key, listener);
  };
  GridOptionsWrapper2.prototype.removeEventListener = function(key, listener) {
    this.propertyEventService.removeEventListener(key, listener);
  };
  GridOptionsWrapper2.prototype.isSkipHeaderOnAutoSize = function() {
    return !!this.gridOptions.skipHeaderOnAutoSize;
  };
  GridOptionsWrapper2.prototype.getAutoSizePadding = function() {
    var value = this.gridOptions.autoSizePadding;
    return value != null && value >= 0 ? value : 20;
  };
  GridOptionsWrapper2.prototype.getHeaderHeight = function() {
    if (typeof this.gridOptions.headerHeight === "number") {
      return this.gridOptions.headerHeight;
    }
    return this.getFromTheme(25, "headerHeight");
  };
  GridOptionsWrapper2.prototype.getFloatingFiltersHeight = function() {
    if (typeof this.gridOptions.floatingFiltersHeight === "number") {
      return this.gridOptions.floatingFiltersHeight;
    }
    return this.getFromTheme(25, "headerHeight");
  };
  GridOptionsWrapper2.prototype.getGroupHeaderHeight = function() {
    if (typeof this.gridOptions.groupHeaderHeight === "number") {
      return this.gridOptions.groupHeaderHeight;
    }
    return this.getHeaderHeight();
  };
  GridOptionsWrapper2.prototype.getPivotHeaderHeight = function() {
    if (typeof this.gridOptions.pivotHeaderHeight === "number") {
      return this.gridOptions.pivotHeaderHeight;
    }
    return this.getHeaderHeight();
  };
  GridOptionsWrapper2.prototype.getPivotGroupHeaderHeight = function() {
    if (typeof this.gridOptions.pivotGroupHeaderHeight === "number") {
      return this.gridOptions.pivotGroupHeaderHeight;
    }
    return this.getGroupHeaderHeight();
  };
  GridOptionsWrapper2.prototype.isExternalFilterPresent = function() {
    if (typeof this.gridOptions.isExternalFilterPresent === "function") {
      return this.gridOptions.isExternalFilterPresent({ api: this.getApi(), columnApi: this.getColumnApi(), context: this.getContext() });
    }
    return false;
  };
  GridOptionsWrapper2.prototype.doesExternalFilterPass = function(node) {
    if (typeof this.gridOptions.doesExternalFilterPass === "function") {
      return this.gridOptions.doesExternalFilterPass(node);
    }
    return false;
  };
  GridOptionsWrapper2.prototype.getTooltipDelay = function(type) {
    var _a2 = this.gridOptions, tooltipShowDelay = _a2.tooltipShowDelay, tooltipHideDelay = _a2.tooltipHideDelay;
    var delay = type === "show" ? tooltipShowDelay : tooltipHideDelay;
    var capitalisedType = capitalise(type);
    if (exists(delay)) {
      if (delay < 0) {
        doOnce(function() {
          return console.warn("ag-grid: tooltip" + capitalisedType + "Delay should not be lower than 0");
        }, "tooltip" + capitalisedType + "DelayWarn");
      }
      return Math.max(200, delay);
    }
    return null;
  };
  GridOptionsWrapper2.prototype.isTooltipMouseTrack = function() {
    return isTrue(this.gridOptions.tooltipMouseTrack);
  };
  GridOptionsWrapper2.prototype.isSuppressModelUpdateAfterUpdateTransaction = function() {
    return isTrue(this.gridOptions.suppressModelUpdateAfterUpdateTransaction);
  };
  GridOptionsWrapper2.prototype.getDocument = function() {
    var result = null;
    if (this.gridOptions.getDocument && exists(this.gridOptions.getDocument)) {
      result = this.gridOptions.getDocument();
    } else if (this.eGridDiv) {
      result = this.eGridDiv.ownerDocument;
    }
    if (result && exists(result)) {
      return result;
    }
    return document;
  };
  GridOptionsWrapper2.prototype.getMinColWidth = function() {
    var minColWidth = this.gridOptions.minColWidth;
    if (exists(minColWidth) && minColWidth > GridOptionsWrapper_1.MIN_COL_WIDTH) {
      return this.gridOptions.minColWidth;
    }
    var measuredMin = this.getFromTheme(null, "headerCellMinWidth");
    return exists(measuredMin) ? Math.max(measuredMin, GridOptionsWrapper_1.MIN_COL_WIDTH) : GridOptionsWrapper_1.MIN_COL_WIDTH;
  };
  GridOptionsWrapper2.prototype.getMaxColWidth = function() {
    if (this.gridOptions.maxColWidth && this.gridOptions.maxColWidth > GridOptionsWrapper_1.MIN_COL_WIDTH) {
      return this.gridOptions.maxColWidth;
    }
    return null;
  };
  GridOptionsWrapper2.prototype.getColWidth = function() {
    if (typeof this.gridOptions.colWidth !== "number" || this.gridOptions.colWidth < GridOptionsWrapper_1.MIN_COL_WIDTH) {
      return 200;
    }
    return this.gridOptions.colWidth;
  };
  GridOptionsWrapper2.prototype.getRowBuffer = function() {
    var rowBuffer = this.gridOptions.rowBuffer;
    if (typeof rowBuffer === "number") {
      if (rowBuffer < 0) {
        doOnce(function() {
          return console.warn("AG Grid: rowBuffer should not be negative");
        }, "warn rowBuffer negative");
        this.gridOptions.rowBuffer = rowBuffer = 0;
      }
    } else {
      rowBuffer = Constants.ROW_BUFFER_SIZE;
    }
    return rowBuffer;
  };
  GridOptionsWrapper2.prototype.getRowBufferInPixels = function() {
    var rowsToBuffer = this.getRowBuffer();
    var defaultRowHeight = this.getRowHeightAsNumber();
    return rowsToBuffer * defaultRowHeight;
  };
  GridOptionsWrapper2.prototype.getScrollbarWidth = function() {
    if (this.scrollbarWidth == null) {
      var useGridOptions = typeof this.gridOptions.scrollbarWidth === "number" && this.gridOptions.scrollbarWidth >= 0;
      var scrollbarWidth = useGridOptions ? this.gridOptions.scrollbarWidth : getScrollbarWidth();
      if (scrollbarWidth != null) {
        this.scrollbarWidth = scrollbarWidth;
        this.eventService.dispatchEvent({
          type: Events.EVENT_SCROLLBAR_WIDTH_CHANGED
        });
      }
    }
    return this.scrollbarWidth;
  };
  GridOptionsWrapper2.prototype.checkForDeprecated = function() {
    var options = this.gridOptions;
    if (options.deprecatedEmbedFullWidthRows) {
      console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows.");
    }
    if (options.rowDeselection) {
      console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected.");
    }
    if (options.enableMultiRowDragging) {
      options.rowDragMultiRow = true;
      delete options.enableMultiRowDragging;
      console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`.");
    }
    var checkRenamedProperty = function(oldProp, newProp, version) {
      if (options[oldProp] != null) {
        console.warn("AG Grid: since version " + version + ", '" + oldProp + "' is deprecated / renamed, please use the new property name '" + newProp + "' instead.");
        if (options[newProp] == null) {
          options[newProp] = options[oldProp];
        }
      }
    };
    checkRenamedProperty("batchUpdateWaitMillis", "asyncTransactionWaitMillis", "23.1.x");
    checkRenamedProperty("deltaRowDataMode", "immutableData", "23.1.x");
    checkRenamedProperty("serverSideFilteringAlwaysResets", "serverSideFilterAllLevels", "28.0.0");
    checkRenamedProperty("serverSideSortingAlwaysResets", "serverSideSortAllLevels", "28.0.0");
    if (options.immutableColumns || options.deltaColumnMode) {
      console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true");
    }
    checkRenamedProperty("suppressSetColumnStateEvents", "suppressColumnStateEvents", "24.0.x");
    if (options.groupRowInnerRenderer || options.groupRowInnerRendererParams || options.groupRowInnerRendererFramework) {
      console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used.");
      console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams.");
      console.warn("  For example instead of this:");
      console.warn('    groupRowInnerRenderer: "myRenderer"');
      console.warn("    groupRowInnerRendererParams: {x: a}");
      console.warn("  Replace with this:");
      console.warn("    groupRowRendererParams: {");
      console.warn('      innerRenderer: "myRenderer",');
      console.warn("      innerRendererParams: {x: a}");
      console.warn("    }");
      console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code.");
      if (!options.groupRowRendererParams) {
        options.groupRowRendererParams = {};
      }
      var params = options.groupRowRendererParams;
      if (options.groupRowInnerRenderer) {
        params.innerRenderer = options.groupRowInnerRenderer;
      }
      if (options.groupRowInnerRendererParams) {
        params.innerRendererParams = options.groupRowInnerRendererParams;
      }
      if (options.groupRowInnerRendererFramework) {
        params.innerRendererFramework = options.groupRowInnerRendererFramework;
      }
    }
    if (options.rememberGroupStateWhenNewData) {
      console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed.");
    }
    if (options.detailCellRendererParams && options.detailCellRendererParams.autoHeight) {
      console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer");
      options.detailRowAutoHeight = true;
    }
    if (options.suppressKeyboardEvent) {
      console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property.");
    }
    if (options.suppressEnterpriseResetOnNewColumns) {
      console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed.");
    }
    if (options.suppressColumnStateEvents) {
      console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API');
    }
    if (options.defaultExportParams) {
      console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`.");
    }
    if (options.stopEditingWhenGridLosesFocus) {
      console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`.");
      options.stopEditingWhenCellsLoseFocus = true;
    }
    if (options.applyColumnDefOrder) {
      console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true");
    }
    if (options.groupMultiAutoColumn) {
      console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`");
      options.groupDisplayType = "multipleColumns";
    }
    if (options.groupUseEntireRow) {
      console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`");
      options.groupDisplayType = "groupRows";
    }
    if (options.groupSuppressAutoColumn) {
      var propName = options.treeData ? "treeDataDisplayType" : "groupDisplayType";
      console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `" + propName + " = 'custom'`");
      options.groupDisplayType = "custom";
    }
    if (options.defaultGroupOrderComparator) {
      console.warn("AG Grid: since v27.2, the grid property `defaultGroupOrderComparator` is deprecated and has been replaced by `initialGroupOrderComparator` and now receives a single params object.");
    }
    if (options.defaultGroupSortComparator) {
      console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `initialGroupOrderComparator`");
      options.defaultGroupOrderComparator = options.defaultGroupSortComparator;
    }
    if (options.groupRowAggNodes) {
      console.warn("AG Grid: since v27.2, the grid property `groupRowAggNodes` is deprecated and has been replaced by `getGroupRowAgg` and now receives a single params object.");
    }
    if (options.postSort) {
      console.warn("AG Grid: since v27.2, the grid property `postSort` is deprecated and has been replaced by `postSortRows` and now receives a single params object.");
    }
    if (options.isFullWidthCell) {
      console.warn("AG Grid: since v27.2, the grid property `isFullWidthCell` is deprecated and has been replaced by `isFullWidthRow` and now receives a single params object.");
    }
    if (options.localeTextFunc) {
      console.warn("AG Grid: since v27.2, the grid property `localeTextFunc` is deprecated and has been replaced by `getLocaleText` and now receives a single params object.");
    }
    if (options.colWidth) {
      console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`.");
    }
    if (options.minColWidth) {
      console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`.");
    }
    if (options.maxColWidth) {
      console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`.");
    }
    if (options.reactUi) {
      console.warn("AG Grid: since v27.0, React UI is on by default, so no need for reactUi=true. To turn it off, set suppressReactUi=true.");
    }
    if (options.suppressReactUi) {
      console.warn("AG Grid: The legacy React rendering engine is deprecated and will be removed in the next major version of the grid.");
    }
    if (options.suppressCellSelection) {
      console.warn("AG Grid: since v27.0, `suppressCellSelection` has been replaced by `suppressCellFocus`.");
      options.suppressCellFocus = options.suppressCellSelection;
    }
    if (options.getRowNodeId) {
      console.warn("AG Grid: since v27.1, `getRowNodeId` is deprecated and has been replaced by `getRowId`. The difference: if getRowId() is implemented then immutable data is enabled by default.");
    }
    if (options.immutableData) {
      if (options.getRowId) {
        console.warn("AG Grid: since v27.1, `immutableData` is deprecated. With the `getRowId` callback implemented, immutable data is enabled by default so you can remove `immutableData=true`.");
      } else {
        console.warn("AG Grid: since v27.1, `immutableData` is deprecated. To enable immutable data you must implement the `getRowId()` callback.");
      }
    }
    if (options.clipboardDeliminator) {
      console.warn("AG Grid: since v27.1, `clipboardDeliminator` has been replaced by `clipboardDelimiter`.");
      options.clipboardDelimiter = options.clipboardDeliminator;
    }
    checkRenamedProperty("processSecondaryColDef", "processPivotResultColDef", "28.0.x");
    checkRenamedProperty("processSecondaryColGroupDef", "processPivotResultColGroupDef", "28.0.x");
    if (options.serverSideStoreType) {
      console.warn("AG Grid: since v28.0, `serverSideStoreType` has been replaced by `serverSideInfiniteScroll`. Set to true to use Partial Store, and false to use Full Store.");
      options.serverSideInfiniteScroll = options.serverSideStoreType === "partial";
    }
    checkRenamedProperty("getServerSideStoreParams", "getServerSideGroupLevelParams", "28.0.x");
  };
  GridOptionsWrapper2.prototype.checkForViolations = function() {
    if (this.isTreeData()) {
      this.treeDataViolations();
    }
  };
  GridOptionsWrapper2.prototype.treeDataViolations = function() {
    if (this.isRowModelDefault()) {
      if (missing(this.getDataPathFunc())) {
        console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.");
      }
    }
    if (this.isRowModelServerSide()) {
      if (missing(this.getIsServerSideGroupFunc())) {
        console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data.");
      }
      if (missing(this.getServerSideGroupKeyFunc())) {
        console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data.");
      }
    }
  };
  GridOptionsWrapper2.prototype.getLocaleTextFunc = function() {
    var _this = this;
    var _a2 = this.gridOptions, localeText = _a2.localeText, getLocaleText = _a2.getLocaleText, localeTextFunc = _a2.localeTextFunc;
    if (getLocaleText) {
      return function(key, defaultValue, variableValues) {
        var params = {
          key,
          defaultValue,
          variableValues,
          api: _this.getApi(),
          columnApi: _this.getColumnApi(),
          context: _this.getContext()
        };
        return getLocaleText(params);
      };
    }
    if (localeTextFunc) {
      return localeTextFunc;
    }
    return function(key, defaultValue, variableValues) {
      var localisedText = localeText && localeText[key];
      if (localisedText && variableValues && variableValues.length) {
        var found = 0;
        while (true) {
          if (found >= variableValues.length) {
            break;
          }
          var idx = localisedText.indexOf("${variable}");
          if (idx === -1) {
            break;
          }
          localisedText = localisedText.replace("${variable}", variableValues[found++]);
        }
      }
      return localisedText !== null && localisedText !== void 0 ? localisedText : defaultValue;
    };
  };
  GridOptionsWrapper2.prototype.globalEventHandler = function(eventName, event) {
    if (this.destroyed) {
      return;
    }
    var callbackMethodName = ComponentUtil.getCallbackForEvent(eventName);
    if (typeof this.gridOptions[callbackMethodName] === "function") {
      this.gridOptions[callbackMethodName](event);
    }
  };
  GridOptionsWrapper2.prototype.setRowHeightVariable = function(height) {
    var oldRowHeight = this.eGridDiv.style.getPropertyValue("--ag-line-height").trim();
    var newRowHeight = height + "px";
    if (oldRowHeight != newRowHeight) {
      this.eGridDiv.style.setProperty("--ag-line-height", newRowHeight);
    }
  };
  GridOptionsWrapper2.prototype.getRowHeightAsNumber = function() {
    if (!this.gridOptions.rowHeight || missing(this.gridOptions.rowHeight)) {
      return this.getDefaultRowHeight();
    }
    var rowHeight = this.gridOptions.rowHeight;
    if (rowHeight && this.isNumeric(rowHeight)) {
      this.setRowHeightVariable(rowHeight);
      return rowHeight;
    }
    console.warn("AG Grid row height must be a number if not using standard row model");
    return this.getDefaultRowHeight();
  };
  GridOptionsWrapper2.prototype.isGetRowHeightFunction = function() {
    return typeof this.gridOptions.getRowHeight === "function";
  };
  GridOptionsWrapper2.prototype.getRowHeightForNode = function(rowNode, allowEstimate, defaultRowHeight) {
    if (allowEstimate === void 0) {
      allowEstimate = false;
    }
    if (defaultRowHeight == null) {
      defaultRowHeight = this.getDefaultRowHeight();
    }
    if (this.isGetRowHeightFunction()) {
      if (allowEstimate) {
        return { height: defaultRowHeight, estimated: true };
      }
      var params = {
        node: rowNode,
        data: rowNode.data
      };
      var height = this.mergeGridCommonParams(this.gridOptions.getRowHeight)(params);
      if (this.isNumeric(height)) {
        if (height === 0) {
          doOnce(function() {
            return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.");
          }, "invalidRowHeight");
        }
        return { height: Math.max(1, height), estimated: false };
      }
    }
    if (rowNode.detail && this.isMasterDetail()) {
      if (this.isDetailRowAutoHeight()) {
        return { height: 1, estimated: false };
      }
      if (this.isNumeric(this.gridOptions.detailRowHeight)) {
        return { height: this.gridOptions.detailRowHeight, estimated: false };
      }
      return { height: DEFAULT_DETAIL_ROW_HEIGHT, estimated: false };
    }
    var rowHeight = this.gridOptions.rowHeight && this.isNumeric(this.gridOptions.rowHeight) ? this.gridOptions.rowHeight : defaultRowHeight;
    return { height: rowHeight, estimated: false };
  };
  GridOptionsWrapper2.prototype.isDynamicRowHeight = function() {
    return typeof this.gridOptions.getRowHeight === "function";
  };
  GridOptionsWrapper2.prototype.getListItemHeight = function() {
    return this.getFromTheme(20, "listItemHeight");
  };
  GridOptionsWrapper2.prototype.chartMenuPanelWidth = function() {
    return this.environment.chartMenuPanelWidth();
  };
  GridOptionsWrapper2.prototype.isNumeric = function(value) {
    return !isNaN(value) && typeof value === "number" && isFinite(value);
  };
  GridOptionsWrapper2.prototype.getFromTheme = function(defaultValue, sassVariableName) {
    var theme = this.environment.getTheme().theme;
    if (theme && theme.indexOf("ag-theme") === 0) {
      return this.environment.getSassVariable(theme, sassVariableName);
    }
    return defaultValue;
  };
  GridOptionsWrapper2.prototype.getDefaultRowHeight = function() {
    return this.getFromTheme(DEFAULT_ROW_HEIGHT, "rowHeight");
  };
  GridOptionsWrapper2.prototype.matchesGroupDisplayType = function(toMatch, supplied) {
    var groupDisplayTypeValues = ["groupRows", "multipleColumns", "custom", "singleColumn"];
    if (groupDisplayTypeValues.indexOf(supplied) < 0) {
      console.warn("AG Grid: '" + supplied + "' is not a valid groupDisplayType value - possible values are: '" + groupDisplayTypeValues.join("', '") + "'");
      return false;
    }
    return supplied === toMatch;
  };
  GridOptionsWrapper2.prototype.matchesTreeDataDisplayType = function(toMatch, supplied) {
    var treeDataDisplayTypeValues = ["auto", "custom"];
    if (treeDataDisplayTypeValues.indexOf(supplied) < 0) {
      console.warn("AG Grid: '" + supplied + "' is not a valid treeDataDisplayType value - possible values are: '" + treeDataDisplayTypeValues.join("', '") + "'");
      return false;
    }
    return supplied === toMatch;
  };
  var GridOptionsWrapper_1;
  GridOptionsWrapper2.MIN_COL_WIDTH = 10;
  GridOptionsWrapper2.PROP_HEADER_HEIGHT = "headerHeight";
  GridOptionsWrapper2.PROP_GROUP_REMOVE_SINGLE_CHILDREN = "groupRemoveSingleChildren";
  GridOptionsWrapper2.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN = "groupRemoveLowestSingleChildren";
  GridOptionsWrapper2.PROP_GROUP_DISPLAY_TYPE = "groupDisplayType";
  GridOptionsWrapper2.PROP_PIVOT_HEADER_HEIGHT = "pivotHeaderHeight";
  GridOptionsWrapper2.PROP_SUPPRESS_CLIPBOARD_PASTE = "suppressClipboardPaste";
  GridOptionsWrapper2.PROP_GROUP_HEADER_HEIGHT = "groupHeaderHeight";
  GridOptionsWrapper2.PROP_PIVOT_GROUP_HEADER_HEIGHT = "pivotGroupHeaderHeight";
  GridOptionsWrapper2.PROP_NAVIGATE_TO_NEXT_CELL = "navigateToNextCell";
  GridOptionsWrapper2.PROP_TAB_TO_NEXT_CELL = "tabToNextCell";
  GridOptionsWrapper2.PROP_NAVIGATE_TO_NEXT_HEADER = "navigateToNextHeader";
  GridOptionsWrapper2.PROP_TAB_TO_NEXT_HEADER = "tabToNextHeader";
  GridOptionsWrapper2.PROP_IS_EXTERNAL_FILTER_PRESENT = "isExternalFilterPresent";
  GridOptionsWrapper2.PROP_DOES_EXTERNAL_FILTER_PASS = "doesExternalFilterPass";
  GridOptionsWrapper2.PROP_FLOATING_FILTERS_HEIGHT = "floatingFiltersHeight";
  GridOptionsWrapper2.PROP_SUPPRESS_ROW_CLICK_SELECTION = "suppressRowClickSelection";
  GridOptionsWrapper2.PROP_SUPPRESS_ROW_DRAG = "suppressRowDrag";
  GridOptionsWrapper2.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG = "suppressMoveWhenRowDragging";
  GridOptionsWrapper2.PROP_GET_ROW_CLASS = "getRowClass";
  GridOptionsWrapper2.PROP_GET_ROW_STYLE = "getRowStyle";
  GridOptionsWrapper2.PROP_GET_ROW_HEIGHT = "getRowHeight";
  GridOptionsWrapper2.PROP_POPUP_PARENT = "popupParent";
  GridOptionsWrapper2.PROP_DOM_LAYOUT = "domLayout";
  GridOptionsWrapper2.PROP_ROW_CLASS = "rowClass";
  GridOptionsWrapper2.PROP_FILL_HANDLE_DIRECTION = "fillHandleDirection";
  GridOptionsWrapper2.PROP_GROUP_ROW_AGG_NODES = "groupRowAggNodes";
  GridOptionsWrapper2.PROP_GET_GROUP_ROW_AGG = "getGroupRowAgg";
  GridOptionsWrapper2.PROP_GET_BUSINESS_KEY_FOR_NODE = "getBusinessKeyForNode";
  GridOptionsWrapper2.PROP_GET_CHILD_COUNT = "getChildCount";
  GridOptionsWrapper2.PROP_PROCESS_ROW_POST_CREATE = "processRowPostCreate";
  GridOptionsWrapper2.PROP_GET_ROW_NODE_ID = "getRowNodeId";
  GridOptionsWrapper2.PROP_GET_ROW_ID = "getRowId";
  GridOptionsWrapper2.PROP_IS_FULL_WIDTH_CELL = "isFullWidthCell";
  GridOptionsWrapper2.PROP_IS_FULL_WIDTH_ROW = "isFullWidthRow";
  GridOptionsWrapper2.PROP_IS_ROW_SELECTABLE = "isRowSelectable";
  GridOptionsWrapper2.PROP_IS_ROW_MASTER = "isRowMaster";
  GridOptionsWrapper2.PROP_POST_SORT = "postSort";
  GridOptionsWrapper2.PROP_POST_SORT_ROWS = "postSortRows";
  GridOptionsWrapper2.PROP_GET_DOCUMENT = "getDocument";
  GridOptionsWrapper2.PROP_POST_PROCESS_POPUP = "postProcessPopup";
  GridOptionsWrapper2.PROP_DEFAULT_GROUP_ORDER_COMPARATOR = "defaultGroupOrderComparator";
  GridOptionsWrapper2.PROP_INITIAL_GROUP_ORDER_COMPARATOR = "initialGroupOrderComparator";
  GridOptionsWrapper2.PROP_PAGINATION_NUMBER_FORMATTER = "paginationNumberFormatter";
  GridOptionsWrapper2.PROP_GET_CONTEXT_MENU_ITEMS = "getContextMenuItems";
  GridOptionsWrapper2.PROP_GET_MAIN_MENU_ITEMS = "getMainMenuItems";
  GridOptionsWrapper2.PROP_PROCESS_CELL_FOR_CLIPBOARD = "processCellForClipboard";
  GridOptionsWrapper2.PROP_PROCESS_CELL_FROM_CLIPBOARD = "processCellFromClipboard";
  GridOptionsWrapper2.PROP_SEND_TO_CLIPBOARD = "sendToClipboard";
  GridOptionsWrapper2.PROP_PROCESS_PIVOT_RESULT_COL_DEF = "processPivotResultColDef";
  GridOptionsWrapper2.PROP_PROCESS_PIVOT_RESULT_COL_GROUP_DEF = "processPivotResultColGroupDef";
  GridOptionsWrapper2.PROP_GET_CHART_TOOLBAR_ITEMS = "getChartToolbarItems";
  GridOptionsWrapper2.PROP_GET_SERVER_SIDE_GROUP_PARAMS = "getServerSideGroupLevelParams";
  GridOptionsWrapper2.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT = "isServerSideGroupOpenByDefault";
  GridOptionsWrapper2.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION = "isApplyServerSideTransaction";
  GridOptionsWrapper2.PROP_IS_SERVER_SIDE_GROUP = "isServerSideGroup";
  GridOptionsWrapper2.PROP_GET_SERVER_SIDE_GROUP_KEY = "getServerSideGroupKey";
  GridOptionsWrapper2.PROP_AUTO_GROUP_COLUMN_DEF = "autoGroupColumnDef";
  GridOptionsWrapper2.PROP_DEFAULT_COL_DEF = "defaultColDef";
  __decorate$2v([
    Autowired("gridOptions")
  ], GridOptionsWrapper2.prototype, "gridOptions", void 0);
  __decorate$2v([
    Autowired("eventService")
  ], GridOptionsWrapper2.prototype, "eventService", void 0);
  __decorate$2v([
    Autowired("environment")
  ], GridOptionsWrapper2.prototype, "environment", void 0);
  __decorate$2v([
    Autowired("eGridDiv")
  ], GridOptionsWrapper2.prototype, "eGridDiv", void 0);
  __decorate$2v([
    __param$8(0, Qualifier("gridApi")),
    __param$8(1, Qualifier("columnApi"))
  ], GridOptionsWrapper2.prototype, "agWire", null);
  __decorate$2v([
    PreDestroy
  ], GridOptionsWrapper2.prototype, "destroy", null);
  __decorate$2v([
    PostConstruct
  ], GridOptionsWrapper2.prototype, "init", null);
  GridOptionsWrapper2 = GridOptionsWrapper_1 = __decorate$2v([
    Bean("gridOptionsWrapper")
  ], GridOptionsWrapper2);
  return GridOptionsWrapper2;
}();
var __extends$2T = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2u = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$7 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var __rest = function(s3, e2) {
  var t2 = {};
  for (var p in s3)
    if (Object.prototype.hasOwnProperty.call(s3, p) && e2.indexOf(p) < 0)
      t2[p] = s3[p];
  if (s3 != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i2 = 0, p = Object.getOwnPropertySymbols(s3); i2 < p.length; i2++) {
      if (e2.indexOf(p[i2]) < 0 && Object.prototype.propertyIsEnumerable.call(s3, p[i2]))
        t2[p[i2]] = s3[p[i2]];
    }
  return t2;
};
var __values$4 = function(o) {
  var s3 = typeof Symbol === "function" && Symbol.iterator, m3 = s3 && o[s3], i2 = 0;
  if (m3)
    return m3.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i2 >= o.length)
          o = void 0;
        return { value: o && o[i2++], done: !o };
      }
    };
  throw new TypeError(s3 ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read$k = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$e = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$k(arguments[i2]));
  return ar;
};
var ColumnModel = function(_super) {
  __extends$2T(ColumnModel2, _super);
  function ColumnModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.primaryHeaderRowCount = 0;
    _this.secondaryHeaderRowCount = 0;
    _this.gridHeaderRowCount = 0;
    _this.displayedColumnsLeft = [];
    _this.displayedColumnsRight = [];
    _this.displayedColumnsCenter = [];
    _this.displayedColumns = [];
    _this.displayedColumnsAndGroupsMap = {};
    _this.viewportColumns = [];
    _this.headerViewportColumns = [];
    _this.viewportColumnsCenter = [];
    _this.headerViewportColumnsCenter = [];
    _this.autoHeightActiveAtLeastOnce = false;
    _this.rowGroupColumns = [];
    _this.valueColumns = [];
    _this.pivotColumns = [];
    _this.ready = false;
    _this.autoGroupsNeedBuilding = false;
    _this.forceRecreateAutoGroups = false;
    _this.pivotMode = false;
    _this.bodyWidth = 0;
    _this.leftWidth = 0;
    _this.rightWidth = 0;
    _this.bodyWidthDirty = true;
    _this.flexColsCalculatedAtLestOnce = false;
    return _this;
  }
  ColumnModel2.prototype.init = function() {
    var _this = this;
    this.suppressColumnVirtualisation = this.gridOptionsWrapper.isSuppressColumnVirtualisation();
    var pivotMode = this.gridOptionsWrapper.isPivotMode();
    if (this.isPivotSettingAllowed(pivotMode)) {
      this.pivotMode = pivotMode;
    }
    this.usingTreeData = this.gridOptionsWrapper.isTreeData();
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_DISPLAY_TYPE, function() {
      return _this.onAutoGroupColumnDefChanged();
    });
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_AUTO_GROUP_COLUMN_DEF, function() {
      return _this.onAutoGroupColumnDefChanged();
    });
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DEFAULT_COL_DEF, function() {
      return _this.onDefaultColDefChanged();
    });
  };
  ColumnModel2.prototype.onAutoGroupColumnDefChanged = function() {
    this.autoGroupsNeedBuilding = true;
    this.forceRecreateAutoGroups = true;
    this.updateGridColumns();
    this.updateDisplayedColumns("gridOptionsChanged");
  };
  ColumnModel2.prototype.onDefaultColDefChanged = function() {
    this.forceRecreateAutoGroups = true;
    this.createColumnsFromColumnDefs(true);
  };
  ColumnModel2.prototype.setColumnDefs = function(columnDefs, source) {
    if (source === void 0) {
      source = "api";
    }
    var colsPreviouslyExisted = !!this.columnDefs;
    this.columnDefs = columnDefs;
    this.createColumnsFromColumnDefs(colsPreviouslyExisted, source);
  };
  ColumnModel2.prototype.createColumnsFromColumnDefs = function(colsPreviouslyExisted, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    var raiseEventsFunc = colsPreviouslyExisted ? this.compareColumnStatesAndRaiseEvents(source) : void 0;
    this.valueCache.expire();
    this.autoGroupsNeedBuilding = true;
    var oldPrimaryColumns = this.primaryColumns;
    var oldPrimaryTree = this.primaryColumnTree;
    var balancedTreeResult = this.columnFactory.createColumnTree(this.columnDefs, true, oldPrimaryTree);
    this.primaryColumnTree = balancedTreeResult.columnTree;
    this.primaryHeaderRowCount = balancedTreeResult.treeDept + 1;
    this.primaryColumns = this.getColumnsFromTree(this.primaryColumnTree);
    this.primaryColumnsMap = {};
    this.primaryColumns.forEach(function(col) {
      return _this.primaryColumnsMap[col.getId()] = col;
    });
    this.extractRowGroupColumns(source, oldPrimaryColumns);
    this.extractPivotColumns(source, oldPrimaryColumns);
    this.extractValueColumns(source, oldPrimaryColumns);
    this.ready = true;
    var gridColsNotProcessed = this.gridColsArePrimary === void 0;
    var processGridCols = this.gridColsArePrimary || gridColsNotProcessed;
    if (processGridCols) {
      this.updateGridColumns();
      if (colsPreviouslyExisted && !this.gridOptionsWrapper.isMaintainColumnOrder()) {
        this.orderGridColumnsLikePrimary();
      }
      this.updateDisplayedColumns(source);
      this.checkViewportColumns();
    }
    this.dispatchEverythingChanged(source);
    if (raiseEventsFunc) {
      raiseEventsFunc();
    }
    this.dispatchNewColumnsLoaded();
  };
  ColumnModel2.prototype.dispatchNewColumnsLoaded = function() {
    var newColumnsLoadedEvent = {
      type: Events.EVENT_NEW_COLUMNS_LOADED
    };
    this.eventService.dispatchEvent(newColumnsLoadedEvent);
  };
  ColumnModel2.prototype.dispatchEverythingChanged = function(source) {
    if (source === void 0) {
      source = "api";
    }
    var eventEverythingChanged = {
      type: Events.EVENT_COLUMN_EVERYTHING_CHANGED,
      source
    };
    this.eventService.dispatchEvent(eventEverythingChanged);
  };
  ColumnModel2.prototype.orderGridColumnsLikePrimary = function() {
    var _this = this;
    var primaryColumns = this.primaryColumns;
    if (!primaryColumns) {
      return;
    }
    this.gridColumns.sort(function(colA, colB) {
      var primaryIndexA = primaryColumns.indexOf(colA);
      var primaryIndexB = primaryColumns.indexOf(colB);
      var indexAPresent = primaryIndexA >= 0;
      var indexBPresent = primaryIndexB >= 0;
      if (indexAPresent && indexBPresent) {
        return primaryIndexA - primaryIndexB;
      }
      if (indexAPresent) {
        return 1;
      }
      if (indexBPresent) {
        return -1;
      }
      var gridIndexA = _this.gridColumns.indexOf(colA);
      var gridIndexB = _this.gridColumns.indexOf(colB);
      return gridIndexA - gridIndexB;
    });
    this.gridColumns = this.placeLockedColumns(this.gridColumns);
  };
  ColumnModel2.prototype.getAllDisplayedAutoHeightCols = function() {
    return this.displayedAutoHeightCols;
  };
  ColumnModel2.prototype.setViewport = function() {
    if (this.gridOptionsWrapper.isEnableRtl()) {
      this.viewportLeft = this.bodyWidth - this.scrollPosition - this.scrollWidth;
      this.viewportRight = this.bodyWidth - this.scrollPosition;
    } else {
      this.viewportLeft = this.scrollPosition;
      this.viewportRight = this.scrollWidth + this.scrollPosition;
    }
  };
  ColumnModel2.prototype.getDisplayedColumnsStartingAt = function(column) {
    var currentColumn = column;
    var columns = [];
    while (currentColumn != null) {
      columns.push(currentColumn);
      currentColumn = this.getDisplayedColAfter(currentColumn);
    }
    return columns;
  };
  ColumnModel2.prototype.checkViewportColumns = function() {
    if (this.displayedColumnsCenter == null) {
      return;
    }
    var viewportColumnsChanged = this.extractViewport();
    if (!viewportColumnsChanged) {
      return;
    }
    var event = {
      type: Events.EVENT_VIRTUAL_COLUMNS_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.setViewportPosition = function(scrollWidth, scrollPosition) {
    if (scrollWidth !== this.scrollWidth || scrollPosition !== this.scrollPosition || this.bodyWidthDirty) {
      this.scrollWidth = scrollWidth;
      this.scrollPosition = scrollPosition;
      this.bodyWidthDirty = true;
      this.setViewport();
      if (this.ready) {
        this.checkViewportColumns();
      }
    }
  };
  ColumnModel2.prototype.isPivotMode = function() {
    return this.pivotMode;
  };
  ColumnModel2.prototype.isPivotSettingAllowed = function(pivot) {
    if (pivot && this.gridOptionsWrapper.isTreeData()) {
      console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'");
      return false;
    }
    return true;
  };
  ColumnModel2.prototype.setPivotMode = function(pivotMode, source) {
    if (source === void 0) {
      source = "api";
    }
    if (pivotMode === this.pivotMode || !this.isPivotSettingAllowed(this.pivotMode)) {
      return;
    }
    this.pivotMode = pivotMode;
    this.autoGroupsNeedBuilding = true;
    this.updateGridColumns();
    this.updateDisplayedColumns(source);
    var event = {
      type: Events.EVENT_COLUMN_PIVOT_MODE_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.getSecondaryPivotColumn = function(pivotKeys, valueColKey) {
    if (missing(this.secondaryColumns)) {
      return null;
    }
    var valueColumnToFind = this.getPrimaryColumn(valueColKey);
    var foundColumn = null;
    this.secondaryColumns.forEach(function(column) {
      var thisPivotKeys = column.getColDef().pivotKeys;
      var pivotValueColumn = column.getColDef().pivotValueColumn;
      var pivotKeyMatches = areEqual(thisPivotKeys, pivotKeys);
      var pivotValueMatches = pivotValueColumn === valueColumnToFind;
      if (pivotKeyMatches && pivotValueMatches) {
        foundColumn = column;
      }
    });
    return foundColumn;
  };
  ColumnModel2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("columnModel");
  };
  ColumnModel2.prototype.setFirstRightAndLastLeftPinned = function(source) {
    var lastLeft;
    var firstRight;
    if (this.gridOptionsWrapper.isEnableRtl()) {
      lastLeft = this.displayedColumnsLeft ? this.displayedColumnsLeft[0] : null;
      firstRight = this.displayedColumnsRight ? last(this.displayedColumnsRight) : null;
    } else {
      lastLeft = this.displayedColumnsLeft ? last(this.displayedColumnsLeft) : null;
      firstRight = this.displayedColumnsRight ? this.displayedColumnsRight[0] : null;
    }
    this.gridColumns.forEach(function(column) {
      column.setLastLeftPinned(column === lastLeft, source);
      column.setFirstRightPinned(column === firstRight, source);
    });
  };
  ColumnModel2.prototype.autoSizeColumns = function(params) {
    var _this = this;
    var columns = params.columns, skipHeader = params.skipHeader, skipHeaderGroups = params.skipHeaderGroups, stopAtGroup = params.stopAtGroup, _a2 = params.source, source = _a2 === void 0 ? "api" : _a2;
    this.animationFrameService.flushAllFrames();
    var columnsAutosized = [];
    var changesThisTimeAround = -1;
    var shouldSkipHeader = skipHeader != null ? skipHeader : this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
    var shouldSkipHeaderGroups = skipHeaderGroups != null ? skipHeaderGroups : shouldSkipHeader;
    while (changesThisTimeAround !== 0) {
      changesThisTimeAround = 0;
      this.actionOnGridColumns(columns, function(column) {
        if (columnsAutosized.indexOf(column) >= 0) {
          return false;
        }
        var preferredWidth = _this.autoWidthCalculator.getPreferredWidthForColumn(column, shouldSkipHeader);
        if (preferredWidth > 0) {
          var newWidth = _this.normaliseColumnWidth(column, preferredWidth);
          column.setActualWidth(newWidth, source);
          columnsAutosized.push(column);
          changesThisTimeAround++;
        }
        return true;
      }, source);
    }
    if (!shouldSkipHeaderGroups) {
      this.autoSizeColumnGroupsByColumns(columns, stopAtGroup);
    }
    this.fireColumnResizedEvent(columnsAutosized, true, "autosizeColumns");
  };
  ColumnModel2.prototype.fireColumnResizedEvent = function(columns, finished, source, flexColumns) {
    if (flexColumns === void 0) {
      flexColumns = null;
    }
    if (columns && columns.length) {
      var event_1 = {
        type: Events.EVENT_COLUMN_RESIZED,
        columns,
        column: columns.length === 1 ? columns[0] : null,
        flexColumns,
        finished,
        source
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  ColumnModel2.prototype.autoSizeColumn = function(key, skipHeader, source) {
    if (source === void 0) {
      source = "api";
    }
    if (key) {
      this.autoSizeColumns({ columns: [key], skipHeader, skipHeaderGroups: true, source });
    }
  };
  ColumnModel2.prototype.autoSizeColumnGroupsByColumns = function(keys2, stopAtGroup) {
    var e_1, _a2, e_2, _b;
    var columnGroups = /* @__PURE__ */ new Set();
    var columns = this.getGridColumns(keys2);
    columns.forEach(function(col) {
      var parent = col.getParent();
      while (parent && parent != stopAtGroup) {
        if (!parent.isPadding()) {
          columnGroups.add(parent);
        }
        parent = parent.getParent();
      }
    });
    var headerGroupCtrl;
    var resizedColumns = [];
    try {
      for (var columnGroups_1 = __values$4(columnGroups), columnGroups_1_1 = columnGroups_1.next(); !columnGroups_1_1.done; columnGroups_1_1 = columnGroups_1.next()) {
        var columnGroup = columnGroups_1_1.value;
        try {
          for (var _c = (e_2 = void 0, __values$4(this.ctrlsService.getHeaderRowContainerCtrls())), _d = _c.next(); !_d.done; _d = _c.next()) {
            var headerContainerCtrl = _d.value;
            headerGroupCtrl = headerContainerCtrl.getHeaderCtrlForColumn(columnGroup);
            if (headerGroupCtrl) {
              break;
            }
          }
        } catch (e_2_1) {
          e_2 = { error: e_2_1 };
        } finally {
          try {
            if (_d && !_d.done && (_b = _c.return))
              _b.call(_c);
          } finally {
            if (e_2)
              throw e_2.error;
          }
        }
        if (headerGroupCtrl) {
          headerGroupCtrl.resizeLeafColumnsToFit();
        }
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (columnGroups_1_1 && !columnGroups_1_1.done && (_a2 = columnGroups_1.return))
          _a2.call(columnGroups_1);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
    return resizedColumns;
  };
  ColumnModel2.prototype.autoSizeAllColumns = function(skipHeader, source) {
    if (source === void 0) {
      source = "api";
    }
    var allDisplayedColumns = this.getAllDisplayedColumns();
    this.autoSizeColumns({ columns: allDisplayedColumns, skipHeader, source });
  };
  ColumnModel2.prototype.getColumnsFromTree = function(rootColumns) {
    var result = [];
    var recursiveFindColumns = function(childColumns) {
      for (var i2 = 0; i2 < childColumns.length; i2++) {
        var child = childColumns[i2];
        if (child instanceof Column) {
          result.push(child);
        } else if (child instanceof ProvidedColumnGroup) {
          recursiveFindColumns(child.getChildren());
        }
      }
    };
    recursiveFindColumns(rootColumns);
    return result;
  };
  ColumnModel2.prototype.getAllDisplayedTrees = function() {
    if (this.displayedTreeLeft && this.displayedTreeRight && this.displayedTreeCentre) {
      return this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight);
    }
    return null;
  };
  ColumnModel2.prototype.getPrimaryColumnTree = function() {
    return this.primaryColumnTree;
  };
  ColumnModel2.prototype.getHeaderRowCount = function() {
    return this.gridHeaderRowCount;
  };
  ColumnModel2.prototype.getDisplayedTreeLeft = function() {
    return this.displayedTreeLeft;
  };
  ColumnModel2.prototype.getDisplayedTreeRight = function() {
    return this.displayedTreeRight;
  };
  ColumnModel2.prototype.getDisplayedTreeCentre = function() {
    return this.displayedTreeCentre;
  };
  ColumnModel2.prototype.isColumnDisplayed = function(column) {
    return this.getAllDisplayedColumns().indexOf(column) >= 0;
  };
  ColumnModel2.prototype.getAllDisplayedColumns = function() {
    return this.displayedColumns;
  };
  ColumnModel2.prototype.getViewportColumns = function() {
    return this.viewportColumns;
  };
  ColumnModel2.prototype.getDisplayedLeftColumnsForRow = function(rowNode) {
    if (!this.colSpanActive) {
      return this.displayedColumnsLeft;
    }
    return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsLeft);
  };
  ColumnModel2.prototype.getDisplayedRightColumnsForRow = function(rowNode) {
    if (!this.colSpanActive) {
      return this.displayedColumnsRight;
    }
    return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsRight);
  };
  ColumnModel2.prototype.getDisplayedColumnsForRow = function(rowNode, displayedColumns, filterCallback, emptySpaceBeforeColumn) {
    var result = [];
    var lastConsideredCol = null;
    var _loop_1 = function(i3) {
      var col = displayedColumns[i3];
      var maxAllowedColSpan = displayedColumns.length - i3;
      var colSpan = Math.min(col.getColSpan(rowNode), maxAllowedColSpan);
      var columnsToCheckFilter = [col];
      if (colSpan > 1) {
        var colsToRemove = colSpan - 1;
        for (var j = 1; j <= colsToRemove; j++) {
          columnsToCheckFilter.push(displayedColumns[i3 + j]);
        }
        i3 += colsToRemove;
      }
      var filterPasses;
      if (filterCallback) {
        filterPasses = false;
        columnsToCheckFilter.forEach(function(colForFilter) {
          if (filterCallback(colForFilter)) {
            filterPasses = true;
          }
        });
      } else {
        filterPasses = true;
      }
      if (filterPasses) {
        if (result.length === 0 && lastConsideredCol) {
          var gapBeforeColumn = emptySpaceBeforeColumn ? emptySpaceBeforeColumn(col) : false;
          if (gapBeforeColumn) {
            result.push(lastConsideredCol);
          }
        }
        result.push(col);
      }
      lastConsideredCol = col;
      out_i_1 = i3;
    };
    var out_i_1;
    for (var i2 = 0; i2 < displayedColumns.length; i2++) {
      _loop_1(i2);
      i2 = out_i_1;
    }
    return result;
  };
  ColumnModel2.prototype.getViewportCenterColumnsForRow = function(rowNode) {
    var _this = this;
    if (!this.colSpanActive) {
      return this.viewportColumnsCenter;
    }
    var emptySpaceBeforeColumn = function(col) {
      var left = col.getLeft();
      return exists(left) && left > _this.viewportLeft;
    };
    var filterCallback = this.suppressColumnVirtualisation ? null : this.isColumnInRowViewport.bind(this);
    return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsCenter, filterCallback, emptySpaceBeforeColumn);
  };
  ColumnModel2.prototype.getAriaColumnIndex = function(col) {
    return this.getAllGridColumns().indexOf(col) + 1;
  };
  ColumnModel2.prototype.isColumnInHeaderViewport = function(col) {
    if (col.isAutoHeaderHeight()) {
      return true;
    }
    return this.isColumnInRowViewport(col);
  };
  ColumnModel2.prototype.isColumnInRowViewport = function(col) {
    if (col.isAutoHeight()) {
      return true;
    }
    var columnLeft = col.getLeft() || 0;
    var columnRight = columnLeft + col.getActualWidth();
    var leftBounds = this.viewportLeft - 200;
    var rightBounds = this.viewportRight + 200;
    var columnToMuchLeft = columnLeft < leftBounds && columnRight < leftBounds;
    var columnToMuchRight = columnLeft > rightBounds && columnRight > rightBounds;
    return !columnToMuchLeft && !columnToMuchRight;
  };
  ColumnModel2.prototype.getDisplayedColumnsLeftWidth = function() {
    return this.getWidthOfColsInList(this.displayedColumnsLeft);
  };
  ColumnModel2.prototype.getDisplayedColumnsRightWidth = function() {
    return this.getWidthOfColsInList(this.displayedColumnsRight);
  };
  ColumnModel2.prototype.updatePrimaryColumnList = function(keys2, masterList, actionIsAdd, columnCallback, eventType, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    if (!keys2 || missingOrEmpty(keys2)) {
      return;
    }
    var atLeastOne = false;
    keys2.forEach(function(key) {
      var columnToAdd = _this.getPrimaryColumn(key);
      if (!columnToAdd) {
        return;
      }
      if (actionIsAdd) {
        if (masterList.indexOf(columnToAdd) >= 0) {
          return;
        }
        masterList.push(columnToAdd);
      } else {
        if (masterList.indexOf(columnToAdd) < 0) {
          return;
        }
        removeFromArray(masterList, columnToAdd);
      }
      columnCallback(columnToAdd);
      atLeastOne = true;
    });
    if (!atLeastOne) {
      return;
    }
    if (this.autoGroupsNeedBuilding) {
      this.updateGridColumns();
    }
    this.updateDisplayedColumns(source);
    var event = {
      type: eventType,
      columns: masterList,
      column: masterList.length === 1 ? masterList[0] : null,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.setRowGroupColumns = function(colKeys, source) {
    if (source === void 0) {
      source = "api";
    }
    this.autoGroupsNeedBuilding = true;
    this.setPrimaryColumnList(colKeys, this.rowGroupColumns, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.setRowGroupActive.bind(this), source);
  };
  ColumnModel2.prototype.setRowGroupActive = function(active, column, source) {
    if (active === column.isRowGroupActive()) {
      return;
    }
    column.setRowGroupActive(active, source);
    if (active && !this.gridOptionsWrapper.isSuppressRowGroupHidesColumns()) {
      this.setColumnVisible(column, false, source);
    }
    if (!active && !this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()) {
      this.setColumnVisible(column, true, source);
    }
  };
  ColumnModel2.prototype.addRowGroupColumn = function(key, source) {
    if (source === void 0) {
      source = "api";
    }
    if (key) {
      this.addRowGroupColumns([key], source);
    }
  };
  ColumnModel2.prototype.addRowGroupColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.autoGroupsNeedBuilding = true;
    this.updatePrimaryColumnList(keys2, this.rowGroupColumns, true, this.setRowGroupActive.bind(this, true), Events.EVENT_COLUMN_ROW_GROUP_CHANGED, source);
  };
  ColumnModel2.prototype.removeRowGroupColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.autoGroupsNeedBuilding = true;
    this.updatePrimaryColumnList(keys2, this.rowGroupColumns, false, this.setRowGroupActive.bind(this, false), Events.EVENT_COLUMN_ROW_GROUP_CHANGED, source);
  };
  ColumnModel2.prototype.removeRowGroupColumn = function(key, source) {
    if (source === void 0) {
      source = "api";
    }
    if (key) {
      this.removeRowGroupColumns([key], source);
    }
  };
  ColumnModel2.prototype.addPivotColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.updatePrimaryColumnList(keys2, this.pivotColumns, true, function(column) {
      return column.setPivotActive(true, source);
    }, Events.EVENT_COLUMN_PIVOT_CHANGED, source);
  };
  ColumnModel2.prototype.setPivotColumns = function(colKeys, source) {
    if (source === void 0) {
      source = "api";
    }
    this.setPrimaryColumnList(colKeys, this.pivotColumns, Events.EVENT_COLUMN_PIVOT_CHANGED, function(added, column) {
      column.setPivotActive(added, source);
    }, source);
  };
  ColumnModel2.prototype.addPivotColumn = function(key, source) {
    if (source === void 0) {
      source = "api";
    }
    this.addPivotColumns([key], source);
  };
  ColumnModel2.prototype.removePivotColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.updatePrimaryColumnList(keys2, this.pivotColumns, false, function(column) {
      return column.setPivotActive(false, source);
    }, Events.EVENT_COLUMN_PIVOT_CHANGED, source);
  };
  ColumnModel2.prototype.removePivotColumn = function(key, source) {
    if (source === void 0) {
      source = "api";
    }
    this.removePivotColumns([key], source);
  };
  ColumnModel2.prototype.setPrimaryColumnList = function(colKeys, masterList, eventName, columnCallback, source) {
    var _this = this;
    masterList.length = 0;
    if (exists(colKeys)) {
      colKeys.forEach(function(key) {
        var column = _this.getPrimaryColumn(key);
        if (column) {
          masterList.push(column);
        }
      });
    }
    (this.primaryColumns || []).forEach(function(column) {
      var added = masterList.indexOf(column) >= 0;
      columnCallback(added, column);
    });
    if (this.autoGroupsNeedBuilding) {
      this.updateGridColumns();
    }
    this.updateDisplayedColumns(source);
    this.fireColumnEvent(eventName, masterList, source);
  };
  ColumnModel2.prototype.setValueColumns = function(colKeys, source) {
    if (source === void 0) {
      source = "api";
    }
    this.setPrimaryColumnList(colKeys, this.valueColumns, Events.EVENT_COLUMN_VALUE_CHANGED, this.setValueActive.bind(this), source);
  };
  ColumnModel2.prototype.setValueActive = function(active, column, source) {
    if (active === column.isValueActive()) {
      return;
    }
    column.setValueActive(active, source);
    if (active && !column.getAggFunc()) {
      var initialAggFunc = this.aggFuncService.getDefaultAggFunc(column);
      column.setAggFunc(initialAggFunc);
    }
  };
  ColumnModel2.prototype.addValueColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.updatePrimaryColumnList(keys2, this.valueColumns, true, this.setValueActive.bind(this, true), Events.EVENT_COLUMN_VALUE_CHANGED, source);
  };
  ColumnModel2.prototype.addValueColumn = function(colKey, source) {
    if (source === void 0) {
      source = "api";
    }
    if (colKey) {
      this.addValueColumns([colKey], source);
    }
  };
  ColumnModel2.prototype.removeValueColumn = function(colKey, source) {
    if (source === void 0) {
      source = "api";
    }
    this.removeValueColumns([colKey], source);
  };
  ColumnModel2.prototype.removeValueColumns = function(keys2, source) {
    if (source === void 0) {
      source = "api";
    }
    this.updatePrimaryColumnList(keys2, this.valueColumns, false, this.setValueActive.bind(this, false), Events.EVENT_COLUMN_VALUE_CHANGED, source);
  };
  ColumnModel2.prototype.normaliseColumnWidth = function(column, newWidth) {
    var minWidth = column.getMinWidth();
    if (exists(minWidth) && newWidth < minWidth) {
      newWidth = minWidth;
    }
    var maxWidth = column.getMaxWidth();
    if (exists(maxWidth) && column.isGreaterThanMax(newWidth)) {
      newWidth = maxWidth;
    }
    return newWidth;
  };
  ColumnModel2.prototype.getPrimaryOrGridColumn = function(key) {
    var column = this.getPrimaryColumn(key);
    return column || this.getGridColumn(key);
  };
  ColumnModel2.prototype.setColumnWidths = function(columnWidths, shiftKey, finished, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    var sets = [];
    columnWidths.forEach(function(columnWidth) {
      var col = _this.getPrimaryOrGridColumn(columnWidth.key);
      if (!col) {
        return;
      }
      sets.push({
        width: columnWidth.newWidth,
        ratios: [1],
        columns: [col]
      });
      var defaultIsShift = _this.gridOptionsWrapper.getColResizeDefault() === "shift";
      if (defaultIsShift) {
        shiftKey = !shiftKey;
      }
      if (shiftKey) {
        var otherCol = _this.getDisplayedColAfter(col);
        if (!otherCol) {
          return;
        }
        var widthDiff = col.getActualWidth() - columnWidth.newWidth;
        var otherColWidth = otherCol.getActualWidth() + widthDiff;
        sets.push({
          width: otherColWidth,
          ratios: [1],
          columns: [otherCol]
        });
      }
    });
    if (sets.length === 0) {
      return;
    }
    this.resizeColumnSets({
      resizeSets: sets,
      finished,
      source
    });
  };
  ColumnModel2.prototype.checkMinAndMaxWidthsForSet = function(columnResizeSet) {
    var columns = columnResizeSet.columns, width = columnResizeSet.width;
    var minWidthAccumulated = 0;
    var maxWidthAccumulated = 0;
    var maxWidthActive = true;
    columns.forEach(function(col) {
      var minWidth = col.getMinWidth();
      minWidthAccumulated += minWidth || 0;
      var maxWidth = col.getMaxWidth();
      if (exists(maxWidth) && maxWidth > 0) {
        maxWidthAccumulated += maxWidth;
      } else {
        maxWidthActive = false;
      }
    });
    var minWidthPasses = width >= minWidthAccumulated;
    var maxWidthPasses = !maxWidthActive || width <= maxWidthAccumulated;
    return minWidthPasses && maxWidthPasses;
  };
  ColumnModel2.prototype.resizeColumnSets = function(params) {
    var _this = this;
    var resizeSets = params.resizeSets, finished = params.finished, source = params.source;
    var passMinMaxCheck = !resizeSets || resizeSets.every(function(columnResizeSet) {
      return _this.checkMinAndMaxWidthsForSet(columnResizeSet);
    });
    if (!passMinMaxCheck) {
      if (finished) {
        var columns = resizeSets && resizeSets.length > 0 ? resizeSets[0].columns : null;
        this.fireColumnResizedEvent(columns, finished, source);
      }
      return;
    }
    var changedCols = [];
    var allResizedCols = [];
    resizeSets.forEach(function(set2) {
      var width = set2.width, columns2 = set2.columns, ratios = set2.ratios;
      var newWidths = {};
      var finishedCols = {};
      columns2.forEach(function(col) {
        return allResizedCols.push(col);
      });
      var finishedColsGrew = true;
      var loopCount = 0;
      var _loop_2 = function() {
        loopCount++;
        if (loopCount > 1e3) {
          console.error("AG Grid: infinite loop in resizeColumnSets");
          return "break";
        }
        finishedColsGrew = false;
        var subsetCols = [];
        var subsetRatioTotal = 0;
        var pixelsToDistribute = width;
        columns2.forEach(function(col, index) {
          var thisColFinished = finishedCols[col.getId()];
          if (thisColFinished) {
            pixelsToDistribute -= newWidths[col.getId()];
          } else {
            subsetCols.push(col);
            var ratioThisCol = ratios[index];
            subsetRatioTotal += ratioThisCol;
          }
        });
        var ratioScale = 1 / subsetRatioTotal;
        subsetCols.forEach(function(col, index) {
          var lastCol = index === subsetCols.length - 1;
          var colNewWidth;
          if (lastCol) {
            colNewWidth = pixelsToDistribute;
          } else {
            colNewWidth = Math.round(ratios[index] * width * ratioScale);
            pixelsToDistribute -= colNewWidth;
          }
          var minWidth = col.getMinWidth();
          var maxWidth = col.getMaxWidth();
          if (exists(minWidth) && colNewWidth < minWidth) {
            colNewWidth = minWidth;
            finishedCols[col.getId()] = true;
            finishedColsGrew = true;
          } else if (exists(maxWidth) && maxWidth > 0 && colNewWidth > maxWidth) {
            colNewWidth = maxWidth;
            finishedCols[col.getId()] = true;
            finishedColsGrew = true;
          }
          newWidths[col.getId()] = colNewWidth;
        });
      };
      while (finishedColsGrew) {
        var state_1 = _loop_2();
        if (state_1 === "break")
          break;
      }
      columns2.forEach(function(col) {
        var newWidth = newWidths[col.getId()];
        var actualWidth = col.getActualWidth();
        if (actualWidth !== newWidth) {
          col.setActualWidth(newWidth, source);
          changedCols.push(col);
        }
      });
    });
    var atLeastOneColChanged = changedCols.length > 0;
    var flexedCols = [];
    if (atLeastOneColChanged) {
      flexedCols = this.refreshFlexedColumns({ resizingCols: allResizedCols, skipSetLeft: true });
      this.setLeftValues(source);
      this.updateBodyWidths();
      this.checkViewportColumns();
    }
    var colsForEvent = allResizedCols.concat(flexedCols);
    if (atLeastOneColChanged || finished) {
      this.fireColumnResizedEvent(colsForEvent, finished, source, flexedCols);
    }
  };
  ColumnModel2.prototype.setColumnAggFunc = function(key, aggFunc, source) {
    if (source === void 0) {
      source = "api";
    }
    if (!key) {
      return;
    }
    var column = this.getPrimaryColumn(key);
    if (!column) {
      return;
    }
    column.setAggFunc(aggFunc);
    this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED, [column], source);
  };
  ColumnModel2.prototype.fireColumnEvent = function(type, columns, source) {
    var event = {
      type,
      columns,
      column: columns && columns.length == 1 ? columns[0] : null,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.moveRowGroupColumn = function(fromIndex, toIndex, source) {
    if (source === void 0) {
      source = "api";
    }
    var column = this.rowGroupColumns[fromIndex];
    this.rowGroupColumns.splice(fromIndex, 1);
    this.rowGroupColumns.splice(toIndex, 0, column);
    var event = {
      type: Events.EVENT_COLUMN_ROW_GROUP_CHANGED,
      columns: this.rowGroupColumns,
      column: this.rowGroupColumns.length === 1 ? this.rowGroupColumns[0] : null,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.moveColumns = function(columnsToMoveKeys, toIndex, source) {
    if (source === void 0) {
      source = "api";
    }
    this.columnAnimationService.start();
    if (toIndex > this.gridColumns.length - columnsToMoveKeys.length) {
      console.warn("AG Grid: tried to insert columns in invalid location, toIndex = " + toIndex);
      console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");
      return;
    }
    var columnsToMove = this.getGridColumns(columnsToMoveKeys);
    var failedRules = !this.doesMovePassRules(columnsToMove, toIndex);
    if (failedRules) {
      return;
    }
    moveInArray(this.gridColumns, columnsToMove, toIndex);
    this.updateDisplayedColumns(source);
    var event = {
      type: Events.EVENT_COLUMN_MOVED,
      columns: columnsToMove,
      column: columnsToMove.length === 1 ? columnsToMove[0] : null,
      toIndex,
      source
    };
    this.eventService.dispatchEvent(event);
    this.columnAnimationService.finish();
  };
  ColumnModel2.prototype.doesMovePassRules = function(columnsToMove, toIndex) {
    var proposedColumnOrder = this.getProposedColumnOrder(columnsToMove, toIndex);
    return this.doesOrderPassRules(proposedColumnOrder);
  };
  ColumnModel2.prototype.doesOrderPassRules = function(gridOrder) {
    if (!this.doesMovePassMarryChildren(gridOrder)) {
      return false;
    }
    if (!this.doesMovePassLockedPositions(gridOrder)) {
      return false;
    }
    return true;
  };
  ColumnModel2.prototype.getProposedColumnOrder = function(columnsToMove, toIndex) {
    var proposedColumnOrder = this.gridColumns.slice();
    moveInArray(proposedColumnOrder, columnsToMove, toIndex);
    return proposedColumnOrder;
  };
  ColumnModel2.prototype.sortColumnsLikeGridColumns = function(cols) {
    var _this = this;
    if (!cols || cols.length <= 1) {
      return;
    }
    var notAllColsInGridColumns = cols.filter(function(c2) {
      return _this.gridColumns.indexOf(c2) < 0;
    }).length > 0;
    if (notAllColsInGridColumns) {
      return;
    }
    cols.sort(function(a3, b2) {
      var indexA = _this.gridColumns.indexOf(a3);
      var indexB = _this.gridColumns.indexOf(b2);
      return indexA - indexB;
    });
  };
  ColumnModel2.prototype.doesMovePassLockedPositions = function(proposedColumnOrder) {
    var lastPlacement = 0;
    var rulePassed = true;
    var lockPositionToPlacement = function(position) {
      if (!position) {
        return 1;
      }
      if (position === true) {
        return 0;
      }
      return position === "left" ? 0 : 2;
    };
    proposedColumnOrder.forEach(function(col) {
      var placement = lockPositionToPlacement(col.getColDef().lockPosition);
      if (placement < lastPlacement) {
        rulePassed = false;
      }
      lastPlacement = placement;
    });
    return rulePassed;
  };
  ColumnModel2.prototype.doesMovePassMarryChildren = function(allColumnsCopy) {
    var rulePassed = true;
    this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(child) {
      if (!(child instanceof ProvidedColumnGroup)) {
        return;
      }
      var columnGroup = child;
      var colGroupDef = columnGroup.getColGroupDef();
      var marryChildren = colGroupDef && colGroupDef.marryChildren;
      if (!marryChildren) {
        return;
      }
      var newIndexes = [];
      columnGroup.getLeafColumns().forEach(function(col) {
        var newColIndex = allColumnsCopy.indexOf(col);
        newIndexes.push(newColIndex);
      });
      var maxIndex = Math.max.apply(Math, newIndexes);
      var minIndex = Math.min.apply(Math, newIndexes);
      var spread = maxIndex - minIndex;
      var maxSpread = columnGroup.getLeafColumns().length - 1;
      if (spread > maxSpread) {
        rulePassed = false;
      }
    });
    return rulePassed;
  };
  ColumnModel2.prototype.moveColumn = function(key, toIndex, source) {
    if (source === void 0) {
      source = "api";
    }
    this.moveColumns([key], toIndex, source);
  };
  ColumnModel2.prototype.moveColumnByIndex = function(fromIndex, toIndex, source) {
    if (source === void 0) {
      source = "api";
    }
    var column = this.gridColumns[fromIndex];
    this.moveColumn(column, toIndex, source);
  };
  ColumnModel2.prototype.getColumnDefs = function() {
    var _this = this;
    if (!this.primaryColumns) {
      return;
    }
    var cols = this.primaryColumns.slice();
    if (this.gridColsArePrimary) {
      cols.sort(function(a3, b2) {
        return _this.gridColumns.indexOf(a3) - _this.gridColumns.indexOf(b2);
      });
    } else if (this.lastPrimaryOrder) {
      cols.sort(function(a3, b2) {
        return _this.lastPrimaryOrder.indexOf(a3) - _this.lastPrimaryOrder.indexOf(b2);
      });
    }
    return this.columnDefFactory.buildColumnDefs(cols, this.rowGroupColumns, this.pivotColumns);
  };
  ColumnModel2.prototype.getBodyContainerWidth = function() {
    return this.bodyWidth;
  };
  ColumnModel2.prototype.getContainerWidth = function(pinned) {
    switch (pinned) {
      case Constants.PINNED_LEFT:
        return this.leftWidth;
      case Constants.PINNED_RIGHT:
        return this.rightWidth;
      default:
        return this.bodyWidth;
    }
  };
  ColumnModel2.prototype.updateBodyWidths = function() {
    var newBodyWidth = this.getWidthOfColsInList(this.displayedColumnsCenter);
    var newLeftWidth = this.getWidthOfColsInList(this.displayedColumnsLeft);
    var newRightWidth = this.getWidthOfColsInList(this.displayedColumnsRight);
    this.bodyWidthDirty = this.bodyWidth !== newBodyWidth;
    var atLeastOneChanged = this.bodyWidth !== newBodyWidth || this.leftWidth !== newLeftWidth || this.rightWidth !== newRightWidth;
    if (atLeastOneChanged) {
      this.bodyWidth = newBodyWidth;
      this.leftWidth = newLeftWidth;
      this.rightWidth = newRightWidth;
      var event_2 = {
        type: Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED
      };
      this.eventService.dispatchEvent(event_2);
    }
  };
  ColumnModel2.prototype.getValueColumns = function() {
    return this.valueColumns ? this.valueColumns : [];
  };
  ColumnModel2.prototype.getPivotColumns = function() {
    return this.pivotColumns ? this.pivotColumns : [];
  };
  ColumnModel2.prototype.isPivotActive = function() {
    return this.pivotColumns && this.pivotColumns.length > 0 && this.pivotMode;
  };
  ColumnModel2.prototype.getRowGroupColumns = function() {
    return this.rowGroupColumns ? this.rowGroupColumns : [];
  };
  ColumnModel2.prototype.getDisplayedCenterColumns = function() {
    return this.displayedColumnsCenter;
  };
  ColumnModel2.prototype.getDisplayedLeftColumns = function() {
    return this.displayedColumnsLeft;
  };
  ColumnModel2.prototype.getDisplayedRightColumns = function() {
    return this.displayedColumnsRight;
  };
  ColumnModel2.prototype.getDisplayedColumns = function(type) {
    switch (type) {
      case Constants.PINNED_LEFT:
        return this.getDisplayedLeftColumns();
      case Constants.PINNED_RIGHT:
        return this.getDisplayedRightColumns();
      default:
        return this.getDisplayedCenterColumns();
    }
  };
  ColumnModel2.prototype.getAllPrimaryColumns = function() {
    return this.primaryColumns ? this.primaryColumns.slice() : null;
  };
  ColumnModel2.prototype.getSecondaryColumns = function() {
    return this.secondaryColumns ? this.secondaryColumns.slice() : null;
  };
  ColumnModel2.prototype.getAllColumnsForQuickFilter = function() {
    return this.columnsForQuickFilter;
  };
  ColumnModel2.prototype.getAllGridColumns = function() {
    return this.gridColumns;
  };
  ColumnModel2.prototype.isEmpty = function() {
    return missingOrEmpty(this.gridColumns);
  };
  ColumnModel2.prototype.isRowGroupEmpty = function() {
    return missingOrEmpty(this.rowGroupColumns);
  };
  ColumnModel2.prototype.setColumnVisible = function(key, visible, source) {
    if (source === void 0) {
      source = "api";
    }
    this.setColumnsVisible([key], visible, source);
  };
  ColumnModel2.prototype.setColumnsVisible = function(keys2, visible, source) {
    if (visible === void 0) {
      visible = false;
    }
    this.applyColumnState({
      state: keys2.map(function(key) {
        return {
          colId: typeof key === "string" ? key : key.getColId(),
          hide: !visible
        };
      })
    });
  };
  ColumnModel2.prototype.setColumnPinned = function(key, pinned, source) {
    if (source === void 0) {
      source = "api";
    }
    if (key) {
      this.setColumnsPinned([key], pinned, source);
    }
  };
  ColumnModel2.prototype.setColumnsPinned = function(keys2, pinned, source) {
    if (source === void 0) {
      source = "api";
    }
    if (this.gridOptionsWrapper.getDomLayout() === "print") {
      console.warn("Changing the column pinning status is not allowed with domLayout='print'");
      return;
    }
    this.columnAnimationService.start();
    var actualPinned;
    if (pinned === true || pinned === Constants.PINNED_LEFT) {
      actualPinned = Constants.PINNED_LEFT;
    } else if (pinned === Constants.PINNED_RIGHT) {
      actualPinned = Constants.PINNED_RIGHT;
    } else {
      actualPinned = null;
    }
    this.actionOnGridColumns(keys2, function(col) {
      if (col.getPinned() !== actualPinned) {
        col.setPinned(actualPinned);
        return true;
      }
      return false;
    }, source, function() {
      var event = {
        type: Events.EVENT_COLUMN_PINNED,
        pinned: actualPinned,
        column: null,
        columns: null,
        source
      };
      return event;
    });
    this.columnAnimationService.finish();
  };
  ColumnModel2.prototype.actionOnGridColumns = function(keys2, action, source, createEvent) {
    var _this = this;
    if (missingOrEmpty(keys2)) {
      return;
    }
    var updatedColumns = [];
    keys2.forEach(function(key) {
      var column = _this.getGridColumn(key);
      if (!column) {
        return;
      }
      var resultOfAction = action(column);
      if (resultOfAction !== false) {
        updatedColumns.push(column);
      }
    });
    if (!updatedColumns.length) {
      return;
    }
    this.updateDisplayedColumns(source);
    if (exists(createEvent) && createEvent) {
      var event_3 = createEvent();
      event_3.columns = updatedColumns;
      event_3.column = updatedColumns.length === 1 ? updatedColumns[0] : null;
      this.eventService.dispatchEvent(event_3);
    }
  };
  ColumnModel2.prototype.getDisplayedColBefore = function(col) {
    var allDisplayedColumns = this.getAllDisplayedColumns();
    var oldIndex = allDisplayedColumns.indexOf(col);
    if (oldIndex > 0) {
      return allDisplayedColumns[oldIndex - 1];
    }
    return null;
  };
  ColumnModel2.prototype.getDisplayedColAfter = function(col) {
    var allDisplayedColumns = this.getAllDisplayedColumns();
    var oldIndex = allDisplayedColumns.indexOf(col);
    if (oldIndex < allDisplayedColumns.length - 1) {
      return allDisplayedColumns[oldIndex + 1];
    }
    return null;
  };
  ColumnModel2.prototype.getDisplayedGroupAfter = function(columnGroup) {
    return this.getDisplayedGroupAtDirection(columnGroup, "After");
  };
  ColumnModel2.prototype.getDisplayedGroupBefore = function(columnGroup) {
    return this.getDisplayedGroupAtDirection(columnGroup, "Before");
  };
  ColumnModel2.prototype.getDisplayedGroupAtDirection = function(columnGroup, direction) {
    var requiredLevel = columnGroup.getProvidedColumnGroup().getLevel() + columnGroup.getPaddingLevel();
    var colGroupLeafColumns = columnGroup.getDisplayedLeafColumns();
    var col = direction === "After" ? last(colGroupLeafColumns) : colGroupLeafColumns[0];
    var getDisplayColMethod = "getDisplayedCol" + direction;
    while (true) {
      var column = this[getDisplayColMethod](col);
      if (!column) {
        return null;
      }
      var groupPointer = this.getColumnGroupAtLevel(column, requiredLevel);
      if (groupPointer !== columnGroup) {
        return groupPointer;
      }
    }
  };
  ColumnModel2.prototype.getColumnGroupAtLevel = function(column, level) {
    var groupPointer = column.getParent();
    var originalGroupLevel;
    var groupPointerLevel;
    while (true) {
      var groupPointerProvidedColumnGroup = groupPointer.getProvidedColumnGroup();
      originalGroupLevel = groupPointerProvidedColumnGroup.getLevel();
      groupPointerLevel = groupPointer.getPaddingLevel();
      if (originalGroupLevel + groupPointerLevel <= level) {
        break;
      }
      groupPointer = groupPointer.getParent();
    }
    return groupPointer;
  };
  ColumnModel2.prototype.isPinningLeft = function() {
    return this.displayedColumnsLeft.length > 0;
  };
  ColumnModel2.prototype.isPinningRight = function() {
    return this.displayedColumnsRight.length > 0;
  };
  ColumnModel2.prototype.getPrimaryAndSecondaryAndAutoColumns = function() {
    var _a2;
    return (_a2 = []).concat.apply(_a2, __spread$e([
      this.primaryColumns || [],
      this.groupAutoColumns || [],
      this.secondaryColumns || []
    ]));
  };
  ColumnModel2.prototype.getPrimaryAndAutoGroupCols = function() {
    var _a2;
    return (_a2 = []).concat.apply(_a2, __spread$e([
      this.primaryColumns || [],
      this.groupAutoColumns || []
    ]));
  };
  ColumnModel2.prototype.getPrimaryAndSecondaryColumns = function() {
    var _a2;
    return (_a2 = []).concat.apply(_a2, __spread$e([
      this.primaryColumns || [],
      this.secondaryColumns || []
    ]));
  };
  ColumnModel2.prototype.createStateItemFromColumn = function(column) {
    var rowGroupIndex = column.isRowGroupActive() ? this.rowGroupColumns.indexOf(column) : null;
    var pivotIndex = column.isPivotActive() ? this.pivotColumns.indexOf(column) : null;
    var aggFunc = column.isValueActive() ? column.getAggFunc() : null;
    var sort = column.getSort() != null ? column.getSort() : null;
    var sortIndex = column.getSortIndex() != null ? column.getSortIndex() : null;
    var flex = column.getFlex() != null && column.getFlex() > 0 ? column.getFlex() : null;
    var res = {
      colId: column.getColId(),
      width: column.getActualWidth(),
      hide: !column.isVisible(),
      pinned: column.getPinned(),
      sort,
      sortIndex,
      aggFunc,
      rowGroup: column.isRowGroupActive(),
      rowGroupIndex,
      pivot: column.isPivotActive(),
      pivotIndex,
      flex
    };
    return res;
  };
  ColumnModel2.prototype.getColumnState = function() {
    if (missing(this.primaryColumns) || !this.isAlive()) {
      return [];
    }
    var colsForState = this.getPrimaryAndSecondaryAndAutoColumns();
    var res = colsForState.map(this.createStateItemFromColumn.bind(this));
    this.orderColumnStateList(res);
    return res;
  };
  ColumnModel2.prototype.orderColumnStateList = function(columnStateList) {
    var colIdToGridIndexMap = convertToMap(this.gridColumns.map(function(col, index) {
      return [col.getColId(), index];
    }));
    columnStateList.sort(function(itemA, itemB) {
      var posA = colIdToGridIndexMap.has(itemA.colId) ? colIdToGridIndexMap.get(itemA.colId) : -1;
      var posB = colIdToGridIndexMap.has(itemB.colId) ? colIdToGridIndexMap.get(itemB.colId) : -1;
      return posA - posB;
    });
  };
  ColumnModel2.prototype.resetColumnState = function(source) {
    if (source === void 0) {
      source = "api";
    }
    var primaryColumns = this.getColumnsFromTree(this.primaryColumnTree);
    var columnStates = [];
    var letRowGroupIndex = 1e3;
    var letPivotIndex = 1e3;
    var colsToProcess = [];
    if (this.groupAutoColumns) {
      colsToProcess = colsToProcess.concat(this.groupAutoColumns);
    }
    if (primaryColumns) {
      colsToProcess = colsToProcess.concat(primaryColumns);
    }
    colsToProcess.forEach(function(column) {
      var getValueOrNull = function(a3, b2) {
        return a3 != null ? a3 : b2 != null ? b2 : null;
      };
      var colDef = column.getColDef();
      var sort = getValueOrNull(colDef.sort, colDef.initialSort);
      var sortIndex = getValueOrNull(colDef.sortIndex, colDef.initialSortIndex);
      var hide = getValueOrNull(colDef.hide, colDef.initialHide);
      var pinned = getValueOrNull(colDef.pinned, colDef.initialPinned);
      var width = getValueOrNull(colDef.width, colDef.initialWidth);
      var flex = getValueOrNull(colDef.flex, colDef.initialFlex);
      var rowGroupIndex = getValueOrNull(colDef.rowGroupIndex, colDef.initialRowGroupIndex);
      var rowGroup = getValueOrNull(colDef.rowGroup, colDef.initialRowGroup);
      if (rowGroupIndex == null && (rowGroup == null || rowGroup == false)) {
        rowGroupIndex = null;
        rowGroup = null;
      }
      var pivotIndex = getValueOrNull(colDef.pivotIndex, colDef.initialPivotIndex);
      var pivot = getValueOrNull(colDef.pivot, colDef.initialPivot);
      if (pivotIndex == null && (pivot == null || pivot == false)) {
        pivotIndex = null;
        pivot = null;
      }
      var aggFunc = getValueOrNull(colDef.aggFunc, colDef.initialAggFunc);
      var stateItem = {
        colId: column.getColId(),
        sort,
        sortIndex,
        hide,
        pinned,
        width,
        flex,
        rowGroup,
        rowGroupIndex,
        pivot,
        pivotIndex,
        aggFunc
      };
      if (missing(rowGroupIndex) && rowGroup) {
        stateItem.rowGroupIndex = letRowGroupIndex++;
      }
      if (missing(pivotIndex) && pivot) {
        stateItem.pivotIndex = letPivotIndex++;
      }
      columnStates.push(stateItem);
    });
    this.applyColumnState({ state: columnStates, applyOrder: true }, source);
  };
  ColumnModel2.prototype.applyColumnState = function(params, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    if (missingOrEmpty(this.primaryColumns)) {
      return false;
    }
    if (params && params.state && !params.state.forEach) {
      console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.");
      return false;
    }
    var applyStates = function(states, existingColumns, getById) {
      var raiseEventsFunc = _this.compareColumnStatesAndRaiseEvents(source);
      _this.autoGroupsNeedBuilding = true;
      var columnsWithNoState = existingColumns.slice();
      var rowGroupIndexes = {};
      var pivotIndexes = {};
      var autoGroupColumnStates = [];
      var unmatchedAndAutoStates2 = [];
      var unmatchedCount2 = 0;
      var previousRowGroupCols = _this.rowGroupColumns.slice();
      var previousPivotCols = _this.pivotColumns.slice();
      states.forEach(function(state) {
        var colId = state.colId || "";
        var isAutoGroupColumn = colId.startsWith(Constants.GROUP_AUTO_COLUMN_ID);
        if (isAutoGroupColumn) {
          autoGroupColumnStates.push(state);
          unmatchedAndAutoStates2.push(state);
          return;
        }
        var column = getById(colId);
        if (!column) {
          unmatchedAndAutoStates2.push(state);
          unmatchedCount2 += 1;
        } else {
          _this.syncColumnWithStateItem(column, state, params.defaultState, rowGroupIndexes, pivotIndexes, false, source);
          removeFromArray(columnsWithNoState, column);
        }
      });
      var applyDefaultsFunc = function(col) {
        return _this.syncColumnWithStateItem(col, null, params.defaultState, rowGroupIndexes, pivotIndexes, false, source);
      };
      columnsWithNoState.forEach(applyDefaultsFunc);
      var comparator = function(indexes, oldList, colA, colB) {
        var indexA = indexes[colA.getId()];
        var indexB = indexes[colB.getId()];
        var aHasIndex = indexA != null;
        var bHasIndex = indexB != null;
        if (aHasIndex && bHasIndex) {
          return indexA - indexB;
        }
        if (aHasIndex) {
          return -1;
        }
        if (bHasIndex) {
          return 1;
        }
        var oldIndexA = oldList.indexOf(colA);
        var oldIndexB = oldList.indexOf(colB);
        var aHasOldIndex = oldIndexA >= 0;
        var bHasOldIndex = oldIndexB >= 0;
        if (aHasOldIndex && bHasOldIndex) {
          return oldIndexA - oldIndexB;
        }
        if (aHasOldIndex) {
          return -1;
        }
        return 1;
      };
      _this.rowGroupColumns.sort(comparator.bind(_this, rowGroupIndexes, previousRowGroupCols));
      _this.pivotColumns.sort(comparator.bind(_this, pivotIndexes, previousPivotCols));
      _this.updateGridColumns();
      var autoGroupColsCopy = _this.groupAutoColumns ? _this.groupAutoColumns.slice() : [];
      autoGroupColumnStates.forEach(function(stateItem) {
        var autoCol = _this.getAutoColumn(stateItem.colId);
        removeFromArray(autoGroupColsCopy, autoCol);
        _this.syncColumnWithStateItem(autoCol, stateItem, params.defaultState, null, null, true, source);
      });
      autoGroupColsCopy.forEach(applyDefaultsFunc);
      _this.applyOrderAfterApplyState(params);
      _this.updateDisplayedColumns(source);
      _this.dispatchEverythingChanged(source);
      raiseEventsFunc();
      return { unmatchedAndAutoStates: unmatchedAndAutoStates2, unmatchedCount: unmatchedCount2 };
    };
    this.columnAnimationService.start();
    var _a2 = applyStates(params.state || [], this.primaryColumns || [], function(id) {
      return _this.getPrimaryColumn(id);
    }), unmatchedAndAutoStates = _a2.unmatchedAndAutoStates, unmatchedCount = _a2.unmatchedCount;
    if (unmatchedAndAutoStates.length > 0 || exists(params.defaultState)) {
      unmatchedCount = applyStates(unmatchedAndAutoStates, this.secondaryColumns || [], function(id) {
        return _this.getSecondaryColumn(id);
      }).unmatchedCount;
    }
    this.columnAnimationService.finish();
    return unmatchedCount === 0;
  };
  ColumnModel2.prototype.applyOrderAfterApplyState = function(params) {
    var _this = this;
    if (!params.applyOrder || !params.state) {
      return;
    }
    var newOrder = [];
    var processedColIds = {};
    params.state.forEach(function(item) {
      if (!item.colId || processedColIds[item.colId]) {
        return;
      }
      var col = _this.gridColumnsMap[item.colId];
      if (col) {
        newOrder.push(col);
        processedColIds[item.colId] = true;
      }
    });
    var autoGroupInsertIndex = 0;
    this.gridColumns.forEach(function(col) {
      var colId = col.getColId();
      var alreadyProcessed = processedColIds[colId] != null;
      if (alreadyProcessed) {
        return;
      }
      var isAutoGroupCol = colId.startsWith(Constants.GROUP_AUTO_COLUMN_ID);
      if (isAutoGroupCol) {
        insertIntoArray(newOrder, col, autoGroupInsertIndex++);
      } else {
        newOrder.push(col);
      }
    });
    newOrder = this.placeLockedColumns(newOrder);
    if (!this.doesMovePassMarryChildren(newOrder)) {
      console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");
      return;
    }
    this.gridColumns = newOrder;
  };
  ColumnModel2.prototype.compareColumnStatesAndRaiseEvents = function(source) {
    var _this = this;
    var startState = {
      rowGroupColumns: this.rowGroupColumns.slice(),
      pivotColumns: this.pivotColumns.slice(),
      valueColumns: this.valueColumns.slice()
    };
    var columnStateBefore = this.getColumnState();
    var columnStateBeforeMap = {};
    columnStateBefore.forEach(function(col) {
      columnStateBeforeMap[col.colId] = col;
    });
    return function() {
      if (_this.gridOptionsWrapper.isSuppressColumnStateEvents()) {
        return;
      }
      var colsForState = _this.getPrimaryAndSecondaryAndAutoColumns();
      var raiseWhenListsDifferent = function(eventType, colsBefore, colsAfter, idMapper) {
        var beforeList = colsBefore.map(idMapper);
        var afterList = colsAfter.map(idMapper);
        var unchanged = areEqual(beforeList, afterList);
        if (unchanged) {
          return;
        }
        var event = {
          type: eventType,
          columns: colsAfter,
          column: colsAfter.length === 1 ? colsAfter[0] : null,
          source
        };
        _this.eventService.dispatchEvent(event);
      };
      var getChangedColumns = function(changedPredicate) {
        var changedColumns = [];
        colsForState.forEach(function(column) {
          var colStateBefore = columnStateBeforeMap[column.getColId()];
          if (colStateBefore && changedPredicate(colStateBefore, column)) {
            changedColumns.push(column);
          }
        });
        return changedColumns;
      };
      var columnIdMapper = function(c2) {
        return c2.getColId();
      };
      raiseWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED, startState.rowGroupColumns, _this.rowGroupColumns, columnIdMapper);
      raiseWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED, startState.pivotColumns, _this.pivotColumns, columnIdMapper);
      var valueChangePredicate = function(cs, c2) {
        var oldActive = cs.aggFunc != null;
        var activeChanged = oldActive != c2.isValueActive();
        var aggFuncChanged = oldActive && cs.aggFunc != c2.getAggFunc();
        return activeChanged || aggFuncChanged;
      };
      var changedValues = getChangedColumns(valueChangePredicate);
      if (changedValues.length > 0) {
        _this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED, _this.valueColumns, source);
      }
      var resizeChangePredicate = function(cs, c2) {
        return cs.width != c2.getActualWidth();
      };
      _this.fireColumnResizedEvent(getChangedColumns(resizeChangePredicate), true, source);
      var pinnedChangePredicate = function(cs, c2) {
        return cs.pinned != c2.getPinned();
      };
      _this.raiseColumnPinnedEvent(getChangedColumns(pinnedChangePredicate), source);
      var visibilityChangePredicate = function(cs, c2) {
        return cs.hide == c2.isVisible();
      };
      _this.raiseColumnVisibleEvent(getChangedColumns(visibilityChangePredicate), source);
      var sortChangePredicate = function(cs, c2) {
        return cs.sort != c2.getSort() || cs.sortIndex != c2.getSortIndex();
      };
      if (getChangedColumns(sortChangePredicate).length > 0) {
        _this.sortController.dispatchSortChangedEvents(source);
      }
      _this.raiseColumnMovedEvent(columnStateBefore, source);
    };
  };
  ColumnModel2.prototype.raiseColumnPinnedEvent = function(changedColumns, source) {
    if (!changedColumns.length) {
      return;
    }
    var column = changedColumns.length === 1 ? changedColumns[0] : null;
    var pinned = this.getCommonValue(changedColumns, function(col) {
      return col.getPinned();
    });
    var event = {
      type: Events.EVENT_COLUMN_PINNED,
      pinned: pinned != null ? pinned : null,
      columns: changedColumns,
      column,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.getCommonValue = function(cols, valueGetter) {
    if (!cols || cols.length == 0) {
      return void 0;
    }
    var firstValue = valueGetter(cols[0]);
    for (var i2 = 1; i2 < cols.length; i2++) {
      if (firstValue !== valueGetter(cols[i2])) {
        return void 0;
      }
    }
    return firstValue;
  };
  ColumnModel2.prototype.raiseColumnVisibleEvent = function(changedColumns, source) {
    if (!changedColumns.length) {
      return;
    }
    var column = changedColumns.length === 1 ? changedColumns[0] : null;
    var visible = this.getCommonValue(changedColumns, function(col) {
      return col.isVisible();
    });
    var event = {
      type: Events.EVENT_COLUMN_VISIBLE,
      visible,
      columns: changedColumns,
      column,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.raiseColumnMovedEvent = function(colStateBefore, source) {
    var _this = this;
    var colStateAfter = this.getColumnState();
    var colStateAfterMapped = {};
    colStateAfter.forEach(function(s3) {
      return colStateAfterMapped[s3.colId] = s3;
    });
    var colsIntersectIds = {};
    colStateBefore.forEach(function(s3) {
      if (colStateAfterMapped[s3.colId]) {
        colsIntersectIds[s3.colId] = true;
      }
    });
    var beforeFiltered = colStateBefore.filter(function(c2) {
      return colsIntersectIds[c2.colId];
    });
    var afterFiltered = colStateAfter.filter(function(c2) {
      return colsIntersectIds[c2.colId];
    });
    var movedColumns = [];
    afterFiltered.forEach(function(csAfter, index) {
      var csBefore = beforeFiltered && beforeFiltered[index];
      if (csBefore && csBefore.colId !== csAfter.colId) {
        var gridCol = _this.getGridColumn(csBefore.colId);
        if (gridCol) {
          movedColumns.push(gridCol);
        }
      }
    });
    if (!movedColumns.length) {
      return;
    }
    var event = {
      type: Events.EVENT_COLUMN_MOVED,
      columns: movedColumns,
      column: null,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.syncColumnWithStateItem = function(column, stateItem, defaultState, rowGroupIndexes, pivotIndexes, autoCol, source) {
    if (!column) {
      return;
    }
    var getValue2 = function(key1, key2) {
      var obj = { value1: void 0, value2: void 0 };
      var calculated = false;
      if (stateItem) {
        if (stateItem[key1] !== void 0) {
          obj.value1 = stateItem[key1];
          calculated = true;
        }
        if (exists(key2) && stateItem[key2] !== void 0) {
          obj.value2 = stateItem[key2];
          calculated = true;
        }
      }
      if (!calculated && defaultState) {
        if (defaultState[key1] !== void 0) {
          obj.value1 = defaultState[key1];
        }
        if (exists(key2) && defaultState[key2] !== void 0) {
          obj.value2 = defaultState[key2];
        }
      }
      return obj;
    };
    var hide = getValue2("hide").value1;
    if (hide !== void 0) {
      column.setVisible(!hide, source);
    }
    var pinned = getValue2("pinned").value1;
    if (pinned !== void 0) {
      column.setPinned(pinned);
    }
    var minColWidth = this.columnUtils.calculateColMinWidth(column.getColDef());
    var flex = getValue2("flex").value1;
    if (flex !== void 0) {
      column.setFlex(flex);
    }
    var noFlexThisCol = column.getFlex() <= 0;
    if (noFlexThisCol) {
      var width = getValue2("width").value1;
      if (width != null) {
        if (minColWidth != null && width >= minColWidth) {
          column.setActualWidth(width, source);
        }
      }
    }
    var sort = getValue2("sort").value1;
    if (sort !== void 0) {
      if (sort === Constants.SORT_DESC || sort === Constants.SORT_ASC) {
        column.setSort(sort, source);
      } else {
        column.setSort(void 0, source);
      }
    }
    var sortIndex = getValue2("sortIndex").value1;
    if (sortIndex !== void 0) {
      column.setSortIndex(sortIndex);
    }
    if (autoCol || !column.isPrimary()) {
      return;
    }
    var aggFunc = getValue2("aggFunc").value1;
    if (aggFunc !== void 0) {
      if (typeof aggFunc === "string") {
        column.setAggFunc(aggFunc);
        if (!column.isValueActive()) {
          column.setValueActive(true, source);
          this.valueColumns.push(column);
        }
      } else {
        if (exists(aggFunc)) {
          console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.");
        }
        if (column.isValueActive()) {
          column.setValueActive(false, source);
          removeFromArray(this.valueColumns, column);
        }
      }
    }
    var _a2 = getValue2("rowGroup", "rowGroupIndex"), rowGroup = _a2.value1, rowGroupIndex = _a2.value2;
    if (rowGroup !== void 0 || rowGroupIndex !== void 0) {
      if (typeof rowGroupIndex === "number" || rowGroup) {
        if (!column.isRowGroupActive()) {
          column.setRowGroupActive(true, source);
          this.rowGroupColumns.push(column);
        }
        if (rowGroupIndexes && typeof rowGroupIndex === "number") {
          rowGroupIndexes[column.getId()] = rowGroupIndex;
        }
      } else {
        if (column.isRowGroupActive()) {
          column.setRowGroupActive(false, source);
          removeFromArray(this.rowGroupColumns, column);
        }
      }
    }
    var _b = getValue2("pivot", "pivotIndex"), pivot = _b.value1, pivotIndex = _b.value2;
    if (pivot !== void 0 || pivotIndex !== void 0) {
      if (typeof pivotIndex === "number" || pivot) {
        if (!column.isPivotActive()) {
          column.setPivotActive(true, source);
          this.pivotColumns.push(column);
        }
        if (pivotIndexes && typeof pivotIndex === "number") {
          pivotIndexes[column.getId()] = pivotIndex;
        }
      } else {
        if (column.isPivotActive()) {
          column.setPivotActive(false, source);
          removeFromArray(this.pivotColumns, column);
        }
      }
    }
  };
  ColumnModel2.prototype.getGridColumns = function(keys2) {
    return this.getColumns(keys2, this.getGridColumn.bind(this));
  };
  ColumnModel2.prototype.getColumns = function(keys2, columnLookupCallback) {
    var foundColumns = [];
    if (keys2) {
      keys2.forEach(function(key) {
        var column = columnLookupCallback(key);
        if (column) {
          foundColumns.push(column);
        }
      });
    }
    return foundColumns;
  };
  ColumnModel2.prototype.getColumnWithValidation = function(key) {
    if (key == null) {
      return null;
    }
    var column = this.getGridColumn(key);
    if (!column) {
      console.warn("AG Grid: could not find column " + key);
    }
    return column;
  };
  ColumnModel2.prototype.getPrimaryColumn = function(key) {
    if (!this.primaryColumns) {
      return null;
    }
    return this.getColumn(key, this.primaryColumns, this.primaryColumnsMap);
  };
  ColumnModel2.prototype.getGridColumn = function(key) {
    return this.getColumn(key, this.gridColumns, this.gridColumnsMap);
  };
  ColumnModel2.prototype.getSecondaryColumn = function(key) {
    if (!this.secondaryColumns) {
      return null;
    }
    return this.getColumn(key, this.secondaryColumns, this.secondaryColumnsMap);
  };
  ColumnModel2.prototype.getColumn = function(key, columnList, columnMap) {
    if (!key) {
      return null;
    }
    if (typeof key == "string" && columnMap[key]) {
      return columnMap[key];
    }
    for (var i2 = 0; i2 < columnList.length; i2++) {
      if (this.columnsMatch(columnList[i2], key)) {
        return columnList[i2];
      }
    }
    return this.getAutoColumn(key);
  };
  ColumnModel2.prototype.getSourceColumnsForGroupColumn = function(groupCol) {
    var sourceColumnId = groupCol.getColDef().showRowGroup;
    if (!sourceColumnId) {
      return null;
    }
    if (sourceColumnId === true) {
      return this.rowGroupColumns.slice(0);
    }
    var column = this.getPrimaryColumn(sourceColumnId);
    return column ? [column] : null;
  };
  ColumnModel2.prototype.getAutoColumn = function(key) {
    var _this = this;
    if (!this.groupAutoColumns || !exists(this.groupAutoColumns) || missing(this.groupAutoColumns)) {
      return null;
    }
    return this.groupAutoColumns.find(function(groupCol) {
      return _this.columnsMatch(groupCol, key);
    }) || null;
  };
  ColumnModel2.prototype.columnsMatch = function(column, key) {
    var columnMatches = column === key;
    var colDefMatches = column.getColDef() === key;
    var idMatches = column.getColId() == key;
    return columnMatches || colDefMatches || idMatches;
  };
  ColumnModel2.prototype.getDisplayNameForColumn = function(column, location, includeAggFunc) {
    if (includeAggFunc === void 0) {
      includeAggFunc = false;
    }
    if (!column) {
      return null;
    }
    var headerName = this.getHeaderName(column.getColDef(), column, null, null, location);
    if (includeAggFunc) {
      return this.wrapHeaderNameWithAggFunc(column, headerName);
    }
    return headerName;
  };
  ColumnModel2.prototype.getDisplayNameForProvidedColumnGroup = function(columnGroup, providedColumnGroup, location) {
    var colGroupDef = providedColumnGroup ? providedColumnGroup.getColGroupDef() : null;
    if (colGroupDef) {
      return this.getHeaderName(colGroupDef, null, columnGroup, providedColumnGroup, location);
    }
    return null;
  };
  ColumnModel2.prototype.getDisplayNameForColumnGroup = function(columnGroup, location) {
    return this.getDisplayNameForProvidedColumnGroup(columnGroup, columnGroup.getProvidedColumnGroup(), location);
  };
  ColumnModel2.prototype.getHeaderName = function(colDef, column, columnGroup, providedColumnGroup, location) {
    var headerValueGetter = colDef.headerValueGetter;
    if (headerValueGetter) {
      var params = {
        colDef,
        column,
        columnGroup,
        providedColumnGroup,
        location,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      if (typeof headerValueGetter === "function") {
        return headerValueGetter(params);
      } else if (typeof headerValueGetter === "string") {
        return this.expressionService.evaluate(headerValueGetter, params);
      }
      console.warn("ag-grid: headerValueGetter must be a function or a string");
      return "";
    } else if (colDef.headerName != null) {
      return colDef.headerName;
    } else if (colDef.field) {
      return camelCaseToHumanText(colDef.field);
    }
    return "";
  };
  ColumnModel2.prototype.wrapHeaderNameWithAggFunc = function(column, headerName) {
    if (this.gridOptionsWrapper.isSuppressAggFuncInHeader()) {
      return headerName;
    }
    var pivotValueColumn = column.getColDef().pivotValueColumn;
    var pivotActiveOnThisColumn = exists(pivotValueColumn);
    var aggFunc = null;
    var aggFuncFound;
    if (pivotActiveOnThisColumn) {
      var isCollapsedHeaderEnabled = this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn() && this.valueColumns.length === 1;
      var isTotalColumn = column.getColDef().pivotTotalColumnIds !== void 0;
      if (isCollapsedHeaderEnabled && !isTotalColumn) {
        return headerName;
      }
      aggFunc = pivotValueColumn ? pivotValueColumn.getAggFunc() : null;
      aggFuncFound = true;
    } else {
      var measureActive = column.isValueActive();
      var aggregationPresent = this.pivotMode || !this.isRowGroupEmpty();
      if (measureActive && aggregationPresent) {
        aggFunc = column.getAggFunc();
        aggFuncFound = true;
      } else {
        aggFuncFound = false;
      }
    }
    if (aggFuncFound) {
      var aggFuncString = typeof aggFunc === "string" ? aggFunc : "func";
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);
      return aggFuncStringTranslated + "(" + headerName + ")";
    }
    return headerName;
  };
  ColumnModel2.prototype.getColumnGroup = function(colId, instanceId) {
    if (!colId) {
      return null;
    }
    if (colId instanceof ColumnGroup) {
      return colId;
    }
    var allColumnGroups = this.getAllDisplayedTrees();
    var checkInstanceId = typeof instanceId === "number";
    var result = null;
    this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups, function(child) {
      if (child instanceof ColumnGroup) {
        var columnGroup = child;
        var matched = void 0;
        if (checkInstanceId) {
          matched = colId === columnGroup.getGroupId() && instanceId === columnGroup.getInstanceId();
        } else {
          matched = colId === columnGroup.getGroupId();
        }
        if (matched) {
          result = columnGroup;
        }
      }
    });
    return result;
  };
  ColumnModel2.prototype.isReady = function() {
    return this.ready;
  };
  ColumnModel2.prototype.extractValueColumns = function(source, oldPrimaryColumns) {
    this.valueColumns = this.extractColumns(
      oldPrimaryColumns,
      this.valueColumns,
      function(col, flag) {
        return col.setValueActive(flag, source);
      },
      function() {
        return void 0;
      },
      function() {
        return void 0;
      },
      function(colDef) {
        var aggFunc = colDef.aggFunc;
        if (aggFunc === null || aggFunc === "") {
          return null;
        }
        if (aggFunc === void 0) {
          return;
        }
        return !!aggFunc;
      },
      function(colDef) {
        return colDef.initialAggFunc != null && colDef.initialAggFunc != "";
      }
    );
    this.valueColumns.forEach(function(col) {
      var colDef = col.getColDef();
      if (colDef.aggFunc != null && colDef.aggFunc != "") {
        col.setAggFunc(colDef.aggFunc);
      } else {
        if (!col.getAggFunc()) {
          col.setAggFunc(colDef.initialAggFunc);
        }
      }
    });
  };
  ColumnModel2.prototype.extractRowGroupColumns = function(source, oldPrimaryColumns) {
    this.rowGroupColumns = this.extractColumns(oldPrimaryColumns, this.rowGroupColumns, function(col, flag) {
      return col.setRowGroupActive(flag, source);
    }, function(colDef) {
      return colDef.rowGroupIndex;
    }, function(colDef) {
      return colDef.initialRowGroupIndex;
    }, function(colDef) {
      return colDef.rowGroup;
    }, function(colDef) {
      return colDef.initialRowGroup;
    });
  };
  ColumnModel2.prototype.extractColumns = function(oldPrimaryColumns, previousCols, setFlagFunc, getIndexFunc, getInitialIndexFunc, getValueFunc, getInitialValueFunc) {
    if (oldPrimaryColumns === void 0) {
      oldPrimaryColumns = [];
    }
    if (previousCols === void 0) {
      previousCols = [];
    }
    var colsWithIndex = [];
    var colsWithValue = [];
    (this.primaryColumns || []).forEach(function(col) {
      var colIsNew = oldPrimaryColumns.indexOf(col) < 0;
      var colDef = col.getColDef();
      var value = attrToBoolean(getValueFunc(colDef));
      var initialValue = attrToBoolean(getInitialValueFunc(colDef));
      var index = attrToNumber(getIndexFunc(colDef));
      var initialIndex = attrToNumber(getInitialIndexFunc(colDef));
      var include;
      var valuePresent = value !== void 0;
      var indexPresent = index !== void 0;
      var initialValuePresent = initialValue !== void 0;
      var initialIndexPresent = initialIndex !== void 0;
      if (valuePresent) {
        include = value;
      } else if (indexPresent) {
        if (index === null) {
          include = false;
        } else {
          include = index >= 0;
        }
      } else {
        if (colIsNew) {
          if (initialValuePresent) {
            include = initialValue;
          } else if (initialIndexPresent) {
            include = initialIndex != null && initialIndex >= 0;
          } else {
            include = false;
          }
        } else {
          include = previousCols.indexOf(col) >= 0;
        }
      }
      if (include) {
        var useIndex = colIsNew ? index != null || initialIndex != null : index != null;
        useIndex ? colsWithIndex.push(col) : colsWithValue.push(col);
      }
    });
    var getIndexForCol = function(col) {
      var index = getIndexFunc(col.getColDef());
      var defaultIndex = getInitialIndexFunc(col.getColDef());
      return index != null ? index : defaultIndex;
    };
    colsWithIndex.sort(function(colA, colB) {
      var indexA = getIndexForCol(colA);
      var indexB = getIndexForCol(colB);
      if (indexA === indexB) {
        return 0;
      }
      if (indexA < indexB) {
        return -1;
      }
      return 1;
    });
    var res = [].concat(colsWithIndex);
    previousCols.forEach(function(col) {
      if (colsWithValue.indexOf(col) >= 0) {
        res.push(col);
      }
    });
    colsWithValue.forEach(function(col) {
      if (res.indexOf(col) < 0) {
        res.push(col);
      }
    });
    previousCols.forEach(function(col) {
      if (res.indexOf(col) < 0) {
        setFlagFunc(col, false);
      }
    });
    res.forEach(function(col) {
      if (previousCols.indexOf(col) < 0) {
        setFlagFunc(col, true);
      }
    });
    return res;
  };
  ColumnModel2.prototype.extractPivotColumns = function(source, oldPrimaryColumns) {
    this.pivotColumns = this.extractColumns(oldPrimaryColumns, this.pivotColumns, function(col, flag) {
      return col.setPivotActive(flag, source);
    }, function(colDef) {
      return colDef.pivotIndex;
    }, function(colDef) {
      return colDef.initialPivotIndex;
    }, function(colDef) {
      return colDef.pivot;
    }, function(colDef) {
      return colDef.initialPivot;
    });
  };
  ColumnModel2.prototype.resetColumnGroupState = function(source) {
    if (source === void 0) {
      source = "api";
    }
    var stateItems = [];
    this.columnUtils.depthFirstOriginalTreeSearch(null, this.primaryColumnTree, function(child) {
      if (child instanceof ProvidedColumnGroup) {
        var colGroupDef = child.getColGroupDef();
        var groupState = {
          groupId: child.getGroupId(),
          open: !colGroupDef ? void 0 : colGroupDef.openByDefault
        };
        stateItems.push(groupState);
      }
    });
    this.setColumnGroupState(stateItems, source);
  };
  ColumnModel2.prototype.getColumnGroupState = function() {
    var columnGroupState = [];
    this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(node) {
      if (node instanceof ProvidedColumnGroup) {
        columnGroupState.push({
          groupId: node.getGroupId(),
          open: node.isExpanded()
        });
      }
    });
    return columnGroupState;
  };
  ColumnModel2.prototype.setColumnGroupState = function(stateItems, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    this.columnAnimationService.start();
    var impactedGroups = [];
    stateItems.forEach(function(stateItem) {
      var groupKey = stateItem.groupId;
      var newValue = stateItem.open;
      var providedColumnGroup = _this.getProvidedColumnGroup(groupKey);
      if (!providedColumnGroup) {
        return;
      }
      if (providedColumnGroup.isExpanded() === newValue) {
        return;
      }
      _this.logger.log("columnGroupOpened(" + providedColumnGroup.getGroupId() + "," + newValue + ")");
      providedColumnGroup.setExpanded(newValue);
      impactedGroups.push(providedColumnGroup);
    });
    this.updateGroupsAndDisplayedColumns(source);
    this.setFirstRightAndLastLeftPinned(source);
    impactedGroups.forEach(function(providedColumnGroup) {
      var event = {
        type: Events.EVENT_COLUMN_GROUP_OPENED,
        columnGroup: providedColumnGroup
      };
      _this.eventService.dispatchEvent(event);
    });
    this.columnAnimationService.finish();
  };
  ColumnModel2.prototype.setColumnGroupOpened = function(key, newValue, source) {
    if (source === void 0) {
      source = "api";
    }
    var keyAsString;
    if (key instanceof ProvidedColumnGroup) {
      keyAsString = key.getId();
    } else {
      keyAsString = key || "";
    }
    this.setColumnGroupState([{ groupId: keyAsString, open: newValue }], source);
  };
  ColumnModel2.prototype.getProvidedColumnGroup = function(key) {
    if (typeof key !== "string") {
      console.error("AG Grid: group key must be a string");
    }
    var res = null;
    this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(node) {
      if (node instanceof ProvidedColumnGroup) {
        if (node.getId() === key) {
          res = node;
        }
      }
    });
    return res;
  };
  ColumnModel2.prototype.calculateColumnsForDisplay = function() {
    var _this = this;
    var columnsForDisplay;
    if (this.pivotMode && missing(this.secondaryColumns)) {
      columnsForDisplay = this.gridColumns.filter(function(column) {
        var isAutoGroupCol = _this.groupAutoColumns && includes(_this.groupAutoColumns, column);
        var isValueCol = _this.valueColumns && includes(_this.valueColumns, column);
        return isAutoGroupCol || isValueCol;
      });
    } else {
      columnsForDisplay = this.gridColumns.filter(function(column) {
        var isAutoGroupCol = _this.groupAutoColumns && includes(_this.groupAutoColumns, column);
        return isAutoGroupCol || column.isVisible();
      });
    }
    return columnsForDisplay;
  };
  ColumnModel2.prototype.checkColSpanActiveInCols = function(columns) {
    var result = false;
    columns.forEach(function(col) {
      if (exists(col.getColDef().colSpan)) {
        result = true;
      }
    });
    return result;
  };
  ColumnModel2.prototype.calculateColumnsForGroupDisplay = function() {
    var _this = this;
    this.groupDisplayColumns = [];
    this.groupDisplayColumnsMap = {};
    var checkFunc = function(col) {
      var colDef = col.getColDef();
      var underlyingColumn = colDef.showRowGroup;
      if (colDef && exists(underlyingColumn)) {
        _this.groupDisplayColumns.push(col);
        if (typeof underlyingColumn === "string") {
          _this.groupDisplayColumnsMap[underlyingColumn] = col;
        } else if (underlyingColumn === true) {
          _this.getRowGroupColumns().forEach(function(rowGroupCol) {
            _this.groupDisplayColumnsMap[rowGroupCol.getId()] = col;
          });
        }
      }
    };
    this.gridColumns.forEach(checkFunc);
    if (this.groupAutoColumns) {
      this.groupAutoColumns.forEach(checkFunc);
    }
  };
  ColumnModel2.prototype.getGroupDisplayColumns = function() {
    return this.groupDisplayColumns;
  };
  ColumnModel2.prototype.getGroupDisplayColumnForGroup = function(rowGroupColumnId) {
    return this.groupDisplayColumnsMap[rowGroupColumnId];
  };
  ColumnModel2.prototype.updateDisplayedColumns = function(source) {
    var columnsForDisplay = this.calculateColumnsForDisplay();
    this.buildDisplayedTrees(columnsForDisplay);
    this.calculateColumnsForGroupDisplay();
    this.updateGroupsAndDisplayedColumns(source);
    this.setFirstRightAndLastLeftPinned(source);
  };
  ColumnModel2.prototype.isSecondaryColumnsPresent = function() {
    return exists(this.secondaryColumns);
  };
  ColumnModel2.prototype.setSecondaryColumns = function(colDefs, source) {
    var _this = this;
    if (source === void 0) {
      source = "api";
    }
    var newColsPresent = colDefs && colDefs.length > 0;
    if (!newColsPresent && missing(this.secondaryColumns)) {
      return;
    }
    if (newColsPresent) {
      this.processSecondaryColumnDefinitions(colDefs);
      var balancedTreeResult = this.columnFactory.createColumnTree(colDefs, false, this.secondaryBalancedTree || this.previousSecondaryColumns || void 0);
      this.secondaryBalancedTree = balancedTreeResult.columnTree;
      this.secondaryHeaderRowCount = balancedTreeResult.treeDept + 1;
      this.secondaryColumns = this.getColumnsFromTree(this.secondaryBalancedTree);
      this.secondaryColumnsMap = {};
      this.secondaryColumns.forEach(function(col) {
        return _this.secondaryColumnsMap[col.getId()] = col;
      });
      this.previousSecondaryColumns = null;
    } else {
      this.previousSecondaryColumns = this.secondaryBalancedTree;
      this.secondaryBalancedTree = null;
      this.secondaryHeaderRowCount = -1;
      this.secondaryColumns = null;
      this.secondaryColumnsMap = {};
    }
    this.updateGridColumns();
    this.updateDisplayedColumns(source);
  };
  ColumnModel2.prototype.processSecondaryColumnDefinitions = function(colDefs) {
    var columnCallback = this.gridOptionsWrapper.getProcessPivotResultColDefFunc();
    var groupCallback = this.gridOptionsWrapper.getProcessPivotResultColGroupDefFunc();
    if (!columnCallback && !groupCallback) {
      return void 0;
    }
    var searchForColDefs = function(colDefs2) {
      colDefs2.forEach(function(abstractColDef) {
        var isGroup = exists(abstractColDef.children);
        if (isGroup) {
          var colGroupDef = abstractColDef;
          if (groupCallback) {
            groupCallback(colGroupDef);
          }
          searchForColDefs(colGroupDef.children);
        } else {
          var colDef = abstractColDef;
          if (columnCallback) {
            columnCallback(colDef);
          }
        }
      });
    };
    if (colDefs) {
      searchForColDefs(colDefs);
    }
  };
  ColumnModel2.prototype.updateGridColumns = function() {
    var _this = this;
    var prevGridCols = this.gridBalancedTree;
    if (this.gridColsArePrimary) {
      this.lastPrimaryOrder = this.gridColumns;
    } else {
      this.lastSecondaryOrder = this.gridColumns;
    }
    if (this.secondaryColumns && this.secondaryBalancedTree) {
      var hasSameColumns = this.secondaryColumns.every(function(col) {
        return _this.gridColumnsMap[col.getColId()] !== void 0;
      });
      this.gridBalancedTree = this.secondaryBalancedTree.slice();
      this.gridHeaderRowCount = this.secondaryHeaderRowCount;
      this.gridColumns = this.secondaryColumns.slice();
      this.gridColsArePrimary = false;
      if (hasSameColumns) {
        this.orderGridColsLike(this.lastSecondaryOrder);
      }
    } else if (this.primaryColumns) {
      this.gridBalancedTree = this.primaryColumnTree.slice();
      this.gridHeaderRowCount = this.primaryHeaderRowCount;
      this.gridColumns = this.primaryColumns.slice();
      this.gridColsArePrimary = true;
      this.orderGridColsLike(this.lastPrimaryOrder);
    }
    this.addAutoGroupToGridColumns();
    this.gridColumns = this.placeLockedColumns(this.gridColumns);
    this.setupQuickFilterColumns();
    this.clearDisplayedAndViewportColumns();
    this.colSpanActive = this.checkColSpanActiveInCols(this.gridColumns);
    this.gridColumnsMap = {};
    this.gridColumns.forEach(function(col) {
      return _this.gridColumnsMap[col.getId()] = col;
    });
    this.setAutoHeightActive();
    if (!areEqual(prevGridCols, this.gridBalancedTree)) {
      var event_4 = {
        type: Events.EVENT_GRID_COLUMNS_CHANGED
      };
      this.eventService.dispatchEvent(event_4);
    }
  };
  ColumnModel2.prototype.setAutoHeightActive = function() {
    this.autoHeightActive = this.gridColumns.filter(function(col) {
      return col.isAutoHeight();
    }).length > 0;
    if (this.autoHeightActive) {
      this.autoHeightActiveAtLeastOnce = true;
      var rowModelType = this.rowModel.getType();
      var supportedRowModel = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE || rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
      if (!supportedRowModel) {
        var message_1 = "AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";
        doOnce(function() {
          return console.warn(message_1);
        }, "autoHeightActive.wrongRowModel");
      }
    }
  };
  ColumnModel2.prototype.orderGridColsLike = function(colsOrder) {
    if (missing(colsOrder)) {
      return;
    }
    var lastOrderMapped = convertToMap(colsOrder.map(function(col, index) {
      return [col, index];
    }));
    var noColsFound = true;
    this.gridColumns.forEach(function(col) {
      if (lastOrderMapped.has(col)) {
        noColsFound = false;
      }
    });
    if (noColsFound) {
      return;
    }
    var gridColsMap = convertToMap(this.gridColumns.map(function(col) {
      return [col, true];
    }));
    var oldColsOrdered = colsOrder.filter(function(col) {
      return gridColsMap.has(col);
    });
    var oldColsMap = convertToMap(oldColsOrdered.map(function(col) {
      return [col, true];
    }));
    var newColsOrdered = this.gridColumns.filter(function(col) {
      return !oldColsMap.has(col);
    });
    var newGridColumns = oldColsOrdered.slice();
    newColsOrdered.forEach(function(newCol) {
      var parent = newCol.getOriginalParent();
      if (!parent) {
        newGridColumns.push(newCol);
        return;
      }
      var siblings = [];
      while (!siblings.length && parent) {
        var leafCols = parent.getLeafColumns();
        leafCols.forEach(function(leafCol) {
          var presentInNewGriColumns = newGridColumns.indexOf(leafCol) >= 0;
          var noYetInSiblings = siblings.indexOf(leafCol) < 0;
          if (presentInNewGriColumns && noYetInSiblings) {
            siblings.push(leafCol);
          }
        });
        parent = parent.getOriginalParent();
      }
      if (!siblings.length) {
        newGridColumns.push(newCol);
        return;
      }
      var indexes = siblings.map(function(col) {
        return newGridColumns.indexOf(col);
      });
      var lastIndex = Math.max.apply(Math, __spread$e(indexes));
      insertIntoArray(newGridColumns, newCol, lastIndex + 1);
    });
    this.gridColumns = newGridColumns;
  };
  ColumnModel2.prototype.isPrimaryColumnGroupsPresent = function() {
    return this.primaryHeaderRowCount > 1;
  };
  ColumnModel2.prototype.setupQuickFilterColumns = function() {
    if (this.groupAutoColumns) {
      this.columnsForQuickFilter = (this.primaryColumns || []).concat(this.groupAutoColumns);
    } else if (this.primaryColumns) {
      this.columnsForQuickFilter = this.primaryColumns;
    }
  };
  ColumnModel2.prototype.placeLockedColumns = function(cols) {
    var left = [];
    var normal = [];
    var right = [];
    cols.forEach(function(col) {
      var position = col.getColDef().lockPosition;
      if (position === "right") {
        right.push(col);
      } else if (position === "left" || position === true) {
        left.push(col);
      } else {
        normal.push(col);
      }
    });
    return __spread$e(left, normal, right);
  };
  ColumnModel2.prototype.addAutoGroupToGridColumns = function() {
    this.createGroupAutoColumnsIfNeeded();
    if (missing(this.groupAutoColumns)) {
      return;
    }
    this.gridColumns = this.groupAutoColumns ? this.groupAutoColumns.concat(this.gridColumns) : this.gridColumns;
    var autoColBalancedTree = this.columnFactory.createForAutoGroups(this.groupAutoColumns, this.gridBalancedTree);
    this.gridBalancedTree = autoColBalancedTree.concat(this.gridBalancedTree);
  };
  ColumnModel2.prototype.clearDisplayedAndViewportColumns = function() {
    this.displayedTreeLeft = [];
    this.displayedTreeRight = [];
    this.displayedTreeCentre = [];
    this.viewportRowLeft = {};
    this.viewportRowRight = {};
    this.viewportRowCenter = {};
    this.displayedColumnsLeft = [];
    this.displayedColumnsRight = [];
    this.displayedColumnsCenter = [];
    this.displayedColumns = [];
    this.viewportColumns = [];
    this.headerViewportColumns = [];
  };
  ColumnModel2.prototype.updateGroupsAndDisplayedColumns = function(source) {
    this.updateOpenClosedVisibilityInColumnGroups();
    this.deriveDisplayedColumns(source);
    this.refreshFlexedColumns();
    this.extractViewport();
    this.updateBodyWidths();
    var event = {
      type: Events.EVENT_DISPLAYED_COLUMNS_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnModel2.prototype.deriveDisplayedColumns = function(source) {
    this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft, this.displayedColumnsLeft);
    this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre, this.displayedColumnsCenter);
    this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight, this.displayedColumnsRight);
    this.joinDisplayedColumns();
    this.setLeftValues(source);
    this.displayedAutoHeightCols = this.displayedColumns.filter(function(col) {
      return col.isAutoHeight();
    });
  };
  ColumnModel2.prototype.isAutoRowHeightActive = function() {
    return this.autoHeightActive;
  };
  ColumnModel2.prototype.wasAutoRowHeightEverActive = function() {
    return this.autoHeightActiveAtLeastOnce;
  };
  ColumnModel2.prototype.joinDisplayedColumns = function() {
    if (this.gridOptionsWrapper.isEnableRtl()) {
      this.displayedColumns = this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft);
    } else {
      this.displayedColumns = this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight);
    }
  };
  ColumnModel2.prototype.setLeftValues = function(source) {
    this.setLeftValuesOfColumns(source);
    this.setLeftValuesOfGroups();
  };
  ColumnModel2.prototype.setLeftValuesOfColumns = function(source) {
    var _this = this;
    if (!this.primaryColumns) {
      return;
    }
    var allColumns = this.primaryColumns.slice(0);
    var doingRtl = this.gridOptionsWrapper.isEnableRtl();
    [
      this.displayedColumnsLeft,
      this.displayedColumnsRight,
      this.displayedColumnsCenter
    ].forEach(function(columns) {
      if (doingRtl) {
        var left_1 = _this.getWidthOfColsInList(columns);
        columns.forEach(function(column) {
          left_1 -= column.getActualWidth();
          column.setLeft(left_1, source);
        });
      } else {
        var left_2 = 0;
        columns.forEach(function(column) {
          column.setLeft(left_2, source);
          left_2 += column.getActualWidth();
        });
      }
      removeAllFromArray(allColumns, columns);
    });
    allColumns.forEach(function(column) {
      column.setLeft(null, source);
    });
  };
  ColumnModel2.prototype.setLeftValuesOfGroups = function() {
    [
      this.displayedTreeLeft,
      this.displayedTreeRight,
      this.displayedTreeCentre
    ].forEach(function(columns) {
      columns.forEach(function(column) {
        if (column instanceof ColumnGroup) {
          var columnGroup = column;
          columnGroup.checkLeft();
        }
      });
    });
  };
  ColumnModel2.prototype.derivedDisplayedColumnsFromDisplayedTree = function(tree, columns) {
    columns.length = 0;
    this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree, function(child) {
      if (child instanceof Column) {
        columns.push(child);
      }
    });
  };
  ColumnModel2.prototype.extractViewportColumns = function() {
    if (this.suppressColumnVirtualisation) {
      this.viewportColumnsCenter = this.displayedColumnsCenter;
      this.headerViewportColumnsCenter = this.displayedColumnsCenter;
    } else {
      this.viewportColumnsCenter = this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this));
      this.headerViewportColumnsCenter = this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this));
    }
    this.viewportColumns = this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight);
    this.headerViewportColumns = this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight);
  };
  ColumnModel2.prototype.getVirtualHeaderGroupRow = function(type, dept) {
    var result;
    switch (type) {
      case Constants.PINNED_LEFT:
        result = this.viewportRowLeft[dept];
        break;
      case Constants.PINNED_RIGHT:
        result = this.viewportRowRight[dept];
        break;
      default:
        result = this.viewportRowCenter[dept];
        break;
    }
    if (missing(result)) {
      result = [];
    }
    return result;
  };
  ColumnModel2.prototype.calculateHeaderRows = function() {
    this.viewportRowLeft = {};
    this.viewportRowRight = {};
    this.viewportRowCenter = {};
    var virtualColIds = {};
    this.headerViewportColumns.forEach(function(col) {
      return virtualColIds[col.getId()] = true;
    });
    var testGroup = function(children, result, dept) {
      var returnValue = false;
      for (var i2 = 0; i2 < children.length; i2++) {
        var child = children[i2];
        var addThisItem = false;
        if (child instanceof Column) {
          addThisItem = virtualColIds[child.getId()] === true;
        } else {
          var columnGroup = child;
          var displayedChildren = columnGroup.getDisplayedChildren();
          if (displayedChildren) {
            addThisItem = testGroup(displayedChildren, result, dept + 1);
          }
        }
        if (addThisItem) {
          returnValue = true;
          if (!result[dept]) {
            result[dept] = [];
          }
          result[dept].push(child);
        }
      }
      return returnValue;
    };
    testGroup(this.displayedTreeLeft, this.viewportRowLeft, 0);
    testGroup(this.displayedTreeRight, this.viewportRowRight, 0);
    testGroup(this.displayedTreeCentre, this.viewportRowCenter, 0);
  };
  ColumnModel2.prototype.extractViewport = function() {
    var hashBefore = this.viewportColumns.map(function(column) {
      return column.getId();
    }).join("#");
    this.extractViewportColumns();
    var hashAfter = this.viewportColumns.map(function(column) {
      return column.getId();
    }).join("#");
    var changed = hashBefore !== hashAfter;
    if (changed) {
      this.calculateHeaderRows();
    }
    return changed;
  };
  ColumnModel2.prototype.refreshFlexedColumns = function(params) {
    var _this = this;
    if (params === void 0) {
      params = {};
    }
    var source = params.source ? params.source : "flex";
    if (params.viewportWidth != null) {
      this.flexViewportWidth = params.viewportWidth;
    }
    if (!this.flexViewportWidth) {
      return [];
    }
    var flexAfterDisplayIndex = -1;
    if (params.resizingCols) {
      params.resizingCols.forEach(function(col2) {
        var indexOfCol = _this.displayedColumnsCenter.indexOf(col2);
        if (flexAfterDisplayIndex < indexOfCol) {
          flexAfterDisplayIndex = indexOfCol;
        }
      });
    }
    var isColFlex = function(col2) {
      var afterResizingCols = _this.displayedColumnsCenter.indexOf(col2) > flexAfterDisplayIndex;
      return col2.getFlex() && afterResizingCols;
    };
    var knownWidthColumns = this.displayedColumnsCenter.filter(function(col2) {
      return !isColFlex(col2);
    });
    var flexingColumns = this.displayedColumnsCenter.filter(function(col2) {
      return isColFlex(col2);
    });
    var changedColumns = [];
    if (!flexingColumns.length) {
      return [];
    }
    var flexingColumnSizes = [];
    var spaceForFlexingColumns;
    outer:
      while (true) {
        var totalFlex = flexingColumns.reduce(function(count, col2) {
          return count + col2.getFlex();
        }, 0);
        spaceForFlexingColumns = this.flexViewportWidth - this.getWidthOfColsInList(knownWidthColumns);
        for (var i2 = 0; i2 < flexingColumns.length; i2++) {
          var col = flexingColumns[i2];
          var widthByFlexRule = spaceForFlexingColumns * col.getFlex() / totalFlex;
          var constrainedWidth = 0;
          var minWidth = col.getMinWidth();
          var maxWidth = col.getMaxWidth();
          if (exists(minWidth) && widthByFlexRule < minWidth) {
            constrainedWidth = minWidth;
          } else if (exists(maxWidth) && widthByFlexRule > maxWidth) {
            constrainedWidth = maxWidth;
          }
          if (constrainedWidth) {
            col.setActualWidth(constrainedWidth, source);
            removeFromArray(flexingColumns, col);
            changedColumns.push(col);
            knownWidthColumns.push(col);
            continue outer;
          }
          flexingColumnSizes[i2] = Math.round(widthByFlexRule);
        }
        break;
      }
    var remainingSpace = spaceForFlexingColumns;
    flexingColumns.forEach(function(col2, i3) {
      col2.setActualWidth(Math.min(flexingColumnSizes[i3], remainingSpace), source);
      changedColumns.push(col2);
      remainingSpace -= flexingColumnSizes[i3];
    });
    if (!params.skipSetLeft) {
      this.setLeftValues(source);
    }
    if (params.updateBodyWidths) {
      this.updateBodyWidths();
    }
    if (params.fireResizedEvent) {
      this.fireColumnResizedEvent(changedColumns, true, source, flexingColumns);
    }
    if (!this.flexColsCalculatedAtLestOnce) {
      if (this.gridOptionsWrapper.isRowModelDefault()) {
        this.rowModel.resetRowHeights();
      }
      this.flexColsCalculatedAtLestOnce = true;
    }
    return flexingColumns;
  };
  ColumnModel2.prototype.sizeColumnsToFit = function(gridWidth, source, silent, params) {
    if (source === void 0) {
      source = "sizeColumnsToFit";
    }
    var _a2, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l2;
    var limitsMap = {};
    if (params) {
      (_b = (_a2 = params) === null || _a2 === void 0 ? void 0 : _a2.columnLimits) === null || _b === void 0 ? void 0 : _b.forEach(function(_a3) {
        var key = _a3.key, dimensions = __rest(_a3, ["key"]);
        limitsMap[typeof key === "string" ? key : key.getColId()] = dimensions;
      });
    }
    var allDisplayedColumns = this.getAllDisplayedColumns();
    var doColumnsAlreadyFit = gridWidth === this.getWidthOfColsInList(allDisplayedColumns);
    if (gridWidth <= 0 || !allDisplayedColumns.length || doColumnsAlreadyFit) {
      return;
    }
    var colsToSpread = [];
    var colsToNotSpread = [];
    allDisplayedColumns.forEach(function(column2) {
      if (column2.getColDef().suppressSizeToFit === true) {
        colsToNotSpread.push(column2);
      } else {
        colsToSpread.push(column2);
      }
    });
    var colsToFireEventFor = colsToSpread.slice(0);
    var finishedResizing = false;
    var moveToNotSpread = function(column2) {
      removeFromArray(colsToSpread, column2);
      colsToNotSpread.push(column2);
    };
    colsToSpread.forEach(function(column2) {
      return column2.resetActualWidth(source);
    });
    while (!finishedResizing) {
      finishedResizing = true;
      var availablePixels = gridWidth - this.getWidthOfColsInList(colsToNotSpread);
      if (availablePixels <= 0) {
        colsToSpread.forEach(function(column2) {
          var _a3, _b2, _c2, _d2;
          var widthOverride2 = (_c2 = (_b2 = (_a3 = limitsMap) === null || _a3 === void 0 ? void 0 : _a3[column2.getId()]) === null || _b2 === void 0 ? void 0 : _b2.minWidth, _c2 !== null && _c2 !== void 0 ? _c2 : (_d2 = params) === null || _d2 === void 0 ? void 0 : _d2.defaultMinWidth);
          if (typeof widthOverride2 === "number") {
            column2.setActualWidth(widthOverride2);
            return;
          }
          column2.setMinimum(source);
        });
      } else {
        var scale = availablePixels / this.getWidthOfColsInList(colsToSpread);
        var pixelsForLastCol = availablePixels;
        for (var i2 = colsToSpread.length - 1; i2 >= 0; i2--) {
          var column = colsToSpread[i2];
          var widthOverride = (_c = limitsMap) === null || _c === void 0 ? void 0 : _c[column.getId()];
          var minOverride = (_e = (_d = widthOverride) === null || _d === void 0 ? void 0 : _d.minWidth, _e !== null && _e !== void 0 ? _e : (_f = params) === null || _f === void 0 ? void 0 : _f.defaultMinWidth);
          var maxOverride = (_h = (_g = widthOverride) === null || _g === void 0 ? void 0 : _g.maxWidth, _h !== null && _h !== void 0 ? _h : (_j = params) === null || _j === void 0 ? void 0 : _j.defaultMaxWidth);
          var colMinWidth = (_k = column.getMinWidth(), _k !== null && _k !== void 0 ? _k : 0);
          var colMaxWidth = (_l2 = column.getMaxWidth(), _l2 !== null && _l2 !== void 0 ? _l2 : Number.MAX_VALUE);
          var minWidth = typeof minOverride === "number" && minOverride > colMinWidth ? minOverride : column.getMinWidth();
          var maxWidth = typeof maxOverride === "number" && maxOverride < colMaxWidth ? maxOverride : column.getMaxWidth();
          var newWidth = Math.round(column.getActualWidth() * scale);
          if (exists(minWidth) && newWidth < minWidth) {
            newWidth = minWidth;
            moveToNotSpread(column);
            finishedResizing = false;
          } else if (exists(maxWidth) && newWidth > maxWidth) {
            newWidth = maxWidth;
            moveToNotSpread(column);
            finishedResizing = false;
          } else if (i2 === 0) {
            newWidth = pixelsForLastCol;
          }
          column.setActualWidth(newWidth, source, true);
          pixelsForLastCol -= newWidth;
        }
      }
    }
    colsToFireEventFor.forEach(function(col) {
      col.fireColumnWidthChangedEvent(source);
    });
    this.setLeftValues(source);
    this.updateBodyWidths();
    if (silent) {
      return;
    }
    this.fireColumnResizedEvent(colsToFireEventFor, true, source);
  };
  ColumnModel2.prototype.buildDisplayedTrees = function(visibleColumns) {
    var leftVisibleColumns = [];
    var rightVisibleColumns = [];
    var centerVisibleColumns = [];
    visibleColumns.forEach(function(column) {
      switch (column.getPinned()) {
        case "left":
          leftVisibleColumns.push(column);
          break;
        case "right":
          rightVisibleColumns.push(column);
          break;
        default:
          centerVisibleColumns.push(column);
          break;
      }
    });
    var groupInstanceIdCreator = new GroupInstanceIdCreator();
    this.displayedTreeLeft = this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, Constants.PINNED_LEFT, this.displayedTreeLeft);
    this.displayedTreeRight = this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, Constants.PINNED_RIGHT, this.displayedTreeRight);
    this.displayedTreeCentre = this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, null, this.displayedTreeCentre);
    this.updateDisplayedMap();
  };
  ColumnModel2.prototype.updateDisplayedMap = function() {
    var _this = this;
    this.displayedColumnsAndGroupsMap = {};
    var func = function(child) {
      _this.displayedColumnsAndGroupsMap[child.getUniqueId()] = child;
    };
    this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre, func);
    this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft, func);
    this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight, func);
  };
  ColumnModel2.prototype.isDisplayed = function(item) {
    var fromMap = this.displayedColumnsAndGroupsMap[item.getUniqueId()];
    return fromMap === item;
  };
  ColumnModel2.prototype.updateOpenClosedVisibilityInColumnGroups = function() {
    var allColumnGroups = this.getAllDisplayedTrees();
    this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups, function(child) {
      if (child instanceof ColumnGroup) {
        var columnGroup = child;
        columnGroup.calculateDisplayedColumns();
      }
    });
  };
  ColumnModel2.prototype.getGroupAutoColumns = function() {
    return this.groupAutoColumns;
  };
  ColumnModel2.prototype.createGroupAutoColumnsIfNeeded = function() {
    if (!this.autoGroupsNeedBuilding) {
      return;
    }
    this.autoGroupsNeedBuilding = false;
    var groupFullWidthRow = this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode);
    var suppressAutoColumn = this.pivotMode ? this.gridOptionsWrapper.isPivotSuppressAutoColumn() : this.gridOptionsWrapper.isGroupSuppressAutoColumn();
    var groupingActive = this.rowGroupColumns.length > 0 || this.usingTreeData;
    var needAutoColumns = groupingActive && !suppressAutoColumn && !groupFullWidthRow;
    if (needAutoColumns) {
      var existingCols = this.groupAutoColumns || [];
      var newAutoGroupCols = this.autoGroupColService.createAutoGroupColumns(existingCols, this.rowGroupColumns);
      var autoColsDifferent = !this.autoColsEqual(newAutoGroupCols, this.groupAutoColumns);
      if (autoColsDifferent || this.forceRecreateAutoGroups) {
        this.groupAutoColumns = newAutoGroupCols;
      }
    } else {
      this.groupAutoColumns = null;
    }
  };
  ColumnModel2.prototype.autoColsEqual = function(colsA, colsB) {
    return areEqual(colsA, colsB, function(a3, b2) {
      return a3.getColId() === b2.getColId();
    });
  };
  ColumnModel2.prototype.getWidthOfColsInList = function(columnList) {
    return columnList.reduce(function(width, col) {
      return width + col.getActualWidth();
    }, 0);
  };
  ColumnModel2.prototype.getGridBalancedTree = function() {
    return this.gridBalancedTree;
  };
  ColumnModel2.prototype.hasFloatingFilters = function() {
    if (!this.gridColumns) {
      return false;
    }
    var res = this.gridColumns.some(function(col) {
      return col.getColDef().floatingFilter;
    });
    return res;
  };
  ColumnModel2.prototype.getFirstDisplayedColumn = function() {
    var isRtl = this.gridOptionsWrapper.isEnableRtl();
    var queryOrder = [
      "getDisplayedLeftColumns",
      "getDisplayedCenterColumns",
      "getDisplayedRightColumns"
    ];
    if (isRtl) {
      queryOrder.reverse();
    }
    for (var i2 = 0; i2 < queryOrder.length; i2++) {
      var container = this[queryOrder[i2]]();
      if (container.length) {
        return isRtl ? last(container) : container[0];
      }
    }
    return null;
  };
  ColumnModel2.prototype.setColumnHeaderHeight = function(col, height) {
    var changed = col.setAutoHeaderHeight(height);
    if (changed) {
      var event_5 = {
        type: Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,
        column: col,
        columns: [col],
        source: "autosizeColumnHeaderHeight"
      };
      this.eventService.dispatchEvent(event_5);
    }
  };
  ColumnModel2.prototype.getColumnGroupHeaderRowHeight = function() {
    if (this.isPivotMode()) {
      return this.gridOptionsWrapper.getPivotGroupHeaderHeight();
    } else {
      return this.gridOptionsWrapper.getGroupHeaderHeight();
    }
  };
  ColumnModel2.prototype.getColumnHeaderRowHeight = function() {
    var defaultHeight = this.isPivotMode() ? this.gridOptionsWrapper.getPivotHeaderHeight() : this.gridOptionsWrapper.getHeaderHeight();
    var displayedHeights = this.getAllDisplayedColumns().filter(function(col) {
      return col.isAutoHeaderHeight();
    }).map(function(col) {
      return col.getAutoHeaderHeight() || 0;
    });
    return Math.max.apply(Math, __spread$e([defaultHeight], displayedHeights));
  };
  __decorate$2u([
    Autowired("expressionService")
  ], ColumnModel2.prototype, "expressionService", void 0);
  __decorate$2u([
    Autowired("columnFactory")
  ], ColumnModel2.prototype, "columnFactory", void 0);
  __decorate$2u([
    Autowired("displayedGroupCreator")
  ], ColumnModel2.prototype, "displayedGroupCreator", void 0);
  __decorate$2u([
    Autowired("ctrlsService")
  ], ColumnModel2.prototype, "ctrlsService", void 0);
  __decorate$2u([
    Autowired("autoWidthCalculator")
  ], ColumnModel2.prototype, "autoWidthCalculator", void 0);
  __decorate$2u([
    Autowired("columnUtils")
  ], ColumnModel2.prototype, "columnUtils", void 0);
  __decorate$2u([
    Autowired("columnAnimationService")
  ], ColumnModel2.prototype, "columnAnimationService", void 0);
  __decorate$2u([
    Autowired("autoGroupColService")
  ], ColumnModel2.prototype, "autoGroupColService", void 0);
  __decorate$2u([
    Optional("aggFuncService")
  ], ColumnModel2.prototype, "aggFuncService", void 0);
  __decorate$2u([
    Optional("valueCache")
  ], ColumnModel2.prototype, "valueCache", void 0);
  __decorate$2u([
    Optional("animationFrameService")
  ], ColumnModel2.prototype, "animationFrameService", void 0);
  __decorate$2u([
    Autowired("rowModel")
  ], ColumnModel2.prototype, "rowModel", void 0);
  __decorate$2u([
    Autowired("sortController")
  ], ColumnModel2.prototype, "sortController", void 0);
  __decorate$2u([
    Autowired("columnDefFactory")
  ], ColumnModel2.prototype, "columnDefFactory", void 0);
  __decorate$2u([
    PostConstruct
  ], ColumnModel2.prototype, "init", null);
  __decorate$2u([
    __param$7(0, Qualifier("loggerFactory"))
  ], ColumnModel2.prototype, "setBeans", null);
  ColumnModel2 = __decorate$2u([
    Bean("columnModel")
  ], ColumnModel2);
  return ColumnModel2;
}(BeanStub);
var __extends$2S = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2t = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnUtils = function(_super) {
  __extends$2S(ColumnUtils2, _super);
  function ColumnUtils2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ColumnUtils2.prototype.calculateColMinWidth = function(colDef) {
    return colDef.minWidth != null ? colDef.minWidth : this.gridOptionsWrapper.getMinColWidth();
  };
  ColumnUtils2.prototype.calculateColMaxWidth = function(colDef) {
    return colDef.maxWidth != null ? colDef.maxWidth : this.gridOptionsWrapper.getMaxColWidth() || Number.MAX_SAFE_INTEGER;
  };
  ColumnUtils2.prototype.calculateColInitialWidth = function(colDef) {
    var minColWidth = this.calculateColMinWidth(colDef);
    var maxColWidth = this.calculateColMaxWidth(colDef);
    var width;
    var colDefWidth = attrToNumber(colDef.width);
    var colDefInitialWidth = attrToNumber(colDef.initialWidth);
    if (colDefWidth != null) {
      width = colDefWidth;
    } else if (colDefInitialWidth != null) {
      width = colDefInitialWidth;
    } else {
      width = this.gridOptionsWrapper.getColWidth();
    }
    return Math.max(Math.min(width, maxColWidth), minColWidth);
  };
  ColumnUtils2.prototype.getOriginalPathForColumn = function(column, originalBalancedTree) {
    var result = [];
    var found = false;
    var recursePath = function(balancedColumnTree, dept) {
      for (var i2 = 0; i2 < balancedColumnTree.length; i2++) {
        if (found) {
          return;
        }
        var node = balancedColumnTree[i2];
        if (node instanceof ProvidedColumnGroup) {
          var nextNode = node;
          recursePath(nextNode.getChildren(), dept + 1);
          result[dept] = node;
        } else if (node === column) {
          found = true;
        }
      }
    };
    recursePath(originalBalancedTree, 0);
    return found ? result : null;
  };
  ColumnUtils2.prototype.depthFirstOriginalTreeSearch = function(parent, tree, callback) {
    var _this = this;
    if (!tree) {
      return;
    }
    tree.forEach(function(child) {
      if (child instanceof ProvidedColumnGroup) {
        _this.depthFirstOriginalTreeSearch(child, child.getChildren(), callback);
      }
      callback(child, parent);
    });
  };
  ColumnUtils2.prototype.depthFirstAllColumnTreeSearch = function(tree, callback) {
    var _this = this;
    if (!tree) {
      return;
    }
    tree.forEach(function(child) {
      if (child instanceof ColumnGroup) {
        _this.depthFirstAllColumnTreeSearch(child.getChildren(), callback);
      }
      callback(child);
    });
  };
  ColumnUtils2.prototype.depthFirstDisplayedColumnTreeSearch = function(tree, callback) {
    var _this = this;
    if (!tree) {
      return;
    }
    tree.forEach(function(child) {
      if (child instanceof ColumnGroup) {
        _this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(), callback);
      }
      callback(child);
    });
  };
  ColumnUtils2 = __decorate$2t([
    Bean("columnUtils")
  ], ColumnUtils2);
  return ColumnUtils2;
}(BeanStub);
var __extends$2R = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2s = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DisplayedGroupCreator = function(_super) {
  __extends$2R(DisplayedGroupCreator2, _super);
  function DisplayedGroupCreator2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  DisplayedGroupCreator2.prototype.createDisplayedGroups = function(sortedVisibleColumns, balancedColumnTree, groupInstanceIdCreator, pinned, oldDisplayedGroups) {
    var _this = this;
    var result = [];
    var previousRealPath;
    var previousOriginalPath;
    var oldColumnsMapped = this.mapOldGroupsById(oldDisplayedGroups);
    sortedVisibleColumns.forEach(function(currentColumn) {
      var currentOriginalPath = _this.getOriginalPathForColumn(balancedColumnTree, currentColumn);
      var currentRealPath = [];
      var firstColumn = !previousOriginalPath;
      for (var i2 = 0; i2 < currentOriginalPath.length; i2++) {
        if (firstColumn || currentOriginalPath[i2] !== previousOriginalPath[i2]) {
          var newGroup = _this.createColumnGroup(currentOriginalPath[i2], groupInstanceIdCreator, oldColumnsMapped, pinned);
          currentRealPath[i2] = newGroup;
          if (i2 == 0) {
            result.push(newGroup);
          } else {
            currentRealPath[i2 - 1].addChild(newGroup);
          }
        } else {
          currentRealPath[i2] = previousRealPath[i2];
        }
      }
      var noColumnGroups = currentRealPath.length === 0;
      if (noColumnGroups) {
        result.push(currentColumn);
      } else {
        var leafGroup = last(currentRealPath);
        leafGroup.addChild(currentColumn);
      }
      previousRealPath = currentRealPath;
      previousOriginalPath = currentOriginalPath;
    });
    this.setupParentsIntoColumns(result, null);
    return result;
  };
  DisplayedGroupCreator2.prototype.createColumnGroup = function(providedGroup, groupInstanceIdCreator, oldColumnsMapped, pinned) {
    var groupId = providedGroup.getGroupId();
    var instanceId = groupInstanceIdCreator.getInstanceIdForKey(groupId);
    var uniqueId = ColumnGroup.createUniqueId(groupId, instanceId);
    var columnGroup = oldColumnsMapped[uniqueId];
    if (columnGroup && columnGroup.getProvidedColumnGroup() !== providedGroup) {
      columnGroup = null;
    }
    if (exists(columnGroup)) {
      columnGroup.reset();
    } else {
      columnGroup = new ColumnGroup(providedGroup, groupId, instanceId, pinned);
      this.context.createBean(columnGroup);
    }
    return columnGroup;
  };
  DisplayedGroupCreator2.prototype.mapOldGroupsById = function(displayedGroups) {
    var result = {};
    var recursive = function(columnsOrGroups) {
      columnsOrGroups.forEach(function(columnOrGroup) {
        if (columnOrGroup instanceof ColumnGroup) {
          var columnGroup = columnOrGroup;
          result[columnOrGroup.getUniqueId()] = columnGroup;
          recursive(columnGroup.getChildren());
        }
      });
    };
    if (displayedGroups) {
      recursive(displayedGroups);
    }
    return result;
  };
  DisplayedGroupCreator2.prototype.setupParentsIntoColumns = function(columnsOrGroups, parent) {
    var _this = this;
    columnsOrGroups.forEach(function(columnsOrGroup) {
      columnsOrGroup.setParent(parent);
      if (columnsOrGroup instanceof ColumnGroup) {
        var columnGroup = columnsOrGroup;
        _this.setupParentsIntoColumns(columnGroup.getChildren(), columnGroup);
      }
    });
  };
  DisplayedGroupCreator2.prototype.getOriginalPathForColumn = function(balancedColumnTree, column) {
    var result = [];
    var found = false;
    var recursePath = function(columnTree, dept) {
      for (var i2 = 0; i2 < columnTree.length; i2++) {
        if (found) {
          return;
        }
        var node = columnTree[i2];
        if (node instanceof ProvidedColumnGroup) {
          recursePath(node.getChildren(), dept + 1);
          result[dept] = node;
        } else if (node === column) {
          found = true;
        }
      }
    };
    recursePath(balancedColumnTree, 0);
    if (found) {
      return result;
    }
    console.warn("AG Grid: could not get path");
    return null;
  };
  DisplayedGroupCreator2 = __decorate$2s([
    Bean("displayedGroupCreator")
  ], DisplayedGroupCreator2);
  return DisplayedGroupCreator2;
}(BeanStub);
var __extends$2Q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2r = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgStackComponentsRegistry = function(_super) {
  __extends$2Q(AgStackComponentsRegistry2, _super);
  function AgStackComponentsRegistry2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.componentsMappedByName = {};
    return _this;
  }
  AgStackComponentsRegistry2.prototype.setupComponents = function(components) {
    var _this = this;
    if (components) {
      components.forEach(function(componentMeta) {
        return _this.addComponent(componentMeta);
      });
    }
  };
  AgStackComponentsRegistry2.prototype.addComponent = function(componentMeta) {
    var classEscaped = componentMeta.componentName.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
    var classUpperCase = classEscaped.toUpperCase();
    this.componentsMappedByName[classUpperCase] = componentMeta.componentClass;
  };
  AgStackComponentsRegistry2.prototype.getComponentClass = function(htmlTag) {
    return this.componentsMappedByName[htmlTag];
  };
  AgStackComponentsRegistry2 = __decorate$2r([
    Bean("agStackComponentsRegistry")
  ], AgStackComponentsRegistry2);
  return AgStackComponentsRegistry2;
}(BeanStub);
var __read$j = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var Color = function() {
  function Color2(r, g, b2, a3) {
    if (a3 === void 0) {
      a3 = 1;
    }
    this.r = Math.min(1, Math.max(0, r || 0));
    this.g = Math.min(1, Math.max(0, g || 0));
    this.b = Math.min(1, Math.max(0, b2 || 0));
    this.a = Math.min(1, Math.max(0, a3 || 0));
  }
  Color2.fromString = function(str) {
    if (str.indexOf("#") >= 0) {
      return Color2.fromHexString(str);
    }
    var hex = Color2.nameToHex[str];
    if (hex) {
      return Color2.fromHexString(hex);
    }
    if (str.indexOf("rgb") >= 0) {
      return Color2.fromRgbaString(str);
    }
    throw new Error("Invalid color string: '" + str + "'");
  };
  Color2.parseHex = function(input2) {
    input2 = input2.replace(/ /g, "").slice(1);
    var parts;
    switch (input2.length) {
      case 6:
      case 8:
        parts = [];
        for (var i2 = 0; i2 < input2.length; i2 += 2) {
          parts.push(parseInt("" + input2[i2] + input2[i2 + 1], 16));
        }
        break;
      case 3:
      case 4:
        parts = input2.split("").map(function(p) {
          return parseInt(p, 16);
        }).map(function(p) {
          return p + p * 16;
        });
        break;
    }
    if (parts.length >= 3) {
      if (parts.every(function(p) {
        return p >= 0;
      })) {
        if (parts.length === 3) {
          parts.push(255);
        }
        return parts;
      }
    }
  };
  Color2.fromHexString = function(str) {
    var values2 = Color2.parseHex(str);
    if (values2) {
      var _a2 = __read$j(values2, 4), r = _a2[0], g = _a2[1], b2 = _a2[2], a3 = _a2[3];
      return new Color2(r / 255, g / 255, b2 / 255, a3 / 255);
    }
    throw new Error("Malformed hexadecimal color string: '" + str + "'");
  };
  Color2.stringToRgba = function(str) {
    var _a2 = __read$j([NaN, NaN], 2), po2 = _a2[0], pc = _a2[1];
    for (var i2 = 0; i2 < str.length; i2++) {
      var c2 = str[i2];
      if (!po2 && c2 === "(") {
        po2 = i2;
      } else if (c2 === ")") {
        pc = i2;
        break;
      }
    }
    var contents = po2 && pc && str.substring(po2 + 1, pc);
    if (!contents) {
      return;
    }
    var parts = contents.split(",");
    var rgba = [];
    for (var i2 = 0; i2 < parts.length; i2++) {
      var part = parts[i2];
      var value = parseFloat(part);
      if (isNaN(value)) {
        return;
      }
      if (part.indexOf("%") >= 0) {
        value = Math.max(0, Math.min(100, value));
        value /= 100;
      } else {
        if (i2 === 3) {
          value = Math.max(0, Math.min(1, value));
        } else {
          value = Math.max(0, Math.min(255, value));
          value /= 255;
        }
      }
      rgba.push(value);
    }
    return rgba;
  };
  Color2.fromRgbaString = function(str) {
    var rgba = Color2.stringToRgba(str);
    if (rgba) {
      if (rgba.length === 3) {
        return new Color2(rgba[0], rgba[1], rgba[2]);
      } else if (rgba.length === 4) {
        return new Color2(rgba[0], rgba[1], rgba[2], rgba[3]);
      }
    }
    throw new Error("Malformed rgb/rgba color string: '" + str + "'");
  };
  Color2.fromArray = function(arr) {
    if (arr.length === 4) {
      return new Color2(arr[0], arr[1], arr[2], arr[3]);
    }
    if (arr.length === 3) {
      return new Color2(arr[0], arr[1], arr[2]);
    }
    throw new Error("The given array should contain 3 or 4 color components (numbers).");
  };
  Color2.fromHSB = function(h4, s3, b2, alpha) {
    if (alpha === void 0) {
      alpha = 1;
    }
    var rgb = Color2.HSBtoRGB(h4, s3, b2);
    return new Color2(rgb[0], rgb[1], rgb[2], alpha);
  };
  Color2.padHex = function(str) {
    return str.length === 1 ? "0" + str : str;
  };
  Color2.prototype.toHexString = function() {
    var hex = "#" + Color2.padHex(Math.round(this.r * 255).toString(16)) + Color2.padHex(Math.round(this.g * 255).toString(16)) + Color2.padHex(Math.round(this.b * 255).toString(16));
    if (this.a < 1) {
      hex += Color2.padHex(Math.round(this.a * 255).toString(16));
    }
    return hex;
  };
  Color2.prototype.toRgbaString = function(fractionDigits) {
    if (fractionDigits === void 0) {
      fractionDigits = 3;
    }
    var components = [
      Math.round(this.r * 255),
      Math.round(this.g * 255),
      Math.round(this.b * 255)
    ];
    var k2 = Math.pow(10, fractionDigits);
    if (this.a !== 1) {
      components.push(Math.round(this.a * k2) / k2);
      return "rgba(" + components.join(", ") + ")";
    }
    return "rgb(" + components.join(", ") + ")";
  };
  Color2.prototype.toString = function() {
    if (this.a === 1) {
      return this.toHexString();
    }
    return this.toRgbaString();
  };
  Color2.prototype.toHSB = function() {
    return Color2.RGBtoHSB(this.r, this.g, this.b);
  };
  Color2.RGBtoHSB = function(r, g, b2) {
    var min = Math.min(r, g, b2);
    var max = Math.max(r, g, b2);
    var S3 = max !== 0 ? (max - min) / max : 0;
    var H4 = NaN;
    if (min !== max) {
      var delta = max - min;
      var rc = (max - r) / delta;
      var gc = (max - g) / delta;
      var bc = (max - b2) / delta;
      if (r === max) {
        H4 = bc - gc;
      } else if (g === max) {
        H4 = 2 + rc - bc;
      } else {
        H4 = 4 + gc - rc;
      }
      H4 /= 6;
      if (H4 < 0) {
        H4 = H4 + 1;
      }
    }
    return [H4 * 360, S3, max];
  };
  Color2.HSBtoRGB = function(H4, S3, B3) {
    if (isNaN(H4)) {
      H4 = 0;
    }
    H4 = (H4 % 360 + 360) % 360 / 360;
    var r = 0;
    var g = 0;
    var b2 = 0;
    if (S3 === 0) {
      r = g = b2 = B3;
    } else {
      var h4 = (H4 - Math.floor(H4)) * 6;
      var f = h4 - Math.floor(h4);
      var p = B3 * (1 - S3);
      var q3 = B3 * (1 - S3 * f);
      var t2 = B3 * (1 - S3 * (1 - f));
      switch (h4 >> 0) {
        case 0:
          r = B3;
          g = t2;
          b2 = p;
          break;
        case 1:
          r = q3;
          g = B3;
          b2 = p;
          break;
        case 2:
          r = p;
          g = B3;
          b2 = t2;
          break;
        case 3:
          r = p;
          g = q3;
          b2 = B3;
          break;
        case 4:
          r = t2;
          g = p;
          b2 = B3;
          break;
        case 5:
          r = B3;
          g = p;
          b2 = q3;
          break;
      }
    }
    return [r, g, b2];
  };
  Color2.prototype.derive = function(hueShift, saturationFactor, brightnessFactor, opacityFactor) {
    var hsb = Color2.RGBtoHSB(this.r, this.g, this.b);
    var b2 = hsb[2];
    if (b2 == 0 && brightnessFactor > 1) {
      b2 = 0.05;
    }
    var h4 = ((hsb[0] + hueShift) % 360 + 360) % 360;
    var s3 = Math.max(Math.min(hsb[1] * saturationFactor, 1), 0);
    b2 = Math.max(Math.min(b2 * brightnessFactor, 1), 0);
    var a3 = Math.max(Math.min(this.a * opacityFactor, 1), 0);
    var rgba = Color2.HSBtoRGB(h4, s3, b2);
    rgba.push(a3);
    return Color2.fromArray(rgba);
  };
  Color2.prototype.brighter = function() {
    return this.derive(0, 1, 1 / 0.7, 1);
  };
  Color2.prototype.darker = function() {
    return this.derive(0, 1, 0.7, 1);
  };
  Color2.nameToHex = Object.freeze({
    aliceblue: "#F0F8FF",
    antiquewhite: "#FAEBD7",
    aqua: "#00FFFF",
    aquamarine: "#7FFFD4",
    azure: "#F0FFFF",
    beige: "#F5F5DC",
    bisque: "#FFE4C4",
    black: "#000000",
    blanchedalmond: "#FFEBCD",
    blue: "#0000FF",
    blueviolet: "#8A2BE2",
    brown: "#A52A2A",
    burlywood: "#DEB887",
    cadetblue: "#5F9EA0",
    chartreuse: "#7FFF00",
    chocolate: "#D2691E",
    coral: "#FF7F50",
    cornflowerblue: "#6495ED",
    cornsilk: "#FFF8DC",
    crimson: "#DC143C",
    cyan: "#00FFFF",
    darkblue: "#00008B",
    darkcyan: "#008B8B",
    darkgoldenrod: "#B8860B",
    darkgray: "#A9A9A9",
    darkgreen: "#006400",
    darkgrey: "#A9A9A9",
    darkkhaki: "#BDB76B",
    darkmagenta: "#8B008B",
    darkolivegreen: "#556B2F",
    darkorange: "#FF8C00",
    darkorchid: "#9932CC",
    darkred: "#8B0000",
    darksalmon: "#E9967A",
    darkseagreen: "#8FBC8F",
    darkslateblue: "#483D8B",
    darkslategray: "#2F4F4F",
    darkslategrey: "#2F4F4F",
    darkturquoise: "#00CED1",
    darkviolet: "#9400D3",
    deeppink: "#FF1493",
    deepskyblue: "#00BFFF",
    dimgray: "#696969",
    dimgrey: "#696969",
    dodgerblue: "#1E90FF",
    firebrick: "#B22222",
    floralwhite: "#FFFAF0",
    forestgreen: "#228B22",
    fuchsia: "#FF00FF",
    gainsboro: "#DCDCDC",
    ghostwhite: "#F8F8FF",
    gold: "#FFD700",
    goldenrod: "#DAA520",
    gray: "#808080",
    green: "#008000",
    greenyellow: "#ADFF2F",
    grey: "#808080",
    honeydew: "#F0FFF0",
    hotpink: "#FF69B4",
    indianred: "#CD5C5C",
    indigo: "#4B0082",
    ivory: "#FFFFF0",
    khaki: "#F0E68C",
    lavender: "#E6E6FA",
    lavenderblush: "#FFF0F5",
    lawngreen: "#7CFC00",
    lemonchiffon: "#FFFACD",
    lightblue: "#ADD8E6",
    lightcoral: "#F08080",
    lightcyan: "#E0FFFF",
    lightgoldenrodyellow: "#FAFAD2",
    lightgray: "#D3D3D3",
    lightgreen: "#90EE90",
    lightgrey: "#D3D3D3",
    lightpink: "#FFB6C1",
    lightsalmon: "#FFA07A",
    lightseagreen: "#20B2AA",
    lightskyblue: "#87CEFA",
    lightslategray: "#778899",
    lightslategrey: "#778899",
    lightsteelblue: "#B0C4DE",
    lightyellow: "#FFFFE0",
    lime: "#00FF00",
    limegreen: "#32CD32",
    linen: "#FAF0E6",
    magenta: "#FF00FF",
    maroon: "#800000",
    mediumaquamarine: "#66CDAA",
    mediumblue: "#0000CD",
    mediumorchid: "#BA55D3",
    mediumpurple: "#9370DB",
    mediumseagreen: "#3CB371",
    mediumslateblue: "#7B68EE",
    mediumspringgreen: "#00FA9A",
    mediumturquoise: "#48D1CC",
    mediumvioletred: "#C71585",
    midnightblue: "#191970",
    mintcream: "#F5FFFA",
    mistyrose: "#FFE4E1",
    moccasin: "#FFE4B5",
    navajowhite: "#FFDEAD",
    navy: "#000080",
    oldlace: "#FDF5E6",
    olive: "#808000",
    olivedrab: "#6B8E23",
    orange: "#FFA500",
    orangered: "#FF4500",
    orchid: "#DA70D6",
    palegoldenrod: "#EEE8AA",
    palegreen: "#98FB98",
    paleturquoise: "#AFEEEE",
    palevioletred: "#DB7093",
    papayawhip: "#FFEFD5",
    peachpuff: "#FFDAB9",
    peru: "#CD853F",
    pink: "#FFC0CB",
    plum: "#DDA0DD",
    powderblue: "#B0E0E6",
    purple: "#800080",
    rebeccapurple: "#663399",
    red: "#FF0000",
    rosybrown: "#BC8F8F",
    royalblue: "#4169E1",
    saddlebrown: "#8B4513",
    salmon: "#FA8072",
    sandybrown: "#F4A460",
    seagreen: "#2E8B57",
    seashell: "#FFF5EE",
    sienna: "#A0522D",
    silver: "#C0C0C0",
    skyblue: "#87CEEB",
    slateblue: "#6A5ACD",
    slategray: "#708090",
    slategrey: "#708090",
    snow: "#FFFAFA",
    springgreen: "#00FF7F",
    steelblue: "#4682B4",
    tan: "#D2B48C",
    teal: "#008080",
    thistle: "#D8BFD8",
    tomato: "#FF6347",
    turquoise: "#40E0D0",
    violet: "#EE82EE",
    wheat: "#F5DEB3",
    white: "#FFFFFF",
    whitesmoke: "#F5F5F5",
    yellow: "#FFFF00",
    yellowgreen: "#9ACD32"
  });
  return Color2;
}();
function stringToArray(strData, delimiter) {
  if (delimiter === void 0) {
    delimiter = ",";
  }
  var data = [];
  var isNewline = function(char) {
    return char === "\r" || char === "\n";
  };
  var insideQuotedField = false;
  if (strData === "") {
    return [[""]];
  }
  var _loop_1 = function(row2, column2, position2) {
    var previousChar = strData[position2 - 1];
    var currentChar = strData[position2];
    var nextChar = strData[position2 + 1];
    var ensureDataExists = function() {
      if (!data[row2]) {
        data[row2] = [];
      }
      if (!data[row2][column2]) {
        data[row2][column2] = "";
      }
    };
    ensureDataExists();
    if (currentChar === '"') {
      if (insideQuotedField) {
        if (nextChar === '"') {
          data[row2][column2] += '"';
          position2++;
        } else {
          insideQuotedField = false;
        }
        return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
      } else if (previousChar === void 0 || previousChar === delimiter || isNewline(previousChar)) {
        insideQuotedField = true;
        return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
      }
    }
    if (!insideQuotedField) {
      if (currentChar === delimiter) {
        column2++;
        ensureDataExists();
        return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
      } else if (isNewline(currentChar)) {
        column2 = 0;
        row2++;
        ensureDataExists();
        if (currentChar === "\r" && nextChar === "\n") {
          position2++;
        }
        return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
      }
    }
    data[row2][column2] += currentChar;
    out_row_1 = row2;
    out_column_1 = column2;
    out_position_1 = position2;
  };
  var out_row_1, out_column_1, out_position_1;
  for (var row = 0, column = 0, position = 0; position < strData.length; position++) {
    _loop_1(row, column, position);
    row = out_row_1;
    column = out_column_1;
    position = out_position_1;
  }
  return data;
}
var CsvUtils = Object.freeze({
  __proto__: null,
  stringToArray
});
var rtlNegativeScroll;
function radioCssClass(element, elementClass, otherElementClass) {
  var parent = element.parentElement;
  var sibling = parent && parent.firstChild;
  while (sibling) {
    if (elementClass) {
      sibling.classList.toggle(elementClass, sibling === element);
    }
    if (otherElementClass) {
      sibling.classList.toggle(otherElementClass, sibling !== element);
    }
    sibling = sibling.nextSibling;
  }
}
function isFocusableFormField(element) {
  var matches = Element.prototype.matches || Element.prototype.msMatchesSelector;
  var isFocusable = matches.call(element, Constants.INPUT_SELECTOR);
  var isNotFocusable = matches.call(element, Constants.FOCUSABLE_EXCLUDE);
  var isElementVisible = isVisible(element);
  var focusable = isFocusable && !isNotFocusable && isElementVisible;
  return focusable;
}
function setDisplayed(element, displayed) {
  element.classList.toggle("ag-hidden", !displayed);
}
function setVisible(element, visible) {
  element.classList.toggle("ag-invisible", !visible);
}
function setDisabled(element, disabled) {
  var attributeName = "disabled";
  var addOrRemoveDisabledAttribute = disabled ? function(e2) {
    return e2.setAttribute(attributeName, "");
  } : function(e2) {
    return e2.removeAttribute(attributeName);
  };
  addOrRemoveDisabledAttribute(element);
  nodeListForEach(element.querySelectorAll("input"), function(input2) {
    return addOrRemoveDisabledAttribute(input2);
  });
}
function isElementChildOfClass(element, cls, maxNest) {
  var counter = 0;
  while (element) {
    if (element.classList.contains(cls)) {
      return true;
    }
    element = element.parentElement;
    if (typeof maxNest == "number") {
      if (++counter > maxNest) {
        break;
      }
    } else if (element === maxNest) {
      break;
    }
  }
  return false;
}
function getElementSize(el2) {
  var _a2 = window.getComputedStyle(el2), height = _a2.height, width = _a2.width, paddingTop = _a2.paddingTop, paddingRight = _a2.paddingRight, paddingBottom = _a2.paddingBottom, paddingLeft = _a2.paddingLeft, marginTop = _a2.marginTop, marginRight = _a2.marginRight, marginBottom = _a2.marginBottom, marginLeft = _a2.marginLeft, boxSizing = _a2.boxSizing;
  return {
    height: parseFloat(height),
    width: parseFloat(width),
    paddingTop: parseFloat(paddingTop),
    paddingRight: parseFloat(paddingRight),
    paddingBottom: parseFloat(paddingBottom),
    paddingLeft: parseFloat(paddingLeft),
    marginTop: parseFloat(marginTop),
    marginRight: parseFloat(marginRight),
    marginBottom: parseFloat(marginBottom),
    marginLeft: parseFloat(marginLeft),
    boxSizing
  };
}
function getInnerHeight(el2) {
  var size = getElementSize(el2);
  if (size.boxSizing === "border-box") {
    return size.height - size.paddingTop - size.paddingBottom;
  }
  return size.height;
}
function getInnerWidth(el2) {
  var size = getElementSize(el2);
  if (size.boxSizing === "border-box") {
    return size.width - size.paddingLeft - size.paddingRight;
  }
  return size.width;
}
function getAbsoluteHeight(el2) {
  var size = getElementSize(el2);
  var marginRight = size.marginBottom + size.marginTop;
  return Math.ceil(el2.offsetHeight + marginRight);
}
function getAbsoluteWidth(el2) {
  var size = getElementSize(el2);
  var marginWidth = size.marginLeft + size.marginRight;
  return Math.ceil(el2.offsetWidth + marginWidth);
}
function isRtlNegativeScroll() {
  if (typeof rtlNegativeScroll === "boolean") {
    return rtlNegativeScroll;
  }
  var template = document.createElement("div");
  template.style.direction = "rtl";
  template.style.width = "1px";
  template.style.height = "1px";
  template.style.position = "fixed";
  template.style.top = "0px";
  template.style.overflow = "hidden";
  template.dir = "rtl";
  template.innerHTML = '<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>';
  document.body.appendChild(template);
  template.scrollLeft = 1;
  rtlNegativeScroll = Math.floor(template.scrollLeft) === 0;
  document.body.removeChild(template);
  return rtlNegativeScroll;
}
function getScrollLeft(element, rtl) {
  var scrollLeft = element.scrollLeft;
  if (rtl) {
    scrollLeft = Math.abs(scrollLeft);
    if (isBrowserChrome() && !isRtlNegativeScroll()) {
      scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;
    }
  }
  return scrollLeft;
}
function setScrollLeft(element, value, rtl) {
  if (rtl) {
    if (isRtlNegativeScroll()) {
      value *= -1;
    } else if (isBrowserSafari() || isBrowserChrome()) {
      value = element.scrollWidth - element.clientWidth - value;
    }
  }
  element.scrollLeft = value;
}
function clearElement(el2) {
  while (el2 && el2.firstChild) {
    el2.removeChild(el2.firstChild);
  }
}
function removeElement(parent, cssSelector) {
  removeFromParent(parent.querySelector(cssSelector));
}
function removeFromParent(node) {
  if (node && node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
function isVisible(element) {
  return element.offsetParent !== null;
}
function loadTemplate(template) {
  var tempDiv = document.createElement("div");
  tempDiv.innerHTML = (template || "").trim();
  return tempDiv.firstChild;
}
function appendHtml(eContainer, htmlTemplate) {
  if (eContainer.lastChild) {
    eContainer.insertAdjacentHTML("afterbegin", htmlTemplate);
  } else {
    eContainer.innerHTML = htmlTemplate;
  }
}
function getElementAttribute(element, attributeName) {
  if (element.attributes && element.attributes[attributeName]) {
    var attribute = element.attributes[attributeName];
    return attribute.value;
  }
  return null;
}
function offsetHeight(element) {
  return element && element.clientHeight ? element.clientHeight : 0;
}
function offsetWidth(element) {
  return element && element.clientWidth ? element.clientWidth : 0;
}
function ensureDomOrder(eContainer, eChild, eChildBefore) {
  if (eChildBefore && eChildBefore.nextSibling === eChild) {
    return;
  }
  var focusedEl = document.activeElement;
  var eChildHasFocus = eChild.contains(focusedEl);
  if (eChildBefore) {
    if (eChildBefore.nextSibling) {
      eContainer.insertBefore(eChild, eChildBefore.nextSibling);
    } else {
      eContainer.appendChild(eChild);
    }
  } else {
    if (eContainer.firstChild && eContainer.firstChild !== eChild) {
      eContainer.insertAdjacentElement("afterbegin", eChild);
    }
  }
  if (eChildHasFocus && focusedEl && browserSupportsPreventScroll()) {
    focusedEl.focus({ preventScroll: true });
  }
}
function setDomChildOrder(eContainer, orderedChildren) {
  for (var i2 = 0; i2 < orderedChildren.length; i2++) {
    var correctCellAtIndex = orderedChildren[i2];
    var actualCellAtIndex = eContainer.children[i2];
    if (actualCellAtIndex !== correctCellAtIndex) {
      eContainer.insertBefore(correctCellAtIndex, actualCellAtIndex);
    }
  }
}
function insertWithDomOrder(eContainer, eToInsert, eChildBefore) {
  if (eChildBefore) {
    eChildBefore.insertAdjacentElement("afterend", eToInsert);
  } else {
    if (eContainer.firstChild) {
      eContainer.insertAdjacentElement("afterbegin", eToInsert);
    } else {
      eContainer.appendChild(eToInsert);
    }
  }
}
function prependDC(parent, documentFragment) {
  if (exists(parent.firstChild)) {
    parent.insertBefore(documentFragment, parent.firstChild);
  } else {
    parent.appendChild(documentFragment);
  }
}
function addStylesToElement(eElement, styles) {
  if (!styles) {
    return;
  }
  Object.keys(styles).forEach(function(key) {
    var keyCamelCase = hyphenToCamelCase(key);
    if (keyCamelCase) {
      eElement.style[keyCamelCase] = styles[key];
    }
  });
}
function isHorizontalScrollShowing(element) {
  return element.clientWidth < element.scrollWidth;
}
function isVerticalScrollShowing(element) {
  return element.clientHeight < element.scrollHeight;
}
function setElementWidth(element, width) {
  if (width === "flex") {
    element.style.removeProperty("width");
    element.style.removeProperty("minWidth");
    element.style.removeProperty("maxWidth");
    element.style.flex = "1 1 auto";
  } else {
    setFixedWidth(element, width);
  }
}
function setFixedWidth(element, width) {
  width = formatSize(width);
  element.style.width = width.toString();
  element.style.maxWidth = width.toString();
  element.style.minWidth = width.toString();
}
function setElementHeight(element, height) {
  if (height === "flex") {
    element.style.removeProperty("height");
    element.style.removeProperty("minHeight");
    element.style.removeProperty("maxHeight");
    element.style.flex = "1 1 auto";
  } else {
    setFixedHeight(element, height);
  }
}
function setFixedHeight(element, height) {
  height = formatSize(height);
  element.style.height = height.toString();
  element.style.maxHeight = height.toString();
  element.style.minHeight = height.toString();
}
function formatSize(size) {
  if (typeof size === "number") {
    return size + "px";
  }
  return size;
}
function isNode(o) {
  return typeof Node === "function" ? o instanceof Node : o && typeof o === "object" && typeof o.nodeType === "number" && typeof o.nodeName === "string";
}
function isElement(o) {
  return typeof HTMLElement === "function" ? o instanceof HTMLElement : o && isNonNullObject(o) && o.nodeType === 1 && typeof o.nodeName === "string";
}
function isNodeOrElement(o) {
  return isNode(o) || isElement(o);
}
function copyNodeList(nodeList2) {
  if (nodeList2 == null) {
    return [];
  }
  var result = [];
  nodeListForEach(nodeList2, function(node) {
    return result.push(node);
  });
  return result;
}
function iterateNamedNodeMap(map, callback) {
  if (!map) {
    return;
  }
  for (var i2 = 0; i2 < map.length; i2++) {
    var attr = map[i2];
    callback(attr.name, attr.value);
  }
}
function setCheckboxState(eCheckbox, state) {
  if (typeof state === "boolean") {
    eCheckbox.checked = state;
    eCheckbox.indeterminate = false;
  } else {
    eCheckbox.indeterminate = true;
  }
}
function addOrRemoveAttribute(element, name, value) {
  if (value == null) {
    element.removeAttribute(name);
  } else {
    element.setAttribute(name, value.toString());
  }
}
function nodeListForEach(nodeList2, action) {
  if (nodeList2 == null) {
    return;
  }
  for (var i2 = 0; i2 < nodeList2.length; i2++) {
    action(nodeList2[i2]);
  }
}
var DomUtils = Object.freeze({
  __proto__: null,
  radioCssClass,
  isFocusableFormField,
  setDisplayed,
  setVisible,
  setDisabled,
  isElementChildOfClass,
  getElementSize,
  getInnerHeight,
  getInnerWidth,
  getAbsoluteHeight,
  getAbsoluteWidth,
  isRtlNegativeScroll,
  getScrollLeft,
  setScrollLeft,
  clearElement,
  removeElement,
  removeFromParent,
  isVisible,
  loadTemplate,
  appendHtml,
  getElementAttribute,
  offsetHeight,
  offsetWidth,
  ensureDomOrder,
  setDomChildOrder,
  insertWithDomOrder,
  prependDC,
  addStylesToElement,
  isHorizontalScrollShowing,
  isVerticalScrollShowing,
  setElementWidth,
  setFixedWidth,
  setElementHeight,
  setFixedHeight,
  formatSize,
  isNode,
  isElement,
  isNodeOrElement,
  copyNodeList,
  iterateNamedNodeMap,
  setCheckboxState,
  addOrRemoveAttribute,
  nodeListForEach
});
function getNameOfClass(theClass) {
  var funcNameRegex = /function (.{1,})\(/;
  var funcAsString = theClass.toString();
  var results = funcNameRegex.exec(funcAsString);
  return results && results.length > 1 ? results[1] : "";
}
function findLineByLeastSquares(values2) {
  var len = values2.length;
  var maxDecimals = 0;
  if (len <= 1) {
    return values2;
  }
  for (var i2 = 0; i2 < values2.length; i2++) {
    var value = values2[i2];
    var splitExponent = value.toString().split("e-");
    if (splitExponent.length > 1) {
      maxDecimals = Math.max(maxDecimals, parseInt(splitExponent[1], 10));
      continue;
    }
    if (Math.floor(value) === value) {
      continue;
    }
    maxDecimals = Math.max(maxDecimals, value.toString().split(".")[1].length);
  }
  var sum_x = 0;
  var sum_y = 0;
  var sum_xy = 0;
  var sum_xx = 0;
  var y3 = 0;
  for (var x2 = 0; x2 < len; x2++) {
    y3 = values2[x2];
    sum_x += x2;
    sum_y += y3;
    sum_xx += x2 * x2;
    sum_xy += x2 * y3;
  }
  var m3 = (len * sum_xy - sum_x * sum_y) / (len * sum_xx - sum_x * sum_x);
  var b2 = sum_y / len - m3 * sum_x / len;
  var result = [];
  for (var x2 = 0; x2 <= len; x2++) {
    result.push(parseFloat((x2 * m3 + b2).toFixed(maxDecimals)));
  }
  return result;
}
function cssStyleObjectToMarkup(stylesToUse) {
  if (!stylesToUse) {
    return "";
  }
  var resParts = [];
  iterateObject(stylesToUse, function(styleKey, styleValue) {
    var styleKeyDashed = camelCaseToHyphen(styleKey);
    resParts.push(styleKeyDashed + ": " + styleValue + ";");
  });
  return resParts.join(" ");
}
function message(msg) {
  var eMessage = document.createElement("div");
  var eBox = document.querySelector("#__ag__message");
  eMessage.innerHTML = msg;
  if (!eBox) {
    var template = '<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>';
    eBox = loadTemplate(template);
    if (document.body) {
      document.body.appendChild(eBox);
    }
  }
  eBox.insertBefore(eMessage, eBox.children[0]);
}
function bindCellRendererToHtmlElement(cellRendererPromise, eTarget) {
  cellRendererPromise.then(function(cellRenderer) {
    var gui = cellRenderer.getGui();
    if (gui != null) {
      if (typeof gui === "object") {
        eTarget.appendChild(gui);
      } else {
        eTarget.innerHTML = gui;
      }
    }
  });
}
var GeneralUtils = Object.freeze({
  __proto__: null,
  getNameOfClass,
  findLineByLeastSquares,
  cssStyleObjectToMarkup,
  message,
  bindCellRendererToHtmlElement
});
function setAriaAttribute(element, attribute, value) {
  element.setAttribute(ariaAttributeName(attribute), value.toString());
}
function removeAriaAttribute(element, attribute) {
  element.removeAttribute(ariaAttributeName(attribute));
}
function ariaAttributeName(attribute) {
  return "aria-" + attribute;
}
function setAriaRole(element, role) {
  if (role) {
    element.setAttribute("role", role);
  } else {
    element.removeAttribute("role");
  }
}
function getAriaSortState(column) {
  var sort;
  if (column.isSortAscending()) {
    sort = "ascending";
  } else if (column.isSortDescending()) {
    sort = "descending";
  } else {
    sort = "none";
  }
  return sort;
}
function getAriaLevel(element) {
  return parseInt(element.getAttribute("aria-level"), 10);
}
function getAriaPosInSet(element) {
  return parseInt(element.getAttribute("aria-posinset"), 10);
}
function getAriaDescribedBy(element) {
  return element.getAttribute("aria-describedby") || "";
}
function setAriaLabel(element, label) {
  var key = "label";
  if (label) {
    setAriaAttribute(element, key, label);
  } else {
    removeAriaAttribute(element, key);
  }
}
function setAriaLabelledBy(element, labelledBy) {
  var key = "labelledby";
  if (labelledBy) {
    setAriaAttribute(element, key, labelledBy);
  } else {
    removeAriaAttribute(element, key);
  }
}
function setAriaDescription(element, description) {
  var key = "description";
  if (description) {
    setAriaAttribute(element, key, description);
  } else {
    removeAriaAttribute(element, key);
  }
}
function setAriaDescribedBy(element, describedby) {
  var key = "describedby";
  if (describedby) {
    setAriaAttribute(element, key, describedby);
  } else {
    removeAriaAttribute(element, key);
  }
}
function setAriaLevel(element, level) {
  setAriaAttribute(element, "level", level);
}
function setAriaDisabled(element, disabled) {
  setAriaAttribute(element, "disabled", disabled);
}
function setAriaExpanded(element, expanded) {
  setAriaAttribute(element, "expanded", expanded);
}
function removeAriaExpanded(element) {
  removeAriaAttribute(element, "expanded");
}
function setAriaSetSize(element, setsize) {
  setAriaAttribute(element, "setsize", setsize);
}
function setAriaPosInSet(element, position) {
  setAriaAttribute(element, "posinset", position);
}
function setAriaMultiSelectable(element, multiSelectable) {
  setAriaAttribute(element, "multiselectable", multiSelectable);
}
function setAriaRowCount(element, rowCount) {
  setAriaAttribute(element, "rowcount", rowCount);
}
function setAriaRowIndex(element, rowIndex) {
  setAriaAttribute(element, "rowindex", rowIndex);
}
function setAriaColCount(element, colCount) {
  setAriaAttribute(element, "colcount", colCount);
}
function setAriaColIndex(element, colIndex) {
  setAriaAttribute(element, "colindex", colIndex);
}
function setAriaColSpan(element, colSpan) {
  setAriaAttribute(element, "colspan", colSpan);
}
function setAriaSort(element, sort) {
  setAriaAttribute(element, "sort", sort);
}
function removeAriaSort(element) {
  removeAriaAttribute(element, "sort");
}
function setAriaSelected(element, selected) {
  var attributeName = "selected";
  if (selected) {
    setAriaAttribute(element, attributeName, selected);
  } else {
    removeAriaAttribute(element, attributeName);
  }
}
function setAriaChecked(element, checked) {
  setAriaAttribute(element, "checked", checked === void 0 ? "mixed" : checked);
}
var AriaUtils = Object.freeze({
  __proto__: null,
  setAriaRole,
  getAriaSortState,
  getAriaLevel,
  getAriaPosInSet,
  getAriaDescribedBy,
  setAriaLabel,
  setAriaLabelledBy,
  setAriaDescription,
  setAriaDescribedBy,
  setAriaLevel,
  setAriaDisabled,
  setAriaExpanded,
  removeAriaExpanded,
  setAriaSetSize,
  setAriaPosInSet,
  setAriaMultiSelectable,
  setAriaRowCount,
  setAriaRowIndex,
  setAriaColCount,
  setAriaColIndex,
  setAriaColSpan,
  setAriaSort,
  removeAriaSort,
  setAriaSelected,
  setAriaChecked
});
var __read$i = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
function serialiseDate(date2, includeTime, separator) {
  if (includeTime === void 0) {
    includeTime = true;
  }
  if (separator === void 0) {
    separator = "-";
  }
  if (!date2) {
    return null;
  }
  var serialised = [date2.getFullYear(), date2.getMonth() + 1, date2.getDate()].map(function(part) {
    return padStartWidthZeros(part, 2);
  }).join(separator);
  if (includeTime) {
    serialised += " " + [date2.getHours(), date2.getMinutes(), date2.getSeconds()].map(function(part) {
      return padStartWidthZeros(part, 2);
    }).join(":");
  }
  return serialised;
}
var calculateOrdinal = function(value) {
  if (value > 3 && value < 21) {
    return "th";
  }
  var remainder = value % 10;
  switch (remainder) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
  }
  return "th";
};
function dateToFormattedString(date2, format2) {
  if (format2 === void 0) {
    format2 = "YYYY-MM-DD";
  }
  var fullYear = padStartWidthZeros(date2.getFullYear(), 4);
  var months = [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ];
  var days = [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ];
  var replace = {
    YYYY: function() {
      return fullYear.slice(fullYear.length - 4, fullYear.length);
    },
    YY: function() {
      return fullYear.slice(fullYear.length - 2, fullYear.length);
    },
    Y: function() {
      return "" + date2.getFullYear();
    },
    MMMM: function() {
      return months[date2.getMonth()];
    },
    MMM: function() {
      return months[date2.getMonth()].slice(0, 3);
    },
    MM: function() {
      return padStartWidthZeros(date2.getMonth() + 1, 2);
    },
    Mo: function() {
      return "" + (date2.getMonth() + 1) + calculateOrdinal(date2.getMonth() + 1);
    },
    M: function() {
      return "" + (date2.getMonth() + 1);
    },
    Do: function() {
      return "" + date2.getDate() + calculateOrdinal(date2.getDate());
    },
    DD: function() {
      return padStartWidthZeros(date2.getDate(), 2);
    },
    D: function() {
      return "" + date2.getDate();
    },
    dddd: function() {
      return days[date2.getDay()];
    },
    ddd: function() {
      return days[date2.getDay()].slice(0, 3);
    },
    dd: function() {
      return days[date2.getDay()].slice(0, 2);
    },
    do: function() {
      return "" + date2.getDay() + calculateOrdinal(date2.getDay());
    },
    d: function() {
      return "" + date2.getDay();
    }
  };
  var regexp = new RegExp(Object.keys(replace).join("|"), "g");
  return format2.replace(regexp, function(match2) {
    if (match2 in replace) {
      return replace[match2]();
    }
    return match2;
  });
}
function parseDateTimeFromString(value) {
  if (!value) {
    return null;
  }
  var _a2 = __read$i(value.split(" "), 2), dateStr = _a2[0], timeStr = _a2[1];
  if (!dateStr) {
    return null;
  }
  var fields = dateStr.split("-").map(function(f) {
    return parseInt(f, 10);
  });
  if (fields.filter(function(f) {
    return !isNaN(f);
  }).length !== 3) {
    return null;
  }
  var _b = __read$i(fields, 3), year = _b[0], month = _b[1], day = _b[2];
  var date2 = new Date(year, month - 1, day);
  if (date2.getFullYear() !== year || date2.getMonth() !== month - 1 || date2.getDate() !== day) {
    return null;
  }
  if (!timeStr || timeStr === "00:00:00") {
    return date2;
  }
  var _c = __read$i(timeStr.split(":").map(function(part) {
    return parseInt(part, 10);
  }), 3), hours = _c[0], minutes = _c[1], seconds = _c[2];
  if (hours >= 0 && hours < 24) {
    date2.setHours(hours);
  }
  if (minutes >= 0 && minutes < 60) {
    date2.setMinutes(minutes);
  }
  if (seconds >= 0 && seconds < 60) {
    date2.setSeconds(seconds);
  }
  return date2;
}
var DateUtils = Object.freeze({
  __proto__: null,
  serialiseDate,
  dateToFormattedString,
  parseDateTimeFromString
});
var iconNameClassMap = {
  columnGroupOpened: "expanded",
  columnGroupClosed: "contracted",
  columnSelectClosed: "tree-closed",
  columnSelectOpen: "tree-open",
  columnSelectIndeterminate: "tree-indeterminate",
  columnMovePin: "pin",
  columnMoveHide: "eye-slash",
  columnMoveMove: "arrows",
  columnMoveLeft: "left",
  columnMoveRight: "right",
  columnMoveGroup: "group",
  columnMoveValue: "aggregation",
  columnMovePivot: "pivot",
  dropNotAllowed: "not-allowed",
  groupContracted: "tree-closed",
  groupExpanded: "tree-open",
  chart: "chart",
  close: "cross",
  cancel: "cancel",
  check: "tick",
  first: "first",
  previous: "previous",
  next: "next",
  last: "last",
  linked: "linked",
  unlinked: "unlinked",
  colorPicker: "color-picker",
  groupLoading: "loading",
  menu: "menu",
  filter: "filter",
  columns: "columns",
  maximize: "maximize",
  minimize: "minimize",
  menuPin: "pin",
  menuValue: "aggregation",
  menuAddRowGroup: "group",
  menuRemoveRowGroup: "group",
  clipboardCopy: "copy",
  clipboardPaste: "paste",
  pivotPanel: "pivot",
  rowGroupPanel: "group",
  valuePanel: "aggregation",
  columnDrag: "grip",
  rowDrag: "grip",
  save: "save",
  csvExport: "csv",
  excelExport: "excel",
  smallDown: "small-down",
  smallLeft: "small-left",
  smallRight: "small-right",
  smallUp: "small-up",
  sortAscending: "asc",
  sortDescending: "desc",
  sortUnSort: "none"
};
function createIcon(iconName, gridOptionsWrapper, column) {
  var iconContents = createIconNoSpan(iconName, gridOptionsWrapper, column);
  if (iconContents && iconContents.className.indexOf("ag-icon") > -1) {
    return iconContents;
  }
  var eResult = document.createElement("span");
  eResult.appendChild(iconContents);
  return eResult;
}
function createIconNoSpan(iconName, gridOptionsWrapper, column, forceCreate) {
  var userProvidedIcon = null;
  var icons = column && column.getColDef().icons;
  if (icons) {
    userProvidedIcon = icons[iconName];
  }
  if (gridOptionsWrapper && !userProvidedIcon) {
    var optionsIcons = gridOptionsWrapper.getIcons();
    if (optionsIcons) {
      userProvidedIcon = optionsIcons[iconName];
    }
  }
  if (userProvidedIcon) {
    var rendererResult = void 0;
    if (typeof userProvidedIcon === "function") {
      rendererResult = userProvidedIcon();
    } else if (typeof userProvidedIcon === "string") {
      rendererResult = userProvidedIcon;
    } else {
      throw new Error("icon from grid options needs to be a string or a function");
    }
    if (typeof rendererResult === "string") {
      return loadTemplate(rendererResult);
    }
    if (isNodeOrElement(rendererResult)) {
      return rendererResult;
    }
    console.warn("AG Grid: iconRenderer should return back a string or a dom object");
  } else {
    var span = document.createElement("span");
    var cssClass = iconNameClassMap[iconName];
    if (!cssClass) {
      if (!forceCreate) {
        console.warn("AG Grid: Did not find icon " + iconName);
        cssClass = "";
      } else {
        cssClass = iconName;
      }
    }
    span.setAttribute("class", "ag-icon ag-icon-" + cssClass);
    span.setAttribute("unselectable", "on");
    setAriaRole(span, "presentation");
    return span;
  }
}
var IconUtils = Object.freeze({
  __proto__: null,
  iconNameClassMap,
  createIcon,
  createIconNoSpan
});
var KeyCode = function() {
  function KeyCode2() {
  }
  KeyCode2.BACKSPACE = "Backspace";
  KeyCode2.TAB = "Tab";
  KeyCode2.ENTER = "Enter";
  KeyCode2.ESCAPE = "Escape";
  KeyCode2.SPACE = " ";
  KeyCode2.LEFT = "ArrowLeft";
  KeyCode2.UP = "ArrowUp";
  KeyCode2.RIGHT = "ArrowRight";
  KeyCode2.DOWN = "ArrowDown";
  KeyCode2.DELETE = "Delete";
  KeyCode2.F2 = "F2";
  KeyCode2.PAGE_UP = "PageUp";
  KeyCode2.PAGE_DOWN = "PageDown";
  KeyCode2.PAGE_HOME = "Home";
  KeyCode2.PAGE_END = "End";
  KeyCode2.A = "KeyA";
  KeyCode2.C = "KeyC";
  KeyCode2.V = "KeyV";
  KeyCode2.D = "KeyD";
  KeyCode2.Z = "KeyZ";
  KeyCode2.Y = "KeyY";
  return KeyCode2;
}();
var NUMPAD_DEL_NUMLOCK_ON_KEY = "Del";
var NUMPAD_DEL_NUMLOCK_ON_KEYCODE = 46;
var A_KEYCODE = 65;
var C_KEYCODE = 67;
var V_KEYCODE = 86;
var D_KEYCODE = 68;
var Z_KEYCODE = 90;
var Y_KEYCODE = 89;
function isEventFromPrintableCharacter(event) {
  if (event.altKey || event.ctrlKey || event.metaKey) {
    return false;
  }
  var printableCharacter = event.key.length === 1;
  var numpadDelWithNumlockOnForEdgeOrIe = isNumpadDelWithNumLockOnForEdge(event);
  return printableCharacter || numpadDelWithNumlockOnForEdgeOrIe;
}
function isUserSuppressingKeyboardEvent(gridOptionsWrapper, keyboardEvent, rowNode, column, editing) {
  var gridOptionsFunc = gridOptionsWrapper.getSuppressKeyboardEventFunc();
  var colDefFunc = column ? column.getColDef().suppressKeyboardEvent : void 0;
  if (!gridOptionsFunc && !colDefFunc) {
    return false;
  }
  var params = {
    event: keyboardEvent,
    editing,
    column,
    api: gridOptionsWrapper.getApi(),
    node: rowNode,
    data: rowNode.data,
    colDef: column.getColDef(),
    context: gridOptionsWrapper.getContext(),
    columnApi: gridOptionsWrapper.getColumnApi()
  };
  if (colDefFunc) {
    var colDefFuncResult = colDefFunc(params);
    if (colDefFuncResult) {
      return true;
    }
  }
  if (gridOptionsFunc) {
    return gridOptionsFunc(params);
  }
  return false;
}
function isUserSuppressingHeaderKeyboardEvent(gridOptionsWrapper, keyboardEvent, headerRowIndex, column) {
  var colDef = column.getDefinition();
  var colDefFunc = colDef && colDef.suppressHeaderKeyboardEvent;
  if (!exists(colDefFunc)) {
    return false;
  }
  var params = {
    api: gridOptionsWrapper.getApi(),
    columnApi: gridOptionsWrapper.getColumnApi(),
    context: gridOptionsWrapper.getContext(),
    colDef,
    column,
    headerRowIndex,
    event: keyboardEvent
  };
  return !!colDefFunc(params);
}
function isNumpadDelWithNumLockOnForEdge(event) {
  return isBrowserEdge() && event.key === NUMPAD_DEL_NUMLOCK_ON_KEY && event.charCode === NUMPAD_DEL_NUMLOCK_ON_KEYCODE;
}
function normaliseQwertyAzerty(keyboardEvent) {
  var keyCode = keyboardEvent.keyCode;
  var code;
  switch (keyCode) {
    case A_KEYCODE:
      code = KeyCode.A;
      break;
    case C_KEYCODE:
      code = KeyCode.C;
      break;
    case V_KEYCODE:
      code = KeyCode.V;
      break;
    case D_KEYCODE:
      code = KeyCode.D;
      break;
    case Z_KEYCODE:
      code = KeyCode.Z;
      break;
    case Y_KEYCODE:
      code = KeyCode.Y;
      break;
    default:
      code = keyboardEvent.code;
  }
  return code;
}
var KeyboardUtils = Object.freeze({
  __proto__: null,
  isEventFromPrintableCharacter,
  isUserSuppressingKeyboardEvent,
  isUserSuppressingHeaderKeyboardEvent,
  normaliseQwertyAzerty
});
function areEventsNear(e1, e2, pixelCount) {
  if (pixelCount === 0) {
    return false;
  }
  var diffX = Math.abs(e1.clientX - e2.clientX);
  var diffY = Math.abs(e1.clientY - e2.clientY);
  return Math.max(diffX, diffY) <= pixelCount;
}
var MouseUtils = Object.freeze({
  __proto__: null,
  areEventsNear
});
function sortRowNodesByOrder(rowNodes, rowNodeOrder) {
  if (!rowNodes) {
    return;
  }
  var comparator = function(nodeA, nodeB) {
    var positionA = rowNodeOrder[nodeA.id];
    var positionB = rowNodeOrder[nodeB.id];
    var aHasIndex = positionA !== void 0;
    var bHasIndex = positionB !== void 0;
    var bothNodesAreUserNodes = aHasIndex && bHasIndex;
    var bothNodesAreFillerNodes = !aHasIndex && !bHasIndex;
    if (bothNodesAreUserNodes) {
      return positionA - positionB;
    }
    if (bothNodesAreFillerNodes) {
      return nodeA.__objectId - nodeB.__objectId;
    }
    if (aHasIndex) {
      return 1;
    }
    return -1;
  };
  var rowNodeA;
  var rowNodeB;
  var atLeastOneOutOfOrder = false;
  for (var i2 = 0; i2 < rowNodes.length - 1; i2++) {
    rowNodeA = rowNodes[i2];
    rowNodeB = rowNodes[i2 + 1];
    if (comparator(rowNodeA, rowNodeB) > 0) {
      atLeastOneOutOfOrder = true;
      break;
    }
  }
  if (atLeastOneOutOfOrder) {
    rowNodes.sort(comparator);
  }
}
function traverseNodesWithKey(nodes, callback) {
  var keyParts = [];
  recursiveSearchNodes(nodes);
  function recursiveSearchNodes(currentNodes) {
    if (!currentNodes) {
      return;
    }
    currentNodes.forEach(function(node) {
      if (node.group || node.hasChildren()) {
        keyParts.push(node.key);
        var key = keyParts.join("|");
        callback(node, key);
        recursiveSearchNodes(node.childrenAfterGroup);
        keyParts.pop();
      }
    });
  }
}
var RowNodeUtils = Object.freeze({
  __proto__: null,
  sortRowNodesByOrder,
  traverseNodesWithKey
});
function convertToSet(list) {
  var set2 = /* @__PURE__ */ new Set();
  list.forEach(function(x2) {
    return set2.add(x2);
  });
  return set2;
}
var SetUtils = Object.freeze({
  __proto__: null,
  convertToSet
});
var __assign$e = function() {
  __assign$e = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$e.apply(this, arguments);
};
var utils = __assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e(__assign$e({}, GeneralUtils), AriaUtils), ArrayUtils), BrowserUtils), CsvUtils), DateUtils), DomUtils), EventUtils), FunctionUtils), FuzzyMatchUtils), GenericUtils), IconUtils), KeyboardUtils), MapUtils), MouseUtils), NumberUtils), ObjectUtils), RowNodeUtils), SetUtils), StringUtils);
var _ = utils;
var NumberSequence = function() {
  function NumberSequence2(initValue, step) {
    if (initValue === void 0) {
      initValue = 0;
    }
    if (step === void 0) {
      step = 1;
    }
    this.nextValue = initValue;
    this.step = step;
  }
  NumberSequence2.prototype.next = function() {
    var valToReturn = this.nextValue;
    this.nextValue += this.step;
    return valToReturn;
  };
  NumberSequence2.prototype.peek = function() {
    return this.nextValue;
  };
  NumberSequence2.prototype.skip = function(count) {
    this.nextValue += count;
  };
  return NumberSequence2;
}();
var AgPromiseStatus;
(function(AgPromiseStatus2) {
  AgPromiseStatus2[AgPromiseStatus2["IN_PROGRESS"] = 0] = "IN_PROGRESS";
  AgPromiseStatus2[AgPromiseStatus2["RESOLVED"] = 1] = "RESOLVED";
})(AgPromiseStatus || (AgPromiseStatus = {}));
var AgPromise = function() {
  function AgPromise2(callback) {
    var _this = this;
    this.status = AgPromiseStatus.IN_PROGRESS;
    this.resolution = null;
    this.waiters = [];
    callback(function(value) {
      return _this.onDone(value);
    }, function(params) {
      return _this.onReject(params);
    });
  }
  AgPromise2.all = function(promises) {
    return new AgPromise2(function(resolve) {
      var remainingToResolve = promises.length;
      var combinedValues = new Array(remainingToResolve);
      promises.forEach(function(promise, index) {
        promise.then(function(value) {
          combinedValues[index] = value;
          remainingToResolve--;
          if (remainingToResolve === 0) {
            resolve(combinedValues);
          }
        });
      });
    });
  };
  AgPromise2.resolve = function(value) {
    if (value === void 0) {
      value = null;
    }
    return new AgPromise2(function(resolve) {
      return resolve(value);
    });
  };
  AgPromise2.prototype.then = function(func) {
    var _this = this;
    return new AgPromise2(function(resolve) {
      if (_this.status === AgPromiseStatus.RESOLVED) {
        resolve(func(_this.resolution));
      } else {
        _this.waiters.push(function(value) {
          return resolve(func(value));
        });
      }
    });
  };
  AgPromise2.prototype.resolveNow = function(ifNotResolvedValue, ifResolved) {
    return this.status === AgPromiseStatus.RESOLVED ? ifResolved(this.resolution) : ifNotResolvedValue;
  };
  AgPromise2.prototype.onDone = function(value) {
    this.status = AgPromiseStatus.RESOLVED;
    this.resolution = value;
    this.waiters.forEach(function(waiter) {
      return waiter(value);
    });
  };
  AgPromise2.prototype.onReject = function(params) {
    console.warn("TBI");
  };
  return AgPromise2;
}();
var __extends$2P = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$d = function() {
  __assign$d = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$d.apply(this, arguments);
};
var __decorate$2q = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TooltipStates;
(function(TooltipStates2) {
  TooltipStates2[TooltipStates2["NOTHING"] = 0] = "NOTHING";
  TooltipStates2[TooltipStates2["WAITING_TO_SHOW"] = 1] = "WAITING_TO_SHOW";
  TooltipStates2[TooltipStates2["SHOWING"] = 2] = "SHOWING";
})(TooltipStates || (TooltipStates = {}));
var CustomTooltipFeature = function(_super) {
  __extends$2P(CustomTooltipFeature2, _super);
  function CustomTooltipFeature2(parentComp) {
    var _this = _super.call(this) || this;
    _this.DEFAULT_SHOW_TOOLTIP_DELAY = 2e3;
    _this.DEFAULT_HIDE_TOOLTIP_DELAY = 1e4;
    _this.SHOW_QUICK_TOOLTIP_DIFF = 1e3;
    _this.FADE_OUT_TOOLTIP_TIMEOUT = 1e3;
    _this.state = TooltipStates.NOTHING;
    _this.tooltipInstanceCount = 0;
    _this.tooltipMouseTrack = false;
    _this.parentComp = parentComp;
    return _this;
  }
  CustomTooltipFeature2.prototype.postConstruct = function() {
    this.tooltipShowDelay = this.gridOptionsWrapper.getTooltipDelay("show") || this.DEFAULT_SHOW_TOOLTIP_DELAY;
    this.tooltipHideDelay = this.gridOptionsWrapper.getTooltipDelay("hide") || this.DEFAULT_HIDE_TOOLTIP_DELAY;
    this.tooltipMouseTrack = this.gridOptionsWrapper.isTooltipMouseTrack();
    var el2 = this.parentComp.getGui();
    this.addManagedListener(el2, "mouseenter", this.onMouseEnter.bind(this));
    this.addManagedListener(el2, "mouseleave", this.onMouseLeave.bind(this));
    this.addManagedListener(el2, "mousemove", this.onMouseMove.bind(this));
    this.addManagedListener(el2, "mousedown", this.onMouseDown.bind(this));
    this.addManagedListener(el2, "keydown", this.onKeyDown.bind(this));
  };
  CustomTooltipFeature2.prototype.destroy = function() {
    this.setToDoNothing();
    _super.prototype.destroy.call(this);
  };
  CustomTooltipFeature2.prototype.onMouseEnter = function(e2) {
    if (isIOSUserAgent()) {
      return;
    }
    if (this.state != TooltipStates.NOTHING) {
      return;
    }
    var delay = this.isLastTooltipHiddenRecently() ? 200 : this.tooltipShowDelay;
    this.showTooltipTimeoutId = window.setTimeout(this.showTooltip.bind(this), delay);
    this.lastMouseEvent = e2;
    this.state = TooltipStates.WAITING_TO_SHOW;
  };
  CustomTooltipFeature2.prototype.onMouseLeave = function() {
    this.setToDoNothing();
  };
  CustomTooltipFeature2.prototype.onKeyDown = function() {
    this.setToDoNothing();
  };
  CustomTooltipFeature2.prototype.setToDoNothing = function() {
    if (this.state === TooltipStates.SHOWING) {
      this.hideTooltip();
    }
    this.clearTimeouts();
    this.state = TooltipStates.NOTHING;
  };
  CustomTooltipFeature2.prototype.onMouseMove = function(e2) {
    this.lastMouseEvent = e2;
    if (this.tooltipMouseTrack && this.state === TooltipStates.SHOWING && this.tooltipComp) {
      this.positionTooltipUnderLastMouseEvent();
    }
  };
  CustomTooltipFeature2.prototype.onMouseDown = function() {
    this.setToDoNothing();
  };
  CustomTooltipFeature2.prototype.hideTooltip = function() {
    if (this.tooltipComp) {
      this.destroyTooltipComp();
      CustomTooltipFeature2.lastTooltipHideTime = new Date().getTime();
    }
    this.state = TooltipStates.NOTHING;
  };
  CustomTooltipFeature2.prototype.destroyTooltipComp = function() {
    var _this = this;
    this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");
    var tooltipPopupDestroyFunc = this.tooltipPopupDestroyFunc;
    var tooltipComp = this.tooltipComp;
    window.setTimeout(function() {
      tooltipPopupDestroyFunc();
      _this.getContext().destroyBean(tooltipComp);
    }, this.FADE_OUT_TOOLTIP_TIMEOUT);
    this.tooltipPopupDestroyFunc = void 0;
    this.tooltipComp = void 0;
  };
  CustomTooltipFeature2.prototype.isLastTooltipHiddenRecently = function() {
    var now2 = new Date().getTime();
    var then = CustomTooltipFeature2.lastTooltipHideTime;
    return now2 - then < this.SHOW_QUICK_TOOLTIP_DIFF;
  };
  CustomTooltipFeature2.prototype.showTooltip = function() {
    var params = __assign$d({}, this.parentComp.getTooltipParams());
    if (!exists(params.value)) {
      this.setToDoNothing();
      return;
    }
    this.state = TooltipStates.SHOWING;
    this.tooltipInstanceCount++;
    var callback = this.newTooltipComponentCallback.bind(this, this.tooltipInstanceCount);
    var userDetails = this.userComponentFactory.getTooltipCompDetails(params);
    userDetails.newAgStackInstance().then(callback);
  };
  CustomTooltipFeature2.prototype.newTooltipComponentCallback = function(tooltipInstanceCopy, tooltipComp) {
    var compNoLongerNeeded = this.state !== TooltipStates.SHOWING || this.tooltipInstanceCount !== tooltipInstanceCopy;
    if (compNoLongerNeeded) {
      this.getContext().destroyBean(tooltipComp);
      return;
    }
    var eGui = tooltipComp.getGui();
    this.tooltipComp = tooltipComp;
    if (!eGui.classList.contains("ag-tooltip")) {
      eGui.classList.add("ag-tooltip-custom");
    }
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = this.popupService.addPopup({
      eChild: eGui,
      ariaLabel: translate2("ariaLabelTooltip", "Tooltip")
    });
    if (addPopupRes) {
      this.tooltipPopupDestroyFunc = addPopupRes.hideFunc;
    }
    this.positionTooltipUnderLastMouseEvent();
    this.hideTooltipTimeoutId = window.setTimeout(this.hideTooltip.bind(this), this.tooltipHideDelay);
  };
  CustomTooltipFeature2.prototype.positionTooltipUnderLastMouseEvent = function() {
    this.popupService.positionPopupUnderMouseEvent({
      type: "tooltip",
      mouseEvent: this.lastMouseEvent,
      ePopup: this.tooltipComp.getGui(),
      nudgeY: 18
    });
  };
  CustomTooltipFeature2.prototype.clearTimeouts = function() {
    if (this.showTooltipTimeoutId) {
      window.clearTimeout(this.showTooltipTimeoutId);
      this.showTooltipTimeoutId = void 0;
    }
    if (this.hideTooltipTimeoutId) {
      window.clearTimeout(this.hideTooltipTimeoutId);
      this.hideTooltipTimeoutId = void 0;
    }
  };
  __decorate$2q([
    Autowired("popupService")
  ], CustomTooltipFeature2.prototype, "popupService", void 0);
  __decorate$2q([
    Autowired("userComponentFactory")
  ], CustomTooltipFeature2.prototype, "userComponentFactory", void 0);
  __decorate$2q([
    Autowired("columnApi")
  ], CustomTooltipFeature2.prototype, "columnApi", void 0);
  __decorate$2q([
    Autowired("gridApi")
  ], CustomTooltipFeature2.prototype, "gridApi", void 0);
  __decorate$2q([
    PostConstruct
  ], CustomTooltipFeature2.prototype, "postConstruct", null);
  return CustomTooltipFeature2;
}(BeanStub);
var CssClassManager = function() {
  function CssClassManager2(getGui) {
    this.cssClassStates = {};
    this.getGui = getGui;
  }
  CssClassManager2.prototype.addCssClass = function(className) {
    var _this = this;
    var list = (className || "").split(" ");
    if (list.length > 1) {
      list.forEach(function(cls) {
        return _this.addCssClass(cls);
      });
      return;
    }
    var updateNeeded = this.cssClassStates[className] !== true;
    if (updateNeeded && className.length) {
      this.getGui().classList.add(className);
      this.cssClassStates[className] = true;
    }
  };
  CssClassManager2.prototype.removeCssClass = function(className) {
    var _this = this;
    var list = (className || "").split(" ");
    if (list.length > 1) {
      list.forEach(function(cls) {
        return _this.removeCssClass(cls);
      });
      return;
    }
    var updateNeeded = this.cssClassStates[className] !== false;
    if (updateNeeded && className.length) {
      this.getGui().classList.remove(className);
      this.cssClassStates[className] = false;
    }
  };
  CssClassManager2.prototype.containsCssClass = function(className) {
    return this.getGui().classList.contains(className);
  };
  CssClassManager2.prototype.addOrRemoveCssClass = function(className, addOrRemove) {
    var _this = this;
    if (!className) {
      return;
    }
    if (className.indexOf(" ") >= 0) {
      var list = (className || "").split(" ");
      if (list.length > 1) {
        list.forEach(function(cls) {
          return _this.addOrRemoveCssClass(cls, addOrRemove);
        });
        return;
      }
    }
    var updateNeeded = this.cssClassStates[className] !== addOrRemove;
    if (updateNeeded && className.length) {
      this.getGui().classList.toggle(className, addOrRemove);
      this.cssClassStates[className] = addOrRemove;
    }
  };
  return CssClassManager2;
}();
var __extends$2O = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2p = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var compIdSequence = new NumberSequence();
var Component = function(_super) {
  __extends$2O(Component2, _super);
  function Component2(template) {
    var _this = _super.call(this) || this;
    _this.displayed = true;
    _this.visible = true;
    _this.compId = compIdSequence.next();
    _this.cssClassManager = new CssClassManager(function() {
      return _this.eGui;
    });
    if (template) {
      _this.setTemplate(template);
    }
    return _this;
  }
  Component2.prototype.preConstructOnComponent = function() {
    this.usingBrowserTooltips = this.gridOptionsWrapper.isEnableBrowserTooltips();
  };
  Component2.prototype.getCompId = function() {
    return this.compId;
  };
  Component2.prototype.getTooltipParams = function() {
    return {
      value: this.tooltipText,
      location: "UNKNOWN"
    };
  };
  Component2.prototype.setTooltip = function(newTooltipText) {
    var _this = this;
    var removeTooltip = function() {
      if (_this.usingBrowserTooltips) {
        _this.getGui().removeAttribute("title");
      } else {
        _this.tooltipFeature = _this.destroyBean(_this.tooltipFeature);
      }
    };
    var addTooltip = function() {
      if (_this.usingBrowserTooltips) {
        _this.getGui().setAttribute("title", _this.tooltipText);
      } else {
        _this.tooltipFeature = _this.createBean(new CustomTooltipFeature(_this));
      }
    };
    if (this.tooltipText != newTooltipText) {
      if (this.tooltipText) {
        removeTooltip();
      }
      if (newTooltipText != null) {
        this.tooltipText = newTooltipText;
        if (this.tooltipText) {
          addTooltip();
        }
      }
    }
  };
  Component2.prototype.createChildComponentsFromTags = function(parentNode, paramsMap) {
    var _this = this;
    var childNodeList = copyNodeList(parentNode.childNodes);
    childNodeList.forEach(function(childNode) {
      if (!(childNode instanceof HTMLElement)) {
        return;
      }
      var childComp = _this.createComponentFromElement(childNode, function(childComp2) {
        var childGui = childComp2.getGui();
        if (childGui) {
          _this.copyAttributesFromNode(childNode, childComp2.getGui());
        }
      }, paramsMap);
      if (childComp) {
        if (childComp.addItems && childNode.children.length) {
          _this.createChildComponentsFromTags(childNode, paramsMap);
          var items = Array.prototype.slice.call(childNode.children);
          childComp.addItems(items);
        }
        _this.swapComponentForNode(childComp, parentNode, childNode);
      } else if (childNode.childNodes) {
        _this.createChildComponentsFromTags(childNode, paramsMap);
      }
    });
  };
  Component2.prototype.createComponentFromElement = function(element, afterPreCreateCallback, paramsMap) {
    var key = element.nodeName;
    var componentParams = paramsMap ? paramsMap[element.getAttribute("ref")] : void 0;
    var ComponentClass = this.agStackComponentsRegistry.getComponentClass(key);
    if (ComponentClass) {
      Component2.elementGettingCreated = element;
      var newComponent = new ComponentClass(componentParams);
      newComponent.setParentComponent(this);
      this.createBean(newComponent, null, afterPreCreateCallback);
      return newComponent;
    }
    return null;
  };
  Component2.prototype.copyAttributesFromNode = function(source, dest) {
    iterateNamedNodeMap(source.attributes, function(name, value) {
      return dest.setAttribute(name, value);
    });
  };
  Component2.prototype.swapComponentForNode = function(newComponent, parentNode, childNode) {
    var eComponent = newComponent.getGui();
    parentNode.replaceChild(eComponent, childNode);
    parentNode.insertBefore(document.createComment(childNode.nodeName), eComponent);
    this.addDestroyFunc(this.destroyBean.bind(this, newComponent));
    this.swapInComponentForQuerySelectors(newComponent, childNode);
  };
  Component2.prototype.swapInComponentForQuerySelectors = function(newComponent, childNode) {
    var thisNoType = this;
    this.iterateOverQuerySelectors(function(querySelector) {
      if (thisNoType[querySelector.attributeName] === childNode) {
        thisNoType[querySelector.attributeName] = newComponent;
      }
    });
  };
  Component2.prototype.iterateOverQuerySelectors = function(action) {
    var thisPrototype = Object.getPrototypeOf(this);
    while (thisPrototype != null) {
      var metaData = thisPrototype.__agComponentMetaData;
      var currentProtoName = getFunctionName(thisPrototype.constructor);
      if (metaData && metaData[currentProtoName] && metaData[currentProtoName].querySelectors) {
        metaData[currentProtoName].querySelectors.forEach(function(querySelector) {
          return action(querySelector);
        });
      }
      thisPrototype = Object.getPrototypeOf(thisPrototype);
    }
  };
  Component2.prototype.setTemplate = function(template, paramsMap) {
    var eGui = loadTemplate(template);
    this.setTemplateFromElement(eGui, paramsMap);
  };
  Component2.prototype.setTemplateFromElement = function(element, paramsMap) {
    this.eGui = element;
    this.eGui.__agComponent = this;
    this.wireQuerySelectors();
    if (!!this.getContext()) {
      this.createChildComponentsFromTags(this.getGui(), paramsMap);
    }
  };
  Component2.prototype.createChildComponentsPreConstruct = function() {
    if (!!this.getGui()) {
      this.createChildComponentsFromTags(this.getGui());
    }
  };
  Component2.prototype.wireQuerySelectors = function() {
    var _this = this;
    if (!this.eGui) {
      return;
    }
    var thisNoType = this;
    this.iterateOverQuerySelectors(function(querySelector) {
      var setResult = function(result) {
        return thisNoType[querySelector.attributeName] = result;
      };
      var topLevelRefMatch = querySelector.refSelector && _this.eGui.getAttribute("ref") === querySelector.refSelector;
      if (topLevelRefMatch) {
        setResult(_this.eGui);
      } else {
        var resultOfQuery = _this.eGui.querySelector(querySelector.querySelector);
        if (resultOfQuery) {
          setResult(resultOfQuery.__agComponent || resultOfQuery);
        }
      }
    });
  };
  Component2.prototype.getGui = function() {
    return this.eGui;
  };
  Component2.prototype.getFocusableElement = function() {
    return this.eGui;
  };
  Component2.prototype.setParentComponent = function(component) {
    this.parentComponent = component;
  };
  Component2.prototype.getParentComponent = function() {
    return this.parentComponent;
  };
  Component2.prototype.setGui = function(eGui) {
    this.eGui = eGui;
  };
  Component2.prototype.queryForHtmlElement = function(cssSelector) {
    return this.eGui.querySelector(cssSelector);
  };
  Component2.prototype.queryForHtmlInputElement = function(cssSelector) {
    return this.eGui.querySelector(cssSelector);
  };
  Component2.prototype.appendChild = function(newChild, container) {
    if (newChild == null) {
      return;
    }
    if (!container) {
      container = this.eGui;
    }
    if (isNodeOrElement(newChild)) {
      container.appendChild(newChild);
    } else {
      var childComponent = newChild;
      container.appendChild(childComponent.getGui());
    }
  };
  Component2.prototype.isDisplayed = function() {
    return this.displayed;
  };
  Component2.prototype.setVisible = function(visible) {
    if (visible !== this.visible) {
      this.visible = visible;
      setVisible(this.eGui, visible);
    }
  };
  Component2.prototype.setDisplayed = function(displayed) {
    if (displayed !== this.displayed) {
      this.displayed = displayed;
      setDisplayed(this.eGui, displayed);
      var event_1 = {
        type: Component2.EVENT_DISPLAYED_CHANGED,
        visible: this.displayed
      };
      this.dispatchEvent(event_1);
    }
  };
  Component2.prototype.destroy = function() {
    if (this.tooltipFeature) {
      this.tooltipFeature = this.destroyBean(this.tooltipFeature);
    }
    _super.prototype.destroy.call(this);
  };
  Component2.prototype.addGuiEventListener = function(event, listener) {
    var _this = this;
    this.eGui.addEventListener(event, listener);
    this.addDestroyFunc(function() {
      return _this.eGui.removeEventListener(event, listener);
    });
  };
  Component2.prototype.addCssClass = function(className) {
    this.cssClassManager.addCssClass(className);
  };
  Component2.prototype.removeCssClass = function(className) {
    this.cssClassManager.removeCssClass(className);
  };
  Component2.prototype.containsCssClass = function(className) {
    return this.cssClassManager.containsCssClass(className);
  };
  Component2.prototype.addOrRemoveCssClass = function(className, addOrRemove) {
    this.cssClassManager.addOrRemoveCssClass(className, addOrRemove);
  };
  Component2.prototype.getAttribute = function(key) {
    var eGui = this.eGui;
    return eGui ? eGui.getAttribute(key) : null;
  };
  Component2.prototype.getRefElement = function(refName) {
    return this.queryForHtmlElement('[ref="' + refName + '"]');
  };
  Component2.EVENT_DISPLAYED_CHANGED = "displayedChanged";
  __decorate$2p([
    Autowired("agStackComponentsRegistry")
  ], Component2.prototype, "agStackComponentsRegistry", void 0);
  __decorate$2p([
    PreConstruct
  ], Component2.prototype, "preConstructOnComponent", null);
  __decorate$2p([
    PreConstruct
  ], Component2.prototype, "createChildComponentsPreConstruct", null);
  return Component2;
}(BeanStub);
function RefSelector(ref2) {
  return querySelectorFunc.bind(this, "[ref=" + ref2 + "]", ref2);
}
function querySelectorFunc(selector, refSelector, classPrototype, methodOrAttributeName, index) {
  if (selector === null) {
    console.error("AG Grid: QuerySelector selector should not be null");
    return;
  }
  if (typeof index === "number") {
    console.error("AG Grid: QuerySelector should be on an attribute");
    return;
  }
  addToObjectProps(classPrototype, "querySelectors", {
    attributeName: methodOrAttributeName,
    querySelector: selector,
    refSelector
  });
}
function addToObjectProps(target, key, value) {
  var props2 = getOrCreateProps(target, getFunctionName(target.constructor));
  if (!props2[key]) {
    props2[key] = [];
  }
  props2[key].push(value);
}
function getOrCreateProps(target, instanceName) {
  if (!target.__agComponentMetaData) {
    target.__agComponentMetaData = {};
  }
  if (!target.__agComponentMetaData[instanceName]) {
    target.__agComponentMetaData[instanceName] = {};
  }
  return target.__agComponentMetaData[instanceName];
}
var __extends$2N = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2o = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ReadOnlyFloatingFilter = function(_super) {
  __extends$2N(ReadOnlyFloatingFilter2, _super);
  function ReadOnlyFloatingFilter2() {
    return _super.call(this, '\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>') || this;
  }
  ReadOnlyFloatingFilter2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  ReadOnlyFloatingFilter2.prototype.init = function(params) {
    this.params = params;
    var displayName = this.columnModel.getDisplayNameForColumn(params.column, "header", true);
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(displayName + " " + translate2("ariaFilterInput", "Filter Input"));
  };
  ReadOnlyFloatingFilter2.prototype.onParentModelChanged = function(parentModel) {
    var _this = this;
    if (!parentModel) {
      this.eFloatingFilterText.setValue("");
      return;
    }
    this.params.parentFilterInstance(function(filterInstance) {
      if (filterInstance.getModelAsString) {
        var modelAsString = filterInstance.getModelAsString(parentModel);
        _this.eFloatingFilterText.setValue(modelAsString);
      }
    });
  };
  __decorate$2o([
    RefSelector("eFloatingFilterText")
  ], ReadOnlyFloatingFilter2.prototype, "eFloatingFilterText", void 0);
  __decorate$2o([
    Autowired("columnModel")
  ], ReadOnlyFloatingFilter2.prototype, "columnModel", void 0);
  return ReadOnlyFloatingFilter2;
}(Component);
var DateCompWrapper = function() {
  function DateCompWrapper2(context, userComponentFactory, dateComponentParams, eParent) {
    var _this = this;
    this.alive = true;
    this.context = context;
    this.eParent = eParent;
    var compDetails = userComponentFactory.getDateCompDetails(dateComponentParams);
    var promise = compDetails.newAgStackInstance();
    promise.then(function(dateComp) {
      if (!_this.alive) {
        context.destroyBean(dateComp);
        return;
      }
      _this.dateComp = dateComp;
      if (!dateComp) {
        return;
      }
      eParent.appendChild(dateComp.getGui());
      if (dateComp.afterGuiAttached) {
        dateComp.afterGuiAttached();
      }
      if (_this.tempValue) {
        dateComp.setDate(_this.tempValue);
      }
      if (_this.disabled != null) {
        _this.setDateCompDisabled(_this.disabled);
      }
    });
  }
  DateCompWrapper2.prototype.destroy = function() {
    this.alive = false;
    this.dateComp = this.context.destroyBean(this.dateComp);
  };
  DateCompWrapper2.prototype.getDate = function() {
    return this.dateComp ? this.dateComp.getDate() : this.tempValue;
  };
  DateCompWrapper2.prototype.setDate = function(value) {
    if (this.dateComp) {
      this.dateComp.setDate(value);
    } else {
      this.tempValue = value;
    }
  };
  DateCompWrapper2.prototype.setDisabled = function(disabled) {
    if (this.dateComp) {
      this.setDateCompDisabled(disabled);
    } else {
      this.disabled = disabled;
    }
  };
  DateCompWrapper2.prototype.setDisplayed = function(displayed) {
    setDisplayed(this.eParent, displayed);
  };
  DateCompWrapper2.prototype.setInputPlaceholder = function(placeholder) {
    if (this.dateComp && this.dateComp.setInputPlaceholder) {
      this.dateComp.setInputPlaceholder(placeholder);
    }
  };
  DateCompWrapper2.prototype.setInputAriaLabel = function(label) {
    if (this.dateComp && this.dateComp.setInputAriaLabel) {
      this.dateComp.setInputAriaLabel(label);
    }
  };
  DateCompWrapper2.prototype.afterGuiAttached = function(params) {
    if (this.dateComp && typeof this.dateComp.afterGuiAttached === "function") {
      this.dateComp.afterGuiAttached(params);
    }
  };
  DateCompWrapper2.prototype.setDateCompDisabled = function(disabled) {
    if (this.dateComp == null) {
      return;
    }
    if (this.dateComp.setDisabled == null) {
      return;
    }
    this.dateComp.setDisabled(disabled);
  };
  return DateCompWrapper2;
}();
var __assign$c = function() {
  __assign$c = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$c.apply(this, arguments);
};
var OptionsFactory = function() {
  function OptionsFactory2() {
    this.customFilterOptions = {};
  }
  OptionsFactory2.prototype.init = function(params, defaultOptions2) {
    this.filterOptions = params.filterOptions || defaultOptions2;
    this.mapCustomOptions();
    this.selectDefaultItem(params);
    this.checkForDeprecatedParams();
  };
  OptionsFactory2.prototype.checkForDeprecatedParams = function() {
    if (this.filterOptions.some(function(opt) {
      return typeof opt != "string" && opt.test != null;
    })) {
      console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate().");
    }
    if (this.filterOptions.some(function(opt) {
      return typeof opt != "string" && opt.hideFilterInput != null;
    })) {
      console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.");
    }
  };
  OptionsFactory2.prototype.getFilterOptions = function() {
    return this.filterOptions;
  };
  OptionsFactory2.prototype.mapCustomOptions = function() {
    var _this = this;
    if (!this.filterOptions) {
      return;
    }
    this.filterOptions.forEach(function(filterOption) {
      if (typeof filterOption === "string") {
        return;
      }
      var requiredProperties = [["displayKey"], ["displayName"], ["predicate", "test"]];
      var propertyCheck = function(keys2) {
        if (!keys2.some(function(key) {
          return filterOption[key] != null;
        })) {
          console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '" + keys2 + "'");
          return false;
        }
        return true;
      };
      if (!requiredProperties.every(propertyCheck)) {
        _this.filterOptions = _this.filterOptions.filter(function(v) {
          return v === filterOption;
        }) || [];
        return;
      }
      var test = filterOption.test;
      var mutatedFilterOptions = __assign$c({}, filterOption);
      if (test != null && filterOption.predicate == null) {
        mutatedFilterOptions.predicate = function(v, cv) {
          return test(v[0], cv);
        };
        delete mutatedFilterOptions.test;
      }
      if (mutatedFilterOptions.hideFilterInput && mutatedFilterOptions.numberOfInputs == null) {
        mutatedFilterOptions.numberOfInputs = 0;
        delete mutatedFilterOptions.hideFilterInput;
      }
      _this.customFilterOptions[filterOption.displayKey] = mutatedFilterOptions;
    });
  };
  OptionsFactory2.prototype.selectDefaultItem = function(params) {
    if (params.defaultOption) {
      this.defaultOption = params.defaultOption;
    } else if (this.filterOptions.length >= 1) {
      var firstFilterOption = this.filterOptions[0];
      if (typeof firstFilterOption === "string") {
        this.defaultOption = firstFilterOption;
      } else if (firstFilterOption.displayKey) {
        this.defaultOption = firstFilterOption.displayKey;
      } else {
        console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'");
      }
    } else {
      console.warn("AG Grid: no filter options for filter");
    }
  };
  OptionsFactory2.prototype.getDefaultOption = function() {
    return this.defaultOption;
  };
  OptionsFactory2.prototype.getCustomOption = function(name) {
    return this.customFilterOptions[name];
  };
  return OptionsFactory2;
}();
var DEFAULT_FILTER_LOCALE_TEXT = {
  applyFilter: "Apply",
  clearFilter: "Clear",
  resetFilter: "Reset",
  cancelFilter: "Cancel",
  textFilter: "Text Filter",
  numberFilter: "Number Filter",
  dateFilter: "Date Filter",
  setFilter: "Set Filter",
  filterOoo: "Filter...",
  empty: "Choose One",
  equals: "Equals",
  notEqual: "Not equal",
  lessThan: "Less than",
  greaterThan: "Greater than",
  inRange: "In range",
  inRangeStart: "From",
  inRangeEnd: "To",
  lessThanOrEqual: "Less than or equals",
  greaterThanOrEqual: "Greater than or equals",
  contains: "Contains",
  notContains: "Not contains",
  startsWith: "Starts with",
  endsWith: "Ends with",
  blank: "Blank",
  notBlank: "Not blank",
  andCondition: "AND",
  orCondition: "OR",
  dateFormatOoo: "yyyy-mm-dd"
};
var __extends$2M = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$b = function() {
  __assign$b = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$b.apply(this, arguments);
};
var __decorate$2n = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ManagedFocusFeature = function(_super) {
  __extends$2M(ManagedFocusFeature2, _super);
  function ManagedFocusFeature2(eFocusableElement, callbacks) {
    if (callbacks === void 0) {
      callbacks = {};
    }
    var _this = _super.call(this) || this;
    _this.eFocusableElement = eFocusableElement;
    _this.callbacks = callbacks;
    _this.callbacks = __assign$b({ shouldStopEventPropagation: function() {
      return false;
    }, onTabKeyDown: function(e2) {
      if (e2.defaultPrevented) {
        return;
      }
      var nextRoot = _this.focusService.findNextFocusableElement(_this.eFocusableElement, false, e2.shiftKey);
      if (!nextRoot) {
        return;
      }
      nextRoot.focus();
      e2.preventDefault();
    } }, callbacks);
    return _this;
  }
  ManagedFocusFeature2.prototype.postConstruct = function() {
    this.eFocusableElement.classList.add(ManagedFocusFeature2.FOCUS_MANAGED_CLASS);
    this.addKeyDownListeners(this.eFocusableElement);
    if (this.callbacks.onFocusIn) {
      this.addManagedListener(this.eFocusableElement, "focusin", this.callbacks.onFocusIn);
    }
    if (this.callbacks.onFocusOut) {
      this.addManagedListener(this.eFocusableElement, "focusout", this.callbacks.onFocusOut);
    }
  };
  ManagedFocusFeature2.prototype.addKeyDownListeners = function(eGui) {
    var _this = this;
    this.addManagedListener(eGui, "keydown", function(e2) {
      if (e2.defaultPrevented || isStopPropagationForAgGrid(e2)) {
        return;
      }
      if (_this.callbacks.shouldStopEventPropagation(e2)) {
        stopPropagationForAgGrid(e2);
        return;
      }
      if (e2.key === KeyCode.TAB) {
        _this.callbacks.onTabKeyDown(e2);
      } else if (_this.callbacks.handleKeyDown) {
        _this.callbacks.handleKeyDown(e2);
      }
    });
  };
  ManagedFocusFeature2.FOCUS_MANAGED_CLASS = "ag-focus-managed";
  __decorate$2n([
    Autowired("focusService")
  ], ManagedFocusFeature2.prototype, "focusService", void 0);
  __decorate$2n([
    PostConstruct
  ], ManagedFocusFeature2.prototype, "postConstruct", null);
  return ManagedFocusFeature2;
}(BeanStub);
var __extends$2L = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2m = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ProvidedFilter = function(_super) {
  __extends$2L(ProvidedFilter2, _super);
  function ProvidedFilter2(filterNameKey) {
    var _this = _super.call(this) || this;
    _this.filterNameKey = filterNameKey;
    _this.applyActive = false;
    _this.hidePopup = null;
    _this.appliedModel = null;
    return _this;
  }
  ProvidedFilter2.prototype.postConstruct = function() {
    this.resetTemplate();
    this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {
      handleKeyDown: this.handleKeyDown.bind(this)
    }));
  };
  ProvidedFilter2.prototype.handleKeyDown = function(e2) {
  };
  ProvidedFilter2.prototype.getFilterTitle = function() {
    return this.translate(this.filterNameKey);
  };
  ProvidedFilter2.prototype.isFilterActive = function() {
    return !!this.appliedModel;
  };
  ProvidedFilter2.prototype.resetTemplate = function(paramsMap) {
    var templateString = '\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-' + this.getCssIdentifier() + '-body-wrapper">\n                    ' + this.createBodyTemplate() + "\n                </div>\n            </div>";
    this.setTemplate(templateString, paramsMap);
  };
  ProvidedFilter2.prototype.isReadOnly = function() {
    return !!this.providedFilterParams.readOnly;
  };
  ProvidedFilter2.prototype.init = function(params) {
    var _this = this;
    this.setParams(params);
    this.resetUiToDefaults(true).then(function() {
      _this.updateUiVisibility();
      _this.setupOnBtApplyDebounce();
    });
  };
  ProvidedFilter2.prototype.setParams = function(params) {
    this.providedFilterParams = params;
    this.applyActive = ProvidedFilter2.isUseApplyButton(params);
    this.createButtonPanel();
  };
  ProvidedFilter2.prototype.createButtonPanel = function() {
    var _this = this;
    var buttons = this.providedFilterParams.buttons;
    if (!buttons || buttons.length < 1 || this.isReadOnly()) {
      return;
    }
    var eButtonsPanel = document.createElement("div");
    eButtonsPanel.classList.add("ag-filter-apply-panel");
    var addButton = function(type) {
      var text;
      var clickListener;
      switch (type) {
        case "apply":
          text = _this.translate("applyFilter");
          clickListener = function(e2) {
            return _this.onBtApply(false, false, e2);
          };
          break;
        case "clear":
          text = _this.translate("clearFilter");
          clickListener = function() {
            return _this.onBtClear();
          };
          break;
        case "reset":
          text = _this.translate("resetFilter");
          clickListener = function() {
            return _this.onBtReset();
          };
          break;
        case "cancel":
          text = _this.translate("cancelFilter");
          clickListener = function(e2) {
            _this.onBtCancel(e2);
          };
          break;
        default:
          console.warn("AG Grid: Unknown button type specified");
          return;
      }
      var button2 = loadTemplate(
        '<button\n                    type="button"\n                    ref="' + type + 'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >' + text + "\n                </button>"
      );
      eButtonsPanel.appendChild(button2);
      _this.addManagedListener(button2, "click", clickListener);
    };
    convertToSet(buttons).forEach(function(type) {
      return addButton(type);
    });
    this.getGui().appendChild(eButtonsPanel);
  };
  ProvidedFilter2.prototype.getDefaultDebounceMs = function() {
    return 0;
  };
  ProvidedFilter2.prototype.setupOnBtApplyDebounce = function() {
    var debounceMs = ProvidedFilter2.getDebounceMs(this.providedFilterParams, this.getDefaultDebounceMs());
    this.onBtApplyDebounce = debounce(this.onBtApply.bind(this), debounceMs);
  };
  ProvidedFilter2.prototype.getModel = function() {
    return this.appliedModel ? this.appliedModel : null;
  };
  ProvidedFilter2.prototype.setModel = function(model) {
    var _this = this;
    var promise = model != null ? this.setModelIntoUi(model) : this.resetUiToDefaults();
    return promise.then(function() {
      _this.updateUiVisibility();
      _this.applyModel();
    });
  };
  ProvidedFilter2.prototype.onBtCancel = function(e2) {
    var _this = this;
    var currentModel = this.getModel();
    var afterAppliedFunc = function() {
      _this.onUiChanged(false, "prevent");
      if (_this.providedFilterParams.closeOnApply) {
        _this.close(e2);
      }
    };
    if (currentModel != null) {
      this.setModelIntoUi(currentModel).then(afterAppliedFunc);
    } else {
      this.resetUiToDefaults().then(afterAppliedFunc);
    }
  };
  ProvidedFilter2.prototype.onBtClear = function() {
    var _this = this;
    this.resetUiToDefaults().then(function() {
      return _this.onUiChanged();
    });
  };
  ProvidedFilter2.prototype.onBtReset = function() {
    this.onBtClear();
    this.onBtApply();
  };
  ProvidedFilter2.prototype.applyModel = function() {
    var newModel = this.getModelFromUi();
    if (!this.isModelValid(newModel)) {
      return false;
    }
    var previousModel = this.appliedModel;
    this.appliedModel = newModel;
    return !this.areModelsEqual(previousModel, newModel);
  };
  ProvidedFilter2.prototype.isModelValid = function(model) {
    return true;
  };
  ProvidedFilter2.prototype.onBtApply = function(afterFloatingFilter, afterDataChange, e2) {
    if (afterFloatingFilter === void 0) {
      afterFloatingFilter = false;
    }
    if (afterDataChange === void 0) {
      afterDataChange = false;
    }
    if (this.applyModel()) {
      this.providedFilterParams.filterChangedCallback({ afterFloatingFilter, afterDataChange });
    }
    var closeOnApply = this.providedFilterParams.closeOnApply;
    if (closeOnApply && this.applyActive && !afterFloatingFilter && !afterDataChange) {
      this.close(e2);
    }
  };
  ProvidedFilter2.prototype.onNewRowsLoaded = function() {
  };
  ProvidedFilter2.prototype.close = function(e2) {
    if (!this.hidePopup) {
      return;
    }
    var keyboardEvent = e2;
    var key = keyboardEvent && keyboardEvent.key;
    var params;
    if (key === "Enter" || key === "Space") {
      params = { keyboardEvent };
    }
    this.hidePopup(params);
    this.hidePopup = null;
  };
  ProvidedFilter2.prototype.onUiChanged = function(fromFloatingFilter, apply) {
    if (fromFloatingFilter === void 0) {
      fromFloatingFilter = false;
    }
    this.updateUiVisibility();
    this.providedFilterParams.filterModifiedCallback();
    if (this.applyActive && !this.isReadOnly) {
      var isValid2 = this.isModelValid(this.getModelFromUi());
      setDisabled(this.getRefElement("applyFilterButton"), !isValid2);
    }
    if (fromFloatingFilter && !apply || apply === "immediately") {
      this.onBtApply(fromFloatingFilter);
    } else if (!this.applyActive && !apply || apply === "debounce") {
      this.onBtApplyDebounce();
    }
  };
  ProvidedFilter2.prototype.afterGuiAttached = function(params) {
    if (params == null) {
      return;
    }
    this.hidePopup = params.hidePopup;
  };
  ProvidedFilter2.getDebounceMs = function(params, debounceDefault) {
    if (ProvidedFilter2.isUseApplyButton(params)) {
      if (params.debounceMs != null) {
        console.warn("AG Grid: debounceMs is ignored when apply button is present");
      }
      return 0;
    }
    return params.debounceMs != null ? params.debounceMs : debounceDefault;
  };
  ProvidedFilter2.isUseApplyButton = function(params) {
    return !!params.buttons && params.buttons.indexOf("apply") >= 0;
  };
  ProvidedFilter2.prototype.destroy = function() {
    this.hidePopup = null;
    _super.prototype.destroy.call(this);
  };
  ProvidedFilter2.prototype.translate = function(key) {
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    return translate2(key, DEFAULT_FILTER_LOCALE_TEXT[key]);
  };
  ProvidedFilter2.prototype.getCellValue = function(rowNode) {
    var _a2 = this.providedFilterParams, api = _a2.api, colDef = _a2.colDef, column = _a2.column, columnApi = _a2.columnApi, context = _a2.context;
    return this.providedFilterParams.valueGetter({
      api,
      colDef,
      column,
      columnApi,
      context,
      data: rowNode.data,
      getValue: function(field) {
        return rowNode.data[field];
      },
      node: rowNode
    });
  };
  __decorate$2m([
    Autowired("rowModel")
  ], ProvidedFilter2.prototype, "rowModel", void 0);
  __decorate$2m([
    Autowired("valueService")
  ], ProvidedFilter2.prototype, "valueService", void 0);
  __decorate$2m([
    PostConstruct
  ], ProvidedFilter2.prototype, "postConstruct", null);
  return ProvidedFilter2;
}(Component);
var __extends$2K = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2l = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgAbstractLabel = function(_super) {
  __extends$2K(AgAbstractLabel2, _super);
  function AgAbstractLabel2(config, template) {
    var _this = _super.call(this, template) || this;
    _this.labelSeparator = "";
    _this.labelAlignment = "left";
    _this.disabled = false;
    _this.label = "";
    _this.config = config || {};
    return _this;
  }
  AgAbstractLabel2.prototype.postConstruct = function() {
    this.addCssClass("ag-labeled");
    this.eLabel.classList.add("ag-label");
    var _a2 = this.config, labelSeparator = _a2.labelSeparator, label = _a2.label, labelWidth = _a2.labelWidth, labelAlignment = _a2.labelAlignment;
    if (labelSeparator != null) {
      this.setLabelSeparator(labelSeparator);
    }
    if (label != null) {
      this.setLabel(label);
    }
    if (labelWidth != null) {
      this.setLabelWidth(labelWidth);
    }
    this.setLabelAlignment(labelAlignment || this.labelAlignment);
    this.refreshLabel();
  };
  AgAbstractLabel2.prototype.refreshLabel = function() {
    clearElement(this.eLabel);
    if (typeof this.label === "string") {
      this.eLabel.innerText = this.label + this.labelSeparator;
    } else if (this.label) {
      this.eLabel.appendChild(this.label);
    }
    if (this.label === "") {
      this.eLabel.classList.add("ag-hidden");
      setAriaRole(this.eLabel, "presentation");
    } else {
      this.eLabel.classList.remove("ag-hidden");
      setAriaRole(this.eLabel, null);
    }
  };
  AgAbstractLabel2.prototype.setLabelSeparator = function(labelSeparator) {
    if (this.labelSeparator === labelSeparator) {
      return this;
    }
    this.labelSeparator = labelSeparator;
    if (this.label != null) {
      this.refreshLabel();
    }
    return this;
  };
  AgAbstractLabel2.prototype.getLabelId = function() {
    this.eLabel.id = this.eLabel.id || "ag-" + this.getCompId() + "-label";
    return this.eLabel.id;
  };
  AgAbstractLabel2.prototype.getLabel = function() {
    return this.label;
  };
  AgAbstractLabel2.prototype.setLabel = function(label) {
    if (this.label === label) {
      return this;
    }
    this.label = label;
    this.refreshLabel();
    return this;
  };
  AgAbstractLabel2.prototype.setLabelAlignment = function(alignment) {
    var eGui = this.getGui();
    var eGuiClassList = eGui.classList;
    eGuiClassList.toggle("ag-label-align-left", alignment === "left");
    eGuiClassList.toggle("ag-label-align-right", alignment === "right");
    eGuiClassList.toggle("ag-label-align-top", alignment === "top");
    return this;
  };
  AgAbstractLabel2.prototype.setLabelWidth = function(width) {
    if (this.label == null) {
      return this;
    }
    setElementWidth(this.eLabel, width);
    return this;
  };
  AgAbstractLabel2.prototype.setDisabled = function(disabled) {
    disabled = !!disabled;
    var element = this.getGui();
    setDisabled(element, disabled);
    element.classList.toggle("ag-disabled", disabled);
    this.disabled = disabled;
    return this;
  };
  AgAbstractLabel2.prototype.isDisabled = function() {
    return !!this.disabled;
  };
  __decorate$2l([
    PostConstruct
  ], AgAbstractLabel2.prototype, "postConstruct", null);
  return AgAbstractLabel2;
}(Component);
var __extends$2J = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgAbstractField = function(_super) {
  __extends$2J(AgAbstractField2, _super);
  function AgAbstractField2(config, template, className) {
    var _this = _super.call(this, config, template) || this;
    _this.className = className;
    return _this;
  }
  AgAbstractField2.prototype.postConstruct = function() {
    _super.prototype.postConstruct.call(this);
    if (this.className) {
      this.addCssClass(this.className);
    }
  };
  AgAbstractField2.prototype.onValueChange = function(callbackFn) {
    var _this = this;
    this.addManagedListener(this, AgAbstractField2.EVENT_CHANGED, function() {
      return callbackFn(_this.getValue());
    });
    return this;
  };
  AgAbstractField2.prototype.getWidth = function() {
    return this.getGui().clientWidth;
  };
  AgAbstractField2.prototype.setWidth = function(width) {
    setFixedWidth(this.getGui(), width);
    return this;
  };
  AgAbstractField2.prototype.getPreviousValue = function() {
    return this.previousValue;
  };
  AgAbstractField2.prototype.getValue = function() {
    return this.value;
  };
  AgAbstractField2.prototype.setValue = function(value, silent) {
    if (this.value === value) {
      return this;
    }
    this.previousValue = this.value;
    this.value = value;
    if (!silent) {
      this.dispatchEvent({ type: AgAbstractField2.EVENT_CHANGED });
    }
    return this;
  };
  AgAbstractField2.EVENT_CHANGED = "valueChange";
  return AgAbstractField2;
}(AgAbstractLabel);
var __extends$2I = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2k = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgPickerField = function(_super) {
  __extends$2I(AgPickerField2, _super);
  function AgPickerField2(config, className, pickerIcon, ariaRole) {
    var _this = _super.call(
      this,
      config,
      '<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    aria-expanded="false"\n                    ' + (ariaRole ? 'role="' + ariaRole + '"' : "") + '\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',
      className
    ) || this;
    _this.pickerIcon = pickerIcon;
    _this.isPickerDisplayed = false;
    _this.isDestroyingPicker = false;
    _this.skipClick = false;
    return _this;
  }
  AgPickerField2.prototype.postConstruct = function() {
    var _this = this;
    _super.prototype.postConstruct.call(this);
    var displayId = this.getCompId() + "-display";
    this.eDisplayField.setAttribute("id", displayId);
    setAriaDescribedBy(this.eWrapper, displayId);
    var clickHandler = function() {
      if (_this.skipClick) {
        _this.skipClick = false;
        return;
      }
      if (_this.isDisabled()) {
        return;
      }
      _this.pickerComponent = _this.showPicker();
    };
    var eGui = this.getGui();
    this.addManagedListener(eGui, "mousedown", function(e2) {
      if (!_this.skipClick && _this.pickerComponent && _this.pickerComponent.isAlive() && isVisible(_this.pickerComponent.getGui()) && eGui.contains(e2.target)) {
        _this.skipClick = true;
      }
    });
    this.addManagedListener(eGui, "keydown", function(e2) {
      switch (e2.key) {
        case KeyCode.UP:
        case KeyCode.DOWN:
        case KeyCode.ENTER:
        case KeyCode.SPACE:
          clickHandler();
        case KeyCode.ESCAPE:
          if (_this.isPickerDisplayed) {
            e2.preventDefault();
          }
          break;
      }
    });
    this.addManagedListener(this.eWrapper, "click", clickHandler);
    this.addManagedListener(this.eLabel, "click", clickHandler);
    if (this.pickerIcon) {
      var icon = createIconNoSpan(this.pickerIcon, this.gridOptionsWrapper);
      if (icon) {
        this.eIcon.appendChild(icon);
      }
    }
  };
  AgPickerField2.prototype.refreshLabel = function() {
    if (exists(this.getLabel())) {
      setAriaLabelledBy(this.eWrapper, this.getLabelId());
    } else {
      this.eWrapper.removeAttribute("aria-labelledby");
    }
    _super.prototype.refreshLabel.call(this);
  };
  AgPickerField2.prototype.setAriaLabel = function(label) {
    setAriaLabel(this.eWrapper, label);
    return this;
  };
  AgPickerField2.prototype.setInputWidth = function(width) {
    setElementWidth(this.eWrapper, width);
    return this;
  };
  AgPickerField2.prototype.getFocusableElement = function() {
    return this.eWrapper;
  };
  __decorate$2k([
    RefSelector("eLabel")
  ], AgPickerField2.prototype, "eLabel", void 0);
  __decorate$2k([
    RefSelector("eWrapper")
  ], AgPickerField2.prototype, "eWrapper", void 0);
  __decorate$2k([
    RefSelector("eDisplayField")
  ], AgPickerField2.prototype, "eDisplayField", void 0);
  __decorate$2k([
    RefSelector("eIcon")
  ], AgPickerField2.prototype, "eIcon", void 0);
  return AgPickerField2;
}(AgAbstractField);
var __extends$2H = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2j = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgList = function(_super) {
  __extends$2H(AgList2, _super);
  function AgList2(cssIdentifier) {
    if (cssIdentifier === void 0) {
      cssIdentifier = "default";
    }
    var _this = _super.call(this, '<div class="ag-list ag-' + cssIdentifier + '-list" role="listbox"></div>') || this;
    _this.cssIdentifier = cssIdentifier;
    _this.options = [];
    _this.itemEls = [];
    return _this;
  }
  AgList2.prototype.init = function() {
    this.addManagedListener(this.getGui(), "keydown", this.handleKeyDown.bind(this));
  };
  AgList2.prototype.handleKeyDown = function(e2) {
    var key = e2.key;
    switch (key) {
      case KeyCode.ENTER:
        if (!this.highlightedEl) {
          this.setValue(this.getValue());
        } else {
          var pos = this.itemEls.indexOf(this.highlightedEl);
          this.setValueByIndex(pos);
        }
        break;
      case KeyCode.DOWN:
      case KeyCode.UP:
        var isDown = key === KeyCode.DOWN;
        var itemToHighlight = void 0;
        e2.preventDefault();
        if (!this.highlightedEl) {
          itemToHighlight = this.itemEls[isDown ? 0 : this.itemEls.length - 1];
        } else {
          var currentIdx = this.itemEls.indexOf(this.highlightedEl);
          var nextPos = currentIdx + (isDown ? 1 : -1);
          nextPos = Math.min(Math.max(nextPos, 0), this.itemEls.length - 1);
          itemToHighlight = this.itemEls[nextPos];
        }
        this.highlightItem(itemToHighlight);
        break;
    }
  };
  AgList2.prototype.addOptions = function(listOptions) {
    var _this = this;
    listOptions.forEach(function(listOption) {
      return _this.addOption(listOption);
    });
    return this;
  };
  AgList2.prototype.addOption = function(listOption) {
    var value = listOption.value, text = listOption.text;
    var sanitisedText = escapeString(text || value);
    this.options.push({ value, text: sanitisedText });
    this.renderOption(value, sanitisedText);
    this.updateIndices();
    return this;
  };
  AgList2.prototype.updateIndices = function() {
    var options = this.getGui().querySelectorAll(".ag-list-item");
    options.forEach(function(option2, idx) {
      setAriaPosInSet(option2, idx + 1);
      setAriaSetSize(option2, options.length);
    });
  };
  AgList2.prototype.renderOption = function(value, text) {
    var _this = this;
    var itemEl = document.createElement("div");
    setAriaRole(itemEl, "option");
    itemEl.classList.add("ag-list-item", "ag-" + this.cssIdentifier + "-list-item");
    itemEl.innerHTML = "<span>" + text + "</span>";
    itemEl.tabIndex = -1;
    this.itemEls.push(itemEl);
    this.addManagedListener(itemEl, "mouseover", function() {
      return _this.highlightItem(itemEl);
    });
    this.addManagedListener(itemEl, "mouseleave", function() {
      return _this.clearHighlighted();
    });
    this.addManagedListener(itemEl, "click", function() {
      return _this.setValue(value);
    });
    this.getGui().appendChild(itemEl);
  };
  AgList2.prototype.setValue = function(value, silent) {
    if (this.value === value) {
      this.fireItemSelected();
      return this;
    }
    if (value == null) {
      this.reset();
      return this;
    }
    var idx = this.options.findIndex(function(option3) {
      return option3.value === value;
    });
    if (idx !== -1) {
      var option2 = this.options[idx];
      this.value = option2.value;
      this.displayValue = option2.text != null ? option2.text : option2.value;
      this.highlightItem(this.itemEls[idx]);
      if (!silent) {
        this.fireChangeEvent();
      }
    }
    return this;
  };
  AgList2.prototype.setValueByIndex = function(idx) {
    return this.setValue(this.options[idx].value);
  };
  AgList2.prototype.getValue = function() {
    return this.value;
  };
  AgList2.prototype.getDisplayValue = function() {
    return this.displayValue;
  };
  AgList2.prototype.refreshHighlighted = function() {
    var _this = this;
    this.clearHighlighted();
    var idx = this.options.findIndex(function(option2) {
      return option2.value === _this.value;
    });
    if (idx !== -1) {
      this.highlightItem(this.itemEls[idx]);
    }
  };
  AgList2.prototype.reset = function() {
    this.value = null;
    this.displayValue = null;
    this.clearHighlighted();
    this.fireChangeEvent();
  };
  AgList2.prototype.highlightItem = function(el2) {
    if (!el2.offsetParent) {
      return;
    }
    this.clearHighlighted();
    this.highlightedEl = el2;
    this.highlightedEl.classList.add(AgList2.ACTIVE_CLASS);
    setAriaSelected(this.highlightedEl, true);
    this.highlightedEl.focus();
  };
  AgList2.prototype.clearHighlighted = function() {
    if (!this.highlightedEl || !this.highlightedEl.offsetParent) {
      return;
    }
    this.highlightedEl.classList.remove(AgList2.ACTIVE_CLASS);
    setAriaSelected(this.highlightedEl, false);
    this.highlightedEl = null;
  };
  AgList2.prototype.fireChangeEvent = function() {
    this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
    this.fireItemSelected();
  };
  AgList2.prototype.fireItemSelected = function() {
    this.dispatchEvent({ type: AgList2.EVENT_ITEM_SELECTED });
  };
  AgList2.EVENT_ITEM_SELECTED = "selectedItem";
  AgList2.ACTIVE_CLASS = "ag-active-item";
  __decorate$2j([
    PostConstruct
  ], AgList2.prototype, "init", null);
  return AgList2;
}(Component);
var __extends$2G = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2i = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgSelect = function(_super) {
  __extends$2G(AgSelect2, _super);
  function AgSelect2(config) {
    return _super.call(this, config, "ag-select", "smallDown", "listbox") || this;
  }
  AgSelect2.prototype.init = function() {
    var _this = this;
    this.listComponent = this.createBean(new AgList("select"));
    this.listComponent.setParentComponent(this);
    this.eWrapper.tabIndex = 0;
    this.listComponent.addManagedListener(this.listComponent, AgList.EVENT_ITEM_SELECTED, function() {
      if (_this.hideList) {
        _this.hideList();
      }
    });
    this.listComponent.addManagedListener(this.listComponent, AgAbstractField.EVENT_CHANGED, function() {
      _this.setValue(_this.listComponent.getValue(), false, true);
      if (_this.hideList) {
        _this.hideList();
      }
    });
  };
  AgSelect2.prototype.showPicker = function() {
    var _this = this;
    var listGui = this.listComponent.getGui();
    var eDocument = this.gridOptionsWrapper.getDocument();
    var destroyMouseWheelFunc = this.addManagedListener(eDocument.body, "wheel", function(e2) {
      if (!listGui.contains(e2.target) && _this.hideList) {
        _this.hideList();
      }
    });
    var destroyFocusOutFunc = this.addManagedListener(listGui, "focusout", function(e2) {
      if (!listGui.contains(e2.relatedTarget) && _this.hideList) {
        _this.hideList();
      }
    });
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = this.popupService.addPopup({
      modal: true,
      eChild: listGui,
      closeOnEsc: true,
      closedCallback: function() {
        _this.hideList = null;
        _this.isPickerDisplayed = false;
        destroyFocusOutFunc();
        destroyMouseWheelFunc();
        if (_this.isAlive()) {
          setAriaExpanded(_this.eWrapper, false);
          _this.getFocusableElement().focus();
        }
      },
      ariaLabel: translate2("ariaLabelSelectField", "Select Field")
    });
    if (addPopupRes) {
      this.hideList = addPopupRes.hideFunc;
    }
    this.isPickerDisplayed = true;
    setElementWidth(listGui, getAbsoluteWidth(this.eWrapper));
    setAriaExpanded(this.eWrapper, true);
    listGui.style.maxHeight = getInnerHeight(this.popupService.getPopupParent()) + "px";
    listGui.style.position = "absolute";
    this.popupService.positionPopupUnderComponent({
      type: "ag-list",
      eventSource: this.eWrapper,
      ePopup: listGui,
      keepWithinBounds: true
    });
    this.listComponent.refreshHighlighted();
    return this.listComponent;
  };
  AgSelect2.prototype.addOptions = function(options) {
    var _this = this;
    options.forEach(function(option2) {
      return _this.addOption(option2);
    });
    return this;
  };
  AgSelect2.prototype.addOption = function(option2) {
    this.listComponent.addOption(option2);
    return this;
  };
  AgSelect2.prototype.setValue = function(value, silent, fromPicker) {
    if (this.value === value) {
      return this;
    }
    if (!fromPicker) {
      this.listComponent.setValue(value, true);
    }
    var newValue = this.listComponent.getValue();
    if (newValue === this.getValue()) {
      return this;
    }
    this.eDisplayField.innerHTML = this.listComponent.getDisplayValue();
    return _super.prototype.setValue.call(this, value, silent);
  };
  AgSelect2.prototype.destroy = function() {
    if (this.hideList) {
      this.hideList();
    }
    this.destroyBean(this.listComponent);
    _super.prototype.destroy.call(this);
  };
  __decorate$2i([
    Autowired("popupService")
  ], AgSelect2.prototype, "popupService", void 0);
  __decorate$2i([
    PostConstruct
  ], AgSelect2.prototype, "init", null);
  return AgSelect2;
}(AgPickerField);
var __extends$2F = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2h = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgAbstractInputField = function(_super) {
  __extends$2F(AgAbstractInputField2, _super);
  function AgAbstractInputField2(config, className, inputType, displayFieldTag) {
    if (inputType === void 0) {
      inputType = "text";
    }
    if (displayFieldTag === void 0) {
      displayFieldTag = "input";
    }
    var _this = _super.call(this, config, '\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <' + displayFieldTag + ' ref="eInput" class="ag-input-field-input"></' + displayFieldTag + ">\n                </div>\n            </div>", className) || this;
    _this.inputType = inputType;
    _this.displayFieldTag = displayFieldTag;
    return _this;
  }
  AgAbstractInputField2.prototype.postConstruct = function() {
    _super.prototype.postConstruct.call(this);
    this.setInputType();
    this.eLabel.classList.add(this.className + "-label");
    this.eWrapper.classList.add(this.className + "-input-wrapper");
    this.eInput.classList.add(this.className + "-input");
    this.addCssClass("ag-input-field");
    this.eInput.id = this.eInput.id || "ag-" + this.getCompId() + "-input";
    var _a2 = this.config, width = _a2.width, value = _a2.value;
    if (width != null) {
      this.setWidth(width);
    }
    if (value != null) {
      this.setValue(value);
    }
    this.addInputListeners();
  };
  AgAbstractInputField2.prototype.refreshLabel = function() {
    if (exists(this.getLabel())) {
      setAriaLabelledBy(this.eInput, this.getLabelId());
    } else {
      this.eInput.removeAttribute("aria-labelledby");
    }
    _super.prototype.refreshLabel.call(this);
  };
  AgAbstractInputField2.prototype.addInputListeners = function() {
    var _this = this;
    this.addManagedListener(this.eInput, "input", function(e2) {
      return _this.setValue(e2.target.value);
    });
  };
  AgAbstractInputField2.prototype.setInputType = function() {
    if (this.displayFieldTag === "input") {
      this.eInput.setAttribute("type", this.inputType);
    }
  };
  AgAbstractInputField2.prototype.getInputElement = function() {
    return this.eInput;
  };
  AgAbstractInputField2.prototype.setInputWidth = function(width) {
    setElementWidth(this.eWrapper, width);
    return this;
  };
  AgAbstractInputField2.prototype.setInputName = function(name) {
    this.getInputElement().setAttribute("name", name);
    return this;
  };
  AgAbstractInputField2.prototype.getFocusableElement = function() {
    return this.eInput;
  };
  AgAbstractInputField2.prototype.setMaxLength = function(length) {
    var eInput = this.eInput;
    eInput.maxLength = length;
    return this;
  };
  AgAbstractInputField2.prototype.setInputPlaceholder = function(placeholder) {
    addOrRemoveAttribute(this.eInput, "placeholder", placeholder);
    return this;
  };
  AgAbstractInputField2.prototype.setInputAriaLabel = function(label) {
    setAriaLabel(this.eInput, label);
    return this;
  };
  AgAbstractInputField2.prototype.setDisabled = function(disabled) {
    setDisabled(this.eInput, disabled);
    return _super.prototype.setDisabled.call(this, disabled);
  };
  __decorate$2h([
    RefSelector("eLabel")
  ], AgAbstractInputField2.prototype, "eLabel", void 0);
  __decorate$2h([
    RefSelector("eWrapper")
  ], AgAbstractInputField2.prototype, "eWrapper", void 0);
  __decorate$2h([
    RefSelector("eInput")
  ], AgAbstractInputField2.prototype, "eInput", void 0);
  return AgAbstractInputField2;
}(AgAbstractField);
var __extends$2E = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2g = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ConditionPosition;
(function(ConditionPosition2) {
  ConditionPosition2[ConditionPosition2["One"] = 0] = "One";
  ConditionPosition2[ConditionPosition2["Two"] = 1] = "Two";
})(ConditionPosition || (ConditionPosition = {}));
var SimpleFilter = function(_super) {
  __extends$2E(SimpleFilter2, _super);
  function SimpleFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SimpleFilter2.prototype.getNumberOfInputs = function(type) {
    var customOpts = this.optionsFactory.getCustomOption(type);
    if (customOpts) {
      var numberOfInputs = customOpts.numberOfInputs;
      return numberOfInputs != null ? numberOfInputs : 1;
    }
    var zeroInputTypes = [
      SimpleFilter2.EMPTY,
      SimpleFilter2.NOT_BLANK,
      SimpleFilter2.BLANK
    ];
    if (type && zeroInputTypes.indexOf(type) >= 0) {
      return 0;
    } else if (type === SimpleFilter2.IN_RANGE) {
      return 2;
    }
    return 1;
  };
  SimpleFilter2.prototype.onFloatingFilterChanged = function(type, value) {
    this.setTypeFromFloatingFilter(type);
    this.setValueFromFloatingFilter(value);
    this.onUiChanged(true);
  };
  SimpleFilter2.prototype.setTypeFromFloatingFilter = function(type) {
    this.eType1.setValue(type);
    this.eType2.setValue(this.optionsFactory.getDefaultOption());
    (this.isDefaultOperator("AND") ? this.eJoinOperatorAnd : this.eJoinOperatorOr).setValue(true);
  };
  SimpleFilter2.prototype.getModelFromUi = function() {
    if (!this.isConditionUiComplete(ConditionPosition.One)) {
      return null;
    }
    if (this.isAllowTwoConditions() && this.isConditionUiComplete(ConditionPosition.Two)) {
      return {
        filterType: this.getFilterType(),
        operator: this.getJoinOperator(),
        condition1: this.createCondition(ConditionPosition.One),
        condition2: this.createCondition(ConditionPosition.Two)
      };
    }
    return this.createCondition(ConditionPosition.One);
  };
  SimpleFilter2.prototype.getConditionTypes = function() {
    return [
      this.eType1.getValue(),
      this.eType2.getValue()
    ];
  };
  SimpleFilter2.prototype.getJoinOperator = function() {
    return this.eJoinOperatorOr.getValue() === true ? "OR" : "AND";
  };
  SimpleFilter2.prototype.areModelsEqual = function(a3, b2) {
    if (!a3 && !b2) {
      return true;
    }
    if (!a3 && b2 || a3 && !b2) {
      return false;
    }
    var aIsSimple = !a3.operator;
    var bIsSimple = !b2.operator;
    var oneSimpleOneCombined = !aIsSimple && bIsSimple || aIsSimple && !bIsSimple;
    if (oneSimpleOneCombined) {
      return false;
    }
    var res;
    if (aIsSimple) {
      var aSimple = a3;
      var bSimple = b2;
      res = this.areSimpleModelsEqual(aSimple, bSimple);
    } else {
      var aCombined = a3;
      var bCombined = b2;
      res = aCombined.operator === bCombined.operator && this.areSimpleModelsEqual(aCombined.condition1, bCombined.condition1) && this.areSimpleModelsEqual(aCombined.condition2, bCombined.condition2);
    }
    return res;
  };
  SimpleFilter2.prototype.setModelIntoUi = function(model) {
    var isCombined = model.operator;
    if (isCombined) {
      var combinedModel = model;
      var orChecked = combinedModel.operator === "OR";
      this.eJoinOperatorAnd.setValue(!orChecked);
      this.eJoinOperatorOr.setValue(orChecked);
      this.eType1.setValue(combinedModel.condition1.type);
      this.eType2.setValue(combinedModel.condition2.type);
      this.setConditionIntoUi(combinedModel.condition1, ConditionPosition.One);
      this.setConditionIntoUi(combinedModel.condition2, ConditionPosition.Two);
    } else {
      var simpleModel = model;
      this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"));
      this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"));
      this.eType1.setValue(simpleModel.type);
      this.eType2.setValue(this.optionsFactory.getDefaultOption());
      this.setConditionIntoUi(simpleModel, ConditionPosition.One);
      this.setConditionIntoUi(null, ConditionPosition.Two);
    }
    return AgPromise.resolve();
  };
  SimpleFilter2.prototype.doesFilterPass = function(params) {
    var _this = this;
    var model = this.getModel();
    if (model == null) {
      return true;
    }
    var operator = model.operator;
    var models = [];
    if (operator) {
      var combinedModel = model;
      models.push(combinedModel.condition1, combinedModel.condition2);
    } else {
      models.push(model);
    }
    var combineFunction = operator && operator === "OR" ? "some" : "every";
    return models[combineFunction](function(m3) {
      return _this.individualConditionPasses(params, m3);
    });
  };
  SimpleFilter2.prototype.setParams = function(params) {
    _super.prototype.setParams.call(this, params);
    this.optionsFactory = new OptionsFactory();
    this.optionsFactory.init(params, this.getDefaultFilterOptions());
    this.allowTwoConditions = !params.suppressAndOrCondition;
    this.alwaysShowBothConditions = !!params.alwaysShowBothConditions;
    this.defaultJoinOperator = this.getDefaultJoinOperator(params.defaultJoinOperator);
    this.putOptionsIntoDropdown();
    this.addChangedListeners();
  };
  SimpleFilter2.prototype.getDefaultJoinOperator = function(defaultJoinOperator) {
    return includes(["AND", "OR"], defaultJoinOperator) ? defaultJoinOperator : "AND";
  };
  SimpleFilter2.prototype.putOptionsIntoDropdown = function() {
    var _this = this;
    var filterOptions = this.optionsFactory.getFilterOptions();
    var eTypes = [this.eType1, this.eType2];
    filterOptions.forEach(function(option2) {
      var listOption = typeof option2 === "string" ? _this.createBoilerplateListOption(option2) : _this.createCustomListOption(option2);
      eTypes.forEach(function(eType) {
        return eType.addOption(listOption);
      });
    });
    eTypes.forEach(function(eType) {
      return eType.setDisabled(filterOptions.length <= 1);
    });
  };
  SimpleFilter2.prototype.createBoilerplateListOption = function(option2) {
    return { value: option2, text: this.translate(option2) };
  };
  SimpleFilter2.prototype.createCustomListOption = function(option2) {
    var displayKey = option2.displayKey;
    var customOption = this.optionsFactory.getCustomOption(option2.displayKey);
    return {
      value: displayKey,
      text: customOption ? this.gridOptionsWrapper.getLocaleTextFunc()(customOption.displayKey, customOption.displayName) : this.translate(displayKey)
    };
  };
  SimpleFilter2.prototype.isAllowTwoConditions = function() {
    return this.allowTwoConditions;
  };
  SimpleFilter2.prototype.createBodyTemplate = function() {
    return '\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            ' + this.createValueTemplate(ConditionPosition.One) + '\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            ' + this.createValueTemplate(ConditionPosition.Two);
  };
  SimpleFilter2.prototype.getCssIdentifier = function() {
    return "simple-filter";
  };
  SimpleFilter2.prototype.updateUiVisibility = function() {
    var _this = this;
    var elementConditionGroups = [
      [this.eType1],
      [this.eType2, this.eJoinOperatorPanel, this.eJoinOperatorAnd, this.eJoinOperatorOr]
    ];
    var elementBodies = [this.eCondition1Body, this.eCondition2Body];
    elementConditionGroups.forEach(function(group, position) {
      var visible = _this.isConditionVisible(position);
      var disabled = _this.isConditionDisabled(position);
      group.forEach(function(element) {
        if (element instanceof AgAbstractInputField || element instanceof AgSelect) {
          element.setDisabled(disabled);
          element.setDisplayed(visible);
        } else {
          setDisabled(element, disabled);
          setDisplayed(element, visible);
        }
      });
    });
    elementBodies.forEach(function(element, index) {
      setDisplayed(element, _this.isConditionBodyVisible(index));
    });
    this.forEachInput(function(element, index, position, numberOfInputs) {
      _this.setElementDisplayed(element, index < numberOfInputs);
      _this.setElementDisabled(element, _this.isConditionDisabled(position));
    });
    this.resetPlaceholder();
  };
  SimpleFilter2.prototype.afterGuiAttached = function(params) {
    _super.prototype.afterGuiAttached.call(this, params);
    this.resetPlaceholder();
    if (!params || !params.suppressFocus && !this.isReadOnly()) {
      var firstInput = this.getInputs()[0][0];
      if (!firstInput) {
        return;
      }
      if (firstInput instanceof AgAbstractInputField) {
        firstInput.getInputElement().focus();
      }
    }
  };
  SimpleFilter2.prototype.resetPlaceholder = function() {
    var _this = this;
    var globalTranslate = this.gridOptionsWrapper.getLocaleTextFunc();
    this.forEachInput(function(element, index, _2, numberOfInputs) {
      if (!(element instanceof AgAbstractInputField)) {
        return;
      }
      var placeholder = index === 0 && numberOfInputs > 1 ? "inRangeStart" : index === 0 ? "filterOoo" : "inRangeEnd";
      var ariaLabel = index === 0 && numberOfInputs > 1 ? globalTranslate("ariaFilterFromValue", "Filter from value") : index === 0 ? globalTranslate("ariaFilterValue", "Filter Value") : globalTranslate("ariaFilterToValue", "Filter to Value");
      element.setInputPlaceholder(_this.translate(placeholder));
      element.setInputAriaLabel(ariaLabel);
    });
  };
  SimpleFilter2.prototype.setElementValue = function(element, value, silent) {
    if (element instanceof AgAbstractInputField) {
      element.setValue(value != null ? String(value) : null, silent);
    }
  };
  SimpleFilter2.prototype.setElementDisplayed = function(element, displayed) {
    if (element instanceof Component) {
      setDisplayed(element.getGui(), displayed);
    }
  };
  SimpleFilter2.prototype.setElementDisabled = function(element, disabled) {
    if (element instanceof Component) {
      setDisabled(element.getGui(), disabled);
    }
  };
  SimpleFilter2.prototype.attachElementOnChange = function(element, listener) {
    if (element instanceof AgAbstractInputField) {
      element.onValueChange(listener);
    }
  };
  SimpleFilter2.prototype.forEachInput = function(cb) {
    var _this = this;
    var inputs = this.getInputs();
    this.getConditionTypes().forEach(function(type, position) {
      var numberOfInputs = _this.getNumberOfInputs(type);
      for (var index = 0; index < inputs[position].length; index++) {
        var input2 = inputs[position][index];
        if (input2 != null) {
          cb(input2, index, position, numberOfInputs);
        }
      }
    });
  };
  SimpleFilter2.prototype.isConditionVisible = function(position) {
    if (position === 0) {
      return true;
    }
    if (!this.allowTwoConditions) {
      return false;
    }
    if (this.isReadOnly()) {
      return this.isConditionUiComplete(position);
    }
    if (this.alwaysShowBothConditions) {
      return true;
    }
    return this.isConditionUiComplete(position - 1);
  };
  SimpleFilter2.prototype.isConditionDisabled = function(position) {
    if (this.isReadOnly()) {
      return true;
    }
    if (!this.isConditionVisible(position)) {
      return true;
    }
    if (position === 0) {
      return false;
    }
    return !this.isConditionUiComplete(position - 1);
  };
  SimpleFilter2.prototype.isConditionBodyVisible = function(position) {
    if (!this.isConditionVisible(position)) {
      return false;
    }
    var type = this.getConditionTypes()[position];
    var numberOfInputs = this.getNumberOfInputs(type);
    return numberOfInputs > 0;
  };
  SimpleFilter2.prototype.isConditionUiComplete = function(position) {
    var type = this.getConditionTypes()[position];
    if (type === SimpleFilter2.EMPTY) {
      return false;
    }
    if (this.getValues(position).some(function(v) {
      return v == null;
    })) {
      return false;
    }
    return true;
  };
  SimpleFilter2.prototype.resetUiToDefaults = function(silent) {
    var _this = this;
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var filteringLabel = translate2("ariaFilteringOperator", "Filtering operator");
    var uniqueGroupId = "ag-simple-filter-and-or-" + this.getCompId();
    var defaultOption = this.optionsFactory.getDefaultOption();
    this.eType1.setValue(defaultOption, silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly());
    this.eType2.setValue(this.optionsFactory.getDefaultOption(), silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly());
    this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"), silent).setName(uniqueGroupId).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly());
    this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"), silent).setName(uniqueGroupId).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly());
    this.forEachInput(function(element) {
      _this.setElementValue(element, null, silent);
      _this.setElementDisabled(element, _this.isReadOnly());
    });
    this.resetPlaceholder();
    return AgPromise.resolve();
  };
  SimpleFilter2.prototype.setConditionIntoUi = function(model, position) {
    var _this = this;
    var values2 = this.mapValuesFromModel(model);
    this.forEachInput(function(element, index, elPosition, _2) {
      if (elPosition !== position) {
        return;
      }
      _this.setElementValue(element, values2[index] != null ? values2[index] : null);
    });
  };
  SimpleFilter2.prototype.setValueFromFloatingFilter = function(value) {
    var _this = this;
    this.forEachInput(function(element, index, position, _2) {
      _this.setElementValue(element, index === 0 && position === 0 ? value : null);
    });
  };
  SimpleFilter2.prototype.isDefaultOperator = function(operator) {
    return operator === this.defaultJoinOperator;
  };
  SimpleFilter2.prototype.addChangedListeners = function() {
    var _this = this;
    if (this.isReadOnly()) {
      return;
    }
    var listener = function() {
      return _this.onUiChanged();
    };
    this.eType1.onValueChange(listener);
    this.eType2.onValueChange(listener);
    this.eJoinOperatorOr.onValueChange(listener);
    this.eJoinOperatorAnd.onValueChange(listener);
    this.forEachInput(function(element) {
      _this.attachElementOnChange(element, listener);
    });
  };
  SimpleFilter2.prototype.individualConditionPasses = function(params, filterModel) {
    var cellValue = this.getCellValue(params.node);
    var values2 = this.mapValuesFromModel(filterModel);
    var customFilterOption = this.optionsFactory.getCustomOption(filterModel.type);
    var customFilterResult = this.evaluateCustomFilter(customFilterOption, values2, cellValue);
    if (customFilterResult != null) {
      return customFilterResult;
    }
    if (cellValue == null) {
      return this.evaluateNullValue(filterModel.type);
    }
    return this.evaluateNonNullValue(values2, cellValue, filterModel, params);
  };
  SimpleFilter2.prototype.evaluateCustomFilter = function(customFilterOption, values2, cellValue) {
    if (customFilterOption == null) {
      return;
    }
    var predicate = customFilterOption.predicate;
    if (predicate != null && !values2.some(function(v) {
      return v == null;
    })) {
      return predicate(values2, cellValue);
    }
    return;
  };
  SimpleFilter2.prototype.isBlank = function(cellValue) {
    return cellValue == null || typeof cellValue === "string" && cellValue.trim().length === 0;
  };
  SimpleFilter2.EMPTY = "empty";
  SimpleFilter2.BLANK = "blank";
  SimpleFilter2.NOT_BLANK = "notBlank";
  SimpleFilter2.EQUALS = "equals";
  SimpleFilter2.NOT_EQUAL = "notEqual";
  SimpleFilter2.LESS_THAN = "lessThan";
  SimpleFilter2.LESS_THAN_OR_EQUAL = "lessThanOrEqual";
  SimpleFilter2.GREATER_THAN = "greaterThan";
  SimpleFilter2.GREATER_THAN_OR_EQUAL = "greaterThanOrEqual";
  SimpleFilter2.IN_RANGE = "inRange";
  SimpleFilter2.CONTAINS = "contains";
  SimpleFilter2.NOT_CONTAINS = "notContains";
  SimpleFilter2.STARTS_WITH = "startsWith";
  SimpleFilter2.ENDS_WITH = "endsWith";
  __decorate$2g([
    RefSelector("eOptions1")
  ], SimpleFilter2.prototype, "eType1", void 0);
  __decorate$2g([
    RefSelector("eOptions2")
  ], SimpleFilter2.prototype, "eType2", void 0);
  __decorate$2g([
    RefSelector("eJoinOperatorPanel")
  ], SimpleFilter2.prototype, "eJoinOperatorPanel", void 0);
  __decorate$2g([
    RefSelector("eJoinOperatorAnd")
  ], SimpleFilter2.prototype, "eJoinOperatorAnd", void 0);
  __decorate$2g([
    RefSelector("eJoinOperatorOr")
  ], SimpleFilter2.prototype, "eJoinOperatorOr", void 0);
  __decorate$2g([
    RefSelector("eCondition1Body")
  ], SimpleFilter2.prototype, "eCondition1Body", void 0);
  __decorate$2g([
    RefSelector("eCondition2Body")
  ], SimpleFilter2.prototype, "eCondition2Body", void 0);
  return SimpleFilter2;
}(ProvidedFilter);
var __extends$2D = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var ScalarFilter = function(_super) {
  __extends$2D(ScalarFilter2, _super);
  function ScalarFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ScalarFilter2.prototype.setParams = function(params) {
    _super.prototype.setParams.call(this, params);
    this.scalarFilterParams = params;
  };
  ScalarFilter2.prototype.evaluateNullValue = function(filterType) {
    switch (filterType) {
      case ScalarFilter2.EQUALS:
      case ScalarFilter2.NOT_EQUAL:
        if (this.scalarFilterParams.includeBlanksInEquals) {
          return true;
        }
        break;
      case ScalarFilter2.GREATER_THAN:
      case ScalarFilter2.GREATER_THAN_OR_EQUAL:
        if (this.scalarFilterParams.includeBlanksInGreaterThan) {
          return true;
        }
        break;
      case ScalarFilter2.LESS_THAN:
      case ScalarFilter2.LESS_THAN_OR_EQUAL:
        if (this.scalarFilterParams.includeBlanksInLessThan) {
          return true;
        }
        break;
      case ScalarFilter2.IN_RANGE:
        if (this.scalarFilterParams.includeBlanksInRange) {
          return true;
        }
        break;
      case ScalarFilter2.BLANK:
        return true;
      case ScalarFilter2.NOT_BLANK:
        return false;
    }
    return false;
  };
  ScalarFilter2.prototype.evaluateNonNullValue = function(values2, cellValue, filterModel) {
    var comparator = this.comparator();
    var compareResult = values2[0] != null ? comparator(values2[0], cellValue) : 0;
    switch (filterModel.type) {
      case ScalarFilter2.EQUALS:
        return compareResult === 0;
      case ScalarFilter2.NOT_EQUAL:
        return compareResult !== 0;
      case ScalarFilter2.GREATER_THAN:
        return compareResult > 0;
      case ScalarFilter2.GREATER_THAN_OR_EQUAL:
        return compareResult >= 0;
      case ScalarFilter2.LESS_THAN:
        return compareResult < 0;
      case ScalarFilter2.LESS_THAN_OR_EQUAL:
        return compareResult <= 0;
      case ScalarFilter2.IN_RANGE: {
        var compareToResult = comparator(values2[1], cellValue);
        return this.scalarFilterParams.inRangeInclusive ? compareResult >= 0 && compareToResult <= 0 : compareResult > 0 && compareToResult < 0;
      }
      case ScalarFilter2.BLANK:
        return this.isBlank(cellValue);
      case ScalarFilter2.NOT_BLANK:
        return !this.isBlank(cellValue);
      default:
        console.warn('AG Grid: Unexpected type of filter "' + filterModel.type + '", it looks like the filter was configured with incorrect Filter Options');
        return true;
    }
  };
  return ScalarFilter2;
}(SimpleFilter);
var __extends$2C = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$a = function() {
  __assign$a = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$a.apply(this, arguments);
};
var __decorate$2f = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DEFAULT_MIN_YEAR = 1e3;
var DEFAULT_MAX_YEAR = Infinity;
var DateFilter = function(_super) {
  __extends$2C(DateFilter2, _super);
  function DateFilter2() {
    var _this = _super.call(this, "dateFilter") || this;
    _this.minValidYear = DEFAULT_MIN_YEAR;
    _this.maxValidYear = DEFAULT_MAX_YEAR;
    return _this;
  }
  DateFilter2.prototype.afterGuiAttached = function(params) {
    _super.prototype.afterGuiAttached.call(this, params);
    this.dateCondition1FromComp.afterGuiAttached(params);
  };
  DateFilter2.prototype.mapValuesFromModel = function(filterModel) {
    var _a2 = filterModel || {}, dateFrom = _a2.dateFrom, dateTo = _a2.dateTo, type = _a2.type;
    return [
      dateFrom && parseDateTimeFromString(dateFrom) || null,
      dateTo && parseDateTimeFromString(dateTo) || null
    ].slice(0, this.getNumberOfInputs(type));
  };
  DateFilter2.prototype.comparator = function() {
    return this.dateFilterParams.comparator ? this.dateFilterParams.comparator : this.defaultComparator.bind(this);
  };
  DateFilter2.prototype.defaultComparator = function(filterDate, cellValue) {
    var cellAsDate = cellValue;
    if (cellValue == null || cellAsDate < filterDate) {
      return -1;
    }
    if (cellAsDate > filterDate) {
      return 1;
    }
    return 0;
  };
  DateFilter2.prototype.setParams = function(params) {
    _super.prototype.setParams.call(this, params);
    this.dateFilterParams = params;
    var yearParser = function(param, fallback) {
      if (params[param] != null) {
        if (!isNaN(params[param])) {
          return params[param] == null ? fallback : Number(params[param]);
        } else {
          console.warn("AG Grid: DateFilter " + param + " is not a number");
        }
      }
      return fallback;
    };
    this.minValidYear = yearParser("minValidYear", DEFAULT_MIN_YEAR);
    this.maxValidYear = yearParser("maxValidYear", DEFAULT_MAX_YEAR);
    if (this.minValidYear > this.maxValidYear) {
      console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear");
    }
    this.createDateComponents();
  };
  DateFilter2.prototype.createDateComponents = function() {
    var _this = this;
    var createDateCompWrapper = function(element) {
      return new DateCompWrapper(_this.getContext(), _this.userComponentFactory, {
        onDateChanged: function() {
          return _this.onUiChanged();
        },
        filterParams: _this.dateFilterParams
      }, element);
    };
    this.dateCondition1FromComp = createDateCompWrapper(this.eCondition1PanelFrom);
    this.dateCondition1ToComp = createDateCompWrapper(this.eCondition1PanelTo);
    this.dateCondition2FromComp = createDateCompWrapper(this.eCondition2PanelFrom);
    this.dateCondition2ToComp = createDateCompWrapper(this.eCondition2PanelTo);
    this.addDestroyFunc(function() {
      _this.forEachInput(function(element) {
        return element.destroy();
      });
    });
  };
  DateFilter2.prototype.setElementValue = function(element, value, silent) {
    element.setDate(value);
  };
  DateFilter2.prototype.setElementDisplayed = function(element, displayed) {
    element.setDisplayed(displayed);
  };
  DateFilter2.prototype.setElementDisabled = function(element, disabled) {
    element.setDisabled(disabled);
  };
  DateFilter2.prototype.getDefaultFilterOptions = function() {
    return DateFilter2.DEFAULT_FILTER_OPTIONS;
  };
  DateFilter2.prototype.createValueTemplate = function(position) {
    var pos = position === ConditionPosition.One ? "1" : "2";
    return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition' + pos + 'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition' + pos + 'PanelTo"></div>\n            </div>';
  };
  DateFilter2.prototype.isConditionUiComplete = function(position) {
    var _this = this;
    if (!_super.prototype.isConditionUiComplete.call(this, position)) {
      return false;
    }
    var isValidDate = function(value) {
      return value != null && value.getUTCFullYear() >= _this.minValidYear && value.getUTCFullYear() <= _this.maxValidYear;
    };
    var valid = true;
    this.forEachInput(function(element, index, elPosition, numberOfInputs) {
      if (elPosition !== position || !valid || index >= numberOfInputs) {
        return;
      }
      valid = valid && isValidDate(element.getDate());
    });
    return valid;
  };
  DateFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
    return aSimple.dateFrom === bSimple.dateFrom && aSimple.dateTo === bSimple.dateTo && aSimple.type === bSimple.type;
  };
  DateFilter2.prototype.getFilterType = function() {
    return "date";
  };
  DateFilter2.prototype.createCondition = function(position) {
    var type = this.getConditionTypes()[position];
    var model = {};
    var values2 = this.getValues(position);
    if (values2.length > 0) {
      model.dateFrom = serialiseDate(values2[0]);
    }
    if (values2.length > 1) {
      model.dateTo = serialiseDate(values2[1]);
    }
    return __assign$a({ dateFrom: null, dateTo: null, filterType: this.getFilterType(), type }, model);
  };
  DateFilter2.prototype.resetPlaceholder = function() {
    var globalTranslate = this.gridOptionsWrapper.getLocaleTextFunc();
    var placeholder = this.translate("dateFormatOoo");
    var ariaLabel = globalTranslate("ariaFilterValue", "Filter Value");
    this.forEachInput(function(element) {
      element.setInputPlaceholder(placeholder);
      element.setInputAriaLabel(ariaLabel);
    });
  };
  DateFilter2.prototype.getInputs = function() {
    return [
      [this.dateCondition1FromComp, this.dateCondition1ToComp],
      [this.dateCondition2FromComp, this.dateCondition2ToComp]
    ];
  };
  DateFilter2.prototype.getValues = function(position) {
    var result = [];
    this.forEachInput(function(element, index, elPosition, numberOfInputs) {
      if (position === elPosition && index < numberOfInputs) {
        result.push(element.getDate());
      }
    });
    return result;
  };
  DateFilter2.DEFAULT_FILTER_OPTIONS = [
    ScalarFilter.EQUALS,
    ScalarFilter.GREATER_THAN,
    ScalarFilter.LESS_THAN,
    ScalarFilter.NOT_EQUAL,
    ScalarFilter.IN_RANGE,
    ScalarFilter.BLANK,
    ScalarFilter.NOT_BLANK
  ];
  __decorate$2f([
    RefSelector("eCondition1PanelFrom")
  ], DateFilter2.prototype, "eCondition1PanelFrom", void 0);
  __decorate$2f([
    RefSelector("eCondition1PanelTo")
  ], DateFilter2.prototype, "eCondition1PanelTo", void 0);
  __decorate$2f([
    RefSelector("eCondition2PanelFrom")
  ], DateFilter2.prototype, "eCondition2PanelFrom", void 0);
  __decorate$2f([
    RefSelector("eCondition2PanelTo")
  ], DateFilter2.prototype, "eCondition2PanelTo", void 0);
  __decorate$2f([
    Autowired("userComponentFactory")
  ], DateFilter2.prototype, "userComponentFactory", void 0);
  return DateFilter2;
}(ScalarFilter);
var __extends$2B = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var SimpleFloatingFilter = function(_super) {
  __extends$2B(SimpleFloatingFilter2, _super);
  function SimpleFloatingFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SimpleFloatingFilter2.prototype.getDefaultDebounceMs = function() {
    return 0;
  };
  SimpleFloatingFilter2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  SimpleFloatingFilter2.prototype.getTextFromModel = function(model) {
    if (!model) {
      return null;
    }
    var isCombined = model.operator != null;
    if (isCombined) {
      var combinedModel = model;
      var _a2 = combinedModel || {}, condition1 = _a2.condition1, condition2 = _a2.condition2;
      var customOption1 = this.optionsFactory.getCustomOption(condition1.type);
      var customOption2 = this.optionsFactory.getCustomOption(condition2.type);
      return [
        this.conditionToString(condition1, customOption1),
        combinedModel.operator,
        this.conditionToString(condition2, customOption2)
      ].join(" ");
    } else {
      var condition = model;
      var customOption = this.optionsFactory.getCustomOption(condition.type);
      var _b = customOption || {}, displayKey = _b.displayKey, displayName = _b.displayName, numberOfInputs = _b.numberOfInputs;
      if (displayKey && displayName && numberOfInputs === 0) {
        this.gridOptionsWrapper.getLocaleTextFunc()(displayKey, displayName);
        return displayName;
      }
      return this.conditionToString(condition, customOption);
    }
  };
  SimpleFloatingFilter2.prototype.isEventFromFloatingFilter = function(event) {
    return event && event.afterFloatingFilter;
  };
  SimpleFloatingFilter2.prototype.getLastType = function() {
    return this.lastType;
  };
  SimpleFloatingFilter2.prototype.isReadOnly = function() {
    return this.readOnly;
  };
  SimpleFloatingFilter2.prototype.setLastTypeFromModel = function(model) {
    if (!model) {
      this.lastType = this.optionsFactory.getDefaultOption();
      return;
    }
    var isCombined = model.operator;
    var condition;
    if (isCombined) {
      var combinedModel = model;
      condition = combinedModel.condition1;
    } else {
      condition = model;
    }
    this.lastType = condition.type;
  };
  SimpleFloatingFilter2.prototype.canWeEditAfterModelFromParentFilter = function(model) {
    if (!model) {
      return this.isTypeEditable(this.lastType);
    }
    var isCombined = model.operator;
    if (isCombined) {
      return false;
    }
    var simpleModel = model;
    return this.isTypeEditable(simpleModel.type);
  };
  SimpleFloatingFilter2.prototype.init = function(params) {
    this.optionsFactory = new OptionsFactory();
    this.optionsFactory.init(params.filterParams, this.getDefaultFilterOptions());
    this.lastType = this.optionsFactory.getDefaultOption();
    this.readOnly = !!params.filterParams.readOnly;
    var editable = this.isTypeEditable(this.lastType);
    this.setEditable(editable);
  };
  SimpleFloatingFilter2.prototype.doesFilterHaveSingleInput = function(filterType) {
    var customFilterOption = this.optionsFactory.getCustomOption(filterType);
    var numberOfInputs = (customFilterOption || {}).numberOfInputs;
    return numberOfInputs == null || numberOfInputs == 1;
  };
  SimpleFloatingFilter2.prototype.isTypeEditable = function(type) {
    var uneditableTypes = [
      SimpleFilter.IN_RANGE,
      SimpleFilter.EMPTY,
      SimpleFilter.BLANK,
      SimpleFilter.NOT_BLANK
    ];
    return !!type && !this.isReadOnly() && this.doesFilterHaveSingleInput(type) && uneditableTypes.indexOf(type) < 0;
  };
  return SimpleFloatingFilter2;
}(Component);
var __extends$2A = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2e = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DateFloatingFilter = function(_super) {
  __extends$2A(DateFloatingFilter2, _super);
  function DateFloatingFilter2() {
    return _super.call(this, '\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>') || this;
  }
  DateFloatingFilter2.prototype.getDefaultFilterOptions = function() {
    return DateFilter.DEFAULT_FILTER_OPTIONS;
  };
  DateFloatingFilter2.prototype.conditionToString = function(condition, options) {
    var type = condition.type;
    var numberOfInputs = (options || {}).numberOfInputs;
    var isRange = type == SimpleFilter.IN_RANGE || numberOfInputs === 2;
    var dateFrom = parseDateTimeFromString(condition.dateFrom);
    var dateTo = parseDateTimeFromString(condition.dateTo);
    var format2 = this.filterParams.inRangeFloatingFilterDateFormat;
    if (isRange) {
      var formattedFrom = dateFrom !== null ? dateToFormattedString(dateFrom, format2) : "null";
      var formattedTo = dateTo !== null ? dateToFormattedString(dateTo, format2) : "null";
      return formattedFrom + "-" + formattedTo;
    }
    if (dateFrom != null) {
      return dateToFormattedString(dateFrom, format2);
    }
    return "" + type;
  };
  DateFloatingFilter2.prototype.init = function(params) {
    _super.prototype.init.call(this, params);
    this.params = params;
    this.filterParams = params.filterParams;
    this.createDateComponent();
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    this.eReadOnlyText.setDisabled(true).setInputAriaLabel(translate2("ariaDateFilterInput", "Date Filter Input"));
  };
  DateFloatingFilter2.prototype.setEditable = function(editable) {
    setDisplayed(this.eDateWrapper, editable);
    setDisplayed(this.eReadOnlyText.getGui(), !editable);
  };
  DateFloatingFilter2.prototype.onParentModelChanged = function(model, event) {
    if (this.isEventFromFloatingFilter(event)) {
      return;
    }
    _super.prototype.setLastTypeFromModel.call(this, model);
    var allowEditing = !this.isReadOnly() && this.canWeEditAfterModelFromParentFilter(model);
    this.setEditable(allowEditing);
    if (allowEditing) {
      if (model) {
        var dateModel = model;
        this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom));
      } else {
        this.dateComp.setDate(null);
      }
      this.eReadOnlyText.setValue("");
    } else {
      this.eReadOnlyText.setValue(this.getTextFromModel(model));
      this.dateComp.setDate(null);
    }
  };
  DateFloatingFilter2.prototype.onDateChanged = function() {
    var _this = this;
    var filterValueDate = this.dateComp.getDate();
    var filterValueText = serialiseDate(filterValueDate);
    this.params.parentFilterInstance(function(filterInstance) {
      if (filterInstance) {
        var date2 = parseDateTimeFromString(filterValueText);
        filterInstance.onFloatingFilterChanged(_this.getLastType() || null, date2);
      }
    });
  };
  DateFloatingFilter2.prototype.createDateComponent = function() {
    var _this = this;
    var debounceMs = ProvidedFilter.getDebounceMs(this.params.filterParams, this.getDefaultDebounceMs());
    var dateComponentParams = {
      onDateChanged: debounce(this.onDateChanged.bind(this), debounceMs),
      filterParams: this.params.column.getColDef().filterParams
    };
    this.dateComp = new DateCompWrapper(this.getContext(), this.userComponentFactory, dateComponentParams, this.eDateWrapper);
    this.addDestroyFunc(function() {
      return _this.dateComp.destroy();
    });
  };
  __decorate$2e([
    Autowired("userComponentFactory")
  ], DateFloatingFilter2.prototype, "userComponentFactory", void 0);
  __decorate$2e([
    RefSelector("eReadOnlyText")
  ], DateFloatingFilter2.prototype, "eReadOnlyText", void 0);
  __decorate$2e([
    RefSelector("eDateWrapper")
  ], DateFloatingFilter2.prototype, "eDateWrapper", void 0);
  return DateFloatingFilter2;
}(SimpleFloatingFilter);
var __extends$2z = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2d = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DefaultDateComponent = function(_super) {
  __extends$2z(DefaultDateComponent2, _super);
  function DefaultDateComponent2() {
    return _super.call(this, '\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>') || this;
  }
  DefaultDateComponent2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  DefaultDateComponent2.prototype.init = function(params) {
    var _this = this;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var inputElement = this.eDateInput.getInputElement();
    if (this.shouldUseBrowserDatePicker(params)) {
      inputElement.type = "date";
    }
    this.addManagedListener(inputElement, "mousedown", function() {
      if (_this.eDateInput.isDisabled()) {
        return;
      }
      inputElement.focus();
    });
    this.addManagedListener(inputElement, "input", function(e2) {
      if (e2.target !== eDocument.activeElement) {
        return;
      }
      if (_this.eDateInput.isDisabled()) {
        return;
      }
      params.onDateChanged();
    });
    var _a2 = params.filterParams || {}, minValidYear = _a2.minValidYear, maxValidYear = _a2.maxValidYear;
    if (minValidYear) {
      inputElement.min = minValidYear + "-01-01";
    }
    if (maxValidYear) {
      inputElement.max = maxValidYear + "-12-31";
    }
  };
  DefaultDateComponent2.prototype.getDate = function() {
    return parseDateTimeFromString(this.eDateInput.getValue());
  };
  DefaultDateComponent2.prototype.setDate = function(date2) {
    this.eDateInput.setValue(serialiseDate(date2, false));
  };
  DefaultDateComponent2.prototype.setInputPlaceholder = function(placeholder) {
    this.eDateInput.setInputPlaceholder(placeholder);
  };
  DefaultDateComponent2.prototype.setDisabled = function(disabled) {
    this.eDateInput.setDisabled(disabled);
  };
  DefaultDateComponent2.prototype.afterGuiAttached = function(params) {
    if (!params || !params.suppressFocus) {
      this.eDateInput.getInputElement().focus();
    }
  };
  DefaultDateComponent2.prototype.shouldUseBrowserDatePicker = function(params) {
    if (params.filterParams && params.filterParams.browserDatePicker != null) {
      return params.filterParams.browserDatePicker;
    }
    return isBrowserChrome() || isBrowserFirefox();
  };
  __decorate$2d([
    RefSelector("eDateInput")
  ], DefaultDateComponent2.prototype, "eDateInput", void 0);
  return DefaultDateComponent2;
}(Component);
var __extends$2y = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2c = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var NumberFilter = function(_super) {
  __extends$2y(NumberFilter2, _super);
  function NumberFilter2() {
    return _super.call(this, "numberFilter") || this;
  }
  NumberFilter2.prototype.mapValuesFromModel = function(filterModel) {
    var _a2 = filterModel || {}, filter = _a2.filter, filterTo = _a2.filterTo, type = _a2.type;
    return [
      filter == null ? null : filter,
      filterTo == null ? null : filterTo
    ].slice(0, this.getNumberOfInputs(type));
  };
  NumberFilter2.prototype.getDefaultDebounceMs = function() {
    return 500;
  };
  NumberFilter2.prototype.comparator = function() {
    return function(left, right) {
      if (left === right) {
        return 0;
      }
      return left < right ? 1 : -1;
    };
  };
  NumberFilter2.prototype.setParams = function(params) {
    this.numberFilterParams = params;
    var allowedCharPattern = this.getAllowedCharPattern();
    if (allowedCharPattern) {
      var config = { allowedCharPattern };
      this.resetTemplate({
        "eValue-index0-1": config,
        "eValue-index1-1": config,
        "eValue-index0-2": config,
        "eValue-index1-2": config
      });
    }
    _super.prototype.setParams.call(this, params);
  };
  NumberFilter2.prototype.getDefaultFilterOptions = function() {
    return NumberFilter2.DEFAULT_FILTER_OPTIONS;
  };
  NumberFilter2.prototype.createValueTemplate = function(position) {
    var pos = position === ConditionPosition.One ? "1" : "2";
    var allowedCharPattern = this.getAllowedCharPattern();
    var agElementTag = allowedCharPattern ? "ag-input-text-field" : "ag-input-number-field";
    return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body" role="presentation">\n                <' + agElementTag + ' class="ag-filter-from ag-filter-filter" ref="eValue-index0-' + pos + '"></' + agElementTag + ">\n                <" + agElementTag + ' class="ag-filter-to ag-filter-filter" ref="eValue-index1-' + pos + '"></' + agElementTag + ">\n            </div>";
  };
  NumberFilter2.prototype.getValues = function(position) {
    var _this = this;
    var result = [];
    this.forEachInput(function(element, index, elPosition, numberOfInputs) {
      if (position === elPosition && index < numberOfInputs) {
        result.push(_this.stringToFloat(element.getValue()));
      }
    });
    return result;
  };
  NumberFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
    return aSimple.filter === bSimple.filter && aSimple.filterTo === bSimple.filterTo && aSimple.type === bSimple.type;
  };
  NumberFilter2.prototype.getFilterType = function() {
    return "number";
  };
  NumberFilter2.prototype.stringToFloat = function(value) {
    if (typeof value === "number") {
      return value;
    }
    var filterText = makeNull(value);
    if (filterText != null && filterText.trim() === "") {
      filterText = null;
    }
    if (this.numberFilterParams.numberParser) {
      return this.numberFilterParams.numberParser(filterText);
    }
    return filterText == null || filterText.trim() === "-" ? null : parseFloat(filterText);
  };
  NumberFilter2.prototype.createCondition = function(position) {
    var type = this.getConditionTypes()[position];
    var model = {
      filterType: this.getFilterType(),
      type
    };
    var values2 = this.getValues(position);
    if (values2.length > 0) {
      model.filter = values2[0];
    }
    if (values2.length > 1) {
      model.filterTo = values2[1];
    }
    return model;
  };
  NumberFilter2.prototype.getInputs = function() {
    return [
      [this.eValueFrom1, this.eValueTo1],
      [this.eValueFrom2, this.eValueTo2]
    ];
  };
  NumberFilter2.prototype.getAllowedCharPattern = function() {
    var allowedCharPattern = (this.numberFilterParams || {}).allowedCharPattern;
    if (allowedCharPattern) {
      return allowedCharPattern;
    }
    if (!isBrowserChrome() && !isBrowserEdge()) {
      return "\\d\\-\\.";
    }
    return null;
  };
  NumberFilter2.DEFAULT_FILTER_OPTIONS = [
    ScalarFilter.EQUALS,
    ScalarFilter.NOT_EQUAL,
    ScalarFilter.LESS_THAN,
    ScalarFilter.LESS_THAN_OR_EQUAL,
    ScalarFilter.GREATER_THAN,
    ScalarFilter.GREATER_THAN_OR_EQUAL,
    ScalarFilter.IN_RANGE,
    ScalarFilter.BLANK,
    ScalarFilter.NOT_BLANK
  ];
  __decorate$2c([
    RefSelector("eValue-index0-1")
  ], NumberFilter2.prototype, "eValueFrom1", void 0);
  __decorate$2c([
    RefSelector("eValue-index1-1")
  ], NumberFilter2.prototype, "eValueTo1", void 0);
  __decorate$2c([
    RefSelector("eValue-index0-2")
  ], NumberFilter2.prototype, "eValueFrom2", void 0);
  __decorate$2c([
    RefSelector("eValue-index1-2")
  ], NumberFilter2.prototype, "eValueTo2", void 0);
  return NumberFilter2;
}(ScalarFilter);
var __extends$2x = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$9 = function() {
  __assign$9 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$9.apply(this, arguments);
};
var __decorate$2b = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TextFilter = function(_super) {
  __extends$2x(TextFilter2, _super);
  function TextFilter2() {
    return _super.call(this, "textFilter") || this;
  }
  TextFilter2.trimInput = function(value) {
    var trimmedInput = value && value.trim();
    return trimmedInput === "" ? value : trimmedInput;
  };
  TextFilter2.prototype.getDefaultDebounceMs = function() {
    return 500;
  };
  TextFilter2.prototype.setParams = function(params) {
    _super.prototype.setParams.call(this, params);
    this.textFilterParams = params;
    this.matcher = this.getTextMatcher();
    this.formatter = this.textFilterParams.textFormatter || (this.textFilterParams.caseSensitive ? TextFilter2.DEFAULT_FORMATTER : TextFilter2.DEFAULT_LOWERCASE_FORMATTER);
  };
  TextFilter2.prototype.getTextMatcher = function() {
    var legacyComparator = this.textFilterParams.textCustomComparator;
    if (legacyComparator) {
      _.doOnce(function() {
        return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.");
      }, "textCustomComparator.deprecated");
      return function(_a2) {
        var filterOption = _a2.filterOption, value = _a2.value, filterText = _a2.filterText;
        return legacyComparator(filterOption, value, filterText);
      };
    }
    return this.textFilterParams.textMatcher || TextFilter2.DEFAULT_MATCHER;
  };
  TextFilter2.prototype.createCondition = function(position) {
    var type = this.getConditionTypes()[position];
    var model = {
      filterType: this.getFilterType(),
      type
    };
    var values2 = this.getValues(position);
    if (values2.length > 0) {
      model.filter = values2[0];
    }
    if (values2.length > 1) {
      model.filterTo = values2[1];
    }
    return model;
  };
  TextFilter2.prototype.getFilterType = function() {
    return "text";
  };
  TextFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
    return aSimple.filter === bSimple.filter && aSimple.filterTo === bSimple.filterTo && aSimple.type === bSimple.type;
  };
  TextFilter2.prototype.getInputs = function() {
    return [
      [this.eValueFrom1, this.eValueTo1],
      [this.eValueFrom2, this.eValueTo2]
    ];
  };
  TextFilter2.prototype.getValues = function(position) {
    var _this = this;
    var result = [];
    this.forEachInput(function(element, index, elPosition, numberOfInputs) {
      if (position === elPosition && index < numberOfInputs) {
        var value = makeNull(element.getValue());
        var cleanValue = (_this.textFilterParams.trimInput ? TextFilter2.trimInput(value) : value) || null;
        result.push(cleanValue);
        element.setValue(cleanValue, true);
      }
    });
    return result;
  };
  TextFilter2.prototype.getDefaultFilterOptions = function() {
    return TextFilter2.DEFAULT_FILTER_OPTIONS;
  };
  TextFilter2.prototype.createValueTemplate = function(position) {
    var pos = position === ConditionPosition.One ? "1" : "2";
    return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-' + pos + '"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-' + pos + '"></ag-input-text-field>\n            </div>';
  };
  TextFilter2.prototype.mapValuesFromModel = function(filterModel) {
    var _a2 = filterModel || {}, filter = _a2.filter, filterTo = _a2.filterTo, type = _a2.type;
    return [
      filter || null,
      filterTo || null
    ].slice(0, this.getNumberOfInputs(type));
  };
  TextFilter2.prototype.evaluateNullValue = function(filterType) {
    var filterTypesAllowNulls = [
      SimpleFilter.NOT_EQUAL,
      SimpleFilter.NOT_CONTAINS,
      SimpleFilter.BLANK
    ];
    return filterType ? filterTypesAllowNulls.indexOf(filterType) >= 0 : false;
  };
  TextFilter2.prototype.evaluateNonNullValue = function(values2, cellValue, filterModel, params) {
    var _this = this;
    var formattedValues = values2.map(function(v) {
      return _this.formatter(v);
    }) || [];
    var cellValueFormatted = this.formatter(cellValue);
    var _a2 = this.textFilterParams, api = _a2.api, colDef = _a2.colDef, column = _a2.column, columnApi = _a2.columnApi, context = _a2.context, textFormatter = _a2.textFormatter;
    if (filterModel.type === SimpleFilter.BLANK) {
      return this.isBlank(cellValue);
    } else if (filterModel.type === SimpleFilter.NOT_BLANK) {
      return !this.isBlank(cellValue);
    }
    var matcherParams = {
      api,
      colDef,
      column,
      columnApi,
      context,
      node: params.node,
      data: params.data,
      filterOption: filterModel.type,
      value: cellValueFormatted,
      textFormatter
    };
    return formattedValues.some(function(v) {
      return _this.matcher(__assign$9(__assign$9({}, matcherParams), { filterText: v }));
    });
  };
  TextFilter2.DEFAULT_FILTER_OPTIONS = [
    SimpleFilter.CONTAINS,
    SimpleFilter.NOT_CONTAINS,
    SimpleFilter.EQUALS,
    SimpleFilter.NOT_EQUAL,
    SimpleFilter.STARTS_WITH,
    SimpleFilter.ENDS_WITH,
    SimpleFilter.BLANK,
    SimpleFilter.NOT_BLANK
  ];
  TextFilter2.DEFAULT_FORMATTER = function(from) {
    return from;
  };
  TextFilter2.DEFAULT_LOWERCASE_FORMATTER = function(from) {
    return from == null ? null : from.toString().toLowerCase();
  };
  TextFilter2.DEFAULT_MATCHER = function(_a2) {
    var filterOption = _a2.filterOption, value = _a2.value, filterText = _a2.filterText;
    if (filterText == null) {
      return false;
    }
    switch (filterOption) {
      case TextFilter2.CONTAINS:
        return value.indexOf(filterText) >= 0;
      case TextFilter2.NOT_CONTAINS:
        return value.indexOf(filterText) < 0;
      case TextFilter2.EQUALS:
        return value === filterText;
      case TextFilter2.NOT_EQUAL:
        return value != filterText;
      case TextFilter2.STARTS_WITH:
        return value.indexOf(filterText) === 0;
      case TextFilter2.ENDS_WITH:
        var index = value.lastIndexOf(filterText);
        return index >= 0 && index === value.length - filterText.length;
      default:
        return false;
    }
  };
  __decorate$2b([
    RefSelector("eValue-index0-1")
  ], TextFilter2.prototype, "eValueFrom1", void 0);
  __decorate$2b([
    RefSelector("eValue-index1-1")
  ], TextFilter2.prototype, "eValueTo1", void 0);
  __decorate$2b([
    RefSelector("eValue-index0-2")
  ], TextFilter2.prototype, "eValueFrom2", void 0);
  __decorate$2b([
    RefSelector("eValue-index1-2")
  ], TextFilter2.prototype, "eValueTo2", void 0);
  return TextFilter2;
}(SimpleFilter);
var __extends$2w = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2a = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TextInputFloatingFilter = function(_super) {
  __extends$2w(TextInputFloatingFilter2, _super);
  function TextInputFloatingFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  TextInputFloatingFilter2.prototype.postConstruct = function() {
    this.resetTemplate();
  };
  TextInputFloatingFilter2.prototype.resetTemplate = function(paramsMap) {
    this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>\n        ', paramsMap);
  };
  TextInputFloatingFilter2.prototype.getDefaultDebounceMs = function() {
    return 500;
  };
  TextInputFloatingFilter2.prototype.onParentModelChanged = function(model, event) {
    if (this.isEventFromFloatingFilter(event)) {
      return;
    }
    this.setLastTypeFromModel(model);
    this.eFloatingFilterInput.setValue(this.getTextFromModel(model));
    this.setEditable(this.canWeEditAfterModelFromParentFilter(model));
  };
  TextInputFloatingFilter2.prototype.init = function(params) {
    _super.prototype.init.call(this, params);
    this.params = params;
    this.applyActive = ProvidedFilter.isUseApplyButton(this.params.filterParams);
    var allowedCharPattern = this.params.filterParams.allowedCharPattern;
    if (allowedCharPattern != null) {
      this.resetTemplate({ eFloatingFilterInput: { allowedCharPattern } });
    }
    if (!this.isReadOnly()) {
      var debounceMs = ProvidedFilter.getDebounceMs(this.params.filterParams, this.getDefaultDebounceMs());
      var toDebounce = debounce(this.syncUpWithParentFilter.bind(this), debounceMs);
      var filterGui = this.eFloatingFilterInput.getGui();
      this.addManagedListener(filterGui, "input", toDebounce);
      this.addManagedListener(filterGui, "keypress", toDebounce);
      this.addManagedListener(filterGui, "keydown", toDebounce);
    }
    var columnDef = params.column.getDefinition();
    if (this.isReadOnly() || columnDef.filterParams && columnDef.filterParams.filterOptions && columnDef.filterParams.filterOptions.length === 1 && columnDef.filterParams.filterOptions[0] === "inRange") {
      this.eFloatingFilterInput.setDisabled(true);
    }
    var displayName = this.columnModel.getDisplayNameForColumn(params.column, "header", true);
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    this.eFloatingFilterInput.setInputAriaLabel(displayName + " " + translate2("ariaFilterInput", "Filter Input"));
  };
  TextInputFloatingFilter2.prototype.syncUpWithParentFilter = function(e2) {
    var _this = this;
    var enterKeyPressed = e2.key === KeyCode.ENTER;
    if (this.applyActive && !enterKeyPressed) {
      return;
    }
    var value = this.eFloatingFilterInput.getValue();
    if (this.params.filterParams.trimInput) {
      value = TextFilter.trimInput(value);
      this.eFloatingFilterInput.setValue(value, true);
    }
    this.params.parentFilterInstance(function(filterInstance) {
      if (filterInstance) {
        filterInstance.onFloatingFilterChanged(_this.getLastType() || null, value || null);
      }
    });
  };
  TextInputFloatingFilter2.prototype.conditionToString = function(condition, options) {
    var numberOfInputs = (options || {}).numberOfInputs;
    var isRange = condition.type == SimpleFilter.IN_RANGE || numberOfInputs === 2;
    if (isRange) {
      return condition.filter + "-" + condition.filterTo;
    }
    if (condition.filter != null) {
      return "" + condition.filter;
    }
    return "" + condition.type;
  };
  TextInputFloatingFilter2.prototype.setEditable = function(editable) {
    this.eFloatingFilterInput.setDisabled(!editable);
  };
  __decorate$2a([
    Autowired("columnModel")
  ], TextInputFloatingFilter2.prototype, "columnModel", void 0);
  __decorate$2a([
    RefSelector("eFloatingFilterInput")
  ], TextInputFloatingFilter2.prototype, "eFloatingFilterInput", void 0);
  __decorate$2a([
    PostConstruct
  ], TextInputFloatingFilter2.prototype, "postConstruct", null);
  return TextInputFloatingFilter2;
}(SimpleFloatingFilter);
var __extends$2v = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var NumberFloatingFilter = function(_super) {
  __extends$2v(NumberFloatingFilter2, _super);
  function NumberFloatingFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  NumberFloatingFilter2.prototype.getDefaultFilterOptions = function() {
    return NumberFilter.DEFAULT_FILTER_OPTIONS;
  };
  return NumberFloatingFilter2;
}(TextInputFloatingFilter);
var __extends$2u = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var TextFloatingFilter = function(_super) {
  __extends$2u(TextFloatingFilter2, _super);
  function TextFloatingFilter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  TextFloatingFilter2.prototype.getDefaultFilterOptions = function() {
    return TextFilter.DEFAULT_FILTER_OPTIONS;
  };
  return TextFloatingFilter2;
}(TextInputFloatingFilter);
var TouchListener = function() {
  function TouchListener2(eElement, preventMouseClick) {
    var _this = this;
    if (preventMouseClick === void 0) {
      preventMouseClick = false;
    }
    this.destroyFuncs = [];
    this.touching = false;
    this.eventService = new EventService();
    this.eElement = eElement;
    this.preventMouseClick = preventMouseClick;
    var startListener = this.onTouchStart.bind(this);
    var moveListener = this.onTouchMove.bind(this);
    var endListener = this.onTouchEnd.bind(this);
    this.eElement.addEventListener("touchstart", startListener, { passive: true });
    this.eElement.addEventListener("touchmove", moveListener, { passive: true });
    this.eElement.addEventListener("touchend", endListener, { passive: false });
    this.destroyFuncs.push(function() {
      _this.eElement.removeEventListener("touchstart", startListener, { passive: true });
      _this.eElement.removeEventListener("touchmove", moveListener, { passive: true });
      _this.eElement.removeEventListener("touchend", endListener, { passive: false });
    });
  }
  TouchListener2.prototype.getActiveTouch = function(touchList) {
    for (var i2 = 0; i2 < touchList.length; i2++) {
      var matches = touchList[i2].identifier === this.touchStart.identifier;
      if (matches) {
        return touchList[i2];
      }
    }
    return null;
  };
  TouchListener2.prototype.addEventListener = function(eventType, listener) {
    this.eventService.addEventListener(eventType, listener);
  };
  TouchListener2.prototype.removeEventListener = function(eventType, listener) {
    this.eventService.removeEventListener(eventType, listener);
  };
  TouchListener2.prototype.onTouchStart = function(touchEvent) {
    var _this = this;
    if (this.touching) {
      return;
    }
    this.touchStart = touchEvent.touches[0];
    this.touching = true;
    this.moved = false;
    var touchStartCopy = this.touchStart;
    window.setTimeout(function() {
      var touchesMatch = _this.touchStart === touchStartCopy;
      if (_this.touching && touchesMatch && !_this.moved) {
        _this.moved = true;
        var event_1 = {
          type: TouchListener2.EVENT_LONG_TAP,
          touchStart: _this.touchStart,
          touchEvent
        };
        _this.eventService.dispatchEvent(event_1);
      }
    }, 500);
  };
  TouchListener2.prototype.onTouchMove = function(touchEvent) {
    if (!this.touching) {
      return;
    }
    var touch = this.getActiveTouch(touchEvent.touches);
    if (!touch) {
      return;
    }
    var eventIsFarAway = !areEventsNear(touch, this.touchStart, 4);
    if (eventIsFarAway) {
      this.moved = true;
    }
  };
  TouchListener2.prototype.onTouchEnd = function(touchEvent) {
    if (!this.touching) {
      return;
    }
    if (!this.moved) {
      var event_2 = {
        type: TouchListener2.EVENT_TAP,
        touchStart: this.touchStart
      };
      this.eventService.dispatchEvent(event_2);
      this.checkForDoubleTap();
    }
    if (this.preventMouseClick && touchEvent.cancelable) {
      touchEvent.preventDefault();
    }
    this.touching = false;
  };
  TouchListener2.prototype.checkForDoubleTap = function() {
    var now2 = new Date().getTime();
    if (this.lastTapTime && this.lastTapTime > 0) {
      var interval = now2 - this.lastTapTime;
      if (interval > TouchListener2.DOUBLE_TAP_MILLIS) {
        var event_3 = {
          type: TouchListener2.EVENT_DOUBLE_TAP,
          touchStart: this.touchStart
        };
        this.eventService.dispatchEvent(event_3);
        this.lastTapTime = null;
      } else {
        this.lastTapTime = now2;
      }
    } else {
      this.lastTapTime = now2;
    }
  };
  TouchListener2.prototype.destroy = function() {
    this.destroyFuncs.forEach(function(func) {
      return func();
    });
  };
  TouchListener2.EVENT_TAP = "tap";
  TouchListener2.EVENT_DOUBLE_TAP = "doubleTap";
  TouchListener2.EVENT_LONG_TAP = "longTap";
  TouchListener2.DOUBLE_TAP_MILLIS = 500;
  return TouchListener2;
}();
var __extends$2t = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$29 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SortIndicatorComp = function(_super) {
  __extends$2t(SortIndicatorComp2, _super);
  function SortIndicatorComp2(skipTemplate) {
    var _this = _super.call(this) || this;
    if (!skipTemplate) {
      _this.setTemplate(SortIndicatorComp2.TEMPLATE);
    }
    return _this;
  }
  SortIndicatorComp2.prototype.attachCustomElements = function(eSortOrder, eSortAsc, eSortDesc, eSortMixed, eSortNone) {
    this.eSortOrder = eSortOrder;
    this.eSortAsc = eSortAsc;
    this.eSortDesc = eSortDesc;
    this.eSortMixed = eSortMixed;
    this.eSortNone = eSortNone;
  };
  SortIndicatorComp2.prototype.setupSort = function(column, suppressOrder) {
    var _this = this;
    if (suppressOrder === void 0) {
      suppressOrder = false;
    }
    this.column = column;
    this.suppressOrder = suppressOrder;
    this.setupMultiSortIndicator();
    var canSort = !!this.column.getColDef().sortable;
    if (!canSort) {
      return;
    }
    this.addInIcon("sortAscending", this.eSortAsc, column);
    this.addInIcon("sortDescending", this.eSortDesc, column);
    this.addInIcon("sortUnSort", this.eSortNone, column);
    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, function() {
      return _this.onSortChanged();
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, function() {
      return _this.onSortChanged();
    });
    this.onSortChanged();
  };
  SortIndicatorComp2.prototype.addInIcon = function(iconName, eParent, column) {
    if (eParent == null) {
      return;
    }
    var eIcon = createIconNoSpan(iconName, this.gridOptionsWrapper, column);
    if (eIcon) {
      eParent.appendChild(eIcon);
    }
  };
  SortIndicatorComp2.prototype.onSortChanged = function() {
    this.updateIcons();
    if (!this.suppressOrder) {
      this.updateSortOrder();
    }
  };
  SortIndicatorComp2.prototype.updateIcons = function() {
    var sortDirection = this.sortController.getDisplaySortForColumn(this.column);
    if (this.eSortAsc) {
      var isAscending = sortDirection === "asc";
      this.eSortAsc.classList.toggle("ag-hidden", !isAscending);
    }
    if (this.eSortDesc) {
      var isDescending = sortDirection === "desc";
      this.eSortDesc.classList.toggle("ag-hidden", !isDescending);
    }
    if (this.eSortNone) {
      var alwaysHideNoSort = !this.column.getColDef().unSortIcon && !this.gridOptionsWrapper.isUnSortIcon();
      var isNone = sortDirection === null || sortDirection === void 0;
      this.eSortNone.classList.toggle("ag-hidden", alwaysHideNoSort || !isNone);
    }
  };
  SortIndicatorComp2.prototype.setupMultiSortIndicator = function() {
    var _this = this;
    this.addInIcon("sortUnSort", this.eSortMixed, this.column);
    var isColumnShowingRowGroup = this.column.getColDef().showRowGroup;
    var areGroupsCoupled = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    if (areGroupsCoupled && isColumnShowingRowGroup) {
      this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, function() {
        return _this.updateMultiSortIndicator();
      });
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, function() {
        return _this.updateMultiSortIndicator();
      });
      this.updateMultiSortIndicator();
    }
  };
  SortIndicatorComp2.prototype.updateMultiSortIndicator = function() {
    if (this.eSortMixed) {
      var isMixedSort = this.sortController.getDisplaySortForColumn(this.column) === "mixed";
      this.eSortMixed.classList.toggle("ag-hidden", !isMixedSort);
    }
  };
  SortIndicatorComp2.prototype.updateSortOrder = function() {
    var _this = this;
    var _a2;
    if (!this.eSortOrder) {
      return;
    }
    var allColumnsWithSorting = this.sortController.getColumnsWithSortingOrdered();
    var indexThisCol = (_a2 = this.sortController.getDisplaySortIndexForColumn(this.column), _a2 !== null && _a2 !== void 0 ? _a2 : -1);
    var moreThanOneColSorting = allColumnsWithSorting.some(function(col) {
      var _a3;
      return _a3 = _this.sortController.getDisplaySortIndexForColumn(col), _a3 !== null && _a3 !== void 0 ? _a3 : -1 >= 1;
    });
    var showIndex = indexThisCol >= 0 && moreThanOneColSorting;
    setDisplayed(this.eSortOrder, showIndex);
    if (indexThisCol >= 0) {
      this.eSortOrder.innerHTML = (indexThisCol + 1).toString();
    } else {
      clearElement(this.eSortOrder);
    }
  };
  SortIndicatorComp2.TEMPLATE = '<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>';
  __decorate$29([
    RefSelector("eSortOrder")
  ], SortIndicatorComp2.prototype, "eSortOrder", void 0);
  __decorate$29([
    RefSelector("eSortAsc")
  ], SortIndicatorComp2.prototype, "eSortAsc", void 0);
  __decorate$29([
    RefSelector("eSortDesc")
  ], SortIndicatorComp2.prototype, "eSortDesc", void 0);
  __decorate$29([
    RefSelector("eSortMixed")
  ], SortIndicatorComp2.prototype, "eSortMixed", void 0);
  __decorate$29([
    RefSelector("eSortNone")
  ], SortIndicatorComp2.prototype, "eSortNone", void 0);
  __decorate$29([
    Autowired("columnModel")
  ], SortIndicatorComp2.prototype, "columnModel", void 0);
  __decorate$29([
    Autowired("sortController")
  ], SortIndicatorComp2.prototype, "sortController", void 0);
  return SortIndicatorComp2;
}(Component);
var __extends$2s = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$28 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderComp = function(_super) {
  __extends$2s(HeaderComp2, _super);
  function HeaderComp2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.lastMovingChanged = 0;
    return _this;
  }
  HeaderComp2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  HeaderComp2.prototype.refresh = function(params) {
    this.params = params;
    if (this.workOutTemplate() != this.currentTemplate) {
      return false;
    }
    if (this.workOutShowMenu() != this.currentShowMenu) {
      return false;
    }
    if (this.workOutSort() != this.currentSort) {
      return false;
    }
    this.setDisplayName(params);
    return true;
  };
  HeaderComp2.prototype.workOutTemplate = function() {
    var template = firstExistingValue(this.params.template, HeaderComp2.TEMPLATE);
    template = template && template.trim ? template.trim() : template;
    return template;
  };
  HeaderComp2.prototype.init = function(params) {
    this.params = params;
    this.currentTemplate = this.workOutTemplate();
    this.setTemplate(this.currentTemplate);
    this.setupTap();
    this.setupIcons(params.column);
    this.setMenu();
    this.setupSort();
    this.setupFilterIcon();
    this.setDisplayName(params);
  };
  HeaderComp2.prototype.setDisplayName = function(params) {
    if (this.currentDisplayName != params.displayName) {
      this.currentDisplayName = params.displayName;
      var displayNameSanitised = escapeString(this.currentDisplayName);
      if (this.eText) {
        this.eText.innerHTML = displayNameSanitised;
      }
    }
  };
  HeaderComp2.prototype.setupIcons = function(column) {
    this.addInIcon("menu", this.eMenu, column);
    this.addInIcon("filter", this.eFilter, column);
  };
  HeaderComp2.prototype.addInIcon = function(iconName, eParent, column) {
    if (eParent == null) {
      return;
    }
    var eIcon = createIconNoSpan(iconName, this.gridOptionsWrapper, column);
    if (eIcon) {
      eParent.appendChild(eIcon);
    }
  };
  HeaderComp2.prototype.setupTap = function() {
    var _this = this;
    var options = this.gridOptionsWrapper;
    if (options.isSuppressTouch()) {
      return;
    }
    var touchListener = new TouchListener(this.getGui(), true);
    var suppressMenuHide = options.isSuppressMenuHide();
    var tapMenuButton = suppressMenuHide && exists(this.eMenu);
    var menuTouchListener = tapMenuButton ? new TouchListener(this.eMenu, true) : touchListener;
    if (this.params.enableMenu) {
      var eventType = tapMenuButton ? "EVENT_TAP" : "EVENT_LONG_TAP";
      var showMenuFn = function(event) {
        options.getApi().showColumnMenuAfterMouseClick(_this.params.column, event.touchStart);
      };
      this.addManagedListener(menuTouchListener, TouchListener[eventType], showMenuFn);
    }
    if (this.params.enableSorting) {
      var tapListener = function(event) {
        var target = event.touchStart.target;
        if (suppressMenuHide && _this.eMenu.contains(target)) {
          return;
        }
        _this.sortController.progressSort(_this.params.column, false, "uiColumnSorted");
      };
      this.addManagedListener(touchListener, TouchListener.EVENT_TAP, tapListener);
    }
    this.addDestroyFunc(function() {
      return touchListener.destroy();
    });
    if (tapMenuButton) {
      this.addDestroyFunc(function() {
        return menuTouchListener.destroy();
      });
    }
  };
  HeaderComp2.prototype.workOutShowMenu = function() {
    var menuHides = !this.gridOptionsWrapper.isSuppressMenuHide();
    var onIpadAndMenuHides = isIOSUserAgent() && menuHides;
    var showMenu = this.params.enableMenu && !onIpadAndMenuHides;
    return showMenu;
  };
  HeaderComp2.prototype.setMenu = function() {
    var _this = this;
    if (!this.eMenu) {
      return;
    }
    this.currentShowMenu = this.workOutShowMenu();
    if (!this.currentShowMenu) {
      removeFromParent(this.eMenu);
      return;
    }
    var suppressMenuHide = this.gridOptionsWrapper.isSuppressMenuHide();
    this.addManagedListener(this.eMenu, "click", function() {
      return _this.showMenu(_this.eMenu);
    });
    this.eMenu.classList.toggle("ag-header-menu-always-show", suppressMenuHide);
  };
  HeaderComp2.prototype.showMenu = function(eventSource) {
    if (!eventSource) {
      eventSource = this.eMenu;
    }
    this.menuFactory.showMenuAfterButtonClick(this.params.column, eventSource, "columnMenu");
  };
  HeaderComp2.prototype.workOutSort = function() {
    return this.params.enableSorting;
  };
  HeaderComp2.prototype.setupSort = function() {
    var _this = this;
    this.currentSort = this.params.enableSorting;
    if (!this.eSortIndicator) {
      this.eSortIndicator = this.context.createBean(new SortIndicatorComp(true));
      this.eSortIndicator.attachCustomElements(this.eSortOrder, this.eSortAsc, this.eSortDesc, this.eSortMixed, this.eSortNone);
    }
    this.eSortIndicator.setupSort(this.params.column);
    if (!this.currentSort) {
      return;
    }
    var sortUsingCtrl = this.gridOptionsWrapper.isMultiSortKeyCtrl();
    this.addManagedListener(this.params.column, Column.EVENT_MOVING_CHANGED, function() {
      _this.lastMovingChanged = new Date().getTime();
    });
    if (this.eLabel) {
      this.addManagedListener(this.eLabel, "click", function(event) {
        var moving = _this.params.column.isMoving();
        var nowTime = new Date().getTime();
        var movedRecently = nowTime - _this.lastMovingChanged < 50;
        var columnMoving = moving || movedRecently;
        if (!columnMoving) {
          var multiSort = sortUsingCtrl ? event.ctrlKey || event.metaKey : event.shiftKey;
          _this.params.progressSort(multiSort);
        }
      });
    }
    var onSortingChanged = function() {
      var _a2;
      _this.addOrRemoveCssClass("ag-header-cell-sorted-asc", _this.params.column.isSortAscending());
      _this.addOrRemoveCssClass("ag-header-cell-sorted-desc", _this.params.column.isSortDescending());
      _this.addOrRemoveCssClass("ag-header-cell-sorted-none", _this.params.column.isSortNone());
      if (_this.params.column.getColDef().showRowGroup) {
        var sourceColumns = _this.columnModel.getSourceColumnsForGroupColumn(_this.params.column);
        var sortDirectionsMatch = (_a2 = sourceColumns) === null || _a2 === void 0 ? void 0 : _a2.every(function(sourceCol) {
          return _this.params.column.getSort() == sourceCol.getSort();
        });
        var isMultiSorting = !sortDirectionsMatch;
        _this.addOrRemoveCssClass("ag-header-cell-sorted-mixed", isMultiSorting);
      }
    };
    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, onSortingChanged);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, onSortingChanged);
  };
  HeaderComp2.prototype.setupFilterIcon = function() {
    if (!this.eFilter) {
      return;
    }
    this.addManagedListener(this.params.column, Column.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
    this.onFilterChanged();
  };
  HeaderComp2.prototype.onFilterChanged = function() {
    var filterPresent = this.params.column.isFilterActive();
    this.eFilter.classList.toggle("ag-hidden", !filterPresent);
  };
  HeaderComp2.TEMPLATE = '<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>';
  __decorate$28([
    Autowired("sortController")
  ], HeaderComp2.prototype, "sortController", void 0);
  __decorate$28([
    Autowired("menuFactory")
  ], HeaderComp2.prototype, "menuFactory", void 0);
  __decorate$28([
    Autowired("columnModel")
  ], HeaderComp2.prototype, "columnModel", void 0);
  __decorate$28([
    RefSelector("eFilter")
  ], HeaderComp2.prototype, "eFilter", void 0);
  __decorate$28([
    RefSelector("eSortIndicator")
  ], HeaderComp2.prototype, "eSortIndicator", void 0);
  __decorate$28([
    RefSelector("eMenu")
  ], HeaderComp2.prototype, "eMenu", void 0);
  __decorate$28([
    RefSelector("eLabel")
  ], HeaderComp2.prototype, "eLabel", void 0);
  __decorate$28([
    RefSelector("eText")
  ], HeaderComp2.prototype, "eText", void 0);
  __decorate$28([
    RefSelector("eSortOrder")
  ], HeaderComp2.prototype, "eSortOrder", void 0);
  __decorate$28([
    RefSelector("eSortAsc")
  ], HeaderComp2.prototype, "eSortAsc", void 0);
  __decorate$28([
    RefSelector("eSortDesc")
  ], HeaderComp2.prototype, "eSortDesc", void 0);
  __decorate$28([
    RefSelector("eSortMixed")
  ], HeaderComp2.prototype, "eSortMixed", void 0);
  __decorate$28([
    RefSelector("eSortNone")
  ], HeaderComp2.prototype, "eSortNone", void 0);
  return HeaderComp2;
}(Component);
var __extends$2r = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$27 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderGroupComp = function(_super) {
  __extends$2r(HeaderGroupComp2, _super);
  function HeaderGroupComp2() {
    return _super.call(this, HeaderGroupComp2.TEMPLATE) || this;
  }
  HeaderGroupComp2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  HeaderGroupComp2.prototype.init = function(params) {
    this.params = params;
    this.checkWarnings();
    this.setupLabel();
    this.addGroupExpandIcon();
    this.setupExpandIcons();
  };
  HeaderGroupComp2.prototype.checkWarnings = function() {
    var paramsAny = this.params;
    if (paramsAny.template) {
      var message_1 = "AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";
      doOnce(function() {
        return console.warn(message_1);
      }, "HeaderGroupComp.templateNotSupported");
    }
  };
  HeaderGroupComp2.prototype.setupExpandIcons = function() {
    var _this = this;
    this.addInIcon("columnGroupOpened", "agOpened");
    this.addInIcon("columnGroupClosed", "agClosed");
    var expandAction = function(event) {
      if (isStopPropagationForAgGrid(event)) {
        return;
      }
      var newExpandedValue = !_this.params.columnGroup.isExpanded();
      _this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getProvidedColumnGroup(), newExpandedValue, "uiColumnExpanded");
    };
    this.addTouchAndClickListeners(this.eCloseIcon, expandAction);
    this.addTouchAndClickListeners(this.eOpenIcon, expandAction);
    var stopPropagationAction = function(event) {
      stopPropagationForAgGrid(event);
    };
    this.addManagedListener(this.eCloseIcon, "dblclick", stopPropagationAction);
    this.addManagedListener(this.eOpenIcon, "dblclick", stopPropagationAction);
    this.addManagedListener(this.getGui(), "dblclick", expandAction);
    this.updateIconVisibility();
    var providedColumnGroup = this.params.columnGroup.getProvidedColumnGroup();
    this.addManagedListener(providedColumnGroup, ProvidedColumnGroup.EVENT_EXPANDED_CHANGED, this.updateIconVisibility.bind(this));
    this.addManagedListener(providedColumnGroup, ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED, this.updateIconVisibility.bind(this));
  };
  HeaderGroupComp2.prototype.addTouchAndClickListeners = function(eElement, action) {
    var touchListener = new TouchListener(eElement, true);
    this.addManagedListener(touchListener, TouchListener.EVENT_TAP, action);
    this.addDestroyFunc(function() {
      return touchListener.destroy();
    });
    this.addManagedListener(eElement, "click", action);
  };
  HeaderGroupComp2.prototype.updateIconVisibility = function() {
    var columnGroup = this.params.columnGroup;
    if (columnGroup.isExpandable()) {
      var expanded = this.params.columnGroup.isExpanded();
      setDisplayed(this.eOpenIcon, expanded);
      setDisplayed(this.eCloseIcon, !expanded);
    } else {
      setDisplayed(this.eOpenIcon, false);
      setDisplayed(this.eCloseIcon, false);
    }
  };
  HeaderGroupComp2.prototype.addInIcon = function(iconName, refName) {
    var eIcon = createIconNoSpan(iconName, this.gridOptionsWrapper, null);
    if (eIcon) {
      this.getRefElement(refName).appendChild(eIcon);
    }
  };
  HeaderGroupComp2.prototype.addGroupExpandIcon = function() {
    if (!this.params.columnGroup.isExpandable()) {
      setDisplayed(this.eOpenIcon, false);
      setDisplayed(this.eCloseIcon, false);
      return;
    }
  };
  HeaderGroupComp2.prototype.setupLabel = function() {
    var displayName = this.params.displayName;
    if (exists(displayName)) {
      var displayNameSanitised = escapeString(displayName);
      this.getRefElement("agLabel").innerHTML = displayNameSanitised;
    }
  };
  HeaderGroupComp2.TEMPLATE = '<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>';
  __decorate$27([
    Autowired("columnModel")
  ], HeaderGroupComp2.prototype, "columnModel", void 0);
  __decorate$27([
    RefSelector("agOpened")
  ], HeaderGroupComp2.prototype, "eOpenIcon", void 0);
  __decorate$27([
    RefSelector("agClosed")
  ], HeaderGroupComp2.prototype, "eCloseIcon", void 0);
  return HeaderGroupComp2;
}(Component);
var __extends$2q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var PopupComponent = function(_super) {
  __extends$2q(PopupComponent2, _super);
  function PopupComponent2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  PopupComponent2.prototype.isPopup = function() {
    return true;
  };
  PopupComponent2.prototype.setParentComponent = function(container) {
    container.addCssClass("ag-has-popup");
    _super.prototype.setParentComponent.call(this, container);
  };
  PopupComponent2.prototype.destroy = function() {
    var parentComp = this.parentComponent;
    var hasParent = parentComp && parentComp.isAlive();
    if (hasParent) {
      parentComp.getGui().classList.remove("ag-has-popup");
    }
    _super.prototype.destroy.call(this);
  };
  return PopupComponent2;
}(Component);
var __extends$2p = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$26 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var LargeTextCellEditor = function(_super) {
  __extends$2p(LargeTextCellEditor2, _super);
  function LargeTextCellEditor2() {
    return _super.call(this, LargeTextCellEditor2.TEMPLATE) || this;
  }
  LargeTextCellEditor2.prototype.init = function(params) {
    this.params = params;
    this.focusAfterAttached = params.cellStartedEdit;
    this.eTextArea.setMaxLength(params.maxLength || 200).setCols(params.cols || 60).setRows(params.rows || 10);
    if (exists(params.value)) {
      this.eTextArea.setValue(params.value.toString(), true);
    }
    this.addGuiEventListener("keydown", this.onKeyDown.bind(this));
  };
  LargeTextCellEditor2.prototype.onKeyDown = function(event) {
    var key = event.key;
    if (key === KeyCode.LEFT || key === KeyCode.UP || key === KeyCode.RIGHT || key === KeyCode.DOWN || event.shiftKey && key === KeyCode.ENTER) {
      event.stopPropagation();
    }
  };
  LargeTextCellEditor2.prototype.afterGuiAttached = function() {
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    this.eTextArea.setInputAriaLabel(translate2("ariaInputEditor", "Input Editor"));
    if (this.focusAfterAttached) {
      this.eTextArea.getFocusableElement().focus();
    }
  };
  LargeTextCellEditor2.prototype.getValue = function() {
    return this.params.parseValue(this.eTextArea.getValue());
  };
  LargeTextCellEditor2.TEMPLATE = '<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>';
  __decorate$26([
    RefSelector("eTextArea")
  ], LargeTextCellEditor2.prototype, "eTextArea", void 0);
  return LargeTextCellEditor2;
}(PopupComponent);
var __extends$2o = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$25 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SelectCellEditor = function(_super) {
  __extends$2o(SelectCellEditor2, _super);
  function SelectCellEditor2() {
    var _this = _super.call(this, '<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>') || this;
    _this.startedByEnter = false;
    return _this;
  }
  SelectCellEditor2.prototype.init = function(params) {
    var _this = this;
    this.focusAfterAttached = params.cellStartedEdit;
    if (missing(params.values)) {
      console.warn("AG Grid: no values found for select cellEditor");
      return;
    }
    this.startedByEnter = params.eventKey != null ? params.eventKey === KeyCode.ENTER : false;
    var hasValue = false;
    params.values.forEach(function(value) {
      var option2 = { value };
      var valueFormatted = _this.valueFormatterService.formatValue(params.column, null, value);
      var valueFormattedExits = valueFormatted !== null && valueFormatted !== void 0;
      option2.text = valueFormattedExits ? valueFormatted : value;
      _this.eSelect.addOption(option2);
      hasValue = hasValue || params.value === value;
    });
    if (hasValue) {
      this.eSelect.setValue(params.value, true);
    } else if (params.values.length) {
      this.eSelect.setValue(params.values[0], true);
    }
    if (!this.gridOptionsWrapper.isFullRowEdit()) {
      this.eSelect.onValueChange(function() {
        return params.stopEditing();
      });
    }
  };
  SelectCellEditor2.prototype.afterGuiAttached = function() {
    if (this.focusAfterAttached) {
      this.eSelect.getFocusableElement().focus();
    }
    if (this.startedByEnter) {
      this.eSelect.showPicker();
    }
  };
  SelectCellEditor2.prototype.focusIn = function() {
    this.eSelect.getFocusableElement().focus();
  };
  SelectCellEditor2.prototype.getValue = function() {
    return this.eSelect.getValue();
  };
  SelectCellEditor2.prototype.isPopup = function() {
    return false;
  };
  __decorate$25([
    Autowired("valueFormatterService")
  ], SelectCellEditor2.prototype, "valueFormatterService", void 0);
  __decorate$25([
    RefSelector("eSelect")
  ], SelectCellEditor2.prototype, "eSelect", void 0);
  return SelectCellEditor2;
}(PopupComponent);
var __extends$2n = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var PopupSelectCellEditor = function(_super) {
  __extends$2n(PopupSelectCellEditor2, _super);
  function PopupSelectCellEditor2() {
    var _this = _super.call(this) || this;
    doOnce(function() {
      return console.warn('AG Grid: The PopupSelectCellEditor (agPopupSelectCellEditor) is deprecated. Instead use {cellEditor: "agSelectCellEditor", cellEditorPopup: true} ');
    }, "PopupSelectCellEditor.deprecated");
    return _this;
  }
  PopupSelectCellEditor2.prototype.isPopup = function() {
    return true;
  };
  return PopupSelectCellEditor2;
}(SelectCellEditor);
var __extends$2m = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$24 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TextCellEditor = function(_super) {
  __extends$2m(TextCellEditor2, _super);
  function TextCellEditor2() {
    return _super.call(this, TextCellEditor2.TEMPLATE) || this;
  }
  TextCellEditor2.prototype.init = function(params) {
    this.params = params;
    var eInput = this.eInput;
    var startValue;
    if (params.cellStartedEdit) {
      this.focusAfterAttached = true;
      if (params.eventKey === KeyCode.BACKSPACE || params.eventKey === KeyCode.DELETE) {
        startValue = "";
      } else if (params.charPress) {
        startValue = params.charPress;
      } else {
        startValue = this.getStartValue(params);
        if (params.eventKey !== KeyCode.F2) {
          this.highlightAllOnFocus = true;
        }
      }
    } else {
      this.focusAfterAttached = false;
      startValue = this.getStartValue(params);
    }
    if (startValue != null) {
      eInput.setValue(startValue, true);
    }
    this.addManagedListener(eInput.getGui(), "keydown", function(event) {
      var key = event.key;
      if (key === KeyCode.PAGE_UP || key === KeyCode.PAGE_DOWN) {
        event.preventDefault();
      }
    });
  };
  TextCellEditor2.prototype.afterGuiAttached = function() {
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var eInput = this.eInput;
    eInput.setInputAriaLabel(translate2("ariaInputEditor", "Input Editor"));
    if (!this.focusAfterAttached) {
      return;
    }
    if (!isBrowserSafari()) {
      eInput.getFocusableElement().focus();
    }
    var inputEl = eInput.getInputElement();
    if (this.highlightAllOnFocus) {
      inputEl.select();
    } else {
      var value = eInput.getValue();
      var len = exists(value) && value.length || 0;
      if (len) {
        inputEl.setSelectionRange(len, len);
      }
    }
  };
  TextCellEditor2.prototype.focusIn = function() {
    var eInput = this.eInput;
    var focusEl = eInput.getFocusableElement();
    var inputEl = eInput.getInputElement();
    focusEl.focus();
    inputEl.select();
  };
  TextCellEditor2.prototype.getValue = function() {
    var eInput = this.eInput;
    return this.params.parseValue(eInput.getValue());
  };
  TextCellEditor2.prototype.getStartValue = function(params) {
    var formatValue = params.useFormatter || params.column.getColDef().refData;
    return formatValue ? params.formatValue(params.value) : params.value;
  };
  TextCellEditor2.prototype.isPopup = function() {
    return false;
  };
  TextCellEditor2.TEMPLATE = '<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>';
  __decorate$24([
    RefSelector("eInput")
  ], TextCellEditor2.prototype, "eInput", void 0);
  return TextCellEditor2;
}(PopupComponent);
var __extends$2l = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var PopupTextCellEditor = function(_super) {
  __extends$2l(PopupTextCellEditor2, _super);
  function PopupTextCellEditor2() {
    var _this = _super.call(this) || this;
    doOnce(function() {
      return console.warn('AG Grid: The PopupTextCellEditor (agPopupTextCellEditor) is deprecated. Instead use {cellEditor: "agTextCellEditor", cellEditorPopup: true} ');
    }, "PopupTextCellEditor.deprecated");
    return _this;
  }
  PopupTextCellEditor2.prototype.isPopup = function() {
    return true;
  };
  return PopupTextCellEditor2;
}(TextCellEditor);
var __extends$2k = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$23 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ARROW_UP = "\u2191";
var ARROW_DOWN = "\u2193";
var AnimateShowChangeCellRenderer = function(_super) {
  __extends$2k(AnimateShowChangeCellRenderer2, _super);
  function AnimateShowChangeCellRenderer2() {
    var _this = _super.call(this, AnimateShowChangeCellRenderer2.TEMPLATE) || this;
    _this.refreshCount = 0;
    return _this;
  }
  AnimateShowChangeCellRenderer2.prototype.init = function(params) {
    this.eValue = this.queryForHtmlElement(".ag-value-change-value");
    this.eDelta = this.queryForHtmlElement(".ag-value-change-delta");
    this.refresh(params);
  };
  AnimateShowChangeCellRenderer2.prototype.showDelta = function(params, delta) {
    var absDelta = Math.abs(delta);
    var valueFormatted = params.formatValue(absDelta);
    var valueToUse = exists(valueFormatted) ? valueFormatted : absDelta;
    var deltaUp = delta >= 0;
    if (deltaUp) {
      this.eDelta.innerHTML = ARROW_UP + valueToUse;
    } else {
      this.eDelta.innerHTML = ARROW_DOWN + valueToUse;
    }
    this.eDelta.classList.toggle("ag-value-change-delta-up", deltaUp);
    this.eDelta.classList.toggle("ag-value-change-delta-down", !deltaUp);
  };
  AnimateShowChangeCellRenderer2.prototype.setTimerToRemoveDelta = function() {
    var _this = this;
    this.refreshCount++;
    var refreshCountCopy = this.refreshCount;
    window.setTimeout(function() {
      if (refreshCountCopy === _this.refreshCount) {
        _this.hideDeltaValue();
      }
    }, 2e3);
  };
  AnimateShowChangeCellRenderer2.prototype.hideDeltaValue = function() {
    this.eValue.classList.remove("ag-value-change-value-highlight");
    clearElement(this.eDelta);
  };
  AnimateShowChangeCellRenderer2.prototype.refresh = function(params) {
    var value = params.value;
    if (value === this.lastValue) {
      return false;
    }
    if (exists(params.valueFormatted)) {
      this.eValue.innerHTML = params.valueFormatted;
    } else if (exists(params.value)) {
      this.eValue.innerHTML = value;
    } else {
      clearElement(this.eValue);
    }
    if (this.filterManager.isSuppressFlashingCellsBecauseFiltering()) {
      return false;
    }
    if (typeof value === "number" && typeof this.lastValue === "number") {
      var delta = value - this.lastValue;
      this.showDelta(params, delta);
    }
    if (this.lastValue) {
      this.eValue.classList.add("ag-value-change-value-highlight");
    }
    this.setTimerToRemoveDelta();
    this.lastValue = value;
    return true;
  };
  AnimateShowChangeCellRenderer2.TEMPLATE = '<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>';
  __decorate$23([
    Autowired("filterManager")
  ], AnimateShowChangeCellRenderer2.prototype, "filterManager", void 0);
  return AnimateShowChangeCellRenderer2;
}(Component);
var __extends$2j = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$22 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AnimateSlideCellRenderer = function(_super) {
  __extends$2j(AnimateSlideCellRenderer2, _super);
  function AnimateSlideCellRenderer2() {
    var _this = _super.call(this, AnimateSlideCellRenderer2.TEMPLATE) || this;
    _this.refreshCount = 0;
    _this.eCurrent = _this.queryForHtmlElement(".ag-value-slide-current");
    return _this;
  }
  AnimateSlideCellRenderer2.prototype.init = function(params) {
    this.refresh(params);
  };
  AnimateSlideCellRenderer2.prototype.addSlideAnimation = function() {
    var _this = this;
    this.refreshCount++;
    var refreshCountCopy = this.refreshCount;
    if (this.ePrevious) {
      this.getGui().removeChild(this.ePrevious);
    }
    this.ePrevious = loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>');
    this.ePrevious.innerHTML = this.eCurrent.innerHTML;
    this.getGui().insertBefore(this.ePrevious, this.eCurrent);
    window.setTimeout(function() {
      if (refreshCountCopy !== _this.refreshCount) {
        return;
      }
      _this.ePrevious.classList.add("ag-value-slide-out-end");
    }, 50);
    window.setTimeout(function() {
      if (refreshCountCopy !== _this.refreshCount) {
        return;
      }
      _this.getGui().removeChild(_this.ePrevious);
      _this.ePrevious = null;
    }, 3e3);
  };
  AnimateSlideCellRenderer2.prototype.refresh = function(params) {
    var value = params.value;
    if (missing(value)) {
      value = "";
    }
    if (value === this.lastValue) {
      return false;
    }
    if (this.filterManager.isSuppressFlashingCellsBecauseFiltering()) {
      return false;
    }
    this.addSlideAnimation();
    this.lastValue = value;
    if (exists(params.valueFormatted)) {
      this.eCurrent.innerHTML = params.valueFormatted;
    } else if (exists(params.value)) {
      this.eCurrent.innerHTML = value;
    } else {
      clearElement(this.eCurrent);
    }
    return true;
  };
  AnimateSlideCellRenderer2.TEMPLATE = '<span>\n            <span class="ag-value-slide-current"></span>\n        </span>';
  __decorate$22([
    Autowired("filterManager")
  ], AnimateSlideCellRenderer2.prototype, "filterManager", void 0);
  return AnimateSlideCellRenderer2;
}(Component);
var RowHighlightPosition;
(function(RowHighlightPosition2) {
  RowHighlightPosition2[RowHighlightPosition2["Above"] = 0] = "Above";
  RowHighlightPosition2[RowHighlightPosition2["Below"] = 1] = "Below";
})(RowHighlightPosition || (RowHighlightPosition = {}));
var RowNode = function() {
  function RowNode2(beans) {
    this.rowIndex = null;
    this.key = null;
    this.childrenMapped = {};
    this.displayed = false;
    this.rowTop = null;
    this.oldRowTop = null;
    this.selectable = true;
    this.__objectId = RowNode2.OBJECT_ID_SEQUENCE++;
    this.__autoHeights = {};
    this.alreadyRendered = false;
    this.highlighted = null;
    this.selected = false;
    this.onRowHeightChangedDebounced = debounce(this.onRowHeightChanged.bind(this), 100);
    this.beans = beans;
  }
  RowNode2.prototype.setData = function(data) {
    this.setDataCommon(data, false);
  };
  RowNode2.prototype.updateData = function(data) {
    this.setDataCommon(data, true);
  };
  RowNode2.prototype.setDataCommon = function(data, update) {
    var oldData = this.data;
    this.data = data;
    this.beans.valueCache.onDataChanged();
    this.updateDataOnDetailNode();
    this.checkRowSelectable();
    var event = this.createDataChangedEvent(data, oldData, update);
    this.dispatchLocalEvent(event);
  };
  RowNode2.prototype.updateDataOnDetailNode = function() {
    if (this.detailNode) {
      this.detailNode.data = this.data;
    }
  };
  RowNode2.prototype.createDataChangedEvent = function(newData, oldData, update) {
    return {
      type: RowNode2.EVENT_DATA_CHANGED,
      node: this,
      oldData,
      newData,
      update
    };
  };
  RowNode2.prototype.createLocalRowEvent = function(type) {
    return {
      type,
      node: this
    };
  };
  RowNode2.prototype.getRowIndexString = function() {
    if (this.rowPinned === Constants.PINNED_TOP) {
      return "t-" + this.rowIndex;
    }
    if (this.rowPinned === Constants.PINNED_BOTTOM) {
      return "b-" + this.rowIndex;
    }
    return this.rowIndex.toString();
  };
  RowNode2.prototype.createDaemonNode = function() {
    var oldNode = new RowNode2(this.beans);
    oldNode.id = this.id;
    oldNode.data = this.data;
    oldNode.daemon = true;
    oldNode.selected = this.selected;
    oldNode.level = this.level;
    return oldNode;
  };
  RowNode2.prototype.setDataAndId = function(data, id) {
    var oldNode = exists(this.id) ? this.createDaemonNode() : null;
    var oldData = this.data;
    this.data = data;
    this.updateDataOnDetailNode();
    this.setId(id);
    this.beans.selectionService.syncInRowNode(this, oldNode);
    this.checkRowSelectable();
    var event = this.createDataChangedEvent(data, oldData, false);
    this.dispatchLocalEvent(event);
  };
  RowNode2.prototype.checkRowSelectable = function() {
    var isRowSelectableFunc = this.beans.gridOptionsWrapper.getIsRowSelectableFunc();
    this.setRowSelectable(isRowSelectableFunc ? isRowSelectableFunc(this) : true);
  };
  RowNode2.prototype.setRowSelectable = function(newVal) {
    if (this.selectable !== newVal) {
      this.selectable = newVal;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_SELECTABLE_CHANGED));
      }
      var isGroupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
      if (isGroupSelectsChildren) {
        var selected = this.calculateSelectedFromChildren();
        this.setSelected(selected !== null && selected !== void 0 ? selected : false);
      }
    }
  };
  RowNode2.prototype.setId = function(id) {
    var getRowIdFunc = this.beans.gridOptionsWrapper.getRowIdFunc();
    if (getRowIdFunc) {
      if (this.data) {
        var parentKeys = this.getGroupKeys(true);
        this.id = getRowIdFunc({
          data: this.data,
          parentKeys: parentKeys.length > 0 ? parentKeys : void 0,
          level: this.level
        });
        if (this.id !== null && typeof this.id === "string" && this.id.startsWith(RowNode2.ID_PREFIX_ROW_GROUP)) {
          console.error("AG Grid: Row IDs cannot start with " + RowNode2.ID_PREFIX_ROW_GROUP + ", this is a reserved prefix for AG Grid's row grouping feature.");
        }
        if (this.id !== null && typeof this.id !== "string") {
          this.id = "" + this.id;
        }
      } else {
        this.id = void 0;
      }
    } else {
      this.id = id;
    }
  };
  RowNode2.prototype.getGroupKeys = function(excludeSelf) {
    if (excludeSelf === void 0) {
      excludeSelf = false;
    }
    var keys2 = [];
    var pointer = this;
    if (excludeSelf) {
      pointer = pointer.parent;
    }
    while (pointer && pointer.level >= 0) {
      keys2.push(pointer.key);
      pointer = pointer.parent;
    }
    keys2.reverse();
    return keys2;
  };
  RowNode2.prototype.isPixelInRange = function(pixel) {
    if (!exists(this.rowTop) || !exists(this.rowHeight)) {
      return false;
    }
    return pixel >= this.rowTop && pixel < this.rowTop + this.rowHeight;
  };
  RowNode2.prototype.setFirstChild = function(firstChild) {
    if (this.firstChild === firstChild) {
      return;
    }
    this.firstChild = firstChild;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_FIRST_CHILD_CHANGED));
    }
  };
  RowNode2.prototype.setLastChild = function(lastChild) {
    if (this.lastChild === lastChild) {
      return;
    }
    this.lastChild = lastChild;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_LAST_CHILD_CHANGED));
    }
  };
  RowNode2.prototype.setChildIndex = function(childIndex) {
    if (this.childIndex === childIndex) {
      return;
    }
    this.childIndex = childIndex;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_CHILD_INDEX_CHANGED));
    }
  };
  RowNode2.prototype.setRowTop = function(rowTop) {
    this.oldRowTop = this.rowTop;
    if (this.rowTop === rowTop) {
      return;
    }
    this.rowTop = rowTop;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_TOP_CHANGED));
    }
    this.setDisplayed(rowTop !== null);
  };
  RowNode2.prototype.clearRowTopAndRowIndex = function() {
    this.oldRowTop = null;
    this.setRowTop(null);
    this.setRowIndex(null);
  };
  RowNode2.prototype.setDisplayed = function(displayed) {
    if (this.displayed === displayed) {
      return;
    }
    this.displayed = displayed;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DISPLAYED_CHANGED));
    }
  };
  RowNode2.prototype.setDragging = function(dragging) {
    if (this.dragging === dragging) {
      return;
    }
    this.dragging = dragging;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DRAGGING_CHANGED));
    }
  };
  RowNode2.prototype.setHighlighted = function(highlighted) {
    if (highlighted === this.highlighted) {
      return;
    }
    this.highlighted = highlighted;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HIGHLIGHT_CHANGED));
    }
  };
  RowNode2.prototype.setAllChildrenCount = function(allChildrenCount) {
    if (this.allChildrenCount === allChildrenCount) {
      return;
    }
    this.allChildrenCount = allChildrenCount;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED));
    }
  };
  RowNode2.prototype.setMaster = function(master) {
    if (this.master === master) {
      return;
    }
    if (this.master && !master) {
      this.expanded = false;
    }
    this.master = master;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_MASTER_CHANGED));
    }
  };
  RowNode2.prototype.setGroup = function(group) {
    if (this.group === group) {
      return;
    }
    if (this.group && !group) {
      this.expanded = false;
    }
    this.group = group;
    this.updateHasChildren();
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_GROUP_CHANGED));
    }
  };
  RowNode2.prototype.setRowHeight = function(rowHeight, estimated) {
    if (estimated === void 0) {
      estimated = false;
    }
    this.rowHeight = rowHeight;
    this.rowHeightEstimated = estimated;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HEIGHT_CHANGED));
    }
  };
  RowNode2.prototype.setRowAutoHeight = function(cellHeight, column) {
    if (!this.__autoHeights) {
      this.__autoHeights = {};
    }
    var autoHeights = this.__autoHeights;
    autoHeights[column.getId()] = cellHeight;
    if (cellHeight != null) {
      if (this.checkAutoHeightsDebounced == null) {
        this.checkAutoHeightsDebounced = debounce(this.checkAutoHeights.bind(this), 1);
      }
      this.checkAutoHeightsDebounced();
    }
  };
  RowNode2.prototype.checkAutoHeights = function() {
    var notAllPresent = false;
    var nonePresent = true;
    var newRowHeight = 0;
    var autoHeights = this.__autoHeights;
    if (autoHeights == null) {
      return;
    }
    var displayedAutoHeightCols = this.beans.columnModel.getAllDisplayedAutoHeightCols();
    displayedAutoHeightCols.forEach(function(col) {
      var cellHeight = autoHeights[col.getId()];
      if (cellHeight == null) {
        notAllPresent = true;
        return;
      }
      nonePresent = false;
      if (cellHeight > newRowHeight) {
        newRowHeight = cellHeight;
      }
    });
    if (notAllPresent) {
      return;
    }
    if (nonePresent || newRowHeight < 10) {
      newRowHeight = this.beans.gridOptionsWrapper.getRowHeightForNode(this).height;
    }
    if (newRowHeight == this.rowHeight) {
      return;
    }
    this.setRowHeight(newRowHeight);
    this.onRowHeightChangedDebounced();
  };
  RowNode2.prototype.onRowHeightChanged = function() {
    var rowModel = this.beans.rowModel;
    if (rowModel.onRowHeightChanged) {
      rowModel.onRowHeightChanged();
    }
  };
  RowNode2.prototype.setRowIndex = function(rowIndex) {
    if (this.rowIndex === rowIndex) {
      return;
    }
    this.rowIndex = rowIndex;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_INDEX_CHANGED));
    }
  };
  RowNode2.prototype.setUiLevel = function(uiLevel) {
    if (this.uiLevel === uiLevel) {
      return;
    }
    this.uiLevel = uiLevel;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_UI_LEVEL_CHANGED));
    }
  };
  RowNode2.prototype.setExpanded = function(expanded, e2) {
    if (this.expanded === expanded) {
      return;
    }
    this.expanded = expanded;
    if (this.eventService) {
      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_EXPANDED_CHANGED));
    }
    var event = Object.assign({}, this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED), {
      expanded,
      event: e2 || null
    });
    this.beans.rowNodeEventThrottle.dispatchExpanded(event);
    if (this.beans.gridOptionsWrapper.isGroupIncludeFooter()) {
      this.beans.rowRenderer.refreshCells({ rowNodes: [this] });
    }
  };
  RowNode2.prototype.createGlobalRowEvent = function(type) {
    return {
      type,
      node: this,
      data: this.data,
      rowIndex: this.rowIndex,
      rowPinned: this.rowPinned,
      context: this.beans.gridOptionsWrapper.getContext(),
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi()
    };
  };
  RowNode2.prototype.dispatchLocalEvent = function(event) {
    if (this.eventService) {
      this.eventService.dispatchEvent(event);
    }
  };
  RowNode2.prototype.setDataValue = function(colKey, newValue, eventSource) {
    var column = this.beans.columnModel.getPrimaryColumn(colKey);
    var oldValue = this.beans.valueService.getValue(column, this);
    var valueChanged = this.beans.valueService.setValue(this, column, newValue, eventSource);
    this.dispatchCellChangedEvent(column, newValue, oldValue);
    this.checkRowSelectable();
    return valueChanged;
  };
  RowNode2.prototype.setGroupValue = function(colKey, newValue) {
    var column = this.beans.columnModel.getGridColumn(colKey);
    if (missing(this.groupData)) {
      this.groupData = {};
    }
    var columnId = column.getColId();
    var oldValue = this.groupData[columnId];
    if (oldValue === newValue) {
      return;
    }
    this.groupData[columnId] = newValue;
    this.dispatchCellChangedEvent(column, newValue, oldValue);
  };
  RowNode2.prototype.setAggData = function(newAggData) {
    var _this = this;
    var colIds = getAllKeysInObjects([this.aggData, newAggData]);
    var oldAggData = this.aggData;
    this.aggData = newAggData;
    if (this.eventService) {
      colIds.forEach(function(colId) {
        var column = _this.beans.columnModel.getGridColumn(colId);
        var value = _this.aggData ? _this.aggData[colId] : void 0;
        var oldValue = oldAggData ? oldAggData[colId] : void 0;
        _this.dispatchCellChangedEvent(column, value, oldValue);
      });
    }
  };
  RowNode2.prototype.updateHasChildren = function() {
    var newValue = this.group && !this.footer || this.childrenAfterGroup && this.childrenAfterGroup.length > 0;
    if (newValue !== this.__hasChildren) {
      this.__hasChildren = !!newValue;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HAS_CHILDREN_CHANGED));
      }
    }
  };
  RowNode2.prototype.hasChildren = function() {
    if (this.__hasChildren == null) {
      this.updateHasChildren();
    }
    return this.__hasChildren;
  };
  RowNode2.prototype.isEmptyRowGroupNode = function() {
    return this.group && missingOrEmpty(this.childrenAfterGroup);
  };
  RowNode2.prototype.dispatchCellChangedEvent = function(column, newValue, oldValue) {
    var cellChangedEvent = {
      type: RowNode2.EVENT_CELL_CHANGED,
      node: this,
      column,
      newValue,
      oldValue
    };
    this.dispatchLocalEvent(cellChangedEvent);
  };
  RowNode2.prototype.resetQuickFilterAggregateText = function() {
    this.quickFilterAggregateText = null;
  };
  RowNode2.prototype.isExpandable = function() {
    return this.hasChildren() && !this.footer || this.master ? true : false;
  };
  RowNode2.prototype.isSelected = function() {
    if (this.footer) {
      return this.sibling.isSelected();
    }
    return this.selected;
  };
  RowNode2.prototype.depthFirstSearch = function(callback) {
    if (this.childrenAfterGroup) {
      this.childrenAfterGroup.forEach(function(child) {
        return child.depthFirstSearch(callback);
      });
    }
    callback(this);
  };
  RowNode2.prototype.calculateSelectedFromChildren = function() {
    var _a2;
    var atLeastOneSelected = false;
    var atLeastOneDeSelected = false;
    var atLeastOneMixed = false;
    if (!((_a2 = this.childrenAfterGroup) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      return this.selectable ? this.selected : null;
    }
    for (var i2 = 0; i2 < this.childrenAfterGroup.length; i2++) {
      var child = this.childrenAfterGroup[i2];
      var childState = child.isSelected();
      if (!child.selectable) {
        var selectable = child.calculateSelectedFromChildren();
        if (selectable === null) {
          continue;
        }
        childState = selectable;
      }
      switch (childState) {
        case true:
          atLeastOneSelected = true;
          break;
        case false:
          atLeastOneDeSelected = true;
          break;
        default:
          atLeastOneMixed = true;
          break;
      }
    }
    if (atLeastOneMixed || atLeastOneSelected && atLeastOneDeSelected) {
      return void 0;
    } else if (atLeastOneSelected) {
      return true;
    } else if (atLeastOneDeSelected) {
      return false;
    } else if (!this.selectable) {
      return null;
    } else {
      return this.selected;
    }
  };
  RowNode2.prototype.setSelectedInitialValue = function(selected) {
    this.selected = selected;
  };
  RowNode2.prototype.setSelected = function(newValue, clearSelection, suppressFinishActions) {
    if (clearSelection === void 0) {
      clearSelection = false;
    }
    if (suppressFinishActions === void 0) {
      suppressFinishActions = false;
    }
    this.setSelectedParams({
      newValue,
      clearSelection,
      suppressFinishActions,
      rangeSelect: false
    });
  };
  RowNode2.prototype.isRowPinned = function() {
    return this.rowPinned === Constants.PINNED_TOP || this.rowPinned === Constants.PINNED_BOTTOM;
  };
  RowNode2.prototype.setSelectedParams = function(params) {
    var _a2;
    var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
    var newValue = params.newValue === true;
    var clearSelection = params.clearSelection === true;
    var suppressFinishActions = params.suppressFinishActions === true;
    var rangeSelect = params.rangeSelect === true;
    var groupSelectsFiltered = groupSelectsChildren && params.groupSelectsFiltered === true;
    if (this.id === void 0) {
      console.warn("AG Grid: cannot select node until id for node is known");
      return 0;
    }
    if (this.rowPinned) {
      console.warn("AG Grid: cannot select pinned rows");
      return 0;
    }
    if (this.footer) {
      return this.sibling.setSelectedParams(params);
    }
    if (rangeSelect && this.beans.selectionService.getLastSelectedNode()) {
      var newRowClicked = this.beans.selectionService.getLastSelectedNode() !== this;
      var allowMultiSelect = this.beans.gridOptionsWrapper.isRowSelectionMulti();
      if (newRowClicked && allowMultiSelect) {
        var nodesChanged = this.doRowRangeSelection(params.newValue);
        this.beans.selectionService.setLastSelectedNode(this);
        return nodesChanged;
      }
    }
    var updatedCount = 0;
    var skipThisNode = groupSelectsFiltered && this.group;
    if (!skipThisNode) {
      var thisNodeWasSelected = this.selectThisNode(newValue, params.event);
      if (thisNodeWasSelected) {
        updatedCount++;
      }
    }
    if (groupSelectsChildren && ((_a2 = this.childrenAfterGroup) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      updatedCount += this.selectChildNodes(newValue, groupSelectsFiltered);
    }
    if (!suppressFinishActions) {
      var clearOtherNodes = newValue && (clearSelection || !this.beans.gridOptionsWrapper.isRowSelectionMulti());
      if (clearOtherNodes) {
        updatedCount += this.beans.selectionService.clearOtherNodes(this);
      }
      if (updatedCount > 0) {
        this.beans.selectionService.updateGroupsFromChildrenSelections();
        var event_1 = {
          type: Events.EVENT_SELECTION_CHANGED
        };
        this.beans.eventService.dispatchEvent(event_1);
      }
      if (newValue) {
        this.beans.selectionService.setLastSelectedNode(this);
      }
    }
    return updatedCount;
  };
  RowNode2.prototype.doRowRangeSelection = function(value) {
    var _this = this;
    if (value === void 0) {
      value = true;
    }
    var groupsSelectChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
    var lastSelectedNode = this.beans.selectionService.getLastSelectedNode();
    var nodesToSelect = this.beans.rowModel.getNodesInRangeForSelection(this, lastSelectedNode);
    var updatedCount = 0;
    nodesToSelect.forEach(function(rowNode) {
      if (rowNode.group && groupsSelectChildren || value === false && _this === rowNode) {
        return;
      }
      var nodeWasSelected = rowNode.selectThisNode(value);
      if (nodeWasSelected) {
        updatedCount++;
      }
    });
    this.beans.selectionService.updateGroupsFromChildrenSelections();
    var event = {
      type: Events.EVENT_SELECTION_CHANGED
    };
    this.beans.eventService.dispatchEvent(event);
    return updatedCount;
  };
  RowNode2.prototype.isParentOfNode = function(potentialParent) {
    var parentNode = this.parent;
    while (parentNode) {
      if (parentNode === potentialParent) {
        return true;
      }
      parentNode = parentNode.parent;
    }
    return false;
  };
  RowNode2.prototype.selectThisNode = function(newValue, e2) {
    var selectionNotAllowed = !this.selectable && newValue;
    var selectionNotChanged = this.selected === newValue;
    if (selectionNotAllowed || selectionNotChanged) {
      return false;
    }
    this.selected = newValue;
    if (this.eventService) {
      this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_SELECTED));
    }
    var event = Object.assign({}, this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED), {
      event: e2 || null
    });
    this.beans.eventService.dispatchEvent(event);
    return true;
  };
  RowNode2.prototype.selectChildNodes = function(newValue, groupSelectsFiltered) {
    var children = groupSelectsFiltered ? this.childrenAfterAggFilter : this.childrenAfterGroup;
    if (missing(children)) {
      return 0;
    }
    var updatedCount = 0;
    for (var i2 = 0; i2 < children.length; i2++) {
      updatedCount += children[i2].setSelectedParams({
        newValue,
        clearSelection: false,
        suppressFinishActions: true,
        groupSelectsFiltered
      });
    }
    return updatedCount;
  };
  RowNode2.prototype.addEventListener = function(eventType, listener) {
    if (!this.eventService) {
      this.eventService = new EventService();
    }
    this.eventService.addEventListener(eventType, listener);
  };
  RowNode2.prototype.removeEventListener = function(eventType, listener) {
    if (!this.eventService) {
      return;
    }
    this.eventService.removeEventListener(eventType, listener);
    if (this.eventService.noRegisteredListenersExist()) {
      this.eventService = null;
    }
  };
  RowNode2.prototype.onMouseEnter = function() {
    this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_ENTER));
  };
  RowNode2.prototype.onMouseLeave = function() {
    this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_LEAVE));
  };
  RowNode2.prototype.getFirstChildOfFirstChild = function(rowGroupColumn) {
    var currentRowNode = this;
    var isCandidate = true;
    var foundFirstChildPath = false;
    var nodeToSwapIn = null;
    while (isCandidate && !foundFirstChildPath) {
      var parentRowNode = currentRowNode.parent;
      var firstChild = exists(parentRowNode) && currentRowNode.firstChild;
      if (firstChild) {
        if (parentRowNode.rowGroupColumn === rowGroupColumn) {
          foundFirstChildPath = true;
          nodeToSwapIn = parentRowNode;
        }
      } else {
        isCandidate = false;
      }
      currentRowNode = parentRowNode;
    }
    return foundFirstChildPath ? nodeToSwapIn : null;
  };
  RowNode2.prototype.isFullWidthCell = function() {
    var isFullWidthCellFunc = this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();
    return isFullWidthCellFunc ? isFullWidthCellFunc({ rowNode: this }) : false;
  };
  RowNode2.prototype.getRoute = function() {
    if (this.key == null) {
      return;
    }
    var res = [];
    var pointer = this;
    while (pointer.key != null) {
      res.push(pointer.key);
      pointer = pointer.parent;
    }
    return res.reverse();
  };
  RowNode2.ID_PREFIX_ROW_GROUP = "row-group-";
  RowNode2.ID_PREFIX_TOP_PINNED = "t-";
  RowNode2.ID_PREFIX_BOTTOM_PINNED = "b-";
  RowNode2.OBJECT_ID_SEQUENCE = 0;
  RowNode2.EVENT_ROW_SELECTED = "rowSelected";
  RowNode2.EVENT_DATA_CHANGED = "dataChanged";
  RowNode2.EVENT_CELL_CHANGED = "cellChanged";
  RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED = "allChildrenCountChanged";
  RowNode2.EVENT_MASTER_CHANGED = "masterChanged";
  RowNode2.EVENT_GROUP_CHANGED = "groupChanged";
  RowNode2.EVENT_MOUSE_ENTER = "mouseEnter";
  RowNode2.EVENT_MOUSE_LEAVE = "mouseLeave";
  RowNode2.EVENT_HEIGHT_CHANGED = "heightChanged";
  RowNode2.EVENT_TOP_CHANGED = "topChanged";
  RowNode2.EVENT_DISPLAYED_CHANGED = "displayedChanged";
  RowNode2.EVENT_FIRST_CHILD_CHANGED = "firstChildChanged";
  RowNode2.EVENT_LAST_CHILD_CHANGED = "lastChildChanged";
  RowNode2.EVENT_CHILD_INDEX_CHANGED = "childIndexChanged";
  RowNode2.EVENT_ROW_INDEX_CHANGED = "rowIndexChanged";
  RowNode2.EVENT_EXPANDED_CHANGED = "expandedChanged";
  RowNode2.EVENT_HAS_CHILDREN_CHANGED = "hasChildrenChanged";
  RowNode2.EVENT_SELECTABLE_CHANGED = "selectableChanged";
  RowNode2.EVENT_UI_LEVEL_CHANGED = "uiLevelChanged";
  RowNode2.EVENT_HIGHLIGHT_CHANGED = "rowHighlightChanged";
  RowNode2.EVENT_DRAGGING_CHANGED = "draggingChanged";
  return RowNode2;
}();
var __extends$2i = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$8 = function() {
  __assign$8 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$8.apply(this, arguments);
};
var __decorate$21 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CheckboxSelectionComponent = function(_super) {
  __extends$2i(CheckboxSelectionComponent2, _super);
  function CheckboxSelectionComponent2() {
    return _super.call(this, '\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>') || this;
  }
  CheckboxSelectionComponent2.prototype.postConstruct = function() {
    this.eCheckbox.setPassive(true);
  };
  CheckboxSelectionComponent2.prototype.getCheckboxId = function() {
    return this.eCheckbox.getInputElement().id;
  };
  CheckboxSelectionComponent2.prototype.onDataChanged = function() {
    this.onSelectionChanged();
  };
  CheckboxSelectionComponent2.prototype.onSelectableChanged = function() {
    this.showOrHideSelect();
  };
  CheckboxSelectionComponent2.prototype.onSelectionChanged = function() {
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var state = this.rowNode.isSelected();
    var stateName = state === void 0 ? translate2("ariaIndeterminate", "indeterminate") : state === true ? translate2("ariaChecked", "checked") : translate2("ariaUnchecked", "unchecked");
    var ariaLabel = translate2("ariaRowToggleSelection", "Press Space to toggle row selection");
    this.eCheckbox.setValue(state, true);
    this.eCheckbox.setInputAriaLabel(ariaLabel + " (" + stateName + ")");
  };
  CheckboxSelectionComponent2.prototype.onCheckedClicked = function(event) {
    var groupSelectsFiltered = this.gridOptionsWrapper.isGroupSelectsFiltered();
    var updatedCount = this.rowNode.setSelectedParams({ newValue: false, rangeSelect: event.shiftKey, groupSelectsFiltered });
    return updatedCount;
  };
  CheckboxSelectionComponent2.prototype.onUncheckedClicked = function(event) {
    var groupSelectsFiltered = this.gridOptionsWrapper.isGroupSelectsFiltered();
    var updatedCount = this.rowNode.setSelectedParams({ newValue: true, rangeSelect: event.shiftKey, groupSelectsFiltered });
    return updatedCount;
  };
  CheckboxSelectionComponent2.prototype.init = function(params) {
    var _this = this;
    this.rowNode = params.rowNode;
    this.column = params.column;
    this.overrides = params.overrides;
    this.onSelectionChanged();
    this.addGuiEventListener("click", function(event) {
      return stopPropagationForAgGrid(event);
    });
    this.addGuiEventListener("dblclick", function(event) {
      return stopPropagationForAgGrid(event);
    });
    this.addManagedListener(this.eCheckbox.getInputElement(), "click", function(event) {
      var isSelected = _this.eCheckbox.getValue();
      var previousValue = _this.eCheckbox.getPreviousValue();
      if (previousValue === void 0 || isSelected === void 0) {
        var result = _this.onUncheckedClicked(event || {});
        if (result === 0) {
          _this.onCheckedClicked(event);
        }
      } else if (isSelected) {
        _this.onCheckedClicked(event);
      } else {
        _this.onUncheckedClicked(event || {});
      }
    });
    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onSelectionChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onDataChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_SELECTABLE_CHANGED, this.onSelectableChanged.bind(this));
    var isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();
    var checkboxVisibleIsDynamic = isRowSelectableFunc || typeof this.getIsVisible() === "function";
    if (checkboxVisibleIsDynamic) {
      var showOrHideSelectListener = this.showOrHideSelect.bind(this);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, showOrHideSelectListener);
      this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, showOrHideSelectListener);
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, showOrHideSelectListener);
      this.showOrHideSelect();
    }
    this.eCheckbox.getInputElement().setAttribute("tabindex", "-1");
  };
  CheckboxSelectionComponent2.prototype.showOrHideSelect = function() {
    var _a2, _b, _c, _d;
    var selectable = this.rowNode.selectable;
    var isVisible2 = this.getIsVisible();
    if (selectable) {
      if (typeof isVisible2 === "function") {
        var extraParams = (_a2 = this.overrides) === null || _a2 === void 0 ? void 0 : _a2.callbackParams;
        var params = (_b = this.column) === null || _b === void 0 ? void 0 : _b.createColumnFunctionCallbackParams(this.rowNode);
        selectable = params ? isVisible2(__assign$8(__assign$8({}, extraParams), params)) : false;
      } else {
        selectable = isVisible2 !== null && isVisible2 !== void 0 ? isVisible2 : false;
      }
    }
    var disableInsteadOfHide = (_c = this.column) === null || _c === void 0 ? void 0 : _c.getColDef().showDisabledCheckboxes;
    if (disableInsteadOfHide) {
      this.eCheckbox.setDisabled(!selectable);
      this.setVisible(true);
      this.setDisplayed(true);
      return;
    }
    if ((_d = this.overrides) === null || _d === void 0 ? void 0 : _d.removeHidden) {
      this.setDisplayed(selectable);
      return;
    }
    this.setVisible(selectable);
  };
  CheckboxSelectionComponent2.prototype.getIsVisible = function() {
    var _a2, _b;
    if (this.overrides) {
      return this.overrides.isVisible;
    }
    return (_b = (_a2 = this.column) === null || _a2 === void 0 ? void 0 : _a2.getColDef()) === null || _b === void 0 ? void 0 : _b.checkboxSelection;
  };
  __decorate$21([
    RefSelector("eCheckbox")
  ], CheckboxSelectionComponent2.prototype, "eCheckbox", void 0);
  __decorate$21([
    PostConstruct
  ], CheckboxSelectionComponent2.prototype, "postConstruct", null);
  return CheckboxSelectionComponent2;
}(Component);
var __extends$2h = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$20 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __values$3 = function(o) {
  var s3 = typeof Symbol === "function" && Symbol.iterator, m3 = s3 && o[s3], i2 = 0;
  if (m3)
    return m3.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i2 >= o.length)
          o = void 0;
        return { value: o && o[i2++], done: !o };
      }
    };
  throw new TypeError(s3 ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var DragSourceType;
(function(DragSourceType2) {
  DragSourceType2[DragSourceType2["ToolPanel"] = 0] = "ToolPanel";
  DragSourceType2[DragSourceType2["HeaderCell"] = 1] = "HeaderCell";
  DragSourceType2[DragSourceType2["RowDrag"] = 2] = "RowDrag";
  DragSourceType2[DragSourceType2["ChartPanel"] = 3] = "ChartPanel";
})(DragSourceType || (DragSourceType = {}));
var VerticalDirection;
(function(VerticalDirection2) {
  VerticalDirection2[VerticalDirection2["Up"] = 0] = "Up";
  VerticalDirection2[VerticalDirection2["Down"] = 1] = "Down";
})(VerticalDirection || (VerticalDirection = {}));
var HorizontalDirection;
(function(HorizontalDirection2) {
  HorizontalDirection2[HorizontalDirection2["Left"] = 0] = "Left";
  HorizontalDirection2[HorizontalDirection2["Right"] = 1] = "Right";
})(HorizontalDirection || (HorizontalDirection = {}));
var DragAndDropService = function(_super) {
  __extends$2h(DragAndDropService2, _super);
  function DragAndDropService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.dragSourceAndParamsList = [];
    _this.dropTargets = [];
    return _this;
  }
  DragAndDropService_1 = DragAndDropService2;
  DragAndDropService2.prototype.init = function() {
    this.ePinnedIcon = createIcon("columnMovePin", this.gridOptionsWrapper, null);
    this.eHideIcon = createIcon("columnMoveHide", this.gridOptionsWrapper, null);
    this.eMoveIcon = createIcon("columnMoveMove", this.gridOptionsWrapper, null);
    this.eLeftIcon = createIcon("columnMoveLeft", this.gridOptionsWrapper, null);
    this.eRightIcon = createIcon("columnMoveRight", this.gridOptionsWrapper, null);
    this.eGroupIcon = createIcon("columnMoveGroup", this.gridOptionsWrapper, null);
    this.eAggregateIcon = createIcon("columnMoveValue", this.gridOptionsWrapper, null);
    this.ePivotIcon = createIcon("columnMovePivot", this.gridOptionsWrapper, null);
    this.eDropNotAllowedIcon = createIcon("dropNotAllowed", this.gridOptionsWrapper, null);
  };
  DragAndDropService2.prototype.addDragSource = function(dragSource, allowTouch) {
    if (allowTouch === void 0) {
      allowTouch = false;
    }
    var params = {
      eElement: dragSource.eElement,
      dragStartPixels: dragSource.dragStartPixels,
      onDragStart: this.onDragStart.bind(this, dragSource),
      onDragStop: this.onDragStop.bind(this),
      onDragging: this.onDragging.bind(this)
    };
    this.dragSourceAndParamsList.push({ params, dragSource });
    this.dragService.addDragSource(params, allowTouch);
  };
  DragAndDropService2.prototype.removeDragSource = function(dragSource) {
    var sourceAndParams = this.dragSourceAndParamsList.find(function(item) {
      return item.dragSource === dragSource;
    });
    if (sourceAndParams) {
      this.dragService.removeDragSource(sourceAndParams.params);
      removeFromArray(this.dragSourceAndParamsList, sourceAndParams);
    }
  };
  DragAndDropService2.prototype.clearDragSourceParamsList = function() {
    var _this = this;
    this.dragSourceAndParamsList.forEach(function(sourceAndParams) {
      return _this.dragService.removeDragSource(sourceAndParams.params);
    });
    this.dragSourceAndParamsList.length = 0;
  };
  DragAndDropService2.prototype.nudge = function() {
    if (this.dragging) {
      this.onDragging(this.eventLastTime, true);
    }
  };
  DragAndDropService2.prototype.onDragStart = function(dragSource, mouseEvent) {
    this.dragging = true;
    this.dragSource = dragSource;
    this.eventLastTime = mouseEvent;
    this.dragItem = this.dragSource.getDragItem();
    this.lastDropTarget = this.dragSource.dragSourceDropTarget;
    if (this.dragSource.onDragStarted) {
      this.dragSource.onDragStarted();
    }
    this.createGhost();
  };
  DragAndDropService2.prototype.onDragStop = function(mouseEvent) {
    this.eventLastTime = null;
    this.dragging = false;
    if (this.dragSource.onDragStopped) {
      this.dragSource.onDragStopped();
    }
    if (this.lastDropTarget && this.lastDropTarget.onDragStop) {
      var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);
      this.lastDropTarget.onDragStop(draggingEvent);
    }
    this.lastDropTarget = null;
    this.dragItem = null;
    this.removeGhost();
  };
  DragAndDropService2.prototype.onDragging = function(mouseEvent, fromNudge) {
    var _this = this;
    var _a2, _b, _c, _d;
    var hDirection = this.getHorizontalDirection(mouseEvent);
    var vDirection = this.getVerticalDirection(mouseEvent);
    this.eventLastTime = mouseEvent;
    this.positionGhost(mouseEvent);
    var validDropTargets = this.dropTargets.filter(function(target) {
      return _this.isMouseOnDropTarget(mouseEvent, target);
    });
    var dropTarget = this.findCurrentDropTarget(mouseEvent, validDropTargets);
    if (dropTarget !== this.lastDropTarget) {
      this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);
      if (this.lastDropTarget !== null && dropTarget === null) {
        (_b = (_a2 = this.dragSource).onGridExit) === null || _b === void 0 ? void 0 : _b.call(_a2, this.dragItem);
      }
      if (this.lastDropTarget === null && dropTarget !== null) {
        (_d = (_c = this.dragSource).onGridEnter) === null || _d === void 0 ? void 0 : _d.call(_c, this.dragItem);
      }
      this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
      this.lastDropTarget = dropTarget;
    } else if (dropTarget && dropTarget.onDragging) {
      var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
      dropTarget.onDragging(draggingEvent);
    }
  };
  DragAndDropService2.prototype.getAllContainersFromDropTarget = function(dropTarget) {
    var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;
    var containers = [[dropTarget.getContainer()]];
    return secondaryContainers ? containers.concat(secondaryContainers) : containers;
  };
  DragAndDropService2.prototype.allContainersIntersect = function(mouseEvent, containers) {
    var e_1, _a2;
    try {
      for (var containers_1 = __values$3(containers), containers_1_1 = containers_1.next(); !containers_1_1.done; containers_1_1 = containers_1.next()) {
        var container = containers_1_1.value;
        var rect = container.getBoundingClientRect();
        if (rect.width === 0 || rect.height === 0) {
          return false;
        }
        var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX < rect.right;
        var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY < rect.bottom;
        if (!horizontalFit || !verticalFit) {
          return false;
        }
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (containers_1_1 && !containers_1_1.done && (_a2 = containers_1.return))
          _a2.call(containers_1);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
    return true;
  };
  DragAndDropService2.prototype.isMouseOnDropTarget = function(mouseEvent, dropTarget) {
    var e_2, _a2;
    var allContainersFromDropTarget = this.getAllContainersFromDropTarget(dropTarget);
    var mouseOverTarget = false;
    try {
      for (var allContainersFromDropTarget_1 = __values$3(allContainersFromDropTarget), allContainersFromDropTarget_1_1 = allContainersFromDropTarget_1.next(); !allContainersFromDropTarget_1_1.done; allContainersFromDropTarget_1_1 = allContainersFromDropTarget_1.next()) {
        var currentContainers = allContainersFromDropTarget_1_1.value;
        if (this.allContainersIntersect(mouseEvent, currentContainers)) {
          mouseOverTarget = true;
          break;
        }
      }
    } catch (e_2_1) {
      e_2 = { error: e_2_1 };
    } finally {
      try {
        if (allContainersFromDropTarget_1_1 && !allContainersFromDropTarget_1_1.done && (_a2 = allContainersFromDropTarget_1.return))
          _a2.call(allContainersFromDropTarget_1);
      } finally {
        if (e_2)
          throw e_2.error;
      }
    }
    if (dropTarget.targetContainsSource && !dropTarget.getContainer().contains(this.dragSource.eElement)) {
      return false;
    }
    return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type, this.dragSource.eElement);
  };
  DragAndDropService2.prototype.findCurrentDropTarget = function(mouseEvent, validDropTargets) {
    var e_3, _a2, e_4, _b;
    var len = validDropTargets.length;
    if (len === 0) {
      return null;
    }
    if (len === 1) {
      return validDropTargets[0];
    }
    var eDocument = this.gridOptionsWrapper.getDocument();
    var elementStack = eDocument.elementsFromPoint(mouseEvent.clientX, mouseEvent.clientY);
    try {
      for (var elementStack_1 = __values$3(elementStack), elementStack_1_1 = elementStack_1.next(); !elementStack_1_1.done; elementStack_1_1 = elementStack_1.next()) {
        var el2 = elementStack_1_1.value;
        try {
          for (var validDropTargets_1 = (e_4 = void 0, __values$3(validDropTargets)), validDropTargets_1_1 = validDropTargets_1.next(); !validDropTargets_1_1.done; validDropTargets_1_1 = validDropTargets_1.next()) {
            var dropTarget = validDropTargets_1_1.value;
            var containers = flatten(this.getAllContainersFromDropTarget(dropTarget));
            if (containers.indexOf(el2) !== -1) {
              return dropTarget;
            }
          }
        } catch (e_4_1) {
          e_4 = { error: e_4_1 };
        } finally {
          try {
            if (validDropTargets_1_1 && !validDropTargets_1_1.done && (_b = validDropTargets_1.return))
              _b.call(validDropTargets_1);
          } finally {
            if (e_4)
              throw e_4.error;
          }
        }
      }
    } catch (e_3_1) {
      e_3 = { error: e_3_1 };
    } finally {
      try {
        if (elementStack_1_1 && !elementStack_1_1.done && (_a2 = elementStack_1.return))
          _a2.call(elementStack_1);
      } finally {
        if (e_3)
          throw e_3.error;
      }
    }
    return null;
  };
  DragAndDropService2.prototype.enterDragTargetIfExists = function(dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {
    if (!dropTarget) {
      return;
    }
    if (dropTarget.onDragEnter) {
      var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
      dropTarget.onDragEnter(dragEnterEvent);
    }
    this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);
  };
  DragAndDropService2.prototype.leaveLastTargetIfExists = function(mouseEvent, hDirection, vDirection, fromNudge) {
    if (!this.lastDropTarget) {
      return;
    }
    if (this.lastDropTarget.onDragLeave) {
      var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);
      this.lastDropTarget.onDragLeave(dragLeaveEvent);
    }
    this.setGhostIcon(null);
  };
  DragAndDropService2.prototype.addDropTarget = function(dropTarget) {
    this.dropTargets.push(dropTarget);
  };
  DragAndDropService2.prototype.removeDropTarget = function(dropTarget) {
    this.dropTargets = this.dropTargets.filter(function(target) {
      return target.getContainer() !== dropTarget.getContainer();
    });
  };
  DragAndDropService2.prototype.hasExternalDropZones = function() {
    return this.dropTargets.some(function(zones) {
      return zones.external;
    });
  };
  DragAndDropService2.prototype.findExternalZone = function(params) {
    var externalTargets = this.dropTargets.filter(function(target) {
      return target.external;
    });
    return externalTargets.find(function(zone) {
      return zone.getContainer() === params.getContainer();
    }) || null;
  };
  DragAndDropService2.prototype.getHorizontalDirection = function(event) {
    var clientX = this.eventLastTime && this.eventLastTime.clientX;
    var eClientX = event.clientX;
    if (clientX === eClientX) {
      return null;
    }
    return clientX > eClientX ? HorizontalDirection.Left : HorizontalDirection.Right;
  };
  DragAndDropService2.prototype.getVerticalDirection = function(event) {
    var clientY = this.eventLastTime && this.eventLastTime.clientY;
    var eClientY = event.clientY;
    if (clientY === eClientY) {
      return null;
    }
    return clientY > eClientY ? VerticalDirection.Up : VerticalDirection.Down;
  };
  DragAndDropService2.prototype.createDropTargetEvent = function(dropTarget, event, hDirection, vDirection, fromNudge) {
    var dropZoneTarget = dropTarget.getContainer();
    var rect = dropZoneTarget.getBoundingClientRect();
    var _a2 = this, api = _a2.gridApi, columnApi = _a2.columnApi, dragItem = _a2.dragItem, dragSource = _a2.dragSource;
    var x2 = event.clientX - rect.left;
    var y3 = event.clientY - rect.top;
    return { event, x: x2, y: y3, vDirection, hDirection, dragSource, fromNudge, dragItem, api, columnApi, dropZoneTarget };
  };
  DragAndDropService2.prototype.positionGhost = function(event) {
    var ghost = this.eGhost;
    if (!ghost) {
      return;
    }
    var ghostRect = ghost.getBoundingClientRect();
    var ghostHeight = ghostRect.height;
    var browserWidth = getBodyWidth() - 2;
    var browserHeight = getBodyHeight() - 2;
    var top = event.pageY - ghostHeight / 2;
    var left = event.pageX - 10;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var win = eDocument.defaultView || window;
    var windowScrollY = win.pageYOffset || eDocument.documentElement.scrollTop;
    var windowScrollX = win.pageXOffset || eDocument.documentElement.scrollLeft;
    if (browserWidth > 0 && left + ghost.clientWidth > browserWidth + windowScrollX) {
      left = browserWidth + windowScrollX - ghost.clientWidth;
    }
    if (left < 0) {
      left = 0;
    }
    if (browserHeight > 0 && top + ghost.clientHeight > browserHeight + windowScrollY) {
      top = browserHeight + windowScrollY - ghost.clientHeight;
    }
    if (top < 0) {
      top = 0;
    }
    ghost.style.left = left + "px";
    ghost.style.top = top + "px";
  };
  DragAndDropService2.prototype.removeGhost = function() {
    if (this.eGhost && this.eGhostParent) {
      this.eGhostParent.removeChild(this.eGhost);
    }
    this.eGhost = null;
  };
  DragAndDropService2.prototype.createGhost = function() {
    this.eGhost = loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);
    this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);
    var theme = this.environment.getTheme().theme;
    if (theme) {
      this.eGhost.classList.add(theme);
    }
    this.eGhostIcon = this.eGhost.querySelector(".ag-dnd-ghost-icon");
    this.setGhostIcon(null);
    var eText = this.eGhost.querySelector(".ag-dnd-ghost-label");
    var dragItemName = this.dragSource.dragItemName;
    if (isFunction(dragItemName)) {
      dragItemName = dragItemName();
    }
    eText.innerHTML = escapeString(dragItemName) || "";
    this.eGhost.style.height = "25px";
    this.eGhost.style.top = "20px";
    this.eGhost.style.left = "20px";
    var eDocument = this.gridOptionsWrapper.getDocument();
    var targetEl = null;
    try {
      targetEl = eDocument.fullscreenElement;
    } catch (e2) {
    } finally {
      if (!targetEl) {
        targetEl = eDocument.querySelector("body");
      }
    }
    this.eGhostParent = targetEl;
    if (!this.eGhostParent) {
      console.warn("AG Grid: could not find document body, it is needed for dragging columns");
    } else {
      this.eGhostParent.appendChild(this.eGhost);
    }
  };
  DragAndDropService2.prototype.setGhostIcon = function(iconName, shake) {
    if (shake === void 0) {
      shake = false;
    }
    clearElement(this.eGhostIcon);
    var eIcon = null;
    if (!iconName) {
      iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;
    }
    switch (iconName) {
      case DragAndDropService_1.ICON_PINNED:
        eIcon = this.ePinnedIcon;
        break;
      case DragAndDropService_1.ICON_MOVE:
        eIcon = this.eMoveIcon;
        break;
      case DragAndDropService_1.ICON_LEFT:
        eIcon = this.eLeftIcon;
        break;
      case DragAndDropService_1.ICON_RIGHT:
        eIcon = this.eRightIcon;
        break;
      case DragAndDropService_1.ICON_GROUP:
        eIcon = this.eGroupIcon;
        break;
      case DragAndDropService_1.ICON_AGGREGATE:
        eIcon = this.eAggregateIcon;
        break;
      case DragAndDropService_1.ICON_PIVOT:
        eIcon = this.ePivotIcon;
        break;
      case DragAndDropService_1.ICON_NOT_ALLOWED:
        eIcon = this.eDropNotAllowedIcon;
        break;
      case DragAndDropService_1.ICON_HIDE:
        eIcon = this.eHideIcon;
        break;
    }
    this.eGhostIcon.classList.toggle("ag-shake-left-to-right", shake);
    if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {
      return;
    }
    if (eIcon) {
      this.eGhostIcon.appendChild(eIcon);
    }
  };
  var DragAndDropService_1;
  DragAndDropService2.ICON_PINNED = "pinned";
  DragAndDropService2.ICON_MOVE = "move";
  DragAndDropService2.ICON_LEFT = "left";
  DragAndDropService2.ICON_RIGHT = "right";
  DragAndDropService2.ICON_GROUP = "group";
  DragAndDropService2.ICON_AGGREGATE = "aggregate";
  DragAndDropService2.ICON_PIVOT = "pivot";
  DragAndDropService2.ICON_NOT_ALLOWED = "notAllowed";
  DragAndDropService2.ICON_HIDE = "hide";
  DragAndDropService2.GHOST_TEMPLATE = '<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>';
  __decorate$20([
    Autowired("dragService")
  ], DragAndDropService2.prototype, "dragService", void 0);
  __decorate$20([
    Autowired("mouseEventService")
  ], DragAndDropService2.prototype, "mouseEventService", void 0);
  __decorate$20([
    Autowired("environment")
  ], DragAndDropService2.prototype, "environment", void 0);
  __decorate$20([
    Autowired("columnApi")
  ], DragAndDropService2.prototype, "columnApi", void 0);
  __decorate$20([
    Autowired("gridApi")
  ], DragAndDropService2.prototype, "gridApi", void 0);
  __decorate$20([
    PostConstruct
  ], DragAndDropService2.prototype, "init", null);
  __decorate$20([
    PreDestroy
  ], DragAndDropService2.prototype, "clearDragSourceParamsList", null);
  DragAndDropService2 = DragAndDropService_1 = __decorate$20([
    Bean("dragAndDropService")
  ], DragAndDropService2);
  return DragAndDropService2;
}(BeanStub);
var __extends$2g = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1$ = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowDragComp = function(_super) {
  __extends$2g(RowDragComp2, _super);
  function RowDragComp2(cellValueFn, rowNode, column, customGui, dragStartPixels, suppressVisibilityChange) {
    var _this = _super.call(this) || this;
    _this.cellValueFn = cellValueFn;
    _this.rowNode = rowNode;
    _this.column = column;
    _this.customGui = customGui;
    _this.dragStartPixels = dragStartPixels;
    _this.suppressVisibilityChange = suppressVisibilityChange;
    _this.dragSource = null;
    return _this;
  }
  RowDragComp2.prototype.isCustomGui = function() {
    return this.customGui != null;
  };
  RowDragComp2.prototype.postConstruct = function() {
    if (!this.customGui) {
      this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>');
      this.getGui().appendChild(createIconNoSpan("rowDrag", this.beans.gridOptionsWrapper, null));
      this.addDragSource();
    } else {
      this.setDragElement(this.customGui, this.dragStartPixels);
    }
    this.checkCompatibility();
    if (!this.suppressVisibilityChange) {
      var strategy = this.beans.gridOptionsWrapper.isRowDragManaged() ? new ManagedVisibilityStrategy(this, this.beans, this.rowNode, this.column) : new NonManagedVisibilityStrategy(this, this.beans, this.rowNode, this.column);
      this.createManagedBean(strategy, this.beans.context);
    }
  };
  RowDragComp2.prototype.setDragElement = function(dragElement, dragStartPixels) {
    this.setTemplateFromElement(dragElement);
    this.addDragSource(dragStartPixels);
  };
  RowDragComp2.prototype.getSelectedNodes = function() {
    var isRowDragMultiRow = this.beans.gridOptionsWrapper.isRowDragMultiRow();
    if (!isRowDragMultiRow) {
      return [this.rowNode];
    }
    var selection = this.beans.selectionService.getSelectedNodes();
    return selection.indexOf(this.rowNode) !== -1 ? selection : [this.rowNode];
  };
  RowDragComp2.prototype.checkCompatibility = function() {
    var managed = this.beans.gridOptionsWrapper.isRowDragManaged();
    var treeData = this.beans.gridOptionsWrapper.isTreeData();
    if (treeData && managed) {
      doOnce(function() {
        return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true");
      }, "RowDragComp.managedAndTreeData");
    }
  };
  RowDragComp2.prototype.getDragItem = function() {
    return {
      rowNode: this.rowNode,
      rowNodes: this.getSelectedNodes(),
      columns: this.column ? [this.column] : void 0,
      defaultTextValue: this.cellValueFn()
    };
  };
  RowDragComp2.prototype.addDragSource = function(dragStartPixels) {
    var _this = this;
    if (dragStartPixels === void 0) {
      dragStartPixels = 4;
    }
    if (this.dragSource) {
      this.removeDragSource();
    }
    var rowDragText = this.column && this.column.getColDef().rowDragText;
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    this.dragSource = {
      type: DragSourceType.RowDrag,
      eElement: this.getGui(),
      dragItemName: function() {
        var _a2;
        var dragItem = _this.getDragItem();
        var dragItemCount = ((_a2 = dragItem.rowNodes) === null || _a2 === void 0 ? void 0 : _a2.length) || 1;
        if (rowDragText) {
          return rowDragText(dragItem, dragItemCount);
        }
        return dragItemCount === 1 ? _this.cellValueFn() : dragItemCount + " " + translate2("rowDragRows", "rows");
      },
      getDragItem: function() {
        return _this.getDragItem();
      },
      dragStartPixels,
      dragSourceDomDataKey: this.beans.gridOptionsWrapper.getDomDataKey()
    };
    this.beans.dragAndDropService.addDragSource(this.dragSource, true);
  };
  RowDragComp2.prototype.removeDragSource = function() {
    if (this.dragSource) {
      this.beans.dragAndDropService.removeDragSource(this.dragSource);
    }
    this.dragSource = null;
  };
  __decorate$1$([
    Autowired("beans")
  ], RowDragComp2.prototype, "beans", void 0);
  __decorate$1$([
    PostConstruct
  ], RowDragComp2.prototype, "postConstruct", null);
  __decorate$1$([
    PreDestroy
  ], RowDragComp2.prototype, "removeDragSource", null);
  return RowDragComp2;
}(Component);
var VisibilityStrategy = function(_super) {
  __extends$2g(VisibilityStrategy2, _super);
  function VisibilityStrategy2(parent, rowNode, column) {
    var _this = _super.call(this) || this;
    _this.parent = parent;
    _this.rowNode = rowNode;
    _this.column = column;
    return _this;
  }
  VisibilityStrategy2.prototype.setDisplayedOrVisible = function(neverDisplayed) {
    if (neverDisplayed) {
      this.parent.setDisplayed(false);
    } else {
      var shown = true;
      var isShownSometimes = false;
      if (this.column) {
        shown = this.column.isRowDrag(this.rowNode) || this.parent.isCustomGui();
        isShownSometimes = isFunction(this.column.getColDef().rowDrag);
      }
      if (isShownSometimes) {
        this.parent.setDisplayed(true);
        this.parent.setVisible(shown);
      } else {
        this.parent.setDisplayed(shown);
        this.parent.setVisible(true);
      }
    }
  };
  return VisibilityStrategy2;
}(BeanStub);
var NonManagedVisibilityStrategy = function(_super) {
  __extends$2g(NonManagedVisibilityStrategy2, _super);
  function NonManagedVisibilityStrategy2(parent, beans, rowNode, column) {
    var _this = _super.call(this, parent, rowNode, column) || this;
    _this.beans = beans;
    return _this;
  }
  NonManagedVisibilityStrategy2.prototype.postConstruct = function() {
    this.addManagedListener(this.beans.gridOptionsWrapper, "suppressRowDrag", this.onSuppressRowDrag.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.beans.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.workOutVisibility.bind(this));
    this.workOutVisibility();
  };
  NonManagedVisibilityStrategy2.prototype.onSuppressRowDrag = function() {
    this.workOutVisibility();
  };
  NonManagedVisibilityStrategy2.prototype.workOutVisibility = function() {
    var neverDisplayed = this.beans.gridOptionsWrapper.isSuppressRowDrag();
    this.setDisplayedOrVisible(neverDisplayed);
  };
  __decorate$1$([
    PostConstruct
  ], NonManagedVisibilityStrategy2.prototype, "postConstruct", null);
  return NonManagedVisibilityStrategy2;
}(VisibilityStrategy);
var ManagedVisibilityStrategy = function(_super) {
  __extends$2g(ManagedVisibilityStrategy2, _super);
  function ManagedVisibilityStrategy2(parent, beans, rowNode, column) {
    var _this = _super.call(this, parent, rowNode, column) || this;
    _this.beans = beans;
    return _this;
  }
  ManagedVisibilityStrategy2.prototype.postConstruct = function() {
    this.addManagedListener(this.beans.eventService, Events.EVENT_SORT_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.beans.eventService, Events.EVENT_FILTER_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.beans.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.beans.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
    this.addManagedListener(this.beans.gridOptionsWrapper, "suppressRowDrag", this.onSuppressRowDrag.bind(this));
    this.workOutVisibility();
  };
  ManagedVisibilityStrategy2.prototype.onSuppressRowDrag = function() {
    this.workOutVisibility();
  };
  ManagedVisibilityStrategy2.prototype.workOutVisibility = function() {
    var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();
    var rowDragFeature = gridBodyCon.getRowDragFeature();
    var shouldPreventRowMove = rowDragFeature && rowDragFeature.shouldPreventRowMove();
    var suppressRowDrag = this.beans.gridOptionsWrapper.isSuppressRowDrag();
    var hasExternalDropZones = this.beans.dragAndDropService.hasExternalDropZones();
    var neverDisplayed = shouldPreventRowMove && !hasExternalDropZones || suppressRowDrag;
    this.setDisplayedOrVisible(neverDisplayed);
  };
  __decorate$1$([
    PostConstruct
  ], ManagedVisibilityStrategy2.prototype, "postConstruct", null);
  return ManagedVisibilityStrategy2;
}(VisibilityStrategy);
var __extends$2f = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$7 = function() {
  __assign$7 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$7.apply(this, arguments);
};
var __decorate$1_ = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GroupCellRendererCtrl = function(_super) {
  __extends$2f(GroupCellRendererCtrl2, _super);
  function GroupCellRendererCtrl2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  GroupCellRendererCtrl2.prototype.init = function(comp, eGui, eCheckbox, eExpanded, eContracted, compClass, params) {
    this.params = params;
    this.eGui = eGui;
    this.eCheckbox = eCheckbox;
    this.eExpanded = eExpanded;
    this.eContracted = eContracted;
    this.comp = comp;
    this.compClass = compClass;
    var topLevelFooter = this.isTopLevelFooter();
    var embeddedRowMismatch = this.isEmbeddedRowMismatch();
    var nullValue = params.value == null;
    var skipCell = false;
    if (this.gridOptionsWrapper.isGroupIncludeFooter() && this.gridOptionsWrapper.isGroupHideOpenParents()) {
      var node = params.node;
      if (node.footer) {
        var showRowGroup = params.colDef && params.colDef.showRowGroup;
        var rowGroupColumnId = node.rowGroupColumn && node.rowGroupColumn.getColId();
        skipCell = showRowGroup !== rowGroupColumnId;
      }
    }
    this.cellIsBlank = topLevelFooter ? false : embeddedRowMismatch || nullValue || skipCell;
    if (this.cellIsBlank) {
      return;
    }
    this.setupShowingValueForOpenedParent();
    this.findDisplayedGroupNode();
    this.addFullWidthRowDraggerIfNeeded();
    this.addExpandAndContract();
    this.addCheckboxIfNeeded();
    this.addValueElement();
    this.setupIndent();
    this.refreshAriaExpanded();
  };
  GroupCellRendererCtrl2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
    this.expandListener = null;
  };
  GroupCellRendererCtrl2.prototype.refreshAriaExpanded = function() {
    var _a2 = this.params, node = _a2.node, eParentOfValue = _a2.eParentOfValue;
    if (this.expandListener) {
      this.expandListener = this.expandListener();
    }
    if (!this.isExpandable()) {
      removeAriaExpanded(eParentOfValue);
      return;
    }
    var listener = function() {
      setAriaExpanded(eParentOfValue, !!node.expanded);
    };
    this.expandListener = this.addManagedListener(node, RowNode.EVENT_EXPANDED_CHANGED, listener) || null;
    listener();
  };
  GroupCellRendererCtrl2.prototype.isTopLevelFooter = function() {
    if (!this.gridOptionsWrapper.isGroupIncludeTotalFooter()) {
      return false;
    }
    if (this.params.value != null || this.params.node.level != -1) {
      return false;
    }
    var colDef = this.params.colDef;
    var doingFullWidth = colDef == null;
    if (doingFullWidth) {
      return true;
    }
    if (colDef.showRowGroup === true) {
      return true;
    }
    var rowGroupCols = this.columnModel.getRowGroupColumns();
    if (!rowGroupCols || rowGroupCols.length === 0) {
      return true;
    }
    var firstRowGroupCol = rowGroupCols[0];
    return firstRowGroupCol.getId() === colDef.showRowGroup;
  };
  GroupCellRendererCtrl2.prototype.isEmbeddedRowMismatch = function() {
    if (!this.params.fullWidth || !this.gridOptionsWrapper.isEmbedFullWidthRows()) {
      return false;
    }
    var pinnedLeftCell = this.params.pinned === Constants.PINNED_LEFT;
    var pinnedRightCell = this.params.pinned === Constants.PINNED_RIGHT;
    var bodyCell = !pinnedLeftCell && !pinnedRightCell;
    if (this.gridOptionsWrapper.isEnableRtl()) {
      if (this.columnModel.isPinningLeft()) {
        return !pinnedRightCell;
      }
      return !bodyCell;
    }
    if (this.columnModel.isPinningLeft()) {
      return !pinnedLeftCell;
    }
    return !bodyCell;
  };
  GroupCellRendererCtrl2.prototype.findDisplayedGroupNode = function() {
    var column = this.params.column;
    var rowNode = this.params.node;
    if (this.showingValueForOpenedParent) {
      var pointer = rowNode.parent;
      while (pointer != null) {
        if (pointer.rowGroupColumn && column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())) {
          this.displayedGroupNode = pointer;
          break;
        }
        pointer = pointer.parent;
      }
    }
    if (missing(this.displayedGroupNode)) {
      this.displayedGroupNode = rowNode;
    }
  };
  GroupCellRendererCtrl2.prototype.setupShowingValueForOpenedParent = function() {
    var rowNode = this.params.node;
    var column = this.params.column;
    if (!this.gridOptionsWrapper.isGroupHideOpenParents()) {
      this.showingValueForOpenedParent = false;
      return;
    }
    if (!rowNode.groupData) {
      this.showingValueForOpenedParent = false;
      return;
    }
    var showingGroupNode = rowNode.rowGroupColumn != null;
    if (showingGroupNode) {
      var keyOfGroupingColumn = rowNode.rowGroupColumn.getId();
      var configuredToShowThisGroupLevel = column.isRowGroupDisplayed(keyOfGroupingColumn);
      if (configuredToShowThisGroupLevel) {
        this.showingValueForOpenedParent = false;
        return;
      }
    }
    var valPresent = rowNode.groupData[column.getId()] != null;
    this.showingValueForOpenedParent = valPresent;
  };
  GroupCellRendererCtrl2.prototype.addValueElement = function() {
    if (this.displayedGroupNode.footer) {
      this.addFooterValue();
    } else {
      this.addGroupValue();
      this.addChildCount();
    }
  };
  GroupCellRendererCtrl2.prototype.addGroupValue = function() {
    var paramsAdjusted = this.adjustParamsWithDetailsFromRelatedColumn();
    var innerCompDetails = this.getInnerCompDetails(paramsAdjusted);
    var valueFormatted = paramsAdjusted.valueFormatted, value = paramsAdjusted.value;
    var valueWhenNoRenderer = valueFormatted != null ? valueFormatted : value;
    this.comp.setInnerRenderer(innerCompDetails, valueWhenNoRenderer);
  };
  GroupCellRendererCtrl2.prototype.adjustParamsWithDetailsFromRelatedColumn = function() {
    var relatedColumn = this.displayedGroupNode.rowGroupColumn;
    var column = this.params.column;
    if (!relatedColumn) {
      return this.params;
    }
    var notFullWidth = column != null;
    if (notFullWidth) {
      var showingThisRowGroup = column.isRowGroupDisplayed(relatedColumn.getId());
      if (!showingThisRowGroup) {
        return this.params;
      }
    }
    var params = this.params;
    var _a2 = this.params, value = _a2.value, node = _a2.node;
    var valueFormatted = this.valueFormatterService.formatValue(relatedColumn, node, value);
    var paramsAdjusted = __assign$7(__assign$7({}, params), { valueFormatted });
    return paramsAdjusted;
  };
  GroupCellRendererCtrl2.prototype.addFooterValue = function() {
    var footerValueGetter = this.params.footerValueGetter;
    var footerValue = "";
    if (footerValueGetter) {
      var paramsClone = cloneObject(this.params);
      paramsClone.value = this.params.value;
      if (typeof footerValueGetter === "function") {
        footerValue = footerValueGetter(paramsClone);
      } else if (typeof footerValueGetter === "string") {
        footerValue = this.expressionService.evaluate(footerValueGetter, paramsClone);
      } else {
        console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)");
      }
    } else {
      footerValue = "Total " + (this.params.value != null ? this.params.value : "");
    }
    var innerCompDetails = this.getInnerCompDetails(this.params);
    this.comp.setInnerRenderer(innerCompDetails, footerValue);
  };
  GroupCellRendererCtrl2.prototype.getInnerCompDetails = function(params) {
    var _this = this;
    if (params.fullWidth) {
      return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams, params);
    }
    var innerCompDetails = this.userComponentFactory.getInnerRendererDetails(params, params);
    var isGroupRowRenderer = function(details) {
      return details && details.componentClass == _this.compClass;
    };
    if (innerCompDetails && !isGroupRowRenderer(innerCompDetails)) {
      return innerCompDetails;
    }
    var relatedColumn = this.displayedGroupNode.rowGroupColumn;
    var relatedColDef = relatedColumn ? relatedColumn.getColDef() : void 0;
    if (!relatedColDef) {
      return;
    }
    var relatedCompDetails = this.userComponentFactory.getCellRendererDetails(relatedColDef, params);
    if (relatedCompDetails && !isGroupRowRenderer(relatedCompDetails)) {
      return relatedCompDetails;
    }
    if (isGroupRowRenderer(relatedCompDetails) && relatedColDef.cellRendererParams && relatedColDef.cellRendererParams.innerRenderer) {
      var res = this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams, params);
      return res;
    }
  };
  GroupCellRendererCtrl2.prototype.addChildCount = function() {
    if (this.params.suppressCount) {
      return;
    }
    this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED, this.updateChildCount.bind(this));
    this.updateChildCount();
  };
  GroupCellRendererCtrl2.prototype.updateChildCount = function() {
    var allChildrenCount = this.displayedGroupNode.allChildrenCount;
    var showingGroupForThisNode = this.isShowRowGroupForThisRow();
    var showCount = showingGroupForThisNode && allChildrenCount != null && allChildrenCount >= 0;
    var countString = showCount ? "(" + allChildrenCount + ")" : "";
    this.comp.setChildCount(countString);
  };
  GroupCellRendererCtrl2.prototype.isShowRowGroupForThisRow = function() {
    if (this.gridOptionsWrapper.isTreeData()) {
      return true;
    }
    var rowGroupColumn = this.displayedGroupNode.rowGroupColumn;
    if (!rowGroupColumn) {
      return false;
    }
    var column = this.params.column;
    var thisColumnIsInterested = column == null || column.isRowGroupDisplayed(rowGroupColumn.getId());
    return thisColumnIsInterested;
  };
  GroupCellRendererCtrl2.prototype.addExpandAndContract = function() {
    var params = this.params;
    var eExpandedIcon = createIconNoSpan("groupExpanded", this.gridOptionsWrapper, null);
    var eContractedIcon = createIconNoSpan("groupContracted", this.gridOptionsWrapper, null);
    if (eExpandedIcon) {
      this.eExpanded.appendChild(eExpandedIcon);
    }
    if (eContractedIcon) {
      this.eContracted.appendChild(eContractedIcon);
    }
    var eGroupCell = params.eGridCell;
    if (!this.gridOptionsWrapper.isEnableGroupEdit() && this.isExpandable() && !params.suppressDoubleClickExpand) {
      this.addManagedListener(eGroupCell, "dblclick", this.onCellDblClicked.bind(this));
    }
    this.addManagedListener(this.eExpanded, "click", this.onExpandClicked.bind(this));
    this.addManagedListener(this.eContracted, "click", this.onExpandClicked.bind(this));
    this.addManagedListener(eGroupCell, "keydown", this.onKeyDown.bind(this));
    this.addManagedListener(params.node, RowNode.EVENT_EXPANDED_CHANGED, this.showExpandAndContractIcons.bind(this));
    this.showExpandAndContractIcons();
    var expandableChangedListener = this.onRowNodeIsExpandableChanged.bind(this);
    this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED, expandableChangedListener);
    this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_MASTER_CHANGED, expandableChangedListener);
    this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_GROUP_CHANGED, expandableChangedListener);
    this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, expandableChangedListener);
  };
  GroupCellRendererCtrl2.prototype.onExpandClicked = function(mouseEvent) {
    if (isStopPropagationForAgGrid(mouseEvent)) {
      return;
    }
    stopPropagationForAgGrid(mouseEvent);
    this.onExpandOrContract(mouseEvent);
  };
  GroupCellRendererCtrl2.prototype.onExpandOrContract = function(e2) {
    var rowNode = this.displayedGroupNode;
    var nextExpandState = !rowNode.expanded;
    if (!nextExpandState && rowNode.sticky) {
      this.scrollToStickyNode(rowNode);
    }
    rowNode.setExpanded(nextExpandState, e2);
  };
  GroupCellRendererCtrl2.prototype.scrollToStickyNode = function(rowNode) {
    var gridBodyCtrl = this.ctrlsService.getGridBodyCtrl();
    var scrollFeature = gridBodyCtrl.getScrollFeature();
    scrollFeature.setVerticalScrollPosition(rowNode.rowTop - rowNode.stickyRowTop);
  };
  GroupCellRendererCtrl2.prototype.isExpandable = function() {
    if (this.showingValueForOpenedParent) {
      return true;
    }
    var rowNode = this.displayedGroupNode;
    var reducedLeafNode = this.columnModel.isPivotMode() && rowNode.leafGroup;
    var expandableGroup = rowNode.isExpandable() && !rowNode.footer && !reducedLeafNode;
    if (!expandableGroup) {
      return false;
    }
    var column = this.params.column;
    var displayingForOneColumnOnly = column != null && typeof column.getColDef().showRowGroup === "string";
    if (displayingForOneColumnOnly) {
      var showing = this.isShowRowGroupForThisRow();
      return showing;
    }
    return true;
  };
  GroupCellRendererCtrl2.prototype.showExpandAndContractIcons = function() {
    var _a2 = this, params = _a2.params, displayedGroup = _a2.displayedGroupNode, columnModel = _a2.columnModel;
    var node = params.node;
    var isExpandable = this.isExpandable();
    if (isExpandable) {
      var expanded = this.showingValueForOpenedParent ? true : node.expanded;
      this.comp.setExpandedDisplayed(expanded);
      this.comp.setContractedDisplayed(!expanded);
    } else {
      this.comp.setExpandedDisplayed(false);
      this.comp.setContractedDisplayed(false);
    }
    var pivotMode = columnModel.isPivotMode();
    var pivotModeAndLeafGroup = pivotMode && displayedGroup.leafGroup;
    var addExpandableCss = isExpandable && !pivotModeAndLeafGroup;
    var isTotalFooterNode = node.footer && node.level === -1;
    this.comp.addOrRemoveCssClass("ag-cell-expandable", addExpandableCss);
    this.comp.addOrRemoveCssClass("ag-row-group", addExpandableCss);
    if (pivotMode) {
      this.comp.addOrRemoveCssClass("ag-pivot-leaf-group", pivotModeAndLeafGroup);
    } else if (!isTotalFooterNode) {
      this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent", !addExpandableCss);
    }
  };
  GroupCellRendererCtrl2.prototype.onRowNodeIsExpandableChanged = function() {
    this.showExpandAndContractIcons();
    this.setIndent();
    this.refreshAriaExpanded();
  };
  GroupCellRendererCtrl2.prototype.setupIndent = function() {
    var node = this.params.node;
    var suppressPadding = this.params.suppressPadding;
    if (!suppressPadding) {
      this.addManagedListener(node, RowNode.EVENT_UI_LEVEL_CHANGED, this.setIndent.bind(this));
      this.setIndent();
    }
  };
  GroupCellRendererCtrl2.prototype.setIndent = function() {
    if (this.gridOptionsWrapper.isGroupHideOpenParents()) {
      return;
    }
    var params = this.params;
    var rowNode = params.node;
    var fullWithRow = !!params.colDef;
    var treeData = this.gridOptionsWrapper.isTreeData();
    var manyDimensionThisColumn = !fullWithRow || treeData || params.colDef.showRowGroup === true;
    var paddingCount = manyDimensionThisColumn ? rowNode.uiLevel : 0;
    var userProvidedPaddingPixelsTheDeprecatedWay = params.padding >= 0;
    if (userProvidedPaddingPixelsTheDeprecatedWay) {
      doOnce(function() {
        return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.");
      }, "groupCellRenderer->doDeprecatedWay");
    }
    if (this.indentClass) {
      this.comp.addOrRemoveCssClass(this.indentClass, false);
    }
    this.indentClass = "ag-row-group-indent-" + paddingCount;
    this.comp.addOrRemoveCssClass(this.indentClass, true);
  };
  GroupCellRendererCtrl2.prototype.addFullWidthRowDraggerIfNeeded = function() {
    var _this = this;
    if (!this.params.fullWidth || !this.params.rowDrag) {
      return;
    }
    var rowDragComp = new RowDragComp(function() {
      return _this.params.value;
    }, this.params.node);
    this.createManagedBean(rowDragComp, this.context);
    this.eGui.insertAdjacentElement("afterbegin", rowDragComp.getGui());
  };
  GroupCellRendererCtrl2.prototype.isUserWantsSelected = function() {
    var paramsCheckbox = this.params.checkbox;
    return typeof paramsCheckbox === "function" || paramsCheckbox === true;
  };
  GroupCellRendererCtrl2.prototype.addCheckboxIfNeeded = function() {
    var _this = this;
    var rowNode = this.displayedGroupNode;
    var checkboxNeeded = this.isUserWantsSelected() && !rowNode.footer && !rowNode.rowPinned && !rowNode.detail;
    if (checkboxNeeded) {
      var cbSelectionComponent_1 = new CheckboxSelectionComponent();
      this.getContext().createBean(cbSelectionComponent_1);
      cbSelectionComponent_1.init({
        rowNode,
        column: this.params.column,
        overrides: {
          isVisible: this.params.checkbox,
          callbackParams: this.params,
          removeHidden: true
        }
      });
      this.eCheckbox.appendChild(cbSelectionComponent_1.getGui());
      this.addDestroyFunc(function() {
        return _this.getContext().destroyBean(cbSelectionComponent_1);
      });
    }
    this.comp.setCheckboxVisible(checkboxNeeded);
  };
  GroupCellRendererCtrl2.prototype.onKeyDown = function(event) {
    var enterKeyPressed = event.key === KeyCode.ENTER;
    if (!enterKeyPressed || this.params.suppressEnterExpand) {
      return;
    }
    var cellEditable = this.params.column && this.params.column.isCellEditable(this.params.node);
    if (cellEditable) {
      return;
    }
    this.onExpandOrContract(event);
  };
  GroupCellRendererCtrl2.prototype.onCellDblClicked = function(mouseEvent) {
    if (isStopPropagationForAgGrid(mouseEvent)) {
      return;
    }
    var targetIsExpandIcon = isElementInEventPath(this.eExpanded, mouseEvent) || isElementInEventPath(this.eContracted, mouseEvent);
    if (!targetIsExpandIcon) {
      this.onExpandOrContract(mouseEvent);
    }
  };
  __decorate$1_([
    Autowired("expressionService")
  ], GroupCellRendererCtrl2.prototype, "expressionService", void 0);
  __decorate$1_([
    Autowired("valueFormatterService")
  ], GroupCellRendererCtrl2.prototype, "valueFormatterService", void 0);
  __decorate$1_([
    Autowired("columnModel")
  ], GroupCellRendererCtrl2.prototype, "columnModel", void 0);
  __decorate$1_([
    Autowired("userComponentFactory")
  ], GroupCellRendererCtrl2.prototype, "userComponentFactory", void 0);
  __decorate$1_([
    Autowired("gridOptions")
  ], GroupCellRendererCtrl2.prototype, "gridOptions", void 0);
  __decorate$1_([
    Autowired("ctrlsService")
  ], GroupCellRendererCtrl2.prototype, "ctrlsService", void 0);
  return GroupCellRendererCtrl2;
}(BeanStub);
var __extends$2e = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1Z = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GroupCellRenderer = function(_super) {
  __extends$2e(GroupCellRenderer2, _super);
  function GroupCellRenderer2() {
    return _super.call(this, GroupCellRenderer2.TEMPLATE) || this;
  }
  GroupCellRenderer2.prototype.init = function(params) {
    var _this = this;
    var compProxy = {
      setInnerRenderer: function(compDetails, valueToDisplay) {
        return _this.setRenderDetails(compDetails, valueToDisplay);
      },
      setChildCount: function(count) {
        return _this.eChildCount.innerHTML = count;
      },
      addOrRemoveCssClass: function(cssClass, value) {
        return _this.addOrRemoveCssClass(cssClass, value);
      },
      setContractedDisplayed: function(expanded) {
        return setDisplayed(_this.eContracted, expanded);
      },
      setExpandedDisplayed: function(expanded) {
        return setDisplayed(_this.eExpanded, expanded);
      },
      setCheckboxVisible: function(visible) {
        return _this.eCheckbox.classList.toggle("ag-invisible", !visible);
      }
    };
    var ctrl = this.createManagedBean(new GroupCellRendererCtrl());
    var fullWidth = !params.colDef;
    var eGui = this.getGui();
    ctrl.init(compProxy, eGui, this.eCheckbox, this.eExpanded, this.eContracted, this.constructor, params);
    if (fullWidth) {
      setAriaRole(eGui, "gridcell");
    }
  };
  GroupCellRenderer2.prototype.setRenderDetails = function(compDetails, valueToDisplay) {
    var _this = this;
    if (compDetails) {
      var componentPromise = compDetails.newAgStackInstance();
      if (!componentPromise) {
        return;
      }
      componentPromise.then(function(comp) {
        if (!comp) {
          return;
        }
        var destroyComp = function() {
          return _this.context.destroyBean(comp);
        };
        if (_this.isAlive()) {
          _this.eValue.appendChild(comp.getGui());
          _this.addDestroyFunc(destroyComp);
        } else {
          destroyComp();
        }
      });
    } else {
      this.eValue.innerText = valueToDisplay;
    }
  };
  GroupCellRenderer2.prototype.destroy = function() {
    this.getContext().destroyBean(this.innerCellRenderer);
    _super.prototype.destroy.call(this);
  };
  GroupCellRenderer2.prototype.refresh = function() {
    return false;
  };
  GroupCellRenderer2.TEMPLATE = '<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>';
  __decorate$1Z([
    RefSelector("eExpanded")
  ], GroupCellRenderer2.prototype, "eExpanded", void 0);
  __decorate$1Z([
    RefSelector("eContracted")
  ], GroupCellRenderer2.prototype, "eContracted", void 0);
  __decorate$1Z([
    RefSelector("eCheckbox")
  ], GroupCellRenderer2.prototype, "eCheckbox", void 0);
  __decorate$1Z([
    RefSelector("eValue")
  ], GroupCellRenderer2.prototype, "eValue", void 0);
  __decorate$1Z([
    RefSelector("eChildCount")
  ], GroupCellRenderer2.prototype, "eChildCount", void 0);
  return GroupCellRenderer2;
}(Component);
var __extends$2d = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1Y = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var LoadingCellRenderer = function(_super) {
  __extends$2d(LoadingCellRenderer2, _super);
  function LoadingCellRenderer2() {
    return _super.call(this, LoadingCellRenderer2.TEMPLATE) || this;
  }
  LoadingCellRenderer2.prototype.init = function(params) {
    params.node.failedLoad ? this.setupFailed() : this.setupLoading();
  };
  LoadingCellRenderer2.prototype.setupFailed = function() {
    this.eLoadingText.innerText = "ERR";
  };
  LoadingCellRenderer2.prototype.setupLoading = function() {
    var eLoadingIcon = createIconNoSpan("groupLoading", this.gridOptionsWrapper, null);
    if (eLoadingIcon) {
      this.eLoadingIcon.appendChild(eLoadingIcon);
    }
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    this.eLoadingText.innerText = localeTextFunc("loadingOoo", "Loading");
  };
  LoadingCellRenderer2.prototype.refresh = function(params) {
    return false;
  };
  LoadingCellRenderer2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  LoadingCellRenderer2.TEMPLATE = '<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>';
  __decorate$1Y([
    RefSelector("eLoadingIcon")
  ], LoadingCellRenderer2.prototype, "eLoadingIcon", void 0);
  __decorate$1Y([
    RefSelector("eLoadingText")
  ], LoadingCellRenderer2.prototype, "eLoadingText", void 0);
  return LoadingCellRenderer2;
}(Component);
var __extends$2c = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var LoadingOverlayComponent$1 = function(_super) {
  __extends$2c(LoadingOverlayComponent2, _super);
  function LoadingOverlayComponent2() {
    return _super.call(this) || this;
  }
  LoadingOverlayComponent2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  LoadingOverlayComponent2.prototype.init = function(params) {
    var template = this.gridOptionsWrapper.getOverlayLoadingTemplate() ? this.gridOptionsWrapper.getOverlayLoadingTemplate() : LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE;
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    var localisedTemplate = template.replace("[LOADING...]", localeTextFunc("loadingOoo", "Loading..."));
    this.setTemplate(localisedTemplate);
  };
  LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE = '<span class="ag-overlay-loading-center">[LOADING...]</span>';
  return LoadingOverlayComponent2;
}(Component);
var __extends$2b = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var NoRowsOverlayComponent$1 = function(_super) {
  __extends$2b(NoRowsOverlayComponent2, _super);
  function NoRowsOverlayComponent2() {
    return _super.call(this) || this;
  }
  NoRowsOverlayComponent2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  NoRowsOverlayComponent2.prototype.init = function(params) {
    var template = this.gridOptionsWrapper.getOverlayNoRowsTemplate() ? this.gridOptionsWrapper.getOverlayNoRowsTemplate() : NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE;
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    var localisedTemplate = template.replace("[NO_ROWS_TO_SHOW]", localeTextFunc("noRowsToShow", "No Rows To Show"));
    this.setTemplate(localisedTemplate);
  };
  NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE = '<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>';
  return NoRowsOverlayComponent2;
}(Component);
var __extends$2a = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var TooltipComponent$1 = function(_super) {
  __extends$2a(TooltipComponent2, _super);
  function TooltipComponent2() {
    return _super.call(this, '<div class="ag-tooltip"></div>') || this;
  }
  TooltipComponent2.prototype.init = function(params) {
    var value = params.value;
    this.getGui().innerHTML = escapeString(value);
  };
  return TooltipComponent2;
}(PopupComponent);
var __extends$29 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1X = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var UserComponentRegistry = function(_super) {
  __extends$29(UserComponentRegistry2, _super);
  function UserComponentRegistry2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.agGridDefaults = {
      agDateInput: DefaultDateComponent,
      agColumnHeader: HeaderComp,
      agColumnGroupHeader: HeaderGroupComp,
      agSortIndicator: SortIndicatorComp,
      agTextColumnFloatingFilter: TextFloatingFilter,
      agNumberColumnFloatingFilter: NumberFloatingFilter,
      agDateColumnFloatingFilter: DateFloatingFilter,
      agReadOnlyFloatingFilter: ReadOnlyFloatingFilter,
      agAnimateShowChangeCellRenderer: AnimateShowChangeCellRenderer,
      agAnimateSlideCellRenderer: AnimateSlideCellRenderer,
      agGroupCellRenderer: GroupCellRenderer,
      agGroupRowRenderer: GroupCellRenderer,
      agLoadingCellRenderer: LoadingCellRenderer,
      agCellEditor: TextCellEditor,
      agTextCellEditor: TextCellEditor,
      agSelectCellEditor: SelectCellEditor,
      agPopupTextCellEditor: PopupTextCellEditor,
      agPopupSelectCellEditor: PopupSelectCellEditor,
      agLargeTextCellEditor: LargeTextCellEditor,
      agTextColumnFilter: TextFilter,
      agNumberColumnFilter: NumberFilter,
      agDateColumnFilter: DateFilter,
      agLoadingOverlay: LoadingOverlayComponent$1,
      agNoRowsOverlay: NoRowsOverlayComponent$1,
      agTooltipComponent: TooltipComponent$1
    };
    _this.agDeprecatedNames = {
      set: {
        newComponentName: "agSetColumnFilter",
        propertyHolder: "filter"
      },
      text: {
        newComponentName: "agTextColumnFilter",
        propertyHolder: "filter"
      },
      number: {
        newComponentName: "agNumberColumnFilter",
        propertyHolder: "filter"
      },
      date: {
        newComponentName: "agDateColumnFilter",
        propertyHolder: "filter"
      },
      group: {
        newComponentName: "agGroupCellRenderer",
        propertyHolder: "cellRenderer"
      },
      animateShowChange: {
        newComponentName: "agAnimateShowChangeCellRenderer",
        propertyHolder: "cellRenderer"
      },
      animateSlide: {
        newComponentName: "agAnimateSlideCellRenderer",
        propertyHolder: "cellRenderer"
      },
      select: {
        newComponentName: "agSelectCellEditor",
        propertyHolder: "cellEditor"
      },
      largeText: {
        newComponentName: "agLargeTextCellEditor",
        propertyHolder: "cellEditor"
      },
      popupSelect: {
        newComponentName: "agPopupSelectCellEditor",
        propertyHolder: "cellEditor"
      },
      popupText: {
        newComponentName: "agPopupTextCellEditor",
        propertyHolder: "cellEditor"
      },
      richSelect: {
        newComponentName: "agRichSelectCellEditor",
        propertyHolder: "cellEditor"
      },
      headerComponent: {
        newComponentName: "agColumnHeader",
        propertyHolder: "headerComponent"
      }
    };
    _this.jsComps = {};
    _this.fwComps = {};
    return _this;
  }
  UserComponentRegistry2.prototype.init = function() {
    var _this = this;
    if (this.gridOptions.components != null) {
      iterateObject(this.gridOptions.components, function(key, component) {
        return _this.registerJsComponent(key, component);
      });
    }
    if (this.gridOptions.frameworkComponents != null) {
      iterateObject(this.gridOptions.frameworkComponents, function(key, component) {
        return _this.registerFwComponent(key, component);
      });
    }
  };
  UserComponentRegistry2.prototype.registerDefaultComponent = function(rawName, component) {
    var name = this.translateIfDeprecated(rawName);
    if (this.agGridDefaults[name]) {
      console.error("Trying to overwrite a default component. You should call registerComponent");
      return;
    }
    this.agGridDefaults[name] = component;
  };
  UserComponentRegistry2.prototype.registerJsComponent = function(rawName, component) {
    var name = this.translateIfDeprecated(rawName);
    if (this.fwComps[name]) {
      console.error("Trying to register a component that you have already registered for frameworks: " + name);
      return;
    }
    this.jsComps[name] = component;
  };
  UserComponentRegistry2.prototype.registerFwComponent = function(rawName, component) {
    var warningMessage = "AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.";
    doOnce(function() {
      return console.warn(warningMessage);
    }, "UserComponentRegistry.frameworkComponentsDeprecated");
    var name = this.translateIfDeprecated(rawName);
    this.fwComps[name] = component;
  };
  UserComponentRegistry2.prototype.retrieve = function(rawName) {
    var name = this.translateIfDeprecated(rawName);
    var createResult = function(component, componentFromFramework) {
      return { componentFromFramework, component };
    };
    var registeredViaFrameworkComp = this.getFrameworkOverrides().frameworkComponent(name, this.gridOptions.components);
    if (registeredViaFrameworkComp != null) {
      return createResult(registeredViaFrameworkComp, true);
    }
    var frameworkComponent = this.fwComps[name];
    if (frameworkComponent) {
      return createResult(frameworkComponent, true);
    }
    var jsComponent = this.jsComps[name];
    if (jsComponent) {
      var isFwkComp = this.getFrameworkOverrides().isFrameworkComponent(jsComponent);
      return createResult(jsComponent, isFwkComp);
    }
    var defaultComponent = this.agGridDefaults[name];
    if (defaultComponent) {
      return createResult(defaultComponent, false);
    }
    if (Object.keys(this.agGridDefaults).indexOf(name) < 0) {
      console.warn("AG Grid: Looking for component [" + name + "] but it wasn't found.");
    }
    return null;
  };
  UserComponentRegistry2.prototype.translateIfDeprecated = function(raw) {
    var deprecatedInfo = this.agDeprecatedNames[raw];
    if (deprecatedInfo != null) {
      doOnce(function() {
        console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename " + deprecatedInfo.propertyHolder + ":" + raw + " to " + deprecatedInfo.propertyHolder + ":" + deprecatedInfo.newComponentName);
      }, "DEPRECATE_COMPONENT_" + raw);
      return deprecatedInfo.newComponentName;
    }
    return raw;
  };
  __decorate$1X([
    Autowired("gridOptions")
  ], UserComponentRegistry2.prototype, "gridOptions", void 0);
  __decorate$1X([
    Autowired("agComponentUtils")
  ], UserComponentRegistry2.prototype, "agComponentUtils", void 0);
  __decorate$1X([
    PostConstruct
  ], UserComponentRegistry2.prototype, "init", null);
  UserComponentRegistry2 = __decorate$1X([
    Bean("userComponentRegistry")
  ], UserComponentRegistry2);
  return UserComponentRegistry2;
}(BeanStub);
var DateComponent = {
  propertyName: "dateComponent",
  cellRenderer: false
};
var HeaderComponent = {
  propertyName: "headerComponent",
  cellRenderer: false
};
var HeaderGroupComponent = {
  propertyName: "headerGroupComponent",
  cellRenderer: false
};
var CellRendererComponent = {
  propertyName: "cellRenderer",
  cellRenderer: true
};
var CellEditorComponent = {
  propertyName: "cellEditor",
  cellRenderer: false
};
var InnerRendererComponent = {
  propertyName: "innerRenderer",
  cellRenderer: true
};
var LoadingOverlayComponent = {
  propertyName: "loadingOverlayComponent",
  cellRenderer: false
};
var NoRowsOverlayComponent = {
  propertyName: "noRowsOverlayComponent",
  cellRenderer: false
};
var TooltipComponent = {
  propertyName: "tooltipComponent",
  cellRenderer: false
};
var FilterComponent = {
  propertyName: "filter",
  cellRenderer: false
};
var FloatingFilterComponent = {
  propertyName: "floatingFilterComponent",
  cellRenderer: false
};
var ToolPanelComponent = {
  propertyName: "toolPanel",
  cellRenderer: false
};
var StatusPanelComponent = {
  propertyName: "statusPanel",
  cellRenderer: false
};
var FullWidth = {
  propertyName: "fullWidthCellRenderer",
  cellRenderer: true
};
var FullWidthLoading = {
  propertyName: "loadingCellRenderer",
  cellRenderer: true
};
var FullWidthGroup = {
  propertyName: "groupRowRenderer",
  cellRenderer: true
};
var FullWidthDetail = {
  propertyName: "detailCellRenderer",
  cellRenderer: true
};
var FloatingFilterMapper = function() {
  function FloatingFilterMapper2() {
  }
  FloatingFilterMapper2.getFloatingFilterType = function(filterType) {
    return this.filterToFloatingFilterMapping[filterType];
  };
  FloatingFilterMapper2.filterToFloatingFilterMapping = {
    set: "agSetColumnFloatingFilter",
    agSetColumnFilter: "agSetColumnFloatingFilter",
    multi: "agMultiColumnFloatingFilter",
    agMultiColumnFilter: "agMultiColumnFloatingFilter",
    number: "agNumberColumnFloatingFilter",
    agNumberColumnFilter: "agNumberColumnFloatingFilter",
    date: "agDateColumnFloatingFilter",
    agDateColumnFilter: "agDateColumnFloatingFilter",
    text: "agTextColumnFloatingFilter",
    agTextColumnFilter: "agTextColumnFloatingFilter"
  };
  return FloatingFilterMapper2;
}();
var __extends$28 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1W = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var UserComponentFactory = function(_super) {
  __extends$28(UserComponentFactory2, _super);
  function UserComponentFactory2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  UserComponentFactory2.prototype.getHeaderCompDetails = function(colDef, params) {
    return this.getCompDetails(colDef, HeaderComponent, "agColumnHeader", params);
  };
  UserComponentFactory2.prototype.getHeaderGroupCompDetails = function(params) {
    var colGroupDef = params.columnGroup.getColGroupDef();
    return this.getCompDetails(colGroupDef, HeaderGroupComponent, "agColumnGroupHeader", params);
  };
  UserComponentFactory2.prototype.getFullWidthCellRendererDetails = function(params) {
    return this.getCompDetails(this.gridOptions, FullWidth, null, params, true);
  };
  UserComponentFactory2.prototype.getFullWidthLoadingCellRendererDetails = function(params) {
    return this.getCompDetails(this.gridOptions, FullWidthLoading, "agLoadingCellRenderer", params, true);
  };
  UserComponentFactory2.prototype.getFullWidthGroupCellRendererDetails = function(params) {
    return this.getCompDetails(this.gridOptions, FullWidthGroup, "agGroupRowRenderer", params, true);
  };
  UserComponentFactory2.prototype.getFullWidthDetailCellRendererDetails = function(params) {
    return this.getCompDetails(this.gridOptions, FullWidthDetail, "agDetailCellRenderer", params, true);
  };
  UserComponentFactory2.prototype.getInnerRendererDetails = function(def2, params) {
    return this.getCompDetails(def2, InnerRendererComponent, null, params);
  };
  UserComponentFactory2.prototype.getFullWidthGroupRowInnerCellRenderer = function(def2, params) {
    return this.getCompDetails(def2, InnerRendererComponent, null, params);
  };
  UserComponentFactory2.prototype.getCellRendererDetails = function(def2, params) {
    return this.getCompDetails(def2, CellRendererComponent, null, params);
  };
  UserComponentFactory2.prototype.getCellEditorDetails = function(def2, params) {
    return this.getCompDetails(def2, CellEditorComponent, "agCellEditor", params, true);
  };
  UserComponentFactory2.prototype.getFilterDetails = function(def2, params, defaultFilter) {
    return this.getCompDetails(def2, FilterComponent, defaultFilter, params, true);
  };
  UserComponentFactory2.prototype.getDateCompDetails = function(params) {
    return this.getCompDetails(this.gridOptions, DateComponent, "agDateInput", params, true);
  };
  UserComponentFactory2.prototype.getLoadingOverlayCompDetails = function(params) {
    return this.getCompDetails(this.gridOptions, LoadingOverlayComponent, "agLoadingOverlay", params, true);
  };
  UserComponentFactory2.prototype.getNoRowsOverlayCompDetails = function(params) {
    return this.getCompDetails(this.gridOptions, NoRowsOverlayComponent, "agNoRowsOverlay", params, true);
  };
  UserComponentFactory2.prototype.getTooltipCompDetails = function(params) {
    return this.getCompDetails(params.colDef, TooltipComponent, "agTooltipComponent", params, true);
  };
  UserComponentFactory2.prototype.getSetFilterCellRendererDetails = function(def2, params) {
    return this.getCompDetails(def2, CellRendererComponent, null, params);
  };
  UserComponentFactory2.prototype.getFloatingFilterCompDetails = function(def2, params, defaultFloatingFilter) {
    return this.getCompDetails(def2, FloatingFilterComponent, defaultFloatingFilter, params);
  };
  UserComponentFactory2.prototype.getToolPanelCompDetails = function(toolPanelDef, params) {
    return this.getCompDetails(toolPanelDef, ToolPanelComponent, null, params, true);
  };
  UserComponentFactory2.prototype.getStatusPanelCompDetails = function(def2, params) {
    return this.getCompDetails(def2, StatusPanelComponent, null, params, true);
  };
  UserComponentFactory2.prototype.getCompDetails = function(defObject, type, defaultName, params, mandatory) {
    var _this = this;
    if (mandatory === void 0) {
      mandatory = false;
    }
    var propertyName = type.propertyName, cellRenderer = type.cellRenderer;
    var _a2 = this.getCompKeys(defObject, type, params), compName = _a2.compName, jsComp = _a2.jsComp, fwComp = _a2.fwComp, paramsFromSelector = _a2.paramsFromSelector, popupFromSelector = _a2.popupFromSelector, popupPositionFromSelector = _a2.popupPositionFromSelector;
    var lookupFromRegistry = function(key) {
      var item = _this.userComponentRegistry.retrieve(key);
      if (item) {
        jsComp = !item.componentFromFramework ? item.component : void 0;
        fwComp = item.componentFromFramework ? item.component : void 0;
      }
    };
    if (compName != null) {
      lookupFromRegistry(compName);
    }
    if (jsComp == null && fwComp == null && defaultName != null) {
      lookupFromRegistry(defaultName);
    }
    if (jsComp && cellRenderer && !this.agComponentUtils.doesImplementIComponent(jsComp)) {
      jsComp = this.agComponentUtils.adaptFunction(propertyName, jsComp);
    }
    if (!jsComp && !fwComp) {
      if (mandatory) {
        console.error("Could not find component " + compName + ", did you forget to configure this component?");
      }
      return;
    }
    var paramsMerged = this.mergeParamsWithApplicationProvidedParams(defObject, type, params, paramsFromSelector);
    var componentFromFramework = jsComp == null;
    var componentClass = jsComp ? jsComp : fwComp;
    return {
      componentFromFramework,
      componentClass,
      params: paramsMerged,
      type,
      popupFromSelector,
      popupPositionFromSelector,
      newAgStackInstance: function() {
        return _this.newAgStackInstance(componentClass, componentFromFramework, paramsMerged, type);
      }
    };
  };
  UserComponentFactory2.prototype.getCompKeys = function(defObject, type, params) {
    var _this = this;
    var propertyName = type.propertyName;
    var compName;
    var jsComp;
    var fwComp;
    var paramsFromSelector;
    var popupFromSelector;
    var popupPositionFromSelector;
    if (defObject) {
      var defObjectAny = defObject;
      var selectorFunc = defObjectAny[propertyName + "Selector"];
      var selectorRes = selectorFunc ? selectorFunc(params) : null;
      var assignComp = function(providedJsComp, providedFwComp) {
        var xxxFrameworkDeprecatedWarn = function() {
          var warningMessage = "AG Grid: As of v27, the property " + propertyName + "Framework is deprecated. The property " + propertyName + " can now be used for JavaScript AND Framework Components.";
          doOnce(function() {
            return console.warn(warningMessage);
          }, "UserComponentFactory." + propertyName + "FrameworkDeprecated");
        };
        if (typeof providedJsComp === "string") {
          compName = providedJsComp;
        } else if (typeof providedFwComp === "string") {
          xxxFrameworkDeprecatedWarn();
          compName = providedFwComp;
        } else if (providedJsComp != null && providedJsComp !== true) {
          var isFwkComp = _this.getFrameworkOverrides().isFrameworkComponent(providedJsComp);
          if (isFwkComp) {
            fwComp = providedJsComp;
          } else {
            jsComp = providedJsComp;
          }
        } else if (providedFwComp != null) {
          xxxFrameworkDeprecatedWarn();
          fwComp = providedFwComp;
        }
      };
      if (selectorRes) {
        if (selectorRes.frameworkComponent != null) {
          var warningMessage_1 = "AG Grid: As of v27, the return for " + propertyName + "Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.";
          doOnce(function() {
            return console.warn(warningMessage_1);
          }, "UserComponentFactory." + propertyName + "FrameworkSelectorDeprecated");
          assignComp(selectorRes.frameworkComponent, void 0);
        } else {
          assignComp(selectorRes.component, void 0);
        }
        paramsFromSelector = selectorRes.params;
        popupFromSelector = selectorRes.popup;
        popupPositionFromSelector = selectorRes.popupPosition;
      } else {
        assignComp(defObjectAny[propertyName], defObjectAny[propertyName + "Framework"]);
      }
    }
    return { compName, jsComp, fwComp, paramsFromSelector, popupFromSelector, popupPositionFromSelector };
  };
  UserComponentFactory2.prototype.newAgStackInstance = function(ComponentClass, componentFromFramework, params, type) {
    var propertyName = type.propertyName;
    var jsComponent = !componentFromFramework;
    var instance;
    if (jsComponent) {
      instance = new ComponentClass();
    } else {
      var thisComponentConfig = this.componentMetadataProvider.retrieve(propertyName);
      instance = this.frameworkComponentWrapper.wrap(ComponentClass, thisComponentConfig.mandatoryMethodList, thisComponentConfig.optionalMethodList, type);
    }
    var deferredInit = this.initComponent(instance, params);
    if (deferredInit == null) {
      return AgPromise.resolve(instance);
    }
    return deferredInit.then(function() {
      return instance;
    });
  };
  UserComponentFactory2.prototype.mergeParamsWithApplicationProvidedParams = function(defObject, type, paramsFromGrid, paramsFromSelector) {
    if (paramsFromSelector === void 0) {
      paramsFromSelector = null;
    }
    var params = {
      context: this.gridOptionsWrapper.getContext(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      api: this.gridOptionsWrapper.getApi()
    };
    mergeDeep(params, paramsFromGrid);
    var defObjectAny = defObject;
    var userParams = defObjectAny && defObjectAny[type.propertyName + "Params"];
    if (typeof userParams === "function") {
      var userParamsFromFunc = userParams(paramsFromGrid);
      mergeDeep(params, userParamsFromFunc);
    } else if (typeof userParams === "object") {
      mergeDeep(params, userParams);
    }
    mergeDeep(params, paramsFromSelector);
    return params;
  };
  UserComponentFactory2.prototype.initComponent = function(component, params) {
    this.context.createBean(component);
    if (component.init == null) {
      return;
    }
    return component.init(params);
  };
  UserComponentFactory2.prototype.getDefaultFloatingFilterType = function(def2) {
    if (def2 == null) {
      return null;
    }
    var defaultFloatingFilterType = null;
    var _a2 = this.getCompKeys(def2, FilterComponent), compName = _a2.compName, jsComp = _a2.jsComp, fwComp = _a2.fwComp;
    if (compName) {
      defaultFloatingFilterType = FloatingFilterMapper.getFloatingFilterType(compName);
    } else {
      var usingDefaultFilter = jsComp == null && fwComp == null && def2.filter === true;
      if (usingDefaultFilter) {
        var setFilterModuleLoaded = ModuleRegistry.isRegistered(ModuleNames.SetFilterModule);
        defaultFloatingFilterType = setFilterModuleLoaded ? "agSetColumnFloatingFilter" : "agTextColumnFloatingFilter";
      }
    }
    return defaultFloatingFilterType;
  };
  __decorate$1W([
    Autowired("gridOptions")
  ], UserComponentFactory2.prototype, "gridOptions", void 0);
  __decorate$1W([
    Autowired("agComponentUtils")
  ], UserComponentFactory2.prototype, "agComponentUtils", void 0);
  __decorate$1W([
    Autowired("componentMetadataProvider")
  ], UserComponentFactory2.prototype, "componentMetadataProvider", void 0);
  __decorate$1W([
    Autowired("userComponentRegistry")
  ], UserComponentFactory2.prototype, "userComponentRegistry", void 0);
  __decorate$1W([
    Optional("frameworkComponentWrapper")
  ], UserComponentFactory2.prototype, "frameworkComponentWrapper", void 0);
  UserComponentFactory2 = __decorate$1W([
    Bean("userComponentFactory")
  ], UserComponentFactory2);
  return UserComponentFactory2;
}(BeanStub);
var ExcelFactoryMode;
(function(ExcelFactoryMode2) {
  ExcelFactoryMode2[ExcelFactoryMode2["SINGLE_SHEET"] = 0] = "SINGLE_SHEET";
  ExcelFactoryMode2[ExcelFactoryMode2["MULTI_SHEET"] = 1] = "MULTI_SHEET";
})(ExcelFactoryMode || (ExcelFactoryMode = {}));
var __extends$27 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1V = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DragService = function(_super) {
  __extends$27(DragService2, _super);
  function DragService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.dragEndFunctions = [];
    _this.dragSources = [];
    return _this;
  }
  DragService2.prototype.init = function() {
    this.logger = this.loggerFactory.create("DragService");
  };
  DragService2.prototype.removeAllListeners = function() {
    this.dragSources.forEach(this.removeListener.bind(this));
    this.dragSources.length = 0;
  };
  DragService2.prototype.removeListener = function(dragSourceAndListener) {
    var element = dragSourceAndListener.dragSource.eElement;
    var mouseDownListener = dragSourceAndListener.mouseDownListener;
    element.removeEventListener("mousedown", mouseDownListener);
    if (dragSourceAndListener.touchEnabled) {
      var touchStartListener = dragSourceAndListener.touchStartListener;
      element.removeEventListener("touchstart", touchStartListener, { passive: true });
    }
  };
  DragService2.prototype.removeDragSource = function(params) {
    var dragSourceAndListener = this.dragSources.find(function(item) {
      return item.dragSource === params;
    });
    if (!dragSourceAndListener) {
      return;
    }
    this.removeListener(dragSourceAndListener);
    removeFromArray(this.dragSources, dragSourceAndListener);
  };
  DragService2.prototype.isDragging = function() {
    return this.dragging;
  };
  DragService2.prototype.addDragSource = function(params, includeTouch) {
    var _this = this;
    if (includeTouch === void 0) {
      includeTouch = false;
    }
    var mouseListener = this.onMouseDown.bind(this, params);
    params.eElement.addEventListener("mousedown", mouseListener);
    var touchListener = null;
    var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();
    if (includeTouch && !suppressTouch) {
      touchListener = function(touchEvent) {
        if (touchEvent.cancelable) {
          touchEvent.preventDefault();
        }
        _this.onTouchStart(params, touchEvent);
      };
      params.eElement.addEventListener("touchstart", touchListener, { passive: false });
    }
    this.dragSources.push({
      dragSource: params,
      mouseDownListener: mouseListener,
      touchStartListener: touchListener,
      touchEnabled: includeTouch
    });
  };
  DragService2.prototype.onTouchStart = function(params, touchEvent) {
    var _this = this;
    this.currentDragParams = params;
    this.dragging = false;
    var touch = touchEvent.touches[0];
    this.touchLastTime = touch;
    this.touchStart = touch;
    var touchMoveEvent = function(e2) {
      return _this.onTouchMove(e2, params.eElement);
    };
    var touchEndEvent = function(e2) {
      return _this.onTouchUp(e2, params.eElement);
    };
    var documentTouchMove = function(e2) {
      if (e2.cancelable) {
        e2.preventDefault();
      }
    };
    var target = touchEvent.target;
    var events = [
      { target: document, type: "touchmove", listener: documentTouchMove, options: { passive: false } },
      { target, type: "touchmove", listener: touchMoveEvent, options: { passive: true } },
      { target, type: "touchend", listener: touchEndEvent, options: { passive: true } },
      { target, type: "touchcancel", listener: touchEndEvent, options: { passive: true } }
    ];
    this.addTemporaryEvents(events);
    if (params.dragStartPixels === 0) {
      this.onCommonMove(touch, this.touchStart, params.eElement);
    }
  };
  DragService2.prototype.onMouseDown = function(params, mouseEvent) {
    var _this = this;
    var e2 = mouseEvent;
    if (params.skipMouseEvent && params.skipMouseEvent(mouseEvent)) {
      return;
    }
    if (e2._alreadyProcessedByDragService) {
      return;
    }
    e2._alreadyProcessedByDragService = true;
    if (mouseEvent.button !== 0) {
      return;
    }
    this.currentDragParams = params;
    this.dragging = false;
    this.mouseStartEvent = mouseEvent;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var mouseMoveEvent = function(event) {
      return _this.onMouseMove(event, params.eElement);
    };
    var mouseUpEvent = function(event) {
      return _this.onMouseUp(event, params.eElement);
    };
    var contextEvent = function(event) {
      return event.preventDefault();
    };
    var target = eDocument;
    var events = [
      { target, type: "mousemove", listener: mouseMoveEvent },
      { target, type: "mouseup", listener: mouseUpEvent },
      { target, type: "contextmenu", listener: contextEvent }
    ];
    this.addTemporaryEvents(events);
    if (params.dragStartPixels === 0) {
      this.onMouseMove(mouseEvent, params.eElement);
    }
  };
  DragService2.prototype.addTemporaryEvents = function(events) {
    events.forEach(function(currentEvent) {
      var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;
      target.addEventListener(type, listener, options);
    });
    this.dragEndFunctions.push(function() {
      events.forEach(function(currentEvent) {
        var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;
        target.removeEventListener(type, listener, options);
      });
    });
  };
  DragService2.prototype.isEventNearStartEvent = function(currentEvent, startEvent) {
    var dragStartPixels = this.currentDragParams.dragStartPixels;
    var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;
    return areEventsNear(currentEvent, startEvent, requiredPixelDiff);
  };
  DragService2.prototype.getFirstActiveTouch = function(touchList) {
    for (var i2 = 0; i2 < touchList.length; i2++) {
      if (touchList[i2].identifier === this.touchStart.identifier) {
        return touchList[i2];
      }
    }
    return null;
  };
  DragService2.prototype.onCommonMove = function(currentEvent, startEvent, el2) {
    if (!this.dragging) {
      if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {
        return;
      }
      this.dragging = true;
      var event_1 = {
        type: Events.EVENT_DRAG_STARTED,
        target: el2
      };
      this.eventService.dispatchEvent(event_1);
      this.currentDragParams.onDragStart(startEvent);
      this.currentDragParams.onDragging(startEvent);
    }
    this.currentDragParams.onDragging(currentEvent);
  };
  DragService2.prototype.onTouchMove = function(touchEvent, el2) {
    var touch = this.getFirstActiveTouch(touchEvent.touches);
    if (!touch) {
      return;
    }
    this.onCommonMove(touch, this.touchStart, el2);
  };
  DragService2.prototype.onMouseMove = function(mouseEvent, el2) {
    if ((this.gridOptionsWrapper.isEnableCellTextSelect() || isBrowserSafari()) && mouseEvent.type === "mousemove" && mouseEvent.cancelable && this.mouseEventService.isEventFromThisGrid(mouseEvent) && !this.isOverFormFieldElement(mouseEvent)) {
      mouseEvent.preventDefault();
    }
    this.onCommonMove(mouseEvent, this.mouseStartEvent, el2);
  };
  DragService2.prototype.isOverFormFieldElement = function(mouseEvent) {
    var _a2, _b;
    var el2 = mouseEvent.target;
    var tagName = (_a2 = el2) === null || _a2 === void 0 ? void 0 : _a2.tagName.toLocaleLowerCase();
    return !!((_b = tagName) === null || _b === void 0 ? void 0 : _b.match("^a$|textarea|input|select|button"));
  };
  DragService2.prototype.onTouchUp = function(touchEvent, el2) {
    var touch = this.getFirstActiveTouch(touchEvent.changedTouches);
    if (!touch) {
      touch = this.touchLastTime;
    }
    this.onUpCommon(touch, el2);
  };
  DragService2.prototype.onMouseUp = function(mouseEvent, el2) {
    this.onUpCommon(mouseEvent, el2);
  };
  DragService2.prototype.onUpCommon = function(eventOrTouch, el2) {
    if (this.dragging) {
      this.dragging = false;
      this.currentDragParams.onDragStop(eventOrTouch);
      var event_2 = {
        type: Events.EVENT_DRAG_STOPPED,
        target: el2
      };
      this.eventService.dispatchEvent(event_2);
    }
    this.mouseStartEvent = null;
    this.touchStart = null;
    this.touchLastTime = null;
    this.currentDragParams = null;
    this.dragEndFunctions.forEach(function(func) {
      return func();
    });
    this.dragEndFunctions.length = 0;
  };
  __decorate$1V([
    Autowired("loggerFactory")
  ], DragService2.prototype, "loggerFactory", void 0);
  __decorate$1V([
    Autowired("mouseEventService")
  ], DragService2.prototype, "mouseEventService", void 0);
  __decorate$1V([
    PostConstruct
  ], DragService2.prototype, "init", null);
  __decorate$1V([
    PreDestroy
  ], DragService2.prototype, "removeAllListeners", null);
  DragService2 = __decorate$1V([
    Bean("dragService")
  ], DragService2);
  return DragService2;
}(BeanStub);
var __extends$26 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$6 = function() {
  __assign$6 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$6.apply(this, arguments);
};
var __decorate$1U = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FilterManager = function(_super) {
  __extends$26(FilterManager2, _super);
  function FilterManager2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.allColumnFilters = /* @__PURE__ */ new Map();
    _this.activeAggregateFilters = [];
    _this.activeColumnFilters = [];
    _this.quickFilter = null;
    _this.quickFilterParts = null;
    _this.processingFilterChange = false;
    return _this;
  }
  FilterManager_1 = FilterManager2;
  FilterManager2.prototype.init = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, function() {
      return _this.onColumnsChanged();
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, function() {
      return _this.refreshFiltersForAggregations();
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, function() {
      return _this.refreshFiltersForAggregations();
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, function() {
      return _this.refreshFiltersForAggregations();
    });
    this.quickFilter = this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText());
    this.setQuickFilterParts();
    this.allowShowChangeAfterFilter = this.gridOptionsWrapper.isAllowShowChangeAfterFilter();
    this.externalFilterPresent = this.gridOptionsWrapper.isExternalFilterPresent();
  };
  FilterManager2.prototype.setQuickFilterParts = function() {
    this.quickFilterParts = this.quickFilter ? this.quickFilter.split(" ") : null;
  };
  FilterManager2.prototype.setFilterModel = function(model) {
    var _this = this;
    var allPromises = [];
    var previousModel = this.getFilterModel();
    if (model) {
      var modelKeys_1 = convertToSet(Object.keys(model));
      this.allColumnFilters.forEach(function(filterWrapper, colId) {
        var newModel = model[colId];
        allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, newModel));
        modelKeys_1.delete(colId);
      });
      modelKeys_1.forEach(function(colId) {
        var column = _this.columnModel.getPrimaryColumn(colId) || _this.columnModel.getGridColumn(colId);
        if (!column) {
          console.warn("AG Grid: setFilterModel() - no column found for colId: " + colId);
          return;
        }
        if (!column.isFilterAllowed()) {
          console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: " + colId);
          return;
        }
        var filterWrapper = _this.getOrCreateFilterWrapper(column, "NO_UI");
        if (!filterWrapper) {
          console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: " + colId);
          return;
        }
        allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, model[colId]));
      });
    } else {
      this.allColumnFilters.forEach(function(filterWrapper) {
        allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, null));
      });
    }
    AgPromise.all(allPromises).then(function() {
      var currentModel = _this.getFilterModel();
      var columns = [];
      _this.allColumnFilters.forEach(function(filterWrapper, colId) {
        var before = previousModel ? previousModel[colId] : null;
        var after = currentModel ? currentModel[colId] : null;
        if (!_.jsonEquals(before, after)) {
          columns.push(filterWrapper.column);
        }
      });
      if (columns.length > 0) {
        _this.onFilterChanged({ columns });
      }
    });
  };
  FilterManager2.prototype.setModelOnFilterWrapper = function(filterPromise, newModel) {
    return new AgPromise(function(resolve) {
      filterPromise.then(function(filter) {
        if (typeof filter.setModel !== "function") {
          console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel");
          resolve();
        }
        (filter.setModel(newModel) || AgPromise.resolve()).then(function() {
          return resolve();
        });
      });
    });
  };
  FilterManager2.prototype.getFilterModel = function() {
    var result = {};
    this.allColumnFilters.forEach(function(filterWrapper, key) {
      var filterPromise = filterWrapper.filterPromise;
      var filter = filterPromise.resolveNow(null, function(promiseFilter) {
        return promiseFilter;
      });
      if (filter == null) {
        return null;
      }
      if (typeof filter.getModel !== "function") {
        console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");
        return;
      }
      var model = filter.getModel();
      if (exists(model)) {
        result[key] = model;
      }
    });
    return result;
  };
  FilterManager2.prototype.isColumnFilterPresent = function() {
    return this.activeColumnFilters.length > 0;
  };
  FilterManager2.prototype.isAggregateFilterPresent = function() {
    return !!this.activeAggregateFilters.length;
  };
  FilterManager2.prototype.isExternalFilterPresent = function() {
    return this.externalFilterPresent;
  };
  FilterManager2.prototype.doAggregateFiltersPass = function(node, filterToSkip) {
    return this.doColumnFiltersPass(node, filterToSkip, true);
  };
  FilterManager2.prototype.updateActiveFilters = function() {
    var _this = this;
    this.activeColumnFilters.length = 0;
    this.activeAggregateFilters.length = 0;
    var isFilterActive = function(filter) {
      if (!filter) {
        return false;
      }
      if (!filter.isFilterActive) {
        console.warn("AG Grid: Filter is missing isFilterActive() method");
        return false;
      }
      return filter.isFilterActive();
    };
    var groupFilterEnabled = !!this.gridOptionsWrapper.getGroupAggFiltering();
    var isAggFilter = function(column) {
      var isSecondary = !column.isPrimary();
      if (isSecondary) {
        return true;
      }
      var isShowingPrimaryColumns = !_this.columnModel.isPivotActive();
      var isValueActive = column.isValueActive();
      if (!isValueActive || !isShowingPrimaryColumns) {
        return false;
      }
      if (_this.columnModel.isPivotMode()) {
        return true;
      } else {
        return groupFilterEnabled;
      }
    };
    this.allColumnFilters.forEach(function(filterWrapper) {
      if (filterWrapper.filterPromise.resolveNow(false, isFilterActive)) {
        var filterComp = filterWrapper.filterPromise.resolveNow(null, function(filter) {
          return filter;
        });
        if (isAggFilter(filterWrapper.column)) {
          _this.activeAggregateFilters.push(filterComp);
        } else {
          _this.activeColumnFilters.push(filterComp);
        }
      }
    });
  };
  FilterManager2.prototype.updateFilterFlagInColumns = function(source, additionalEventAttributes) {
    this.allColumnFilters.forEach(function(filterWrapper) {
      var isFilterActive = filterWrapper.filterPromise.resolveNow(false, function(filter) {
        return filter.isFilterActive();
      });
      filterWrapper.column.setFilterActive(isFilterActive, source, additionalEventAttributes);
    });
  };
  FilterManager2.prototype.isAnyFilterPresent = function() {
    return this.isQuickFilterPresent() || this.isColumnFilterPresent() || this.isAggregateFilterPresent() || this.isExternalFilterPresent();
  };
  FilterManager2.prototype.doColumnFiltersPass = function(node, filterToSkip, targetAggregates) {
    var data = node.data, aggData = node.aggData;
    var targetedFilters = targetAggregates ? this.activeAggregateFilters : this.activeColumnFilters;
    var targetedData = targetAggregates ? aggData : data;
    for (var i2 = 0; i2 < targetedFilters.length; i2++) {
      var filter = targetedFilters[i2];
      if (filter == null || filter === filterToSkip) {
        continue;
      }
      if (typeof filter.doesFilterPass !== "function") {
        throw new Error("Filter is missing method doesFilterPass");
      }
      if (!filter.doesFilterPass({ node, data: targetedData })) {
        return false;
      }
    }
    return true;
  };
  FilterManager2.prototype.parseQuickFilter = function(newFilter) {
    if (!exists(newFilter)) {
      return null;
    }
    if (!this.gridOptionsWrapper.isRowModelDefault()) {
      console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model");
      return null;
    }
    return newFilter.toUpperCase();
  };
  FilterManager2.prototype.setQuickFilter = function(newFilter) {
    if (newFilter != null && typeof newFilter !== "string") {
      console.warn("AG Grid - setQuickFilter() only supports string inputs, received: " + typeof newFilter);
      return;
    }
    var parsedFilter = this.parseQuickFilter(newFilter);
    if (this.quickFilter !== parsedFilter) {
      this.quickFilter = parsedFilter;
      this.setQuickFilterParts();
      this.onFilterChanged();
    }
  };
  FilterManager2.prototype.refreshFiltersForAggregations = function() {
    var isAggFiltering = this.gridOptionsWrapper.getGroupAggFiltering();
    if (isAggFiltering) {
      this.onFilterChanged();
    }
  };
  FilterManager2.prototype.callOnFilterChangedOutsideRenderCycle = function(params) {
    var _this = this;
    if (params === void 0) {
      params = {};
    }
    var action = function() {
      return _this.onFilterChanged(params);
    };
    if (this.rowRenderer.isRefreshInProgress()) {
      setTimeout(action, 0);
    } else {
      action();
    }
  };
  FilterManager2.prototype.onFilterChanged = function(params) {
    if (params === void 0) {
      params = {};
    }
    var filterInstance = params.filterInstance, additionalEventAttributes = params.additionalEventAttributes, columns = params.columns;
    this.updateActiveFilters();
    this.updateFilterFlagInColumns("filterChanged", additionalEventAttributes);
    this.externalFilterPresent = this.gridOptionsWrapper.isExternalFilterPresent();
    this.allColumnFilters.forEach(function(filterWrapper) {
      if (!filterWrapper.filterPromise) {
        return;
      }
      filterWrapper.filterPromise.then(function(filter) {
        if (filter && filter !== filterInstance && filter.onAnyFilterChanged) {
          filter.onAnyFilterChanged();
        }
      });
    });
    var filterChangedEvent = {
      type: Events.EVENT_FILTER_CHANGED,
      columns: columns || []
    };
    if (additionalEventAttributes) {
      mergeDeep(filterChangedEvent, additionalEventAttributes);
    }
    this.processingFilterChange = true;
    this.eventService.dispatchEvent(filterChangedEvent);
    this.processingFilterChange = false;
  };
  FilterManager2.prototype.isSuppressFlashingCellsBecauseFiltering = function() {
    return !this.allowShowChangeAfterFilter && this.processingFilterChange;
  };
  FilterManager2.prototype.isQuickFilterPresent = function() {
    return this.quickFilter !== null;
  };
  FilterManager2.prototype.doesRowPassOtherFilters = function(filterToSkip, node) {
    return this.doesRowPassFilter({ rowNode: node, filterInstanceToSkip: filterToSkip });
  };
  FilterManager2.prototype.doesRowPassQuickFilterNoCache = function(node, filterPart) {
    var _this = this;
    var columns = this.columnModel.getAllColumnsForQuickFilter();
    return columns.some(function(column) {
      var part = _this.getQuickFilterTextForColumn(column, node);
      return exists(part) && part.indexOf(filterPart) >= 0;
    });
  };
  FilterManager2.prototype.doesRowPassQuickFilterCache = function(node, filterPart) {
    if (!node.quickFilterAggregateText) {
      this.aggregateRowForQuickFilter(node);
    }
    return node.quickFilterAggregateText.indexOf(filterPart) >= 0;
  };
  FilterManager2.prototype.doesRowPassQuickFilter = function(node) {
    var _this = this;
    var usingCache = this.gridOptionsWrapper.isCacheQuickFilter();
    return this.quickFilterParts.every(function(part) {
      return usingCache ? _this.doesRowPassQuickFilterCache(node, part) : _this.doesRowPassQuickFilterNoCache(node, part);
    });
  };
  FilterManager2.prototype.doesRowPassAggregateFilters = function(params) {
    if (this.isAggregateFilterPresent() && !this.doAggregateFiltersPass(params.rowNode, params.filterInstanceToSkip)) {
      return false;
    }
    return true;
  };
  FilterManager2.prototype.doesRowPassFilter = function(params) {
    if (this.isQuickFilterPresent() && !this.doesRowPassQuickFilter(params.rowNode)) {
      return false;
    }
    if (this.isExternalFilterPresent() && !this.gridOptionsWrapper.doesExternalFilterPass(params.rowNode)) {
      return false;
    }
    if (this.isColumnFilterPresent() && !this.doColumnFiltersPass(params.rowNode, params.filterInstanceToSkip)) {
      return false;
    }
    return true;
  };
  FilterManager2.prototype.getQuickFilterTextForColumn = function(column, node) {
    var value = this.valueService.getValue(column, node, true);
    var colDef = column.getColDef();
    if (colDef.getQuickFilterText) {
      var params = {
        value,
        node,
        data: node.data,
        column,
        colDef,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      value = colDef.getQuickFilterText(params);
    }
    return exists(value) ? value.toString().toUpperCase() : null;
  };
  FilterManager2.prototype.aggregateRowForQuickFilter = function(node) {
    var _this = this;
    var stringParts = [];
    var columns = this.columnModel.getAllColumnsForQuickFilter();
    columns.forEach(function(column) {
      var part = _this.getQuickFilterTextForColumn(column, node);
      if (exists(part)) {
        stringParts.push(part);
      }
    });
    node.quickFilterAggregateText = stringParts.join(FilterManager_1.QUICK_FILTER_SEPARATOR);
  };
  FilterManager2.prototype.onNewRowsLoaded = function(source) {
    this.allColumnFilters.forEach(function(filterWrapper) {
      filterWrapper.filterPromise.then(function(filter) {
        if (filter.onNewRowsLoaded) {
          filter.onNewRowsLoaded();
        }
      });
    });
    this.updateFilterFlagInColumns(source);
    this.updateActiveFilters();
  };
  FilterManager2.prototype.createValueGetter = function(column) {
    var _this = this;
    return function(_a2) {
      var node = _a2.node;
      return _this.valueService.getValue(column, node, true);
    };
  };
  FilterManager2.prototype.getFilterComponent = function(column, source, createIfDoesNotExist) {
    if (createIfDoesNotExist === void 0) {
      createIfDoesNotExist = true;
    }
    var _a2;
    if (createIfDoesNotExist) {
      return ((_a2 = this.getOrCreateFilterWrapper(column, source)) === null || _a2 === void 0 ? void 0 : _a2.filterPromise) || null;
    }
    var filterWrapper = this.cachedFilter(column);
    return filterWrapper ? filterWrapper.filterPromise : null;
  };
  FilterManager2.prototype.isFilterActive = function(column) {
    var filterWrapper = this.cachedFilter(column);
    return !!filterWrapper && filterWrapper.filterPromise.resolveNow(false, function(filter) {
      return filter.isFilterActive();
    });
  };
  FilterManager2.prototype.getOrCreateFilterWrapper = function(column, source) {
    if (!column.isFilterAllowed()) {
      return null;
    }
    var filterWrapper = this.cachedFilter(column);
    if (!filterWrapper) {
      filterWrapper = this.createFilterWrapper(column, source);
      this.allColumnFilters.set(column.getColId(), filterWrapper);
    } else if (source !== "NO_UI") {
      this.putIntoGui(filterWrapper, source);
    }
    return filterWrapper;
  };
  FilterManager2.prototype.cachedFilter = function(column) {
    return this.allColumnFilters.get(column.getColId());
  };
  FilterManager2.prototype.createFilterInstance = function(column) {
    var _this = this;
    var defaultFilter = ModuleRegistry.isRegistered(ModuleNames.SetFilterModule) ? "agSetColumnFilter" : "agTextColumnFilter";
    var colDef = column.getColDef();
    var filterInstance;
    var params = __assign$6(__assign$6({}, this.createFilterParams(column, colDef)), { filterModifiedCallback: function() {
      var event = {
        type: Events.EVENT_FILTER_MODIFIED,
        column,
        filterInstance
      };
      _this.eventService.dispatchEvent(event);
    }, filterChangedCallback: function(additionalEventAttributes) {
      var params2 = { filterInstance, additionalEventAttributes, columns: [column] };
      _this.callOnFilterChangedOutsideRenderCycle(params2);
    }, doesRowPassOtherFilter: function(node) {
      return _this.doesRowPassOtherFilters(filterInstance, node);
    } });
    var compDetails = this.userComponentFactory.getFilterDetails(colDef, params, defaultFilter);
    if (!compDetails) {
      return null;
    }
    var componentPromise = compDetails.newAgStackInstance();
    if (componentPromise) {
      componentPromise.then(function(r) {
        return filterInstance = r;
      });
    }
    return componentPromise;
  };
  FilterManager2.prototype.createFilterParams = function(column, colDef) {
    var params = {
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      column,
      colDef: cloneObject(colDef),
      rowModel: this.rowModel,
      filterChangedCallback: function() {
      },
      filterModifiedCallback: function() {
      },
      valueGetter: this.createValueGetter(column),
      context: this.gridOptionsWrapper.getContext(),
      doesRowPassOtherFilter: function() {
        return true;
      }
    };
    return params;
  };
  FilterManager2.prototype.createFilterWrapper = function(column, source) {
    var filterWrapper = {
      column,
      filterPromise: null,
      compiledElement: null,
      guiPromise: AgPromise.resolve(null)
    };
    filterWrapper.filterPromise = this.createFilterInstance(column);
    if (filterWrapper.filterPromise) {
      this.putIntoGui(filterWrapper, source);
    }
    return filterWrapper;
  };
  FilterManager2.prototype.putIntoGui = function(filterWrapper, source) {
    var _this = this;
    var eFilterGui = document.createElement("div");
    eFilterGui.className = "ag-filter";
    filterWrapper.guiPromise = new AgPromise(function(resolve) {
      filterWrapper.filterPromise.then(function(filter) {
        var guiFromFilter = filter.getGui();
        if (!exists(guiFromFilter)) {
          console.warn("AG Grid: getGui method from filter returned " + guiFromFilter + ", it should be a DOM element or an HTML template string.");
        }
        if (typeof guiFromFilter === "string") {
          guiFromFilter = loadTemplate(guiFromFilter);
        }
        eFilterGui.appendChild(guiFromFilter);
        resolve(eFilterGui);
        var event = {
          type: Events.EVENT_FILTER_OPENED,
          column: filterWrapper.column,
          source,
          eGui: eFilterGui
        };
        _this.eventService.dispatchEvent(event);
      });
    });
  };
  FilterManager2.prototype.onColumnsChanged = function() {
    var _this = this;
    var columns = [];
    this.allColumnFilters.forEach(function(wrapper, colId) {
      var currentColumn;
      if (wrapper.column.isPrimary()) {
        currentColumn = _this.columnModel.getPrimaryColumn(colId);
      } else {
        currentColumn = _this.columnModel.getGridColumn(colId);
      }
      if (currentColumn) {
        return;
      }
      columns.push(wrapper.column);
      _this.disposeFilterWrapper(wrapper, "filterDestroyed");
    });
    if (columns.length > 0) {
      this.onFilterChanged({ columns });
    }
  };
  FilterManager2.prototype.destroyFilter = function(column, source) {
    if (source === void 0) {
      source = "api";
    }
    var filterWrapper = this.allColumnFilters.get(column.getColId());
    if (filterWrapper) {
      this.disposeFilterWrapper(filterWrapper, source);
      this.onFilterChanged({ columns: [column] });
    }
  };
  FilterManager2.prototype.disposeFilterWrapper = function(filterWrapper, source) {
    var _this = this;
    filterWrapper.filterPromise.then(function(filter) {
      (filter.setModel(null) || AgPromise.resolve()).then(function() {
        _this.getContext().destroyBean(filter);
        filterWrapper.column.setFilterActive(false, source);
        _this.allColumnFilters.delete(filterWrapper.column.getColId());
      });
    });
  };
  FilterManager2.prototype.destroy = function() {
    var _this = this;
    _super.prototype.destroy.call(this);
    this.allColumnFilters.forEach(function(filterWrapper) {
      return _this.disposeFilterWrapper(filterWrapper, "filterDestroyed");
    });
  };
  var FilterManager_1;
  FilterManager2.QUICK_FILTER_SEPARATOR = "\n";
  __decorate$1U([
    Autowired("valueService")
  ], FilterManager2.prototype, "valueService", void 0);
  __decorate$1U([
    Autowired("columnModel")
  ], FilterManager2.prototype, "columnModel", void 0);
  __decorate$1U([
    Autowired("rowModel")
  ], FilterManager2.prototype, "rowModel", void 0);
  __decorate$1U([
    Autowired("userComponentFactory")
  ], FilterManager2.prototype, "userComponentFactory", void 0);
  __decorate$1U([
    Autowired("rowRenderer")
  ], FilterManager2.prototype, "rowRenderer", void 0);
  __decorate$1U([
    PostConstruct
  ], FilterManager2.prototype, "init", null);
  __decorate$1U([
    PreDestroy
  ], FilterManager2.prototype, "destroy", null);
  FilterManager2 = FilterManager_1 = __decorate$1U([
    Bean("filterManager")
  ], FilterManager2);
  return FilterManager2;
}(BeanStub);
var __extends$25 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AbstractHeaderCellComp = function(_super) {
  __extends$25(AbstractHeaderCellComp2, _super);
  function AbstractHeaderCellComp2(template, ctrl) {
    var _this = _super.call(this, template) || this;
    _this.ctrl = ctrl;
    return _this;
  }
  AbstractHeaderCellComp2.prototype.getCtrl = function() {
    return this.ctrl;
  };
  return AbstractHeaderCellComp2;
}(Component);
var __extends$24 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1T = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderFilterCellComp = function(_super) {
  __extends$24(HeaderFilterCellComp2, _super);
  function HeaderFilterCellComp2(ctrl) {
    return _super.call(this, HeaderFilterCellComp2.TEMPLATE, ctrl) || this;
  }
  HeaderFilterCellComp2.prototype.postConstruct = function() {
    var _this = this;
    var eGui = this.getGui();
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      addOrRemoveBodyCssClass: function(cssClassName, on2) {
        return _this.eFloatingFilterBody.classList.toggle(cssClassName, on2);
      },
      addOrRemoveButtonWrapperCssClass: function(cssClassName, on2) {
        return _this.eButtonWrapper.classList.toggle(cssClassName, on2);
      },
      setCompDetails: function(compDetails) {
        return _this.setCompDetails(compDetails);
      },
      getFloatingFilterComp: function() {
        return _this.compPromise;
      },
      setWidth: function(width) {
        return eGui.style.width = width;
      },
      setMenuIcon: function(eIcon) {
        return _this.eButtonShowMainFilter.appendChild(eIcon);
      }
    };
    this.ctrl.setComp(compProxy, eGui, this.eButtonShowMainFilter, this.eFloatingFilterBody);
  };
  HeaderFilterCellComp2.prototype.setCompDetails = function(compDetails) {
    var _this = this;
    this.compPromise = compDetails.newAgStackInstance();
    this.compPromise.then(function(comp) {
      return _this.afterCompCreated(comp);
    });
  };
  HeaderFilterCellComp2.prototype.afterCompCreated = function(comp) {
    var _this = this;
    if (!comp) {
      return;
    }
    this.addDestroyFunc(function() {
      return _this.context.destroyBean(comp);
    });
    if (!this.isAlive()) {
      return;
    }
    this.eFloatingFilterBody.appendChild(comp.getGui());
    if (comp.afterGuiAttached) {
      comp.afterGuiAttached();
    }
  };
  HeaderFilterCellComp2.TEMPLATE = '<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>';
  __decorate$1T([
    RefSelector("eFloatingFilterBody")
  ], HeaderFilterCellComp2.prototype, "eFloatingFilterBody", void 0);
  __decorate$1T([
    RefSelector("eButtonWrapper")
  ], HeaderFilterCellComp2.prototype, "eButtonWrapper", void 0);
  __decorate$1T([
    RefSelector("eButtonShowMainFilter")
  ], HeaderFilterCellComp2.prototype, "eButtonShowMainFilter", void 0);
  __decorate$1T([
    PostConstruct
  ], HeaderFilterCellComp2.prototype, "postConstruct", null);
  return HeaderFilterCellComp2;
}(AbstractHeaderCellComp);
var __extends$23 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1S = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var LayoutCssClasses;
(function(LayoutCssClasses2) {
  LayoutCssClasses2["AUTO_HEIGHT"] = "ag-layout-auto-height";
  LayoutCssClasses2["NORMAL"] = "ag-layout-normal";
  LayoutCssClasses2["PRINT"] = "ag-layout-print";
})(LayoutCssClasses || (LayoutCssClasses = {}));
var LayoutFeature = function(_super) {
  __extends$23(LayoutFeature2, _super);
  function LayoutFeature2(view) {
    var _this = _super.call(this) || this;
    _this.view = view;
    return _this;
  }
  LayoutFeature2.prototype.postConstruct = function() {
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.updateLayoutClasses.bind(this));
    this.updateLayoutClasses();
  };
  LayoutFeature2.prototype.updateLayoutClasses = function() {
    var domLayout = this.gridOptionsWrapper.getDomLayout();
    var params = {
      autoHeight: domLayout === Constants.DOM_LAYOUT_AUTO_HEIGHT,
      normal: domLayout === Constants.DOM_LAYOUT_NORMAL,
      print: domLayout === Constants.DOM_LAYOUT_PRINT
    };
    var cssClass = params.autoHeight ? LayoutCssClasses.AUTO_HEIGHT : params.print ? LayoutCssClasses.PRINT : LayoutCssClasses.NORMAL;
    this.view.updateLayoutClasses(cssClass, params);
  };
  __decorate$1S([
    Autowired("gridOptionsWrapper")
  ], LayoutFeature2.prototype, "gridOptionsWrapper", void 0);
  __decorate$1S([
    PostConstruct
  ], LayoutFeature2.prototype, "postConstruct", null);
  return LayoutFeature2;
}(BeanStub);
var __extends$22 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1R = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GridBodyScrollFeature = function(_super) {
  __extends$22(GridBodyScrollFeature2, _super);
  function GridBodyScrollFeature2(eBodyViewport) {
    var _this = _super.call(this) || this;
    _this.scrollLeft = -1;
    _this.nextScrollTop = -1;
    _this.scrollTop = -1;
    _this.eBodyViewport = eBodyViewport;
    _this.resetLastHorizontalScrollElementDebounced = debounce(_this.resetLastHorizontalScrollElement.bind(_this), 500);
    return _this;
  }
  GridBodyScrollFeature2.prototype.postConstruct = function() {
    var _this = this;
    this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onDisplayedColumnsWidthChanged.bind(this));
    this.ctrlsService.whenReady(function(p) {
      _this.centerRowContainerCtrl = p.centerRowContainerCtrl;
      _this.onDisplayedColumnsWidthChanged();
      _this.addScrollListener();
    });
  };
  GridBodyScrollFeature2.prototype.addScrollListener = function() {
    var fakeHScroll = this.ctrlsService.getFakeHScrollCtrl();
    this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(), "scroll", this.onCenterViewportScroll.bind(this));
    this.addManagedListener(fakeHScroll.getViewport(), "scroll", this.onFakeHorizontalScroll.bind(this));
    var onVerticalScroll = this.gridOptionsWrapper.isDebounceVerticalScrollbar() ? debounce(this.onVerticalScroll.bind(this), 100) : this.onVerticalScroll.bind(this);
    this.addManagedListener(this.eBodyViewport, "scroll", onVerticalScroll);
  };
  GridBodyScrollFeature2.prototype.onDisplayedColumnsWidthChanged = function() {
    if (this.enableRtl) {
      this.horizontallyScrollHeaderCenterAndFloatingCenter();
    }
  };
  GridBodyScrollFeature2.prototype.horizontallyScrollHeaderCenterAndFloatingCenter = function(scrollLeft) {
    var notYetInitialised = this.centerRowContainerCtrl == null;
    if (notYetInitialised) {
      return;
    }
    if (scrollLeft === void 0) {
      scrollLeft = this.centerRowContainerCtrl.getCenterViewportScrollLeft();
    }
    var offset = this.enableRtl ? scrollLeft : -scrollLeft;
    var topCenterContainer = this.ctrlsService.getTopCenterRowContainerCtrl();
    var stickyTopCenterContainer = this.ctrlsService.getStickyTopCenterRowContainerCtrl();
    var bottomCenterContainer = this.ctrlsService.getBottomCenterRowContainerCtrl();
    var fakeHScroll = this.ctrlsService.getFakeHScrollCtrl();
    var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
    centerHeaderContainer.setHorizontalScroll(offset);
    bottomCenterContainer.setContainerTranslateX(offset);
    topCenterContainer.setContainerTranslateX(offset);
    stickyTopCenterContainer.setContainerTranslateX(offset);
    var centerViewport = this.centerRowContainerCtrl.getViewportElement();
    var isCenterViewportLastHorizontal = this.lastHorizontalScrollElement === centerViewport;
    var partner = isCenterViewportLastHorizontal ? fakeHScroll.getViewport() : this.centerRowContainerCtrl.getViewportElement();
    setScrollLeft(partner, Math.abs(scrollLeft), this.enableRtl);
  };
  GridBodyScrollFeature2.prototype.isControllingScroll = function(eDiv) {
    if (!this.lastHorizontalScrollElement) {
      this.lastHorizontalScrollElement = eDiv;
      return true;
    }
    return eDiv === this.lastHorizontalScrollElement;
  };
  GridBodyScrollFeature2.prototype.onFakeHorizontalScroll = function() {
    var fakeHScrollViewport = this.ctrlsService.getFakeHScrollCtrl().getViewport();
    if (!this.isControllingScroll(fakeHScrollViewport)) {
      return;
    }
    this.onBodyHorizontalScroll(fakeHScrollViewport);
  };
  GridBodyScrollFeature2.prototype.onCenterViewportScroll = function() {
    var centerContainerViewport = this.centerRowContainerCtrl.getViewportElement();
    if (!this.isControllingScroll(centerContainerViewport)) {
      return;
    }
    this.onBodyHorizontalScroll(centerContainerViewport);
  };
  GridBodyScrollFeature2.prototype.onBodyHorizontalScroll = function(eSource) {
    var centerContainerViewport = this.centerRowContainerCtrl.getViewportElement();
    var scrollLeft = centerContainerViewport.scrollLeft;
    if (this.shouldBlockScrollUpdate("horizontal", scrollLeft, true)) {
      return;
    }
    this.doHorizontalScroll(Math.round(getScrollLeft(eSource, this.enableRtl)));
    this.resetLastHorizontalScrollElementDebounced();
  };
  GridBodyScrollFeature2.prototype.onVerticalScroll = function() {
    var scrollTop = this.eBodyViewport.scrollTop;
    if (this.shouldBlockScrollUpdate("vertical", scrollTop, true)) {
      return;
    }
    this.animationFrameService.setScrollTop(scrollTop);
    this.nextScrollTop = scrollTop;
    if (this.gridOptionsWrapper.isSuppressAnimationFrame()) {
      this.scrollTop = this.nextScrollTop;
      this.redrawRowsAfterScroll();
    } else {
      this.animationFrameService.schedule();
    }
  };
  GridBodyScrollFeature2.prototype.resetLastHorizontalScrollElement = function() {
    this.lastHorizontalScrollElement = null;
  };
  GridBodyScrollFeature2.prototype.doHorizontalScroll = function(scrollLeft) {
    var fakeHScrollViewport = this.ctrlsService.getFakeHScrollCtrl().getViewport();
    var fakeScrollLeft = getScrollLeft(fakeHScrollViewport, this.enableRtl);
    if (this.scrollLeft === scrollLeft && scrollLeft === fakeScrollLeft) {
      return;
    }
    this.scrollLeft = scrollLeft;
    this.fireScrollEvent("horizontal");
    this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft);
    this.onHorizontalViewportChanged();
  };
  GridBodyScrollFeature2.prototype.fireScrollEvent = function(direction) {
    var _this = this;
    var bodyScrollEvent = {
      type: Events.EVENT_BODY_SCROLL,
      direction,
      left: this.scrollLeft,
      top: this.scrollTop
    };
    this.eventService.dispatchEvent(bodyScrollEvent);
    window.clearTimeout(this.scrollTimer);
    this.scrollTimer = void 0;
    this.scrollTimer = window.setTimeout(function() {
      var bodyScrollEndEvent = Object.assign({}, bodyScrollEvent, {
        type: Events.EVENT_BODY_SCROLL_END
      });
      _this.eventService.dispatchEvent(bodyScrollEndEvent);
    }, 100);
  };
  GridBodyScrollFeature2.prototype.shouldBlockScrollUpdate = function(direction, scrollTo, touchOnly) {
    if (touchOnly === void 0) {
      touchOnly = false;
    }
    if (touchOnly && !isIOSUserAgent()) {
      return false;
    }
    if (direction === "vertical") {
      var clientHeight = getInnerHeight(this.eBodyViewport);
      var scrollHeight = this.eBodyViewport.scrollHeight;
      if (scrollTo < 0 || scrollTo + clientHeight > scrollHeight) {
        return true;
      }
    }
    if (direction === "horizontal") {
      var clientWidth = this.centerRowContainerCtrl.getCenterWidth();
      var scrollWidth = this.centerRowContainerCtrl.getViewportElement().scrollWidth;
      if (this.enableRtl && isRtlNegativeScroll()) {
        if (scrollTo > 0) {
          return true;
        }
      } else if (scrollTo < 0) {
        return true;
      }
      if (Math.abs(scrollTo) + clientWidth > scrollWidth) {
        return true;
      }
    }
    return false;
  };
  GridBodyScrollFeature2.prototype.redrawRowsAfterScroll = function() {
    this.fireScrollEvent("vertical");
  };
  GridBodyScrollFeature2.prototype.onHorizontalViewportChanged = function() {
    this.centerRowContainerCtrl.onHorizontalViewportChanged();
  };
  GridBodyScrollFeature2.prototype.checkScrollLeft = function() {
    if (this.scrollLeft !== this.centerRowContainerCtrl.getCenterViewportScrollLeft()) {
      this.onBodyHorizontalScroll(this.centerRowContainerCtrl.getViewportElement());
    }
  };
  GridBodyScrollFeature2.prototype.executeAnimationFrameScroll = function() {
    var frameNeeded = this.scrollTop != this.nextScrollTop;
    if (frameNeeded) {
      this.scrollTop = this.nextScrollTop;
      this.redrawRowsAfterScroll();
    }
    return frameNeeded;
  };
  GridBodyScrollFeature2.prototype.setHorizontalScrollPosition = function(hScrollPosition) {
    var minScrollLeft = 0;
    var maxScrollLeft = this.centerRowContainerCtrl.getViewportElement().scrollWidth - this.centerRowContainerCtrl.getCenterWidth();
    if (this.shouldBlockScrollUpdate("horizontal", hScrollPosition)) {
      if (this.enableRtl && isRtlNegativeScroll()) {
        hScrollPosition = hScrollPosition > 0 ? 0 : maxScrollLeft;
      } else {
        hScrollPosition = Math.min(Math.max(hScrollPosition, minScrollLeft), maxScrollLeft);
      }
    }
    setScrollLeft(this.centerRowContainerCtrl.getViewportElement(), Math.abs(hScrollPosition), this.enableRtl);
    this.doHorizontalScroll(hScrollPosition);
  };
  GridBodyScrollFeature2.prototype.setVerticalScrollPosition = function(vScrollPosition) {
    this.eBodyViewport.scrollTop = vScrollPosition;
  };
  GridBodyScrollFeature2.prototype.getVScrollPosition = function() {
    var result = {
      top: this.eBodyViewport.scrollTop,
      bottom: this.eBodyViewport.scrollTop + this.eBodyViewport.offsetHeight
    };
    return result;
  };
  GridBodyScrollFeature2.prototype.getHScrollPosition = function() {
    return this.centerRowContainerCtrl.getHScrollPosition();
  };
  GridBodyScrollFeature2.prototype.isHorizontalScrollShowing = function() {
    return this.centerRowContainerCtrl.isHorizontalScrollShowing();
  };
  GridBodyScrollFeature2.prototype.scrollHorizontally = function(pixels) {
    var oldScrollPosition = this.centerRowContainerCtrl.getViewportElement().scrollLeft;
    this.setHorizontalScrollPosition(oldScrollPosition + pixels);
    return this.centerRowContainerCtrl.getViewportElement().scrollLeft - oldScrollPosition;
  };
  GridBodyScrollFeature2.prototype.scrollToTop = function() {
    this.eBodyViewport.scrollTop = 0;
  };
  GridBodyScrollFeature2.prototype.ensureNodeVisible = function(comparator, position) {
    if (position === void 0) {
      position = null;
    }
    var rowCount = this.rowModel.getRowCount();
    var indexToSelect = -1;
    for (var i2 = 0; i2 < rowCount; i2++) {
      var node = this.rowModel.getRow(i2);
      if (typeof comparator === "function") {
        var predicate = comparator;
        if (node && predicate(node)) {
          indexToSelect = i2;
          break;
        }
      } else {
        if (comparator === node || comparator === node.data) {
          indexToSelect = i2;
          break;
        }
      }
    }
    if (indexToSelect >= 0) {
      this.ensureIndexVisible(indexToSelect, position);
    }
  };
  GridBodyScrollFeature2.prototype.ensureIndexVisible = function(index, position) {
    if (this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT) {
      return;
    }
    var rowCount = this.paginationProxy.getRowCount();
    if (typeof index !== "number" || index < 0 || index >= rowCount) {
      console.warn("invalid row index for ensureIndexVisible: " + index);
      return;
    }
    var isPaging = this.gridOptionsWrapper.isPagination();
    var paginationPanelEnabled = isPaging && !this.gridOptionsWrapper.isSuppressPaginationPanel();
    if (!paginationPanelEnabled) {
      this.paginationProxy.goToPageWithIndex(index);
    }
    var gridBodyCtrl = this.ctrlsService.getGridBodyCtrl();
    var stickyTopHeight = gridBodyCtrl.getStickyTopHeight();
    var rowNode = this.paginationProxy.getRow(index);
    var rowGotShiftedDuringOperation;
    do {
      var startingRowTop = rowNode.rowTop;
      var startingRowHeight = rowNode.rowHeight;
      var paginationOffset = this.paginationProxy.getPixelOffset();
      var rowTopPixel = rowNode.rowTop - paginationOffset;
      var rowBottomPixel = rowTopPixel + rowNode.rowHeight;
      var scrollPosition = this.getVScrollPosition();
      var heightOffset = this.heightScaler.getDivStretchOffset();
      var vScrollTop = scrollPosition.top + heightOffset;
      var vScrollBottom = scrollPosition.bottom + heightOffset;
      var viewportHeight = vScrollBottom - vScrollTop;
      var pxTop = this.heightScaler.getScrollPositionForPixel(rowTopPixel);
      var pxBottom = this.heightScaler.getScrollPositionForPixel(rowBottomPixel - viewportHeight);
      var pxMiddle = Math.min((pxTop + pxBottom) / 2, rowTopPixel);
      var rowAboveViewport = vScrollTop + stickyTopHeight > rowTopPixel;
      var rowBelowViewport = vScrollBottom < rowBottomPixel;
      var newScrollPosition = null;
      if (position === "top") {
        newScrollPosition = pxTop;
      } else if (position === "bottom") {
        newScrollPosition = pxBottom;
      } else if (position === "middle") {
        newScrollPosition = pxMiddle;
      } else if (rowAboveViewport) {
        newScrollPosition = pxTop - stickyTopHeight;
      } else if (rowBelowViewport) {
        newScrollPosition = pxBottom;
      }
      if (newScrollPosition !== null) {
        this.eBodyViewport.scrollTop = newScrollPosition;
        this.rowRenderer.redrawAfterScroll();
      }
      rowGotShiftedDuringOperation = startingRowTop !== rowNode.rowTop || startingRowHeight !== rowNode.rowHeight;
    } while (rowGotShiftedDuringOperation);
    this.animationFrameService.flushAllFrames();
  };
  GridBodyScrollFeature2.prototype.ensureColumnVisible = function(key, position) {
    if (position === void 0) {
      position = "auto";
    }
    var column = this.columnModel.getGridColumn(key);
    if (!column) {
      return;
    }
    if (column.isPinned()) {
      return;
    }
    if (!this.columnModel.isColumnDisplayed(column)) {
      return;
    }
    var newHorizontalScroll = this.getPositionedHorizontalScroll(column, position);
    if (newHorizontalScroll !== null) {
      this.centerRowContainerCtrl.setCenterViewportScrollLeft(newHorizontalScroll);
    }
    this.centerRowContainerCtrl.onHorizontalViewportChanged();
    this.animationFrameService.flushAllFrames();
  };
  GridBodyScrollFeature2.prototype.getPositionedHorizontalScroll = function(column, position) {
    var _a2 = this.isColumnOutsideViewport(column), columnBeforeStart = _a2.columnBeforeStart, columnAfterEnd = _a2.columnAfterEnd;
    var viewportTooSmallForColumn = this.centerRowContainerCtrl.getCenterWidth() < column.getActualWidth();
    var viewportWidth = this.centerRowContainerCtrl.getCenterWidth();
    var isRtl = this.enableRtl;
    var alignColToStart = (isRtl ? columnBeforeStart : columnAfterEnd) || viewportTooSmallForColumn;
    var alignColToEnd = isRtl ? columnAfterEnd : columnBeforeStart;
    if (position !== "auto") {
      alignColToStart = position === "start";
      alignColToEnd = position === "end";
    }
    var isMiddle = position === "middle";
    if (alignColToStart || alignColToEnd || isMiddle) {
      var _b = this.getColumnBounds(column), colLeft = _b.colLeft, colMiddle = _b.colMiddle, colRight = _b.colRight;
      if (isMiddle) {
        return colMiddle - viewportWidth / 2;
      }
      if (alignColToStart) {
        return isRtl ? colRight : colLeft;
      }
      return isRtl ? colLeft - viewportWidth : colRight - viewportWidth;
    }
    return null;
  };
  GridBodyScrollFeature2.prototype.isColumnOutsideViewport = function(column) {
    var _a2 = this.getViewportBounds(), viewportStart = _a2.start, viewportEnd = _a2.end;
    var _b = this.getColumnBounds(column), colLeft = _b.colLeft, colRight = _b.colRight;
    var isRtl = this.enableRtl;
    var columnBeforeStart = isRtl ? viewportStart > colRight : viewportEnd < colRight;
    var columnAfterEnd = isRtl ? viewportEnd < colLeft : viewportStart > colLeft;
    return { columnBeforeStart, columnAfterEnd };
  };
  GridBodyScrollFeature2.prototype.getColumnBounds = function(column) {
    var isRtl = this.enableRtl;
    var bodyWidth = this.columnModel.getBodyContainerWidth();
    var colWidth = column.getActualWidth();
    var colLeft = column.getLeft();
    var multiplier = isRtl ? -1 : 1;
    var colLeftPixel = isRtl ? bodyWidth - colLeft : colLeft;
    var colRightPixel = colLeftPixel + colWidth * multiplier;
    var colMidPixel = colLeftPixel + colWidth / 2 * multiplier;
    return { colLeft: colLeftPixel, colMiddle: colMidPixel, colRight: colRightPixel };
  };
  GridBodyScrollFeature2.prototype.getViewportBounds = function() {
    var viewportWidth = this.centerRowContainerCtrl.getCenterWidth();
    var scrollPosition = this.centerRowContainerCtrl.getCenterViewportScrollLeft();
    var viewportStartPixel = scrollPosition;
    var viewportEndPixel = viewportWidth + scrollPosition;
    return { start: viewportStartPixel, end: viewportEndPixel, width: viewportWidth };
  };
  __decorate$1R([
    Autowired("ctrlsService")
  ], GridBodyScrollFeature2.prototype, "ctrlsService", void 0);
  __decorate$1R([
    Autowired("animationFrameService")
  ], GridBodyScrollFeature2.prototype, "animationFrameService", void 0);
  __decorate$1R([
    Autowired("paginationProxy")
  ], GridBodyScrollFeature2.prototype, "paginationProxy", void 0);
  __decorate$1R([
    Autowired("rowModel")
  ], GridBodyScrollFeature2.prototype, "rowModel", void 0);
  __decorate$1R([
    Autowired("rowContainerHeightService")
  ], GridBodyScrollFeature2.prototype, "heightScaler", void 0);
  __decorate$1R([
    Autowired("rowRenderer")
  ], GridBodyScrollFeature2.prototype, "rowRenderer", void 0);
  __decorate$1R([
    Autowired("columnModel")
  ], GridBodyScrollFeature2.prototype, "columnModel", void 0);
  __decorate$1R([
    PostConstruct
  ], GridBodyScrollFeature2.prototype, "postConstruct", null);
  return GridBodyScrollFeature2;
}(BeanStub);
var AutoScrollService = function() {
  function AutoScrollService2(params) {
    this.tickingInterval = null;
    this.onScrollCallback = null;
    this.scrollContainer = params.scrollContainer;
    this.scrollHorizontally = params.scrollAxis.indexOf("x") !== -1;
    this.scrollVertically = params.scrollAxis.indexOf("y") !== -1;
    this.scrollByTick = params.scrollByTick != null ? params.scrollByTick : 20;
    if (params.onScrollCallback) {
      this.onScrollCallback = params.onScrollCallback;
    }
    if (this.scrollVertically) {
      this.getVerticalPosition = params.getVerticalPosition;
      this.setVerticalPosition = params.setVerticalPosition;
    }
    if (this.scrollHorizontally) {
      this.getHorizontalPosition = params.getHorizontalPosition;
      this.setHorizontalPosition = params.setHorizontalPosition;
    }
    this.shouldSkipVerticalScroll = params.shouldSkipVerticalScroll || function() {
      return false;
    };
    this.shouldSkipHorizontalScroll = params.shouldSkipHorizontalScroll || function() {
      return false;
    };
  }
  AutoScrollService2.prototype.check = function(mouseEvent, forceSkipVerticalScroll) {
    if (forceSkipVerticalScroll === void 0) {
      forceSkipVerticalScroll = false;
    }
    var skipVerticalScroll = forceSkipVerticalScroll || this.shouldSkipVerticalScroll();
    if (skipVerticalScroll && this.shouldSkipHorizontalScroll()) {
      return;
    }
    var rect = this.scrollContainer.getBoundingClientRect();
    var scrollTick = this.scrollByTick;
    this.tickLeft = mouseEvent.clientX < rect.left + scrollTick;
    this.tickRight = mouseEvent.clientX > rect.right - scrollTick;
    this.tickUp = mouseEvent.clientY < rect.top + scrollTick && !skipVerticalScroll;
    this.tickDown = mouseEvent.clientY > rect.bottom - scrollTick && !skipVerticalScroll;
    if (this.tickLeft || this.tickRight || this.tickUp || this.tickDown) {
      this.ensureTickingStarted();
    } else {
      this.ensureCleared();
    }
  };
  AutoScrollService2.prototype.ensureTickingStarted = function() {
    if (this.tickingInterval === null) {
      this.tickingInterval = window.setInterval(this.doTick.bind(this), 100);
      this.tickCount = 0;
    }
  };
  AutoScrollService2.prototype.doTick = function() {
    this.tickCount++;
    var tickAmount;
    tickAmount = this.tickCount > 20 ? 200 : this.tickCount > 10 ? 80 : 40;
    if (this.scrollVertically) {
      var vScrollPosition = this.getVerticalPosition();
      if (this.tickUp) {
        this.setVerticalPosition(vScrollPosition - tickAmount);
      }
      if (this.tickDown) {
        this.setVerticalPosition(vScrollPosition + tickAmount);
      }
    }
    if (this.scrollHorizontally) {
      var hScrollPosition = this.getHorizontalPosition();
      if (this.tickLeft) {
        this.setHorizontalPosition(hScrollPosition - tickAmount);
      }
      if (this.tickRight) {
        this.setHorizontalPosition(hScrollPosition + tickAmount);
      }
    }
    if (this.onScrollCallback) {
      this.onScrollCallback();
    }
  };
  AutoScrollService2.prototype.ensureCleared = function() {
    if (this.tickingInterval) {
      window.clearInterval(this.tickingInterval);
      this.tickingInterval = null;
    }
  };
  return AutoScrollService2;
}();
var __extends$21 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$5 = function() {
  __assign$5 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$5.apply(this, arguments);
};
var __decorate$1Q = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$h = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$d = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$h(arguments[i2]));
  return ar;
};
var RowDragFeature = function(_super) {
  __extends$21(RowDragFeature2, _super);
  function RowDragFeature2(eContainer) {
    var _this = _super.call(this) || this;
    _this.isMultiRowDrag = false;
    _this.isGridSorted = false;
    _this.isGridFiltered = false;
    _this.isRowGroupActive = false;
    _this.eContainer = eContainer;
    return _this;
  }
  RowDragFeature2.prototype.postConstruct = function() {
    var _this = this;
    if (this.gridOptionsWrapper.isRowModelDefault()) {
      this.clientSideRowModel = this.rowModel;
    }
    var refreshStatus = function() {
      _this.onSortChanged();
      _this.onFilterChanged();
      _this.onRowGroupChanged();
    };
    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, function() {
      refreshStatus();
    });
    refreshStatus();
    this.ctrlsService.whenReady(function() {
      var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
      _this.autoScrollService = new AutoScrollService({
        scrollContainer: gridBodyCon.getBodyViewportElement(),
        scrollAxis: "y",
        getVerticalPosition: function() {
          return gridBodyCon.getScrollFeature().getVScrollPosition().top;
        },
        setVerticalPosition: function(position) {
          return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position);
        },
        onScrollCallback: function() {
          _this.onDragging(_this.lastDraggingEvent);
        }
      });
    });
  };
  RowDragFeature2.prototype.onSortChanged = function() {
    this.isGridSorted = this.sortController.isSortActive();
  };
  RowDragFeature2.prototype.onFilterChanged = function() {
    this.isGridFiltered = this.filterManager.isAnyFilterPresent();
  };
  RowDragFeature2.prototype.onRowGroupChanged = function() {
    var rowGroups = this.columnModel.getRowGroupColumns();
    this.isRowGroupActive = !missingOrEmpty(rowGroups);
  };
  RowDragFeature2.prototype.getContainer = function() {
    return this.eContainer;
  };
  RowDragFeature2.prototype.isInterestedIn = function(type) {
    return type === DragSourceType.RowDrag;
  };
  RowDragFeature2.prototype.getIconName = function() {
    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
    if (managedDrag && this.shouldPreventRowMove()) {
      return DragAndDropService.ICON_NOT_ALLOWED;
    }
    return DragAndDropService.ICON_MOVE;
  };
  RowDragFeature2.prototype.shouldPreventRowMove = function() {
    return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;
  };
  RowDragFeature2.prototype.getRowNodes = function(draggingEvent) {
    var _this = this;
    if (!this.isFromThisGrid(draggingEvent)) {
      return draggingEvent.dragItem.rowNodes || [];
    }
    var isRowDragMultiRow = this.gridOptionsWrapper.isRowDragMultiRow();
    var selectedNodes = __spread$d(this.selectionService.getSelectedNodes()).sort(function(a3, b2) {
      if (a3.rowIndex == null || b2.rowIndex == null) {
        return 0;
      }
      return _this.getRowIndexNumber(a3) - _this.getRowIndexNumber(b2);
    });
    var currentNode = draggingEvent.dragItem.rowNode;
    if (isRowDragMultiRow && selectedNodes.indexOf(currentNode) !== -1) {
      this.isMultiRowDrag = true;
      return selectedNodes;
    }
    this.isMultiRowDrag = false;
    return [currentNode];
  };
  RowDragFeature2.prototype.onDragEnter = function(draggingEvent) {
    draggingEvent.dragItem.rowNodes = this.getRowNodes(draggingEvent);
    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);
    this.getRowNodes(draggingEvent).forEach(function(rowNode) {
      rowNode.setDragging(true);
    });
    this.onEnterOrDragging(draggingEvent);
  };
  RowDragFeature2.prototype.onDragging = function(draggingEvent) {
    this.onEnterOrDragging(draggingEvent);
  };
  RowDragFeature2.prototype.isFromThisGrid = function(draggingEvent) {
    var dragSourceDomDataKey = draggingEvent.dragSource.dragSourceDomDataKey;
    return dragSourceDomDataKey === this.gridOptionsWrapper.getDomDataKey();
  };
  RowDragFeature2.prototype.isDropZoneWithinThisGrid = function(draggingEvent) {
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var gridGui = gridBodyCon.getGui();
    var dropZoneTarget = draggingEvent.dropZoneTarget;
    return !gridGui.contains(dropZoneTarget);
  };
  RowDragFeature2.prototype.onEnterOrDragging = function(draggingEvent) {
    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);
    this.lastDraggingEvent = draggingEvent;
    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
    if (managedDrag) {
      this.doManagedDrag(draggingEvent, pixel);
    }
    this.autoScrollService.check(draggingEvent.event);
  };
  RowDragFeature2.prototype.doManagedDrag = function(draggingEvent, pixel) {
    var isFromThisGrid = this.isFromThisGrid(draggingEvent);
    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
    var rowNodes = draggingEvent.dragItem.rowNodes;
    if (managedDrag && this.shouldPreventRowMove()) {
      return;
    }
    if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {
      if (!this.isDropZoneWithinThisGrid(draggingEvent)) {
        this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);
      }
    } else {
      this.moveRows(rowNodes, pixel);
    }
  };
  RowDragFeature2.prototype.getRowIndexNumber = function(rowNode) {
    return parseInt(last(rowNode.getRowIndexString().split("-")), 10);
  };
  RowDragFeature2.prototype.moveRowAndClearHighlight = function(draggingEvent) {
    var _this = this;
    var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();
    var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === RowHighlightPosition.Below;
    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
    var rowNodes = draggingEvent.dragItem.rowNodes;
    var increment = isBelow ? 1 : 0;
    if (this.isFromThisGrid(draggingEvent)) {
      rowNodes.forEach(function(rowNode) {
        if (rowNode.rowTop < pixel) {
          increment -= 1;
        }
      });
      this.moveRows(rowNodes, pixel, increment);
    } else {
      var getRowIdFunc_1 = this.gridOptionsWrapper.getRowIdFunc();
      var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;
      if (this.clientSideRowModel.getHighlightPosition(pixel) === RowHighlightPosition.Above) {
        addIndex--;
      }
      this.clientSideRowModel.updateRowData({
        add: rowNodes.map(function(node) {
          return node.data;
        }).filter(function(data) {
          return !_this.clientSideRowModel.getRowNode(getRowIdFunc_1 ? getRowIdFunc_1({ data, level: 0 }) : data.id);
        }),
        addIndex
      });
    }
    this.clearRowHighlight();
  };
  RowDragFeature2.prototype.clearRowHighlight = function() {
    this.clientSideRowModel.highlightRowAtPixel(null);
  };
  RowDragFeature2.prototype.moveRows = function(rowNodes, pixel, increment) {
    if (increment === void 0) {
      increment = 0;
    }
    var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);
    if (rowWasMoved) {
      this.focusService.clearFocusedCell();
      if (this.rangeService) {
        this.rangeService.removeAllCellRanges();
      }
    }
  };
  RowDragFeature2.prototype.addRowDropZone = function(params) {
    var _this = this;
    if (!params.getContainer()) {
      doOnce(function() {
        return console.warn("AG Grid: addRowDropZone - A container target needs to be provided");
      }, "add-drop-zone-empty-target");
      return;
    }
    if (this.dragAndDropService.findExternalZone(params)) {
      console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");
      return;
    }
    var processedParams = {
      getContainer: params.getContainer
    };
    if (params.fromGrid) {
      params.fromGrid = void 0;
      processedParams = params;
    } else {
      if (params.onDragEnter) {
        processedParams.onDragEnter = function(e2) {
          params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e2));
        };
      }
      if (params.onDragLeave) {
        processedParams.onDragLeave = function(e2) {
          params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e2));
        };
      }
      if (params.onDragging) {
        processedParams.onDragging = function(e2) {
          params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e2));
        };
      }
      if (params.onDragStop) {
        processedParams.onDragStop = function(e2) {
          params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e2));
        };
      }
    }
    this.dragAndDropService.addDropTarget(__assign$5({ isInterestedIn: function(type) {
      return type === DragSourceType.RowDrag;
    }, getIconName: function() {
      return DragAndDropService.ICON_MOVE;
    }, external: true }, processedParams));
  };
  RowDragFeature2.prototype.getRowDropZone = function(events) {
    var _this = this;
    var getContainer = this.getContainer.bind(this);
    var onDragEnter = this.onDragEnter.bind(this);
    var onDragLeave = this.onDragLeave.bind(this);
    var onDragging = this.onDragging.bind(this);
    var onDragStop = this.onDragStop.bind(this);
    if (!events) {
      return { getContainer, onDragEnter, onDragLeave, onDragging, onDragStop, fromGrid: true };
    }
    return {
      getContainer,
      onDragEnter: events.onDragEnter ? function(e2) {
        onDragEnter(e2);
        events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e2));
      } : onDragEnter,
      onDragLeave: events.onDragLeave ? function(e2) {
        onDragLeave(e2);
        events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e2));
      } : onDragLeave,
      onDragging: events.onDragging ? function(e2) {
        onDragging(e2);
        events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e2));
      } : onDragging,
      onDragStop: events.onDragStop ? function(e2) {
        onDragStop(e2);
        events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e2));
      } : onDragStop,
      fromGrid: true
    };
  };
  RowDragFeature2.prototype.draggingToRowDragEvent = function(type, draggingEvent) {
    var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
    var mouseIsPastLastRow = yNormalised > this.paginationProxy.getCurrentPageHeight();
    var overIndex = -1;
    var overNode;
    if (!mouseIsPastLastRow) {
      overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);
      overNode = this.rowModel.getRow(overIndex);
    }
    var vDirectionString;
    switch (draggingEvent.vDirection) {
      case VerticalDirection.Down:
        vDirectionString = "down";
        break;
      case VerticalDirection.Up:
        vDirectionString = "up";
        break;
      default:
        vDirectionString = null;
        break;
    }
    var event = {
      type,
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext(),
      event: draggingEvent.event,
      node: draggingEvent.dragItem.rowNode,
      nodes: draggingEvent.dragItem.rowNodes,
      overIndex,
      overNode,
      y: yNormalised,
      vDirection: vDirectionString
    };
    return event;
  };
  RowDragFeature2.prototype.dispatchGridEvent = function(type, draggingEvent) {
    var event = this.draggingToRowDragEvent(type, draggingEvent);
    this.eventService.dispatchEvent(event);
  };
  RowDragFeature2.prototype.onDragLeave = function(draggingEvent) {
    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);
    this.stopDragging(draggingEvent);
    if (this.gridOptionsWrapper.isRowDragManaged()) {
      this.clearRowHighlight();
    }
    if (this.isFromThisGrid(draggingEvent)) {
      this.isMultiRowDrag = false;
    }
  };
  RowDragFeature2.prototype.onDragStop = function(draggingEvent) {
    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);
    this.stopDragging(draggingEvent);
    if (this.gridOptionsWrapper.isRowDragManaged() && (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) && !this.isDropZoneWithinThisGrid(draggingEvent)) {
      this.moveRowAndClearHighlight(draggingEvent);
    }
  };
  RowDragFeature2.prototype.stopDragging = function(draggingEvent) {
    this.autoScrollService.ensureCleared();
    this.getRowNodes(draggingEvent).forEach(function(rowNode) {
      rowNode.setDragging(false);
    });
  };
  __decorate$1Q([
    Autowired("dragAndDropService")
  ], RowDragFeature2.prototype, "dragAndDropService", void 0);
  __decorate$1Q([
    Autowired("rowModel")
  ], RowDragFeature2.prototype, "rowModel", void 0);
  __decorate$1Q([
    Autowired("paginationProxy")
  ], RowDragFeature2.prototype, "paginationProxy", void 0);
  __decorate$1Q([
    Autowired("columnModel")
  ], RowDragFeature2.prototype, "columnModel", void 0);
  __decorate$1Q([
    Autowired("focusService")
  ], RowDragFeature2.prototype, "focusService", void 0);
  __decorate$1Q([
    Autowired("sortController")
  ], RowDragFeature2.prototype, "sortController", void 0);
  __decorate$1Q([
    Autowired("filterManager")
  ], RowDragFeature2.prototype, "filterManager", void 0);
  __decorate$1Q([
    Autowired("selectionService")
  ], RowDragFeature2.prototype, "selectionService", void 0);
  __decorate$1Q([
    Autowired("mouseEventService")
  ], RowDragFeature2.prototype, "mouseEventService", void 0);
  __decorate$1Q([
    Autowired("ctrlsService")
  ], RowDragFeature2.prototype, "ctrlsService", void 0);
  __decorate$1Q([
    Optional("rangeService")
  ], RowDragFeature2.prototype, "rangeService", void 0);
  __decorate$1Q([
    PostConstruct
  ], RowDragFeature2.prototype, "postConstruct", null);
  return RowDragFeature2;
}(BeanStub);
var __extends$20 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1P = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowAnimationCssClasses;
(function(RowAnimationCssClasses2) {
  RowAnimationCssClasses2["ANIMATION_ON"] = "ag-row-animation";
  RowAnimationCssClasses2["ANIMATION_OFF"] = "ag-row-no-animation";
})(RowAnimationCssClasses || (RowAnimationCssClasses = {}));
var CSS_CLASS_CELL_SELECTABLE = "ag-selectable";
var CSS_CLASS_FORCE_VERTICAL_SCROLL = "ag-force-vertical-scroll";
var CSS_CLASS_COLUMN_MOVING = "ag-column-moving";
var GridBodyCtrl = function(_super) {
  __extends$20(GridBodyCtrl2, _super);
  function GridBodyCtrl2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.stickyTopHeight = 0;
    return _this;
  }
  GridBodyCtrl2.prototype.getScrollFeature = function() {
    return this.bodyScrollFeature;
  };
  GridBodyCtrl2.prototype.getBodyViewportElement = function() {
    return this.eBodyViewport;
  };
  GridBodyCtrl2.prototype.setComp = function(comp, eGridBody, eBodyViewport, eTop, eBottom, eStickyTop) {
    this.comp = comp;
    this.eGridBody = eGridBody;
    this.eBodyViewport = eBodyViewport;
    this.eTop = eTop;
    this.eBottom = eBottom;
    this.eStickyTop = eStickyTop;
    this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect());
    this.createManagedBean(new LayoutFeature(this.comp));
    this.bodyScrollFeature = this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport));
    this.addRowDragListener();
    this.setupRowAnimationCssClass();
    this.addEventListeners();
    this.addFocusListeners([eTop, eBodyViewport, eBottom, eStickyTop]);
    this.onGridColumnsChanged();
    this.addBodyViewportListener();
    this.setFloatingHeights();
    this.disableBrowserDragging();
    this.addStopEditingWhenGridLosesFocus();
    this.ctrlsService.registerGridBodyCtrl(this);
  };
  GridBodyCtrl2.prototype.getComp = function() {
    return this.comp;
  };
  GridBodyCtrl2.prototype.addEventListeners = function() {
    this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, this.onScrollVisibilityChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_PINNED_ROW_DATA_CHANGED, this.onPinnedRowDataChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_HEADER_HEIGHT_CHANGED, this.onHeaderHeightChanged.bind(this));
  };
  GridBodyCtrl2.prototype.addFocusListeners = function(elements) {
    var _this = this;
    elements.forEach(function(element) {
      _this.addManagedListener(element, "focusin", function(e2) {
        var target = e2.target;
        var isFocusedElementNested = isElementChildOfClass(target, "ag-root", element);
        element.classList.toggle("ag-has-focus", !isFocusedElementNested);
      });
      _this.addManagedListener(element, "focusout", function(e2) {
        var target = e2.target, relatedTarget = e2.relatedTarget;
        var gridContainRelatedTarget = element.contains(relatedTarget);
        var isNestedRelatedTarget = isElementChildOfClass(relatedTarget, "ag-root", element);
        var isNestedTarget = isElementChildOfClass(target, "ag-root", element);
        if (isNestedTarget) {
          return;
        }
        if (!gridContainRelatedTarget || isNestedRelatedTarget) {
          element.classList.remove("ag-has-focus");
        }
      });
    });
  };
  GridBodyCtrl2.prototype.setColumnMovingCss = function(moving) {
    this.comp.setColumnMovingCss(moving ? CSS_CLASS_COLUMN_MOVING : null, moving);
  };
  GridBodyCtrl2.prototype.setCellTextSelection = function(selectable) {
    if (selectable === void 0) {
      selectable = false;
    }
    var cssClass = selectable ? CSS_CLASS_CELL_SELECTABLE : null;
    this.comp.setCellSelectableCss(cssClass, selectable);
  };
  GridBodyCtrl2.prototype.onScrollVisibilityChanged = function() {
    var visible = this.scrollVisibleService.isVerticalScrollShowing();
    this.setVerticalScrollPaddingVisible(visible);
    this.setStickyTopWidth(visible);
  };
  GridBodyCtrl2.prototype.onGridColumnsChanged = function() {
    var columns = this.columnModel.getAllGridColumns();
    this.comp.setColumnCount(columns ? columns.length : 0);
  };
  GridBodyCtrl2.prototype.disableBrowserDragging = function() {
    this.addManagedListener(this.eGridBody, "dragstart", function(event) {
      if (event.target instanceof HTMLImageElement) {
        event.preventDefault();
        return false;
      }
    });
  };
  GridBodyCtrl2.prototype.addStopEditingWhenGridLosesFocus = function() {
    var _this = this;
    if (!this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()) {
      return;
    }
    var focusOutListener = function(event) {
      var elementWithFocus = event.relatedTarget;
      if (getTabIndex(elementWithFocus) === null) {
        _this.rowRenderer.stopEditing();
        return;
      }
      var clickInsideGrid = viewports.some(function(viewport) {
        return viewport.contains(elementWithFocus);
      }) && _this.mouseEventService.isElementInThisGrid(elementWithFocus);
      if (!clickInsideGrid) {
        var popupService = _this.popupService;
        clickInsideGrid = popupService.getActivePopups().some(function(popup) {
          return popup.contains(elementWithFocus);
        }) || popupService.isElementWithinCustomPopup(elementWithFocus);
      }
      if (!clickInsideGrid) {
        _this.rowRenderer.stopEditing();
      }
    };
    var viewports = [this.eBodyViewport, this.eBottom, this.eTop, this.eStickyTop];
    viewports.forEach(function(viewport) {
      return _this.addManagedListener(viewport, "focusout", focusOutListener);
    });
  };
  GridBodyCtrl2.prototype.updateRowCount = function() {
    var headerCount = this.headerNavigationService.getHeaderRowCount();
    var rowCount = this.rowModel.isLastRowIndexKnown() ? this.rowModel.getRowCount() : -1;
    var total = rowCount === -1 ? -1 : headerCount + rowCount;
    this.comp.setRowCount(total);
  };
  GridBodyCtrl2.prototype.registerBodyViewportResizeListener = function(listener) {
    this.comp.registerBodyViewportResizeListener(listener);
  };
  GridBodyCtrl2.prototype.setVerticalScrollPaddingVisible = function(visible) {
    var overflowY = visible ? "scroll" : "hidden";
    this.comp.setPinnedTopBottomOverflowY(overflowY);
  };
  GridBodyCtrl2.prototype.isVerticalScrollShowing = function() {
    var show = this.gridOptionsWrapper.isAlwaysShowVerticalScroll();
    var cssClass = show ? CSS_CLASS_FORCE_VERTICAL_SCROLL : null;
    var allowVerticalScroll = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
    this.comp.setAlwaysVerticalScrollClass(cssClass, show);
    return show || allowVerticalScroll && isVerticalScrollShowing(this.eBodyViewport);
  };
  GridBodyCtrl2.prototype.setupRowAnimationCssClass = function() {
    var _this = this;
    var listener = function() {
      var animateRows = _this.gridOptionsWrapper.isAnimateRows() && !_this.rowContainerHeightService.isStretching();
      var animateRowsCssClass = animateRows ? RowAnimationCssClasses.ANIMATION_ON : RowAnimationCssClasses.ANIMATION_OFF;
      _this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass, animateRows);
    };
    listener();
    this.addManagedListener(this.eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, listener);
  };
  GridBodyCtrl2.prototype.getGridBodyElement = function() {
    return this.eGridBody;
  };
  GridBodyCtrl2.prototype.addBodyViewportListener = function() {
    var _this = this;
    var listener = function(mouseEvent) {
      if (_this.gridOptionsWrapper.isPreventDefaultOnContextMenu()) {
        mouseEvent.preventDefault();
      }
      var target = mouseEvent.target;
      if (target === _this.eBodyViewport || target === _this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()) {
        if (_this.contextMenuFactory) {
          _this.contextMenuFactory.onContextMenu(mouseEvent, null, null, null, null, _this.eGridBody);
        }
      }
    };
    this.addManagedListener(this.eBodyViewport, "contextmenu", listener);
    this.addManagedListener(this.eBodyViewport, "wheel", this.onBodyViewportWheel.bind(this));
    this.addManagedListener(this.eStickyTop, "wheel", this.onStickyTopWheel.bind(this));
  };
  GridBodyCtrl2.prototype.onBodyViewportWheel = function(e2) {
    if (!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()) {
      return;
    }
    if (this.popupService.hasAnchoredPopup()) {
      e2.preventDefault();
    }
  };
  GridBodyCtrl2.prototype.onStickyTopWheel = function(e2) {
    e2.preventDefault();
    if (e2.offsetY) {
      this.scrollVertically(e2.deltaY);
    }
  };
  GridBodyCtrl2.prototype.getGui = function() {
    return this.eGridBody;
  };
  GridBodyCtrl2.prototype.scrollVertically = function(pixels) {
    var oldScrollPosition = this.eBodyViewport.scrollTop;
    this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition + pixels);
    return this.eBodyViewport.scrollTop - oldScrollPosition;
  };
  GridBodyCtrl2.prototype.addRowDragListener = function() {
    this.rowDragFeature = this.createManagedBean(new RowDragFeature(this.eBodyViewport));
    this.dragAndDropService.addDropTarget(this.rowDragFeature);
  };
  GridBodyCtrl2.prototype.getRowDragFeature = function() {
    return this.rowDragFeature;
  };
  GridBodyCtrl2.prototype.onPinnedRowDataChanged = function() {
    this.setFloatingHeights();
  };
  GridBodyCtrl2.prototype.setFloatingHeights = function() {
    var pinnedRowModel = this.pinnedRowModel;
    var floatingTopHeight = pinnedRowModel.getPinnedTopTotalHeight();
    if (floatingTopHeight) {
      floatingTopHeight += 1;
    }
    var floatingBottomHeight = pinnedRowModel.getPinnedBottomTotalHeight();
    if (floatingBottomHeight) {
      floatingBottomHeight += 1;
    }
    this.comp.setTopHeight(floatingTopHeight);
    this.comp.setBottomHeight(floatingBottomHeight);
    this.comp.setTopDisplay(floatingTopHeight ? "inherit" : "none");
    this.comp.setBottomDisplay(floatingBottomHeight ? "inherit" : "none");
    this.setStickyTopOffsetTop();
  };
  GridBodyCtrl2.prototype.setStickyTopHeight = function(height) {
    if (height === void 0) {
      height = 0;
    }
    this.comp.setStickyTopHeight(height + "px");
    this.stickyTopHeight = height;
  };
  GridBodyCtrl2.prototype.getStickyTopHeight = function() {
    return this.stickyTopHeight;
  };
  GridBodyCtrl2.prototype.setStickyTopWidth = function(vScrollVisible) {
    if (!vScrollVisible) {
      this.comp.setStickyTopWidth("100%");
    } else {
      var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
      this.comp.setStickyTopWidth("calc(100% - " + scrollbarWidth + "px)");
    }
  };
  GridBodyCtrl2.prototype.onHeaderHeightChanged = function() {
    this.setStickyTopOffsetTop();
  };
  GridBodyCtrl2.prototype.setStickyTopOffsetTop = function() {
    var headerCtrl = this.ctrlsService.getGridHeaderCtrl();
    var headerHeight = headerCtrl.getHeaderHeight();
    var pinnedTopHeight = this.pinnedRowModel.getPinnedTopTotalHeight();
    var height = 0;
    if (headerHeight > 0) {
      height += headerHeight + 1;
    }
    if (pinnedTopHeight > 0) {
      height += pinnedTopHeight + 1;
    }
    this.comp.setStickyTopTop(height + "px");
  };
  GridBodyCtrl2.prototype.sizeColumnsToFit = function(params, nextTimeout) {
    var _this = this;
    var removeScrollWidth = this.isVerticalScrollShowing();
    var scrollWidthToRemove = removeScrollWidth ? this.gridOptionsWrapper.getScrollbarWidth() : 0;
    var bodyViewportWidth = getInnerWidth(this.eBodyViewport);
    var availableWidth = bodyViewportWidth - scrollWidthToRemove;
    if (availableWidth > 0) {
      this.columnModel.sizeColumnsToFit(availableWidth, "sizeColumnsToFit", false, params);
      return;
    }
    if (nextTimeout === void 0) {
      window.setTimeout(function() {
        _this.sizeColumnsToFit(params, 100);
      }, 0);
    } else if (nextTimeout === 100) {
      window.setTimeout(function() {
        _this.sizeColumnsToFit(params, 500);
      }, 100);
    } else if (nextTimeout === 500) {
      window.setTimeout(function() {
        _this.sizeColumnsToFit(params, -1);
      }, 500);
    } else {
      console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?");
    }
  };
  GridBodyCtrl2.prototype.addScrollEventListener = function(listener) {
    this.eBodyViewport.addEventListener("scroll", listener);
  };
  GridBodyCtrl2.prototype.removeScrollEventListener = function(listener) {
    this.eBodyViewport.removeEventListener("scroll", listener);
  };
  __decorate$1P([
    Autowired("rowContainerHeightService")
  ], GridBodyCtrl2.prototype, "rowContainerHeightService", void 0);
  __decorate$1P([
    Autowired("ctrlsService")
  ], GridBodyCtrl2.prototype, "ctrlsService", void 0);
  __decorate$1P([
    Autowired("columnModel")
  ], GridBodyCtrl2.prototype, "columnModel", void 0);
  __decorate$1P([
    Autowired("scrollVisibleService")
  ], GridBodyCtrl2.prototype, "scrollVisibleService", void 0);
  __decorate$1P([
    Optional("contextMenuFactory")
  ], GridBodyCtrl2.prototype, "contextMenuFactory", void 0);
  __decorate$1P([
    Autowired("headerNavigationService")
  ], GridBodyCtrl2.prototype, "headerNavigationService", void 0);
  __decorate$1P([
    Autowired("dragAndDropService")
  ], GridBodyCtrl2.prototype, "dragAndDropService", void 0);
  __decorate$1P([
    Autowired("pinnedRowModel")
  ], GridBodyCtrl2.prototype, "pinnedRowModel", void 0);
  __decorate$1P([
    Autowired("rowRenderer")
  ], GridBodyCtrl2.prototype, "rowRenderer", void 0);
  __decorate$1P([
    Autowired("popupService")
  ], GridBodyCtrl2.prototype, "popupService", void 0);
  __decorate$1P([
    Autowired("mouseEventService")
  ], GridBodyCtrl2.prototype, "mouseEventService", void 0);
  __decorate$1P([
    Autowired("rowModel")
  ], GridBodyCtrl2.prototype, "rowModel", void 0);
  return GridBodyCtrl2;
}(BeanStub);
var SelectionHandleType;
(function(SelectionHandleType2) {
  SelectionHandleType2[SelectionHandleType2["FILL"] = 0] = "FILL";
  SelectionHandleType2[SelectionHandleType2["RANGE"] = 1] = "RANGE";
})(SelectionHandleType || (SelectionHandleType = {}));
var CellRangeType;
(function(CellRangeType2) {
  CellRangeType2[CellRangeType2["VALUE"] = 0] = "VALUE";
  CellRangeType2[CellRangeType2["DIMENSION"] = 1] = "DIMENSION";
})(CellRangeType || (CellRangeType = {}));
var CSS_CELL_RANGE_SELECTED = "ag-cell-range-selected";
var CSS_CELL_RANGE_CHART = "ag-cell-range-chart";
var CSS_CELL_RANGE_SINGLE_CELL = "ag-cell-range-single-cell";
var CSS_CELL_RANGE_CHART_CATEGORY = "ag-cell-range-chart-category";
var CSS_CELL_RANGE_HANDLE = "ag-cell-range-handle";
var CSS_CELL_RANGE_TOP = "ag-cell-range-top";
var CSS_CELL_RANGE_RIGHT = "ag-cell-range-right";
var CSS_CELL_RANGE_BOTTOM = "ag-cell-range-bottom";
var CSS_CELL_RANGE_LEFT = "ag-cell-range-left";
var CellRangeFeature = function() {
  function CellRangeFeature2(beans, ctrl) {
    this.beans = beans;
    this.cellCtrl = ctrl;
  }
  CellRangeFeature2.prototype.setComp = function(cellComp, eGui) {
    this.cellComp = cellComp;
    this.eGui = eGui;
    this.onRangeSelectionChanged();
  };
  CellRangeFeature2.prototype.onRangeSelectionChanged = function() {
    if (!this.cellComp) {
      return;
    }
    this.rangeCount = this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition());
    this.hasChartRange = this.getHasChartRange();
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED, this.rangeCount !== 0);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-1", this.rangeCount === 1);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-2", this.rangeCount === 2);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-3", this.rangeCount === 3);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-4", this.rangeCount >= 4);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART, this.hasChartRange);
    setAriaSelected(this.eGui, this.rangeCount > 0 ? true : void 0);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SINGLE_CELL, this.isSingleCell());
    this.updateRangeBorders();
    this.refreshHandle();
  };
  CellRangeFeature2.prototype.updateRangeBorders = function() {
    var rangeBorders = this.getRangeBorders();
    var isSingleCell = this.isSingleCell();
    var isTop = !isSingleCell && rangeBorders.top;
    var isRight = !isSingleCell && rangeBorders.right;
    var isBottom = !isSingleCell && rangeBorders.bottom;
    var isLeft = !isSingleCell && rangeBorders.left;
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_TOP, isTop);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_RIGHT, isRight);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_BOTTOM, isBottom);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_LEFT, isLeft);
  };
  CellRangeFeature2.prototype.isSingleCell = function() {
    var rangeService = this.beans.rangeService;
    return this.rangeCount === 1 && rangeService && !rangeService.isMoreThanOneCell();
  };
  CellRangeFeature2.prototype.getHasChartRange = function() {
    var rangeService = this.beans.rangeService;
    if (!this.rangeCount || !rangeService) {
      return false;
    }
    var cellRanges = rangeService.getCellRanges();
    return cellRanges.length > 0 && cellRanges.every(function(range) {
      return includes([CellRangeType.DIMENSION, CellRangeType.VALUE], range.type);
    });
  };
  CellRangeFeature2.prototype.updateRangeBordersIfRangeCount = function() {
    if (this.rangeCount > 0) {
      this.updateRangeBorders();
      this.refreshHandle();
    }
  };
  CellRangeFeature2.prototype.getRangeBorders = function() {
    var _this = this;
    var isRtl = this.beans.gridOptionsWrapper.isEnableRtl();
    var top = false;
    var right = false;
    var bottom = false;
    var left = false;
    var thisCol = this.cellCtrl.getCellPosition().column;
    var _a2 = this.beans, rangeService = _a2.rangeService, columnModel = _a2.columnModel;
    var leftCol;
    var rightCol;
    if (isRtl) {
      leftCol = columnModel.getDisplayedColAfter(thisCol);
      rightCol = columnModel.getDisplayedColBefore(thisCol);
    } else {
      leftCol = columnModel.getDisplayedColBefore(thisCol);
      rightCol = columnModel.getDisplayedColAfter(thisCol);
    }
    var ranges = rangeService.getCellRanges().filter(function(range2) {
      return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(), range2);
    });
    if (!leftCol) {
      left = true;
    }
    if (!rightCol) {
      right = true;
    }
    for (var i2 = 0; i2 < ranges.length; i2++) {
      if (top && right && bottom && left) {
        break;
      }
      var range = ranges[i2];
      var startRow = rangeService.getRangeStartRow(range);
      var endRow = rangeService.getRangeEndRow(range);
      if (!top && this.beans.rowPositionUtils.sameRow(startRow, this.cellCtrl.getCellPosition())) {
        top = true;
      }
      if (!bottom && this.beans.rowPositionUtils.sameRow(endRow, this.cellCtrl.getCellPosition())) {
        bottom = true;
      }
      if (!left && leftCol && range.columns.indexOf(leftCol) < 0) {
        left = true;
      }
      if (!right && rightCol && range.columns.indexOf(rightCol) < 0) {
        right = true;
      }
    }
    return { top, right, bottom, left };
  };
  CellRangeFeature2.prototype.refreshHandle = function() {
    if (!this.beans.rangeService) {
      return;
    }
    var shouldHaveSelectionHandle = this.shouldHaveSelectionHandle();
    if (this.selectionHandle && !shouldHaveSelectionHandle) {
      this.selectionHandle = this.beans.context.destroyBean(this.selectionHandle);
    }
    if (shouldHaveSelectionHandle) {
      this.addSelectionHandle();
    }
    this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_HANDLE, !!this.selectionHandle);
  };
  CellRangeFeature2.prototype.shouldHaveSelectionHandle = function() {
    var _a2 = this.beans, gridOptionsWrapper = _a2.gridOptionsWrapper, rangeService = _a2.rangeService;
    var cellRanges = rangeService.getCellRanges();
    var rangesLen = cellRanges.length;
    if (this.rangeCount < 1 || rangesLen < 1) {
      return false;
    }
    var cellRange = last(cellRanges);
    var cellPosition = this.cellCtrl.getCellPosition();
    var isFillHandleAvailable = gridOptionsWrapper.isEnableFillHandle() && !this.cellCtrl.isSuppressFillHandle();
    var isRangeHandleAvailable = gridOptionsWrapper.isEnableRangeHandle();
    var handleIsAvailable = rangesLen === 1 && !this.cellCtrl.isEditing() && (isFillHandleAvailable || isRangeHandleAvailable);
    if (this.hasChartRange) {
      var hasCategoryRange = cellRanges[0].type === CellRangeType.DIMENSION;
      var isCategoryCell = hasCategoryRange && rangeService.isCellInSpecificRange(cellPosition, cellRanges[0]);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART_CATEGORY, isCategoryCell);
      handleIsAvailable = cellRange.type === CellRangeType.VALUE;
    }
    return handleIsAvailable && cellRange.endRow != null && rangeService.isContiguousRange(cellRange) && rangeService.isBottomRightCell(cellRange, cellPosition);
  };
  CellRangeFeature2.prototype.addSelectionHandle = function() {
    var _a2 = this.beans, gridOptionsWrapper = _a2.gridOptionsWrapper, rangeService = _a2.rangeService;
    var cellRangeType = last(rangeService.getCellRanges()).type;
    var selectionHandleFill = gridOptionsWrapper.isEnableFillHandle() && missing(cellRangeType);
    var type = selectionHandleFill ? SelectionHandleType.FILL : SelectionHandleType.RANGE;
    if (this.selectionHandle && this.selectionHandle.getType() !== type) {
      this.selectionHandle = this.beans.context.destroyBean(this.selectionHandle);
    }
    if (!this.selectionHandle) {
      this.selectionHandle = this.beans.selectionHandleFactory.createSelectionHandle(type);
    }
    this.selectionHandle.refresh(this.cellCtrl);
  };
  CellRangeFeature2.prototype.destroy = function() {
    this.beans.context.destroyBean(this.selectionHandle);
  };
  return CellRangeFeature2;
}();
var __extends$1$ = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var CellPositionFeature = function(_super) {
  __extends$1$(CellPositionFeature2, _super);
  function CellPositionFeature2(ctrl, beans) {
    var _this = _super.call(this) || this;
    _this.cellCtrl = ctrl;
    _this.beans = beans;
    _this.column = ctrl.getColumn();
    _this.rowNode = ctrl.getRowNode();
    _this.setupColSpan();
    _this.setupRowSpan();
    return _this;
  }
  CellPositionFeature2.prototype.setupRowSpan = function() {
    this.rowSpan = this.column.getRowSpan(this.rowNode);
  };
  CellPositionFeature2.prototype.setComp = function(eGui) {
    this.eGui = eGui;
    this.onLeftChanged();
    this.onWidthChanged();
    this.applyRowSpan();
  };
  CellPositionFeature2.prototype.onDisplayColumnsChanged = function() {
    var colsSpanning = this.getColSpanningList();
    if (!areEqual(this.colsSpanning, colsSpanning)) {
      this.colsSpanning = colsSpanning;
      this.onWidthChanged();
      this.onLeftChanged();
    }
  };
  CellPositionFeature2.prototype.setupColSpan = function() {
    if (this.column.getColDef().colSpan == null) {
      return;
    }
    this.colsSpanning = this.getColSpanningList();
    this.addManagedListener(this.beans.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayColumnsChanged.bind(this));
    this.addManagedListener(this.beans.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onWidthChanged.bind(this));
  };
  CellPositionFeature2.prototype.onWidthChanged = function() {
    if (!this.eGui) {
      return;
    }
    var width = this.getCellWidth();
    this.eGui.style.width = width + "px";
  };
  CellPositionFeature2.prototype.getCellWidth = function() {
    if (!this.colsSpanning) {
      return this.column.getActualWidth();
    }
    return this.colsSpanning.reduce(function(width, col) {
      return width + col.getActualWidth();
    }, 0);
  };
  CellPositionFeature2.prototype.getColSpanningList = function() {
    var colSpan = this.column.getColSpan(this.rowNode);
    var colsSpanning = [];
    if (colSpan === 1) {
      colsSpanning.push(this.column);
    } else {
      var pointer = this.column;
      var pinned = this.column.getPinned();
      for (var i2 = 0; pointer && i2 < colSpan; i2++) {
        colsSpanning.push(pointer);
        pointer = this.beans.columnModel.getDisplayedColAfter(pointer);
        if (!pointer || missing(pointer)) {
          break;
        }
        if (pinned !== pointer.getPinned()) {
          break;
        }
      }
    }
    return colsSpanning;
  };
  CellPositionFeature2.prototype.onLeftChanged = function() {
    if (!this.eGui) {
      return;
    }
    var left = this.modifyLeftForPrintLayout(this.getCellLeft());
    this.eGui.style.left = left + "px";
  };
  CellPositionFeature2.prototype.getCellLeft = function() {
    var mostLeftCol;
    if (this.beans.gridOptionsWrapper.isEnableRtl() && this.colsSpanning) {
      mostLeftCol = last(this.colsSpanning);
    } else {
      mostLeftCol = this.column;
    }
    return mostLeftCol.getLeft();
  };
  CellPositionFeature2.prototype.modifyLeftForPrintLayout = function(leftPosition) {
    if (!this.cellCtrl.isPrintLayout() || this.column.getPinned() === Constants.PINNED_LEFT) {
      return leftPosition;
    }
    var leftWidth = this.beans.columnModel.getDisplayedColumnsLeftWidth();
    if (this.column.getPinned() === Constants.PINNED_RIGHT) {
      var bodyWidth = this.beans.columnModel.getBodyContainerWidth();
      return leftWidth + bodyWidth + (leftPosition || 0);
    }
    return leftWidth + (leftPosition || 0);
  };
  CellPositionFeature2.prototype.applyRowSpan = function() {
    if (this.rowSpan === 1) {
      return;
    }
    var singleRowHeight = this.beans.gridOptionsWrapper.getRowHeightAsNumber();
    var totalRowHeight = singleRowHeight * this.rowSpan;
    this.eGui.style.height = totalRowHeight + "px";
    this.eGui.style.zIndex = "1";
  };
  CellPositionFeature2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  return CellPositionFeature2;
}(BeanStub);
var __extends$1_ = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var CellCustomStyleFeature = function(_super) {
  __extends$1_(CellCustomStyleFeature2, _super);
  function CellCustomStyleFeature2(ctrl, beans) {
    var _this = _super.call(this) || this;
    _this.staticClasses = [];
    _this.cellCtrl = ctrl;
    _this.beans = beans;
    _this.column = ctrl.getColumn();
    _this.rowNode = ctrl.getRowNode();
    return _this;
  }
  CellCustomStyleFeature2.prototype.setComp = function(comp) {
    this.cellComp = comp;
    this.applyUserStyles();
    this.applyCellClassRules();
    this.applyClassesFromColDef();
  };
  CellCustomStyleFeature2.prototype.applyCellClassRules = function() {
    var _this = this;
    var colDef = this.column.getColDef();
    var cellClassParams = {
      value: this.cellCtrl.getValue(),
      data: this.rowNode.data,
      node: this.rowNode,
      colDef,
      column: this.column,
      rowIndex: this.rowNode.rowIndex,
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext()
    };
    this.beans.stylingService.processClassRules(colDef.cellClassRules, cellClassParams, function(className) {
      return _this.cellComp.addOrRemoveCssClass(className, true);
    }, function(className) {
      return _this.cellComp.addOrRemoveCssClass(className, false);
    });
  };
  CellCustomStyleFeature2.prototype.applyUserStyles = function() {
    var colDef = this.column.getColDef();
    if (!colDef.cellStyle) {
      return;
    }
    var styles;
    if (typeof colDef.cellStyle === "function") {
      var cellStyleParams = {
        column: this.column,
        value: this.cellCtrl.getValue(),
        colDef,
        data: this.rowNode.data,
        node: this.rowNode,
        rowIndex: this.rowNode.rowIndex,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext()
      };
      var cellStyleFunc = colDef.cellStyle;
      styles = cellStyleFunc(cellStyleParams);
    } else {
      styles = colDef.cellStyle;
    }
    this.cellComp.setUserStyles(styles);
  };
  CellCustomStyleFeature2.prototype.applyClassesFromColDef = function() {
    var _this = this;
    var colDef = this.column.getColDef();
    var cellClassParams = {
      value: this.cellCtrl.getValue(),
      data: this.rowNode.data,
      node: this.rowNode,
      column: this.column,
      colDef,
      rowIndex: this.rowNode.rowIndex,
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext()
    };
    if (this.staticClasses.length) {
      this.staticClasses.forEach(function(className) {
        return _this.cellComp.addOrRemoveCssClass(className, false);
      });
    }
    this.staticClasses = this.beans.stylingService.getStaticCellClasses(colDef, cellClassParams);
    if (this.staticClasses.length) {
      this.staticClasses.forEach(function(className) {
        return _this.cellComp.addOrRemoveCssClass(className, true);
      });
    }
  };
  CellCustomStyleFeature2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  return CellCustomStyleFeature2;
}(BeanStub);
var __extends$1Z = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var TooltipFeature = function(_super) {
  __extends$1Z(TooltipFeature2, _super);
  function TooltipFeature2(ctrl, beans) {
    var _this = _super.call(this) || this;
    _this.ctrl = ctrl;
    _this.beans = beans;
    return _this;
  }
  TooltipFeature2.prototype.setComp = function(comp) {
    this.comp = comp;
    this.setupTooltip();
  };
  TooltipFeature2.prototype.setupTooltip = function() {
    this.browserTooltips = this.beans.gridOptionsWrapper.isEnableBrowserTooltips();
    this.updateTooltipText();
    if (this.browserTooltips) {
      this.comp.setTitle(this.tooltip != null ? this.tooltip : void 0);
    } else {
      this.createTooltipFeatureIfNeeded();
    }
  };
  TooltipFeature2.prototype.updateTooltipText = function() {
    this.tooltip = this.ctrl.getTooltipValue();
  };
  TooltipFeature2.prototype.createTooltipFeatureIfNeeded = function() {
    var _this = this;
    if (this.genericTooltipFeature != null) {
      return;
    }
    var parent = {
      getTooltipParams: function() {
        return _this.getTooltipParams();
      },
      getGui: function() {
        return _this.ctrl.getGui();
      }
    };
    this.genericTooltipFeature = this.createManagedBean(new CustomTooltipFeature(parent), this.beans.context);
  };
  TooltipFeature2.prototype.refreshToolTip = function() {
    this.updateTooltipText();
    if (this.browserTooltips) {
      this.comp.setTitle(this.tooltip != null ? this.tooltip : void 0);
    }
  };
  TooltipFeature2.prototype.getTooltipParams = function() {
    var ctrl = this.ctrl;
    var column = ctrl.getColumn ? ctrl.getColumn() : void 0;
    var colDef = ctrl.getColDef ? ctrl.getColDef() : void 0;
    var rowNode = ctrl.getRowNode ? ctrl.getRowNode() : void 0;
    return {
      location: ctrl.getLocation(),
      colDef,
      column,
      rowIndex: ctrl.getRowIndex ? ctrl.getRowIndex() : void 0,
      node: rowNode,
      data: rowNode ? rowNode.data : void 0,
      value: this.getTooltipText(),
      valueFormatted: ctrl.getValueFormatted ? ctrl.getValueFormatted() : void 0
    };
  };
  TooltipFeature2.prototype.getTooltipText = function() {
    return this.tooltip;
  };
  TooltipFeature2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  return TooltipFeature2;
}(BeanStub);
var __decorate$1O = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var Beans = function() {
  function Beans2() {
  }
  Beans2.prototype.postConstruct = function() {
    this.doingMasterDetail = this.gridOptionsWrapper.isMasterDetail();
    if (this.gridOptionsWrapper.isRowModelDefault()) {
      this.clientSideRowModel = this.rowModel;
    }
    if (this.gridOptionsWrapper.isRowModelServerSide()) {
      this.serverSideRowModel = this.rowModel;
    }
  };
  __decorate$1O([
    Autowired("resizeObserverService")
  ], Beans2.prototype, "resizeObserverService", void 0);
  __decorate$1O([
    Autowired("paginationProxy")
  ], Beans2.prototype, "paginationProxy", void 0);
  __decorate$1O([
    Autowired("context")
  ], Beans2.prototype, "context", void 0);
  __decorate$1O([
    Autowired("columnApi")
  ], Beans2.prototype, "columnApi", void 0);
  __decorate$1O([
    Autowired("gridApi")
  ], Beans2.prototype, "gridApi", void 0);
  __decorate$1O([
    Autowired("gridOptionsWrapper")
  ], Beans2.prototype, "gridOptionsWrapper", void 0);
  __decorate$1O([
    Autowired("expressionService")
  ], Beans2.prototype, "expressionService", void 0);
  __decorate$1O([
    Autowired("rowRenderer")
  ], Beans2.prototype, "rowRenderer", void 0);
  __decorate$1O([
    Autowired("templateService")
  ], Beans2.prototype, "templateService", void 0);
  __decorate$1O([
    Autowired("valueService")
  ], Beans2.prototype, "valueService", void 0);
  __decorate$1O([
    Autowired("eventService")
  ], Beans2.prototype, "eventService", void 0);
  __decorate$1O([
    Autowired("columnModel")
  ], Beans2.prototype, "columnModel", void 0);
  __decorate$1O([
    Autowired("headerNavigationService")
  ], Beans2.prototype, "headerNavigationService", void 0);
  __decorate$1O([
    Autowired("navigationService")
  ], Beans2.prototype, "navigationService", void 0);
  __decorate$1O([
    Autowired("columnAnimationService")
  ], Beans2.prototype, "columnAnimationService", void 0);
  __decorate$1O([
    Optional("rangeService")
  ], Beans2.prototype, "rangeService", void 0);
  __decorate$1O([
    Autowired("focusService")
  ], Beans2.prototype, "focusService", void 0);
  __decorate$1O([
    Optional("contextMenuFactory")
  ], Beans2.prototype, "contextMenuFactory", void 0);
  __decorate$1O([
    Autowired("popupService")
  ], Beans2.prototype, "popupService", void 0);
  __decorate$1O([
    Autowired("valueFormatterService")
  ], Beans2.prototype, "valueFormatterService", void 0);
  __decorate$1O([
    Autowired("stylingService")
  ], Beans2.prototype, "stylingService", void 0);
  __decorate$1O([
    Autowired("columnHoverService")
  ], Beans2.prototype, "columnHoverService", void 0);
  __decorate$1O([
    Autowired("userComponentFactory")
  ], Beans2.prototype, "userComponentFactory", void 0);
  __decorate$1O([
    Autowired("userComponentRegistry")
  ], Beans2.prototype, "userComponentRegistry", void 0);
  __decorate$1O([
    Autowired("animationFrameService")
  ], Beans2.prototype, "animationFrameService", void 0);
  __decorate$1O([
    Autowired("dragAndDropService")
  ], Beans2.prototype, "dragAndDropService", void 0);
  __decorate$1O([
    Autowired("sortController")
  ], Beans2.prototype, "sortController", void 0);
  __decorate$1O([
    Autowired("filterManager")
  ], Beans2.prototype, "filterManager", void 0);
  __decorate$1O([
    Autowired("rowContainerHeightService")
  ], Beans2.prototype, "rowContainerHeightService", void 0);
  __decorate$1O([
    Autowired("frameworkOverrides")
  ], Beans2.prototype, "frameworkOverrides", void 0);
  __decorate$1O([
    Autowired("cellPositionUtils")
  ], Beans2.prototype, "cellPositionUtils", void 0);
  __decorate$1O([
    Autowired("rowPositionUtils")
  ], Beans2.prototype, "rowPositionUtils", void 0);
  __decorate$1O([
    Autowired("selectionService")
  ], Beans2.prototype, "selectionService", void 0);
  __decorate$1O([
    Optional("selectionHandleFactory")
  ], Beans2.prototype, "selectionHandleFactory", void 0);
  __decorate$1O([
    Autowired("rowCssClassCalculator")
  ], Beans2.prototype, "rowCssClassCalculator", void 0);
  __decorate$1O([
    Autowired("rowModel")
  ], Beans2.prototype, "rowModel", void 0);
  __decorate$1O([
    Autowired("ctrlsService")
  ], Beans2.prototype, "ctrlsService", void 0);
  __decorate$1O([
    Autowired("ctrlsFactory")
  ], Beans2.prototype, "ctrlsFactory", void 0);
  __decorate$1O([
    Autowired("agStackComponentsRegistry")
  ], Beans2.prototype, "agStackComponentsRegistry", void 0);
  __decorate$1O([
    Autowired("valueCache")
  ], Beans2.prototype, "valueCache", void 0);
  __decorate$1O([
    Autowired("rowNodeEventThrottle")
  ], Beans2.prototype, "rowNodeEventThrottle", void 0);
  __decorate$1O([
    PostConstruct
  ], Beans2.prototype, "postConstruct", null);
  Beans2 = __decorate$1O([
    Bean("beans")
  ], Beans2);
  return Beans2;
}();
var __extends$1Y = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var CellMouseListenerFeature = function(_super) {
  __extends$1Y(CellMouseListenerFeature2, _super);
  function CellMouseListenerFeature2(ctrl, beans, column) {
    var _this = _super.call(this) || this;
    _this.cellCtrl = ctrl;
    _this.beans = beans;
    _this.column = column;
    return _this;
  }
  CellMouseListenerFeature2.prototype.onMouseEvent = function(eventName, mouseEvent) {
    if (isStopPropagationForAgGrid(mouseEvent)) {
      return;
    }
    switch (eventName) {
      case "click":
        this.onCellClicked(mouseEvent);
        break;
      case "mousedown":
      case "touchstart":
        this.onMouseDown(mouseEvent);
        break;
      case "dblclick":
        this.onCellDoubleClicked(mouseEvent);
        break;
      case "mouseout":
        this.onMouseOut(mouseEvent);
        break;
      case "mouseover":
        this.onMouseOver(mouseEvent);
        break;
    }
  };
  CellMouseListenerFeature2.prototype.onCellClicked = function(mouseEvent) {
    if (this.isDoubleClickOnIPad()) {
      this.onCellDoubleClicked(mouseEvent);
      mouseEvent.preventDefault();
      return;
    }
    var _a2 = this.beans, eventService = _a2.eventService, rangeService = _a2.rangeService, gridOptionsWrapper = _a2.gridOptionsWrapper;
    var multiKeyPressed = mouseEvent.ctrlKey || mouseEvent.metaKey;
    if (rangeService && multiKeyPressed) {
      if (rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()) > 1) {
        rangeService.intersectLastRange(true);
      }
    }
    var cellClickedEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_CLICKED);
    eventService.dispatchEvent(cellClickedEvent);
    var colDef = this.column.getColDef();
    if (colDef.onCellClicked) {
      window.setTimeout(function() {
        return colDef.onCellClicked(cellClickedEvent);
      }, 0);
    }
    var editOnSingleClick = (gridOptionsWrapper.isSingleClickEdit() || colDef.singleClickEdit) && !gridOptionsWrapper.isSuppressClickEdit();
    if (editOnSingleClick) {
      this.cellCtrl.startRowOrCellEdit();
    }
  };
  CellMouseListenerFeature2.prototype.isDoubleClickOnIPad = function() {
    if (!isIOSUserAgent() || isEventSupported("dblclick")) {
      return false;
    }
    var nowMillis = new Date().getTime();
    var res = nowMillis - this.lastIPadMouseClickEvent < 200;
    this.lastIPadMouseClickEvent = nowMillis;
    return res;
  };
  CellMouseListenerFeature2.prototype.onCellDoubleClicked = function(mouseEvent) {
    var colDef = this.column.getColDef();
    var cellDoubleClickedEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_DOUBLE_CLICKED);
    this.beans.eventService.dispatchEvent(cellDoubleClickedEvent);
    if (typeof colDef.onCellDoubleClicked === "function") {
      window.setTimeout(function() {
        return colDef.onCellDoubleClicked(cellDoubleClickedEvent);
      }, 0);
    }
    var editOnDoubleClick = !this.beans.gridOptionsWrapper.isSingleClickEdit() && !this.beans.gridOptionsWrapper.isSuppressClickEdit();
    if (editOnDoubleClick) {
      this.cellCtrl.startRowOrCellEdit(null, null, mouseEvent);
    }
  };
  CellMouseListenerFeature2.prototype.onMouseDown = function(mouseEvent) {
    var ctrlKey = mouseEvent.ctrlKey, metaKey = mouseEvent.metaKey, shiftKey = mouseEvent.shiftKey;
    var target = mouseEvent.target;
    var _a2 = this.beans, eventService = _a2.eventService, rangeService = _a2.rangeService;
    if (this.isRightClickInExistingRange(mouseEvent)) {
      return;
    }
    var ranges = rangeService && rangeService.getCellRanges().length != 0;
    if (!shiftKey || !ranges) {
      var forceBrowserFocus = isBrowserEdge() && !this.cellCtrl.isEditing() && !isFocusableFormField(target);
      this.cellCtrl.focusCell(forceBrowserFocus);
    }
    if (shiftKey && ranges) {
      mouseEvent.preventDefault();
    }
    if (this.containsWidget(target)) {
      return;
    }
    if (rangeService) {
      var thisCell = this.cellCtrl.getCellPosition();
      if (shiftKey) {
        rangeService.extendLatestRangeToCell(thisCell);
      } else {
        var ctrlKeyPressed = ctrlKey || metaKey;
        rangeService.setRangeToCell(thisCell, ctrlKeyPressed);
      }
    }
    eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_DOWN));
  };
  CellMouseListenerFeature2.prototype.isRightClickInExistingRange = function(mouseEvent) {
    var rangeService = this.beans.rangeService;
    if (rangeService) {
      var cellInRange = rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition());
      if (cellInRange && mouseEvent.button === 2) {
        return true;
      }
    }
    return false;
  };
  CellMouseListenerFeature2.prototype.containsWidget = function(target) {
    return isElementChildOfClass(target, "ag-selection-checkbox", 3);
  };
  CellMouseListenerFeature2.prototype.onMouseOut = function(mouseEvent) {
    if (this.mouseStayingInsideCell(mouseEvent)) {
      return;
    }
    var cellMouseOutEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_OUT);
    this.beans.eventService.dispatchEvent(cellMouseOutEvent);
    this.beans.columnHoverService.clearMouseOver();
  };
  CellMouseListenerFeature2.prototype.onMouseOver = function(mouseEvent) {
    if (this.mouseStayingInsideCell(mouseEvent)) {
      return;
    }
    var cellMouseOverEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_OVER);
    this.beans.eventService.dispatchEvent(cellMouseOverEvent);
    this.beans.columnHoverService.setMouseOver([this.column]);
  };
  CellMouseListenerFeature2.prototype.mouseStayingInsideCell = function(e2) {
    if (!e2.target || !e2.relatedTarget) {
      return false;
    }
    var eGui = this.cellCtrl.getGui();
    var cellContainsTarget = eGui.contains(e2.target);
    var cellContainsRelatedTarget = eGui.contains(e2.relatedTarget);
    return cellContainsTarget && cellContainsRelatedTarget;
  };
  CellMouseListenerFeature2.prototype.destroy = function() {
  };
  return CellMouseListenerFeature2;
}(Beans);
var __extends$1X = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var CellKeyboardListenerFeature = function(_super) {
  __extends$1X(CellKeyboardListenerFeature2, _super);
  function CellKeyboardListenerFeature2(ctrl, beans, column, rowNode, rowCtrl) {
    var _this = _super.call(this) || this;
    _this.cellCtrl = ctrl;
    _this.beans = beans;
    _this.rowNode = rowNode;
    _this.rowCtrl = rowCtrl;
    return _this;
  }
  CellKeyboardListenerFeature2.prototype.setComp = function(eGui) {
    this.eGui = eGui;
  };
  CellKeyboardListenerFeature2.prototype.onKeyDown = function(event) {
    var key = event.key;
    switch (key) {
      case KeyCode.ENTER:
        this.onEnterKeyDown(event);
        break;
      case KeyCode.F2:
        this.onF2KeyDown(event);
        break;
      case KeyCode.ESCAPE:
        this.onEscapeKeyDown(event);
        break;
      case KeyCode.TAB:
        this.onTabKeyDown(event);
        break;
      case KeyCode.BACKSPACE:
      case KeyCode.DELETE:
        this.onBackspaceOrDeleteKeyPressed(key, event);
        break;
      case KeyCode.DOWN:
      case KeyCode.UP:
      case KeyCode.RIGHT:
      case KeyCode.LEFT:
        this.onNavigationKeyPressed(event, key);
        break;
    }
  };
  CellKeyboardListenerFeature2.prototype.onNavigationKeyPressed = function(event, key) {
    if (this.cellCtrl.isEditing()) {
      return;
    }
    if (event.shiftKey && this.cellCtrl.isRangeSelectionEnabled()) {
      this.onShiftRangeSelect(event);
    } else {
      this.beans.navigationService.navigateToNextCell(event, key, this.cellCtrl.getCellPosition(), true);
    }
    event.preventDefault();
  };
  CellKeyboardListenerFeature2.prototype.onShiftRangeSelect = function(event) {
    if (!this.beans.rangeService) {
      return;
    }
    var endCell = this.beans.rangeService.extendLatestRangeInDirection(event);
    if (endCell) {
      this.beans.navigationService.ensureCellVisible(endCell);
    }
  };
  CellKeyboardListenerFeature2.prototype.onTabKeyDown = function(event) {
    this.beans.navigationService.onTabKeyDown(this.cellCtrl, event);
  };
  CellKeyboardListenerFeature2.prototype.onBackspaceOrDeleteKeyPressed = function(key, event) {
    if (!this.cellCtrl.isEditing()) {
      this.cellCtrl.startRowOrCellEdit(key, void 0, event);
    }
  };
  CellKeyboardListenerFeature2.prototype.onEnterKeyDown = function(e2) {
    if (this.cellCtrl.isEditing() || this.rowCtrl.isEditing()) {
      this.cellCtrl.stopEditingAndFocus();
    } else {
      if (this.beans.gridOptionsWrapper.isEnterMovesDown()) {
        this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.cellCtrl.getCellPosition(), false);
      } else {
        this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER, void 0, e2);
        if (this.cellCtrl.isEditing()) {
          e2.preventDefault();
        }
      }
    }
  };
  CellKeyboardListenerFeature2.prototype.onF2KeyDown = function(event) {
    if (!this.cellCtrl.isEditing()) {
      this.cellCtrl.startRowOrCellEdit(KeyCode.F2, void 0, event);
    }
  };
  CellKeyboardListenerFeature2.prototype.onEscapeKeyDown = function(event) {
    if (this.cellCtrl.isEditing()) {
      this.cellCtrl.stopRowOrCellEdit(true);
      this.cellCtrl.focusCell(true);
    }
  };
  CellKeyboardListenerFeature2.prototype.onKeyPress = function(event) {
    var eventTarget = event.target;
    var eventOnChildComponent = eventTarget !== this.eGui;
    if (eventOnChildComponent || this.cellCtrl.isEditing()) {
      return;
    }
    var pressedChar = String.fromCharCode(event.charCode);
    if (pressedChar === " ") {
      this.onSpaceKeyPressed(event);
    } else if (isEventFromPrintableCharacter(event)) {
      this.cellCtrl.startRowOrCellEdit(null, pressedChar, event);
      event.preventDefault();
    }
  };
  CellKeyboardListenerFeature2.prototype.onSpaceKeyPressed = function(event) {
    var gridOptionsWrapper = this.beans.gridOptionsWrapper;
    if (!this.cellCtrl.isEditing() && gridOptionsWrapper.isRowSelection()) {
      var currentSelection = this.rowNode.isSelected();
      var newSelection = !currentSelection;
      if (newSelection || !gridOptionsWrapper.isSuppressRowDeselection()) {
        var groupSelectsFiltered = this.beans.gridOptionsWrapper.isGroupSelectsFiltered();
        var updatedCount = this.rowNode.setSelectedParams({
          newValue: newSelection,
          rangeSelect: event.shiftKey,
          groupSelectsFiltered
        });
        if (currentSelection === void 0 && updatedCount === 0) {
          this.rowNode.setSelectedParams({
            newValue: false,
            rangeSelect: event.shiftKey,
            groupSelectsFiltered
          });
        }
      }
    }
    event.preventDefault();
  };
  CellKeyboardListenerFeature2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
  };
  return CellKeyboardListenerFeature2;
}(BeanStub);
var __extends$1W = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1N = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DndSourceComp = function(_super) {
  __extends$1W(DndSourceComp2, _super);
  function DndSourceComp2(rowNode, column, beans, eCell) {
    var _this = _super.call(this, '<div class="ag-drag-handle ag-row-drag" draggable="true"></div>') || this;
    _this.rowNode = rowNode;
    _this.column = column;
    _this.beans = beans;
    _this.eCell = eCell;
    return _this;
  }
  DndSourceComp2.prototype.postConstruct = function() {
    var eGui = this.getGui();
    eGui.appendChild(createIconNoSpan("rowDrag", this.beans.gridOptionsWrapper, null));
    this.addGuiEventListener("mousedown", function(e2) {
      e2.stopPropagation();
    });
    this.addDragSource();
    this.checkVisibility();
  };
  DndSourceComp2.prototype.addDragSource = function() {
    this.addGuiEventListener("dragstart", this.onDragStart.bind(this));
  };
  DndSourceComp2.prototype.onDragStart = function(dragEvent) {
    var _this = this;
    var providedOnRowDrag = this.column.getColDef().dndSourceOnRowDrag;
    dragEvent.dataTransfer.setDragImage(this.eCell, 0, 0);
    var defaultOnRowDrag = function() {
      try {
        var jsonData = JSON.stringify(_this.rowNode.data);
        dragEvent.dataTransfer.setData("application/json", jsonData);
        dragEvent.dataTransfer.setData("text/plain", jsonData);
      } catch (e2) {
      }
    };
    if (providedOnRowDrag) {
      var params = {
        rowNode: this.rowNode,
        dragEvent,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      providedOnRowDrag(params);
    } else {
      defaultOnRowDrag();
    }
  };
  DndSourceComp2.prototype.checkVisibility = function() {
    var visible = this.column.isDndSource(this.rowNode);
    this.setDisplayed(visible);
  };
  __decorate$1N([
    PostConstruct
  ], DndSourceComp2.prototype, "postConstruct", null);
  return DndSourceComp2;
}(Component);
var __extends$1V = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$4 = function() {
  __assign$4 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$4.apply(this, arguments);
};
var CSS_CELL = "ag-cell";
var CSS_AUTO_HEIGHT = "ag-cell-auto-height";
var CSS_NORMAL_HEIGHT = "ag-cell-normal-height";
var CSS_CELL_FOCUS = "ag-cell-focus";
var CSS_CELL_FIRST_RIGHT_PINNED = "ag-cell-first-right-pinned";
var CSS_CELL_LAST_LEFT_PINNED = "ag-cell-last-left-pinned";
var CSS_CELL_NOT_INLINE_EDITING = "ag-cell-not-inline-editing";
var CSS_CELL_INLINE_EDITING = "ag-cell-inline-editing";
var CSS_CELL_POPUP_EDITING = "ag-cell-popup-editing";
var CSS_COLUMN_HOVER = "ag-column-hover";
var CSS_CELL_WRAP_TEXT = "ag-cell-wrap-text";
var instanceIdSequence$3 = 0;
var CellCtrl = function(_super) {
  __extends$1V(CellCtrl2, _super);
  function CellCtrl2(column, rowNode, beans, rowCtrl) {
    var _this = _super.call(this) || this;
    _this.suppressRefreshCell = false;
    _this.onCellCompAttachedFuncs = [];
    _this.column = column;
    _this.rowNode = rowNode;
    _this.beans = beans;
    _this.rowCtrl = rowCtrl;
    _this.instanceId = column.getId() + "-" + instanceIdSequence$3++;
    _this.createCellPosition();
    _this.addFeatures();
    return _this;
  }
  CellCtrl2.prototype.addFeatures = function() {
    var _this = this;
    this.cellPositionFeature = new CellPositionFeature(this, this.beans);
    this.addDestroyFunc(function() {
      return _this.cellPositionFeature.destroy();
    });
    this.cellCustomStyleFeature = new CellCustomStyleFeature(this, this.beans);
    this.addDestroyFunc(function() {
      return _this.cellCustomStyleFeature.destroy();
    });
    this.cellMouseListenerFeature = new CellMouseListenerFeature(this, this.beans, this.column);
    this.addDestroyFunc(function() {
      return _this.cellMouseListenerFeature.destroy();
    });
    this.cellKeyboardListenerFeature = new CellKeyboardListenerFeature(this, this.beans, this.column, this.rowNode, this.rowCtrl);
    this.addDestroyFunc(function() {
      return _this.cellKeyboardListenerFeature.destroy();
    });
    var rangeSelectionEnabled = this.beans.rangeService && this.beans.gridOptionsWrapper.isEnableRangeSelection();
    if (rangeSelectionEnabled) {
      this.cellRangeFeature = new CellRangeFeature(this.beans, this);
      this.addDestroyFunc(function() {
        return _this.cellRangeFeature.destroy();
      });
    }
    this.addTooltipFeature();
  };
  CellCtrl2.prototype.addTooltipFeature = function() {
    var _this = this;
    var getTooltipValue = function() {
      var colDef = _this.column.getColDef();
      var data = _this.rowNode.data;
      if (colDef.tooltipField && exists(data)) {
        return getValueUsingField(data, colDef.tooltipField, _this.column.isTooltipFieldContainsDots());
      }
      var valueGetter = colDef.tooltipValueGetter;
      if (valueGetter) {
        return valueGetter({
          location: "cell",
          api: _this.beans.gridOptionsWrapper.getApi(),
          columnApi: _this.beans.gridOptionsWrapper.getColumnApi(),
          context: _this.beans.gridOptionsWrapper.getContext(),
          colDef: _this.column.getColDef(),
          column: _this.column,
          rowIndex: _this.cellPosition.rowIndex,
          node: _this.rowNode,
          data: _this.rowNode.data,
          value: _this.value,
          valueFormatted: _this.valueFormatted
        });
      }
      return null;
    };
    var tooltipCtrl = {
      getColumn: function() {
        return _this.column;
      },
      getColDef: function() {
        return _this.column.getColDef();
      },
      getRowIndex: function() {
        return _this.cellPosition.rowIndex;
      },
      getRowNode: function() {
        return _this.rowNode;
      },
      getGui: function() {
        return _this.getGui();
      },
      getLocation: function() {
        return "cell";
      },
      getTooltipValue,
      getValueFormatted: function() {
        return _this.valueFormatted;
      }
    };
    this.tooltipFeature = new TooltipFeature(tooltipCtrl, this.beans);
    this.addDestroyFunc(function() {
      return _this.tooltipFeature.destroy();
    });
  };
  CellCtrl2.prototype.setComp = function(comp, eGui, eCellWrapper, printLayout, startEditing) {
    this.cellComp = comp;
    this.gow = this.beans.gridOptionsWrapper;
    this.eGui = eGui;
    this.eCellWrapper = eCellWrapper;
    this.printLayout = printLayout;
    this.updateAndFormatValue(true);
    this.addDomData();
    this.onCellFocused();
    this.applyStaticCssClasses();
    this.setWrapText();
    this.onFirstRightPinnedChanged();
    this.onLastLeftPinnedChanged();
    this.onColumnHover();
    this.setupControlComps();
    this.setupAutoHeight();
    this.setAriaColIndex();
    if (!this.gow.isSuppressCellFocus()) {
      this.cellComp.setTabIndex(-1);
    }
    var colIdSanitised = escapeString(this.column.getId());
    this.cellComp.setColId(colIdSanitised);
    this.cellComp.setRole("gridcell");
    this.cellPositionFeature.setComp(eGui);
    this.cellCustomStyleFeature.setComp(comp);
    this.tooltipFeature.setComp(comp);
    this.cellKeyboardListenerFeature.setComp(this.eGui);
    if (this.cellRangeFeature) {
      this.cellRangeFeature.setComp(comp, eGui);
    }
    if (startEditing && this.isCellEditable()) {
      this.startEditing();
    } else {
      this.showValue();
    }
    if (this.onCellCompAttachedFuncs.length) {
      this.onCellCompAttachedFuncs.forEach(function(func) {
        return func();
      });
      this.onCellCompAttachedFuncs = [];
    }
  };
  CellCtrl2.prototype.setupAutoHeight = function() {
    var _this = this;
    if (!this.column.isAutoHeight()) {
      return;
    }
    var eAutoHeightContainer = this.eCellWrapper;
    var eParentCell = eAutoHeightContainer.parentElement;
    var minRowHeight = this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height;
    var measureHeight = function(timesCalled) {
      if (_this.editing) {
        return;
      }
      if (!_this.isAlive()) {
        return;
      }
      var _a2 = getElementSize(eParentCell), paddingTop = _a2.paddingTop, paddingBottom = _a2.paddingBottom;
      var wrapperHeight = eAutoHeightContainer.offsetHeight;
      var autoHeight = wrapperHeight + paddingTop + paddingBottom;
      if (timesCalled < 5) {
        var doc = _this.beans.gridOptionsWrapper.getDocument();
        var notYetInDom = !doc || !doc.contains(eAutoHeightContainer);
        var possiblyNoContentYet = autoHeight == 0;
        if (notYetInDom || possiblyNoContentYet) {
          _this.beans.frameworkOverrides.setTimeout(function() {
            return measureHeight(timesCalled + 1);
          }, 0);
          return;
        }
      }
      var newHeight = Math.max(autoHeight, minRowHeight);
      _this.rowNode.setRowAutoHeight(newHeight, _this.column);
    };
    var listener = function() {
      return measureHeight(0);
    };
    listener();
    var destroyResizeObserver = this.beans.resizeObserverService.observeResize(eAutoHeightContainer, listener);
    this.addDestroyFunc(function() {
      destroyResizeObserver();
      _this.rowNode.setRowAutoHeight(void 0, _this.column);
    });
  };
  CellCtrl2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  CellCtrl2.prototype.showValue = function(forceNewCellRendererInstance) {
    if (forceNewCellRendererInstance === void 0) {
      forceNewCellRendererInstance = false;
    }
    var valueToDisplay = this.valueFormatted != null ? this.valueFormatted : this.value;
    var params = this.createCellRendererParams();
    var compDetails = this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(), params);
    this.cellComp.setRenderDetails(compDetails, valueToDisplay, forceNewCellRendererInstance);
    this.refreshHandle();
  };
  CellCtrl2.prototype.setupControlComps = function() {
    var colDef = this.column.getColDef();
    this.includeSelection = this.isIncludeControl(colDef.checkboxSelection);
    this.includeRowDrag = this.isIncludeControl(colDef.rowDrag);
    this.includeDndSource = this.isIncludeControl(colDef.dndSource);
    this.cellComp.setIncludeSelection(this.includeSelection);
    this.cellComp.setIncludeDndSource(this.includeDndSource);
    this.cellComp.setIncludeRowDrag(this.includeRowDrag);
  };
  CellCtrl2.prototype.isForceWrapper = function() {
    var forceWrapper = this.beans.gridOptionsWrapper.isEnableCellTextSelection() || this.column.isAutoHeight();
    return forceWrapper;
  };
  CellCtrl2.prototype.isIncludeControl = function(value) {
    var rowNodePinned = this.rowNode.rowPinned != null;
    var isFunc = typeof value === "function";
    var res = rowNodePinned ? false : isFunc || value === true;
    return res;
  };
  CellCtrl2.prototype.refreshShouldDestroy = function() {
    var colDef = this.column.getColDef();
    var selectionChanged = this.includeSelection != this.isIncludeControl(colDef.checkboxSelection);
    var rowDragChanged = this.includeRowDrag != this.isIncludeControl(colDef.rowDrag);
    var dndSourceChanged = this.includeDndSource != this.isIncludeControl(colDef.dndSource);
    return selectionChanged || rowDragChanged || dndSourceChanged;
  };
  CellCtrl2.prototype.startEditing = function(key, charPress, cellStartedEdit, event) {
    var _this = this;
    if (key === void 0) {
      key = null;
    }
    if (charPress === void 0) {
      charPress = null;
    }
    if (cellStartedEdit === void 0) {
      cellStartedEdit = false;
    }
    if (event === void 0) {
      event = null;
    }
    var _a2, _b;
    if (!this.isCellEditable() || this.editing) {
      return;
    }
    if (!this.cellComp) {
      this.onCellCompAttachedFuncs.push(function() {
        _this.startEditing(key, charPress, cellStartedEdit, event);
      });
      return;
    }
    var editorParams = this.createCellEditorParams(key, charPress, cellStartedEdit);
    var colDef = this.column.getColDef();
    var compDetails = this.beans.userComponentFactory.getCellEditorDetails(colDef, editorParams);
    var popup = ((_a2 = compDetails) === null || _a2 === void 0 ? void 0 : _a2.popupFromSelector) != null ? compDetails.popupFromSelector : !!colDef.cellEditorPopup;
    var position = ((_b = compDetails) === null || _b === void 0 ? void 0 : _b.popupPositionFromSelector) != null ? compDetails.popupPositionFromSelector : colDef.cellEditorPopupPosition;
    this.setEditing(true, popup);
    this.cellComp.setEditDetails(compDetails, popup, position);
    var e2 = this.createEvent(event, Events.EVENT_CELL_EDITING_STARTED);
    this.beans.eventService.dispatchEvent(e2);
  };
  CellCtrl2.prototype.setEditing = function(editing, inPopup) {
    if (inPopup === void 0) {
      inPopup = false;
    }
    if (this.editing === editing) {
      return;
    }
    this.editing = editing;
    this.editingInPopup = inPopup;
    this.setInlineEditingClass();
    this.refreshHandle();
  };
  CellCtrl2.prototype.stopRowOrCellEdit = function(cancel) {
    if (cancel === void 0) {
      cancel = false;
    }
    if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
      this.rowCtrl.stopRowEditing(cancel);
    } else {
      this.stopEditing(cancel);
    }
  };
  CellCtrl2.prototype.onPopupEditorClosed = function() {
    if (!this.isEditing()) {
      return;
    }
    this.stopEditingAndFocus();
  };
  CellCtrl2.prototype.takeValueFromCellEditor = function(cancel) {
    var noValueResult = { newValueExists: false };
    if (cancel) {
      return noValueResult;
    }
    var cellEditor = this.cellComp.getCellEditor();
    if (!cellEditor) {
      return noValueResult;
    }
    var userWantsToCancel = cellEditor.isCancelAfterEnd && cellEditor.isCancelAfterEnd();
    if (userWantsToCancel) {
      return noValueResult;
    }
    var newValue = cellEditor.getValue();
    return {
      newValue,
      newValueExists: true
    };
  };
  CellCtrl2.prototype.saveNewValue = function(oldValue, newValue) {
    if (newValue === oldValue) {
      return false;
    }
    if (this.beans.gridOptionsWrapper.isReadOnlyEdit()) {
      this.dispatchEventForSaveValueReadOnly(oldValue, newValue);
      return false;
    }
    this.suppressRefreshCell = true;
    var valueChanged = this.rowNode.setDataValue(this.column, newValue);
    this.suppressRefreshCell = false;
    return valueChanged;
  };
  CellCtrl2.prototype.dispatchEventForSaveValueReadOnly = function(oldValue, newValue) {
    var rowNode = this.rowNode;
    var event = {
      type: Events.EVENT_CELL_EDIT_REQUEST,
      event: null,
      rowIndex: rowNode.rowIndex,
      rowPinned: rowNode.rowPinned,
      column: this.column,
      api: this.beans.gridApi,
      columnApi: this.beans.columnApi,
      colDef: this.column.getColDef(),
      context: this.beans.gridOptionsWrapper.getContext(),
      data: rowNode.data,
      node: rowNode,
      oldValue,
      newValue,
      value: newValue,
      source: void 0
    };
    this.beans.eventService.dispatchEvent(event);
  };
  CellCtrl2.prototype.stopEditing = function(cancel) {
    if (cancel === void 0) {
      cancel = false;
    }
    if (!this.editing) {
      return false;
    }
    var _a2 = this.takeValueFromCellEditor(cancel), newValue = _a2.newValue, newValueExists = _a2.newValueExists;
    var oldValue = this.getValueFromValueService();
    var valueChanged = false;
    if (newValueExists) {
      valueChanged = this.saveNewValue(oldValue, newValue);
    }
    this.setEditing(false);
    this.cellComp.setEditDetails();
    this.updateAndFormatValue();
    this.refreshCell({ forceRefresh: true, suppressFlash: true });
    this.dispatchEditingStoppedEvent(oldValue, newValue);
    return valueChanged;
  };
  CellCtrl2.prototype.dispatchEditingStoppedEvent = function(oldValue, newValue) {
    var editingStoppedEvent = __assign$4(__assign$4({}, this.createEvent(null, Events.EVENT_CELL_EDITING_STOPPED)), {
      oldValue,
      newValue
    });
    this.beans.eventService.dispatchEvent(editingStoppedEvent);
  };
  CellCtrl2.prototype.setInlineEditingClass = function() {
    var _this = this;
    if (!this.isAlive()) {
      return;
    }
    if (!this.cellComp) {
      this.onCellCompAttachedFuncs.push(function() {
        _this.setInlineEditingClass();
      });
      return;
    }
    var editingInline = this.editing && !this.editingInPopup;
    var popupEditorShowing = this.editing && this.editingInPopup;
    this.cellComp.addOrRemoveCssClass(CSS_CELL_INLINE_EDITING, editingInline);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, !editingInline);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_POPUP_EDITING, popupEditorShowing);
    this.rowCtrl.setInlineEditingCss(this.editing);
  };
  CellCtrl2.prototype.hackSayEditingInPopup = function() {
    if (this.editingInPopup) {
      return;
    }
    this.editingInPopup = true;
    this.setInlineEditingClass();
  };
  CellCtrl2.prototype.createCellEditorParams = function(key, charPress, cellStartedEdit) {
    var res = {
      value: this.getValueFromValueService(),
      key,
      eventKey: key,
      charPress,
      column: this.column,
      colDef: this.column.getColDef(),
      rowIndex: this.getCellPosition().rowIndex,
      node: this.rowNode,
      data: this.rowNode.data,
      api: this.beans.gridOptionsWrapper.getApi(),
      cellStartedEdit,
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext(),
      onKeyDown: this.onKeyDown.bind(this),
      stopEditing: this.stopEditingAndFocus.bind(this),
      eGridCell: this.getGui(),
      parseValue: this.parseValue.bind(this),
      formatValue: this.formatValue.bind(this)
    };
    return res;
  };
  CellCtrl2.prototype.createCellRendererParams = function() {
    var _this = this;
    var addRowCompListener = function(eventType, listener) {
      console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided.");
      _this.rowCtrl.addEventListener(eventType, listener);
    };
    var res = {
      value: this.value,
      valueFormatted: this.valueFormatted,
      getValue: this.getValueFromValueService.bind(this),
      setValue: function(value) {
        return _this.beans.valueService.setValue(_this.rowNode, _this.column, value);
      },
      formatValue: this.formatValue.bind(this),
      data: this.rowNode.data,
      node: this.rowNode,
      pinned: this.column.getPinned(),
      colDef: this.column.getColDef(),
      column: this.column,
      rowIndex: this.getCellPosition().rowIndex,
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext(),
      refreshCell: this.refreshCell.bind(this),
      eGridCell: this.getGui(),
      eParentOfValue: this.cellComp.getParentOfValue(),
      registerRowDragger: function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
        return _this.registerRowDragger(rowDraggerElement, dragStartPixels, suppressVisibilityChange);
      },
      addRowCompListener
    };
    return res;
  };
  CellCtrl2.prototype.parseValue = function(newValue) {
    var colDef = this.column.getColDef();
    var params = {
      node: this.rowNode,
      data: this.rowNode.data,
      oldValue: this.getValue(),
      newValue,
      colDef,
      column: this.column,
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext()
    };
    var valueParser = colDef.valueParser;
    return exists(valueParser) ? this.beans.expressionService.evaluate(valueParser, params) : newValue;
  };
  CellCtrl2.prototype.setFocusOutOnEditor = function() {
    if (!this.editing) {
      return;
    }
    var cellEditor = this.cellComp.getCellEditor();
    if (cellEditor && cellEditor.focusOut) {
      cellEditor.focusOut();
    }
  };
  CellCtrl2.prototype.setFocusInOnEditor = function() {
    if (!this.editing) {
      return;
    }
    var cellEditor = this.cellComp.getCellEditor();
    if (cellEditor && cellEditor.focusIn) {
      cellEditor.focusIn();
    } else {
      this.focusCell(true);
    }
  };
  CellCtrl2.prototype.onCellChanged = function(event) {
    if (!this.cellComp) {
      return;
    }
    var eventImpactsThisCell = event.column === this.column;
    if (eventImpactsThisCell) {
      this.refreshCell({});
    }
  };
  CellCtrl2.prototype.refreshCell = function(params) {
    if (this.suppressRefreshCell || this.editing) {
      return;
    }
    if (!this.cellComp) {
      return;
    }
    var colDef = this.column.getColDef();
    var newData = params != null && !!params.newData;
    var suppressFlash = params != null && !!params.suppressFlash || !!colDef.suppressCellFlash;
    var noValueProvided = colDef.field == null && colDef.valueGetter == null && colDef.showRowGroup == null;
    var forceRefresh = params && params.forceRefresh || noValueProvided || newData;
    var valuesDifferent = this.updateAndFormatValue();
    var dataNeedsUpdating = forceRefresh || valuesDifferent;
    if (dataNeedsUpdating) {
      this.showValue(newData);
      var processingFilterChange = this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();
      var flashCell = !suppressFlash && !processingFilterChange && (this.beans.gridOptionsWrapper.isEnableCellChangeFlash() || colDef.enableCellChangeFlash);
      if (flashCell) {
        this.flashCell();
      }
      this.cellCustomStyleFeature.applyUserStyles();
      this.cellCustomStyleFeature.applyClassesFromColDef();
    }
    this.refreshToolTip();
    this.cellCustomStyleFeature.applyCellClassRules();
  };
  CellCtrl2.prototype.stopEditingAndFocus = function(suppressNavigateAfterEdit) {
    if (suppressNavigateAfterEdit === void 0) {
      suppressNavigateAfterEdit = false;
    }
    this.stopRowOrCellEdit();
    this.focusCell(true);
    if (!suppressNavigateAfterEdit) {
      this.navigateAfterEdit();
    }
  };
  CellCtrl2.prototype.navigateAfterEdit = function() {
    var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();
    if (fullRowEdit) {
      return;
    }
    var enterMovesDownAfterEdit = this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();
    if (enterMovesDownAfterEdit) {
      this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.getCellPosition(), false);
    }
  };
  CellCtrl2.prototype.flashCell = function(delays) {
    var flashDelay = delays && delays.flashDelay;
    var fadeDelay = delays && delays.fadeDelay;
    this.animateCell("data-changed", flashDelay, fadeDelay);
  };
  CellCtrl2.prototype.animateCell = function(cssName, flashDelay, fadeDelay) {
    var _this = this;
    var fullName = "ag-cell-" + cssName;
    var animationFullName = "ag-cell-" + cssName + "-animation";
    var gridOptionsWrapper = this.beans.gridOptionsWrapper;
    if (!flashDelay) {
      flashDelay = gridOptionsWrapper.getCellFlashDelay();
    }
    if (!exists(fadeDelay)) {
      fadeDelay = gridOptionsWrapper.getCellFadeDelay();
    }
    this.cellComp.addOrRemoveCssClass(fullName, true);
    this.cellComp.addOrRemoveCssClass(animationFullName, false);
    window.setTimeout(function() {
      if (!_this.isAlive()) {
        return;
      }
      _this.cellComp.addOrRemoveCssClass(fullName, false);
      _this.cellComp.addOrRemoveCssClass(animationFullName, true);
      _this.eGui.style.transition = "background-color " + fadeDelay + "ms";
      window.setTimeout(function() {
        if (!_this.isAlive()) {
          return;
        }
        _this.cellComp.addOrRemoveCssClass(animationFullName, false);
        _this.eGui.style.transition = "";
      }, fadeDelay);
    }, flashDelay);
  };
  CellCtrl2.prototype.onFlashCells = function(event) {
    if (!this.cellComp) {
      return;
    }
    var cellId = this.beans.cellPositionUtils.createId(this.getCellPosition());
    var shouldFlash = event.cells[cellId];
    if (shouldFlash) {
      this.animateCell("highlight");
    }
  };
  CellCtrl2.prototype.isCellEditable = function() {
    return this.column.isCellEditable(this.rowNode);
  };
  CellCtrl2.prototype.isSuppressFillHandle = function() {
    return this.column.isSuppressFillHandle();
  };
  CellCtrl2.prototype.formatValue = function(value) {
    var res = this.callValueFormatter(value);
    return res != null ? res : value;
  };
  CellCtrl2.prototype.callValueFormatter = function(value) {
    return this.beans.valueFormatterService.formatValue(this.column, this.rowNode, value);
  };
  CellCtrl2.prototype.updateAndFormatValue = function(force) {
    if (force === void 0) {
      force = false;
    }
    var oldValue = this.value;
    var oldValueFormatted = this.valueFormatted;
    this.value = this.getValueFromValueService();
    this.valueFormatted = this.callValueFormatter(this.value);
    var valuesDifferent = force ? true : !this.valuesAreEqual(oldValue, this.value) || this.valueFormatted != oldValueFormatted;
    return valuesDifferent;
  };
  CellCtrl2.prototype.valuesAreEqual = function(val1, val2) {
    var colDef = this.column.getColDef();
    return colDef.equals ? colDef.equals(val1, val2) : val1 === val2;
  };
  CellCtrl2.prototype.getComp = function() {
    return this.cellComp;
  };
  CellCtrl2.prototype.getValueFromValueService = function() {
    var lockedClosedGroup = this.rowNode.leafGroup && this.beans.columnModel.isPivotMode();
    var isOpenGroup = this.rowNode.group && this.rowNode.expanded && !this.rowNode.footer && !lockedClosedGroup;
    var groupFootersEnabled = this.beans.gridOptionsWrapper.isGroupIncludeFooter();
    var groupAlwaysShowAggData = this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();
    var ignoreAggData = isOpenGroup && groupFootersEnabled && !groupAlwaysShowAggData;
    var value = this.beans.valueService.getValue(this.column, this.rowNode, false, ignoreAggData);
    return value;
  };
  CellCtrl2.prototype.getValue = function() {
    return this.value;
  };
  CellCtrl2.prototype.getValueFormatted = function() {
    return this.valueFormatted;
  };
  CellCtrl2.prototype.addDomData = function() {
    var _this = this;
    var element = this.getGui();
    this.beans.gridOptionsWrapper.setDomData(element, CellCtrl2.DOM_DATA_KEY_CELL_CTRL, this);
    this.addDestroyFunc(function() {
      return _this.beans.gridOptionsWrapper.setDomData(element, CellCtrl2.DOM_DATA_KEY_CELL_CTRL, null);
    });
  };
  CellCtrl2.prototype.createEvent = function(domEvent, eventType) {
    var event = {
      type: eventType,
      node: this.rowNode,
      data: this.rowNode.data,
      value: this.value,
      column: this.column,
      colDef: this.column.getColDef(),
      context: this.beans.gridOptionsWrapper.getContext(),
      api: this.beans.gridApi,
      columnApi: this.beans.columnApi,
      rowPinned: this.rowNode.rowPinned,
      event: domEvent,
      rowIndex: this.rowNode.rowIndex
    };
    return event;
  };
  CellCtrl2.prototype.onKeyPress = function(event) {
    this.cellKeyboardListenerFeature.onKeyPress(event);
  };
  CellCtrl2.prototype.onKeyDown = function(event) {
    this.cellKeyboardListenerFeature.onKeyDown(event);
  };
  CellCtrl2.prototype.onMouseEvent = function(eventName, mouseEvent) {
    this.cellMouseListenerFeature.onMouseEvent(eventName, mouseEvent);
  };
  CellCtrl2.prototype.getGui = function() {
    return this.eGui;
  };
  CellCtrl2.prototype.refreshToolTip = function() {
    this.tooltipFeature.refreshToolTip();
  };
  CellCtrl2.prototype.getColSpanningList = function() {
    return this.cellPositionFeature.getColSpanningList();
  };
  CellCtrl2.prototype.onLeftChanged = function() {
    if (!this.cellComp) {
      return;
    }
    this.cellPositionFeature.onLeftChanged();
  };
  CellCtrl2.prototype.onDisplayedColumnsChanged = function() {
    if (!this.eGui) {
      return;
    }
    this.setAriaColIndex();
  };
  CellCtrl2.prototype.setAriaColIndex = function() {
    var colIdx = this.beans.columnModel.getAriaColumnIndex(this.column);
    setAriaColIndex(this.getGui(), colIdx);
  };
  CellCtrl2.prototype.isSuppressNavigable = function() {
    return this.column.isSuppressNavigable(this.rowNode);
  };
  CellCtrl2.prototype.onWidthChanged = function() {
    return this.cellPositionFeature.onWidthChanged();
  };
  CellCtrl2.prototype.getColumn = function() {
    return this.column;
  };
  CellCtrl2.prototype.getRowNode = function() {
    return this.rowNode;
  };
  CellCtrl2.prototype.getBeans = function() {
    return this.beans;
  };
  CellCtrl2.prototype.isPrintLayout = function() {
    return this.printLayout;
  };
  CellCtrl2.prototype.appendChild = function(htmlElement) {
    this.eGui.appendChild(htmlElement);
  };
  CellCtrl2.prototype.refreshHandle = function() {
    if (this.cellRangeFeature) {
      this.cellRangeFeature.refreshHandle();
    }
  };
  CellCtrl2.prototype.getCellPosition = function() {
    return this.cellPosition;
  };
  CellCtrl2.prototype.isEditing = function() {
    return this.editing;
  };
  CellCtrl2.prototype.startRowOrCellEdit = function(key, charPress, event) {
    if (event === void 0) {
      event = null;
    }
    if (!this.cellComp) {
      return;
    }
    if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
      this.rowCtrl.startRowEditing(key, charPress, this);
    } else {
      this.startEditing(key, charPress, true, event);
    }
  };
  CellCtrl2.prototype.getRowCtrl = function() {
    return this.rowCtrl;
  };
  CellCtrl2.prototype.getRowPosition = function() {
    return {
      rowIndex: this.cellPosition.rowIndex,
      rowPinned: this.cellPosition.rowPinned
    };
  };
  CellCtrl2.prototype.updateRangeBordersIfRangeCount = function() {
    if (!this.cellComp) {
      return;
    }
    if (this.cellRangeFeature) {
      this.cellRangeFeature.updateRangeBordersIfRangeCount();
    }
  };
  CellCtrl2.prototype.onRangeSelectionChanged = function() {
    if (!this.cellComp) {
      return;
    }
    if (this.cellRangeFeature) {
      this.cellRangeFeature.onRangeSelectionChanged();
    }
  };
  CellCtrl2.prototype.isRangeSelectionEnabled = function() {
    return this.cellRangeFeature != null;
  };
  CellCtrl2.prototype.focusCell = function(forceBrowserFocus) {
    if (forceBrowserFocus === void 0) {
      forceBrowserFocus = false;
    }
    this.beans.focusService.setFocusedCell({
      rowIndex: this.getCellPosition().rowIndex,
      column: this.column,
      rowPinned: this.rowNode.rowPinned,
      forceBrowserFocus
    });
  };
  CellCtrl2.prototype.onRowIndexChanged = function() {
    this.createCellPosition();
    this.onCellFocused();
    if (this.cellRangeFeature) {
      this.cellRangeFeature.onRangeSelectionChanged();
    }
  };
  CellCtrl2.prototype.onFirstRightPinnedChanged = function() {
    if (!this.cellComp) {
      return;
    }
    var firstRightPinned = this.column.isFirstRightPinned();
    this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED, firstRightPinned);
  };
  CellCtrl2.prototype.onLastLeftPinnedChanged = function() {
    if (!this.cellComp) {
      return;
    }
    var lastLeftPinned = this.column.isLastLeftPinned();
    this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED, lastLeftPinned);
  };
  CellCtrl2.prototype.onCellFocused = function(event) {
    if (!this.cellComp || this.gow.isSuppressCellFocus()) {
      return;
    }
    var cellFocused = this.beans.focusService.isCellFocused(this.cellPosition);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS, cellFocused);
    if (cellFocused && event && event.forceBrowserFocus) {
      var focusEl = this.cellComp.getFocusableElement();
      focusEl.focus({ preventScroll: !!event.preventScrollOnBrowserFocus });
    }
    var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();
    if (!cellFocused && !fullRowEdit && this.editing) {
      this.stopRowOrCellEdit();
    }
  };
  CellCtrl2.prototype.createCellPosition = function() {
    this.cellPosition = {
      rowIndex: this.rowNode.rowIndex,
      rowPinned: makeNull(this.rowNode.rowPinned),
      column: this.column
    };
  };
  CellCtrl2.prototype.applyStaticCssClasses = function() {
    this.cellComp.addOrRemoveCssClass(CSS_CELL, true);
    this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, true);
    var autoHeight = this.column.isAutoHeight() == true;
    this.cellComp.addOrRemoveCssClass(CSS_AUTO_HEIGHT, autoHeight);
    this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, !autoHeight);
  };
  CellCtrl2.prototype.onColumnHover = function() {
    if (!this.cellComp) {
      return;
    }
    if (!this.beans.gridOptionsWrapper.isColumnHoverHighlight()) {
      return;
    }
    var isHovered = this.beans.columnHoverService.isHovered(this.column);
    this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER, isHovered);
  };
  CellCtrl2.prototype.onColDefChanged = function() {
    if (!this.cellComp) {
      return;
    }
    this.setWrapText();
    if (!this.editing) {
      this.refreshCell({ forceRefresh: true, suppressFlash: true });
    }
  };
  CellCtrl2.prototype.setWrapText = function() {
    var value = this.column.getColDef().wrapText == true;
    this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT, value);
  };
  CellCtrl2.prototype.dispatchCellContextMenuEvent = function(event) {
    var colDef = this.column.getColDef();
    var cellContextMenuEvent = this.createEvent(event, Events.EVENT_CELL_CONTEXT_MENU);
    this.beans.eventService.dispatchEvent(cellContextMenuEvent);
    if (colDef.onCellContextMenu) {
      window.setTimeout(function() {
        return colDef.onCellContextMenu(cellContextMenuEvent);
      }, 0);
    }
  };
  CellCtrl2.prototype.getCellRenderer = function() {
    return this.cellComp ? this.cellComp.getCellRenderer() : null;
  };
  CellCtrl2.prototype.getCellEditor = function() {
    return this.cellComp ? this.cellComp.getCellEditor() : null;
  };
  CellCtrl2.prototype.destroy = function() {
    this.onCellCompAttachedFuncs = [];
    _super.prototype.destroy.call(this);
  };
  CellCtrl2.prototype.createSelectionCheckbox = function() {
    var cbSelectionComponent = new CheckboxSelectionComponent();
    this.beans.context.createBean(cbSelectionComponent);
    cbSelectionComponent.init({ rowNode: this.rowNode, column: this.column });
    return cbSelectionComponent;
  };
  CellCtrl2.prototype.createDndSource = function() {
    var dndSourceComp = new DndSourceComp(this.rowNode, this.column, this.beans, this.eGui);
    this.beans.context.createBean(dndSourceComp);
    return dndSourceComp;
  };
  CellCtrl2.prototype.registerRowDragger = function(customElement, dragStartPixels, suppressVisibilityChange) {
    var _this = this;
    if (this.customRowDragComp) {
      this.customRowDragComp.setDragElement(customElement, dragStartPixels);
      return;
    }
    var newComp = this.createRowDragComp(customElement, dragStartPixels, suppressVisibilityChange);
    if (newComp) {
      this.customRowDragComp = newComp;
      this.addDestroyFunc(function() {
        return _this.beans.context.destroyBean(newComp);
      });
    }
  };
  CellCtrl2.prototype.createRowDragComp = function(customElement, dragStartPixels, suppressVisibilityChange) {
    var _this = this;
    var pagination = this.beans.gridOptionsWrapper.isPagination();
    var rowDragManaged = this.beans.gridOptionsWrapper.isRowDragManaged();
    var clientSideRowModelActive = this.beans.gridOptionsWrapper.isRowModelDefault();
    if (rowDragManaged) {
      if (!clientSideRowModelActive) {
        doOnce(function() {
          return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model");
        }, "CellComp.addRowDragging");
        return;
      }
      if (pagination) {
        doOnce(function() {
          return console.warn("AG Grid: managed row dragging is not possible when doing pagination");
        }, "CellComp.addRowDragging");
        return;
      }
    }
    var rowDragComp = new RowDragComp(function() {
      return _this.value;
    }, this.rowNode, this.column, customElement, dragStartPixels, suppressVisibilityChange);
    this.beans.context.createBean(rowDragComp);
    return rowDragComp;
  };
  CellCtrl2.DOM_DATA_KEY_CELL_CTRL = "cellCtrl";
  return CellCtrl2;
}(BeanStub);
var __extends$1U = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __values$2 = function(o) {
  var s3 = typeof Symbol === "function" && Symbol.iterator, m3 = s3 && o[s3], i2 = 0;
  if (m3)
    return m3.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i2 >= o.length)
          o = void 0;
        return { value: o && o[i2++], done: !o };
      }
    };
  throw new TypeError(s3 ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read$g = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$c = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$g(arguments[i2]));
  return ar;
};
var RowType$1;
(function(RowType2) {
  RowType2["Normal"] = "Normal";
  RowType2["FullWidth"] = "FullWidth";
  RowType2["FullWidthLoading"] = "FullWidthLoading";
  RowType2["FullWidthGroup"] = "FullWidthGroup";
  RowType2["FullWidthDetail"] = "FullWidthDetail";
})(RowType$1 || (RowType$1 = {}));
var instanceIdSequence$2 = 0;
var RowCtrl = function(_super) {
  __extends$1U(RowCtrl2, _super);
  function RowCtrl2(rowNode, beans, animateIn, useAnimationFrameForCreate, printLayout) {
    var _this = _super.call(this) || this;
    _this.allRowGuis = [];
    _this.active = true;
    _this.centerCellCtrls = { list: [], map: {} };
    _this.leftCellCtrls = { list: [], map: {} };
    _this.rightCellCtrls = { list: [], map: {} };
    _this.lastMouseDownOnDragger = false;
    _this.updateColumnListsPending = false;
    _this.beans = beans;
    _this.rowNode = rowNode;
    _this.paginationPage = _this.beans.paginationProxy.getCurrentPage();
    _this.useAnimationFrameForCreate = useAnimationFrameForCreate;
    _this.printLayout = printLayout;
    _this.instanceId = rowNode.id + "-" + instanceIdSequence$2++;
    _this.setAnimateFlags(animateIn);
    _this.rowFocused = _this.beans.focusService.isRowFocused(_this.rowNode.rowIndex, _this.rowNode.rowPinned);
    _this.rowLevel = _this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode);
    _this.setRowType();
    _this.addListeners();
    return _this;
  }
  RowCtrl2.prototype.isSticky = function() {
    return this.rowNode.sticky;
  };
  RowCtrl2.prototype.getBeans = function() {
    return this.beans;
  };
  RowCtrl2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  RowCtrl2.prototype.setComp = function(rowComp, element, containerType) {
    var gui = { rowComp, element, containerType };
    this.allRowGuis.push(gui);
    if (containerType === RowContainerType.LEFT) {
      this.leftGui = gui;
    } else if (containerType === RowContainerType.RIGHT) {
      this.rightGui = gui;
    } else if (containerType === RowContainerType.FULL_WIDTH) {
      this.fullWidthGui = gui;
    } else {
      this.centerGui = gui;
    }
    var allNormalPresent = this.leftGui != null && this.rightGui != null && this.centerGui != null;
    var fullWidthPresent = this.fullWidthGui != null;
    if (allNormalPresent || fullWidthPresent) {
      this.initialiseRowComps();
    }
    if (this.rowType !== "FullWidthLoading") {
      this.beans.rowRenderer.dispatchFirstDataRenderedEvent();
    }
  };
  RowCtrl2.prototype.isCacheable = function() {
    return this.rowType === RowType$1.FullWidthDetail && this.beans.gridOptionsWrapper.isKeepDetailRows();
  };
  RowCtrl2.prototype.setCached = function(cached) {
    var displayValue = cached ? "none" : "";
    this.allRowGuis.forEach(function(rg) {
      return rg.element.style.display = displayValue;
    });
  };
  RowCtrl2.prototype.initialiseRowComps = function() {
    var _this = this;
    var gow = this.beans.gridOptionsWrapper;
    this.onRowHeightChanged();
    this.updateRowIndexes();
    this.setFocusedClasses();
    this.setStylesFromGridOptions();
    if (gow.isRowSelection() && this.rowNode.selectable) {
      this.onRowSelected();
    }
    this.updateColumnLists(!this.useAnimationFrameForCreate);
    if (this.slideRowIn) {
      executeNextVMTurn(this.onTopChanged.bind(this));
    }
    if (this.fadeRowIn) {
      executeNextVMTurn(function() {
        _this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero", false);
        });
      });
    }
    var businessKey = this.getRowBusinessKey();
    var rowIdSanitised = escapeString(this.rowNode.id);
    var businessKeySanitised = escapeString(businessKey);
    this.allRowGuis.forEach(function(gui) {
      var comp = gui.rowComp;
      comp.setRole("row");
      var initialRowClasses = _this.getInitialRowClasses(gui.containerType);
      initialRowClasses.forEach(function(name) {
        return comp.addOrRemoveCssClass(name, true);
      });
      if (_this.rowNode.group) {
        setAriaExpanded(gui.element, _this.rowNode.expanded == true);
      }
      if (rowIdSanitised != null) {
        comp.setRowId(rowIdSanitised);
      }
      if (businessKeySanitised != null) {
        comp.setRowBusinessKey(businessKeySanitised);
      }
      if (_this.isFullWidth() && !_this.beans.gridOptionsWrapper.isSuppressCellFocus()) {
        comp.setTabIndex(-1);
      }
      gow.setDomData(gui.element, RowCtrl2.DOM_DATA_KEY_ROW_CTRL, _this);
      _this.addDestroyFunc(function() {
        return gow.setDomData(gui.element, RowCtrl2.DOM_DATA_KEY_ROW_CTRL, null);
      });
      if (_this.useAnimationFrameForCreate) {
        _this.beans.animationFrameService.createTask(_this.addHoverFunctionality.bind(_this, gui.element), _this.rowNode.rowIndex, "createTasksP2");
      } else {
        _this.addHoverFunctionality(gui.element);
      }
      if (_this.isFullWidth()) {
        _this.setupFullWidth(gui);
      }
      if (gow.isRowDragEntireRow()) {
        _this.addRowDraggerToRow(gui);
      }
      if (_this.useAnimationFrameForCreate) {
        _this.beans.animationFrameService.addDestroyTask(function() {
          if (!_this.isAlive()) {
            return;
          }
          gui.rowComp.addOrRemoveCssClass("ag-after-created", true);
        });
      }
    });
    this.executeProcessRowPostCreateFunc();
  };
  RowCtrl2.prototype.addRowDraggerToRow = function(gui) {
    var gow = this.beans.gridOptionsWrapper;
    if (gow.isEnableRangeSelection()) {
      doOnce(function() {
        console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");
      }, "rowDragAndRangeSelectionEnabled");
      return;
    }
    var rowDragComp = new RowDragComp(function() {
      return "1 row";
    }, this.rowNode, void 0, gui.element, void 0, true);
    this.createManagedBean(rowDragComp, this.beans.context);
  };
  RowCtrl2.prototype.setupFullWidth = function(gui) {
    var pinned = this.getPinnedForContainer(gui.containerType);
    var params = this.createFullWidthParams(gui.element, pinned);
    var masterDetailModuleLoaded = ModuleRegistry.isRegistered(ModuleNames.MasterDetailModule);
    if (this.rowType == RowType$1.FullWidthDetail && !masterDetailModuleLoaded) {
      if (ModuleRegistry.isPackageBased()) {
        console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with ag-grid-enterprise package.");
      } else {
        console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with AG Grid Enterprise Module " + ModuleNames.MasterDetailModule);
      }
      return;
    }
    var compDetails;
    switch (this.rowType) {
      case RowType$1.FullWidthDetail:
        compDetails = this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(params);
        break;
      case RowType$1.FullWidthGroup:
        compDetails = this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(params);
        break;
      case RowType$1.FullWidthLoading:
        compDetails = this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(params);
        break;
      default:
        compDetails = this.beans.userComponentFactory.getFullWidthCellRendererDetails(params);
        break;
    }
    gui.rowComp.showFullWidth(compDetails);
  };
  RowCtrl2.prototype.isPrintLayout = function() {
    return this.printLayout;
  };
  RowCtrl2.prototype.getCellElement = function(column) {
    var cellCtrl = this.getCellCtrl(column);
    return cellCtrl ? cellCtrl.getGui() : null;
  };
  RowCtrl2.prototype.executeProcessRowPostCreateFunc = function() {
    var func = this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();
    if (!func) {
      return;
    }
    var params = {
      eRow: this.centerGui ? this.centerGui.element : void 0,
      ePinnedLeftRow: this.leftGui ? this.leftGui.element : void 0,
      ePinnedRightRow: this.rightGui ? this.rightGui.element : void 0,
      node: this.rowNode,
      rowIndex: this.rowNode.rowIndex,
      addRenderedRowListener: this.addEventListener.bind(this)
    };
    func(params);
  };
  RowCtrl2.prototype.setRowType = function() {
    var isStub = this.rowNode.stub;
    var isFullWidthCell = this.rowNode.isFullWidthCell();
    var isDetailCell = this.beans.doingMasterDetail && this.rowNode.detail;
    var pivotMode = this.beans.columnModel.isPivotMode();
    var isGroupRow = !!this.rowNode.group && !this.rowNode.footer;
    var isFullWidthGroup = isGroupRow && this.beans.gridOptionsWrapper.isGroupUseEntireRow(pivotMode);
    if (isStub) {
      this.rowType = RowType$1.FullWidthLoading;
    } else if (isDetailCell) {
      this.rowType = RowType$1.FullWidthDetail;
    } else if (isFullWidthCell) {
      this.rowType = RowType$1.FullWidth;
    } else if (isFullWidthGroup) {
      this.rowType = RowType$1.FullWidthGroup;
    } else {
      this.rowType = RowType$1.Normal;
    }
  };
  RowCtrl2.prototype.updateColumnLists = function(suppressAnimationFrame) {
    var _this = this;
    if (suppressAnimationFrame === void 0) {
      suppressAnimationFrame = false;
    }
    if (this.isFullWidth()) {
      return;
    }
    var noAnimation = suppressAnimationFrame || this.beans.gridOptionsWrapper.isSuppressAnimationFrame() || this.printLayout;
    if (noAnimation) {
      this.updateColumnListsImpl();
      return;
    }
    if (this.updateColumnListsPending) {
      return;
    }
    this.beans.animationFrameService.createTask(function() {
      if (!_this.active) {
        return;
      }
      _this.updateColumnListsImpl();
    }, this.rowNode.rowIndex, "createTasksP1");
    this.updateColumnListsPending = true;
  };
  RowCtrl2.prototype.createCellCtrls = function(prev, cols, pinned) {
    var _this = this;
    if (pinned === void 0) {
      pinned = null;
    }
    var res = {
      list: [],
      map: {}
    };
    var addCell = function(colInstanceId, cellCtrl) {
      res.list.push(cellCtrl);
      res.map[colInstanceId] = cellCtrl;
    };
    cols.forEach(function(col) {
      var colInstanceId = col.getInstanceId();
      var cellCtrl = prev.map[colInstanceId];
      if (!cellCtrl) {
        cellCtrl = new CellCtrl(col, _this.rowNode, _this.beans, _this);
      }
      addCell(colInstanceId, cellCtrl);
    });
    prev.list.forEach(function(prevCellCtrl) {
      var cellInResult = res.map[prevCellCtrl.getColumn().getInstanceId()] != null;
      if (cellInResult) {
        return;
      }
      var keepCell = !_this.isCellEligibleToBeRemoved(prevCellCtrl, pinned);
      if (keepCell) {
        addCell(prevCellCtrl.getColumn().getInstanceId(), prevCellCtrl);
        return;
      }
      prevCellCtrl.destroy();
    });
    return res;
  };
  RowCtrl2.prototype.updateColumnListsImpl = function() {
    var _this = this;
    this.updateColumnListsPending = false;
    var columnModel = this.beans.columnModel;
    if (this.printLayout) {
      this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, columnModel.getAllDisplayedColumns());
      this.leftCellCtrls = { list: [], map: {} };
      this.rightCellCtrls = { list: [], map: {} };
    } else {
      var centerCols = columnModel.getViewportCenterColumnsForRow(this.rowNode);
      this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, centerCols);
      var leftCols = columnModel.getDisplayedLeftColumnsForRow(this.rowNode);
      this.leftCellCtrls = this.createCellCtrls(this.leftCellCtrls, leftCols, Constants.PINNED_LEFT);
      var rightCols = columnModel.getDisplayedRightColumnsForRow(this.rowNode);
      this.rightCellCtrls = this.createCellCtrls(this.rightCellCtrls, rightCols, Constants.PINNED_RIGHT);
    }
    this.allRowGuis.forEach(function(item) {
      var cellControls = item.containerType === RowContainerType.LEFT ? _this.leftCellCtrls : item.containerType === RowContainerType.RIGHT ? _this.rightCellCtrls : _this.centerCellCtrls;
      item.rowComp.setCellCtrls(cellControls.list);
    });
  };
  RowCtrl2.prototype.isCellEligibleToBeRemoved = function(cellCtrl, nextContainerPinned) {
    var REMOVE_CELL = true;
    var KEEP_CELL = false;
    var column = cellCtrl.getColumn();
    if (column.getPinned() != nextContainerPinned) {
      return REMOVE_CELL;
    }
    var editing = cellCtrl.isEditing();
    var focused = this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());
    var mightWantToKeepCell = editing || focused;
    if (mightWantToKeepCell) {
      var column_1 = cellCtrl.getColumn();
      var displayedColumns = this.beans.columnModel.getAllDisplayedColumns();
      var cellStillDisplayed = displayedColumns.indexOf(column_1) >= 0;
      return cellStillDisplayed ? KEEP_CELL : REMOVE_CELL;
    }
    return REMOVE_CELL;
  };
  RowCtrl2.prototype.setAnimateFlags = function(animateIn) {
    if (!this.isSticky() && animateIn) {
      var oldRowTopExists = exists(this.rowNode.oldRowTop);
      this.slideRowIn = oldRowTopExists;
      this.fadeRowIn = !oldRowTopExists;
    } else {
      this.slideRowIn = false;
      this.fadeRowIn = false;
    }
  };
  RowCtrl2.prototype.isEditing = function() {
    return this.editingRow;
  };
  RowCtrl2.prototype.stopRowEditing = function(cancel) {
    this.stopEditing(cancel);
  };
  RowCtrl2.prototype.isFullWidth = function() {
    return this.rowType !== RowType$1.Normal;
  };
  RowCtrl2.prototype.getRowType = function() {
    return this.rowType;
  };
  RowCtrl2.prototype.refreshFullWidth = function() {
    var _this = this;
    var tryRefresh = function(gui, pinned) {
      if (!gui) {
        return true;
      }
      var cellRenderer = gui.rowComp.getFullWidthCellRenderer();
      if (!cellRenderer) {
        return false;
      }
      if (!cellRenderer.refresh) {
        return false;
      }
      var params = _this.createFullWidthParams(gui.element, pinned);
      var refreshSucceeded = cellRenderer.refresh(params);
      return refreshSucceeded;
    };
    var fullWidthSuccess = tryRefresh(this.fullWidthGui, null);
    var centerSuccess = tryRefresh(this.centerGui, null);
    var leftSuccess = tryRefresh(this.leftGui, Constants.PINNED_LEFT);
    var rightSuccess = tryRefresh(this.rightGui, Constants.PINNED_RIGHT);
    var allFullWidthRowsRefreshed = fullWidthSuccess && centerSuccess && leftSuccess && rightSuccess;
    return allFullWidthRowsRefreshed;
  };
  RowCtrl2.prototype.addListeners = function() {
    this.addManagedListener(this.rowNode, RowNode.EVENT_HEIGHT_CHANGED, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, this.onRowIndexChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_TOP_CHANGED, this.onTopChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, this.updateExpandedCss.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, this.updateExpandedCss.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onRowNodeDataChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.onRowNodeCellChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_HIGHLIGHT_CHANGED, this.onRowNodeHighlightChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_DRAGGING_CHANGED, this.onRowNodeDraggingChanged.bind(this));
    this.addManagedListener(this.rowNode, RowNode.EVENT_UI_LEVEL_CHANGED, this.onUiLevelChanged.bind(this));
    var eventService = this.beans.eventService;
    this.addManagedListener(eventService, Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED, this.onPaginationPixelOffsetChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, this.onTopChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_CELL_FOCUSED, this.onCellFocusChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));
    this.addManagedListener(eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));
    this.addManagedListener(eventService, Events.EVENT_COLUMN_MOVED, this.onColumnMoved.bind(this));
    this.addListenersForCellComps();
  };
  RowCtrl2.prototype.onColumnMoved = function() {
    this.updateColumnLists();
  };
  RowCtrl2.prototype.addListenersForCellComps = function() {
    var _this = this;
    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, function() {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onRowIndexChanged();
      });
    });
    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, function(event) {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onCellChanged(event);
      });
    });
  };
  RowCtrl2.prototype.onRowNodeDataChanged = function(event) {
    this.getAllCellCtrls().forEach(function(cellCtrl) {
      return cellCtrl.refreshCell({
        suppressFlash: !event.update,
        newData: !event.update
      });
    });
    this.onRowSelected();
    this.postProcessCss();
  };
  RowCtrl2.prototype.onRowNodeCellChanged = function() {
    this.postProcessCss();
  };
  RowCtrl2.prototype.postProcessCss = function() {
    this.setStylesFromGridOptions();
    this.postProcessClassesFromGridOptions();
    this.postProcessRowClassRules();
    this.postProcessRowDragging();
  };
  RowCtrl2.prototype.onRowNodeHighlightChanged = function() {
    var highlighted = this.rowNode.highlighted;
    this.allRowGuis.forEach(function(gui) {
      var aboveOn = highlighted === RowHighlightPosition.Above;
      var belowOn = highlighted === RowHighlightPosition.Below;
      gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above", aboveOn);
      gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below", belowOn);
    });
  };
  RowCtrl2.prototype.onRowNodeDraggingChanged = function() {
    this.postProcessRowDragging();
  };
  RowCtrl2.prototype.postProcessRowDragging = function() {
    var dragging = this.rowNode.dragging;
    this.allRowGuis.forEach(function(gui) {
      return gui.rowComp.addOrRemoveCssClass("ag-row-dragging", dragging);
    });
  };
  RowCtrl2.prototype.updateExpandedCss = function() {
    var expandable = this.rowNode.isExpandable();
    var expanded = this.rowNode.expanded == true;
    this.allRowGuis.forEach(function(gui) {
      gui.rowComp.addOrRemoveCssClass("ag-row-group", expandable);
      gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded", expandable && expanded);
      gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted", expandable && !expanded);
      setAriaExpanded(gui.element, expandable && expanded);
    });
  };
  RowCtrl2.prototype.onDisplayedColumnsChanged = function() {
    this.updateColumnLists(true);
    if (this.beans.columnModel.wasAutoRowHeightEverActive()) {
      this.rowNode.checkAutoHeights();
    }
  };
  RowCtrl2.prototype.onVirtualColumnsChanged = function() {
    this.updateColumnLists();
  };
  RowCtrl2.prototype.getRowPosition = function() {
    return {
      rowPinned: makeNull(this.rowNode.rowPinned),
      rowIndex: this.rowNode.rowIndex
    };
  };
  RowCtrl2.prototype.onKeyboardNavigate = function(keyboardEvent) {
    var currentFullWidthComp = this.allRowGuis.find(function(c2) {
      return c2.element.contains(keyboardEvent.target);
    });
    var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;
    var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;
    if (!isFullWidthContainerFocused) {
      return;
    }
    var node = this.rowNode;
    var lastFocusedCell = this.beans.focusService.getFocusedCell();
    var cellPosition = {
      rowIndex: node.rowIndex,
      rowPinned: node.rowPinned,
      column: lastFocusedCell && lastFocusedCell.column
    };
    this.beans.navigationService.navigateToNextCell(keyboardEvent, keyboardEvent.key, cellPosition, true);
    keyboardEvent.preventDefault();
  };
  RowCtrl2.prototype.onTabKeyDown = function(keyboardEvent) {
    if (keyboardEvent.defaultPrevented || isStopPropagationForAgGrid(keyboardEvent)) {
      return;
    }
    var currentFullWidthComp = this.allRowGuis.find(function(c2) {
      return c2.element.contains(keyboardEvent.target);
    });
    var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;
    var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;
    var nextEl = null;
    if (!isFullWidthContainerFocused) {
      nextEl = this.beans.focusService.findNextFocusableElement(currentFullWidthContainer, false, keyboardEvent.shiftKey);
    }
    if (this.isFullWidth() && isFullWidthContainerFocused || !nextEl) {
      this.beans.navigationService.onTabKeyDown(this, keyboardEvent);
    }
  };
  RowCtrl2.prototype.onFullWidthRowFocused = function(event) {
    var _a2;
    var node = this.rowNode;
    var isFocused = this.isFullWidth() && event.rowIndex === node.rowIndex && event.rowPinned == node.rowPinned;
    var element = this.fullWidthGui ? this.fullWidthGui.element : (_a2 = this.centerGui) === null || _a2 === void 0 ? void 0 : _a2.element;
    if (!element) {
      return;
    }
    element.classList.toggle("ag-full-width-focus", isFocused);
    if (isFocused) {
      element.focus({ preventScroll: true });
    }
  };
  RowCtrl2.prototype.refreshCell = function(cellCtrl) {
    this.centerCellCtrls = this.removeCellCtrl(this.centerCellCtrls, cellCtrl);
    this.leftCellCtrls = this.removeCellCtrl(this.leftCellCtrls, cellCtrl);
    this.rightCellCtrls = this.removeCellCtrl(this.rightCellCtrls, cellCtrl);
    this.updateColumnLists();
  };
  RowCtrl2.prototype.removeCellCtrl = function(prev, cellCtrlToRemove) {
    var res = {
      list: [],
      map: {}
    };
    prev.list.forEach(function(cellCtrl) {
      if (cellCtrl === cellCtrlToRemove) {
        return;
      }
      res.list.push(cellCtrl);
      res.map[cellCtrl.getInstanceId()] = cellCtrl;
    });
    return res;
  };
  RowCtrl2.prototype.onMouseEvent = function(eventName, mouseEvent) {
    switch (eventName) {
      case "dblclick":
        this.onRowDblClick(mouseEvent);
        break;
      case "click":
        this.onRowClick(mouseEvent);
        break;
      case "touchstart":
      case "mousedown":
        this.onRowMouseDown(mouseEvent);
        break;
    }
  };
  RowCtrl2.prototype.createRowEvent = function(type, domEvent) {
    return {
      type,
      node: this.rowNode,
      data: this.rowNode.data,
      rowIndex: this.rowNode.rowIndex,
      rowPinned: this.rowNode.rowPinned,
      context: this.beans.gridOptionsWrapper.getContext(),
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      event: domEvent
    };
  };
  RowCtrl2.prototype.createRowEventWithSource = function(type, domEvent) {
    var event = this.createRowEvent(type, domEvent);
    event.source = this;
    return event;
  };
  RowCtrl2.prototype.onRowDblClick = function(mouseEvent) {
    if (isStopPropagationForAgGrid(mouseEvent)) {
      return;
    }
    var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED, mouseEvent);
    this.beans.eventService.dispatchEvent(agEvent);
  };
  RowCtrl2.prototype.onRowMouseDown = function(mouseEvent) {
    this.lastMouseDownOnDragger = isElementChildOfClass(mouseEvent.target, "ag-row-drag", 3);
    if (!this.isFullWidth()) {
      return;
    }
    var node = this.rowNode;
    var columnModel = this.beans.columnModel;
    if (this.beans.rangeService) {
      this.beans.rangeService.removeAllCellRanges();
    }
    this.beans.focusService.setFocusedCell({
      rowIndex: node.rowIndex,
      column: columnModel.getAllDisplayedColumns()[0],
      rowPinned: node.rowPinned,
      forceBrowserFocus: true
    });
  };
  RowCtrl2.prototype.onRowClick = function(mouseEvent) {
    var stop = isStopPropagationForAgGrid(mouseEvent) || this.lastMouseDownOnDragger;
    if (stop) {
      return;
    }
    var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_CLICKED, mouseEvent);
    this.beans.eventService.dispatchEvent(agEvent);
    var multiSelectKeyPressed = mouseEvent.ctrlKey || mouseEvent.metaKey;
    var shiftKeyPressed = mouseEvent.shiftKey;
    var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
    if (groupSelectsChildren && this.rowNode.group || !this.rowNode.selectable || this.rowNode.rowPinned || !this.beans.gridOptionsWrapper.isRowSelection() || this.beans.gridOptionsWrapper.isSuppressRowClickSelection()) {
      return;
    }
    var multiSelectOnClick = this.beans.gridOptionsWrapper.isRowMultiSelectWithClick();
    var rowDeselectionWithCtrl = !this.beans.gridOptionsWrapper.isSuppressRowDeselection();
    if (this.rowNode.isSelected()) {
      if (multiSelectOnClick) {
        this.rowNode.setSelectedParams({ newValue: false, event: mouseEvent });
      } else if (multiSelectKeyPressed) {
        if (rowDeselectionWithCtrl) {
          this.rowNode.setSelectedParams({ newValue: false, event: mouseEvent });
        }
      } else {
        this.rowNode.setSelectedParams({ newValue: true, clearSelection: !shiftKeyPressed, rangeSelect: shiftKeyPressed, event: mouseEvent });
      }
    } else {
      var clearSelection = multiSelectOnClick ? false : !multiSelectKeyPressed;
      this.rowNode.setSelectedParams({ newValue: true, clearSelection, rangeSelect: shiftKeyPressed, event: mouseEvent });
    }
  };
  RowCtrl2.prototype.setupDetailRowAutoHeight = function(eDetailGui) {
    var _this = this;
    if (this.rowType !== RowType$1.FullWidthDetail) {
      return;
    }
    if (!this.beans.gridOptionsWrapper.isDetailRowAutoHeight()) {
      return;
    }
    var checkRowSizeFunc = function() {
      var clientHeight = eDetailGui.clientHeight;
      if (clientHeight != null && clientHeight > 0) {
        var updateRowHeightFunc = function() {
          _this.rowNode.setRowHeight(clientHeight);
          if (_this.beans.clientSideRowModel) {
            _this.beans.clientSideRowModel.onRowHeightChanged();
          } else if (_this.beans.serverSideRowModel) {
            _this.beans.serverSideRowModel.onRowHeightChanged();
          }
        };
        _this.beans.frameworkOverrides.setTimeout(updateRowHeightFunc, 0);
      }
    };
    var resizeObserverDestroyFunc = this.beans.resizeObserverService.observeResize(eDetailGui, checkRowSizeFunc);
    this.addDestroyFunc(resizeObserverDestroyFunc);
    checkRowSizeFunc();
  };
  RowCtrl2.prototype.createFullWidthParams = function(eRow, pinned) {
    var _this = this;
    var params = {
      fullWidth: true,
      data: this.rowNode.data,
      node: this.rowNode,
      value: this.rowNode.key,
      valueFormatted: this.rowNode.key,
      rowIndex: this.rowNode.rowIndex,
      api: this.beans.gridOptionsWrapper.getApi(),
      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
      context: this.beans.gridOptionsWrapper.getContext(),
      eGridCell: eRow,
      eParentOfValue: eRow,
      pinned,
      addRenderedRowListener: this.addEventListener.bind(this),
      registerRowDragger: function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
        return _this.addFullWidthRowDragging(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange);
      }
    };
    return params;
  };
  RowCtrl2.prototype.addFullWidthRowDragging = function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
    if (value === void 0) {
      value = "";
    }
    if (!this.isFullWidth()) {
      return;
    }
    var rowDragComp = new RowDragComp(function() {
      return value;
    }, this.rowNode, void 0, rowDraggerElement, dragStartPixels, suppressVisibilityChange);
    this.createManagedBean(rowDragComp, this.beans.context);
  };
  RowCtrl2.prototype.onUiLevelChanged = function() {
    var newLevel = this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);
    if (this.rowLevel != newLevel) {
      var classToAdd_1 = "ag-row-level-" + newLevel;
      var classToRemove_1 = "ag-row-level-" + this.rowLevel;
      this.allRowGuis.forEach(function(gui) {
        gui.rowComp.addOrRemoveCssClass(classToAdd_1, true);
        gui.rowComp.addOrRemoveCssClass(classToRemove_1, false);
      });
    }
    this.rowLevel = newLevel;
  };
  RowCtrl2.prototype.isFirstRowOnPage = function() {
    return this.rowNode.rowIndex === this.beans.paginationProxy.getPageFirstRow();
  };
  RowCtrl2.prototype.isLastRowOnPage = function() {
    return this.rowNode.rowIndex === this.beans.paginationProxy.getPageLastRow();
  };
  RowCtrl2.prototype.onModelUpdated = function() {
    this.refreshFirstAndLastRowStyles();
  };
  RowCtrl2.prototype.refreshFirstAndLastRowStyles = function() {
    var newFirst = this.isFirstRowOnPage();
    var newLast = this.isLastRowOnPage();
    if (this.firstRowOnPage !== newFirst) {
      this.firstRowOnPage = newFirst;
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass("ag-row-first", newFirst);
      });
    }
    if (this.lastRowOnPage !== newLast) {
      this.lastRowOnPage = newLast;
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass("ag-row-last", newLast);
      });
    }
  };
  RowCtrl2.prototype.stopEditing = function(cancel) {
    var e_1, _a2;
    if (cancel === void 0) {
      cancel = false;
    }
    if (this.stoppingRowEdit) {
      return;
    }
    var cellControls = this.getAllCellCtrls();
    var isRowEdit = this.editingRow;
    this.stoppingRowEdit = true;
    var fireRowEditEvent = false;
    try {
      for (var cellControls_1 = __values$2(cellControls), cellControls_1_1 = cellControls_1.next(); !cellControls_1_1.done; cellControls_1_1 = cellControls_1.next()) {
        var ctrl = cellControls_1_1.value;
        var valueChanged = ctrl.stopEditing(cancel);
        if (isRowEdit && !cancel && !fireRowEditEvent && valueChanged) {
          fireRowEditEvent = true;
        }
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (cellControls_1_1 && !cellControls_1_1.done && (_a2 = cellControls_1.return))
          _a2.call(cellControls_1);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
    if (fireRowEditEvent) {
      var event_1 = this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);
      this.beans.eventService.dispatchEvent(event_1);
    }
    if (isRowEdit) {
      this.setEditingRow(false);
    }
    this.stoppingRowEdit = false;
  };
  RowCtrl2.prototype.setInlineEditingCss = function(editing) {
    this.allRowGuis.forEach(function(gui) {
      gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing", editing);
      gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing", !editing);
    });
  };
  RowCtrl2.prototype.setEditingRow = function(value) {
    this.editingRow = value;
    this.allRowGuis.forEach(function(gui) {
      return gui.rowComp.addOrRemoveCssClass("ag-row-editing", value);
    });
    var event = value ? this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED) : this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);
    this.beans.eventService.dispatchEvent(event);
  };
  RowCtrl2.prototype.startRowEditing = function(key, charPress, sourceRenderedCell, event) {
    if (key === void 0) {
      key = null;
    }
    if (charPress === void 0) {
      charPress = null;
    }
    if (sourceRenderedCell === void 0) {
      sourceRenderedCell = null;
    }
    if (event === void 0) {
      event = null;
    }
    if (this.editingRow) {
      return;
    }
    this.getAllCellCtrls().forEach(function(cellCtrl) {
      var cellStartedEdit = cellCtrl === sourceRenderedCell;
      if (cellStartedEdit) {
        cellCtrl.startEditing(key, charPress, cellStartedEdit, event);
      } else {
        cellCtrl.startEditing(null, null, cellStartedEdit, event);
      }
    });
    this.setEditingRow(true);
  };
  RowCtrl2.prototype.getAllCellCtrls = function() {
    var res = __spread$c(this.centerCellCtrls.list, this.leftCellCtrls.list, this.rightCellCtrls.list);
    return res;
  };
  RowCtrl2.prototype.postProcessClassesFromGridOptions = function() {
    var _this = this;
    var cssClasses = this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);
    if (!cssClasses || !cssClasses.length) {
      return;
    }
    cssClasses.forEach(function(classStr) {
      _this.allRowGuis.forEach(function(c2) {
        return c2.rowComp.addOrRemoveCssClass(classStr, true);
      });
    });
  };
  RowCtrl2.prototype.postProcessRowClassRules = function() {
    var _this = this;
    this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode, function(className) {
      _this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass(className, true);
      });
    }, function(className) {
      _this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass(className, false);
      });
    });
  };
  RowCtrl2.prototype.setStylesFromGridOptions = function() {
    var rowStyles = this.processStylesFromGridOptions();
    this.allRowGuis.forEach(function(gui) {
      return gui.rowComp.setUserStyles(rowStyles);
    });
  };
  RowCtrl2.prototype.getRowBusinessKey = function() {
    var businessKeyForNodeFunc = this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();
    if (typeof businessKeyForNodeFunc !== "function") {
      return;
    }
    return businessKeyForNodeFunc(this.rowNode);
  };
  RowCtrl2.prototype.getPinnedForContainer = function(rowContainerType) {
    var pinned = rowContainerType === RowContainerType.LEFT ? Constants.PINNED_LEFT : rowContainerType === RowContainerType.RIGHT ? Constants.PINNED_RIGHT : null;
    return pinned;
  };
  RowCtrl2.prototype.getInitialRowClasses = function(rowContainerType) {
    var pinned = this.getPinnedForContainer(rowContainerType);
    var params = {
      rowNode: this.rowNode,
      rowFocused: this.rowFocused,
      fadeRowIn: this.fadeRowIn,
      rowIsEven: this.rowNode.rowIndex % 2 === 0,
      rowLevel: this.rowLevel,
      fullWidthRow: this.isFullWidth(),
      firstRowOnPage: this.isFirstRowOnPage(),
      lastRowOnPage: this.isLastRowOnPage(),
      printLayout: this.printLayout,
      expandable: this.rowNode.isExpandable(),
      pinned
    };
    return this.beans.rowCssClassCalculator.getInitialRowClasses(params);
  };
  RowCtrl2.prototype.processStylesFromGridOptions = function() {
    var rowStyle = this.beans.gridOptionsWrapper.getRowStyle();
    if (rowStyle && typeof rowStyle === "function") {
      console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");
      return;
    }
    var rowStyleFunc = this.beans.gridOptionsWrapper.getRowStyleFunc();
    var rowStyleFuncResult;
    if (rowStyleFunc) {
      var params = {
        data: this.rowNode.data,
        node: this.rowNode,
        rowIndex: this.rowNode.rowIndex
      };
      rowStyleFuncResult = rowStyleFunc(params);
    }
    return Object.assign({}, rowStyle, rowStyleFuncResult);
  };
  RowCtrl2.prototype.onRowSelected = function() {
    var _this = this;
    var selected = !!this.rowNode.isSelected();
    this.allRowGuis.forEach(function(gui) {
      gui.rowComp.addOrRemoveCssClass("ag-row-selected", selected);
      setAriaSelected(gui.element, selected ? true : void 0);
      var ariaLabel = _this.createAriaLabel();
      setAriaLabel(gui.element, ariaLabel == null ? "" : ariaLabel);
    });
  };
  RowCtrl2.prototype.createAriaLabel = function() {
    var selected = this.rowNode.isSelected();
    if (selected && this.beans.gridOptionsWrapper.isSuppressRowDeselection()) {
      return void 0;
    }
    var translate2 = this.beans.gridOptionsWrapper.getLocaleTextFunc();
    var label = translate2(selected ? "ariaRowDeselect" : "ariaRowSelect", "Press SPACE to " + (selected ? "deselect" : "select") + " this row.");
    return label;
  };
  RowCtrl2.prototype.isUseAnimationFrameForCreate = function() {
    return this.useAnimationFrameForCreate;
  };
  RowCtrl2.prototype.addHoverFunctionality = function(eRow) {
    var _this = this;
    if (!this.active) {
      return;
    }
    this.addManagedListener(eRow, "mouseenter", function() {
      return _this.rowNode.onMouseEnter();
    });
    this.addManagedListener(eRow, "mouseleave", function() {
      return _this.rowNode.onMouseLeave();
    });
    this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_ENTER, function() {
      if (!_this.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()) {
        eRow.classList.add("ag-row-hover");
      }
    });
    this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_LEAVE, function() {
      eRow.classList.remove("ag-row-hover");
    });
  };
  RowCtrl2.prototype.roundRowTopToBounds = function(rowTop) {
    var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();
    var range = gridBodyCon.getScrollFeature().getVScrollPosition();
    var minPixel = this.applyPaginationOffset(range.top, true) - 100;
    var maxPixel = this.applyPaginationOffset(range.bottom, true) + 100;
    return Math.min(Math.max(minPixel, rowTop), maxPixel);
  };
  RowCtrl2.prototype.getFrameworkOverrides = function() {
    return this.beans.frameworkOverrides;
  };
  RowCtrl2.prototype.onRowHeightChanged = function() {
    if (this.rowNode.rowHeight == null) {
      return;
    }
    var rowHeight = this.rowNode.rowHeight;
    var defaultRowHeight = this.beans.gridOptionsWrapper.getDefaultRowHeight();
    var isHeightFromFunc = this.beans.gridOptionsWrapper.isGetRowHeightFunction();
    var heightFromFunc = isHeightFromFunc ? this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height : void 0;
    var lineHeight = heightFromFunc ? Math.min(defaultRowHeight, heightFromFunc) - 2 + "px" : void 0;
    this.allRowGuis.forEach(function(gui) {
      gui.element.style.height = rowHeight + "px";
      if (lineHeight) {
        gui.element.style.setProperty("--ag-line-height", lineHeight);
      }
    });
  };
  RowCtrl2.prototype.addEventListener = function(eventType, listener) {
    if (eventType === "renderedRowRemoved" || eventType === "rowRemoved") {
      eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;
      console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called " + Events.EVENT_VIRTUAL_ROW_REMOVED);
    }
    _super.prototype.addEventListener.call(this, eventType, listener);
  };
  RowCtrl2.prototype.removeEventListener = function(eventType, listener) {
    if (eventType === "renderedRowRemoved" || eventType === "rowRemoved") {
      eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;
      console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called " + Events.EVENT_VIRTUAL_ROW_REMOVED);
    }
    _super.prototype.removeEventListener.call(this, eventType, listener);
  };
  RowCtrl2.prototype.destroyFirstPass = function() {
    this.active = false;
    this.setupRemoveAnimation();
    var event = this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);
    this.dispatchEvent(event);
    this.beans.eventService.dispatchEvent(event);
    _super.prototype.destroy.call(this);
  };
  RowCtrl2.prototype.setupRemoveAnimation = function() {
    if (this.isSticky()) {
      return;
    }
    var rowStillVisibleJustNotInViewport = this.rowNode.rowTop != null;
    if (rowStillVisibleJustNotInViewport) {
      var rowTop = this.roundRowTopToBounds(this.rowNode.rowTop);
      this.setRowTop(rowTop);
    } else {
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero", true);
      });
    }
  };
  RowCtrl2.prototype.destroySecondPass = function() {
    this.allRowGuis.length = 0;
    var destroyCellCtrls = function(ctrls) {
      ctrls.list.forEach(function(c2) {
        return c2.destroy();
      });
      return { list: [], map: {} };
    };
    this.centerCellCtrls = destroyCellCtrls(this.centerCellCtrls);
    this.leftCellCtrls = destroyCellCtrls(this.leftCellCtrls);
    this.rightCellCtrls = destroyCellCtrls(this.rightCellCtrls);
  };
  RowCtrl2.prototype.setFocusedClasses = function() {
    var _this = this;
    this.allRowGuis.forEach(function(gui) {
      gui.rowComp.addOrRemoveCssClass("ag-row-focus", _this.rowFocused);
      gui.rowComp.addOrRemoveCssClass("ag-row-no-focus", !_this.rowFocused);
    });
  };
  RowCtrl2.prototype.onCellFocusChanged = function() {
    var rowFocused = this.beans.focusService.isRowFocused(this.rowNode.rowIndex, this.rowNode.rowPinned);
    if (rowFocused !== this.rowFocused) {
      this.rowFocused = rowFocused;
      this.setFocusedClasses();
    }
    if (!rowFocused && this.editingRow) {
      this.stopEditing(false);
    }
  };
  RowCtrl2.prototype.onPaginationChanged = function() {
    var currentPage = this.beans.paginationProxy.getCurrentPage();
    if (this.paginationPage !== currentPage) {
      this.paginationPage = currentPage;
      this.onTopChanged();
    }
    this.refreshFirstAndLastRowStyles();
  };
  RowCtrl2.prototype.onTopChanged = function() {
    this.setRowTop(this.rowNode.rowTop);
  };
  RowCtrl2.prototype.onPaginationPixelOffsetChanged = function() {
    this.onTopChanged();
  };
  RowCtrl2.prototype.applyPaginationOffset = function(topPx, reverse) {
    if (reverse === void 0) {
      reverse = false;
    }
    if (this.rowNode.isRowPinned()) {
      return topPx;
    }
    var pixelOffset = this.beans.paginationProxy.getPixelOffset();
    var multiplier = reverse ? 1 : -1;
    return topPx + pixelOffset * multiplier;
  };
  RowCtrl2.prototype.setRowTop = function(pixels) {
    if (this.printLayout) {
      return;
    }
    if (exists(pixels)) {
      var afterPaginationPixels = this.applyPaginationOffset(pixels);
      var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);
      var topPx = afterScalingPixels + "px";
      this.setRowTopStyle(topPx);
    }
  };
  RowCtrl2.prototype.getInitialRowTop = function() {
    var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();
    return suppressRowTransform ? this.getInitialRowTopShared() : void 0;
  };
  RowCtrl2.prototype.getInitialTransform = function() {
    var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();
    return suppressRowTransform ? void 0 : "translateY(" + this.getInitialRowTopShared() + ")";
  };
  RowCtrl2.prototype.getInitialRowTopShared = function() {
    if (this.printLayout) {
      return "";
    }
    var rowTop;
    if (this.isSticky()) {
      rowTop = this.rowNode.stickyRowTop;
    } else {
      var pixels = this.slideRowIn ? this.roundRowTopToBounds(this.rowNode.oldRowTop) : this.rowNode.rowTop;
      var afterPaginationPixels = this.applyPaginationOffset(pixels);
      rowTop = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);
    }
    return rowTop + "px";
  };
  RowCtrl2.prototype.setRowTopStyle = function(topPx) {
    var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();
    this.allRowGuis.forEach(function(gui) {
      return suppressRowTransform ? gui.rowComp.setTop(topPx) : gui.rowComp.setTransform("translateY(" + topPx + ")");
    });
  };
  RowCtrl2.prototype.getRowNode = function() {
    return this.rowNode;
  };
  RowCtrl2.prototype.getCellCtrl = function(column) {
    var res = null;
    this.getAllCellCtrls().forEach(function(cellCtrl) {
      if (cellCtrl.getColumn() == column) {
        res = cellCtrl;
      }
    });
    if (res != null) {
      return res;
    }
    this.getAllCellCtrls().forEach(function(cellCtrl) {
      if (cellCtrl.getColSpanningList().indexOf(column) >= 0) {
        res = cellCtrl;
      }
    });
    return res;
  };
  RowCtrl2.prototype.onRowIndexChanged = function() {
    if (this.rowNode.rowIndex != null) {
      this.onCellFocusChanged();
      this.updateRowIndexes();
      this.postProcessCss();
    }
  };
  RowCtrl2.prototype.updateRowIndexes = function() {
    var rowIndexStr = this.rowNode.getRowIndexString();
    var headerRowCount = this.beans.headerNavigationService.getHeaderRowCount();
    var rowIsEven = this.rowNode.rowIndex % 2 === 0;
    var ariaRowIndex = headerRowCount + this.rowNode.rowIndex + 1;
    this.allRowGuis.forEach(function(c2) {
      c2.rowComp.setRowIndex(rowIndexStr);
      c2.rowComp.addOrRemoveCssClass("ag-row-even", rowIsEven);
      c2.rowComp.addOrRemoveCssClass("ag-row-odd", !rowIsEven);
      setAriaRowIndex(c2.element, ariaRowIndex);
    });
  };
  RowCtrl2.prototype.getPinnedLeftRowElement = function() {
    return this.leftGui ? this.leftGui.element : void 0;
  };
  RowCtrl2.prototype.getPinnedRightRowElement = function() {
    return this.rightGui ? this.rightGui.element : void 0;
  };
  RowCtrl2.prototype.getBodyRowElement = function() {
    return this.centerGui ? this.centerGui.element : void 0;
  };
  RowCtrl2.prototype.getFullWidthRowElement = function() {
    return this.fullWidthGui ? this.fullWidthGui.element : void 0;
  };
  RowCtrl2.DOM_DATA_KEY_ROW_CTRL = "renderedRow";
  return RowCtrl2;
}(BeanStub);
var __extends$1T = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1M = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$f = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var RowContainerEventsFeature = function(_super) {
  __extends$1T(RowContainerEventsFeature2, _super);
  function RowContainerEventsFeature2(element) {
    var _this = _super.call(this) || this;
    _this.element = element;
    return _this;
  }
  RowContainerEventsFeature2.prototype.postConstruct = function() {
    this.addMouseListeners();
    this.mockContextMenuForIPad();
    this.addKeyboardEvents();
  };
  RowContainerEventsFeature2.prototype.addKeyboardEvents = function() {
    var _this = this;
    var eventNames = ["keydown", "keypress"];
    eventNames.forEach(function(eventName) {
      var listener = _this.processKeyboardEvent.bind(_this, eventName);
      _this.addManagedListener(_this.element, eventName, listener);
    });
  };
  RowContainerEventsFeature2.prototype.addMouseListeners = function() {
    var _this = this;
    var mouseDownEvent = isEventSupported("touchstart") ? "touchstart" : "mousedown";
    var eventNames = ["dblclick", "contextmenu", "mouseover", "mouseout", "click", mouseDownEvent];
    eventNames.forEach(function(eventName) {
      var listener = _this.processMouseEvent.bind(_this, eventName);
      _this.addManagedListener(_this.element, eventName, listener);
    });
  };
  RowContainerEventsFeature2.prototype.processMouseEvent = function(eventName, mouseEvent) {
    if (!this.mouseEventService.isEventFromThisGrid(mouseEvent) || isStopPropagationForAgGrid(mouseEvent)) {
      return;
    }
    var rowComp = this.getRowForEvent(mouseEvent);
    var cellCtrl = this.mouseEventService.getRenderedCellForEvent(mouseEvent);
    if (eventName === "contextmenu") {
      this.handleContextMenuMouseEvent(mouseEvent, null, rowComp, cellCtrl);
    } else {
      if (cellCtrl) {
        cellCtrl.onMouseEvent(eventName, mouseEvent);
      }
      if (rowComp) {
        rowComp.onMouseEvent(eventName, mouseEvent);
      }
    }
  };
  RowContainerEventsFeature2.prototype.mockContextMenuForIPad = function() {
    var _this = this;
    if (!isIOSUserAgent()) {
      return;
    }
    var touchListener = new TouchListener(this.element);
    var longTapListener = function(event) {
      var rowComp = _this.getRowForEvent(event.touchEvent);
      var cellComp = _this.mouseEventService.getRenderedCellForEvent(event.touchEvent);
      _this.handleContextMenuMouseEvent(null, event.touchEvent, rowComp, cellComp);
    };
    this.addManagedListener(touchListener, TouchListener.EVENT_LONG_TAP, longTapListener);
    this.addDestroyFunc(function() {
      return touchListener.destroy();
    });
  };
  RowContainerEventsFeature2.prototype.getRowForEvent = function(event) {
    var sourceElement = event.target;
    while (sourceElement) {
      var rowCon = this.gridOptionsWrapper.getDomData(sourceElement, RowCtrl.DOM_DATA_KEY_ROW_CTRL);
      if (rowCon) {
        return rowCon;
      }
      sourceElement = sourceElement.parentElement;
    }
    return null;
  };
  RowContainerEventsFeature2.prototype.handleContextMenuMouseEvent = function(mouseEvent, touchEvent, rowComp, cellCtrl) {
    var rowNode = rowComp ? rowComp.getRowNode() : null;
    var column = cellCtrl ? cellCtrl.getColumn() : null;
    var value = null;
    if (column) {
      var event_1 = mouseEvent ? mouseEvent : touchEvent;
      cellCtrl.dispatchCellContextMenuEvent(event_1);
      value = this.valueService.getValue(column, rowNode);
    }
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var anchorToElement = cellCtrl ? cellCtrl.getGui() : gridBodyCon.getGridBodyElement();
    if (this.contextMenuFactory) {
      this.contextMenuFactory.onContextMenu(mouseEvent, touchEvent, rowNode, column, value, anchorToElement);
    }
  };
  RowContainerEventsFeature2.prototype.processKeyboardEvent = function(eventName, keyboardEvent) {
    var cellComp = getCtrlForEvent(this.gridOptionsWrapper, keyboardEvent, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
    var rowComp = getCtrlForEvent(this.gridOptionsWrapper, keyboardEvent, RowCtrl.DOM_DATA_KEY_ROW_CTRL);
    if (keyboardEvent.defaultPrevented) {
      return;
    }
    if (cellComp) {
      this.processCellKeyboardEvent(cellComp, eventName, keyboardEvent);
    } else if (rowComp && rowComp.isFullWidth()) {
      this.processFullWidthRowKeyboardEvent(rowComp, eventName, keyboardEvent);
    }
  };
  RowContainerEventsFeature2.prototype.processCellKeyboardEvent = function(cellCtrl, eventName, keyboardEvent) {
    var rowNode = cellCtrl.getRowNode();
    var column = cellCtrl.getColumn();
    var editing = cellCtrl.isEditing();
    var gridProcessingAllowed = !isUserSuppressingKeyboardEvent(this.gridOptionsWrapper, keyboardEvent, rowNode, column, editing);
    if (gridProcessingAllowed) {
      switch (eventName) {
        case "keydown":
          var wasScrollKey = !editing && this.navigationService.handlePageScrollingKey(keyboardEvent);
          if (!wasScrollKey) {
            cellCtrl.onKeyDown(keyboardEvent);
          }
          this.doGridOperations(keyboardEvent, cellCtrl.isEditing());
          break;
        case "keypress":
          cellCtrl.onKeyPress(keyboardEvent);
          break;
      }
    }
    if (eventName === "keydown") {
      var cellKeyDownEvent = cellCtrl.createEvent(keyboardEvent, Events.EVENT_CELL_KEY_DOWN);
      this.eventService.dispatchEvent(cellKeyDownEvent);
    }
    if (eventName === "keypress") {
      var cellKeyPressEvent = cellCtrl.createEvent(keyboardEvent, Events.EVENT_CELL_KEY_PRESS);
      this.eventService.dispatchEvent(cellKeyPressEvent);
    }
  };
  RowContainerEventsFeature2.prototype.processFullWidthRowKeyboardEvent = function(rowComp, eventName, keyboardEvent) {
    var rowNode = rowComp.getRowNode();
    var focusedCell = this.focusService.getFocusedCell();
    var column = focusedCell && focusedCell.column;
    var gridProcessingAllowed = !isUserSuppressingKeyboardEvent(this.gridOptionsWrapper, keyboardEvent, rowNode, column, false);
    if (gridProcessingAllowed) {
      var key = keyboardEvent.key;
      if (eventName === "keydown") {
        switch (key) {
          case KeyCode.UP:
          case KeyCode.DOWN:
            rowComp.onKeyboardNavigate(keyboardEvent);
            break;
          case KeyCode.TAB:
            rowComp.onTabKeyDown(keyboardEvent);
        }
      }
    }
    if (eventName === "keydown") {
      var cellKeyDownEvent = rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN, keyboardEvent);
      this.eventService.dispatchEvent(cellKeyDownEvent);
    }
    if (eventName === "keypress") {
      var cellKeyPressEvent = rowComp.createRowEvent(Events.EVENT_CELL_KEY_PRESS, keyboardEvent);
      this.eventService.dispatchEvent(cellKeyPressEvent);
    }
  };
  RowContainerEventsFeature2.prototype.doGridOperations = function(keyboardEvent, editing) {
    if (!keyboardEvent.ctrlKey && !keyboardEvent.metaKey) {
      return;
    }
    if (editing) {
      return;
    }
    if (!this.mouseEventService.isEventFromThisGrid(keyboardEvent)) {
      return;
    }
    var keyCode = normaliseQwertyAzerty(keyboardEvent);
    if (keyCode === KeyCode.A) {
      return this.onCtrlAndA(keyboardEvent);
    }
    if (keyCode === KeyCode.C) {
      return this.onCtrlAndC(keyboardEvent);
    }
    if (keyCode === KeyCode.V) {
      return this.onCtrlAndV();
    }
    if (keyCode === KeyCode.D) {
      return this.onCtrlAndD(keyboardEvent);
    }
    if (keyCode === KeyCode.Z) {
      return keyboardEvent.shiftKey ? this.undoRedoService.redo() : this.undoRedoService.undo();
    }
    if (keyCode === KeyCode.Y) {
      return this.undoRedoService.redo();
    }
  };
  RowContainerEventsFeature2.prototype.onCtrlAndA = function(event) {
    var _a2 = this, pinnedRowModel = _a2.pinnedRowModel, paginationProxy = _a2.paginationProxy, rangeService = _a2.rangeService;
    var PINNED_BOTTOM = Constants.PINNED_BOTTOM, PINNED_TOP = Constants.PINNED_TOP;
    if (rangeService && paginationProxy.isRowsToRender()) {
      var _b = __read$f([
        pinnedRowModel.isEmpty(PINNED_TOP),
        pinnedRowModel.isEmpty(PINNED_BOTTOM)
      ], 2), isEmptyPinnedTop = _b[0], isEmptyPinnedBottom = _b[1];
      var floatingStart = isEmptyPinnedTop ? null : PINNED_TOP;
      var floatingEnd = void 0;
      var rowEnd = void 0;
      if (isEmptyPinnedBottom) {
        floatingEnd = null;
        rowEnd = this.paginationProxy.getRowCount() - 1;
      } else {
        floatingEnd = PINNED_BOTTOM;
        rowEnd = pinnedRowModel.getPinnedBottomRowData().length - 1;
      }
      var allDisplayedColumns = this.columnModel.getAllDisplayedColumns();
      if (missingOrEmpty(allDisplayedColumns)) {
        return;
      }
      rangeService.setCellRange({
        rowStartIndex: 0,
        rowStartPinned: floatingStart,
        rowEndIndex: rowEnd,
        rowEndPinned: floatingEnd,
        columnStart: allDisplayedColumns[0],
        columnEnd: last(allDisplayedColumns)
      });
    }
    event.preventDefault();
  };
  RowContainerEventsFeature2.prototype.onCtrlAndC = function(event) {
    if (!this.clipboardService || this.gridOptionsWrapper.isEnableCellTextSelection()) {
      return;
    }
    this.clipboardService.copyToClipboard();
    event.preventDefault();
  };
  RowContainerEventsFeature2.prototype.onCtrlAndV = function() {
    if (ModuleRegistry.isRegistered(ModuleNames.ClipboardModule) && !this.gridOptionsWrapper.isSuppressClipboardPaste()) {
      this.clipboardService.pasteFromClipboard();
    }
  };
  RowContainerEventsFeature2.prototype.onCtrlAndD = function(event) {
    if (ModuleRegistry.isRegistered(ModuleNames.ClipboardModule) && !this.gridOptionsWrapper.isSuppressClipboardPaste()) {
      this.clipboardService.copyRangeDown();
    }
    event.preventDefault();
  };
  __decorate$1M([
    Autowired("mouseEventService")
  ], RowContainerEventsFeature2.prototype, "mouseEventService", void 0);
  __decorate$1M([
    Autowired("valueService")
  ], RowContainerEventsFeature2.prototype, "valueService", void 0);
  __decorate$1M([
    Optional("contextMenuFactory")
  ], RowContainerEventsFeature2.prototype, "contextMenuFactory", void 0);
  __decorate$1M([
    Autowired("ctrlsService")
  ], RowContainerEventsFeature2.prototype, "ctrlsService", void 0);
  __decorate$1M([
    Autowired("navigationService")
  ], RowContainerEventsFeature2.prototype, "navigationService", void 0);
  __decorate$1M([
    Autowired("focusService")
  ], RowContainerEventsFeature2.prototype, "focusService", void 0);
  __decorate$1M([
    Autowired("undoRedoService")
  ], RowContainerEventsFeature2.prototype, "undoRedoService", void 0);
  __decorate$1M([
    Autowired("columnModel")
  ], RowContainerEventsFeature2.prototype, "columnModel", void 0);
  __decorate$1M([
    Autowired("paginationProxy")
  ], RowContainerEventsFeature2.prototype, "paginationProxy", void 0);
  __decorate$1M([
    Autowired("pinnedRowModel")
  ], RowContainerEventsFeature2.prototype, "pinnedRowModel", void 0);
  __decorate$1M([
    Optional("rangeService")
  ], RowContainerEventsFeature2.prototype, "rangeService", void 0);
  __decorate$1M([
    Optional("clipboardService")
  ], RowContainerEventsFeature2.prototype, "clipboardService", void 0);
  __decorate$1M([
    PostConstruct
  ], RowContainerEventsFeature2.prototype, "postConstruct", null);
  return RowContainerEventsFeature2;
}(BeanStub);
var __extends$1S = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1L = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ViewportSizeFeature = function(_super) {
  __extends$1S(ViewportSizeFeature2, _super);
  function ViewportSizeFeature2(centerContainerCtrl) {
    var _this = _super.call(this) || this;
    _this.centerContainerCtrl = centerContainerCtrl;
    return _this;
  }
  ViewportSizeFeature2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function() {
      _this.gridBodyCtrl = _this.ctrlsService.getGridBodyCtrl();
      _this.listenForResize();
    });
    this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, this.onScrollbarWidthChanged.bind(this));
  };
  ViewportSizeFeature2.prototype.listenForResize = function() {
    var _this = this;
    var listener = function() {
      return _this.onCenterViewportResized();
    };
    this.centerContainerCtrl.registerViewportResizeListener(listener);
    this.gridBodyCtrl.registerBodyViewportResizeListener(listener);
  };
  ViewportSizeFeature2.prototype.onScrollbarWidthChanged = function() {
    this.checkViewportAndScrolls();
  };
  ViewportSizeFeature2.prototype.onCenterViewportResized = function() {
    if (this.centerContainerCtrl.isViewportVisible()) {
      this.checkViewportAndScrolls();
      var newWidth = this.centerContainerCtrl.getCenterWidth();
      if (newWidth !== this.centerWidth) {
        this.centerWidth = newWidth;
        this.columnModel.refreshFlexedColumns({ viewportWidth: this.centerWidth, updateBodyWidths: true, fireResizedEvent: true });
      }
    } else {
      this.bodyHeight = 0;
    }
  };
  ViewportSizeFeature2.prototype.checkViewportAndScrolls = function() {
    this.updateScrollVisibleService();
    this.checkBodyHeight();
    this.onHorizontalViewportChanged();
    this.gridBodyCtrl.getScrollFeature().checkScrollLeft();
  };
  ViewportSizeFeature2.prototype.getBodyHeight = function() {
    return this.bodyHeight;
  };
  ViewportSizeFeature2.prototype.checkBodyHeight = function() {
    var eBodyViewport = this.gridBodyCtrl.getBodyViewportElement();
    var bodyHeight = getInnerHeight(eBodyViewport);
    if (this.bodyHeight !== bodyHeight) {
      this.bodyHeight = bodyHeight;
      var event_1 = {
        type: Events.EVENT_BODY_HEIGHT_CHANGED
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  ViewportSizeFeature2.prototype.updateScrollVisibleService = function() {
    this.updateScrollVisibleServiceImpl();
    setTimeout(this.updateScrollVisibleServiceImpl.bind(this), 500);
  };
  ViewportSizeFeature2.prototype.updateScrollVisibleServiceImpl = function() {
    var params = {
      horizontalScrollShowing: this.isHorizontalScrollShowing(),
      verticalScrollShowing: this.gridBodyCtrl.isVerticalScrollShowing()
    };
    this.scrollVisibleService.setScrollsVisible(params);
    this.gridBodyCtrl.setVerticalScrollPaddingVisible(params.verticalScrollShowing);
  };
  ViewportSizeFeature2.prototype.isHorizontalScrollShowing = function() {
    var isAlwaysShowHorizontalScroll = this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();
    return isAlwaysShowHorizontalScroll || this.centerContainerCtrl.isViewportHScrollShowing();
  };
  ViewportSizeFeature2.prototype.onHorizontalViewportChanged = function() {
    var scrollWidth = this.centerContainerCtrl.getCenterWidth();
    var scrollPosition = this.centerContainerCtrl.getViewportScrollLeft();
    this.columnModel.setViewportPosition(scrollWidth, scrollPosition);
  };
  __decorate$1L([
    Autowired("ctrlsService")
  ], ViewportSizeFeature2.prototype, "ctrlsService", void 0);
  __decorate$1L([
    Autowired("columnModel")
  ], ViewportSizeFeature2.prototype, "columnModel", void 0);
  __decorate$1L([
    Autowired("scrollVisibleService")
  ], ViewportSizeFeature2.prototype, "scrollVisibleService", void 0);
  __decorate$1L([
    PostConstruct
  ], ViewportSizeFeature2.prototype, "postConstruct", null);
  return ViewportSizeFeature2;
}(BeanStub);
var __extends$1R = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1K = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SetPinnedLeftWidthFeature = function(_super) {
  __extends$1R(SetPinnedLeftWidthFeature2, _super);
  function SetPinnedLeftWidthFeature2(element) {
    var _this = _super.call(this) || this;
    _this.element = element;
    return _this;
  }
  SetPinnedLeftWidthFeature2.prototype.postConstruct = function() {
    this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, this.onPinnedLeftWidthChanged.bind(this));
  };
  SetPinnedLeftWidthFeature2.prototype.onPinnedLeftWidthChanged = function() {
    var leftWidth = this.pinnedWidthService.getPinnedLeftWidth();
    var displayed = leftWidth > 0;
    setDisplayed(this.element, displayed);
    if (displayed) {
      setFixedWidth(this.element, leftWidth);
    }
  };
  __decorate$1K([
    Autowired("pinnedWidthService")
  ], SetPinnedLeftWidthFeature2.prototype, "pinnedWidthService", void 0);
  __decorate$1K([
    PostConstruct
  ], SetPinnedLeftWidthFeature2.prototype, "postConstruct", null);
  return SetPinnedLeftWidthFeature2;
}(BeanStub);
var __extends$1Q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1J = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SetPinnedRightWidthFeature = function(_super) {
  __extends$1Q(SetPinnedRightWidthFeature2, _super);
  function SetPinnedRightWidthFeature2(element) {
    var _this = _super.call(this) || this;
    _this.element = element;
    return _this;
  }
  SetPinnedRightWidthFeature2.prototype.postConstruct = function() {
    this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, this.onPinnedRightWidthChanged.bind(this));
  };
  SetPinnedRightWidthFeature2.prototype.onPinnedRightWidthChanged = function() {
    var rightWidth = this.pinnedWidthService.getPinnedRightWidth();
    var displayed = rightWidth > 0;
    setDisplayed(this.element, displayed);
    if (displayed) {
      setFixedWidth(this.element, rightWidth);
    }
  };
  __decorate$1J([
    Autowired("pinnedWidthService")
  ], SetPinnedRightWidthFeature2.prototype, "pinnedWidthService", void 0);
  __decorate$1J([
    PostConstruct
  ], SetPinnedRightWidthFeature2.prototype, "postConstruct", null);
  return SetPinnedRightWidthFeature2;
}(BeanStub);
var __extends$1P = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1I = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SetHeightFeature = function(_super) {
  __extends$1P(SetHeightFeature2, _super);
  function SetHeightFeature2(eContainer, eWrapper) {
    var _this = _super.call(this) || this;
    _this.eContainer = eContainer;
    _this.eWrapper = eWrapper;
    return _this;
  }
  SetHeightFeature2.prototype.postConstruct = function() {
    this.addManagedListener(this.eventService, Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED, this.onHeightChanged.bind(this));
  };
  SetHeightFeature2.prototype.onHeightChanged = function() {
    var height = this.maxDivHeightScaler.getUiContainerHeight();
    var heightString = height != null ? height + "px" : "";
    this.eContainer.style.height = heightString;
    if (this.eWrapper) {
      this.eWrapper.style.height = heightString;
    }
  };
  __decorate$1I([
    Autowired("rowContainerHeightService")
  ], SetHeightFeature2.prototype, "maxDivHeightScaler", void 0);
  __decorate$1I([
    PostConstruct
  ], SetHeightFeature2.prototype, "postConstruct", null);
  return SetHeightFeature2;
}(BeanStub);
var __extends$1O = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1H = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DragListenerFeature = function(_super) {
  __extends$1O(DragListenerFeature2, _super);
  function DragListenerFeature2(eContainer) {
    var _this = _super.call(this) || this;
    _this.eContainer = eContainer;
    return _this;
  }
  DragListenerFeature2.prototype.postConstruct = function() {
    var _this = this;
    if (!this.gridOptionsWrapper.isEnableRangeSelection() || missing(this.rangeService)) {
      return;
    }
    var params = {
      eElement: this.eContainer,
      onDragStart: this.rangeService.onDragStart.bind(this.rangeService),
      onDragStop: this.rangeService.onDragStop.bind(this.rangeService),
      onDragging: this.rangeService.onDragging.bind(this.rangeService)
    };
    this.dragService.addDragSource(params);
    this.addDestroyFunc(function() {
      return _this.dragService.removeDragSource(params);
    });
  };
  __decorate$1H([
    Optional("rangeService")
  ], DragListenerFeature2.prototype, "rangeService", void 0);
  __decorate$1H([
    Autowired("dragService")
  ], DragListenerFeature2.prototype, "dragService", void 0);
  __decorate$1H([
    PostConstruct
  ], DragListenerFeature2.prototype, "postConstruct", null);
  return DragListenerFeature2;
}(BeanStub);
var __extends$1N = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1G = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CenterWidthFeature = function(_super) {
  __extends$1N(CenterWidthFeature2, _super);
  function CenterWidthFeature2(callback) {
    var _this = _super.call(this) || this;
    _this.callback = callback;
    return _this;
  }
  CenterWidthFeature2.prototype.postConstruct = function() {
    var listener = this.setWidth.bind(this);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, listener);
    this.setWidth();
  };
  CenterWidthFeature2.prototype.setWidth = function() {
    var columnModel = this.columnModel;
    var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    var centerWidth = columnModel.getBodyContainerWidth();
    var leftWidth = columnModel.getDisplayedColumnsLeftWidth();
    var rightWidth = columnModel.getDisplayedColumnsRightWidth();
    var totalWidth = printLayout ? centerWidth + leftWidth + rightWidth : centerWidth;
    this.callback(totalWidth);
  };
  __decorate$1G([
    Autowired("columnModel")
  ], CenterWidthFeature2.prototype, "columnModel", void 0);
  __decorate$1G([
    PostConstruct
  ], CenterWidthFeature2.prototype, "postConstruct", null);
  return CenterWidthFeature2;
}(BeanStub);
var __extends$1M = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1F = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$e = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$b = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$e(arguments[i2]));
  return ar;
};
var RowContainerName;
(function(RowContainerName2) {
  RowContainerName2["LEFT"] = "left";
  RowContainerName2["RIGHT"] = "right";
  RowContainerName2["CENTER"] = "center";
  RowContainerName2["FULL_WIDTH"] = "fullWidth";
  RowContainerName2["TOP_LEFT"] = "topLeft";
  RowContainerName2["TOP_RIGHT"] = "topRight";
  RowContainerName2["TOP_CENTER"] = "topCenter";
  RowContainerName2["TOP_FULL_WIDTH"] = "topFullWidth";
  RowContainerName2["STICKY_TOP_LEFT"] = "stickyTopLeft";
  RowContainerName2["STICKY_TOP_RIGHT"] = "stickyTopRight";
  RowContainerName2["STICKY_TOP_CENTER"] = "stickyTopCenter";
  RowContainerName2["STICKY_TOP_FULL_WIDTH"] = "stickyTopFullWidth";
  RowContainerName2["BOTTOM_LEFT"] = "bottomLeft";
  RowContainerName2["BOTTOM_RIGHT"] = "bottomRight";
  RowContainerName2["BOTTOM_CENTER"] = "bottomCenter";
  RowContainerName2["BOTTOM_FULL_WIDTH"] = "bottomFullWidth";
})(RowContainerName || (RowContainerName = {}));
var RowContainerType;
(function(RowContainerType2) {
  RowContainerType2["LEFT"] = "left";
  RowContainerType2["RIGHT"] = "right";
  RowContainerType2["CENTER"] = "center";
  RowContainerType2["FULL_WIDTH"] = "fullWidth";
})(RowContainerType || (RowContainerType = {}));
function getRowContainerTypeForName(name) {
  switch (name) {
    case RowContainerName.CENTER:
    case RowContainerName.TOP_CENTER:
    case RowContainerName.STICKY_TOP_CENTER:
    case RowContainerName.BOTTOM_CENTER:
      return RowContainerType.CENTER;
    case RowContainerName.LEFT:
    case RowContainerName.TOP_LEFT:
    case RowContainerName.STICKY_TOP_LEFT:
    case RowContainerName.BOTTOM_LEFT:
      return RowContainerType.LEFT;
    case RowContainerName.RIGHT:
    case RowContainerName.TOP_RIGHT:
    case RowContainerName.STICKY_TOP_RIGHT:
    case RowContainerName.BOTTOM_RIGHT:
      return RowContainerType.RIGHT;
    case RowContainerName.FULL_WIDTH:
    case RowContainerName.TOP_FULL_WIDTH:
    case RowContainerName.STICKY_TOP_FULL_WIDTH:
    case RowContainerName.BOTTOM_FULL_WIDTH:
      return RowContainerType.FULL_WIDTH;
    default:
      throw Error("Invalid Row Container Type");
  }
}
var ContainerCssClasses = convertToMap([
  [RowContainerName.CENTER, "ag-center-cols-container"],
  [RowContainerName.LEFT, "ag-pinned-left-cols-container"],
  [RowContainerName.RIGHT, "ag-pinned-right-cols-container"],
  [RowContainerName.FULL_WIDTH, "ag-full-width-container"],
  [RowContainerName.TOP_CENTER, "ag-floating-top-container"],
  [RowContainerName.TOP_LEFT, "ag-pinned-left-floating-top"],
  [RowContainerName.TOP_RIGHT, "ag-pinned-right-floating-top"],
  [RowContainerName.TOP_FULL_WIDTH, "ag-floating-top-full-width-container"],
  [RowContainerName.STICKY_TOP_CENTER, "ag-sticky-top-container"],
  [RowContainerName.STICKY_TOP_LEFT, "ag-pinned-left-sticky-top"],
  [RowContainerName.STICKY_TOP_RIGHT, "ag-pinned-right-sticky-top"],
  [RowContainerName.STICKY_TOP_FULL_WIDTH, "ag-sticky-top-full-width-container"],
  [RowContainerName.BOTTOM_CENTER, "ag-floating-bottom-container"],
  [RowContainerName.BOTTOM_LEFT, "ag-pinned-left-floating-bottom"],
  [RowContainerName.BOTTOM_RIGHT, "ag-pinned-right-floating-bottom"],
  [RowContainerName.BOTTOM_FULL_WIDTH, "ag-floating-bottom-full-width-container"]
]);
var ViewportCssClasses = convertToMap([
  [RowContainerName.CENTER, "ag-center-cols-viewport"],
  [RowContainerName.TOP_CENTER, "ag-floating-top-viewport"],
  [RowContainerName.STICKY_TOP_CENTER, "ag-sticky-top-viewport"],
  [RowContainerName.BOTTOM_CENTER, "ag-floating-bottom-viewport"]
]);
var WrapperCssClasses = convertToMap([
  [RowContainerName.CENTER, "ag-center-cols-clipper"]
]);
var RowContainerCtrl = function(_super) {
  __extends$1M(RowContainerCtrl2, _super);
  function RowContainerCtrl2(name) {
    var _this = _super.call(this) || this;
    _this.name = name;
    return _this;
  }
  RowContainerCtrl2.getRowContainerCssClasses = function(name) {
    var containerClass = ContainerCssClasses.get(name);
    var viewportClass = ViewportCssClasses.get(name);
    var wrapperClass = WrapperCssClasses.get(name);
    return { container: containerClass, viewport: viewportClass, wrapper: wrapperClass };
  };
  RowContainerCtrl2.getPinned = function(name) {
    switch (name) {
      case RowContainerName.BOTTOM_LEFT:
      case RowContainerName.TOP_LEFT:
      case RowContainerName.STICKY_TOP_LEFT:
      case RowContainerName.LEFT:
        return Constants.PINNED_LEFT;
      case RowContainerName.BOTTOM_RIGHT:
      case RowContainerName.TOP_RIGHT:
      case RowContainerName.STICKY_TOP_RIGHT:
      case RowContainerName.RIGHT:
        return Constants.PINNED_RIGHT;
      default:
        return null;
    }
  };
  RowContainerCtrl2.prototype.postConstruct = function() {
    var _this = this;
    this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
    this.embedFullWidthRows = this.gridOptionsWrapper.isEmbedFullWidthRows();
    this.forContainers([RowContainerName.CENTER], function() {
      return _this.viewportSizeFeature = _this.createManagedBean(new ViewportSizeFeature(_this));
    });
  };
  RowContainerCtrl2.prototype.registerWithCtrlsService = function() {
    switch (this.name) {
      case RowContainerName.CENTER:
        this.ctrlsService.registerCenterRowContainerCtrl(this);
        break;
      case RowContainerName.LEFT:
        this.ctrlsService.registerLeftRowContainerCtrl(this);
        break;
      case RowContainerName.RIGHT:
        this.ctrlsService.registerRightRowContainerCtrl(this);
        break;
      case RowContainerName.TOP_CENTER:
        this.ctrlsService.registerTopCenterRowContainerCtrl(this);
        break;
      case RowContainerName.TOP_LEFT:
        this.ctrlsService.registerTopLeftRowContainerCon(this);
        break;
      case RowContainerName.TOP_RIGHT:
        this.ctrlsService.registerTopRightRowContainerCtrl(this);
        break;
      case RowContainerName.STICKY_TOP_CENTER:
        this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);
        break;
      case RowContainerName.STICKY_TOP_LEFT:
        this.ctrlsService.registerStickyTopLeftRowContainerCon(this);
        break;
      case RowContainerName.STICKY_TOP_RIGHT:
        this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);
        break;
      case RowContainerName.BOTTOM_CENTER:
        this.ctrlsService.registerBottomCenterRowContainerCtrl(this);
        break;
      case RowContainerName.BOTTOM_LEFT:
        this.ctrlsService.registerBottomLeftRowContainerCtrl(this);
        break;
      case RowContainerName.BOTTOM_RIGHT:
        this.ctrlsService.registerBottomRightRowContainerCtrl(this);
        break;
    }
  };
  RowContainerCtrl2.prototype.forContainers = function(names2, callback) {
    if (names2.indexOf(this.name) >= 0) {
      callback();
    }
  };
  RowContainerCtrl2.prototype.getContainerElement = function() {
    return this.eContainer;
  };
  RowContainerCtrl2.prototype.getViewportSizeFeature = function() {
    return this.viewportSizeFeature;
  };
  RowContainerCtrl2.prototype.setComp = function(view, eContainer, eViewport, eWrapper) {
    var _this = this;
    this.comp = view;
    this.eContainer = eContainer;
    this.eViewport = eViewport;
    this.eWrapper = eWrapper;
    this.createManagedBean(new RowContainerEventsFeature(this.eContainer));
    this.addPreventScrollWhileDragging();
    this.listenOnDomOrder();
    this.stopHScrollOnPinnedRows();
    var allTopNoFW = [RowContainerName.TOP_CENTER, RowContainerName.TOP_LEFT, RowContainerName.TOP_RIGHT];
    var allStickyTopNoFW = [RowContainerName.STICKY_TOP_CENTER, RowContainerName.STICKY_TOP_LEFT, RowContainerName.STICKY_TOP_RIGHT];
    var allBottomNoFW = [RowContainerName.BOTTOM_CENTER, RowContainerName.BOTTOM_LEFT, RowContainerName.BOTTOM_RIGHT];
    var allMiddleNoFW = [RowContainerName.CENTER, RowContainerName.LEFT, RowContainerName.RIGHT];
    var allNoFW = __spread$b(allTopNoFW, allBottomNoFW, allMiddleNoFW, allStickyTopNoFW);
    var allMiddle = [RowContainerName.CENTER, RowContainerName.LEFT, RowContainerName.RIGHT, RowContainerName.FULL_WIDTH];
    var allCenter = [RowContainerName.CENTER, RowContainerName.TOP_CENTER, RowContainerName.STICKY_TOP_CENTER, RowContainerName.BOTTOM_CENTER];
    var allLeft = [RowContainerName.LEFT, RowContainerName.BOTTOM_LEFT, RowContainerName.TOP_LEFT, RowContainerName.STICKY_TOP_LEFT];
    var allRight = [RowContainerName.RIGHT, RowContainerName.BOTTOM_RIGHT, RowContainerName.TOP_RIGHT, RowContainerName.STICKY_TOP_RIGHT];
    this.forContainers(allLeft, function() {
      return _this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer));
    });
    this.forContainers(allRight, function() {
      return _this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer));
    });
    this.forContainers(allMiddle, function() {
      return _this.createManagedBean(new SetHeightFeature(_this.eContainer, _this.eWrapper));
    });
    this.forContainers(allNoFW, function() {
      return _this.createManagedBean(new DragListenerFeature(_this.eContainer));
    });
    this.forContainers(allCenter, function() {
      return _this.createManagedBean(new CenterWidthFeature(function(width) {
        return _this.comp.setContainerWidth(width + "px");
      }));
    });
    this.addListeners();
    this.registerWithCtrlsService();
  };
  RowContainerCtrl2.prototype.addListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, function() {
      return _this.onScrollVisibilityChanged();
    });
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, function() {
      return _this.onDisplayedColumnsChanged();
    });
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, function() {
      return _this.onDisplayedColumnsWidthChanged();
    });
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_ROWS_CHANGED, function() {
      return _this.onDisplayedRowsChanged();
    });
    this.onScrollVisibilityChanged();
    this.onDisplayedColumnsChanged();
    this.onDisplayedColumnsWidthChanged();
    this.onDisplayedRowsChanged();
  };
  RowContainerCtrl2.prototype.listenOnDomOrder = function() {
    var _this = this;
    var allStickyContainers = [RowContainerName.STICKY_TOP_CENTER, RowContainerName.STICKY_TOP_LEFT, RowContainerName.STICKY_TOP_RIGHT, RowContainerName.STICKY_TOP_FULL_WIDTH];
    var isStickContainer = allStickyContainers.indexOf(this.name) >= 0;
    if (isStickContainer) {
      this.comp.setDomOrder(true);
      return;
    }
    var listener = function() {
      return _this.comp.setDomOrder(_this.gridOptionsWrapper.isEnsureDomOrder());
    };
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
    listener();
  };
  RowContainerCtrl2.prototype.stopHScrollOnPinnedRows = function() {
    var _this = this;
    this.forContainers([RowContainerName.TOP_CENTER, RowContainerName.STICKY_TOP_CENTER, RowContainerName.BOTTOM_CENTER], function() {
      var resetScrollLeft = function() {
        return _this.eViewport.scrollLeft = 0;
      };
      _this.addManagedListener(_this.eViewport, "scroll", resetScrollLeft);
    });
  };
  RowContainerCtrl2.prototype.onDisplayedColumnsChanged = function() {
    var _this = this;
    this.forContainers([RowContainerName.CENTER], function() {
      return _this.onHorizontalViewportChanged();
    });
  };
  RowContainerCtrl2.prototype.onDisplayedColumnsWidthChanged = function() {
    var _this = this;
    this.forContainers([RowContainerName.CENTER], function() {
      return _this.onHorizontalViewportChanged();
    });
  };
  RowContainerCtrl2.prototype.onScrollVisibilityChanged = function() {
    if (this.name !== RowContainerName.CENTER) {
      return;
    }
    var visible = this.scrollVisibleService.isHorizontalScrollShowing();
    var scrollbarWidth = visible ? this.gridOptionsWrapper.getScrollbarWidth() || 0 : 0;
    var height = scrollbarWidth == 0 ? "100%" : "calc(100% + " + scrollbarWidth + "px)";
    this.comp.setViewportHeight(height);
  };
  RowContainerCtrl2.prototype.addPreventScrollWhileDragging = function() {
    var _this = this;
    var preventScroll = function(e2) {
      if (_this.dragService.isDragging()) {
        if (e2.cancelable) {
          e2.preventDefault();
        }
      }
    };
    this.eContainer.addEventListener("touchmove", preventScroll, { passive: false });
    this.addDestroyFunc(function() {
      return _this.eContainer.removeEventListener("touchmove", preventScroll);
    });
  };
  RowContainerCtrl2.prototype.onHorizontalViewportChanged = function() {
    var scrollWidth = this.getCenterWidth();
    var scrollPosition = this.getCenterViewportScrollLeft();
    this.columnModel.setViewportPosition(scrollWidth, scrollPosition);
  };
  RowContainerCtrl2.prototype.getCenterWidth = function() {
    return getInnerWidth(this.eViewport);
  };
  RowContainerCtrl2.prototype.getCenterViewportScrollLeft = function() {
    return getScrollLeft(this.eViewport, this.enableRtl);
  };
  RowContainerCtrl2.prototype.registerViewportResizeListener = function(listener) {
    var unsubscribeFromResize = this.resizeObserverService.observeResize(this.eViewport, listener);
    this.addDestroyFunc(function() {
      return unsubscribeFromResize();
    });
  };
  RowContainerCtrl2.prototype.isViewportVisible = function() {
    return isVisible(this.eViewport);
  };
  RowContainerCtrl2.prototype.isViewportHScrollShowing = function() {
    return isHorizontalScrollShowing(this.eViewport);
  };
  RowContainerCtrl2.prototype.getViewportScrollLeft = function() {
    return getScrollLeft(this.eViewport, this.enableRtl);
  };
  RowContainerCtrl2.prototype.isHorizontalScrollShowing = function() {
    var isAlwaysShowHorizontalScroll = this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();
    return isAlwaysShowHorizontalScroll || isHorizontalScrollShowing(this.eViewport);
  };
  RowContainerCtrl2.prototype.getViewportElement = function() {
    return this.eViewport;
  };
  RowContainerCtrl2.prototype.setContainerTranslateX = function(amount) {
    this.eContainer.style.transform = "translateX(" + amount + "px)";
  };
  RowContainerCtrl2.prototype.getHScrollPosition = function() {
    var res = {
      left: this.eViewport.scrollLeft,
      right: this.eViewport.scrollLeft + this.eViewport.offsetWidth
    };
    return res;
  };
  RowContainerCtrl2.prototype.setCenterViewportScrollLeft = function(value) {
    setScrollLeft(this.eViewport, value, this.enableRtl);
  };
  RowContainerCtrl2.prototype.onDisplayedRowsChanged = function() {
    var _this = this;
    var fullWithContainer = this.name === RowContainerName.TOP_FULL_WIDTH || this.name === RowContainerName.STICKY_TOP_FULL_WIDTH || this.name === RowContainerName.BOTTOM_FULL_WIDTH || this.name === RowContainerName.FULL_WIDTH;
    var doesRowMatch = function(rowCtrl) {
      var fullWidthRow = rowCtrl.isFullWidth();
      var printLayout = _this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      var embedFW = _this.embedFullWidthRows || printLayout;
      var match2 = fullWithContainer ? !embedFW && fullWidthRow : embedFW || !fullWidthRow;
      return match2;
    };
    var allRowsRegardlessOfFullWidth = this.getRowCtrls();
    var rowsThisContainer = allRowsRegardlessOfFullWidth.filter(doesRowMatch);
    this.comp.setRowCtrls(rowsThisContainer);
  };
  RowContainerCtrl2.prototype.getRowCtrls = function() {
    switch (this.name) {
      case RowContainerName.TOP_CENTER:
      case RowContainerName.TOP_LEFT:
      case RowContainerName.TOP_RIGHT:
      case RowContainerName.TOP_FULL_WIDTH:
        return this.rowRenderer.getTopRowCtrls();
      case RowContainerName.STICKY_TOP_CENTER:
      case RowContainerName.STICKY_TOP_LEFT:
      case RowContainerName.STICKY_TOP_RIGHT:
      case RowContainerName.STICKY_TOP_FULL_WIDTH:
        return this.rowRenderer.getStickyTopRowCtrls();
      case RowContainerName.BOTTOM_CENTER:
      case RowContainerName.BOTTOM_LEFT:
      case RowContainerName.BOTTOM_RIGHT:
      case RowContainerName.BOTTOM_FULL_WIDTH:
        return this.rowRenderer.getBottomRowCtrls();
      default:
        return this.rowRenderer.getRowCtrls();
    }
  };
  __decorate$1F([
    Autowired("scrollVisibleService")
  ], RowContainerCtrl2.prototype, "scrollVisibleService", void 0);
  __decorate$1F([
    Autowired("dragService")
  ], RowContainerCtrl2.prototype, "dragService", void 0);
  __decorate$1F([
    Autowired("ctrlsService")
  ], RowContainerCtrl2.prototype, "ctrlsService", void 0);
  __decorate$1F([
    Autowired("columnModel")
  ], RowContainerCtrl2.prototype, "columnModel", void 0);
  __decorate$1F([
    Autowired("resizeObserverService")
  ], RowContainerCtrl2.prototype, "resizeObserverService", void 0);
  __decorate$1F([
    Autowired("rowRenderer")
  ], RowContainerCtrl2.prototype, "rowRenderer", void 0);
  __decorate$1F([
    PostConstruct
  ], RowContainerCtrl2.prototype, "postConstruct", null);
  return RowContainerCtrl2;
}(BeanStub);
var __extends$1L = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1E = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GRID_BODY_TEMPLATE = '<div class="ag-root ag-unselectable" role="grid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="' + RowContainerName.TOP_LEFT + '"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="' + RowContainerName.TOP_CENTER + '"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="' + RowContainerName.TOP_RIGHT + '"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="' + RowContainerName.TOP_FULL_WIDTH + '"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="' + RowContainerName.LEFT + '"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="' + RowContainerName.CENTER + '"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="' + RowContainerName.RIGHT + '"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="' + RowContainerName.FULL_WIDTH + '"></ag-row-container>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="' + RowContainerName.STICKY_TOP_LEFT + '"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="' + RowContainerName.STICKY_TOP_CENTER + '"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="' + RowContainerName.STICKY_TOP_RIGHT + '"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="' + RowContainerName.STICKY_TOP_FULL_WIDTH + '"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="' + RowContainerName.BOTTOM_LEFT + '"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="' + RowContainerName.BOTTOM_CENTER + '"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="' + RowContainerName.BOTTOM_RIGHT + '"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="' + RowContainerName.BOTTOM_FULL_WIDTH + '"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>';
var GridBodyComp = function(_super) {
  __extends$1L(GridBodyComp2, _super);
  function GridBodyComp2() {
    return _super.call(this, GRID_BODY_TEMPLATE) || this;
  }
  GridBodyComp2.prototype.init = function() {
    var _this = this;
    var setHeight = function(height, element) {
      var heightString = height + "px";
      element.style.minHeight = heightString;
      element.style.height = heightString;
    };
    var compProxy = {
      setRowAnimationCssOnBodyViewport: function(cssClass, animate) {
        return _this.setRowAnimationCssOnBodyViewport(cssClass, animate);
      },
      setColumnCount: function(count) {
        return setAriaColCount(_this.getGui(), count);
      },
      setRowCount: function(count) {
        return setAriaRowCount(_this.getGui(), count);
      },
      setTopHeight: function(height) {
        return setHeight(height, _this.eTop);
      },
      setBottomHeight: function(height) {
        return setHeight(height, _this.eBottom);
      },
      setTopDisplay: function(display) {
        return _this.eTop.style.display = display;
      },
      setBottomDisplay: function(display) {
        return _this.eBottom.style.display = display;
      },
      setStickyTopHeight: function(height) {
        return _this.eStickyTop.style.height = height;
      },
      setStickyTopTop: function(top) {
        return _this.eStickyTop.style.top = top;
      },
      setStickyTopWidth: function(width) {
        return _this.eStickyTop.style.width = width;
      },
      setColumnMovingCss: function(cssClass, flag) {
        return _this.addOrRemoveCssClass(CSS_CLASS_COLUMN_MOVING, flag);
      },
      updateLayoutClasses: function(cssClass, params) {
        var bodyViewportClassList = _this.eBodyViewport.classList;
        bodyViewportClassList.toggle(LayoutCssClasses.AUTO_HEIGHT, params.autoHeight);
        bodyViewportClassList.toggle(LayoutCssClasses.NORMAL, params.normal);
        bodyViewportClassList.toggle(LayoutCssClasses.PRINT, params.print);
        _this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT, params.autoHeight);
        _this.addOrRemoveCssClass(LayoutCssClasses.NORMAL, params.normal);
        _this.addOrRemoveCssClass(LayoutCssClasses.PRINT, params.print);
      },
      setAlwaysVerticalScrollClass: function(cssClass, on2) {
        return _this.eBodyViewport.classList.toggle(CSS_CLASS_FORCE_VERTICAL_SCROLL, on2);
      },
      registerBodyViewportResizeListener: function(listener) {
        var unsubscribeFromResize = _this.resizeObserverService.observeResize(_this.eBodyViewport, listener);
        _this.addDestroyFunc(function() {
          return unsubscribeFromResize();
        });
      },
      setPinnedTopBottomOverflowY: function(overflow) {
        return _this.eTop.style.overflowY = _this.eBottom.style.overflowY = overflow;
      },
      setCellSelectableCss: function(cssClass, selectable) {
        [_this.eTop, _this.eBodyViewport, _this.eBottom].forEach(function(ct2) {
          return ct2.classList.toggle(CSS_CLASS_CELL_SELECTABLE, selectable);
        });
      }
    };
    this.ctrl = this.createManagedBean(new GridBodyCtrl());
    this.ctrl.setComp(compProxy, this.getGui(), this.eBodyViewport, this.eTop, this.eBottom, this.eStickyTop);
    if (this.rangeService || this.gridOptionsWrapper.isRowSelectionMulti()) {
      setAriaMultiSelectable(this.getGui(), true);
    }
  };
  GridBodyComp2.prototype.setRowAnimationCssOnBodyViewport = function(cssClass, animateRows) {
    var bodyViewportClassList = this.eBodyViewport.classList;
    bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_ON, animateRows);
    bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_OFF, !animateRows);
  };
  GridBodyComp2.prototype.getFloatingTopBottom = function() {
    return [this.eTop, this.eBottom];
  };
  __decorate$1E([
    Autowired("resizeObserverService")
  ], GridBodyComp2.prototype, "resizeObserverService", void 0);
  __decorate$1E([
    Optional("rangeService")
  ], GridBodyComp2.prototype, "rangeService", void 0);
  __decorate$1E([
    RefSelector("eBodyViewport")
  ], GridBodyComp2.prototype, "eBodyViewport", void 0);
  __decorate$1E([
    RefSelector("eStickyTop")
  ], GridBodyComp2.prototype, "eStickyTop", void 0);
  __decorate$1E([
    RefSelector("eTop")
  ], GridBodyComp2.prototype, "eTop", void 0);
  __decorate$1E([
    RefSelector("eBottom")
  ], GridBodyComp2.prototype, "eBottom", void 0);
  __decorate$1E([
    RefSelector("gridHeader")
  ], GridBodyComp2.prototype, "headerRootComp", void 0);
  __decorate$1E([
    PostConstruct
  ], GridBodyComp2.prototype, "init", null);
  return GridBodyComp2;
}(Component);
var __extends$1K = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1D = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ScrollVisibleService = function(_super) {
  __extends$1K(ScrollVisibleService2, _super);
  function ScrollVisibleService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ScrollVisibleService2.prototype.postConstruct = function() {
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onDisplayedColumnsWidthChanged.bind(this));
  };
  ScrollVisibleService2.prototype.onDisplayedColumnsChanged = function() {
    this.update();
  };
  ScrollVisibleService2.prototype.onDisplayedColumnsWidthChanged = function() {
    this.update();
  };
  ScrollVisibleService2.prototype.update = function() {
    this.updateImpl();
    setTimeout(this.updateImpl.bind(this), 500);
  };
  ScrollVisibleService2.prototype.updateImpl = function() {
    var centerRowCtrl = this.ctrlsService.getCenterRowContainerCtrl();
    if (!centerRowCtrl) {
      return;
    }
    var params = {
      horizontalScrollShowing: centerRowCtrl.isHorizontalScrollShowing(),
      verticalScrollShowing: this.isVerticalScrollShowing()
    };
    this.setScrollsVisible(params);
  };
  ScrollVisibleService2.prototype.setScrollsVisible = function(params) {
    var atLeastOneDifferent = this.horizontalScrollShowing !== params.horizontalScrollShowing || this.verticalScrollShowing !== params.verticalScrollShowing;
    if (atLeastOneDifferent) {
      this.horizontalScrollShowing = params.horizontalScrollShowing;
      this.verticalScrollShowing = params.verticalScrollShowing;
      var event_1 = {
        type: Events.EVENT_SCROLL_VISIBILITY_CHANGED
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  ScrollVisibleService2.prototype.isHorizontalScrollShowing = function() {
    return this.horizontalScrollShowing;
  };
  ScrollVisibleService2.prototype.isVerticalScrollShowing = function() {
    return this.verticalScrollShowing;
  };
  __decorate$1D([
    Autowired("ctrlsService")
  ], ScrollVisibleService2.prototype, "ctrlsService", void 0);
  __decorate$1D([
    PostConstruct
  ], ScrollVisibleService2.prototype, "postConstruct", null);
  ScrollVisibleService2 = __decorate$1D([
    Bean("scrollVisibleService")
  ], ScrollVisibleService2);
  return ScrollVisibleService2;
}(BeanStub);
var __extends$1J = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1C = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var MouseEventService = function(_super) {
  __extends$1J(MouseEventService2, _super);
  function MouseEventService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.gridInstanceId = MouseEventService_1.gridInstanceSequence.next();
    return _this;
  }
  MouseEventService_1 = MouseEventService2;
  MouseEventService2.prototype.stampTopLevelGridCompWithGridInstance = function(eGridDiv) {
    eGridDiv[MouseEventService_1.GRID_DOM_KEY] = this.gridInstanceId;
  };
  MouseEventService2.prototype.getRenderedCellForEvent = function(event) {
    return getCtrlForEvent(this.gridOptionsWrapper, event, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
  };
  MouseEventService2.prototype.isEventFromThisGrid = function(event) {
    var res = this.isElementInThisGrid(event.target);
    return res;
  };
  MouseEventService2.prototype.isElementInThisGrid = function(element) {
    var pointer = element;
    while (pointer) {
      var instanceId = pointer[MouseEventService_1.GRID_DOM_KEY];
      if (exists(instanceId)) {
        var eventFromThisGrid = instanceId === this.gridInstanceId;
        return eventFromThisGrid;
      }
      pointer = pointer.parentElement;
    }
    return false;
  };
  MouseEventService2.prototype.getCellPositionForEvent = function(event) {
    var cellComp = this.getRenderedCellForEvent(event);
    return cellComp ? cellComp.getCellPosition() : null;
  };
  MouseEventService2.prototype.getNormalisedPosition = function(event) {
    var gridPanelHasScrolls = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
    var e2 = event;
    var x2;
    var y3;
    if (e2.clientX != null || e2.clientY != null) {
      x2 = e2.clientX;
      y3 = e2.clientY;
    } else {
      x2 = e2.x;
      y3 = e2.y;
    }
    if (gridPanelHasScrolls) {
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var vRange = gridBodyCon.getScrollFeature().getVScrollPosition();
      var hRange = gridBodyCon.getScrollFeature().getHScrollPosition();
      x2 += hRange.left;
      y3 += vRange.top;
    }
    return { x: x2, y: y3 };
  };
  var MouseEventService_1;
  MouseEventService2.gridInstanceSequence = new NumberSequence();
  MouseEventService2.GRID_DOM_KEY = "__ag_grid_instance";
  __decorate$1C([
    Autowired("ctrlsService")
  ], MouseEventService2.prototype, "ctrlsService", void 0);
  MouseEventService2 = MouseEventService_1 = __decorate$1C([
    Bean("mouseEventService")
  ], MouseEventService2);
  return MouseEventService2;
}(BeanStub);
var __extends$1I = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$3 = function() {
  __assign$3 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$3.apply(this, arguments);
};
var __decorate$1B = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var NavigationService = function(_super) {
  __extends$1I(NavigationService2, _super);
  function NavigationService2() {
    var _this = _super.call(this) || this;
    _this.onPageDown = throttle(_this.onPageDown, 100);
    _this.onPageUp = throttle(_this.onPageUp, 100);
    return _this;
  }
  NavigationService2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      _this.gridBodyCon = p.gridBodyCtrl;
    });
  };
  NavigationService2.prototype.handlePageScrollingKey = function(event) {
    var key = event.key;
    var alt = event.altKey;
    var ctrl = event.ctrlKey || event.metaKey;
    var rangeServiceShouldHandleShift = !!this.rangeService && event.shiftKey;
    var currentCell = this.mouseEventService.getCellPositionForEvent(event);
    if (!currentCell) {
      return false;
    }
    var processed = false;
    switch (key) {
      case KeyCode.PAGE_HOME:
      case KeyCode.PAGE_END:
        if (!ctrl && !alt) {
          this.onHomeOrEndKey(key);
          processed = true;
        }
        break;
      case KeyCode.LEFT:
      case KeyCode.RIGHT:
      case KeyCode.UP:
      case KeyCode.DOWN:
        if (ctrl && !alt && !rangeServiceShouldHandleShift) {
          this.onCtrlUpDownLeftRight(key, currentCell);
          processed = true;
        }
        break;
      case KeyCode.PAGE_DOWN:
        if (!ctrl && !alt) {
          this.onPageDown(currentCell);
          processed = true;
        }
        break;
      case KeyCode.PAGE_UP:
        if (!ctrl && !alt) {
          this.onPageUp(currentCell);
          processed = true;
        }
        break;
    }
    if (processed) {
      event.preventDefault();
    }
    return processed;
  };
  NavigationService2.prototype.navigateTo = function(navigateParams) {
    var scrollIndex = navigateParams.scrollIndex, scrollType = navigateParams.scrollType, scrollColumn = navigateParams.scrollColumn, focusIndex = navigateParams.focusIndex, focusColumn = navigateParams.focusColumn;
    if (exists(scrollColumn) && !scrollColumn.isPinned()) {
      this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn);
    }
    if (exists(scrollIndex)) {
      this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex, scrollType);
    }
    if (!navigateParams.isAsync) {
      this.gridBodyCon.getScrollFeature().ensureIndexVisible(focusIndex);
    }
    this.focusService.setFocusedCell({ rowIndex: focusIndex, column: focusColumn, rowPinned: null, forceBrowserFocus: true });
    if (this.rangeService) {
      var cellPosition = { rowIndex: focusIndex, rowPinned: null, column: focusColumn };
      this.rangeService.setRangeToCell(cellPosition);
    }
  };
  NavigationService2.prototype.onPageDown = function(gridCell) {
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var scrollPosition = gridBodyCon.getScrollFeature().getVScrollPosition();
    var pixelsInOnePage = this.getViewportHeight();
    var pagingPixelOffset = this.paginationProxy.getPixelOffset();
    var currentPageBottomPixel = scrollPosition.top + pixelsInOnePage;
    var currentPageBottomRow = this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel + pagingPixelOffset);
    if (this.columnModel.isAutoRowHeightActive()) {
      this.navigateToNextPageWithAutoHeight(gridCell, currentPageBottomRow);
    } else {
      this.navigateToNextPage(gridCell, currentPageBottomRow);
    }
  };
  NavigationService2.prototype.onPageUp = function(gridCell) {
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var scrollPosition = gridBodyCon.getScrollFeature().getVScrollPosition();
    var pagingPixelOffset = this.paginationProxy.getPixelOffset();
    var currentPageTopPixel = scrollPosition.top;
    var currentPageTopRow = this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel + pagingPixelOffset);
    if (this.columnModel.isAutoRowHeightActive()) {
      this.navigateToNextPageWithAutoHeight(gridCell, currentPageTopRow, true);
    } else {
      this.navigateToNextPage(gridCell, currentPageTopRow, true);
    }
  };
  NavigationService2.prototype.navigateToNextPage = function(gridCell, scrollIndex, up) {
    if (up === void 0) {
      up = false;
    }
    var _a2, _b;
    var pixelsInOnePage = this.getViewportHeight();
    var firstRow = this.paginationProxy.getPageFirstRow();
    var lastRow = this.paginationProxy.getPageLastRow();
    var pagingPixelOffset = this.paginationProxy.getPixelOffset();
    var currentRowNode = this.paginationProxy.getRow(gridCell.rowIndex);
    var rowPixelDiff = up ? ((_a2 = currentRowNode) === null || _a2 === void 0 ? void 0 : _a2.rowHeight) - pixelsInOnePage - pagingPixelOffset : pixelsInOnePage - pagingPixelOffset;
    var nextCellPixel = ((_b = currentRowNode) === null || _b === void 0 ? void 0 : _b.rowTop) + rowPixelDiff;
    var focusIndex = this.paginationProxy.getRowIndexAtPixel(nextCellPixel + pagingPixelOffset);
    if (focusIndex === gridCell.rowIndex) {
      var diff = up ? -1 : 1;
      scrollIndex = focusIndex = gridCell.rowIndex + diff;
    }
    var scrollType;
    if (up) {
      scrollType = "bottom";
      if (focusIndex < firstRow) {
        focusIndex = firstRow;
      }
      if (scrollIndex < firstRow) {
        scrollIndex = firstRow;
      }
    } else {
      scrollType = "top";
      if (focusIndex > lastRow) {
        focusIndex = lastRow;
      }
      if (scrollIndex > lastRow) {
        scrollIndex = lastRow;
      }
    }
    if (this.isRowTallerThanView(focusIndex)) {
      scrollIndex = focusIndex;
      scrollType = "top";
    }
    this.navigateTo({
      scrollIndex,
      scrollType,
      scrollColumn: null,
      focusIndex,
      focusColumn: gridCell.column
    });
  };
  NavigationService2.prototype.navigateToNextPageWithAutoHeight = function(gridCell, scrollIndex, up) {
    var _this = this;
    if (up === void 0) {
      up = false;
    }
    this.navigateTo({
      scrollIndex,
      scrollType: up ? "bottom" : "top",
      scrollColumn: null,
      focusIndex: scrollIndex,
      focusColumn: gridCell.column
    });
    setTimeout(function() {
      var focusIndex = _this.getNextFocusIndexForAutoHeight(gridCell, up);
      _this.navigateTo({
        scrollIndex,
        scrollType: up ? "bottom" : "top",
        scrollColumn: null,
        focusIndex,
        focusColumn: gridCell.column,
        isAsync: true
      });
    }, 50);
  };
  NavigationService2.prototype.getNextFocusIndexForAutoHeight = function(gridCell, up) {
    if (up === void 0) {
      up = false;
    }
    var _a2;
    var step = up ? -1 : 1;
    var pixelsInOnePage = this.getViewportHeight();
    var lastRowIndex = this.paginationProxy.getPageLastRow();
    var pixelSum = 0;
    var currentIndex = gridCell.rowIndex;
    while (currentIndex >= 0 && currentIndex <= lastRowIndex) {
      var currentCell = this.paginationProxy.getRow(currentIndex);
      if (currentCell) {
        var currentCellHeight = (_a2 = currentCell.rowHeight, _a2 !== null && _a2 !== void 0 ? _a2 : 0);
        if (pixelSum + currentCellHeight > pixelsInOnePage) {
          break;
        }
        pixelSum += currentCellHeight;
      }
      currentIndex += step;
    }
    return Math.max(0, Math.min(currentIndex, lastRowIndex));
  };
  NavigationService2.prototype.getViewportHeight = function() {
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var scrollPosition = gridBodyCon.getScrollFeature().getVScrollPosition();
    var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
    var pixelsInOnePage = scrollPosition.bottom - scrollPosition.top;
    if (this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()) {
      pixelsInOnePage -= scrollbarWidth;
    }
    return pixelsInOnePage;
  };
  NavigationService2.prototype.isRowTallerThanView = function(rowIndex) {
    var rowNode = this.paginationProxy.getRow(rowIndex);
    if (!rowNode) {
      return false;
    }
    var rowHeight = rowNode.rowHeight;
    if (typeof rowHeight !== "number") {
      return false;
    }
    return rowHeight > this.getViewportHeight();
  };
  NavigationService2.prototype.onCtrlUpDownLeftRight = function(key, gridCell) {
    var cellToFocus = this.cellNavigationService.getNextCellToFocus(key, gridCell, true);
    var rowIndex = cellToFocus.rowIndex, column = cellToFocus.column;
    this.navigateTo({
      scrollIndex: rowIndex,
      scrollType: null,
      scrollColumn: column,
      focusIndex: rowIndex,
      focusColumn: column
    });
  };
  NavigationService2.prototype.onHomeOrEndKey = function(key) {
    var homeKey = key === KeyCode.PAGE_HOME;
    var allColumns = this.columnModel.getAllDisplayedColumns();
    var columnToSelect = homeKey ? allColumns[0] : last(allColumns);
    var scrollIndex = homeKey ? this.paginationProxy.getPageFirstRow() : this.paginationProxy.getPageLastRow();
    this.navigateTo({
      scrollIndex,
      scrollType: null,
      scrollColumn: columnToSelect,
      focusIndex: scrollIndex,
      focusColumn: columnToSelect
    });
  };
  NavigationService2.prototype.onTabKeyDown = function(previous, keyboardEvent) {
    var backwards = keyboardEvent.shiftKey;
    var movedToNextCell = this.tabToNextCellCommon(previous, backwards, keyboardEvent);
    if (movedToNextCell) {
      keyboardEvent.preventDefault();
      return;
    }
    if (backwards) {
      var _a2 = previous.getRowPosition(), rowIndex = _a2.rowIndex, rowPinned = _a2.rowPinned;
      var firstRow = rowPinned ? rowIndex === 0 : rowIndex === this.paginationProxy.getPageFirstRow();
      if (firstRow) {
        keyboardEvent.preventDefault();
        this.focusService.focusLastHeader(keyboardEvent);
      }
    } else {
      if (previous instanceof CellCtrl) {
        previous.focusCell(true);
      }
      if (this.focusService.focusNextGridCoreContainer(backwards)) {
        keyboardEvent.preventDefault();
      }
    }
  };
  NavigationService2.prototype.tabToNextCell = function(backwards, event) {
    var focusedCell = this.focusService.getFocusedCell();
    if (!focusedCell) {
      return false;
    }
    var cellOrRow = this.getCellByPosition(focusedCell);
    if (!cellOrRow) {
      cellOrRow = this.rowRenderer.getRowByPosition(focusedCell);
      if (!cellOrRow || !cellOrRow.isFullWidth()) {
        return false;
      }
    }
    return this.tabToNextCellCommon(cellOrRow, backwards, event);
  };
  NavigationService2.prototype.tabToNextCellCommon = function(previous, backwards, event) {
    var editing = previous.isEditing();
    if (!editing && previous instanceof CellCtrl) {
      var cell = previous;
      var row = cell.getRowCtrl();
      if (row) {
        editing = row.isEditing();
      }
    }
    var res;
    if (editing) {
      if (this.gridOptionsWrapper.isFullRowEdit()) {
        res = this.moveToNextEditingRow(previous, backwards, event);
      } else {
        res = this.moveToNextEditingCell(previous, backwards, event);
      }
    } else {
      res = this.moveToNextCellNotEditing(previous, backwards);
    }
    return res || !!this.focusService.getFocusedHeader();
  };
  NavigationService2.prototype.moveToNextEditingCell = function(previousCell, backwards, event) {
    if (event === void 0) {
      event = null;
    }
    var previousPos = previousCell.getCellPosition();
    previousCell.getGui().focus();
    previousCell.stopEditing();
    var nextCell = this.findNextCellToFocusOn(previousPos, backwards, true);
    if (nextCell == null) {
      return false;
    }
    nextCell.startEditing(null, null, true, event);
    nextCell.focusCell(false);
    return true;
  };
  NavigationService2.prototype.moveToNextEditingRow = function(previousCell, backwards, event) {
    if (event === void 0) {
      event = null;
    }
    var previousPos = previousCell.getCellPosition();
    var nextCell = this.findNextCellToFocusOn(previousPos, backwards, true);
    if (nextCell == null) {
      return false;
    }
    var nextPos = nextCell.getCellPosition();
    var previousEditable = this.isCellEditable(previousPos);
    var nextEditable = this.isCellEditable(nextPos);
    var rowsMatch = nextPos && previousPos.rowIndex === nextPos.rowIndex && previousPos.rowPinned === nextPos.rowPinned;
    if (previousEditable) {
      previousCell.setFocusOutOnEditor();
    }
    if (!rowsMatch) {
      var pRow = previousCell.getRowCtrl();
      pRow.stopEditing();
      var nRow = nextCell.getRowCtrl();
      nRow.startRowEditing(void 0, void 0, void 0, event);
    }
    if (nextEditable) {
      nextCell.setFocusInOnEditor();
      nextCell.focusCell();
    } else {
      nextCell.focusCell(true);
    }
    return true;
  };
  NavigationService2.prototype.moveToNextCellNotEditing = function(previousCell, backwards) {
    var displayedColumns = this.columnModel.getAllDisplayedColumns();
    var cellPos;
    if (previousCell instanceof RowCtrl) {
      cellPos = __assign$3(__assign$3({}, previousCell.getRowPosition()), { column: backwards ? displayedColumns[0] : last(displayedColumns) });
    } else {
      cellPos = previousCell.getCellPosition();
    }
    var nextCell = this.findNextCellToFocusOn(cellPos, backwards, false);
    if (nextCell instanceof CellCtrl) {
      nextCell.focusCell(true);
    } else if (nextCell) {
      return this.tryToFocusFullWidthRow(nextCell.getRowPosition(), backwards);
    }
    return exists(nextCell);
  };
  NavigationService2.prototype.findNextCellToFocusOn = function(previousPosition, backwards, startEditing) {
    var nextPosition = previousPosition;
    while (true) {
      if (previousPosition !== nextPosition) {
        previousPosition = nextPosition;
      }
      if (!backwards) {
        nextPosition = this.getLastCellOfColSpan(nextPosition);
      }
      nextPosition = this.cellNavigationService.getNextTabbedCell(nextPosition, backwards);
      var userFunc = this.gridOptionsWrapper.getTabToNextCellFunc();
      if (exists(userFunc)) {
        var params = {
          backwards,
          editing: startEditing,
          previousCellPosition: previousPosition,
          nextCellPosition: nextPosition ? nextPosition : null
        };
        var userCell = userFunc(params);
        if (exists(userCell)) {
          if (userCell.floating) {
            doOnce(function() {
              console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?");
            }, "no floating in userCell");
            userCell.rowPinned = userCell.floating;
          }
          nextPosition = {
            rowIndex: userCell.rowIndex,
            column: userCell.column,
            rowPinned: userCell.rowPinned
          };
        } else {
          nextPosition = null;
        }
      }
      if (!nextPosition) {
        return null;
      }
      if (nextPosition.rowIndex < 0) {
        var headerLen = this.headerNavigationService.getHeaderRowCount();
        this.focusService.focusHeaderPosition({
          headerPosition: {
            headerRowIndex: headerLen + nextPosition.rowIndex,
            column: nextPosition.column
          }
        });
        return null;
      }
      var fullRowEdit = this.gridOptionsWrapper.isFullRowEdit();
      if (startEditing && !fullRowEdit) {
        var cellIsEditable = this.isCellEditable(nextPosition);
        if (!cellIsEditable) {
          continue;
        }
      }
      this.ensureCellVisible(nextPosition);
      var nextCell = this.getCellByPosition(nextPosition);
      if (!nextCell) {
        var row = this.rowRenderer.getRowByPosition(nextPosition);
        if (!row || !row.isFullWidth()) {
          continue;
        } else {
          return row;
        }
      }
      if (nextCell.isSuppressNavigable()) {
        continue;
      }
      if (this.rangeService) {
        this.rangeService.setRangeToCell(nextPosition);
      }
      return nextCell;
    }
  };
  NavigationService2.prototype.isCellEditable = function(cell) {
    var rowNode = this.lookupRowNodeForCell(cell);
    if (rowNode) {
      return cell.column.isCellEditable(rowNode);
    }
    return false;
  };
  NavigationService2.prototype.getCellByPosition = function(cellPosition) {
    var rowCtrl = this.rowRenderer.getRowByPosition(cellPosition);
    if (!rowCtrl) {
      return null;
    }
    return rowCtrl.getCellCtrl(cellPosition.column);
  };
  NavigationService2.prototype.lookupRowNodeForCell = function(cell) {
    if (cell.rowPinned === Constants.PINNED_TOP) {
      return this.pinnedRowModel.getPinnedTopRow(cell.rowIndex);
    }
    if (cell.rowPinned === Constants.PINNED_BOTTOM) {
      return this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex);
    }
    return this.paginationProxy.getRow(cell.rowIndex);
  };
  NavigationService2.prototype.navigateToNextCell = function(event, key, currentCell, allowUserOverride) {
    var nextCell = currentCell;
    var hitEdgeOfGrid = false;
    while (nextCell && (nextCell === currentCell || !this.isValidNavigateCell(nextCell))) {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        if (key === KeyCode.LEFT) {
          nextCell = this.getLastCellOfColSpan(nextCell);
        }
      } else if (key === KeyCode.RIGHT) {
        nextCell = this.getLastCellOfColSpan(nextCell);
      }
      nextCell = this.cellNavigationService.getNextCellToFocus(key, nextCell);
      hitEdgeOfGrid = missing(nextCell);
    }
    if (hitEdgeOfGrid && event && event.key === KeyCode.UP) {
      nextCell = {
        rowIndex: -1,
        rowPinned: null,
        column: currentCell.column
      };
    }
    if (allowUserOverride) {
      var userFunc = this.gridOptionsWrapper.getNavigateToNextCellFunc();
      if (exists(userFunc)) {
        var params = {
          key,
          previousCellPosition: currentCell,
          nextCellPosition: nextCell ? nextCell : null,
          event
        };
        var userCell = userFunc(params);
        if (exists(userCell)) {
          if (userCell.floating) {
            doOnce(function() {
              console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?");
            }, "no floating in userCell");
            userCell.rowPinned = userCell.floating;
          }
          nextCell = {
            rowPinned: userCell.rowPinned,
            rowIndex: userCell.rowIndex,
            column: userCell.column
          };
        } else {
          nextCell = null;
        }
      }
    }
    if (!nextCell) {
      return;
    }
    if (nextCell.rowIndex < 0) {
      var headerLen = this.headerNavigationService.getHeaderRowCount();
      this.focusService.focusHeaderPosition({
        headerPosition: { headerRowIndex: headerLen + nextCell.rowIndex, column: currentCell.column },
        event: event || void 0
      });
      return;
    }
    var normalisedPosition = this.getNormalisedPosition(nextCell);
    if (normalisedPosition) {
      this.focusPosition(normalisedPosition);
    } else {
      this.tryToFocusFullWidthRow(nextCell);
    }
  };
  NavigationService2.prototype.getNormalisedPosition = function(cellPosition) {
    this.ensureCellVisible(cellPosition);
    var cellCtrl = this.getCellByPosition(cellPosition);
    if (!cellCtrl) {
      return null;
    }
    cellPosition = cellCtrl.getCellPosition();
    this.ensureCellVisible(cellPosition);
    return cellPosition;
  };
  NavigationService2.prototype.tryToFocusFullWidthRow = function(position, backwards) {
    if (backwards === void 0) {
      backwards = false;
    }
    var displayedColumns = this.columnModel.getAllDisplayedColumns();
    var rowComp = this.rowRenderer.getRowByPosition(position);
    if (!rowComp || !rowComp.isFullWidth()) {
      return false;
    }
    var currentCellFocused = this.focusService.getFocusedCell();
    var cellPosition = {
      rowIndex: position.rowIndex,
      rowPinned: position.rowPinned,
      column: position.column || (backwards ? last(displayedColumns) : displayedColumns[0])
    };
    this.focusPosition(cellPosition);
    var fromBelow = currentCellFocused != null ? this.rowPositionUtils.before(cellPosition, currentCellFocused) : false;
    var focusEvent = {
      type: Events.EVENT_FULL_WIDTH_ROW_FOCUSED,
      rowIndex: cellPosition.rowIndex,
      rowPinned: cellPosition.rowPinned,
      column: cellPosition.column,
      isFullWidthCell: true,
      floating: cellPosition.rowPinned,
      fromBelow
    };
    this.eventService.dispatchEvent(focusEvent);
    return true;
  };
  NavigationService2.prototype.focusPosition = function(cellPosition) {
    this.focusService.setFocusedCell({
      rowIndex: cellPosition.rowIndex,
      column: cellPosition.column,
      rowPinned: cellPosition.rowPinned,
      forceBrowserFocus: true
    });
    if (this.rangeService) {
      this.rangeService.setRangeToCell(cellPosition);
    }
  };
  NavigationService2.prototype.isValidNavigateCell = function(cell) {
    var rowNode = this.rowPositionUtils.getRowNode(cell);
    return !!rowNode;
  };
  NavigationService2.prototype.getLastCellOfColSpan = function(cell) {
    var cellCtrl = this.getCellByPosition(cell);
    if (!cellCtrl) {
      return cell;
    }
    var colSpanningList = cellCtrl.getColSpanningList();
    if (colSpanningList.length === 1) {
      return cell;
    }
    return {
      rowIndex: cell.rowIndex,
      column: last(colSpanningList),
      rowPinned: cell.rowPinned
    };
  };
  NavigationService2.prototype.ensureCellVisible = function(gridCell) {
    var _a2;
    var isGroupStickyEnabled = this.gridOptionsWrapper.isGroupRowsSticky();
    var rowNode = this.rowModel.getRow(gridCell.rowIndex);
    var skipScrollToRow = isGroupStickyEnabled && ((_a2 = rowNode) === null || _a2 === void 0 ? void 0 : _a2.sticky);
    if (!skipScrollToRow && missing(gridCell.rowPinned)) {
      this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex);
    }
    if (!gridCell.column.isPinned()) {
      this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column);
    }
  };
  __decorate$1B([
    Autowired("mouseEventService")
  ], NavigationService2.prototype, "mouseEventService", void 0);
  __decorate$1B([
    Autowired("paginationProxy")
  ], NavigationService2.prototype, "paginationProxy", void 0);
  __decorate$1B([
    Autowired("focusService")
  ], NavigationService2.prototype, "focusService", void 0);
  __decorate$1B([
    Optional("rangeService")
  ], NavigationService2.prototype, "rangeService", void 0);
  __decorate$1B([
    Autowired("columnModel")
  ], NavigationService2.prototype, "columnModel", void 0);
  __decorate$1B([
    Autowired("rowModel")
  ], NavigationService2.prototype, "rowModel", void 0);
  __decorate$1B([
    Autowired("ctrlsService")
  ], NavigationService2.prototype, "ctrlsService", void 0);
  __decorate$1B([
    Autowired("rowRenderer")
  ], NavigationService2.prototype, "rowRenderer", void 0);
  __decorate$1B([
    Autowired("headerNavigationService")
  ], NavigationService2.prototype, "headerNavigationService", void 0);
  __decorate$1B([
    Autowired("rowPositionUtils")
  ], NavigationService2.prototype, "rowPositionUtils", void 0);
  __decorate$1B([
    Autowired("cellNavigationService")
  ], NavigationService2.prototype, "cellNavigationService", void 0);
  __decorate$1B([
    Autowired("pinnedRowModel")
  ], NavigationService2.prototype, "pinnedRowModel", void 0);
  __decorate$1B([
    PostConstruct
  ], NavigationService2.prototype, "postConstruct", null);
  NavigationService2 = __decorate$1B([
    Bean("navigationService")
  ], NavigationService2);
  return NavigationService2;
}(BeanStub);
var __extends$1H = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1A = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PopupEditorWrapper = function(_super) {
  __extends$1H(PopupEditorWrapper2, _super);
  function PopupEditorWrapper2(params) {
    var _this = _super.call(this, '<div class="ag-popup-editor" tabindex="-1"/>') || this;
    _this.params = params;
    return _this;
  }
  PopupEditorWrapper2.prototype.postConstruct = function() {
    this.gridOptionsWrapper.setDomData(this.getGui(), PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER, true);
    this.addKeyDownListener();
  };
  PopupEditorWrapper2.prototype.addKeyDownListener = function() {
    var _this = this;
    var eGui = this.getGui();
    var params = this.params;
    var listener = function(event) {
      if (!isUserSuppressingKeyboardEvent(_this.gridOptionsWrapper, event, params.node, params.column, true)) {
        params.onKeyDown(event);
      }
    };
    this.addManagedListener(eGui, "keydown", listener);
  };
  PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER = "popupEditorWrapper";
  __decorate$1A([
    PostConstruct
  ], PopupEditorWrapper2.prototype, "postConstruct", null);
  return PopupEditorWrapper2;
}(PopupComponent);
var __extends$1G = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var CellComp = function(_super) {
  __extends$1G(CellComp2, _super);
  function CellComp2(beans, cellCtrl, printLayout, eRow, editingRow) {
    var _this = _super.call(this) || this;
    _this.rendererVersion = 0;
    _this.editorVersion = 0;
    _this.beans = beans;
    _this.column = cellCtrl.getColumn();
    _this.rowNode = cellCtrl.getRowNode();
    _this.rowCtrl = cellCtrl.getRowCtrl();
    _this.eRow = eRow;
    _this.setTemplate('<div comp-id="' + _this.getCompId() + '"/>');
    var eGui = _this.getGui();
    _this.forceWrapper = cellCtrl.isForceWrapper();
    _this.refreshWrapper(false);
    var setAttribute = function(name, value, element) {
      var actualElement = element ? element : eGui;
      if (value != null && value != "") {
        actualElement.setAttribute(name, value);
      } else {
        actualElement.removeAttribute(name);
      }
    };
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      setUserStyles: function(styles) {
        return addStylesToElement(eGui, styles);
      },
      getFocusableElement: function() {
        return _this.getFocusableElement();
      },
      setTabIndex: function(tabIndex) {
        return setAttribute("tabindex", tabIndex.toString());
      },
      setRole: function(role) {
        return setAriaRole(eGui, role);
      },
      setColId: function(colId) {
        return setAttribute("col-id", colId);
      },
      setTitle: function(title) {
        return setAttribute("title", title);
      },
      setIncludeSelection: function(include) {
        return _this.includeSelection = include;
      },
      setIncludeRowDrag: function(include) {
        return _this.includeRowDrag = include;
      },
      setIncludeDndSource: function(include) {
        return _this.includeDndSource = include;
      },
      setRenderDetails: function(compDetails, valueToDisplay, force) {
        return _this.setRenderDetails(compDetails, valueToDisplay, force);
      },
      setEditDetails: function(compDetails, popup, position) {
        return _this.setEditDetails(compDetails, popup, position);
      },
      getCellEditor: function() {
        return _this.cellEditor || null;
      },
      getCellRenderer: function() {
        return _this.cellRenderer || null;
      },
      getParentOfValue: function() {
        return _this.getParentOfValue();
      }
    };
    _this.cellCtrl = cellCtrl;
    cellCtrl.setComp(compProxy, _this.getGui(), _this.eCellWrapper, printLayout, editingRow);
    return _this;
  }
  CellComp2.prototype.getParentOfValue = function() {
    if (this.eCellValue) {
      return this.eCellValue;
    }
    if (this.eCellWrapper) {
      return this.eCellWrapper;
    }
    return this.getGui();
  };
  CellComp2.prototype.setRenderDetails = function(compDetails, valueToDisplay, forceNewCellRendererInstance) {
    var isInlineEditing = this.cellEditor && !this.cellEditorPopupWrapper;
    if (isInlineEditing) {
      return;
    }
    this.firstRender = this.firstRender == null;
    var controlWrapperChanged = this.refreshWrapper(false);
    if (compDetails) {
      var neverRefresh = forceNewCellRendererInstance || controlWrapperChanged;
      var cellRendererRefreshSuccessful = neverRefresh ? false : this.refreshCellRenderer(compDetails);
      if (!cellRendererRefreshSuccessful) {
        this.destroyRenderer();
        this.createCellRendererInstance(compDetails);
      }
    } else {
      this.destroyRenderer();
      this.insertValueWithoutCellRenderer(valueToDisplay);
    }
  };
  CellComp2.prototype.setEditDetails = function(compDetails, popup, position) {
    if (compDetails) {
      this.createCellEditorInstance(compDetails, popup, position);
    } else {
      this.destroyEditor();
    }
  };
  CellComp2.prototype.removeControls = function() {
    this.checkboxSelectionComp = this.beans.context.destroyBean(this.checkboxSelectionComp);
    this.dndSourceComp = this.beans.context.destroyBean(this.dndSourceComp);
    this.rowDraggingComp = this.beans.context.destroyBean(this.rowDraggingComp);
  };
  CellComp2.prototype.refreshWrapper = function(editing) {
    var providingControls = this.includeRowDrag || this.includeDndSource || this.includeSelection;
    var usingWrapper = providingControls || this.forceWrapper;
    var putWrapperIn = usingWrapper && this.eCellWrapper == null;
    if (putWrapperIn) {
      this.eCellWrapper = loadTemplate('<div class="ag-cell-wrapper" role="presentation"></div>');
      this.getGui().appendChild(this.eCellWrapper);
    }
    var takeWrapperOut = !usingWrapper && this.eCellWrapper != null;
    if (takeWrapperOut) {
      removeFromParent(this.eCellWrapper);
      this.eCellWrapper = void 0;
    }
    this.addOrRemoveCssClass("ag-cell-value", !usingWrapper);
    var usingCellValue = !editing && usingWrapper;
    var putCellValueIn = usingCellValue && this.eCellValue == null;
    if (putCellValueIn) {
      this.eCellValue = loadTemplate('<span class="ag-cell-value" role="presentation"></span>');
      this.eCellWrapper.appendChild(this.eCellValue);
    }
    var takeCellValueOut = !usingCellValue && this.eCellValue != null;
    if (takeCellValueOut) {
      removeFromParent(this.eCellValue);
      this.eCellValue = void 0;
    }
    var templateChanged = putWrapperIn || takeWrapperOut || putCellValueIn || takeCellValueOut;
    if (templateChanged) {
      this.removeControls();
    }
    if (!editing && providingControls) {
      this.addControls();
    }
    return templateChanged;
  };
  CellComp2.prototype.addControls = function() {
    var id = this.eCellValue.id = "cell-" + this.getCompId();
    var describedByIds = [];
    if (this.includeRowDrag) {
      if (this.rowDraggingComp == null) {
        this.rowDraggingComp = this.cellCtrl.createRowDragComp();
        if (this.rowDraggingComp) {
          this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(), this.eCellValue);
        }
      }
    }
    if (this.includeDndSource) {
      if (this.dndSourceComp == null) {
        this.dndSourceComp = this.cellCtrl.createDndSource();
        this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(), this.eCellValue);
      }
    }
    if (this.includeSelection) {
      if (this.checkboxSelectionComp == null) {
        this.checkboxSelectionComp = this.cellCtrl.createSelectionCheckbox();
        this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(), this.eCellValue);
      }
      describedByIds.push(this.checkboxSelectionComp.getCheckboxId());
    }
    describedByIds.push(id);
    setAriaDescribedBy(this.getGui(), describedByIds.join(" "));
  };
  CellComp2.prototype.createCellEditorInstance = function(compDetails, popup, position) {
    var _this = this;
    var versionCopy = this.editorVersion;
    var cellEditorPromise = compDetails.newAgStackInstance();
    if (!cellEditorPromise) {
      return;
    }
    var params = compDetails.params;
    cellEditorPromise.then(function(c2) {
      return _this.afterCellEditorCreated(versionCopy, c2, params, popup, position);
    });
    var cellEditorAsync = missing(this.cellEditor);
    if (cellEditorAsync && params.cellStartedEdit) {
      this.cellCtrl.focusCell(true);
    }
  };
  CellComp2.prototype.insertValueWithoutCellRenderer = function(valueToDisplay) {
    var eParent = this.getParentOfValue();
    clearElement(eParent);
    var escapedValue = valueToDisplay != null ? escapeString(valueToDisplay) : null;
    if (escapedValue != null) {
      eParent.innerHTML = escapedValue;
    }
  };
  CellComp2.prototype.destroyEditorAndRenderer = function() {
    this.destroyRenderer();
    this.destroyEditor();
  };
  CellComp2.prototype.destroyRenderer = function() {
    var context = this.beans.context;
    this.cellRenderer = context.destroyBean(this.cellRenderer);
    removeFromParent(this.cellRendererGui);
    this.cellRendererGui = null;
    this.rendererVersion++;
  };
  CellComp2.prototype.destroyEditor = function() {
    var context = this.beans.context;
    if (this.hideEditorPopup) {
      this.hideEditorPopup();
    }
    this.hideEditorPopup = void 0;
    this.cellEditor = context.destroyBean(this.cellEditor);
    this.cellEditorPopupWrapper = context.destroyBean(this.cellEditorPopupWrapper);
    removeFromParent(this.cellEditorGui);
    this.cellEditorGui = null;
    this.editorVersion++;
  };
  CellComp2.prototype.refreshCellRenderer = function(compClassAndParams) {
    if (this.cellRenderer == null || this.cellRenderer.refresh == null) {
      return false;
    }
    if (this.cellRendererClass !== compClassAndParams.componentClass) {
      return false;
    }
    var result = this.cellRenderer.refresh(compClassAndParams.params);
    return result === true || result === void 0;
  };
  CellComp2.prototype.createCellRendererInstance = function(compDetails) {
    var _this = this;
    var angularCompileRows = this.beans.gridOptionsWrapper.isAngularCompileRows();
    var suppressAnimationFrame = this.beans.gridOptionsWrapper.isSuppressAnimationFrame();
    var useTaskService = !angularCompileRows && !suppressAnimationFrame;
    var displayComponentVersionCopy = this.rendererVersion;
    var componentClass = compDetails.componentClass;
    var createCellRendererFunc = function() {
      var staleTask = _this.rendererVersion !== displayComponentVersionCopy || !_this.isAlive();
      if (staleTask) {
        return;
      }
      var componentPromise = compDetails.newAgStackInstance();
      var callback = _this.afterCellRendererCreated.bind(_this, displayComponentVersionCopy, componentClass);
      if (componentPromise) {
        componentPromise.then(callback);
      }
    };
    if (useTaskService && this.firstRender) {
      this.beans.animationFrameService.createTask(createCellRendererFunc, this.rowNode.rowIndex, "createTasksP2");
    } else {
      createCellRendererFunc();
    }
  };
  CellComp2.prototype.getCtrl = function() {
    return this.cellCtrl;
  };
  CellComp2.prototype.getRowCtrl = function() {
    return this.rowCtrl;
  };
  CellComp2.prototype.getCellRenderer = function() {
    return this.cellRenderer;
  };
  CellComp2.prototype.getCellEditor = function() {
    return this.cellEditor;
  };
  CellComp2.prototype.afterCellRendererCreated = function(cellRendererVersion, cellRendererClass, cellRenderer) {
    var staleTask = !this.isAlive() || cellRendererVersion !== this.rendererVersion;
    if (staleTask) {
      this.beans.context.destroyBean(cellRenderer);
      return;
    }
    this.cellRenderer = cellRenderer;
    this.cellRendererClass = cellRendererClass;
    this.cellRendererGui = this.cellRenderer.getGui();
    if (this.cellRendererGui != null) {
      var eParent = this.getParentOfValue();
      clearElement(eParent);
      eParent.appendChild(this.cellRendererGui);
    }
  };
  CellComp2.prototype.afterCellEditorCreated = function(requestVersion, cellEditor, params, popup, position) {
    var staleComp = requestVersion !== this.editorVersion;
    if (staleComp) {
      this.beans.context.destroyBean(cellEditor);
      return;
    }
    var editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();
    if (editingCancelledByUserComp) {
      this.beans.context.destroyBean(cellEditor);
      this.cellCtrl.stopEditing();
      return;
    }
    if (!cellEditor.getGui) {
      console.warn("AG Grid: cellEditor for column " + this.column.getId() + " is missing getGui() method");
      this.beans.context.destroyBean(cellEditor);
      return;
    }
    this.cellEditor = cellEditor;
    this.cellEditorGui = cellEditor.getGui();
    var cellEditorInPopup = popup || cellEditor.isPopup !== void 0 && cellEditor.isPopup();
    if (cellEditorInPopup) {
      if (!popup) {
        this.cellCtrl.hackSayEditingInPopup();
      }
      this.addPopupCellEditor(params, position);
    } else {
      this.addInCellEditor();
    }
    if (cellEditor.afterGuiAttached) {
      cellEditor.afterGuiAttached();
    }
  };
  CellComp2.prototype.addInCellEditor = function() {
    var eGui = this.getGui();
    var eDocument = this.beans.gridOptionsWrapper.getDocument();
    if (eGui.contains(eDocument.activeElement)) {
      eGui.focus();
    }
    this.destroyRenderer();
    this.refreshWrapper(true);
    this.clearParentOfValue();
    if (this.cellEditorGui) {
      var eParent = this.getParentOfValue();
      eParent.appendChild(this.cellEditorGui);
    }
  };
  CellComp2.prototype.addPopupCellEditor = function(params, position) {
    var _this = this;
    if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
      console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");
    }
    var cellEditor = this.cellEditor;
    this.cellEditorPopupWrapper = this.beans.context.createBean(new PopupEditorWrapper(params));
    var ePopupGui = this.cellEditorPopupWrapper.getGui();
    if (this.cellEditorGui) {
      ePopupGui.appendChild(this.cellEditorGui);
    }
    var popupService = this.beans.popupService;
    var useModelPopup = this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus();
    var positionToUse = position != null ? position : cellEditor.getPopupPosition ? cellEditor.getPopupPosition() : "over";
    var positionParams = {
      column: this.column,
      rowNode: this.rowNode,
      type: "popupCellEditor",
      eventSource: this.getGui(),
      ePopup: ePopupGui,
      keepWithinBounds: true
    };
    var positionCallback = positionToUse === "under" ? popupService.positionPopupUnderComponent.bind(popupService, positionParams) : popupService.positionPopupOverComponent.bind(popupService, positionParams);
    var translate2 = this.beans.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = popupService.addPopup({
      modal: useModelPopup,
      eChild: ePopupGui,
      closeOnEsc: true,
      closedCallback: function() {
        _this.cellCtrl.onPopupEditorClosed();
      },
      anchorToElement: this.getGui(),
      positionCallback,
      ariaLabel: translate2("ariaLabelCellEditor", "Cell Editor")
    });
    if (addPopupRes) {
      this.hideEditorPopup = addPopupRes.hideFunc;
    }
  };
  CellComp2.prototype.detach = function() {
    this.eRow.removeChild(this.getGui());
  };
  CellComp2.prototype.destroy = function() {
    this.cellCtrl.stopEditing();
    this.destroyEditorAndRenderer();
    this.removeControls();
    _super.prototype.destroy.call(this);
  };
  CellComp2.prototype.clearParentOfValue = function() {
    var eGui = this.getGui();
    var eDocument = this.beans.gridOptionsWrapper.getDocument();
    if (eGui.contains(eDocument.activeElement) && browserSupportsPreventScroll()) {
      eGui.focus({ preventScroll: true });
    }
    clearElement(this.getParentOfValue());
  };
  return CellComp2;
}(Component);
var __extends$1F = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var RowComp = function(_super) {
  __extends$1F(RowComp2, _super);
  function RowComp2(ctrl, beans, containerType) {
    var _this = _super.call(this) || this;
    _this.cellComps = {};
    _this.beans = beans;
    _this.rowCtrl = ctrl;
    _this.setTemplate('<div comp-id="' + _this.getCompId() + '" style="' + _this.getInitialStyle() + '"/>');
    var eGui = _this.getGui();
    var style2 = eGui.style;
    var compProxy = {
      setDomOrder: function(domOrder) {
        return _this.domOrder = domOrder;
      },
      setCellCtrls: function(cellCtrls) {
        return _this.setCellCtrls(cellCtrls);
      },
      showFullWidth: function(compDetails) {
        return _this.showFullWidth(compDetails);
      },
      getFullWidthCellRenderer: function() {
        return _this.getFullWidthCellRenderer();
      },
      addOrRemoveCssClass: function(name, on2) {
        return _this.addOrRemoveCssClass(name, on2);
      },
      setUserStyles: function(styles) {
        return addStylesToElement(eGui, styles);
      },
      setTop: function(top) {
        return style2.top = top;
      },
      setTransform: function(transform) {
        return style2.transform = transform;
      },
      setRowIndex: function(rowIndex) {
        return eGui.setAttribute("row-index", rowIndex);
      },
      setRole: function(role) {
        return setAriaRole(eGui, role);
      },
      setRowId: function(rowId) {
        return eGui.setAttribute("row-id", rowId);
      },
      setRowBusinessKey: function(businessKey) {
        return eGui.setAttribute("row-business-key", businessKey);
      },
      setTabIndex: function(tabIndex) {
        return eGui.setAttribute("tabindex", tabIndex.toString());
      }
    };
    ctrl.setComp(compProxy, _this.getGui(), containerType);
    return _this;
  }
  RowComp2.prototype.getInitialStyle = function() {
    var transform = this.rowCtrl.getInitialTransform();
    var top = this.rowCtrl.getInitialRowTop();
    return transform ? "transform: " + transform : "top: " + top;
  };
  RowComp2.prototype.showFullWidth = function(compDetails) {
    var _this = this;
    var callback = function(cellRenderer) {
      if (_this.isAlive()) {
        var eGui = cellRenderer.getGui();
        _this.getGui().appendChild(eGui);
        _this.rowCtrl.setupDetailRowAutoHeight(eGui);
        _this.setFullWidthRowComp(cellRenderer);
      } else {
        _this.beans.context.destroyBean(cellRenderer);
      }
    };
    var res = compDetails.newAgStackInstance();
    if (!res) {
      return;
    }
    res.then(callback);
  };
  RowComp2.prototype.setCellCtrls = function(cellCtrls) {
    var _this = this;
    var cellsToRemove = Object.assign({}, this.cellComps);
    cellCtrls.forEach(function(cellCtrl) {
      var key = cellCtrl.getInstanceId();
      var existingCellComp = _this.cellComps[key];
      if (existingCellComp == null) {
        _this.newCellComp(cellCtrl);
      } else {
        cellsToRemove[key] = null;
      }
    });
    var cellCompsToRemove = getAllValuesInObject(cellsToRemove).filter(function(cellComp) {
      return cellComp != null;
    });
    this.destroyCells(cellCompsToRemove);
    this.ensureDomOrder(cellCtrls);
  };
  RowComp2.prototype.ensureDomOrder = function(cellCtrls) {
    var _this = this;
    if (!this.domOrder) {
      return;
    }
    var elementsInOrder = [];
    cellCtrls.forEach(function(cellCtrl) {
      var cellComp = _this.cellComps[cellCtrl.getInstanceId()];
      if (cellComp) {
        elementsInOrder.push(cellComp.getGui());
      }
    });
    setDomChildOrder(this.getGui(), elementsInOrder);
  };
  RowComp2.prototype.newCellComp = function(cellCtrl) {
    var cellComp = new CellComp(this.beans, cellCtrl, this.rowCtrl.isPrintLayout(), this.getGui(), this.rowCtrl.isEditing());
    this.cellComps[cellCtrl.getInstanceId()] = cellComp;
    this.getGui().appendChild(cellComp.getGui());
  };
  RowComp2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
    this.destroyAllCells();
  };
  RowComp2.prototype.destroyAllCells = function() {
    var cellsToDestroy = getAllValuesInObject(this.cellComps).filter(function(cp) {
      return cp != null;
    });
    this.destroyCells(cellsToDestroy);
  };
  RowComp2.prototype.setFullWidthRowComp = function(fullWidthRowComponent) {
    var _this = this;
    if (this.fullWidthCellRenderer) {
      console.error("AG Grid - should not be setting fullWidthRowComponent twice");
    }
    this.fullWidthCellRenderer = fullWidthRowComponent;
    this.addDestroyFunc(function() {
      _this.fullWidthCellRenderer = _this.beans.context.destroyBean(_this.fullWidthCellRenderer);
    });
  };
  RowComp2.prototype.getFullWidthCellRenderer = function() {
    return this.fullWidthCellRenderer;
  };
  RowComp2.prototype.destroyCells = function(cellComps) {
    var _this = this;
    cellComps.forEach(function(cellComp) {
      if (!cellComp) {
        return;
      }
      var instanceId = cellComp.getCtrl().getInstanceId();
      if (_this.cellComps[instanceId] !== cellComp) {
        return;
      }
      cellComp.detach();
      cellComp.destroy();
      _this.cellComps[instanceId] = null;
    });
  };
  return RowComp2;
}(Component);
var __extends$1E = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$2 = function() {
  __assign$2 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$2.apply(this, arguments);
};
var __decorate$1z = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
function templateFactory() {
  var name = Component.elementGettingCreated.getAttribute("name");
  var cssClasses = RowContainerCtrl.getRowContainerCssClasses(name);
  var res;
  var template1 = name === RowContainerName.CENTER;
  var template2 = name === RowContainerName.TOP_CENTER || name === RowContainerName.STICKY_TOP_CENTER || name === RowContainerName.BOTTOM_CENTER;
  if (template1) {
    res = '<div class="' + cssClasses.wrapper + '" ref="eWrapper" role="presentation">\n                <div class="' + cssClasses.viewport + '" ref="eViewport" role="presentation">\n                    <div class="' + cssClasses.container + '" ref="eContainer"></div>\n                </div>\n            </div>';
  } else if (template2) {
    res = '<div class="' + cssClasses.viewport + '" ref="eViewport" role="presentation">\n                <div class="' + cssClasses.container + '" ref="eContainer"></div>\n            </div>';
  } else {
    res = '<div class="' + cssClasses.container + '" ref="eContainer"></div>';
  }
  return res;
}
var RowContainerComp = function(_super) {
  __extends$1E(RowContainerComp2, _super);
  function RowContainerComp2() {
    var _this = _super.call(this, templateFactory()) || this;
    _this.rowComps = {};
    _this.name = Component.elementGettingCreated.getAttribute("name");
    _this.type = getRowContainerTypeForName(_this.name);
    return _this;
  }
  RowContainerComp2.prototype.postConstruct = function() {
    var _this = this;
    var compProxy = {
      setViewportHeight: function(height) {
        return _this.eViewport.style.height = height;
      },
      setRowCtrls: function(rowCtrls) {
        return _this.setRowCtrls(rowCtrls);
      },
      setDomOrder: function(domOrder) {
        _this.domOrder = domOrder;
      },
      setContainerWidth: function(width) {
        return _this.eContainer.style.width = width;
      }
    };
    var ctrl = this.createManagedBean(new RowContainerCtrl(this.name));
    ctrl.setComp(compProxy, this.eContainer, this.eViewport, this.eWrapper);
  };
  RowContainerComp2.prototype.preDestroy = function() {
    this.setRowCtrls([]);
  };
  RowContainerComp2.prototype.setRowCtrls = function(rowCtrls) {
    var _this = this;
    var oldRows = __assign$2({}, this.rowComps);
    this.rowComps = {};
    this.lastPlacedElement = null;
    var processRow = function(rowCon) {
      var instanceId = rowCon.getInstanceId();
      var existingRowComp = oldRows[instanceId];
      if (existingRowComp) {
        _this.rowComps[instanceId] = existingRowComp;
        delete oldRows[instanceId];
        _this.ensureDomOrder(existingRowComp.getGui());
      } else {
        var rowComp = _this.newRowComp(rowCon);
        _this.rowComps[instanceId] = rowComp;
        _this.appendRow(rowComp.getGui());
      }
    };
    rowCtrls.forEach(processRow);
    getAllValuesInObject(oldRows).forEach(function(oldRowComp) {
      _this.eContainer.removeChild(oldRowComp.getGui());
      oldRowComp.destroy();
    });
    setAriaRole(this.eContainer, rowCtrls.length ? "rowgroup" : "presentation");
  };
  RowContainerComp2.prototype.appendRow = function(element) {
    if (this.domOrder) {
      insertWithDomOrder(this.eContainer, element, this.lastPlacedElement);
    } else {
      this.eContainer.appendChild(element);
    }
    this.lastPlacedElement = element;
  };
  RowContainerComp2.prototype.ensureDomOrder = function(eRow) {
    if (this.domOrder) {
      ensureDomOrder(this.eContainer, eRow, this.lastPlacedElement);
      this.lastPlacedElement = eRow;
    }
  };
  RowContainerComp2.prototype.newRowComp = function(rowCtrl) {
    RowContainerCtrl.getPinned(this.name);
    var res = new RowComp(rowCtrl, this.beans, this.type);
    return res;
  };
  __decorate$1z([
    Autowired("beans")
  ], RowContainerComp2.prototype, "beans", void 0);
  __decorate$1z([
    RefSelector("eViewport")
  ], RowContainerComp2.prototype, "eViewport", void 0);
  __decorate$1z([
    RefSelector("eContainer")
  ], RowContainerComp2.prototype, "eContainer", void 0);
  __decorate$1z([
    RefSelector("eWrapper")
  ], RowContainerComp2.prototype, "eWrapper", void 0);
  __decorate$1z([
    PostConstruct
  ], RowContainerComp2.prototype, "postConstruct", null);
  __decorate$1z([
    PreDestroy
  ], RowContainerComp2.prototype, "preDestroy", null);
  return RowContainerComp2;
}(Component);
var __decorate$1y = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var BodyDropPivotTarget = function() {
  function BodyDropPivotTarget2(pinned) {
    this.columnsToAggregate = [];
    this.columnsToGroup = [];
    this.columnsToPivot = [];
    this.pinned = pinned;
  }
  BodyDropPivotTarget2.prototype.onDragEnter = function(draggingEvent) {
    var _this = this;
    this.clearColumnsList();
    if (this.gridOptionsWrapper.isFunctionsReadOnly()) {
      return;
    }
    var dragColumns = draggingEvent.dragItem.columns;
    if (!dragColumns) {
      return;
    }
    dragColumns.forEach(function(column) {
      if (!column.isPrimary()) {
        return;
      }
      if (column.isAnyFunctionActive()) {
        return;
      }
      if (column.isAllowValue()) {
        _this.columnsToAggregate.push(column);
      } else if (column.isAllowRowGroup()) {
        _this.columnsToGroup.push(column);
      } else if (column.isAllowPivot()) {
        _this.columnsToPivot.push(column);
      }
    });
  };
  BodyDropPivotTarget2.prototype.getIconName = function() {
    var totalColumns = this.columnsToAggregate.length + this.columnsToGroup.length + this.columnsToPivot.length;
    if (totalColumns > 0) {
      return this.pinned ? DragAndDropService.ICON_PINNED : DragAndDropService.ICON_MOVE;
    }
    return null;
  };
  BodyDropPivotTarget2.prototype.onDragLeave = function(draggingEvent) {
    this.clearColumnsList();
  };
  BodyDropPivotTarget2.prototype.clearColumnsList = function() {
    this.columnsToAggregate.length = 0;
    this.columnsToGroup.length = 0;
    this.columnsToPivot.length = 0;
  };
  BodyDropPivotTarget2.prototype.onDragging = function(draggingEvent) {
  };
  BodyDropPivotTarget2.prototype.onDragStop = function(draggingEvent) {
    if (this.columnsToAggregate.length > 0) {
      this.columnModel.addValueColumns(this.columnsToAggregate, "toolPanelDragAndDrop");
    }
    if (this.columnsToGroup.length > 0) {
      this.columnModel.addRowGroupColumns(this.columnsToGroup, "toolPanelDragAndDrop");
    }
    if (this.columnsToPivot.length > 0) {
      this.columnModel.addPivotColumns(this.columnsToPivot, "toolPanelDragAndDrop");
    }
  };
  __decorate$1y([
    Autowired("columnModel")
  ], BodyDropPivotTarget2.prototype, "columnModel", void 0);
  __decorate$1y([
    Autowired("gridOptionsWrapper")
  ], BodyDropPivotTarget2.prototype, "gridOptionsWrapper", void 0);
  return BodyDropPivotTarget2;
}();
var __decorate$1x = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$d = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var MoveColumnFeature = function() {
  function MoveColumnFeature2(pinned, eContainer) {
    this.needToMoveLeft = false;
    this.needToMoveRight = false;
    this.pinned = pinned;
    this.eContainer = eContainer;
    this.centerContainer = !exists(pinned);
  }
  MoveColumnFeature2.prototype.init = function() {
    var _this = this;
    this.ctrlsService.whenReady(function() {
      _this.gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
    });
  };
  MoveColumnFeature2.prototype.getIconName = function() {
    return this.pinned ? DragAndDropService.ICON_PINNED : DragAndDropService.ICON_MOVE;
  };
  MoveColumnFeature2.prototype.onDragEnter = function(draggingEvent) {
    var columns = draggingEvent.dragItem.columns;
    var dragCameFromToolPanel = draggingEvent.dragSource.type === DragSourceType.ToolPanel;
    if (dragCameFromToolPanel) {
      this.setColumnsVisible(columns, true, "uiColumnDragged");
    } else {
      var visibleState_1 = draggingEvent.dragItem.visibleState;
      var visibleColumns = (columns || []).filter(function(column) {
        return visibleState_1[column.getId()];
      });
      this.setColumnsVisible(visibleColumns, true, "uiColumnDragged");
    }
    this.setColumnsPinned(columns, this.pinned, "uiColumnDragged");
    this.onDragging(draggingEvent, true, true);
  };
  MoveColumnFeature2.prototype.onDragLeave = function(draggingEvent) {
    this.ensureIntervalCleared();
  };
  MoveColumnFeature2.prototype.setColumnsVisible = function(columns, visible, source) {
    if (source === void 0) {
      source = "api";
    }
    if (columns) {
      var allowedCols = columns.filter(function(c2) {
        return !c2.getColDef().lockVisible;
      });
      this.columnModel.setColumnsVisible(allowedCols, visible, source);
    }
  };
  MoveColumnFeature2.prototype.setColumnsPinned = function(columns, pinned, source) {
    if (source === void 0) {
      source = "api";
    }
    if (columns) {
      var allowedCols = columns.filter(function(c2) {
        return !c2.getColDef().lockPinned;
      });
      this.columnModel.setColumnsPinned(allowedCols, pinned, source);
    }
  };
  MoveColumnFeature2.prototype.onDragStop = function() {
    this.ensureIntervalCleared();
  };
  MoveColumnFeature2.prototype.normaliseX = function(x2) {
    if (this.gridOptionsWrapper.isEnableRtl()) {
      var clientWidth = this.eContainer.clientWidth;
      x2 = clientWidth - x2;
    }
    if (this.centerContainer) {
      x2 += this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft();
    }
    return x2;
  };
  MoveColumnFeature2.prototype.checkCenterForScrolling = function(xAdjustedForScroll) {
    if (this.centerContainer) {
      var firstVisiblePixel = this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft();
      var lastVisiblePixel = firstVisiblePixel + this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();
      if (this.gridOptionsWrapper.isEnableRtl()) {
        this.needToMoveRight = xAdjustedForScroll < firstVisiblePixel + 50;
        this.needToMoveLeft = xAdjustedForScroll > lastVisiblePixel - 50;
      } else {
        this.needToMoveLeft = xAdjustedForScroll < firstVisiblePixel + 50;
        this.needToMoveRight = xAdjustedForScroll > lastVisiblePixel - 50;
      }
      if (this.needToMoveLeft || this.needToMoveRight) {
        this.ensureIntervalStarted();
      } else {
        this.ensureIntervalCleared();
      }
    }
  };
  MoveColumnFeature2.prototype.onDragging = function(draggingEvent, fromEnter, fakeEvent) {
    var _this = this;
    if (fromEnter === void 0) {
      fromEnter = false;
    }
    if (fakeEvent === void 0) {
      fakeEvent = false;
    }
    this.lastDraggingEvent = draggingEvent;
    if (missing(draggingEvent.hDirection)) {
      return;
    }
    var mouseXNormalised = this.normaliseX(draggingEvent.x);
    if (!fromEnter) {
      this.checkCenterForScrolling(mouseXNormalised);
    }
    var hDirectionNormalised = this.normaliseDirection(draggingEvent.hDirection);
    var dragSourceType = draggingEvent.dragSource.type;
    var columnsToMove = draggingEvent.dragSource.getDragItem().columns;
    columnsToMove = columnsToMove.filter(function(col) {
      if (col.getColDef().lockPinned) {
        return col.getPinned() == _this.pinned;
      }
      return true;
    });
    this.attemptMoveColumns(dragSourceType, columnsToMove, hDirectionNormalised, mouseXNormalised, fromEnter, fakeEvent);
  };
  MoveColumnFeature2.prototype.normaliseDirection = function(hDirection) {
    if (this.gridOptionsWrapper.isEnableRtl()) {
      switch (hDirection) {
        case HorizontalDirection.Left:
          return HorizontalDirection.Right;
        case HorizontalDirection.Right:
          return HorizontalDirection.Left;
        default:
          console.error("AG Grid: Unknown direction " + hDirection);
      }
    } else {
      return hDirection;
    }
  };
  MoveColumnFeature2.prototype.calculateOldIndex = function(movingCols) {
    var gridCols = this.columnModel.getAllGridColumns();
    var indexes = sortNumerically(movingCols.map(function(col) {
      return gridCols.indexOf(col);
    }));
    var firstIndex = indexes[0];
    var lastIndex = last(indexes);
    var spread = lastIndex - firstIndex;
    var gapsExist = spread !== indexes.length - 1;
    return gapsExist ? null : firstIndex;
  };
  MoveColumnFeature2.prototype.attemptMoveColumns = function(dragSourceType, allMovingColumns, hDirection, mouseX, fromEnter, fakeEvent) {
    var draggingLeft = hDirection === HorizontalDirection.Left;
    var draggingRight = hDirection === HorizontalDirection.Right;
    if (dragSourceType === DragSourceType.HeaderCell) {
      var newCols_1 = [];
      allMovingColumns.forEach(function(col) {
        var movingGroup = null;
        var parent = col.getParent();
        while (parent != null && parent.getDisplayedLeafColumns().length === 1) {
          movingGroup = parent;
          parent = parent.getParent();
        }
        if (movingGroup != null) {
          movingGroup.getLeafColumns().forEach(function(newCol) {
            if (!newCols_1.includes(newCol)) {
              newCols_1.push(newCol);
            }
          });
        } else if (!newCols_1.includes(col)) {
          newCols_1.push(col);
        }
      });
      allMovingColumns = newCols_1;
    }
    var allMovingColumnsOrdered = allMovingColumns.slice();
    this.columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);
    var validMoves = this.calculateValidMoves(allMovingColumnsOrdered, draggingRight, mouseX);
    var oldIndex = this.calculateOldIndex(allMovingColumnsOrdered);
    if (validMoves.length === 0) {
      return;
    }
    var firstValidMove = validMoves[0];
    var constrainDirection = oldIndex !== null && !fromEnter;
    if (dragSourceType == DragSourceType.HeaderCell) {
      constrainDirection = oldIndex !== null;
    }
    if (constrainDirection && !fakeEvent) {
      if (draggingLeft && firstValidMove >= oldIndex) {
        return;
      }
      if (draggingRight && firstValidMove <= oldIndex) {
        return;
      }
    }
    var displayedCols = this.columnModel.getAllDisplayedColumns();
    var potentialMoves = [];
    var targetOrder = null;
    for (var i2 = 0; i2 < validMoves.length; i2++) {
      var move = validMoves[i2];
      var order = this.columnModel.getProposedColumnOrder(allMovingColumnsOrdered, move);
      if (!this.columnModel.doesOrderPassRules(order)) {
        continue;
      }
      var displayedOrder = order.filter(function(col) {
        return displayedCols.includes(col);
      });
      if (targetOrder === null) {
        targetOrder = displayedOrder;
      } else if (!_.areEqual(displayedOrder, targetOrder)) {
        break;
      }
      var fragCount = this.groupFragCount(order);
      potentialMoves.push({ move, fragCount });
    }
    if (potentialMoves.length === 0) {
      return;
    }
    potentialMoves.sort(function(a3, b2) {
      return a3.fragCount - b2.fragCount;
    });
    var bestMove = potentialMoves[0].move;
    this.columnModel.moveColumns(allMovingColumnsOrdered, bestMove, "uiColumnDragged");
  };
  MoveColumnFeature2.prototype.groupFragCount = function(columns) {
    function parents(col) {
      var result = [];
      var parent = col.getOriginalParent();
      while (parent != null) {
        result.push(parent);
        parent = parent.getOriginalParent();
      }
      return result;
    }
    var count = 0;
    var _loop_1 = function(i3) {
      var _a2;
      var a3 = parents(columns[i3]);
      var b2 = parents(columns[i3 + 1]);
      _a2 = __read$d(a3.length > b2.length ? [a3, b2] : [b2, a3], 2), a3 = _a2[0], b2 = _a2[1];
      a3.forEach(function(parent) {
        if (b2.indexOf(parent) === -1) {
          count++;
        }
      });
    };
    for (var i2 = 0; i2 < columns.length - 1; i2++) {
      _loop_1(i2);
    }
    return count;
  };
  MoveColumnFeature2.prototype.calculateValidMoves = function(movingCols, draggingRight, mouseX) {
    var isMoveBlocked = this.gridOptionsWrapper.isSuppressMovableColumns() || movingCols.some(function(col2) {
      return col2.getColDef().suppressMovable;
    });
    if (isMoveBlocked) {
      return [];
    }
    var allDisplayedCols = this.columnModel.getDisplayedColumns(this.pinned);
    var allGridCols = this.columnModel.getAllGridColumns();
    var movingDisplayedCols = allDisplayedCols.filter(function(col2) {
      return includes(movingCols, col2);
    });
    var otherDisplayedCols = allDisplayedCols.filter(function(col2) {
      return !includes(movingCols, col2);
    });
    var otherGridCols = allGridCols.filter(function(col2) {
      return !includes(movingCols, col2);
    });
    var displayIndex = 0;
    var availableWidth = mouseX;
    if (draggingRight) {
      var widthOfMovingDisplayedCols_1 = 0;
      movingDisplayedCols.forEach(function(col2) {
        return widthOfMovingDisplayedCols_1 += col2.getActualWidth();
      });
      availableWidth -= widthOfMovingDisplayedCols_1;
    }
    if (availableWidth > 0) {
      for (var i2 = 0; i2 < otherDisplayedCols.length; i2++) {
        var col = otherDisplayedCols[i2];
        availableWidth -= col.getActualWidth();
        if (availableWidth < 0) {
          break;
        }
        displayIndex++;
      }
      if (draggingRight) {
        displayIndex++;
      }
    }
    var firstValidMove;
    if (displayIndex > 0) {
      var leftColumn = otherDisplayedCols[displayIndex - 1];
      firstValidMove = otherGridCols.indexOf(leftColumn) + 1;
    } else {
      firstValidMove = otherGridCols.indexOf(otherDisplayedCols[0]);
      if (firstValidMove === -1) {
        firstValidMove = 0;
      }
    }
    var validMoves = [firstValidMove];
    var numberComparator = function(a3, b2) {
      return a3 - b2;
    };
    if (draggingRight) {
      var pointer = firstValidMove + 1;
      var lastIndex = allGridCols.length - 1;
      while (pointer <= lastIndex) {
        validMoves.push(pointer);
        pointer++;
      }
      validMoves.sort(numberComparator);
    } else {
      var pointer = firstValidMove;
      var lastIndex = allGridCols.length - 1;
      var displacedCol = allGridCols[pointer];
      while (pointer <= lastIndex && this.isColumnHidden(allDisplayedCols, displacedCol)) {
        pointer++;
        validMoves.push(pointer);
        displacedCol = allGridCols[pointer];
      }
      pointer = firstValidMove - 1;
      var firstDisplayIndex = 0;
      while (pointer >= firstDisplayIndex) {
        validMoves.push(pointer);
        pointer--;
      }
      validMoves.sort(numberComparator).reverse();
    }
    return validMoves;
  };
  MoveColumnFeature2.prototype.isColumnHidden = function(displayedColumns, col) {
    return displayedColumns.indexOf(col) < 0;
  };
  MoveColumnFeature2.prototype.ensureIntervalStarted = function() {
    if (!this.movingIntervalId) {
      this.intervalCount = 0;
      this.failedMoveAttempts = 0;
      this.movingIntervalId = window.setInterval(this.moveInterval.bind(this), 100);
      if (this.needToMoveLeft) {
        this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT, true);
      } else {
        this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT, true);
      }
    }
  };
  MoveColumnFeature2.prototype.ensureIntervalCleared = function() {
    if (this.movingIntervalId) {
      window.clearInterval(this.movingIntervalId);
      this.movingIntervalId = null;
      this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE);
    }
  };
  MoveColumnFeature2.prototype.moveInterval = function() {
    var pixelsToMove;
    this.intervalCount++;
    pixelsToMove = 10 + this.intervalCount * 5;
    if (pixelsToMove > 100) {
      pixelsToMove = 100;
    }
    var pixelsMoved = null;
    var scrollFeature = this.gridBodyCon.getScrollFeature();
    if (this.needToMoveLeft) {
      pixelsMoved = scrollFeature.scrollHorizontally(-pixelsToMove);
    } else if (this.needToMoveRight) {
      pixelsMoved = scrollFeature.scrollHorizontally(pixelsToMove);
    }
    if (pixelsMoved !== 0) {
      this.onDragging(this.lastDraggingEvent);
      this.failedMoveAttempts = 0;
    } else {
      this.failedMoveAttempts++;
      var columns = this.lastDraggingEvent.dragItem.columns;
      var columnsThatCanPin = columns.filter(function(c2) {
        return !c2.getColDef().lockPinned;
      });
      if (columnsThatCanPin.length > 0) {
        this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED);
        if (this.failedMoveAttempts > 7) {
          var pinType = this.needToMoveLeft ? Constants.PINNED_LEFT : Constants.PINNED_RIGHT;
          this.setColumnsPinned(columnsThatCanPin, pinType, "uiColumnDragged");
          this.dragAndDropService.nudge();
        }
      }
    }
  };
  __decorate$1x([
    Autowired("columnModel")
  ], MoveColumnFeature2.prototype, "columnModel", void 0);
  __decorate$1x([
    Autowired("dragAndDropService")
  ], MoveColumnFeature2.prototype, "dragAndDropService", void 0);
  __decorate$1x([
    Autowired("gridOptionsWrapper")
  ], MoveColumnFeature2.prototype, "gridOptionsWrapper", void 0);
  __decorate$1x([
    Autowired("ctrlsService")
  ], MoveColumnFeature2.prototype, "ctrlsService", void 0);
  __decorate$1x([
    PostConstruct
  ], MoveColumnFeature2.prototype, "init", null);
  return MoveColumnFeature2;
}();
var __extends$1D = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1w = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var BodyDropTarget = function(_super) {
  __extends$1D(BodyDropTarget2, _super);
  function BodyDropTarget2(pinned, eContainer) {
    var _this = _super.call(this) || this;
    _this.pinned = pinned;
    _this.eContainer = eContainer;
    return _this;
  }
  BodyDropTarget2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      switch (_this.pinned) {
        case Constants.PINNED_LEFT:
          _this.eSecondaryContainers = [
            [p.gridBodyCtrl.getBodyViewportElement(), p.leftRowContainerCtrl.getContainerElement()],
            [p.bottomLeftRowContainerCtrl.getContainerElement()],
            [p.topLeftRowContainerCtrl.getContainerElement()]
          ];
          break;
        case Constants.PINNED_RIGHT:
          _this.eSecondaryContainers = [
            [p.gridBodyCtrl.getBodyViewportElement(), p.rightRowContainerCtrl.getContainerElement()],
            [p.bottomRightRowContainerCtrl.getContainerElement()],
            [p.topRightRowContainerCtrl.getContainerElement()]
          ];
          break;
        default:
          _this.eSecondaryContainers = [
            [p.gridBodyCtrl.getBodyViewportElement(), p.centerRowContainerCtrl.getViewportElement()],
            [p.bottomCenterRowContainerCtrl.getViewportElement()],
            [p.topCenterRowContainerCtrl.getViewportElement()]
          ];
          break;
      }
    });
  };
  BodyDropTarget2.prototype.isInterestedIn = function(type) {
    return type === DragSourceType.HeaderCell || type === DragSourceType.ToolPanel && this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel();
  };
  BodyDropTarget2.prototype.getSecondaryContainers = function() {
    return this.eSecondaryContainers;
  };
  BodyDropTarget2.prototype.getContainer = function() {
    return this.eContainer;
  };
  BodyDropTarget2.prototype.init = function() {
    this.moveColumnFeature = this.createManagedBean(new MoveColumnFeature(this.pinned, this.eContainer));
    this.bodyDropPivotTarget = this.createManagedBean(new BodyDropPivotTarget(this.pinned));
    this.dragAndDropService.addDropTarget(this);
  };
  BodyDropTarget2.prototype.getIconName = function() {
    return this.currentDropListener.getIconName();
  };
  BodyDropTarget2.prototype.isDropColumnInPivotMode = function(draggingEvent) {
    return this.columnModel.isPivotMode() && draggingEvent.dragSource.type === DragSourceType.ToolPanel;
  };
  BodyDropTarget2.prototype.onDragEnter = function(draggingEvent) {
    this.currentDropListener = this.isDropColumnInPivotMode(draggingEvent) ? this.bodyDropPivotTarget : this.moveColumnFeature;
    this.currentDropListener.onDragEnter(draggingEvent);
  };
  BodyDropTarget2.prototype.onDragLeave = function(params) {
    this.currentDropListener.onDragLeave(params);
  };
  BodyDropTarget2.prototype.onDragging = function(params) {
    this.currentDropListener.onDragging(params);
  };
  BodyDropTarget2.prototype.onDragStop = function(params) {
    this.currentDropListener.onDragStop(params);
  };
  __decorate$1w([
    Autowired("dragAndDropService")
  ], BodyDropTarget2.prototype, "dragAndDropService", void 0);
  __decorate$1w([
    Autowired("columnModel")
  ], BodyDropTarget2.prototype, "columnModel", void 0);
  __decorate$1w([
    Autowired("ctrlsService")
  ], BodyDropTarget2.prototype, "ctrlsService", void 0);
  __decorate$1w([
    PostConstruct
  ], BodyDropTarget2.prototype, "postConstruct", null);
  __decorate$1w([
    PostConstruct
  ], BodyDropTarget2.prototype, "init", null);
  return BodyDropTarget2;
}(BeanStub);
var __read$c = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$a = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$c(arguments[i2]));
  return ar;
};
var CssClassApplier = function() {
  function CssClassApplier2() {
  }
  CssClassApplier2.getHeaderClassesFromColDef = function(abstractColDef, gridOptionsWrapper, column, columnGroup) {
    if (missing(abstractColDef)) {
      return [];
    }
    return this.getColumnClassesFromCollDef(abstractColDef.headerClass, abstractColDef, gridOptionsWrapper, column, columnGroup);
  };
  CssClassApplier2.getToolPanelClassesFromColDef = function(abstractColDef, gridOptionsWrapper, column, columnGroup) {
    if (missing(abstractColDef)) {
      return [];
    }
    return this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass, abstractColDef, gridOptionsWrapper, column, columnGroup);
  };
  CssClassApplier2.getClassParams = function(abstractColDef, gridOptionsWrapper, column, columnGroup) {
    return {
      colDef: abstractColDef,
      column,
      columnGroup,
      api: gridOptionsWrapper.getApi(),
      columnApi: gridOptionsWrapper.getColumnApi(),
      context: gridOptionsWrapper.getContext()
    };
  };
  CssClassApplier2.getColumnClassesFromCollDef = function(classesOrFunc, abstractColDef, gridOptionsWrapper, column, columnGroup) {
    if (missing(classesOrFunc)) {
      return [];
    }
    var classToUse;
    if (typeof classesOrFunc === "function") {
      var params = this.getClassParams(abstractColDef, gridOptionsWrapper, column, columnGroup);
      classToUse = classesOrFunc(params);
    } else {
      classToUse = classesOrFunc;
    }
    if (typeof classToUse === "string") {
      return [classToUse];
    }
    if (Array.isArray(classToUse)) {
      return __spread$a(classToUse);
    }
    return [];
  };
  return CssClassApplier2;
}();
var __extends$1C = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1v = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderCellComp = function(_super) {
  __extends$1C(HeaderCellComp2, _super);
  function HeaderCellComp2(ctrl) {
    var _this = _super.call(this, HeaderCellComp2.TEMPLATE, ctrl) || this;
    _this.headerCompVersion = 0;
    _this.column = ctrl.getColumnGroupChild();
    _this.pinned = ctrl.getPinned();
    return _this;
  }
  HeaderCellComp2.prototype.postConstruct = function() {
    var _this = this;
    var eGui = this.getGui();
    var setAttribute = function(name, value, element) {
      var actualElement = element ? element : eGui;
      if (value != null && value != "") {
        actualElement.setAttribute(name, value);
      } else {
        actualElement.removeAttribute(name);
      }
    };
    var compProxy = {
      setWidth: function(width) {
        return eGui.style.width = width;
      },
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      setColId: function(id) {
        return setAttribute("col-id", id);
      },
      setTitle: function(title) {
        return setAttribute("title", title);
      },
      setAriaDescription: function(label) {
        return setAriaDescription(eGui, label);
      },
      setAriaSort: function(sort) {
        return sort ? setAriaSort(eGui, sort) : removeAriaSort(eGui);
      },
      setUserCompDetails: function(compDetails) {
        return _this.setUserCompDetails(compDetails);
      },
      getUserCompInstance: function() {
        return _this.headerComp;
      }
    };
    this.ctrl.setComp(compProxy, this.getGui(), this.eResize, this.eHeaderCompWrapper);
    var selectAllGui = this.ctrl.getSelectAllGui();
    this.eResize.insertAdjacentElement("afterend", selectAllGui);
  };
  HeaderCellComp2.prototype.destroyHeaderComp = function() {
    if (this.headerComp) {
      this.eHeaderCompWrapper.removeChild(this.headerCompGui);
      this.headerComp = this.destroyBean(this.headerComp);
      this.headerCompGui = void 0;
    }
  };
  HeaderCellComp2.prototype.setUserCompDetails = function(compDetails) {
    var _this = this;
    this.headerCompVersion++;
    var versionCopy = this.headerCompVersion;
    compDetails.newAgStackInstance().then(function(comp) {
      return _this.afterCompCreated(versionCopy, comp);
    });
  };
  HeaderCellComp2.prototype.afterCompCreated = function(version, headerComp) {
    if (version != this.headerCompVersion || !this.isAlive()) {
      this.destroyBean(headerComp);
      return;
    }
    this.destroyHeaderComp();
    this.headerComp = headerComp;
    this.headerCompGui = headerComp.getGui();
    this.eHeaderCompWrapper.appendChild(this.headerCompGui);
    this.ctrl.setDragSource(this.getGui());
  };
  HeaderCellComp2.TEMPLATE = '<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>';
  __decorate$1v([
    RefSelector("eResize")
  ], HeaderCellComp2.prototype, "eResize", void 0);
  __decorate$1v([
    RefSelector("eHeaderCompWrapper")
  ], HeaderCellComp2.prototype, "eHeaderCompWrapper", void 0);
  __decorate$1v([
    PostConstruct
  ], HeaderCellComp2.prototype, "postConstruct", null);
  __decorate$1v([
    PreDestroy
  ], HeaderCellComp2.prototype, "destroyHeaderComp", null);
  return HeaderCellComp2;
}(AbstractHeaderCellComp);
var __extends$1B = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1u = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderGroupCellComp = function(_super) {
  __extends$1B(HeaderGroupCellComp2, _super);
  function HeaderGroupCellComp2(ctrl) {
    return _super.call(this, HeaderGroupCellComp2.TEMPLATE, ctrl) || this;
  }
  HeaderGroupCellComp2.prototype.postConstruct = function() {
    var _this = this;
    var eGui = this.getGui();
    var setAttribute = function(key, value) {
      return value != void 0 ? eGui.setAttribute(key, value) : eGui.removeAttribute(key);
    };
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      addOrRemoveResizableCssClass: function(cssClassName, on2) {
        return _this.eResize.classList.toggle(cssClassName, on2);
      },
      setWidth: function(width) {
        return eGui.style.width = width;
      },
      setColId: function(id) {
        return eGui.setAttribute("col-id", id);
      },
      setAriaExpanded: function(expanded) {
        return setAttribute("aria-expanded", expanded);
      },
      setTitle: function(title) {
        return setAttribute("title", title);
      },
      setUserCompDetails: function(details) {
        return _this.setUserCompDetails(details);
      }
    };
    this.ctrl.setComp(compProxy, eGui, this.eResize);
  };
  HeaderGroupCellComp2.prototype.setUserCompDetails = function(details) {
    var _this = this;
    details.newAgStackInstance().then(function(comp) {
      return _this.afterHeaderCompCreated(comp);
    });
  };
  HeaderGroupCellComp2.prototype.afterHeaderCompCreated = function(headerGroupComp) {
    var _this = this;
    var destroyFunc = function() {
      return _this.destroyBean(headerGroupComp);
    };
    if (!this.isAlive()) {
      destroyFunc();
      return;
    }
    this.getGui().appendChild(headerGroupComp.getGui());
    this.addDestroyFunc(destroyFunc);
    this.ctrl.setDragSource(headerGroupComp.getGui());
  };
  HeaderGroupCellComp2.TEMPLATE = '<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>';
  __decorate$1u([
    Autowired("userComponentFactory")
  ], HeaderGroupCellComp2.prototype, "userComponentFactory", void 0);
  __decorate$1u([
    RefSelector("eResize")
  ], HeaderGroupCellComp2.prototype, "eResize", void 0);
  __decorate$1u([
    PostConstruct
  ], HeaderGroupCellComp2.prototype, "postConstruct", null);
  return HeaderGroupCellComp2;
}(AbstractHeaderCellComp);
var __extends$1A = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1t = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderRowType;
(function(HeaderRowType2) {
  HeaderRowType2["COLUMN_GROUP"] = "group";
  HeaderRowType2["COLUMN"] = "column";
  HeaderRowType2["FLOATING_FILTER"] = "filter";
})(HeaderRowType || (HeaderRowType = {}));
var HeaderRowComp = function(_super) {
  __extends$1A(HeaderRowComp2, _super);
  function HeaderRowComp2(ctrl) {
    var _this = _super.call(this) || this;
    _this.headerComps = {};
    var extraClass = ctrl.getType() == HeaderRowType.COLUMN_GROUP ? "ag-header-row-column-group" : ctrl.getType() == HeaderRowType.FLOATING_FILTER ? "ag-header-row-column-filter" : "ag-header-row-column";
    _this.setTemplate('<div class="ag-header-row ' + extraClass + '" role="row"></div>');
    _this.ctrl = ctrl;
    return _this;
  }
  HeaderRowComp2.prototype.init = function() {
    var _this = this;
    var compProxy = {
      setTransform: function(transform) {
        return _this.getGui().style.transform = transform;
      },
      setHeight: function(height) {
        return _this.getGui().style.height = height;
      },
      setTop: function(top) {
        return _this.getGui().style.top = top;
      },
      setHeaderCtrls: function(ctrls) {
        return _this.setHeaderCtrls(ctrls);
      },
      setWidth: function(width) {
        return _this.getGui().style.width = width;
      },
      setAriaRowIndex: function(rowIndex) {
        return setAriaRowIndex(_this.getGui(), rowIndex);
      }
    };
    this.ctrl.setComp(compProxy);
  };
  HeaderRowComp2.prototype.destroyHeaderCtrls = function() {
    this.setHeaderCtrls([]);
  };
  HeaderRowComp2.prototype.setHeaderCtrls = function(ctrls) {
    var _this = this;
    if (!this.isAlive()) {
      return;
    }
    var oldComps = this.headerComps;
    this.headerComps = {};
    ctrls.forEach(function(ctrl) {
      var id = ctrl.getInstanceId();
      var comp = oldComps[id];
      delete oldComps[id];
      if (comp == null) {
        comp = _this.createHeaderComp(ctrl);
        _this.getGui().appendChild(comp.getGui());
      }
      _this.headerComps[id] = comp;
    });
    iterateObject(oldComps, function(id, comp) {
      _this.getGui().removeChild(comp.getGui());
      _this.destroyBean(comp);
    });
    var ensureDomOrder2 = this.gridOptionsWrapper.isEnsureDomOrder();
    if (ensureDomOrder2) {
      var comps = getAllValuesInObject(this.headerComps);
      comps.sort(function(a3, b2) {
        var leftA = a3.getCtrl().getColumnGroupChild().getLeft();
        var leftB = b2.getCtrl().getColumnGroupChild().getLeft();
        return leftA - leftB;
      });
      var elementsInOrder = comps.map(function(c2) {
        return c2.getGui();
      });
      setDomChildOrder(this.getGui(), elementsInOrder);
    }
  };
  HeaderRowComp2.prototype.createHeaderComp = function(headerCtrl) {
    var result;
    switch (this.ctrl.getType()) {
      case HeaderRowType.COLUMN_GROUP:
        result = new HeaderGroupCellComp(headerCtrl);
        break;
      case HeaderRowType.FLOATING_FILTER:
        result = new HeaderFilterCellComp(headerCtrl);
        break;
      default:
        result = new HeaderCellComp(headerCtrl);
        break;
    }
    this.createBean(result);
    result.setParentComponent(this);
    return result;
  };
  __decorate$1t([
    PostConstruct
  ], HeaderRowComp2.prototype, "init", null);
  __decorate$1t([
    PreDestroy
  ], HeaderRowComp2.prototype, "destroyHeaderCtrls", null);
  return HeaderRowComp2;
}(Component);
var __extends$1z = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1s = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var instanceIdSequence$1 = 0;
var AbstractHeaderCellCtrl = function(_super) {
  __extends$1z(AbstractHeaderCellCtrl2, _super);
  function AbstractHeaderCellCtrl2(columnGroupChild, parentRowCtrl) {
    var _this = _super.call(this) || this;
    _this.lastFocusEvent = null;
    _this.columnGroupChild = columnGroupChild;
    _this.parentRowCtrl = parentRowCtrl;
    _this.instanceId = columnGroupChild.getUniqueId() + "-" + instanceIdSequence$1++;
    return _this;
  }
  AbstractHeaderCellCtrl2.prototype.shouldStopEventPropagation = function(e2) {
    var _a2 = this.focusService.getFocusedHeader(), headerRowIndex = _a2.headerRowIndex, column = _a2.column;
    return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsWrapper, e2, headerRowIndex, column);
  };
  AbstractHeaderCellCtrl2.prototype.getWrapperHasFocus = function() {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var activeEl = eDocument.activeElement;
    return activeEl === this.eGui;
  };
  AbstractHeaderCellCtrl2.prototype.setGui = function(eGui) {
    this.eGui = eGui;
    this.addDomData();
  };
  AbstractHeaderCellCtrl2.prototype.handleKeyDown = function(e2) {
    var wrapperHasFocus = this.getWrapperHasFocus();
    switch (e2.key) {
      case KeyCode.PAGE_DOWN:
      case KeyCode.PAGE_UP:
      case KeyCode.PAGE_HOME:
      case KeyCode.PAGE_END:
        if (wrapperHasFocus) {
          e2.preventDefault();
        }
    }
  };
  AbstractHeaderCellCtrl2.prototype.addDomData = function() {
    var _this = this;
    var key = AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL;
    this.gridOptionsWrapper.setDomData(this.eGui, key, this);
    this.addDestroyFunc(function() {
      return _this.gridOptionsWrapper.setDomData(_this.eGui, key, null);
    });
  };
  AbstractHeaderCellCtrl2.prototype.getGui = function() {
    return this.eGui;
  };
  AbstractHeaderCellCtrl2.prototype.focus = function(event) {
    if (!this.eGui) {
      return false;
    }
    this.lastFocusEvent = event || null;
    this.eGui.focus();
    return true;
  };
  AbstractHeaderCellCtrl2.prototype.getRowIndex = function() {
    return this.parentRowCtrl.getRowIndex();
  };
  AbstractHeaderCellCtrl2.prototype.getParentRowCtrl = function() {
    return this.parentRowCtrl;
  };
  AbstractHeaderCellCtrl2.prototype.getPinned = function() {
    return this.parentRowCtrl.getPinned();
  };
  AbstractHeaderCellCtrl2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  AbstractHeaderCellCtrl2.prototype.getColumnGroupChild = function() {
    return this.columnGroupChild;
  };
  AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL = "headerCtrl";
  __decorate$1s([
    Autowired("focusService")
  ], AbstractHeaderCellCtrl2.prototype, "focusService", void 0);
  __decorate$1s([
    Autowired("beans")
  ], AbstractHeaderCellCtrl2.prototype, "beans", void 0);
  __decorate$1s([
    Autowired("userComponentFactory")
  ], AbstractHeaderCellCtrl2.prototype, "userComponentFactory", void 0);
  return AbstractHeaderCellCtrl2;
}(BeanStub);
var ClientSideRowModelSteps;
(function(ClientSideRowModelSteps2) {
  ClientSideRowModelSteps2["EVERYTHING"] = "group";
  ClientSideRowModelSteps2["FILTER"] = "filter";
  ClientSideRowModelSteps2["SORT"] = "sort";
  ClientSideRowModelSteps2["MAP"] = "map";
  ClientSideRowModelSteps2["AGGREGATE"] = "aggregate";
  ClientSideRowModelSteps2["FILTER_AGGREGATES"] = "filter_aggregates";
  ClientSideRowModelSteps2["PIVOT"] = "pivot";
  ClientSideRowModelSteps2["NOTHING"] = "nothing";
})(ClientSideRowModelSteps || (ClientSideRowModelSteps = {}));
var __decorate$1r = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
function unwrapUserComp(comp) {
  var compAsAny = comp;
  var isProxy = compAsAny != null && compAsAny.getFrameworkComponentInstance != null;
  return isProxy ? compAsAny.getFrameworkComponentInstance() : comp;
}
var GridApi = function() {
  function GridApi2() {
    this.detailGridInfoMap = {};
    this.destroyCalled = false;
  }
  GridApi2.prototype.registerOverlayWrapperComp = function(overlayWrapperComp) {
    this.overlayWrapperComp = overlayWrapperComp;
  };
  GridApi2.prototype.registerSideBarComp = function(sideBarComp) {
    this.sideBarComp = sideBarComp;
  };
  GridApi2.prototype.init = function() {
    var _this = this;
    switch (this.rowModel.getType()) {
      case Constants.ROW_MODEL_TYPE_CLIENT_SIDE:
        this.clientSideRowModel = this.rowModel;
        break;
      case Constants.ROW_MODEL_TYPE_INFINITE:
        this.infiniteRowModel = this.rowModel;
        break;
      case Constants.ROW_MODEL_TYPE_SERVER_SIDE:
        this.serverSideRowModel = this.rowModel;
        break;
    }
    this.ctrlsService.whenReady(function() {
      _this.gridBodyCtrl = _this.ctrlsService.getGridBodyCtrl();
    });
  };
  GridApi2.prototype.__getAlignedGridService = function() {
    return this.alignedGridsService;
  };
  GridApi2.prototype.__getContext = function() {
    return this.context;
  };
  GridApi2.prototype.addDetailGridInfo = function(id, gridInfo) {
    this.detailGridInfoMap[id] = gridInfo;
  };
  GridApi2.prototype.removeDetailGridInfo = function(id) {
    this.detailGridInfoMap[id] = void 0;
  };
  GridApi2.prototype.getDetailGridInfo = function(id) {
    return this.detailGridInfoMap[id];
  };
  GridApi2.prototype.forEachDetailGridInfo = function(callback) {
    var index = 0;
    iterateObject(this.detailGridInfoMap, function(id, gridInfo) {
      if (exists(gridInfo)) {
        callback(gridInfo, index);
        index++;
      }
    });
  };
  GridApi2.prototype.getDataAsCsv = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.CsvExportModule, "api.getDataAsCsv")) {
      return this.csvCreator.getDataAsCsv(params);
    }
  };
  GridApi2.prototype.exportDataAsCsv = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.CsvExportModule, "api.exportDataAsCSv")) {
      this.csvCreator.exportDataAsCsv(params);
    }
  };
  GridApi2.prototype.getExcelExportMode = function(params) {
    var baseParams = this.gridOptionsWrapper.getDefaultExportParams("excel");
    var mergedParams = Object.assign({ exportMode: "xlsx" }, baseParams, params);
    return mergedParams.exportMode;
  };
  GridApi2.prototype.getDataAsExcel = function(params) {
    if (!ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule, "api.getDataAsExcel")) {
      return;
    }
    var exportMode = this.getExcelExportMode(params);
    if (this.excelCreator.getFactoryMode(exportMode) === ExcelFactoryMode.MULTI_SHEET) {
      console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");
      return;
    }
    return this.excelCreator.getDataAsExcel(params);
  };
  GridApi2.prototype.exportDataAsExcel = function(params) {
    if (!ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule, "api.exportDataAsExcel")) {
      return;
    }
    var exportMode = this.getExcelExportMode(params);
    if (this.excelCreator.getFactoryMode(exportMode) === ExcelFactoryMode.MULTI_SHEET) {
      console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");
      return;
    }
    this.excelCreator.exportDataAsExcel(params);
  };
  GridApi2.prototype.getSheetDataForExcel = function(params) {
    if (!ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule, "api.getSheetDataForExcel")) {
      return;
    }
    var exportMode = this.getExcelExportMode(params);
    this.excelCreator.setFactoryMode(ExcelFactoryMode.MULTI_SHEET, exportMode);
    return this.excelCreator.getSheetDataForExcel(params);
  };
  GridApi2.prototype.getMultipleSheetsAsExcel = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule, "api.getMultipleSheetsAsExcel")) {
      return this.excelCreator.getMultipleSheetsAsExcel(params);
    }
  };
  GridApi2.prototype.exportMultipleSheetsAsExcel = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule, "api.exportMultipleSheetsAsExcel")) {
      return this.excelCreator.exportMultipleSheetsAsExcel(params);
    }
  };
  GridApi2.prototype.setEnterpriseDatasource = function(datasource) {
    console.warn("AG Grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()");
    this.setServerSideDatasource(datasource);
  };
  GridApi2.prototype.setGridAriaProperty = function(property, value) {
    if (!property) {
      return;
    }
    var eGrid = this.ctrlsService.getGridBodyCtrl().getGui();
    var ariaProperty = "aria-" + property;
    if (value === null) {
      eGrid.removeAttribute(ariaProperty);
    } else {
      eGrid.setAttribute(ariaProperty, value);
    }
  };
  GridApi2.prototype.setServerSideDatasource = function(datasource) {
    if (this.serverSideRowModel) {
      this.serverSideRowModel.setDatasource(datasource);
    } else {
      console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_SERVER_SIDE + "'");
    }
  };
  GridApi2.prototype.setCacheBlockSize = function(blockSize) {
    if (!this.serverSideRowModel) {
      console.warn("AG Grid: you can only set cacheBlockSize with gridOptions.rowModelType '" + Constants.ROW_MODEL_TYPE_SERVER_SIDE + "'");
      return;
    }
    this.gridOptionsWrapper.setProperty("cacheBlockSize", blockSize);
    this.serverSideRowModel.resetRootStore();
  };
  GridApi2.prototype.setDatasource = function(datasource) {
    if (this.gridOptionsWrapper.isRowModelInfinite()) {
      this.rowModel.setDatasource(datasource);
    } else {
      console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_INFINITE + "'");
    }
  };
  GridApi2.prototype.setViewportDatasource = function(viewportDatasource) {
    if (this.gridOptionsWrapper.isRowModelViewport()) {
      this.rowModel.setViewportDatasource(viewportDatasource);
    } else {
      console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_VIEWPORT + "'");
    }
  };
  GridApi2.prototype.setRowData = function(rowData) {
    var missingImmutableService = this.immutableService == null;
    if (missingImmutableService) {
      console.warn("AG Grid: you can only set rowData when using the Client Side Row Model");
      return;
    }
    if (this.immutableService.isActive()) {
      this.immutableService.setRowData(rowData);
    } else {
      this.selectionService.reset();
      this.clientSideRowModel.setRowData(rowData);
    }
  };
  GridApi2.prototype.setFloatingTopRowData = function(rows) {
    console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()");
    this.setPinnedTopRowData(rows);
  };
  GridApi2.prototype.setFloatingBottomRowData = function(rows) {
    console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()");
    this.setPinnedBottomRowData(rows);
  };
  GridApi2.prototype.getFloatingTopRowCount = function() {
    console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()");
    return this.getPinnedTopRowCount();
  };
  GridApi2.prototype.getFloatingBottomRowCount = function() {
    console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()");
    return this.getPinnedBottomRowCount();
  };
  GridApi2.prototype.getFloatingTopRow = function(index) {
    console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()");
    return this.getPinnedTopRow(index);
  };
  GridApi2.prototype.getFloatingBottomRow = function(index) {
    console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()");
    return this.getPinnedBottomRow(index);
  };
  GridApi2.prototype.setPinnedTopRowData = function(rows) {
    this.pinnedRowModel.setPinnedTopRowData(rows);
  };
  GridApi2.prototype.setPinnedBottomRowData = function(rows) {
    this.pinnedRowModel.setPinnedBottomRowData(rows);
  };
  GridApi2.prototype.getPinnedTopRowCount = function() {
    return this.pinnedRowModel.getPinnedTopRowCount();
  };
  GridApi2.prototype.getPinnedBottomRowCount = function() {
    return this.pinnedRowModel.getPinnedBottomRowCount();
  };
  GridApi2.prototype.getPinnedTopRow = function(index) {
    return this.pinnedRowModel.getPinnedTopRow(index);
  };
  GridApi2.prototype.getPinnedBottomRow = function(index) {
    return this.pinnedRowModel.getPinnedBottomRow(index);
  };
  GridApi2.prototype.setColumnDefs = function(colDefs, source) {
    if (source === void 0) {
      source = "api";
    }
    this.columnModel.setColumnDefs(colDefs, source);
  };
  GridApi2.prototype.setAutoGroupColumnDef = function(colDef, source) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_AUTO_GROUP_COLUMN_DEF, colDef, true);
  };
  GridApi2.prototype.setDefaultColDef = function(colDef, source) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DEFAULT_COL_DEF, colDef, true);
  };
  GridApi2.prototype.expireValueCache = function() {
    this.valueCache.expire();
  };
  GridApi2.prototype.getVerticalPixelRange = function() {
    return this.gridBodyCtrl.getScrollFeature().getVScrollPosition();
  };
  GridApi2.prototype.getHorizontalPixelRange = function() {
    return this.gridBodyCtrl.getScrollFeature().getHScrollPosition();
  };
  GridApi2.prototype.setAlwaysShowHorizontalScroll = function(show) {
    this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll", show);
  };
  GridApi2.prototype.setAlwaysShowVerticalScroll = function(show) {
    this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll", show);
  };
  GridApi2.prototype.refreshToolPanel = function() {
    if (!this.sideBarComp) {
      return;
    }
    this.sideBarComp.refresh();
  };
  GridApi2.prototype.refreshCells = function(params) {
    if (params === void 0) {
      params = {};
    }
    if (Array.isArray(params)) {
      console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation.");
      return;
    }
    this.rowRenderer.refreshCells(params);
  };
  GridApi2.prototype.flashCells = function(params) {
    if (params === void 0) {
      params = {};
    }
    this.rowRenderer.flashCells(params);
  };
  GridApi2.prototype.redrawRows = function(params) {
    if (params === void 0) {
      params = {};
    }
    var rowNodes = params ? params.rowNodes : void 0;
    this.rowRenderer.redrawRows(rowNodes);
  };
  GridApi2.prototype.setFunctionsReadOnly = function(readOnly) {
    this.gridOptionsWrapper.setProperty("functionsReadOnly", readOnly);
  };
  GridApi2.prototype.refreshHeader = function() {
    this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(c2) {
      return c2.refresh();
    });
  };
  GridApi2.prototype.isAnyFilterPresent = function() {
    return this.filterManager.isAnyFilterPresent();
  };
  GridApi2.prototype.isColumnFilterPresent = function() {
    return this.filterManager.isColumnFilterPresent() || this.filterManager.isAggregateFilterPresent();
  };
  GridApi2.prototype.isQuickFilterPresent = function() {
    return this.filterManager.isQuickFilterPresent();
  };
  GridApi2.prototype.getModel = function() {
    return this.rowModel;
  };
  GridApi2.prototype.setRowNodeExpanded = function(rowNode, expanded) {
    if (rowNode) {
      rowNode.setExpanded(expanded);
    }
  };
  GridApi2.prototype.onGroupExpandedOrCollapsed = function(deprecated_refreshFromIndex) {
    if (missing(this.clientSideRowModel)) {
      console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model");
    }
    if (exists(deprecated_refreshFromIndex)) {
      console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows");
    }
    this.clientSideRowModel.refreshModel({ step: ClientSideRowModelSteps.MAP });
  };
  GridApi2.prototype.refreshInMemoryRowModel = function(step) {
    console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()");
    this.refreshClientSideRowModel(step);
  };
  GridApi2.prototype.refreshClientSideRowModel = function(step) {
    if (missing(this.clientSideRowModel)) {
      console.warn("cannot call refreshClientSideRowModel unless using normal row model");
    }
    var paramsStep = ClientSideRowModelSteps.EVERYTHING;
    var stepsMapped = {
      group: ClientSideRowModelSteps.EVERYTHING,
      filter: ClientSideRowModelSteps.FILTER,
      map: ClientSideRowModelSteps.MAP,
      aggregate: ClientSideRowModelSteps.AGGREGATE,
      sort: ClientSideRowModelSteps.SORT,
      pivot: ClientSideRowModelSteps.PIVOT
    };
    if (exists(step)) {
      paramsStep = stepsMapped[step];
    }
    if (missing(paramsStep)) {
      console.error("AG Grid: invalid step " + step + ", available steps are " + Object.keys(stepsMapped).join(", "));
      return;
    }
    var animate = !this.gridOptionsWrapper.isSuppressAnimationFrame();
    var modelParams = {
      step: paramsStep,
      keepRenderedRows: true,
      keepEditingRows: true,
      animate
    };
    this.clientSideRowModel.refreshModel(modelParams);
  };
  GridApi2.prototype.isAnimationFrameQueueEmpty = function() {
    return this.animationFrameService.isQueueEmpty();
  };
  GridApi2.prototype.flushAllAnimationFrames = function() {
    this.animationFrameService.flushAllFrames();
  };
  GridApi2.prototype.getRowNode = function(id) {
    return this.rowModel.getRowNode(id);
  };
  GridApi2.prototype.getSizesForCurrentTheme = function() {
    return {
      rowHeight: this.gridOptionsWrapper.getRowHeightAsNumber(),
      headerHeight: this.gridOptionsWrapper.getHeaderHeight()
    };
  };
  GridApi2.prototype.expandAll = function() {
    if (this.clientSideRowModel) {
      this.clientSideRowModel.expandOrCollapseAll(true);
    } else if (this.serverSideRowModel) {
      this.serverSideRowModel.expandAll(true);
    } else {
      console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model");
    }
  };
  GridApi2.prototype.collapseAll = function() {
    if (this.clientSideRowModel) {
      this.clientSideRowModel.expandOrCollapseAll(false);
    } else if (this.serverSideRowModel) {
      this.serverSideRowModel.expandAll(false);
    } else {
      console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model");
    }
  };
  GridApi2.prototype.getToolPanelInstance = function(id) {
    if (!this.sideBarComp) {
      console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
      return;
    }
    var comp = this.sideBarComp.getToolPanelInstance(id);
    return unwrapUserComp(comp);
  };
  GridApi2.prototype.addVirtualRowListener = function(eventName, rowIndex, callback) {
    if (typeof eventName !== "string") {
      console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener.");
    }
    this.addRenderedRowListener(eventName, rowIndex, callback);
  };
  GridApi2.prototype.addRenderedRowListener = function(eventName, rowIndex, callback) {
    if (eventName === "virtualRowSelected") {
      console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node.");
    }
    this.rowRenderer.addRenderedRowListener(eventName, rowIndex, callback);
  };
  GridApi2.prototype.setQuickFilter = function(newFilter) {
    this.filterManager.setQuickFilter(newFilter);
  };
  GridApi2.prototype.selectIndex = function(index, tryMulti, suppressEvents) {
    console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead");
    if (suppressEvents) {
      console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
    }
    this.selectionService.selectIndex(index, tryMulti);
  };
  GridApi2.prototype.deselectIndex = function(index, suppressEvents) {
    if (suppressEvents === void 0) {
      suppressEvents = false;
    }
    console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead");
    if (suppressEvents) {
      console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
    }
    this.selectionService.deselectIndex(index);
  };
  GridApi2.prototype.selectNode = function(node, tryMulti, suppressEvents) {
    if (tryMulti === void 0) {
      tryMulti = false;
    }
    if (suppressEvents === void 0) {
      suppressEvents = false;
    }
    console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead");
    if (suppressEvents) {
      console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
    }
    node.setSelectedParams({ newValue: true, clearSelection: !tryMulti });
  };
  GridApi2.prototype.deselectNode = function(node, suppressEvents) {
    if (suppressEvents === void 0) {
      suppressEvents = false;
    }
    console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead");
    if (suppressEvents) {
      console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
    }
    node.setSelectedParams({ newValue: false });
  };
  GridApi2.prototype.selectAll = function() {
    this.selectionService.selectAllRowNodes();
  };
  GridApi2.prototype.deselectAll = function() {
    this.selectionService.deselectAllRowNodes();
  };
  GridApi2.prototype.selectAllFiltered = function() {
    this.selectionService.selectAllRowNodes(true);
  };
  GridApi2.prototype.deselectAllFiltered = function() {
    this.selectionService.deselectAllRowNodes(true);
  };
  GridApi2.prototype.recomputeAggregates = function() {
    if (missing(this.clientSideRowModel)) {
      console.warn("cannot call recomputeAggregates unless using normal row model");
    }
    console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead");
    this.clientSideRowModel.refreshModel({ step: ClientSideRowModelSteps.AGGREGATE });
  };
  GridApi2.prototype.sizeColumnsToFit = function(params) {
    this.gridBodyCtrl.sizeColumnsToFit(params);
  };
  GridApi2.prototype.showLoadingOverlay = function() {
    this.overlayWrapperComp.showLoadingOverlay();
  };
  GridApi2.prototype.showNoRowsOverlay = function() {
    this.overlayWrapperComp.showNoRowsOverlay();
  };
  GridApi2.prototype.hideOverlay = function() {
    this.overlayWrapperComp.hideOverlay();
  };
  GridApi2.prototype.isNodeSelected = function(node) {
    console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead");
    return node.isSelected();
  };
  GridApi2.prototype.getSelectedNodesById = function() {
    console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead");
    return null;
  };
  GridApi2.prototype.getSelectedNodes = function() {
    return this.selectionService.getSelectedNodes();
  };
  GridApi2.prototype.getSelectedRows = function() {
    return this.selectionService.getSelectedRows();
  };
  GridApi2.prototype.getBestCostNodeSelection = function() {
    return this.selectionService.getBestCostNodeSelection();
  };
  GridApi2.prototype.getRenderedNodes = function() {
    return this.rowRenderer.getRenderedNodes();
  };
  GridApi2.prototype.ensureColIndexVisible = function(index) {
    console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.");
  };
  GridApi2.prototype.ensureColumnVisible = function(key, position) {
    if (position === void 0) {
      position = "auto";
    }
    this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(key, position);
  };
  GridApi2.prototype.ensureIndexVisible = function(index, position) {
    this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(index, position);
  };
  GridApi2.prototype.ensureNodeVisible = function(nodeSelector, position) {
    if (position === void 0) {
      position = null;
    }
    this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(nodeSelector, position);
  };
  GridApi2.prototype.forEachLeafNode = function(callback) {
    if (missing(this.clientSideRowModel)) {
      console.warn("cannot call forEachNode unless using normal row model");
    }
    this.clientSideRowModel.forEachLeafNode(callback);
  };
  GridApi2.prototype.forEachNode = function(callback) {
    this.rowModel.forEachNode(callback);
  };
  GridApi2.prototype.forEachNodeAfterFilter = function(callback) {
    if (missing(this.clientSideRowModel)) {
      console.warn("cannot call forEachNodeAfterFilter unless using normal row model");
    }
    this.clientSideRowModel.forEachNodeAfterFilter(callback);
  };
  GridApi2.prototype.forEachNodeAfterFilterAndSort = function(callback) {
    if (missing(this.clientSideRowModel)) {
      console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model");
    }
    this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback);
  };
  GridApi2.prototype.getFilterInstance = function(key, callback) {
    var res = this.getFilterInstanceImpl(key, function(instance) {
      if (!callback) {
        return;
      }
      var unwrapped2 = unwrapUserComp(instance);
      callback(unwrapped2);
    });
    var unwrapped = unwrapUserComp(res);
    return unwrapped;
  };
  GridApi2.prototype.getFilterInstanceImpl = function(key, callback) {
    var column = this.columnModel.getPrimaryColumn(key);
    if (!column) {
      return void 0;
    }
    var filterPromise = this.filterManager.getFilterComponent(column, "NO_UI");
    var currentValue = filterPromise && filterPromise.resolveNow(null, function(filterComp) {
      return filterComp;
    });
    if (currentValue) {
      setTimeout(callback, 0, currentValue);
    } else if (filterPromise) {
      filterPromise.then(function(comp) {
        callback(comp);
      });
    }
    return currentValue;
  };
  GridApi2.prototype.destroyFilter = function(key) {
    var column = this.columnModel.getPrimaryColumn(key);
    if (column) {
      return this.filterManager.destroyFilter(column, "filterDestroyed");
    }
  };
  GridApi2.prototype.getStatusPanel = function(key) {
    if (!this.statusBarService) {
      return;
    }
    var comp = this.statusBarService.getStatusPanel(key);
    return unwrapUserComp(comp);
  };
  GridApi2.prototype.getColumnDef = function(key) {
    var column = this.columnModel.getPrimaryColumn(key);
    if (column) {
      return column.getColDef();
    }
    return null;
  };
  GridApi2.prototype.getColumnDefs = function() {
    return this.columnModel.getColumnDefs();
  };
  GridApi2.prototype.onFilterChanged = function() {
    this.filterManager.onFilterChanged();
  };
  GridApi2.prototype.onSortChanged = function() {
    this.sortController.onSortChanged("api");
  };
  GridApi2.prototype.setFilterModel = function(model) {
    this.filterManager.setFilterModel(model);
  };
  GridApi2.prototype.getFilterModel = function() {
    return this.filterManager.getFilterModel();
  };
  GridApi2.prototype.getFocusedCell = function() {
    return this.focusService.getFocusedCell();
  };
  GridApi2.prototype.clearFocusedCell = function() {
    return this.focusService.clearFocusedCell();
  };
  GridApi2.prototype.setFocusedCell = function(rowIndex, colKey, rowPinned) {
    this.focusService.setFocusedCell({ rowIndex, column: colKey, rowPinned, forceBrowserFocus: true });
  };
  GridApi2.prototype.setSuppressRowDrag = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG, value);
  };
  GridApi2.prototype.setSuppressMoveWhenRowDragging = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG, value);
  };
  GridApi2.prototype.setSuppressRowClickSelection = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_CLICK_SELECTION, value);
  };
  GridApi2.prototype.addRowDropZone = function(params) {
    this.gridBodyCtrl.getRowDragFeature().addRowDropZone(params);
  };
  GridApi2.prototype.removeRowDropZone = function(params) {
    var activeDropTarget = this.dragAndDropService.findExternalZone(params);
    if (activeDropTarget) {
      this.dragAndDropService.removeDropTarget(activeDropTarget);
    }
  };
  GridApi2.prototype.getRowDropZoneParams = function(events) {
    return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(events);
  };
  GridApi2.prototype.setHeaderHeight = function(headerHeight) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_HEADER_HEIGHT, headerHeight);
  };
  GridApi2.prototype.setDomLayout = function(domLayout) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOM_LAYOUT, domLayout);
  };
  GridApi2.prototype.setEnableCellTextSelection = function(selectable) {
    this.gridBodyCtrl.setCellTextSelection(selectable);
  };
  GridApi2.prototype.setFillHandleDirection = function(direction) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FILL_HANDLE_DIRECTION, direction);
  };
  GridApi2.prototype.setGroupHeaderHeight = function(headerHeight) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, headerHeight);
  };
  GridApi2.prototype.setFloatingFiltersHeight = function(headerHeight) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, headerHeight);
  };
  GridApi2.prototype.setPivotHeaderHeight = function(headerHeight) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, headerHeight);
  };
  GridApi2.prototype.setPivotGroupHeaderHeight = function(headerHeight) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, headerHeight);
  };
  GridApi2.prototype.setIsExternalFilterPresent = function(isExternalFilterPresentFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_EXTERNAL_FILTER_PRESENT, isExternalFilterPresentFunc);
  };
  GridApi2.prototype.setDoesExternalFilterPass = function(doesExternalFilterPassFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOES_EXTERNAL_FILTER_PASS, doesExternalFilterPassFunc);
  };
  GridApi2.prototype.setNavigateToNextCell = function(navigateToNextCellFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_CELL, navigateToNextCellFunc);
  };
  GridApi2.prototype.setTabToNextCell = function(tabToNextCellFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_CELL, tabToNextCellFunc);
  };
  GridApi2.prototype.setTabToNextHeader = function(tabToNextHeaderFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_HEADER, tabToNextHeaderFunc);
  };
  GridApi2.prototype.setNavigateToNextHeader = function(navigateToNextHeaderFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_HEADER, navigateToNextHeaderFunc);
  };
  GridApi2.prototype.setGroupRowAggNodes = function(groupRowAggNodesFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_ROW_AGG_NODES, groupRowAggNodesFunc);
  };
  GridApi2.prototype.setGetGroupRowAgg = function(getGroupRowAggFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_GROUP_ROW_AGG, getGroupRowAggFunc);
  };
  GridApi2.prototype.setGetBusinessKeyForNode = function(getBusinessKeyForNodeFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_BUSINESS_KEY_FOR_NODE, getBusinessKeyForNodeFunc);
  };
  GridApi2.prototype.setGetChildCount = function(getChildCountFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHILD_COUNT, getChildCountFunc);
  };
  GridApi2.prototype.setProcessRowPostCreate = function(processRowPostCreateFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_ROW_POST_CREATE, processRowPostCreateFunc);
  };
  GridApi2.prototype.setGetRowNodeId = function(getRowNodeIdFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_NODE_ID, getRowNodeIdFunc);
  };
  GridApi2.prototype.setGetRowId = function(getRowIdFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_ID, getRowIdFunc);
  };
  GridApi2.prototype.setGetRowClass = function(rowClassFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_CLASS, rowClassFunc);
  };
  GridApi2.prototype.setIsFullWidthCell = function(isFullWidthCellFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_FULL_WIDTH_CELL, isFullWidthCellFunc);
  };
  GridApi2.prototype.setIsFullWidthRow = function(isFullWidthRowFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_FULL_WIDTH_ROW, isFullWidthRowFunc);
  };
  GridApi2.prototype.setIsRowSelectable = function(isRowSelectableFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_SELECTABLE, isRowSelectableFunc);
  };
  GridApi2.prototype.setIsRowMaster = function(isRowMasterFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_MASTER, isRowMasterFunc);
  };
  GridApi2.prototype.setPostSort = function(postSortFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_SORT, postSortFunc);
  };
  GridApi2.prototype.setPostSortRows = function(postSortRowsFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_SORT_ROWS, postSortRowsFunc);
  };
  GridApi2.prototype.setGetDocument = function(getDocumentFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_DOCUMENT, getDocumentFunc);
  };
  GridApi2.prototype.setGetContextMenuItems = function(getContextMenuItemsFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CONTEXT_MENU_ITEMS, getContextMenuItemsFunc);
  };
  GridApi2.prototype.setGetMainMenuItems = function(getMainMenuItemsFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_MAIN_MENU_ITEMS, getMainMenuItemsFunc);
  };
  GridApi2.prototype.setProcessCellForClipboard = function(processCellForClipboardFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FOR_CLIPBOARD, processCellForClipboardFunc);
  };
  GridApi2.prototype.setSendToClipboard = function(sendToClipboardFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SEND_TO_CLIPBOARD, sendToClipboardFunc);
  };
  GridApi2.prototype.setProcessCellFromClipboard = function(processCellFromClipboardFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FROM_CLIPBOARD, processCellFromClipboardFunc);
  };
  GridApi2.prototype.setProcessSecondaryColDef = function(processSecondaryColDefFunc) {
    console.warn("AG Grid: since version 28.0.x setProcessSecondaryColDef has been renamed, please use setProcessPivotResultColDef instead");
    this.setProcessPivotResultColDef(processSecondaryColDefFunc);
  };
  GridApi2.prototype.setProcessSecondaryColGroupDef = function(processSecondaryColGroupDefFunc) {
    console.warn("AG Grid: since version 28.0.x setProcessSecondaryColGroupDef has been renamed, please use setProcessPivotResultColGroupDef instead");
    this.setProcessPivotResultColGroupDef(processSecondaryColGroupDefFunc);
  };
  GridApi2.prototype.setProcessPivotResultColDef = function(processPivotResultColDefFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_PIVOT_RESULT_COL_DEF, processPivotResultColDefFunc);
  };
  GridApi2.prototype.setProcessPivotResultColGroupDef = function(processPivotResultColGroupDefFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_PIVOT_RESULT_COL_GROUP_DEF, processPivotResultColGroupDefFunc);
  };
  GridApi2.prototype.setPostProcessPopup = function(postProcessPopupFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_PROCESS_POPUP, postProcessPopupFunc);
  };
  GridApi2.prototype.setDefaultGroupOrderComparator = function(defaultGroupOrderComparatorFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DEFAULT_GROUP_ORDER_COMPARATOR, defaultGroupOrderComparatorFunc);
  };
  GridApi2.prototype.setInitialGroupOrderComparator = function(initialGroupOrderComparatorFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_INITIAL_GROUP_ORDER_COMPARATOR, initialGroupOrderComparatorFunc);
  };
  GridApi2.prototype.setGetChartToolbarItems = function(getChartToolbarItemsFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHART_TOOLBAR_ITEMS, getChartToolbarItemsFunc);
  };
  GridApi2.prototype.setPaginationNumberFormatter = function(paginationNumberFormatterFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PAGINATION_NUMBER_FORMATTER, paginationNumberFormatterFunc);
  };
  GridApi2.prototype.setGetServerSideStoreParams = function(getServerSideStoreParamsFunc) {
    this.setGetServerSideGroupLevelParams(getServerSideStoreParamsFunc);
  };
  GridApi2.prototype.setGetServerSideGroupLevelParams = function(getServerSideGroupLevelParamsFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_GROUP_PARAMS, getServerSideGroupLevelParamsFunc);
  };
  GridApi2.prototype.setIsServerSideGroupOpenByDefault = function(isServerSideGroupOpenByDefaultFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT, isServerSideGroupOpenByDefaultFunc);
  };
  GridApi2.prototype.setIsApplyServerSideTransaction = function(isApplyServerSideTransactionFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION, isApplyServerSideTransactionFunc);
  };
  GridApi2.prototype.setIsServerSideGroup = function(isServerSideGroupFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUP, isServerSideGroupFunc);
  };
  GridApi2.prototype.setGetServerSideGroupKey = function(getServerSideGroupKeyFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_GROUP_KEY, getServerSideGroupKeyFunc);
  };
  GridApi2.prototype.setGetRowStyle = function(rowStyleFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_STYLE, rowStyleFunc);
  };
  GridApi2.prototype.setGetRowHeight = function(rowHeightFunc) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_HEIGHT, rowHeightFunc);
  };
  GridApi2.prototype.isSideBarVisible = function() {
    return this.sideBarComp ? this.sideBarComp.isDisplayed() : false;
  };
  GridApi2.prototype.setSideBarVisible = function(show) {
    if (!this.sideBarComp) {
      if (show) {
        console.warn("AG Grid: sideBar is not loaded");
      }
      return;
    }
    this.sideBarComp.setDisplayed(show);
  };
  GridApi2.prototype.setSideBarPosition = function(position) {
    if (!this.sideBarComp) {
      console.warn("AG Grid: sideBar is not loaded");
      return;
    }
    this.sideBarComp.setSideBarPosition(position);
  };
  GridApi2.prototype.openToolPanel = function(key) {
    if (!this.sideBarComp) {
      console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
      return;
    }
    this.sideBarComp.openToolPanel(key);
  };
  GridApi2.prototype.closeToolPanel = function() {
    if (!this.sideBarComp) {
      console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
      return;
    }
    this.sideBarComp.close();
  };
  GridApi2.prototype.getOpenedToolPanel = function() {
    return this.sideBarComp ? this.sideBarComp.openedItem() : null;
  };
  GridApi2.prototype.getSideBar = function() {
    return this.gridOptionsWrapper.getSideBar();
  };
  GridApi2.prototype.setSideBar = function(def2) {
    this.gridOptionsWrapper.setProperty("sideBar", SideBarDefParser.parse(def2));
  };
  GridApi2.prototype.setSuppressClipboardPaste = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE, value);
  };
  GridApi2.prototype.isToolPanelShowing = function() {
    return this.sideBarComp.isToolPanelShowing();
  };
  GridApi2.prototype.doLayout = function() {
    var message2 = "AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically";
    doOnce(function() {
      return console.warn(message2);
    }, "doLayoutDeprecated");
  };
  GridApi2.prototype.resetRowHeights = function() {
    if (exists(this.clientSideRowModel)) {
      if (this.columnModel.isAutoRowHeightActive()) {
        console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");
        return;
      }
      this.clientSideRowModel.resetRowHeights();
    }
  };
  GridApi2.prototype.setGroupRemoveSingleChildren = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN, value);
  };
  GridApi2.prototype.setGroupRemoveLowestSingleChildren = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN, value);
  };
  GridApi2.prototype.setGroupDisplayType = function(value) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_DISPLAY_TYPE, value);
  };
  GridApi2.prototype.onRowHeightChanged = function() {
    if (this.clientSideRowModel) {
      this.clientSideRowModel.onRowHeightChanged();
    } else if (this.serverSideRowModel) {
      this.serverSideRowModel.onRowHeightChanged();
    }
  };
  GridApi2.prototype.getValue = function(colKey, rowNode) {
    var column = this.columnModel.getPrimaryColumn(colKey);
    if (missing(column)) {
      column = this.columnModel.getGridColumn(colKey);
    }
    if (missing(column)) {
      return null;
    }
    return this.valueService.getValue(column, rowNode);
  };
  GridApi2.prototype.addEventListener = function(eventType, listener) {
    var async = this.gridOptionsWrapper.useAsyncEvents();
    this.eventService.addEventListener(eventType, listener, async);
  };
  GridApi2.prototype.addGlobalListener = function(listener) {
    var async = this.gridOptionsWrapper.useAsyncEvents();
    this.eventService.addGlobalListener(listener, async);
  };
  GridApi2.prototype.removeEventListener = function(eventType, listener) {
    var async = this.gridOptionsWrapper.useAsyncEvents();
    this.eventService.removeEventListener(eventType, listener, async);
  };
  GridApi2.prototype.removeGlobalListener = function(listener) {
    var async = this.gridOptionsWrapper.useAsyncEvents();
    this.eventService.removeGlobalListener(listener, async);
  };
  GridApi2.prototype.dispatchEvent = function(event) {
    this.eventService.dispatchEvent(event);
  };
  GridApi2.prototype.destroy = function() {
    if (this.destroyCalled) {
      return;
    }
    this.destroyCalled = true;
    var gridCtrl = this.ctrlsService.getGridCtrl();
    if (gridCtrl) {
      gridCtrl.destroyGridUi();
    }
    this.context.destroy();
  };
  GridApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid = function() {
    setTimeout(removeAllReferences.bind(window, this, "Grid API"), 100);
  };
  GridApi2.prototype.warnIfDestroyed = function(methodName) {
    if (this.destroyCalled) {
      console.warn("AG Grid: Grid API method " + methodName + " was called on a grid that was destroyed.");
    }
    return this.destroyCalled;
  };
  GridApi2.prototype.resetQuickFilter = function() {
    if (this.warnIfDestroyed("resetQuickFilter")) {
      return;
    }
    this.rowModel.forEachNode(function(node) {
      return node.quickFilterAggregateText = null;
    });
  };
  GridApi2.prototype.getRangeSelections = function() {
    console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation.");
    return null;
  };
  GridApi2.prototype.getCellRanges = function() {
    if (this.rangeService) {
      return this.rangeService.getCellRanges();
    }
    console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
    return null;
  };
  GridApi2.prototype.camelCaseToHumanReadable = function(camelCase) {
    return camelCaseToHumanText(camelCase);
  };
  GridApi2.prototype.addRangeSelection = function(deprecatedNoLongerUsed) {
    console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()");
  };
  GridApi2.prototype.addCellRange = function(params) {
    if (!this.rangeService) {
      console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
    }
    this.rangeService.addCellRange(params);
  };
  GridApi2.prototype.clearRangeSelection = function() {
    if (!this.rangeService) {
      console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
    }
    this.rangeService.removeAllCellRanges();
  };
  GridApi2.prototype.undoCellEditing = function() {
    this.undoRedoService.undo();
  };
  GridApi2.prototype.redoCellEditing = function() {
    this.undoRedoService.redo();
  };
  GridApi2.prototype.getCurrentUndoSize = function() {
    return this.undoRedoService.getCurrentUndoStackSize();
  };
  GridApi2.prototype.getCurrentRedoSize = function() {
    return this.undoRedoService.getCurrentRedoStackSize();
  };
  GridApi2.prototype.getChartModels = function() {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.getChartModels") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.getChartModels")) {
      return this.chartService.getChartModels();
    }
  };
  GridApi2.prototype.getChartRef = function(chartId) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.getChartRef") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.getChartRef")) {
      return this.chartService.getChartRef(chartId);
    }
  };
  GridApi2.prototype.getChartImageDataURL = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.getChartImageDataURL") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.getChartImageDataURL")) {
      return this.chartService.getChartImageDataURL(params);
    }
  };
  GridApi2.prototype.createRangeChart = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.createRangeChart") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.createRangeChart")) {
      return this.chartService.createRangeChart(params);
    }
  };
  GridApi2.prototype.createCrossFilterChart = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.createCrossFilterChart") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.createCrossFilterChart")) {
      return this.chartService.createCrossFilterChart(params);
    }
  };
  GridApi2.prototype.restoreChart = function(chartModel, chartContainer) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.restoreChart") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.restoreChart")) {
      return this.chartService.restoreChart(chartModel, chartContainer);
    }
  };
  GridApi2.prototype.createPivotChart = function(params) {
    if (ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule, "api.createPivotChart") && ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule, "api.createPivotChart")) {
      return this.chartService.createPivotChart(params);
    }
  };
  GridApi2.prototype.copySelectedRowsToClipboard = function(params) {
    if (!this.clipboardService) {
      console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
    }
    this.clipboardService.copySelectedRowsToClipboard(params);
  };
  GridApi2.prototype.copySelectedRangeToClipboard = function(params) {
    if (!this.clipboardService) {
      console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
    }
    this.clipboardService.copySelectedRangeToClipboard(params);
  };
  GridApi2.prototype.copySelectedRangeDown = function() {
    if (!this.clipboardService) {
      console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
    }
    this.clipboardService.copyRangeDown();
  };
  GridApi2.prototype.showColumnMenuAfterButtonClick = function(colKey, buttonElement) {
    var column = this.columnModel.getGridColumn(colKey);
    this.menuFactory.showMenuAfterButtonClick(column, buttonElement, "columnMenu");
  };
  GridApi2.prototype.showColumnMenuAfterMouseClick = function(colKey, mouseEvent) {
    var column = this.columnModel.getGridColumn(colKey);
    if (!column) {
      column = this.columnModel.getPrimaryColumn(colKey);
    }
    if (!column) {
      console.error("AG Grid: column '" + colKey + "' not found");
      return;
    }
    this.menuFactory.showMenuAfterMouseEvent(column, mouseEvent);
  };
  GridApi2.prototype.hidePopupMenu = function() {
    if (this.contextMenuFactory) {
      this.contextMenuFactory.hideActiveMenu();
    }
    this.menuFactory.hideActiveMenu();
  };
  GridApi2.prototype.setPopupParent = function(ePopupParent) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POPUP_PARENT, ePopupParent);
  };
  GridApi2.prototype.tabToNextCell = function(event) {
    return this.navigationService.tabToNextCell(false, event);
  };
  GridApi2.prototype.tabToPreviousCell = function(event) {
    return this.navigationService.tabToNextCell(true, event);
  };
  GridApi2.prototype.getCellRendererInstances = function(params) {
    if (params === void 0) {
      params = {};
    }
    var res = this.rowRenderer.getCellRendererInstances(params);
    var unwrapped = res.map(unwrapUserComp);
    return unwrapped;
  };
  GridApi2.prototype.getCellEditorInstances = function(params) {
    if (params === void 0) {
      params = {};
    }
    var res = this.rowRenderer.getCellEditorInstances(params);
    var unwrapped = res.map(unwrapUserComp);
    return unwrapped;
  };
  GridApi2.prototype.getEditingCells = function() {
    return this.rowRenderer.getEditingCells();
  };
  GridApi2.prototype.stopEditing = function(cancel) {
    if (cancel === void 0) {
      cancel = false;
    }
    this.rowRenderer.stopEditing(cancel);
  };
  GridApi2.prototype.startEditingCell = function(params) {
    var column = this.columnModel.getGridColumn(params.colKey);
    if (!column) {
      console.warn("AG Grid: no column found for " + params.colKey);
      return;
    }
    var cellPosition = {
      rowIndex: params.rowIndex,
      rowPinned: params.rowPinned || null,
      column
    };
    var notPinned = params.rowPinned == null;
    if (notPinned) {
      this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(params.rowIndex);
    }
    var cell = this.navigationService.getCellByPosition(cellPosition);
    if (!cell) {
      return;
    }
    cell.startRowOrCellEdit(params.key, params.charPress);
  };
  GridApi2.prototype.addAggFunc = function(key, aggFunc) {
    if (this.aggFuncService) {
      this.aggFuncService.addAggFunc(key, aggFunc);
    }
  };
  GridApi2.prototype.addAggFuncs = function(aggFuncs) {
    if (this.aggFuncService) {
      this.aggFuncService.addAggFuncs(aggFuncs);
    }
  };
  GridApi2.prototype.clearAggFuncs = function() {
    if (this.aggFuncService) {
      this.aggFuncService.clear();
    }
  };
  GridApi2.prototype.applyServerSideTransaction = function(transaction) {
    if (!this.serverSideTransactionManager) {
      console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");
      return;
    }
    return this.serverSideTransactionManager.applyTransaction(transaction);
  };
  GridApi2.prototype.applyServerSideTransactionAsync = function(transaction, callback) {
    if (!this.serverSideTransactionManager) {
      console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");
      return;
    }
    return this.serverSideTransactionManager.applyTransactionAsync(transaction, callback);
  };
  GridApi2.prototype.retryServerSideLoads = function() {
    if (!this.serverSideRowModel) {
      console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.");
      return;
    }
    this.serverSideRowModel.retryLoads();
  };
  GridApi2.prototype.flushServerSideAsyncTransactions = function() {
    if (!this.serverSideTransactionManager) {
      console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.");
      return;
    }
    return this.serverSideTransactionManager.flushAsyncTransactions();
  };
  GridApi2.prototype.applyTransaction = function(rowDataTransaction) {
    if (!this.clientSideRowModel) {
      console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1");
      return;
    }
    var res = this.clientSideRowModel.updateRowData(rowDataTransaction);
    this.rowRenderer.refreshFullWidthRows(res.update);
    if (!this.gridOptionsWrapper.isSuppressChangeDetection()) {
      this.rowRenderer.refreshCells();
    }
    return res;
  };
  GridApi2.prototype.setDeltaSort = function(enable) {
    this.gridOptionsWrapper.setProperty("deltaSort", enable);
  };
  GridApi2.prototype.updateRowData = function(rowDataTransaction) {
    var message2 = "AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.";
    doOnce(function() {
      return console.warn(message2);
    }, "updateRowData deprecated");
    return this.applyTransaction(rowDataTransaction);
  };
  GridApi2.prototype.applyTransactionAsync = function(rowDataTransaction, callback) {
    if (!this.clientSideRowModel) {
      console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");
      return;
    }
    this.clientSideRowModel.batchUpdateRowData(rowDataTransaction, callback);
  };
  GridApi2.prototype.flushAsyncTransactions = function() {
    if (!this.clientSideRowModel) {
      console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");
      return;
    }
    this.clientSideRowModel.flushAsyncTransactions();
  };
  GridApi2.prototype.batchUpdateRowData = function(rowDataTransaction, callback) {
    var message2 = "AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.";
    doOnce(function() {
      return console.warn(message2);
    }, "batchUpdateRowData deprecated");
    this.applyTransactionAsync(rowDataTransaction, callback);
  };
  GridApi2.prototype.insertItemsAtIndex = function(index, items, skipRefresh) {
    console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead.");
    this.updateRowData({ add: items, addIndex: index, update: null, remove: null });
  };
  GridApi2.prototype.removeItems = function(rowNodes, skipRefresh) {
    console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");
    var dataToRemove = rowNodes.map(function(rowNode) {
      return rowNode.data;
    });
    this.updateRowData({ add: null, addIndex: null, update: null, remove: dataToRemove });
  };
  GridApi2.prototype.addItems = function(items, skipRefresh) {
    console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead.");
    this.updateRowData({ add: items, addIndex: null, update: null, remove: null });
  };
  GridApi2.prototype.refreshVirtualPageCache = function() {
    console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");
    this.refreshInfiniteCache();
  };
  GridApi2.prototype.refreshInfinitePageCache = function() {
    console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");
    this.refreshInfiniteCache();
  };
  GridApi2.prototype.refreshInfiniteCache = function() {
    if (this.infiniteRowModel) {
      this.infiniteRowModel.refreshCache();
    } else {
      console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.");
    }
  };
  GridApi2.prototype.purgeVirtualPageCache = function() {
    console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");
    this.purgeInfinitePageCache();
  };
  GridApi2.prototype.purgeInfinitePageCache = function() {
    console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");
    this.purgeInfiniteCache();
  };
  GridApi2.prototype.purgeInfiniteCache = function() {
    if (this.infiniteRowModel) {
      this.infiniteRowModel.purgeCache();
    } else {
      console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.");
    }
  };
  GridApi2.prototype.purgeEnterpriseCache = function(route) {
    console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()");
    this.purgeServerSideCache(route);
  };
  GridApi2.prototype.purgeServerSideCache = function(route) {
    if (route === void 0) {
      route = [];
    }
    if (this.serverSideRowModel) {
      console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSide({purge: true}) instead.");
      this.refreshServerSide({
        route,
        purge: true
      });
    } else {
      console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.");
    }
  };
  GridApi2.prototype.refreshServerSide = function(params) {
    if (!this.serverSideRowModel) {
      console.warn("AG Grid: api.refreshServerSide is only available when rowModelType='serverSide'.");
    }
    this.serverSideRowModel.refreshStore(params);
  };
  GridApi2.prototype.refreshServerSideStore = function(params) {
    var message2 = "AG Grid: Grid API refreshServerSideStore() was renamed to refreshServerSide() in v28.0";
    doOnce(function() {
      return console.warn(message2);
    }, "refreshServerSideStore-renamed");
    return this.refreshServerSide(params);
  };
  GridApi2.prototype.getServerSideStoreState = function() {
    var message2 = "AG Grid: Grid API getServerSideStoreState() was renamed to getServerSideGroupLevelState() in v28.0";
    doOnce(function() {
      return console.warn(message2);
    }, "getServerSideStoreState-renamed");
    return this.getServerSideGroupLevelState();
  };
  GridApi2.prototype.getServerSideGroupLevelState = function() {
    if (!this.serverSideRowModel) {
      console.warn("AG Grid: api.getServerSideGroupLevelState is only available when rowModelType='serverSide'.");
      return [];
    }
    return this.serverSideRowModel.getStoreState();
  };
  GridApi2.prototype.getVirtualRowCount = function() {
    console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead");
    return this.getInfiniteRowCount();
  };
  GridApi2.prototype.getInfiniteRowCount = function() {
    if (this.infiniteRowModel) {
      return this.infiniteRowModel.getRowCount();
    } else {
      console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.");
    }
  };
  GridApi2.prototype.isMaxRowFound = function() {
    console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()");
    return this.isLastRowIndexKnown();
  };
  GridApi2.prototype.isLastRowIndexKnown = function() {
    if (this.infiniteRowModel) {
      return this.infiniteRowModel.isLastRowIndexKnown();
    } else {
      console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.");
    }
  };
  GridApi2.prototype.setVirtualRowCount = function(rowCount, maxRowFound) {
    console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead");
    this.setRowCount(rowCount, maxRowFound);
  };
  GridApi2.prototype.setInfiniteRowCount = function(rowCount, maxRowFound) {
    console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead");
    this.setRowCount(rowCount, maxRowFound);
  };
  GridApi2.prototype.setRowCount = function(rowCount, maxRowFound) {
    if (this.infiniteRowModel) {
      this.infiniteRowModel.setRowCount(rowCount, maxRowFound);
    } else {
      console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.");
    }
  };
  GridApi2.prototype.getVirtualPageState = function() {
    console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");
    return this.getCacheBlockState();
  };
  GridApi2.prototype.getInfinitePageState = function() {
    console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");
    return this.getCacheBlockState();
  };
  GridApi2.prototype.getCacheBlockState = function() {
    return this.rowNodeBlockLoader.getBlockState();
  };
  GridApi2.prototype.checkGridSize = function() {
    console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.");
  };
  GridApi2.prototype.getFirstRenderedRow = function() {
    console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()");
    return this.getFirstDisplayedRow();
  };
  GridApi2.prototype.getFirstDisplayedRow = function() {
    return this.rowRenderer.getFirstVirtualRenderedRow();
  };
  GridApi2.prototype.getLastRenderedRow = function() {
    console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()");
    return this.getLastDisplayedRow();
  };
  GridApi2.prototype.getLastDisplayedRow = function() {
    return this.rowRenderer.getLastVirtualRenderedRow();
  };
  GridApi2.prototype.getDisplayedRowAtIndex = function(index) {
    return this.rowModel.getRow(index);
  };
  GridApi2.prototype.getDisplayedRowCount = function() {
    return this.rowModel.getRowCount();
  };
  GridApi2.prototype.paginationIsLastPageFound = function() {
    return this.paginationProxy.isLastPageFound();
  };
  GridApi2.prototype.paginationGetPageSize = function() {
    return this.paginationProxy.getPageSize();
  };
  GridApi2.prototype.paginationSetPageSize = function(size) {
    this.gridOptionsWrapper.setProperty("paginationPageSize", size);
  };
  GridApi2.prototype.paginationGetCurrentPage = function() {
    return this.paginationProxy.getCurrentPage();
  };
  GridApi2.prototype.paginationGetTotalPages = function() {
    return this.paginationProxy.getTotalPages();
  };
  GridApi2.prototype.paginationGetRowCount = function() {
    return this.paginationProxy.getMasterRowCount();
  };
  GridApi2.prototype.paginationGoToNextPage = function() {
    this.paginationProxy.goToNextPage();
  };
  GridApi2.prototype.paginationGoToPreviousPage = function() {
    this.paginationProxy.goToPreviousPage();
  };
  GridApi2.prototype.paginationGoToFirstPage = function() {
    this.paginationProxy.goToFirstPage();
  };
  GridApi2.prototype.paginationGoToLastPage = function() {
    this.paginationProxy.goToLastPage();
  };
  GridApi2.prototype.paginationGoToPage = function(page) {
    this.paginationProxy.goToPage(page);
  };
  GridApi2.prototype.setRowClass = function(className) {
    this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_ROW_CLASS, className);
  };
  __decorate$1r([
    Optional("immutableService")
  ], GridApi2.prototype, "immutableService", void 0);
  __decorate$1r([
    Optional("csvCreator")
  ], GridApi2.prototype, "csvCreator", void 0);
  __decorate$1r([
    Optional("excelCreator")
  ], GridApi2.prototype, "excelCreator", void 0);
  __decorate$1r([
    Autowired("rowRenderer")
  ], GridApi2.prototype, "rowRenderer", void 0);
  __decorate$1r([
    Autowired("navigationService")
  ], GridApi2.prototype, "navigationService", void 0);
  __decorate$1r([
    Autowired("filterManager")
  ], GridApi2.prototype, "filterManager", void 0);
  __decorate$1r([
    Autowired("columnModel")
  ], GridApi2.prototype, "columnModel", void 0);
  __decorate$1r([
    Autowired("selectionService")
  ], GridApi2.prototype, "selectionService", void 0);
  __decorate$1r([
    Autowired("gridOptionsWrapper")
  ], GridApi2.prototype, "gridOptionsWrapper", void 0);
  __decorate$1r([
    Autowired("valueService")
  ], GridApi2.prototype, "valueService", void 0);
  __decorate$1r([
    Autowired("alignedGridsService")
  ], GridApi2.prototype, "alignedGridsService", void 0);
  __decorate$1r([
    Autowired("eventService")
  ], GridApi2.prototype, "eventService", void 0);
  __decorate$1r([
    Autowired("pinnedRowModel")
  ], GridApi2.prototype, "pinnedRowModel", void 0);
  __decorate$1r([
    Autowired("context")
  ], GridApi2.prototype, "context", void 0);
  __decorate$1r([
    Autowired("rowModel")
  ], GridApi2.prototype, "rowModel", void 0);
  __decorate$1r([
    Autowired("sortController")
  ], GridApi2.prototype, "sortController", void 0);
  __decorate$1r([
    Autowired("paginationProxy")
  ], GridApi2.prototype, "paginationProxy", void 0);
  __decorate$1r([
    Autowired("focusService")
  ], GridApi2.prototype, "focusService", void 0);
  __decorate$1r([
    Autowired("dragAndDropService")
  ], GridApi2.prototype, "dragAndDropService", void 0);
  __decorate$1r([
    Optional("rangeService")
  ], GridApi2.prototype, "rangeService", void 0);
  __decorate$1r([
    Optional("clipboardService")
  ], GridApi2.prototype, "clipboardService", void 0);
  __decorate$1r([
    Optional("aggFuncService")
  ], GridApi2.prototype, "aggFuncService", void 0);
  __decorate$1r([
    Autowired("menuFactory")
  ], GridApi2.prototype, "menuFactory", void 0);
  __decorate$1r([
    Optional("contextMenuFactory")
  ], GridApi2.prototype, "contextMenuFactory", void 0);
  __decorate$1r([
    Autowired("valueCache")
  ], GridApi2.prototype, "valueCache", void 0);
  __decorate$1r([
    Autowired("animationFrameService")
  ], GridApi2.prototype, "animationFrameService", void 0);
  __decorate$1r([
    Optional("statusBarService")
  ], GridApi2.prototype, "statusBarService", void 0);
  __decorate$1r([
    Optional("chartService")
  ], GridApi2.prototype, "chartService", void 0);
  __decorate$1r([
    Optional("undoRedoService")
  ], GridApi2.prototype, "undoRedoService", void 0);
  __decorate$1r([
    Optional("rowNodeBlockLoader")
  ], GridApi2.prototype, "rowNodeBlockLoader", void 0);
  __decorate$1r([
    Optional("ssrmTransactionManager")
  ], GridApi2.prototype, "serverSideTransactionManager", void 0);
  __decorate$1r([
    Autowired("ctrlsService")
  ], GridApi2.prototype, "ctrlsService", void 0);
  __decorate$1r([
    Optional("frameworkComponentWrapper")
  ], GridApi2.prototype, "frameworkComponentWrapper", void 0);
  __decorate$1r([
    PostConstruct
  ], GridApi2.prototype, "init", null);
  __decorate$1r([
    PreDestroy
  ], GridApi2.prototype, "cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid", null);
  GridApi2 = __decorate$1r([
    Bean("gridApi")
  ], GridApi2);
  return GridApi2;
}();
var __extends$1y = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1q = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SetLeftFeature = function(_super) {
  __extends$1y(SetLeftFeature2, _super);
  function SetLeftFeature2(columnOrGroup, eCell, beans, colsSpanning) {
    var _this = _super.call(this) || this;
    _this.columnOrGroup = columnOrGroup;
    _this.eCell = eCell;
    _this.ariaEl = _this.eCell.querySelector("[role=columnheader]") || _this.eCell;
    _this.colsSpanning = colsSpanning;
    _this.beans = beans;
    return _this;
  }
  SetLeftFeature2.prototype.setColsSpanning = function(colsSpanning) {
    this.colsSpanning = colsSpanning;
    this.onLeftChanged();
  };
  SetLeftFeature2.prototype.getColumnOrGroup = function() {
    if (this.beans.gridOptionsWrapper.isEnableRtl() && this.colsSpanning) {
      return last(this.colsSpanning);
    }
    return this.columnOrGroup;
  };
  SetLeftFeature2.prototype.postConstruct = function() {
    this.addManagedListener(this.columnOrGroup, Column.EVENT_LEFT_CHANGED, this.onLeftChanged.bind(this));
    this.setLeftFirstTime();
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onLeftChanged.bind(this));
    this.addManagedListener(this.beans.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onLeftChanged.bind(this));
  };
  SetLeftFeature2.prototype.setLeftFirstTime = function() {
    var suppressMoveAnimation = this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation();
    var oldLeftExists = exists(this.columnOrGroup.getOldLeft());
    var animateColumnMove = this.beans.columnAnimationService.isActive() && oldLeftExists && !suppressMoveAnimation;
    if (animateColumnMove) {
      this.animateInLeft();
    } else {
      this.onLeftChanged();
    }
  };
  SetLeftFeature2.prototype.animateInLeft = function() {
    var _this = this;
    var colOrGroup = this.getColumnOrGroup();
    var left = colOrGroup.getLeft();
    var oldLeft = colOrGroup.getOldLeft();
    var oldActualLeft = this.modifyLeftForPrintLayout(colOrGroup, oldLeft);
    var actualLeft = this.modifyLeftForPrintLayout(colOrGroup, left);
    this.setLeft(oldActualLeft);
    this.actualLeft = actualLeft;
    this.beans.columnAnimationService.executeNextVMTurn(function() {
      if (_this.actualLeft === actualLeft) {
        _this.setLeft(actualLeft);
      }
    });
  };
  SetLeftFeature2.prototype.onLeftChanged = function() {
    var colOrGroup = this.getColumnOrGroup();
    var left = colOrGroup.getLeft();
    this.actualLeft = this.modifyLeftForPrintLayout(colOrGroup, left);
    this.setLeft(this.actualLeft);
  };
  SetLeftFeature2.prototype.modifyLeftForPrintLayout = function(colOrGroup, leftPosition) {
    var printLayout = this.beans.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    if (!printLayout) {
      return leftPosition;
    }
    if (colOrGroup.getPinned() === Constants.PINNED_LEFT) {
      return leftPosition;
    }
    var leftWidth = this.beans.columnModel.getDisplayedColumnsLeftWidth();
    if (colOrGroup.getPinned() === Constants.PINNED_RIGHT) {
      var bodyWidth = this.beans.columnModel.getBodyContainerWidth();
      return leftWidth + bodyWidth + leftPosition;
    }
    return leftWidth + leftPosition;
  };
  SetLeftFeature2.prototype.setLeft = function(value) {
    if (exists(value)) {
      this.eCell.style.left = value + "px";
    }
    var indexColumn;
    if (this.columnOrGroup instanceof Column) {
      indexColumn = this.columnOrGroup;
    } else {
      var columnGroup = this.columnOrGroup;
      var children = columnGroup.getLeafColumns();
      if (!children.length) {
        return;
      }
      if (children.length > 1) {
        setAriaColSpan(this.ariaEl, children.length);
      }
      indexColumn = children[0];
    }
    var index = this.beans.columnModel.getAriaColumnIndex(indexColumn);
    setAriaColIndex(this.ariaEl, index);
  };
  __decorate$1q([
    PostConstruct
  ], SetLeftFeature2.prototype, "postConstruct", null);
  return SetLeftFeature2;
}(BeanStub);
var __extends$1x = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1p = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HoverFeature = function(_super) {
  __extends$1x(HoverFeature2, _super);
  function HoverFeature2(columns, element) {
    var _this = _super.call(this) || this;
    _this.columns = columns;
    _this.element = element;
    return _this;
  }
  HoverFeature2.prototype.postConstruct = function() {
    if (this.gridOptionsWrapper.isColumnHoverHighlight()) {
      this.addMouseHoverListeners();
    }
  };
  HoverFeature2.prototype.addMouseHoverListeners = function() {
    this.addManagedListener(this.element, "mouseout", this.onMouseOut.bind(this));
    this.addManagedListener(this.element, "mouseover", this.onMouseOver.bind(this));
  };
  HoverFeature2.prototype.onMouseOut = function() {
    this.columnHoverService.clearMouseOver();
  };
  HoverFeature2.prototype.onMouseOver = function() {
    this.columnHoverService.setMouseOver(this.columns);
  };
  __decorate$1p([
    Autowired("columnHoverService")
  ], HoverFeature2.prototype, "columnHoverService", void 0);
  __decorate$1p([
    PostConstruct
  ], HoverFeature2.prototype, "postConstruct", null);
  return HoverFeature2;
}(BeanStub);
var __extends$1w = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1o = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderFilterCellCtrl = function(_super) {
  __extends$1w(HeaderFilterCellCtrl2, _super);
  function HeaderFilterCellCtrl2(column, parentRowCtrl) {
    var _this = _super.call(this, column, parentRowCtrl) || this;
    _this.column = column;
    return _this;
  }
  HeaderFilterCellCtrl2.prototype.setComp = function(comp, eGui, eButtonShowMainFilter, eFloatingFilterBody) {
    _super.prototype.setGui.call(this, eGui);
    this.comp = comp;
    this.eButtonShowMainFilter = eButtonShowMainFilter;
    this.eFloatingFilterBody = eFloatingFilterBody;
    var colDef = this.column.getColDef();
    var filterExists = !!colDef.filter || !!colDef.filterFramework;
    var floatingFilterExists = !!colDef.floatingFilter;
    this.active = filterExists && floatingFilterExists;
    this.setupWidth();
    this.setupLeft();
    this.setupHover();
    this.setupFocus();
    this.setupUserComp();
    this.setupSyncWithFilter();
    this.setupUi();
    this.addManagedListener(this.eButtonShowMainFilter, "click", this.showParentFilter.bind(this));
  };
  HeaderFilterCellCtrl2.prototype.setupUi = function() {
    this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden", !this.active || this.suppressFilterButton);
    if (!this.active) {
      return;
    }
    this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body", this.suppressFilterButton);
    this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body", !this.suppressFilterButton);
    var eMenuIcon = createIconNoSpan("filter", this.gridOptionsWrapper, this.column);
    if (eMenuIcon) {
      this.eButtonShowMainFilter.appendChild(eMenuIcon);
    }
  };
  HeaderFilterCellCtrl2.prototype.setupFocus = function() {
    this.createManagedBean(new ManagedFocusFeature(this.eGui, {
      shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),
      onTabKeyDown: this.onTabKeyDown.bind(this),
      handleKeyDown: this.handleKeyDown.bind(this),
      onFocusIn: this.onFocusIn.bind(this)
    }));
  };
  HeaderFilterCellCtrl2.prototype.onTabKeyDown = function(e2) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var activeEl = eDocument.activeElement;
    var wrapperHasFocus = activeEl === this.eGui;
    if (wrapperHasFocus) {
      return;
    }
    var nextFocusableEl = this.focusService.findNextFocusableElement(this.eGui, null, e2.shiftKey);
    if (nextFocusableEl) {
      this.beans.headerNavigationService.scrollToColumn(this.column);
      e2.preventDefault();
      nextFocusableEl.focus();
      return;
    }
    var nextFocusableColumn = this.findNextColumnWithFloatingFilter(e2.shiftKey);
    if (!nextFocusableColumn) {
      return;
    }
    if (this.focusService.focusHeaderPosition({
      headerPosition: {
        headerRowIndex: this.getParentRowCtrl().getRowIndex(),
        column: nextFocusableColumn
      },
      event: e2
    })) {
      e2.preventDefault();
    }
  };
  HeaderFilterCellCtrl2.prototype.findNextColumnWithFloatingFilter = function(backwards) {
    var columModel = this.beans.columnModel;
    var nextCol = this.column;
    do {
      nextCol = backwards ? columModel.getDisplayedColBefore(nextCol) : columModel.getDisplayedColAfter(nextCol);
      if (!nextCol) {
        break;
      }
    } while (!nextCol.getColDef().filter || !nextCol.getColDef().floatingFilter);
    return nextCol;
  };
  HeaderFilterCellCtrl2.prototype.handleKeyDown = function(e2) {
    _super.prototype.handleKeyDown.call(this, e2);
    var wrapperHasFocus = this.getWrapperHasFocus();
    switch (e2.key) {
      case KeyCode.UP:
      case KeyCode.DOWN:
        if (!wrapperHasFocus) {
          e2.preventDefault();
        }
      case KeyCode.LEFT:
      case KeyCode.RIGHT:
        if (wrapperHasFocus) {
          return;
        }
        e2.stopPropagation();
      case KeyCode.ENTER:
        if (wrapperHasFocus) {
          if (this.focusService.focusInto(this.eGui)) {
            e2.preventDefault();
          }
        }
        break;
      case KeyCode.ESCAPE:
        if (!wrapperHasFocus) {
          this.eGui.focus();
        }
    }
  };
  HeaderFilterCellCtrl2.prototype.onFocusIn = function(e2) {
    var isRelatedWithin = this.eGui.contains(e2.relatedTarget);
    if (isRelatedWithin) {
      return;
    }
    var notFromHeaderWrapper = !!e2.relatedTarget && !e2.relatedTarget.classList.contains("ag-floating-filter");
    var fromWithinHeader = !!e2.relatedTarget && isElementChildOfClass(e2.relatedTarget, "ag-floating-filter");
    if (notFromHeaderWrapper && fromWithinHeader && e2.target === this.eGui) {
      var lastFocusEvent = this.lastFocusEvent;
      var fromTab = !!(lastFocusEvent && lastFocusEvent.key === KeyCode.TAB);
      if (lastFocusEvent && fromTab) {
        var shouldFocusLast = lastFocusEvent.shiftKey;
        this.focusService.focusInto(this.eGui, shouldFocusLast);
      }
    }
    var rowIndex = this.getRowIndex();
    this.beans.focusService.setFocusedHeader(rowIndex, this.column);
  };
  HeaderFilterCellCtrl2.prototype.setupHover = function() {
    var _this = this;
    this.createManagedBean(new HoverFeature([this.column], this.eGui));
    var listener = function() {
      if (!_this.gridOptionsWrapper.isColumnHoverHighlight()) {
        return;
      }
      var hovered = _this.columnHoverService.isHovered(_this.column);
      _this.comp.addOrRemoveCssClass("ag-column-hover", hovered);
    };
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, listener);
    listener();
  };
  HeaderFilterCellCtrl2.prototype.setupLeft = function() {
    var setLeftFeature = new SetLeftFeature(this.column, this.eGui, this.beans);
    this.createManagedBean(setLeftFeature);
  };
  HeaderFilterCellCtrl2.prototype.setupUserComp = function() {
    var _this = this;
    if (!this.active) {
      return;
    }
    var colDef = this.column.getColDef();
    var filterParams = this.filterManager.createFilterParams(this.column, colDef);
    var finalFilterParams = this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef, FilterComponent, filterParams);
    var defaultFloatingFilterType = this.userComponentFactory.getDefaultFloatingFilterType(colDef);
    if (defaultFloatingFilterType == null) {
      defaultFloatingFilterType = "agReadOnlyFloatingFilter";
    }
    var params = {
      column: this.column,
      filterParams: finalFilterParams,
      currentParentModel: function() {
        return _this.currentParentModel();
      },
      parentFilterInstance: function(cb) {
        return _this.parentFilterInstance(cb);
      },
      showParentFilter: function() {
        return _this.showParentFilter();
      },
      suppressFilterButton: false
    };
    this.suppressFilterButton = colDef.floatingFilterComponentParams ? !!colDef.floatingFilterComponentParams.suppressFilterButton : false;
    var compDetails = this.userComponentFactory.getFloatingFilterCompDetails(colDef, params, defaultFloatingFilterType);
    if (compDetails) {
      this.comp.setCompDetails(compDetails);
    }
  };
  HeaderFilterCellCtrl2.prototype.currentParentModel = function() {
    var filterComponent = this.getFilterComponent(false);
    return filterComponent ? filterComponent.resolveNow(null, function(filter) {
      return filter && filter.getModel();
    }) : null;
  };
  HeaderFilterCellCtrl2.prototype.getFilterComponent = function(createIfDoesNotExist) {
    if (createIfDoesNotExist === void 0) {
      createIfDoesNotExist = true;
    }
    return this.filterManager.getFilterComponent(this.column, "NO_UI", createIfDoesNotExist);
  };
  HeaderFilterCellCtrl2.prototype.parentFilterInstance = function(callback) {
    var filterComponent = this.getFilterComponent();
    if (filterComponent == null) {
      return;
    }
    filterComponent.then(function(instance) {
      callback(unwrapUserComp(instance));
    });
  };
  HeaderFilterCellCtrl2.prototype.showParentFilter = function() {
    var eventSource = this.suppressFilterButton ? this.eFloatingFilterBody : this.eButtonShowMainFilter;
    this.menuFactory.showMenuAfterButtonClick(this.column, eventSource, "floatingFilter", "filterMenuTab", ["filterMenuTab"]);
  };
  HeaderFilterCellCtrl2.prototype.setupSyncWithFilter = function() {
    var _this = this;
    if (!this.active) {
      return;
    }
    var syncWithFilter = function(filterChangedEvent) {
      var compPromise = _this.comp.getFloatingFilterComp();
      if (!compPromise) {
        return;
      }
      var parentModel = _this.currentParentModel();
      compPromise.then(function(comp) {
        if (comp) {
          comp.onParentModelChanged(parentModel, filterChangedEvent);
        }
      });
    };
    this.addManagedListener(this.column, Column.EVENT_FILTER_CHANGED, syncWithFilter);
    if (this.filterManager.isFilterActive(this.column)) {
      syncWithFilter(null);
    }
  };
  HeaderFilterCellCtrl2.prototype.setupWidth = function() {
    var _this = this;
    var listener = function() {
      var width = _this.column.getActualWidth() + "px";
      _this.comp.setWidth(width);
    };
    this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, listener);
    listener();
  };
  __decorate$1o([
    Autowired("filterManager")
  ], HeaderFilterCellCtrl2.prototype, "filterManager", void 0);
  __decorate$1o([
    Autowired("columnHoverService")
  ], HeaderFilterCellCtrl2.prototype, "columnHoverService", void 0);
  __decorate$1o([
    Autowired("menuFactory")
  ], HeaderFilterCellCtrl2.prototype, "menuFactory", void 0);
  return HeaderFilterCellCtrl2;
}(AbstractHeaderCellCtrl);
var __extends$1v = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1n = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ResizeFeature = function(_super) {
  __extends$1v(ResizeFeature2, _super);
  function ResizeFeature2(pinned, column, eResize, comp, ctrl) {
    var _this = _super.call(this) || this;
    _this.pinned = pinned;
    _this.column = column;
    _this.eResize = eResize;
    _this.comp = comp;
    _this.ctrl = ctrl;
    return _this;
  }
  ResizeFeature2.prototype.postConstruct = function() {
    var _this = this;
    var colDef = this.column.getColDef();
    var destroyResizeFuncs = [];
    var canResize;
    var canAutosize;
    var addResize = function() {
      setDisplayed(_this.eResize, canResize);
      if (!canResize) {
        return;
      }
      var finishedWithResizeFunc = _this.horizontalResizeService.addResizeBar({
        eResizeBar: _this.eResize,
        onResizeStart: _this.onResizeStart.bind(_this),
        onResizing: _this.onResizing.bind(_this, false),
        onResizeEnd: _this.onResizing.bind(_this, true)
      });
      destroyResizeFuncs.push(finishedWithResizeFunc);
      if (canAutosize) {
        var skipHeaderOnAutoSize_1 = _this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
        var autoSizeColListener_1 = function() {
          _this.columnModel.autoSizeColumn(_this.column, skipHeaderOnAutoSize_1, "uiColumnResized");
        };
        _this.eResize.addEventListener("dblclick", autoSizeColListener_1);
        var touchListener_1 = new TouchListener(_this.eResize);
        touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);
        _this.addDestroyFunc(function() {
          _this.eResize.removeEventListener("dblclick", autoSizeColListener_1);
          touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);
          touchListener_1.destroy();
        });
      }
    };
    var removeResize = function() {
      destroyResizeFuncs.forEach(function(f) {
        return f();
      });
      destroyResizeFuncs.length = 0;
    };
    var refresh = function() {
      var resize = _this.column.isResizable();
      var autoSize = !_this.gridOptionsWrapper.isSuppressAutoSize() && !colDef.suppressAutoSize;
      var propertyChange = resize !== canResize || autoSize !== canAutosize;
      if (propertyChange) {
        canResize = resize;
        canAutosize = autoSize;
        removeResize();
        addResize();
      }
    };
    refresh();
    this.addDestroyFunc(removeResize);
    this.ctrl.addRefreshFunction(refresh);
  };
  ResizeFeature2.prototype.onResizing = function(finished, resizeAmount) {
    var resizeAmountNormalised = this.normaliseResizeAmount(resizeAmount);
    var columnWidths = [{ key: this.column, newWidth: this.resizeStartWidth + resizeAmountNormalised }];
    this.columnModel.setColumnWidths(columnWidths, this.resizeWithShiftKey, finished, "uiColumnDragged");
    if (finished) {
      this.comp.addOrRemoveCssClass("ag-column-resizing", false);
    }
  };
  ResizeFeature2.prototype.onResizeStart = function(shiftKey) {
    this.resizeStartWidth = this.column.getActualWidth();
    this.resizeWithShiftKey = shiftKey;
    this.comp.addOrRemoveCssClass("ag-column-resizing", true);
  };
  ResizeFeature2.prototype.normaliseResizeAmount = function(dragChange) {
    var result = dragChange;
    var notPinningLeft = this.pinned !== Constants.PINNED_LEFT;
    var pinningRight = this.pinned === Constants.PINNED_RIGHT;
    if (this.gridOptionsWrapper.isEnableRtl()) {
      if (notPinningLeft) {
        result *= -1;
      }
    } else {
      if (pinningRight) {
        result *= -1;
      }
    }
    return result;
  };
  __decorate$1n([
    Autowired("horizontalResizeService")
  ], ResizeFeature2.prototype, "horizontalResizeService", void 0);
  __decorate$1n([
    Autowired("columnModel")
  ], ResizeFeature2.prototype, "columnModel", void 0);
  __decorate$1n([
    PostConstruct
  ], ResizeFeature2.prototype, "postConstruct", null);
  return ResizeFeature2;
}(BeanStub);
var __extends$1u = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgCheckbox = function(_super) {
  __extends$1u(AgCheckbox2, _super);
  function AgCheckbox2(config, className, inputType) {
    if (className === void 0) {
      className = "ag-checkbox";
    }
    if (inputType === void 0) {
      inputType = "checkbox";
    }
    var _this = _super.call(this, config, className, inputType) || this;
    _this.labelAlignment = "right";
    _this.selected = false;
    _this.readOnly = false;
    _this.passive = false;
    return _this;
  }
  AgCheckbox2.prototype.addInputListeners = function() {
    this.addManagedListener(this.eInput, "click", this.onCheckboxClick.bind(this));
    this.addManagedListener(this.eLabel, "click", this.toggle.bind(this));
  };
  AgCheckbox2.prototype.getNextValue = function() {
    return this.selected === void 0 ? true : !this.selected;
  };
  AgCheckbox2.prototype.setPassive = function(passive) {
    this.passive = passive;
  };
  AgCheckbox2.prototype.isReadOnly = function() {
    return this.readOnly;
  };
  AgCheckbox2.prototype.setReadOnly = function(readOnly) {
    this.eWrapper.classList.toggle("ag-disabled", readOnly);
    this.eInput.disabled = readOnly;
    this.readOnly = readOnly;
  };
  AgCheckbox2.prototype.setDisabled = function(disabled) {
    this.eWrapper.classList.toggle("ag-disabled", disabled);
    return _super.prototype.setDisabled.call(this, disabled);
  };
  AgCheckbox2.prototype.toggle = function() {
    if (this.eInput.disabled) {
      return;
    }
    var previousValue = this.isSelected();
    var nextValue = this.getNextValue();
    if (this.passive) {
      this.dispatchChange(nextValue, previousValue);
    } else {
      this.setValue(nextValue);
    }
  };
  AgCheckbox2.prototype.getValue = function() {
    return this.isSelected();
  };
  AgCheckbox2.prototype.setValue = function(value, silent) {
    this.refreshSelectedClass(value);
    this.setSelected(value, silent);
    return this;
  };
  AgCheckbox2.prototype.setName = function(name) {
    var input2 = this.getInputElement();
    input2.name = name;
    return this;
  };
  AgCheckbox2.prototype.isSelected = function() {
    return this.selected;
  };
  AgCheckbox2.prototype.setSelected = function(selected, silent) {
    if (this.isSelected() === selected) {
      return;
    }
    this.previousValue = this.isSelected();
    selected = this.selected = typeof selected === "boolean" ? selected : void 0;
    this.eInput.checked = selected;
    this.eInput.indeterminate = selected === void 0;
    if (!silent) {
      this.dispatchChange(this.selected, this.previousValue);
    }
  };
  AgCheckbox2.prototype.dispatchChange = function(selected, previousValue, event) {
    this.dispatchEvent({ type: AgCheckbox2.EVENT_CHANGED, selected, previousValue, event });
    var input2 = this.getInputElement();
    var checkboxChangedEvent = {
      type: Events.EVENT_CHECKBOX_CHANGED,
      id: input2.id,
      name: input2.name,
      selected,
      previousValue
    };
    this.eventService.dispatchEvent(checkboxChangedEvent);
  };
  AgCheckbox2.prototype.onCheckboxClick = function(e2) {
    if (this.passive || this.eInput.disabled) {
      return;
    }
    var previousValue = this.isSelected();
    var selected = this.selected = e2.target.checked;
    this.refreshSelectedClass(selected);
    this.dispatchChange(selected, previousValue, e2);
  };
  AgCheckbox2.prototype.refreshSelectedClass = function(value) {
    this.eWrapper.classList.toggle("ag-checked", value === true);
    this.eWrapper.classList.toggle("ag-indeterminate", value == null);
  };
  return AgCheckbox2;
}(AgAbstractInputField);
var __extends$1t = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1m = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SelectAllFeature = function(_super) {
  __extends$1t(SelectAllFeature2, _super);
  function SelectAllFeature2(column) {
    var _this = _super.call(this) || this;
    _this.cbSelectAllVisible = false;
    _this.processingEventFromCheckbox = false;
    _this.column = column;
    var colDef = column.getColDef();
    _this.filteredOnly = colDef ? !!colDef.headerCheckboxSelectionFilteredOnly : false;
    return _this;
  }
  SelectAllFeature2.prototype.onSpaceKeyPressed = function(e2) {
    var checkbox = this.cbSelectAll;
    var eDocument = this.gridOptionsWrapper.getDocument();
    if (checkbox.isDisplayed() && !checkbox.getGui().contains(eDocument.activeElement)) {
      e2.preventDefault();
      checkbox.setValue(!checkbox.getValue());
    }
  };
  SelectAllFeature2.prototype.getCheckboxGui = function() {
    return this.cbSelectAll.getGui();
  };
  SelectAllFeature2.prototype.setComp = function(ctrl) {
    this.headerCellCtrl = ctrl;
    this.cbSelectAll = this.createManagedBean(new AgCheckbox());
    this.cbSelectAll.addCssClass("ag-header-select-all");
    setAriaRole(this.cbSelectAll.getGui(), "presentation");
    this.showOrHideSelectAll();
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideSelectAll.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.showOrHideSelectAll.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_SELECTION_CHANGED, this.onSelectionChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.onModelChanged.bind(this));
    this.addManagedListener(this.cbSelectAll, AgCheckbox.EVENT_CHANGED, this.onCbSelectAll.bind(this));
    this.cbSelectAll.getInputElement().setAttribute("tabindex", "-1");
    this.refreshSelectAllLabel();
  };
  SelectAllFeature2.prototype.showOrHideSelectAll = function() {
    this.cbSelectAllVisible = this.isCheckboxSelection();
    this.cbSelectAll.setDisplayed(this.cbSelectAllVisible);
    if (this.cbSelectAllVisible) {
      this.checkRightRowModelType();
      this.updateStateOfCheckbox();
    }
    this.refreshSelectAllLabel();
  };
  SelectAllFeature2.prototype.onModelChanged = function() {
    if (!this.cbSelectAllVisible) {
      return;
    }
    this.updateStateOfCheckbox();
  };
  SelectAllFeature2.prototype.onSelectionChanged = function() {
    if (!this.cbSelectAllVisible) {
      return;
    }
    this.updateStateOfCheckbox();
  };
  SelectAllFeature2.prototype.getNextCheckboxState = function(selectionCount) {
    if (selectionCount.selected === 0 && selectionCount.notSelected === 0) {
      return false;
    }
    if (selectionCount.selected > 0 && selectionCount.notSelected > 0) {
      return null;
    }
    if (selectionCount.selected > 0) {
      return true;
    }
    return false;
  };
  SelectAllFeature2.prototype.updateStateOfCheckbox = function() {
    if (this.processingEventFromCheckbox) {
      return;
    }
    this.processingEventFromCheckbox = true;
    var selectionCount = this.getSelectionCount();
    var allSelected = this.getNextCheckboxState(selectionCount);
    this.cbSelectAll.setValue(allSelected);
    this.refreshSelectAllLabel();
    this.processingEventFromCheckbox = false;
  };
  SelectAllFeature2.prototype.refreshSelectAllLabel = function() {
    if (!this.cbSelectAllVisible) {
      this.headerCellCtrl.setAriaDescriptionProperty("selectAll", null);
    } else {
      var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
      var checked = this.cbSelectAll.getValue();
      var ariaStatus = checked ? translate2("ariaChecked", "checked") : translate2("ariaUnchecked", "unchecked");
      var ariaLabel = translate2("ariaRowSelectAll", "Press Space to toggle all rows selection");
      this.headerCellCtrl.setAriaDescriptionProperty("selectAll", ariaLabel + " (" + ariaStatus + ")");
    }
    this.headerCellCtrl.refreshAriaDescription();
  };
  SelectAllFeature2.prototype.getSelectionCount = function() {
    var _this = this;
    var selectedCount = 0;
    var notSelectedCount = 0;
    var callback = function(node) {
      if (_this.gridOptionsWrapper.isGroupSelectsChildren() && node.group) {
        return;
      }
      if (node.isSelected()) {
        selectedCount++;
      } else if (!node.selectable)
        ;
      else {
        notSelectedCount++;
      }
    };
    if (this.filteredOnly) {
      this.gridApi.forEachNodeAfterFilter(callback);
    } else {
      this.gridApi.forEachNode(callback);
    }
    return {
      notSelected: notSelectedCount,
      selected: selectedCount
    };
  };
  SelectAllFeature2.prototype.checkRightRowModelType = function() {
    var rowModelType = this.rowModel.getType();
    var rowModelMatches = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
    if (!rowModelMatches) {
      console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using " + rowModelType);
    }
  };
  SelectAllFeature2.prototype.onCbSelectAll = function() {
    if (this.processingEventFromCheckbox) {
      return;
    }
    if (!this.cbSelectAllVisible) {
      return;
    }
    var value = this.cbSelectAll.getValue();
    if (value) {
      this.selectionService.selectAllRowNodes(this.filteredOnly);
    } else {
      this.selectionService.deselectAllRowNodes(this.filteredOnly);
    }
  };
  SelectAllFeature2.prototype.isCheckboxSelection = function() {
    var result = this.column.getColDef().headerCheckboxSelection;
    if (typeof result === "function") {
      var func = result;
      var params = {
        column: this.column,
        colDef: this.column.getColDef(),
        columnApi: this.columnApi,
        api: this.gridApi,
        context: this.gridOptionsWrapper.getContext()
      };
      result = func(params);
    }
    if (result) {
      if (this.gridOptionsWrapper.isRowModelServerSide()) {
        console.warn("AG Grid: headerCheckboxSelection is not supported for Server Side Row Model");
        return false;
      }
      if (this.gridOptionsWrapper.isRowModelInfinite()) {
        console.warn("AG Grid: headerCheckboxSelection is not supported for Infinite Row Model");
        return false;
      }
      if (this.gridOptionsWrapper.isRowModelViewport()) {
        console.warn("AG Grid: headerCheckboxSelection is not supported for Viewport Row Model");
        return false;
      }
      return true;
    }
    return false;
  };
  __decorate$1m([
    Autowired("gridApi")
  ], SelectAllFeature2.prototype, "gridApi", void 0);
  __decorate$1m([
    Autowired("columnApi")
  ], SelectAllFeature2.prototype, "columnApi", void 0);
  __decorate$1m([
    Autowired("rowModel")
  ], SelectAllFeature2.prototype, "rowModel", void 0);
  __decorate$1m([
    Autowired("selectionService")
  ], SelectAllFeature2.prototype, "selectionService", void 0);
  return SelectAllFeature2;
}(BeanStub);
var __extends$1s = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1l = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderCellCtrl = function(_super) {
  __extends$1s(HeaderCellCtrl2, _super);
  function HeaderCellCtrl2(column, parentRowCtrl) {
    var _this = _super.call(this, column, parentRowCtrl) || this;
    _this.refreshFunctions = [];
    _this.userHeaderClasses = /* @__PURE__ */ new Set();
    _this.ariaDescriptionProperties = /* @__PURE__ */ new Map();
    _this.column = column;
    return _this;
  }
  HeaderCellCtrl2.prototype.setComp = function(comp, eGui, eResize, eHeaderCompWrapper) {
    var _this = this;
    _super.prototype.setGui.call(this, eGui);
    this.comp = comp;
    this.updateState();
    this.setupWidth();
    this.setupMovingCss();
    this.setupMenuClass();
    this.setupSortableClass();
    this.setupWrapTextClass();
    this.setupAutoHeight(eHeaderCompWrapper);
    this.addColumnHoverListener();
    this.setupFilterCss();
    this.setupColId();
    this.setupClassesFromColDef();
    this.setupTooltip();
    this.addActiveHeaderMouseListeners();
    this.setupSelectAll();
    this.setupUserComp();
    this.refreshAria();
    this.createManagedBean(new ResizeFeature(this.getPinned(), this.column, eResize, comp, this));
    this.createManagedBean(new HoverFeature([this.column], eGui));
    this.createManagedBean(new SetLeftFeature(this.column, eGui, this.beans));
    this.createManagedBean(new ManagedFocusFeature(eGui, {
      shouldStopEventPropagation: function(e2) {
        return _this.shouldStopEventPropagation(e2);
      },
      onTabKeyDown: function() {
        return null;
      },
      handleKeyDown: this.handleKeyDown.bind(this),
      onFocusIn: this.onFocusIn.bind(this),
      onFocusOut: this.onFocusOut.bind(this)
    }));
    this.addManagedListener(this.column, Column.EVENT_COL_DEF_CHANGED, this.onColDefChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onColumnValueChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));
  };
  HeaderCellCtrl2.prototype.setupUserComp = function() {
    var compDetails = this.lookupUserCompDetails();
    this.setCompDetails(compDetails);
  };
  HeaderCellCtrl2.prototype.setCompDetails = function(compDetails) {
    this.userCompDetails = compDetails;
    this.comp.setUserCompDetails(compDetails);
  };
  HeaderCellCtrl2.prototype.lookupUserCompDetails = function() {
    var params = this.createParams();
    var colDef = this.column.getColDef();
    return this.userComponentFactory.getHeaderCompDetails(colDef, params);
  };
  HeaderCellCtrl2.prototype.createParams = function() {
    var _this = this;
    var colDef = this.column.getColDef();
    var params = {
      column: this.column,
      displayName: this.displayName,
      enableSorting: colDef.sortable,
      enableMenu: this.menuEnabled,
      showColumnMenu: function(source) {
        _this.gridApi.showColumnMenuAfterButtonClick(_this.column, source);
      },
      progressSort: function(multiSort) {
        _this.sortController.progressSort(_this.column, !!multiSort, "uiColumnSorted");
      },
      setSort: function(sort, multiSort) {
        _this.sortController.setSortForColumn(_this.column, sort, !!multiSort, "uiColumnSorted");
      },
      api: this.gridApi,
      columnApi: this.columnApi,
      context: this.gridOptionsWrapper.getContext(),
      eGridHeader: this.getGui()
    };
    return params;
  };
  HeaderCellCtrl2.prototype.setupSelectAll = function() {
    this.selectAllFeature = this.createManagedBean(new SelectAllFeature(this.column));
    this.selectAllFeature.setComp(this);
  };
  HeaderCellCtrl2.prototype.getSelectAllGui = function() {
    return this.selectAllFeature.getCheckboxGui();
  };
  HeaderCellCtrl2.prototype.handleKeyDown = function(e2) {
    _super.prototype.handleKeyDown.call(this, e2);
    if (e2.key === KeyCode.SPACE) {
      this.selectAllFeature.onSpaceKeyPressed(e2);
    }
    if (e2.key === KeyCode.ENTER) {
      this.onEnterKeyPressed(e2);
    }
  };
  HeaderCellCtrl2.prototype.onEnterKeyPressed = function(e2) {
    var headerComp = this.comp.getUserCompInstance();
    if (!headerComp) {
      return;
    }
    if (e2.ctrlKey || e2.metaKey) {
      if (this.menuEnabled && headerComp.showMenu) {
        e2.preventDefault();
        headerComp.showMenu();
      }
    } else if (this.sortable) {
      var multiSort = e2.shiftKey;
      this.sortController.progressSort(this.column, multiSort, "uiColumnSorted");
    }
  };
  HeaderCellCtrl2.prototype.isMenuEnabled = function() {
    return this.menuEnabled;
  };
  HeaderCellCtrl2.prototype.onFocusIn = function(e2) {
    if (!this.getGui().contains(e2.relatedTarget)) {
      var rowIndex = this.getRowIndex();
      this.focusService.setFocusedHeader(rowIndex, this.column);
    }
    this.setActiveHeader(true);
  };
  HeaderCellCtrl2.prototype.onFocusOut = function(e2) {
    if (this.getGui().contains(e2.relatedTarget)) {
      return;
    }
    this.setActiveHeader(false);
  };
  HeaderCellCtrl2.prototype.setupTooltip = function() {
    var _this = this;
    var tooltipCtrl = {
      getColumn: function() {
        return _this.column;
      },
      getColDef: function() {
        return _this.column.getColDef();
      },
      getGui: function() {
        return _this.eGui;
      },
      getLocation: function() {
        return "header";
      },
      getTooltipValue: function() {
        var res = _this.column.getColDef().headerTooltip;
        return res;
      }
    };
    var tooltipFeature = this.createManagedBean(new TooltipFeature(tooltipCtrl, this.beans));
    tooltipFeature.setComp(this.comp);
    this.refreshFunctions.push(function() {
      return tooltipFeature.refreshToolTip();
    });
  };
  HeaderCellCtrl2.prototype.setupClassesFromColDef = function() {
    var _this = this;
    var refreshHeaderClasses = function() {
      var colDef = _this.column.getColDef();
      var goa = _this.gridOptionsWrapper;
      var classes = CssClassApplier.getHeaderClassesFromColDef(colDef, goa, _this.column, null);
      var oldClasses = _this.userHeaderClasses;
      _this.userHeaderClasses = new Set(classes);
      classes.forEach(function(c2) {
        if (oldClasses.has(c2)) {
          oldClasses.delete(c2);
        } else {
          _this.comp.addOrRemoveCssClass(c2, true);
        }
      });
      oldClasses.forEach(function(c2) {
        return _this.comp.addOrRemoveCssClass(c2, false);
      });
    };
    this.refreshFunctions.push(refreshHeaderClasses);
    refreshHeaderClasses();
  };
  HeaderCellCtrl2.prototype.setDragSource = function(eSource) {
    var _this = this;
    this.dragSourceElement = eSource;
    this.removeDragSource();
    if (!eSource) {
      return;
    }
    if (!this.draggable) {
      return;
    }
    var hideColumnOnExit = !this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns();
    this.moveDragSource = {
      type: DragSourceType.HeaderCell,
      eElement: eSource,
      defaultIconName: hideColumnOnExit ? DragAndDropService.ICON_HIDE : DragAndDropService.ICON_NOT_ALLOWED,
      getDragItem: function() {
        return _this.createDragItem();
      },
      dragItemName: this.displayName,
      onDragStarted: function() {
        return _this.column.setMoving(true, "uiColumnMoved");
      },
      onDragStopped: function() {
        return _this.column.setMoving(false, "uiColumnMoved");
      },
      onGridEnter: function(dragItem) {
        var _a2, _b;
        if (hideColumnOnExit) {
          var unlockedColumns = ((_b = (_a2 = dragItem) === null || _a2 === void 0 ? void 0 : _a2.columns) === null || _b === void 0 ? void 0 : _b.filter(function(col) {
            return !col.getColDef().lockVisible;
          })) || [];
          _this.columnModel.setColumnsVisible(unlockedColumns, true, "uiColumnMoved");
        }
      },
      onGridExit: function(dragItem) {
        var _a2, _b;
        if (hideColumnOnExit) {
          var unlockedColumns = ((_b = (_a2 = dragItem) === null || _a2 === void 0 ? void 0 : _a2.columns) === null || _b === void 0 ? void 0 : _b.filter(function(col) {
            return !col.getColDef().lockVisible;
          })) || [];
          _this.columnModel.setColumnsVisible(unlockedColumns, false, "uiColumnMoved");
        }
      }
    };
    this.dragAndDropService.addDragSource(this.moveDragSource, true);
  };
  HeaderCellCtrl2.prototype.createDragItem = function() {
    var visibleState = {};
    visibleState[this.column.getId()] = this.column.isVisible();
    return {
      columns: [this.column],
      visibleState
    };
  };
  HeaderCellCtrl2.prototype.removeDragSource = function() {
    if (this.moveDragSource) {
      this.dragAndDropService.removeDragSource(this.moveDragSource);
      this.moveDragSource = void 0;
    }
  };
  HeaderCellCtrl2.prototype.onColDefChanged = function() {
    this.refresh();
  };
  HeaderCellCtrl2.prototype.updateState = function() {
    var colDef = this.column.getColDef();
    this.menuEnabled = this.menuFactory.isMenuEnabled(this.column) && !colDef.suppressMenu;
    this.sortable = colDef.sortable;
    this.displayName = this.calculateDisplayName();
    this.draggable = this.workOutDraggable();
  };
  HeaderCellCtrl2.prototype.addRefreshFunction = function(func) {
    this.refreshFunctions.push(func);
  };
  HeaderCellCtrl2.prototype.refresh = function() {
    this.updateState();
    this.refreshHeaderComp();
    this.refreshAria();
    this.refreshFunctions.forEach(function(f) {
      return f();
    });
  };
  HeaderCellCtrl2.prototype.refreshHeaderComp = function() {
    var newCompDetails = this.lookupUserCompDetails();
    var compInstance = this.comp.getUserCompInstance();
    var attemptRefresh = compInstance != null && this.userCompDetails.componentClass == newCompDetails.componentClass;
    var headerCompRefreshed = attemptRefresh ? this.attemptHeaderCompRefresh(newCompDetails.params) : false;
    if (headerCompRefreshed) {
      this.setDragSource(this.dragSourceElement);
    } else {
      this.setCompDetails(newCompDetails);
    }
  };
  HeaderCellCtrl2.prototype.attemptHeaderCompRefresh = function(params) {
    var headerComp = this.comp.getUserCompInstance();
    if (!headerComp) {
      return false;
    }
    if (!headerComp.refresh) {
      return false;
    }
    var res = headerComp.refresh(params);
    return res;
  };
  HeaderCellCtrl2.prototype.calculateDisplayName = function() {
    return this.columnModel.getDisplayNameForColumn(this.column, "header", true);
  };
  HeaderCellCtrl2.prototype.checkDisplayName = function() {
    if (this.displayName !== this.calculateDisplayName()) {
      this.refresh();
    }
  };
  HeaderCellCtrl2.prototype.workOutDraggable = function() {
    var colDef = this.column.getColDef();
    var isSuppressMovableColumns = this.gridOptionsWrapper.isSuppressMovableColumns();
    var colCanMove = !isSuppressMovableColumns && !colDef.suppressMovable && !colDef.lockPosition;
    return !!colCanMove || !!colDef.enableRowGroup || !!colDef.enablePivot;
  };
  HeaderCellCtrl2.prototype.onColumnRowGroupChanged = function() {
    this.checkDisplayName();
  };
  HeaderCellCtrl2.prototype.onColumnPivotChanged = function() {
    this.checkDisplayName();
  };
  HeaderCellCtrl2.prototype.onColumnValueChanged = function() {
    this.checkDisplayName();
  };
  HeaderCellCtrl2.prototype.setupWidth = function() {
    var _this = this;
    var listener = function() {
      _this.comp.setWidth(_this.column.getActualWidth() + "px");
    };
    this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, listener);
    listener();
  };
  HeaderCellCtrl2.prototype.setupMovingCss = function() {
    var _this = this;
    var listener = function() {
      _this.comp.addOrRemoveCssClass("ag-header-cell-moving", _this.column.isMoving());
    };
    this.addManagedListener(this.column, Column.EVENT_MOVING_CHANGED, listener);
    listener();
  };
  HeaderCellCtrl2.prototype.setupMenuClass = function() {
    var _this = this;
    var listener = function() {
      _this.comp.addOrRemoveCssClass("ag-column-menu-visible", _this.column.isMenuVisible());
    };
    this.addManagedListener(this.column, Column.EVENT_MENU_VISIBLE_CHANGED, listener);
    listener();
  };
  HeaderCellCtrl2.prototype.setupSortableClass = function() {
    var _this = this;
    var updateSortableCssClass = function() {
      _this.comp.addOrRemoveCssClass("ag-header-cell-sortable", !!_this.sortable);
    };
    updateSortableCssClass();
    this.addRefreshFunction(updateSortableCssClass);
    this.addManagedListener(this.column, Column.EVENT_SORT_CHANGED, this.refreshAriaSort.bind(this));
  };
  HeaderCellCtrl2.prototype.setupWrapTextClass = function() {
    var _this = this;
    var listener = function() {
      var wrapText = !!_this.column.getColDef().wrapHeaderText;
      _this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text", wrapText);
    };
    listener();
    this.addRefreshFunction(listener);
  };
  HeaderCellCtrl2.prototype.setupAutoHeight = function(wrapperElement) {
    var _this = this;
    var measureHeight = function(timesCalled) {
      if (!_this.isAlive()) {
        return;
      }
      var _a2 = getElementSize(_this.getGui()), paddingTop = _a2.paddingTop, paddingBottom = _a2.paddingBottom;
      var wrapperHeight = wrapperElement.offsetHeight;
      var autoHeight = wrapperHeight + paddingTop + paddingBottom;
      if (timesCalled < 5) {
        var doc = _this.beans.gridOptionsWrapper.getDocument();
        var notYetInDom = !doc || !doc.contains(wrapperElement);
        var possiblyNoContentYet = autoHeight == 0;
        if (notYetInDom || possiblyNoContentYet) {
          _this.beans.frameworkOverrides.setTimeout(function() {
            return measureHeight(timesCalled + 1);
          }, 0);
          return;
        }
      }
      _this.columnModel.setColumnHeaderHeight(_this.column, autoHeight);
    };
    var isMeasuring = false;
    var stopResizeObserver;
    var checkMeasuring = function() {
      var newValue = _this.column.isAutoHeaderHeight();
      if (newValue && !isMeasuring) {
        startMeasuring();
      }
      if (!newValue && isMeasuring) {
        stopMeasuring();
      }
    };
    var startMeasuring = function() {
      isMeasuring = true;
      measureHeight(0);
      stopResizeObserver = _this.resizeObserverService.observeResize(wrapperElement, function() {
        return measureHeight(0);
      });
    };
    var stopMeasuring = function() {
      isMeasuring = false;
      stopResizeObserver && stopResizeObserver();
      stopResizeObserver = void 0;
    };
    checkMeasuring();
    this.addDestroyFunc(function() {
      return stopMeasuring();
    });
    this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, function() {
      return isMeasuring && measureHeight(0);
    });
    this.addManagedListener(this.column, Column.EVENT_SORT_CHANGED, function() {
      isMeasuring && _this.beans.frameworkOverrides.setTimeout(function() {
        return measureHeight(0);
      });
    });
    this.addRefreshFunction(checkMeasuring);
  };
  HeaderCellCtrl2.prototype.refreshAriaSort = function() {
    if (this.sortable) {
      var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
      this.comp.setAriaSort(getAriaSortState(this.column));
      this.setAriaDescriptionProperty("sort", translate2("ariaSortableColumn", "Press ENTER to sort."));
    } else {
      this.comp.setAriaSort();
      this.setAriaDescriptionProperty("sort", null);
    }
  };
  HeaderCellCtrl2.prototype.refreshAriaMenu = function() {
    if (this.menuEnabled) {
      var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
      this.setAriaDescriptionProperty("menu", translate2("ariaMenuColumn", "Press CTRL ENTER to open column menu."));
    } else {
      this.setAriaDescriptionProperty("menu", null);
    }
  };
  HeaderCellCtrl2.prototype.setAriaDescriptionProperty = function(property, value) {
    if (value != null) {
      this.ariaDescriptionProperties.set(property, value);
    } else {
      this.ariaDescriptionProperties.delete(property);
    }
  };
  HeaderCellCtrl2.prototype.refreshAriaDescription = function() {
    var descriptionArray = Array.from(this.ariaDescriptionProperties.values());
    this.comp.setAriaDescription(descriptionArray.length ? descriptionArray.join(" ") : void 0);
  };
  HeaderCellCtrl2.prototype.refreshAria = function() {
    this.refreshAriaSort();
    this.refreshAriaMenu();
    this.refreshAriaDescription();
  };
  HeaderCellCtrl2.prototype.addColumnHoverListener = function() {
    var _this = this;
    var listener = function() {
      if (!_this.gridOptionsWrapper.isColumnHoverHighlight()) {
        return;
      }
      var isHovered = _this.columnHoverService.isHovered(_this.column);
      _this.comp.addOrRemoveCssClass("ag-column-hover", isHovered);
    };
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, listener);
    listener();
  };
  HeaderCellCtrl2.prototype.setupFilterCss = function() {
    var _this = this;
    var listener = function() {
      _this.comp.addOrRemoveCssClass("ag-header-cell-filtered", _this.column.isFilterActive());
    };
    this.addManagedListener(this.column, Column.EVENT_FILTER_ACTIVE_CHANGED, listener);
    listener();
  };
  HeaderCellCtrl2.prototype.setupColId = function() {
    this.comp.setColId(this.column.getColId());
  };
  HeaderCellCtrl2.prototype.addActiveHeaderMouseListeners = function() {
    var _this = this;
    var listener = function(e2) {
      return _this.setActiveHeader(e2.type === "mouseenter");
    };
    this.addManagedListener(this.getGui(), "mouseenter", listener);
    this.addManagedListener(this.getGui(), "mouseleave", listener);
  };
  HeaderCellCtrl2.prototype.setActiveHeader = function(active) {
    this.comp.addOrRemoveCssClass("ag-header-active", active);
  };
  __decorate$1l([
    Autowired("columnModel")
  ], HeaderCellCtrl2.prototype, "columnModel", void 0);
  __decorate$1l([
    Autowired("columnHoverService")
  ], HeaderCellCtrl2.prototype, "columnHoverService", void 0);
  __decorate$1l([
    Autowired("sortController")
  ], HeaderCellCtrl2.prototype, "sortController", void 0);
  __decorate$1l([
    Autowired("menuFactory")
  ], HeaderCellCtrl2.prototype, "menuFactory", void 0);
  __decorate$1l([
    Autowired("dragAndDropService")
  ], HeaderCellCtrl2.prototype, "dragAndDropService", void 0);
  __decorate$1l([
    Autowired("resizeObserverService")
  ], HeaderCellCtrl2.prototype, "resizeObserverService", void 0);
  __decorate$1l([
    Autowired("gridApi")
  ], HeaderCellCtrl2.prototype, "gridApi", void 0);
  __decorate$1l([
    Autowired("columnApi")
  ], HeaderCellCtrl2.prototype, "columnApi", void 0);
  __decorate$1l([
    PreDestroy
  ], HeaderCellCtrl2.prototype, "removeDragSource", null);
  return HeaderCellCtrl2;
}(AbstractHeaderCellCtrl);
var __extends$1r = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1k = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GroupResizeFeature = function(_super) {
  __extends$1r(GroupResizeFeature2, _super);
  function GroupResizeFeature2(comp, eResize, pinned, columnGroup) {
    var _this = _super.call(this) || this;
    _this.eResize = eResize;
    _this.comp = comp;
    _this.pinned = pinned;
    _this.columnGroup = columnGroup;
    return _this;
  }
  GroupResizeFeature2.prototype.postConstruct = function() {
    var _this = this;
    if (!this.columnGroup.isResizable()) {
      this.comp.addOrRemoveResizableCssClass("ag-hidden", true);
      return;
    }
    var finishedWithResizeFunc = this.horizontalResizeService.addResizeBar({
      eResizeBar: this.eResize,
      onResizeStart: this.onResizeStart.bind(this),
      onResizing: this.onResizing.bind(this, false),
      onResizeEnd: this.onResizing.bind(this, true)
    });
    this.addDestroyFunc(finishedWithResizeFunc);
    if (!this.gridOptionsWrapper.isSuppressAutoSize()) {
      var skipHeaderOnAutoSize_1 = this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
      this.eResize.addEventListener("dblclick", function() {
        var keys2 = [];
        var leafCols = _this.columnGroup.getDisplayedLeafColumns();
        leafCols.forEach(function(column) {
          if (!column.getColDef().suppressAutoSize) {
            keys2.push(column.getColId());
          }
        });
        if (keys2.length > 0) {
          _this.columnModel.autoSizeColumns({
            columns: keys2,
            skipHeader: skipHeaderOnAutoSize_1,
            stopAtGroup: _this.columnGroup,
            source: "uiColumnResized"
          });
        }
        _this.resizeLeafColumnsToFit();
      });
    }
  };
  GroupResizeFeature2.prototype.onResizeStart = function(shiftKey) {
    var _this = this;
    this.calculateInitialValues();
    var takeFromGroup = null;
    if (shiftKey) {
      takeFromGroup = this.columnModel.getDisplayedGroupAfter(this.columnGroup);
    }
    if (takeFromGroup) {
      var takeFromLeafCols = takeFromGroup.getDisplayedLeafColumns();
      this.resizeTakeFromCols = takeFromLeafCols.filter(function(col) {
        return col.isResizable();
      });
      this.resizeTakeFromStartWidth = 0;
      this.resizeTakeFromCols.forEach(function(col) {
        return _this.resizeTakeFromStartWidth += col.getActualWidth();
      });
      this.resizeTakeFromRatios = [];
      this.resizeTakeFromCols.forEach(function(col) {
        return _this.resizeTakeFromRatios.push(col.getActualWidth() / _this.resizeTakeFromStartWidth);
      });
    } else {
      this.resizeTakeFromCols = null;
      this.resizeTakeFromStartWidth = null;
      this.resizeTakeFromRatios = null;
    }
    this.comp.addOrRemoveCssClass("ag-column-resizing", true);
  };
  GroupResizeFeature2.prototype.onResizing = function(finished, resizeAmount) {
    var resizeAmountNormalised = this.normaliseDragChange(resizeAmount);
    var width = this.resizeStartWidth + resizeAmountNormalised;
    this.resizeColumns(width, finished);
  };
  GroupResizeFeature2.prototype.resizeLeafColumnsToFit = function() {
    var preferredSize = this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);
    this.calculateInitialValues();
    if (preferredSize > this.resizeStartWidth) {
      this.resizeColumns(preferredSize, true);
    }
  };
  GroupResizeFeature2.prototype.resizeColumns = function(totalWidth, finished) {
    if (finished === void 0) {
      finished = true;
    }
    var resizeSets = [];
    resizeSets.push({
      columns: this.resizeCols,
      ratios: this.resizeRatios,
      width: totalWidth
    });
    if (this.resizeTakeFromCols) {
      var diff = totalWidth - this.resizeStartWidth;
      resizeSets.push({
        columns: this.resizeTakeFromCols,
        ratios: this.resizeTakeFromRatios,
        width: this.resizeTakeFromStartWidth - diff
      });
    }
    this.columnModel.resizeColumnSets({
      resizeSets,
      finished,
      source: "uiColumnDragged"
    });
    if (finished) {
      this.comp.addOrRemoveCssClass("ag-column-resizing", false);
    }
  };
  GroupResizeFeature2.prototype.calculateInitialValues = function() {
    var _this = this;
    var leafCols = this.columnGroup.getDisplayedLeafColumns();
    this.resizeCols = leafCols.filter(function(col) {
      return col.isResizable();
    });
    this.resizeStartWidth = 0;
    this.resizeCols.forEach(function(col) {
      return _this.resizeStartWidth += col.getActualWidth();
    });
    this.resizeRatios = [];
    this.resizeCols.forEach(function(col) {
      return _this.resizeRatios.push(col.getActualWidth() / _this.resizeStartWidth);
    });
  };
  GroupResizeFeature2.prototype.normaliseDragChange = function(dragChange) {
    var result = dragChange;
    if (this.gridOptionsWrapper.isEnableRtl()) {
      if (this.pinned !== Constants.PINNED_LEFT) {
        result *= -1;
      }
    } else if (this.pinned === Constants.PINNED_RIGHT) {
      result *= -1;
    }
    return result;
  };
  __decorate$1k([
    Autowired("horizontalResizeService")
  ], GroupResizeFeature2.prototype, "horizontalResizeService", void 0);
  __decorate$1k([
    Autowired("autoWidthCalculator")
  ], GroupResizeFeature2.prototype, "autoWidthCalculator", void 0);
  __decorate$1k([
    Autowired("columnModel")
  ], GroupResizeFeature2.prototype, "columnModel", void 0);
  __decorate$1k([
    PostConstruct
  ], GroupResizeFeature2.prototype, "postConstruct", null);
  return GroupResizeFeature2;
}(BeanStub);
var __extends$1q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1j = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GroupWidthFeature = function(_super) {
  __extends$1q(GroupWidthFeature2, _super);
  function GroupWidthFeature2(comp, columnGroup) {
    var _this = _super.call(this) || this;
    _this.removeChildListenersFuncs = [];
    _this.columnGroup = columnGroup;
    _this.comp = comp;
    return _this;
  }
  GroupWidthFeature2.prototype.postConstruct = function() {
    this.addListenersToChildrenColumns();
    this.addManagedListener(this.columnGroup, ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED, this.onDisplayedChildrenChanged.bind(this));
    this.onWidthChanged();
    this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this));
  };
  GroupWidthFeature2.prototype.addListenersToChildrenColumns = function() {
    var _this = this;
    this.removeListenersOnChildrenColumns();
    var widthChangedListener = this.onWidthChanged.bind(this);
    this.columnGroup.getLeafColumns().forEach(function(column) {
      column.addEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
      column.addEventListener(Column.EVENT_VISIBLE_CHANGED, widthChangedListener);
      _this.removeChildListenersFuncs.push(function() {
        column.removeEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
        column.removeEventListener(Column.EVENT_VISIBLE_CHANGED, widthChangedListener);
      });
    });
  };
  GroupWidthFeature2.prototype.removeListenersOnChildrenColumns = function() {
    this.removeChildListenersFuncs.forEach(function(func) {
      return func();
    });
    this.removeChildListenersFuncs = [];
  };
  GroupWidthFeature2.prototype.onDisplayedChildrenChanged = function() {
    this.addListenersToChildrenColumns();
    this.onWidthChanged();
  };
  GroupWidthFeature2.prototype.onWidthChanged = function() {
    this.comp.setWidth(this.columnGroup.getActualWidth() + "px");
  };
  __decorate$1j([
    PostConstruct
  ], GroupWidthFeature2.prototype, "postConstruct", null);
  return GroupWidthFeature2;
}(BeanStub);
var __extends$1p = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1i = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderGroupCellCtrl = function(_super) {
  __extends$1p(HeaderGroupCellCtrl2, _super);
  function HeaderGroupCellCtrl2(columnGroup, parentRowCtrl) {
    var _this = _super.call(this, columnGroup, parentRowCtrl) || this;
    _this.columnGroup = columnGroup;
    return _this;
  }
  HeaderGroupCellCtrl2.prototype.setComp = function(comp, eGui, eResize) {
    _super.prototype.setGui.call(this, eGui);
    this.comp = comp;
    this.displayName = this.columnModel.getDisplayNameForColumnGroup(this.columnGroup, "header");
    this.addClasses();
    this.addAttributes();
    this.setupMovingCss();
    this.setupExpandable();
    this.setupTooltip();
    this.setupUserComp();
    var pinned = this.getParentRowCtrl().getPinned();
    var leafCols = this.columnGroup.getProvidedColumnGroup().getLeafColumns();
    this.createManagedBean(new HoverFeature(leafCols, eGui));
    this.createManagedBean(new SetLeftFeature(this.columnGroup, eGui, this.beans));
    this.createManagedBean(new GroupWidthFeature(comp, this.columnGroup));
    this.groupResizeFeature = this.createManagedBean(new GroupResizeFeature(comp, eResize, pinned, this.columnGroup));
    this.createManagedBean(new ManagedFocusFeature(eGui, {
      shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),
      onTabKeyDown: function() {
        return void 0;
      },
      handleKeyDown: this.handleKeyDown.bind(this),
      onFocusIn: this.onFocusIn.bind(this)
    }));
  };
  HeaderGroupCellCtrl2.prototype.resizeLeafColumnsToFit = function() {
    this.groupResizeFeature.onResizeStart(false);
    this.groupResizeFeature.resizeLeafColumnsToFit();
  };
  HeaderGroupCellCtrl2.prototype.setupUserComp = function() {
    var _this = this;
    var displayName = this.displayName;
    var params = {
      displayName: this.displayName,
      columnGroup: this.columnGroup,
      setExpanded: function(expanded) {
        _this.columnModel.setColumnGroupOpened(_this.columnGroup.getProvidedColumnGroup(), expanded, "gridInitializing");
      },
      api: this.gridApi,
      columnApi: this.columnApi,
      context: this.gridOptionsWrapper.getContext()
    };
    if (!displayName) {
      var columnGroup = this.columnGroup;
      var leafCols = columnGroup.getLeafColumns();
      while (columnGroup.getParent() && columnGroup.getParent().getLeafColumns().length === leafCols.length) {
        columnGroup = columnGroup.getParent();
      }
      var colGroupDef = columnGroup.getColGroupDef();
      if (colGroupDef) {
        displayName = colGroupDef.headerName;
      }
      if (!displayName) {
        displayName = leafCols ? this.columnModel.getDisplayNameForColumn(leafCols[0], "header", true) : "";
      }
    }
    var compDetails = this.userComponentFactory.getHeaderGroupCompDetails(params);
    this.comp.setUserCompDetails(compDetails);
  };
  HeaderGroupCellCtrl2.prototype.setupTooltip = function() {
    var _this = this;
    var colGroupDef = this.columnGroup.getColGroupDef();
    var tooltipCtrl = {
      getColumn: function() {
        return _this.columnGroup;
      },
      getGui: function() {
        return _this.eGui;
      },
      getLocation: function() {
        return "headerGroup";
      },
      getTooltipValue: function() {
        return colGroupDef && colGroupDef.headerTooltip;
      }
    };
    if (colGroupDef) {
      tooltipCtrl.getColDef = function() {
        return colGroupDef;
      };
    }
    var tooltipFeature = this.createManagedBean(new TooltipFeature(tooltipCtrl, this.beans));
    tooltipFeature.setComp(this.comp);
  };
  HeaderGroupCellCtrl2.prototype.setupExpandable = function() {
    var providedColGroup = this.columnGroup.getProvidedColumnGroup();
    this.refreshExpanded();
    this.addManagedListener(providedColGroup, ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED, this.refreshExpanded.bind(this));
    this.addManagedListener(providedColGroup, ProvidedColumnGroup.EVENT_EXPANDED_CHANGED, this.refreshExpanded.bind(this));
  };
  HeaderGroupCellCtrl2.prototype.refreshExpanded = function() {
    var column = this.columnGroup;
    this.expandable = column.isExpandable();
    var expanded = column.isExpanded();
    if (this.expandable) {
      this.comp.setAriaExpanded(expanded ? "true" : "false");
    } else {
      this.comp.setAriaExpanded(void 0);
    }
  };
  HeaderGroupCellCtrl2.prototype.addAttributes = function() {
    this.comp.setColId(this.columnGroup.getUniqueId());
  };
  HeaderGroupCellCtrl2.prototype.addClasses = function() {
    var _this = this;
    var colGroupDef = this.columnGroup.getColGroupDef();
    var classes = CssClassApplier.getHeaderClassesFromColDef(colGroupDef, this.gridOptionsWrapper, null, this.columnGroup);
    classes.push(this.columnGroup.isPadding() ? "ag-header-group-cell-no-group" : "ag-header-group-cell-with-group");
    classes.forEach(function(c2) {
      return _this.comp.addOrRemoveCssClass(c2, true);
    });
  };
  HeaderGroupCellCtrl2.prototype.setupMovingCss = function() {
    var _this = this;
    var providedColumnGroup = this.columnGroup.getProvidedColumnGroup();
    var leafColumns = providedColumnGroup.getLeafColumns();
    var listener = function() {
      return _this.comp.addOrRemoveCssClass("ag-header-cell-moving", _this.columnGroup.isMoving());
    };
    leafColumns.forEach(function(col) {
      _this.addManagedListener(col, Column.EVENT_MOVING_CHANGED, listener);
    });
    listener();
  };
  HeaderGroupCellCtrl2.prototype.onFocusIn = function(e2) {
    if (!this.eGui.contains(e2.relatedTarget)) {
      var rowIndex = this.getRowIndex();
      this.beans.focusService.setFocusedHeader(rowIndex, this.columnGroup);
    }
  };
  HeaderGroupCellCtrl2.prototype.handleKeyDown = function(e2) {
    _super.prototype.handleKeyDown.call(this, e2);
    var wrapperHasFocus = this.getWrapperHasFocus();
    if (!this.expandable || !wrapperHasFocus) {
      return;
    }
    if (e2.key === KeyCode.ENTER) {
      var column = this.columnGroup;
      var newExpandedValue = !column.isExpanded();
      this.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(), newExpandedValue, "uiColumnExpanded");
    }
  };
  HeaderGroupCellCtrl2.prototype.setDragSource = function(eHeaderGroup) {
    var _this = this;
    if (this.isSuppressMoving()) {
      return;
    }
    var allLeafColumns = this.columnGroup.getProvidedColumnGroup().getLeafColumns();
    var hideColumnOnExit = !this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns();
    var dragSource = {
      type: DragSourceType.HeaderCell,
      eElement: eHeaderGroup,
      defaultIconName: hideColumnOnExit ? DragAndDropService.ICON_HIDE : DragAndDropService.ICON_NOT_ALLOWED,
      dragItemName: this.displayName,
      getDragItem: this.getDragItemForGroup.bind(this),
      onDragStarted: function() {
        return allLeafColumns.forEach(function(col) {
          return col.setMoving(true, "uiColumnDragged");
        });
      },
      onDragStopped: function() {
        return allLeafColumns.forEach(function(col) {
          return col.setMoving(false, "uiColumnDragged");
        });
      },
      onGridEnter: function(dragItem) {
        var _a2, _b;
        if (hideColumnOnExit) {
          var unlockedColumns = ((_b = (_a2 = dragItem) === null || _a2 === void 0 ? void 0 : _a2.columns) === null || _b === void 0 ? void 0 : _b.filter(function(col) {
            return !col.getColDef().lockVisible;
          })) || [];
          _this.columnModel.setColumnsVisible(unlockedColumns, true, "uiColumnMoved");
        }
      },
      onGridExit: function(dragItem) {
        var _a2, _b;
        if (hideColumnOnExit) {
          var unlockedColumns = ((_b = (_a2 = dragItem) === null || _a2 === void 0 ? void 0 : _a2.columns) === null || _b === void 0 ? void 0 : _b.filter(function(col) {
            return !col.getColDef().lockVisible;
          })) || [];
          _this.columnModel.setColumnsVisible(unlockedColumns, false, "uiColumnMoved");
        }
      }
    };
    this.dragAndDropService.addDragSource(dragSource, true);
    this.addDestroyFunc(function() {
      return _this.dragAndDropService.removeDragSource(dragSource);
    });
  };
  HeaderGroupCellCtrl2.prototype.getDragItemForGroup = function() {
    var allColumnsOriginalOrder = this.columnGroup.getProvidedColumnGroup().getLeafColumns();
    var visibleState = {};
    allColumnsOriginalOrder.forEach(function(column) {
      return visibleState[column.getId()] = column.isVisible();
    });
    var allColumnsCurrentOrder = [];
    this.columnModel.getAllDisplayedColumns().forEach(function(column) {
      if (allColumnsOriginalOrder.indexOf(column) >= 0) {
        allColumnsCurrentOrder.push(column);
        removeFromArray(allColumnsOriginalOrder, column);
      }
    });
    allColumnsOriginalOrder.forEach(function(column) {
      return allColumnsCurrentOrder.push(column);
    });
    return {
      columns: allColumnsCurrentOrder,
      visibleState
    };
  };
  HeaderGroupCellCtrl2.prototype.isSuppressMoving = function() {
    var childSuppressesMoving = false;
    this.columnGroup.getLeafColumns().forEach(function(column) {
      if (column.getColDef().suppressMovable || column.getColDef().lockPosition) {
        childSuppressesMoving = true;
      }
    });
    var result = childSuppressesMoving || this.gridOptionsWrapper.isSuppressMovableColumns();
    return result;
  };
  __decorate$1i([
    Autowired("columnModel")
  ], HeaderGroupCellCtrl2.prototype, "columnModel", void 0);
  __decorate$1i([
    Autowired("dragAndDropService")
  ], HeaderGroupCellCtrl2.prototype, "dragAndDropService", void 0);
  __decorate$1i([
    Autowired("gridApi")
  ], HeaderGroupCellCtrl2.prototype, "gridApi", void 0);
  __decorate$1i([
    Autowired("columnApi")
  ], HeaderGroupCellCtrl2.prototype, "columnApi", void 0);
  return HeaderGroupCellCtrl2;
}(AbstractHeaderCellCtrl);
var __extends$1o = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1h = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var instanceIdSequence = 0;
var HeaderRowCtrl = function(_super) {
  __extends$1o(HeaderRowCtrl2, _super);
  function HeaderRowCtrl2(rowIndex, pinned, type) {
    var _this = _super.call(this) || this;
    _this.instanceId = instanceIdSequence++;
    _this.headerCellCtrls = {};
    _this.rowIndex = rowIndex;
    _this.pinned = pinned;
    _this.type = type;
    return _this;
  }
  HeaderRowCtrl2.prototype.getInstanceId = function() {
    return this.instanceId;
  };
  HeaderRowCtrl2.prototype.setComp = function(comp) {
    this.comp = comp;
    this.onRowHeightChanged();
    this.onVirtualColumnsChanged();
    this.setWidth();
    this.addEventListeners();
    if (isBrowserSafari()) {
      this.comp.setTransform("translateZ(0)");
    }
    comp.setAriaRowIndex(this.rowIndex + 1);
  };
  HeaderRowCtrl2.prototype.addEventListeners = function() {
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_RESIZED, this.onColumnResized.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onDisplayedColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, this.onRowHeightChanged.bind(this));
  };
  HeaderRowCtrl2.prototype.getHeaderCellCtrl = function(column) {
    return values(this.headerCellCtrls).find(function(cellCtrl) {
      return cellCtrl.getColumnGroupChild() === column;
    });
  };
  HeaderRowCtrl2.prototype.onDisplayedColumnsChanged = function() {
    this.onVirtualColumnsChanged();
    this.setWidth();
    this.onRowHeightChanged();
  };
  HeaderRowCtrl2.prototype.getType = function() {
    return this.type;
  };
  HeaderRowCtrl2.prototype.onColumnResized = function() {
    this.setWidth();
  };
  HeaderRowCtrl2.prototype.setWidth = function() {
    var width = this.getWidthForRow();
    this.comp.setWidth(width + "px");
  };
  HeaderRowCtrl2.prototype.getWidthForRow = function() {
    var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    if (printLayout) {
      var pinned = this.pinned != null;
      if (pinned) {
        return 0;
      }
      return this.columnModel.getContainerWidth(Constants.PINNED_RIGHT) + this.columnModel.getContainerWidth(Constants.PINNED_LEFT) + this.columnModel.getContainerWidth(null);
    }
    return this.columnModel.getContainerWidth(this.pinned);
  };
  HeaderRowCtrl2.prototype.onRowHeightChanged = function() {
    var headerRowCount = this.columnModel.getHeaderRowCount();
    var sizes = [];
    var numberOfFloating = 0;
    if (this.columnModel.hasFloatingFilters()) {
      headerRowCount++;
      numberOfFloating = 1;
    }
    var groupHeight = this.columnModel.getColumnGroupHeaderRowHeight();
    var headerHeight = this.columnModel.getColumnHeaderRowHeight();
    var numberOfNonGroups = 1 + numberOfFloating;
    var numberOfGroups = headerRowCount - numberOfNonGroups;
    for (var i2 = 0; i2 < numberOfGroups; i2++) {
      sizes.push(groupHeight);
    }
    sizes.push(headerHeight);
    for (var i2 = 0; i2 < numberOfFloating; i2++) {
      sizes.push(this.gridOptionsWrapper.getFloatingFiltersHeight());
    }
    var topOffset = 0;
    for (var i2 = 0; i2 < this.rowIndex; i2++) {
      topOffset += sizes[i2];
    }
    var thisRowHeight = sizes[this.rowIndex] + "px";
    this.comp.setTop(topOffset + "px");
    this.comp.setHeight(thisRowHeight);
  };
  HeaderRowCtrl2.prototype.getPinned = function() {
    return this.pinned;
  };
  HeaderRowCtrl2.prototype.getRowIndex = function() {
    return this.rowIndex;
  };
  HeaderRowCtrl2.prototype.onVirtualColumnsChanged = function() {
    var _this = this;
    var oldCtrls = this.headerCellCtrls;
    this.headerCellCtrls = {};
    var columns = this.getColumnsInViewport();
    columns.forEach(function(child) {
      if (child.isEmptyGroup()) {
        return;
      }
      var idOfChild = child.getUniqueId();
      var headerCtrl = oldCtrls[idOfChild];
      delete oldCtrls[idOfChild];
      var forOldColumn = headerCtrl && headerCtrl.getColumnGroupChild() != child;
      if (forOldColumn) {
        _this.destroyBean(headerCtrl);
        headerCtrl = void 0;
      }
      if (headerCtrl == null) {
        switch (_this.type) {
          case HeaderRowType.FLOATING_FILTER:
            headerCtrl = _this.createBean(new HeaderFilterCellCtrl(child, _this));
            break;
          case HeaderRowType.COLUMN_GROUP:
            headerCtrl = _this.createBean(new HeaderGroupCellCtrl(child, _this));
            break;
          default:
            headerCtrl = _this.createBean(new HeaderCellCtrl(child, _this));
            break;
        }
      }
      _this.headerCellCtrls[idOfChild] = headerCtrl;
    });
    var isFocusedAndDisplayed = function(ctrl) {
      var isFocused = _this.focusService.isHeaderWrapperFocused(ctrl);
      if (!isFocused) {
        return false;
      }
      var isDisplayed = _this.columnModel.isDisplayed(ctrl.getColumnGroupChild());
      return isDisplayed;
    };
    iterateObject(oldCtrls, function(id, oldCtrl) {
      var keepCtrl = isFocusedAndDisplayed(oldCtrl);
      if (keepCtrl) {
        _this.headerCellCtrls[id] = oldCtrl;
      } else {
        _this.destroyBean(oldCtrl);
      }
    });
    var ctrlsToDisplay = getAllValuesInObject(this.headerCellCtrls);
    this.comp.setHeaderCtrls(ctrlsToDisplay);
  };
  HeaderRowCtrl2.prototype.destroyCtrls = function() {
    var _this = this;
    iterateObject(this.headerCellCtrls, function(key, ctrl) {
      _this.destroyBean(ctrl);
    });
    this.headerCellCtrls = {};
  };
  HeaderRowCtrl2.prototype.getColumnsInViewport = function() {
    var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    return printLayout ? this.getColumnsInViewportPrintLayout() : this.getColumnsInViewportNormalLayout();
  };
  HeaderRowCtrl2.prototype.getColumnsInViewportPrintLayout = function() {
    var _this = this;
    if (this.pinned != null) {
      return [];
    }
    var viewportColumns = [];
    var actualDepth = this.getActualDepth();
    [Constants.PINNED_LEFT, null, Constants.PINNED_RIGHT].forEach(function(pinned) {
      var items = _this.columnModel.getVirtualHeaderGroupRow(pinned, actualDepth);
      viewportColumns = viewportColumns.concat(items);
    });
    return viewportColumns;
  };
  HeaderRowCtrl2.prototype.getActualDepth = function() {
    return this.type == HeaderRowType.FLOATING_FILTER ? this.rowIndex - 1 : this.rowIndex;
  };
  HeaderRowCtrl2.prototype.getColumnsInViewportNormalLayout = function() {
    return this.columnModel.getVirtualHeaderGroupRow(this.pinned, this.getActualDepth());
  };
  HeaderRowCtrl2.prototype.focusHeader = function(column, event) {
    var allCtrls = getAllValuesInObject(this.headerCellCtrls);
    var ctrl = allCtrls.find(function(ctrl2) {
      return ctrl2.getColumnGroupChild() == column;
    });
    if (!ctrl) {
      return false;
    }
    ctrl.focus(event);
    return true;
  };
  __decorate$1h([
    Autowired("columnModel")
  ], HeaderRowCtrl2.prototype, "columnModel", void 0);
  __decorate$1h([
    Autowired("focusService")
  ], HeaderRowCtrl2.prototype, "focusService", void 0);
  __decorate$1h([
    PreDestroy
  ], HeaderRowCtrl2.prototype, "destroyCtrls", null);
  return HeaderRowCtrl2;
}(BeanStub);
var __extends$1n = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1g = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$b = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$9 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$b(arguments[i2]));
  return ar;
};
var HeaderRowContainerCtrl = function(_super) {
  __extends$1n(HeaderRowContainerCtrl2, _super);
  function HeaderRowContainerCtrl2(pinned) {
    var _this = _super.call(this) || this;
    _this.groupsRowCtrls = [];
    _this.pinned = pinned;
    return _this;
  }
  HeaderRowContainerCtrl2.prototype.setComp = function(comp, eGui) {
    this.comp = comp;
    this.eViewport = eGui;
    this.setupCenterWidth();
    this.setupPinnedWidth();
    this.setupDragAndDrop(this.eViewport);
    this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));
    this.addManagedListener(this.eViewport, "scroll", this.resetScrollLeft.bind(this));
    this.ctrlsService.registerHeaderContainer(this, this.pinned);
    if (this.columnModel.isReady()) {
      this.refresh();
    }
  };
  HeaderRowContainerCtrl2.prototype.setupDragAndDrop = function(dropContainer) {
    var bodyDropTarget = new BodyDropTarget(this.pinned, dropContainer);
    this.createManagedBean(bodyDropTarget);
  };
  HeaderRowContainerCtrl2.prototype.refresh = function(keepColumns) {
    var _this = this;
    if (keepColumns === void 0) {
      keepColumns = false;
    }
    var sequence = new NumberSequence();
    var focusedHeaderPosition = this.focusService.getFocusHeaderToUseAfterRefresh();
    var refreshColumnGroups = function() {
      var groupRowCount = _this.columnModel.getHeaderRowCount() - 1;
      _this.groupsRowCtrls = _this.destroyBeans(_this.groupsRowCtrls);
      for (var i2 = 0; i2 < groupRowCount; i2++) {
        var ctrl = _this.createBean(new HeaderRowCtrl(sequence.next(), _this.pinned, HeaderRowType.COLUMN_GROUP));
        _this.groupsRowCtrls.push(ctrl);
      }
    };
    var refreshColumns = function() {
      var rowIndex = sequence.next();
      var needNewInstance = _this.columnsRowCtrl == null || !keepColumns || _this.columnsRowCtrl.getRowIndex() !== rowIndex;
      if (needNewInstance) {
        _this.destroyBean(_this.columnsRowCtrl);
        _this.columnsRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.COLUMN));
      }
    };
    var refreshFilters = function() {
      var includeFloatingFilter = _this.columnModel.hasFloatingFilters();
      var destroyPreviousComp = function() {
        _this.filtersRowCtrl = _this.destroyBean(_this.filtersRowCtrl);
      };
      if (!includeFloatingFilter) {
        destroyPreviousComp();
        return;
      }
      var rowIndex = sequence.next();
      if (_this.filtersRowCtrl) {
        var rowIndexMismatch = _this.filtersRowCtrl.getRowIndex() !== rowIndex;
        if (!keepColumns || rowIndexMismatch) {
          destroyPreviousComp();
        }
      }
      if (!_this.filtersRowCtrl) {
        _this.filtersRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, HeaderRowType.FLOATING_FILTER));
      }
    };
    refreshColumnGroups();
    refreshColumns();
    refreshFilters();
    var allCtrls = this.getAllCtrls();
    this.comp.setCtrls(allCtrls);
    this.restoreFocusOnHeader(focusedHeaderPosition);
  };
  HeaderRowContainerCtrl2.prototype.restoreFocusOnHeader = function(position) {
    if (position == null || position.column.getPinned() != this.pinned) {
      return;
    }
    this.focusService.focusHeaderPosition({ headerPosition: position });
  };
  HeaderRowContainerCtrl2.prototype.getAllCtrls = function() {
    var res = __spread$9(this.groupsRowCtrls, [this.columnsRowCtrl]);
    if (this.filtersRowCtrl) {
      res.push(this.filtersRowCtrl);
    }
    return res;
  };
  HeaderRowContainerCtrl2.prototype.onGridColumnsChanged = function() {
    this.refresh(true);
  };
  HeaderRowContainerCtrl2.prototype.setupCenterWidth = function() {
    var _this = this;
    if (this.pinned != null) {
      return;
    }
    this.createManagedBean(new CenterWidthFeature(function(width) {
      return _this.comp.setCenterWidth(width + "px");
    }));
  };
  HeaderRowContainerCtrl2.prototype.setHorizontalScroll = function(offset) {
    this.comp.setContainerTransform("translateX(" + offset + "px)");
  };
  HeaderRowContainerCtrl2.prototype.resetScrollLeft = function() {
    this.eViewport.scrollLeft = 0;
  };
  HeaderRowContainerCtrl2.prototype.setupPinnedWidth = function() {
    var _this = this;
    if (this.pinned == null) {
      return;
    }
    var pinningLeft = this.pinned === Constants.PINNED_LEFT;
    var pinningRight = this.pinned === Constants.PINNED_RIGHT;
    var listener = function() {
      var width = pinningLeft ? _this.pinnedWidthService.getPinnedLeftWidth() : _this.pinnedWidthService.getPinnedRightWidth();
      if (width == null) {
        return;
      }
      var hidden = width == 0;
      var isRtl = _this.gridOptionsWrapper.isEnableRtl();
      var scrollbarWidth = _this.gridOptionsWrapper.getScrollbarWidth();
      var addPaddingForScrollbar = _this.scrollVisibleService.isVerticalScrollShowing() && (isRtl && pinningLeft || !isRtl && pinningRight);
      var widthWithPadding = addPaddingForScrollbar ? width + scrollbarWidth : width;
      _this.comp.setPinnedContainerWidth(widthWithPadding + "px");
      _this.comp.addOrRemoveCssClass("ag-hidden", hidden);
    };
    this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, listener);
  };
  HeaderRowContainerCtrl2.prototype.getHeaderCtrlForColumn = function(column) {
    if (column instanceof Column) {
      if (!this.columnsRowCtrl) {
        return;
      }
      return this.columnsRowCtrl.getHeaderCellCtrl(column);
    }
    if (this.groupsRowCtrls.length === 0) {
      return;
    }
    for (var i2 = 0; i2 < this.groupsRowCtrls.length; i2++) {
      var ctrl = this.groupsRowCtrls[i2].getHeaderCellCtrl(column);
      if (ctrl) {
        return ctrl;
      }
    }
  };
  HeaderRowContainerCtrl2.prototype.getHtmlElementForColumnHeader = function(column) {
    var cellCtrl = this.getHeaderCtrlForColumn(column);
    if (!cellCtrl) {
      return null;
    }
    return cellCtrl.getGui();
  };
  HeaderRowContainerCtrl2.prototype.getRowType = function(rowIndex) {
    var allCtrls = this.getAllCtrls();
    var ctrl = allCtrls[rowIndex];
    return ctrl ? ctrl.getType() : void 0;
  };
  HeaderRowContainerCtrl2.prototype.focusHeader = function(rowIndex, column, event) {
    var allCtrls = this.getAllCtrls();
    var ctrl = allCtrls[rowIndex];
    if (!ctrl) {
      return false;
    }
    return ctrl.focusHeader(column, event);
  };
  HeaderRowContainerCtrl2.prototype.getRowCount = function() {
    return this.getAllCtrls().length;
  };
  __decorate$1g([
    Autowired("ctrlsService")
  ], HeaderRowContainerCtrl2.prototype, "ctrlsService", void 0);
  __decorate$1g([
    Autowired("scrollVisibleService")
  ], HeaderRowContainerCtrl2.prototype, "scrollVisibleService", void 0);
  __decorate$1g([
    Autowired("pinnedWidthService")
  ], HeaderRowContainerCtrl2.prototype, "pinnedWidthService", void 0);
  __decorate$1g([
    Autowired("columnModel")
  ], HeaderRowContainerCtrl2.prototype, "columnModel", void 0);
  __decorate$1g([
    Autowired("focusService")
  ], HeaderRowContainerCtrl2.prototype, "focusService", void 0);
  return HeaderRowContainerCtrl2;
}(BeanStub);
var __extends$1m = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1f = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderRowContainerComp = function(_super) {
  __extends$1m(HeaderRowContainerComp2, _super);
  function HeaderRowContainerComp2(pinned) {
    var _this = _super.call(this) || this;
    _this.headerRowComps = {};
    _this.rowCompsList = [];
    _this.pinned = pinned;
    return _this;
  }
  HeaderRowContainerComp2.prototype.init = function() {
    var _this = this;
    this.selectAndSetTemplate();
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      setCtrls: function(ctrls) {
        return _this.setCtrls(ctrls);
      },
      setCenterWidth: function(width) {
        return _this.eCenterContainer.style.width = width;
      },
      setContainerTransform: function(transform) {
        return _this.eCenterContainer.style.transform = transform;
      },
      setPinnedContainerWidth: function(width) {
        var eGui = _this.getGui();
        eGui.style.width = width;
        eGui.style.maxWidth = width;
        eGui.style.minWidth = width;
      }
    };
    var ctrl = this.createManagedBean(new HeaderRowContainerCtrl(this.pinned));
    ctrl.setComp(compProxy, this.getGui());
  };
  HeaderRowContainerComp2.prototype.selectAndSetTemplate = function() {
    var pinnedLeft = this.pinned == Constants.PINNED_LEFT;
    var pinnedRight = this.pinned == Constants.PINNED_RIGHT;
    var template = pinnedLeft ? HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE : pinnedRight ? HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE : HeaderRowContainerComp2.CENTER_TEMPLATE;
    this.setTemplate(template);
    this.eRowContainer = this.eCenterContainer ? this.eCenterContainer : this.getGui();
  };
  HeaderRowContainerComp2.prototype.destroyRowComps = function() {
    this.setCtrls([]);
  };
  HeaderRowContainerComp2.prototype.destroyRowComp = function(rowComp) {
    this.destroyBean(rowComp);
    this.eRowContainer.removeChild(rowComp.getGui());
  };
  HeaderRowContainerComp2.prototype.setCtrls = function(ctrls) {
    var _this = this;
    var oldRowComps = this.headerRowComps;
    this.headerRowComps = {};
    this.rowCompsList = [];
    var prevGui;
    var appendEnsuringDomOrder = function(rowComp) {
      var eGui = rowComp.getGui();
      var notAlreadyIn = eGui.parentElement != _this.eRowContainer;
      if (notAlreadyIn) {
        _this.eRowContainer.appendChild(eGui);
      }
      if (prevGui) {
        ensureDomOrder(_this.eRowContainer, eGui, prevGui);
      }
      prevGui = eGui;
    };
    ctrls.forEach(function(ctrl) {
      var ctrlId = ctrl.getInstanceId();
      var existingComp = oldRowComps[ctrlId];
      delete oldRowComps[ctrlId];
      var rowComp = existingComp ? existingComp : _this.createBean(new HeaderRowComp(ctrl));
      _this.headerRowComps[ctrlId] = rowComp;
      _this.rowCompsList.push(rowComp);
      appendEnsuringDomOrder(rowComp);
    });
    getAllValuesInObject(oldRowComps).forEach(function(c2) {
      return _this.destroyRowComp(c2);
    });
  };
  HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE = '<div class="ag-pinned-left-header" role="presentation"/>';
  HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE = '<div class="ag-pinned-right-header" role="presentation"/>';
  HeaderRowContainerComp2.CENTER_TEMPLATE = '<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>';
  __decorate$1f([
    RefSelector("eCenterContainer")
  ], HeaderRowContainerComp2.prototype, "eCenterContainer", void 0);
  __decorate$1f([
    PostConstruct
  ], HeaderRowContainerComp2.prototype, "init", null);
  __decorate$1f([
    PreDestroy
  ], HeaderRowContainerComp2.prototype, "destroyRowComps", null);
  return HeaderRowContainerComp2;
}(Component);
var __extends$1l = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1e = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderNavigationDirection;
(function(HeaderNavigationDirection2) {
  HeaderNavigationDirection2[HeaderNavigationDirection2["UP"] = 0] = "UP";
  HeaderNavigationDirection2[HeaderNavigationDirection2["DOWN"] = 1] = "DOWN";
  HeaderNavigationDirection2[HeaderNavigationDirection2["LEFT"] = 2] = "LEFT";
  HeaderNavigationDirection2[HeaderNavigationDirection2["RIGHT"] = 3] = "RIGHT";
})(HeaderNavigationDirection || (HeaderNavigationDirection = {}));
var HeaderNavigationService = function(_super) {
  __extends$1l(HeaderNavigationService2, _super);
  function HeaderNavigationService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  HeaderNavigationService2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      _this.gridBodyCon = p.gridBodyCtrl;
    });
  };
  HeaderNavigationService2.prototype.getHeaderRowCount = function() {
    var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
    return centerHeaderContainer ? centerHeaderContainer.getRowCount() : 0;
  };
  HeaderNavigationService2.prototype.getHeaderRowType = function(rowIndex) {
    var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
    if (centerHeaderContainer) {
      return centerHeaderContainer.getRowType(rowIndex);
    }
  };
  HeaderNavigationService2.prototype.navigateVertically = function(direction, fromHeader, event) {
    if (!fromHeader) {
      fromHeader = this.focusService.getFocusedHeader();
    }
    if (!fromHeader) {
      return false;
    }
    var headerRowIndex = fromHeader.headerRowIndex, column = fromHeader.column;
    var rowLen = this.getHeaderRowCount();
    var isUp = direction === HeaderNavigationDirection.UP;
    var nextRow = isUp ? headerRowIndex - 1 : headerRowIndex + 1;
    var nextFocusColumn = null;
    var skipColumn = false;
    if (nextRow < 0) {
      nextRow = 0;
      nextFocusColumn = column;
      skipColumn = true;
    }
    if (nextRow >= rowLen) {
      nextRow = -1;
    }
    var currentRowType = this.getHeaderRowType(headerRowIndex);
    if (!skipColumn) {
      if (currentRowType === HeaderRowType.COLUMN_GROUP) {
        var currentColumn = column;
        nextFocusColumn = isUp ? column.getParent() : currentColumn.getDisplayedChildren()[0];
      } else if (currentRowType === HeaderRowType.FLOATING_FILTER) {
        nextFocusColumn = column;
      } else {
        var currentColumn = column;
        nextFocusColumn = isUp ? currentColumn.getParent() : currentColumn;
      }
      if (!nextFocusColumn) {
        return false;
      }
    }
    return this.focusService.focusHeaderPosition({
      headerPosition: { headerRowIndex: nextRow, column: nextFocusColumn },
      allowUserOverride: true,
      event
    });
  };
  HeaderNavigationService2.prototype.navigateHorizontally = function(direction, fromTab, event) {
    if (fromTab === void 0) {
      fromTab = false;
    }
    var focusedHeader = this.focusService.getFocusedHeader();
    var isLeft = direction === HeaderNavigationDirection.LEFT;
    var isRtl = this.gridOptionsWrapper.isEnableRtl();
    var nextHeader;
    var normalisedDirection;
    if (isLeft !== isRtl) {
      normalisedDirection = "Before";
      nextHeader = this.headerPositionUtils.findHeader(focusedHeader, normalisedDirection);
    } else {
      normalisedDirection = "After";
      nextHeader = this.headerPositionUtils.findHeader(focusedHeader, normalisedDirection);
    }
    if (nextHeader || !fromTab) {
      return this.focusService.focusHeaderPosition({
        headerPosition: nextHeader,
        direction: normalisedDirection,
        fromTab,
        allowUserOverride: true,
        event
      });
    }
    return this.focusNextHeaderRow(focusedHeader, normalisedDirection, event);
  };
  HeaderNavigationService2.prototype.focusNextHeaderRow = function(focusedHeader, direction, event) {
    var currentIndex = focusedHeader.headerRowIndex;
    var nextPosition = null;
    var nextRowIndex;
    if (direction === "Before") {
      if (currentIndex > 0) {
        nextRowIndex = currentIndex - 1;
        nextPosition = this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex, "end");
      }
    } else {
      nextRowIndex = currentIndex + 1;
      nextPosition = this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex, "start");
    }
    return this.focusService.focusHeaderPosition({
      headerPosition: nextPosition,
      direction,
      fromTab: true,
      allowUserOverride: true,
      event
    });
  };
  HeaderNavigationService2.prototype.scrollToColumn = function(column, direction) {
    if (direction === void 0) {
      direction = "After";
    }
    if (column.getPinned()) {
      return;
    }
    var columnToScrollTo;
    if (column instanceof ColumnGroup) {
      var columns = column.getDisplayedLeafColumns();
      columnToScrollTo = direction === "Before" ? last(columns) : columns[0];
    } else {
      columnToScrollTo = column;
    }
    this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo);
  };
  __decorate$1e([
    Autowired("focusService")
  ], HeaderNavigationService2.prototype, "focusService", void 0);
  __decorate$1e([
    Autowired("headerPositionUtils")
  ], HeaderNavigationService2.prototype, "headerPositionUtils", void 0);
  __decorate$1e([
    Autowired("animationFrameService")
  ], HeaderNavigationService2.prototype, "animationFrameService", void 0);
  __decorate$1e([
    Autowired("ctrlsService")
  ], HeaderNavigationService2.prototype, "ctrlsService", void 0);
  __decorate$1e([
    PostConstruct
  ], HeaderNavigationService2.prototype, "postConstruct", null);
  HeaderNavigationService2 = __decorate$1e([
    Bean("headerNavigationService")
  ], HeaderNavigationService2);
  return HeaderNavigationService2;
}(BeanStub);
var __extends$1k = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1d = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GridHeaderCtrl = function(_super) {
  __extends$1k(GridHeaderCtrl2, _super);
  function GridHeaderCtrl2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  GridHeaderCtrl2.prototype.setComp = function(comp, eGui, eFocusableElement) {
    this.comp = comp;
    this.eGui = eGui;
    this.createManagedBean(new ManagedFocusFeature(eFocusableElement, {
      onTabKeyDown: this.onTabKeyDown.bind(this),
      handleKeyDown: this.handleKeyDown.bind(this),
      onFocusOut: this.onFocusOut.bind(this)
    }));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));
    this.onPivotModeChanged();
    this.setupHeaderHeight();
    this.ctrlsService.registerGridHeaderCtrl(this);
  };
  GridHeaderCtrl2.prototype.setupHeaderHeight = function() {
    var listener = this.setHeaderHeight.bind(this);
    listener();
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_HEADER_HEIGHT, listener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, listener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, listener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, listener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, listener);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED, listener);
  };
  GridHeaderCtrl2.prototype.getHeaderHeight = function() {
    return this.headerHeight;
  };
  GridHeaderCtrl2.prototype.setHeaderHeight = function() {
    var _a2 = this, columnModel = _a2.columnModel, gridOptionsWrapper = _a2.gridOptionsWrapper;
    var numberOfFloating = 0;
    var headerRowCount = columnModel.getHeaderRowCount();
    var totalHeaderHeight;
    var hasFloatingFilters = columnModel.hasFloatingFilters();
    if (hasFloatingFilters) {
      headerRowCount++;
      numberOfFloating = 1;
    }
    var groupHeight = this.columnModel.getColumnGroupHeaderRowHeight();
    var headerHeight = this.columnModel.getColumnHeaderRowHeight();
    var numberOfNonGroups = 1 + numberOfFloating;
    var numberOfGroups = headerRowCount - numberOfNonGroups;
    totalHeaderHeight = numberOfFloating * gridOptionsWrapper.getFloatingFiltersHeight();
    totalHeaderHeight += numberOfGroups * groupHeight;
    totalHeaderHeight += headerHeight;
    if (this.headerHeight === totalHeaderHeight) {
      return;
    }
    this.headerHeight = totalHeaderHeight;
    var px = totalHeaderHeight + 1 + "px";
    this.comp.setHeightAndMinHeight(px);
    this.eventService.dispatchEvent({
      type: Events.EVENT_HEADER_HEIGHT_CHANGED
    });
  };
  GridHeaderCtrl2.prototype.onPivotModeChanged = function() {
    var pivotMode = this.columnModel.isPivotMode();
    this.comp.addOrRemoveCssClass("ag-pivot-on", pivotMode);
    this.comp.addOrRemoveCssClass("ag-pivot-off", !pivotMode);
  };
  GridHeaderCtrl2.prototype.onTabKeyDown = function(e2) {
    var isRtl = this.gridOptionsWrapper.isEnableRtl();
    var direction = e2.shiftKey !== isRtl ? HeaderNavigationDirection.LEFT : HeaderNavigationDirection.RIGHT;
    if (this.headerNavigationService.navigateHorizontally(direction, true, e2) || this.focusService.focusNextGridCoreContainer(e2.shiftKey)) {
      e2.preventDefault();
    }
  };
  GridHeaderCtrl2.prototype.handleKeyDown = function(e2) {
    var direction = null;
    switch (e2.key) {
      case KeyCode.LEFT:
        direction = HeaderNavigationDirection.LEFT;
      case KeyCode.RIGHT:
        if (!exists(direction)) {
          direction = HeaderNavigationDirection.RIGHT;
        }
        this.headerNavigationService.navigateHorizontally(direction, false, e2);
        break;
      case KeyCode.UP:
        direction = HeaderNavigationDirection.UP;
      case KeyCode.DOWN:
        if (!exists(direction)) {
          direction = HeaderNavigationDirection.DOWN;
        }
        if (this.headerNavigationService.navigateVertically(direction, null, e2)) {
          e2.preventDefault();
        }
        break;
      default:
        return;
    }
  };
  GridHeaderCtrl2.prototype.onFocusOut = function(e2) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var relatedTarget = e2.relatedTarget;
    if (!relatedTarget && this.eGui.contains(eDocument.activeElement)) {
      return;
    }
    if (!this.eGui.contains(relatedTarget)) {
      this.focusService.clearFocusedHeader();
    }
  };
  __decorate$1d([
    Autowired("headerNavigationService")
  ], GridHeaderCtrl2.prototype, "headerNavigationService", void 0);
  __decorate$1d([
    Autowired("focusService")
  ], GridHeaderCtrl2.prototype, "focusService", void 0);
  __decorate$1d([
    Autowired("columnModel")
  ], GridHeaderCtrl2.prototype, "columnModel", void 0);
  __decorate$1d([
    Autowired("ctrlsService")
  ], GridHeaderCtrl2.prototype, "ctrlsService", void 0);
  return GridHeaderCtrl2;
}(BeanStub);
var __extends$1j = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1c = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GridHeaderComp = function(_super) {
  __extends$1j(GridHeaderComp2, _super);
  function GridHeaderComp2() {
    return _super.call(this, GridHeaderComp2.TEMPLATE) || this;
  }
  GridHeaderComp2.prototype.postConstruct = function() {
    var _this = this;
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      setHeightAndMinHeight: function(height) {
        _this.getGui().style.height = height;
        _this.getGui().style.minHeight = height;
      }
    };
    var ctrl = this.createManagedBean(new GridHeaderCtrl());
    ctrl.setComp(compProxy, this.getGui(), this.getFocusableElement());
    var addContainer = function(container) {
      _this.createManagedBean(container);
      _this.appendChild(container);
    };
    addContainer(new HeaderRowContainerComp(Constants.PINNED_LEFT));
    addContainer(new HeaderRowContainerComp(null));
    addContainer(new HeaderRowContainerComp(Constants.PINNED_RIGHT));
  };
  GridHeaderComp2.TEMPLATE = '<div class="ag-header" role="presentation"/>';
  __decorate$1c([
    PostConstruct
  ], GridHeaderComp2.prototype, "postConstruct", null);
  return GridHeaderComp2;
}(Component);
var __extends$1i = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1b = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HorizontalResizeService = function(_super) {
  __extends$1i(HorizontalResizeService2, _super);
  function HorizontalResizeService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  HorizontalResizeService2.prototype.addResizeBar = function(params) {
    var _this = this;
    var dragSource = {
      dragStartPixels: params.dragStartPixels || 0,
      eElement: params.eResizeBar,
      onDragStart: this.onDragStart.bind(this, params),
      onDragStop: this.onDragStop.bind(this, params),
      onDragging: this.onDragging.bind(this, params)
    };
    this.dragService.addDragSource(dragSource, true);
    var finishedWithResizeFunc = function() {
      return _this.dragService.removeDragSource(dragSource);
    };
    return finishedWithResizeFunc;
  };
  HorizontalResizeService2.prototype.onDragStart = function(params, mouseEvent) {
    this.dragStartX = mouseEvent.clientX;
    this.setResizeIcons();
    var shiftKey = mouseEvent instanceof MouseEvent && mouseEvent.shiftKey === true;
    params.onResizeStart(shiftKey);
  };
  HorizontalResizeService2.prototype.setResizeIcons = function() {
    var ctrl = this.ctrlsService.getGridCtrl();
    ctrl.setResizeCursor(true);
    ctrl.disableUserSelect(true);
  };
  HorizontalResizeService2.prototype.onDragStop = function(params, mouseEvent) {
    params.onResizeEnd(this.resizeAmount);
    this.resetIcons();
  };
  HorizontalResizeService2.prototype.resetIcons = function() {
    var ctrl = this.ctrlsService.getGridCtrl();
    ctrl.setResizeCursor(false);
    ctrl.disableUserSelect(false);
  };
  HorizontalResizeService2.prototype.onDragging = function(params, mouseEvent) {
    this.resizeAmount = mouseEvent.clientX - this.dragStartX;
    params.onResizing(this.resizeAmount);
  };
  __decorate$1b([
    Autowired("dragService")
  ], HorizontalResizeService2.prototype, "dragService", void 0);
  __decorate$1b([
    Autowired("ctrlsService")
  ], HorizontalResizeService2.prototype, "ctrlsService", void 0);
  HorizontalResizeService2 = __decorate$1b([
    Bean("horizontalResizeService")
  ], HorizontalResizeService2);
  return HorizontalResizeService2;
}(BeanStub);
var __extends$1h = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1a = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var StandardMenuFactory = function(_super) {
  __extends$1h(StandardMenuFactory2, _super);
  function StandardMenuFactory2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  StandardMenuFactory2.prototype.hideActiveMenu = function() {
    if (this.hidePopup) {
      this.hidePopup();
    }
  };
  StandardMenuFactory2.prototype.showMenuAfterMouseEvent = function(column, mouseEvent) {
    var _this = this;
    this.showPopup(column, function(eMenu) {
      _this.popupService.positionPopupUnderMouseEvent({
        column,
        type: "columnMenu",
        mouseEvent,
        ePopup: eMenu
      });
    }, mouseEvent.target);
  };
  StandardMenuFactory2.prototype.showMenuAfterButtonClick = function(column, eventSource, containerType) {
    var _this = this;
    this.showPopup(column, function(eMenu) {
      _this.popupService.positionPopupUnderComponent({
        type: containerType,
        eventSource,
        ePopup: eMenu,
        keepWithinBounds: true,
        column
      });
    }, eventSource);
  };
  StandardMenuFactory2.prototype.showPopup = function(column, positionCallback, eventSource) {
    var _this = this;
    var filterWrapper = this.filterManager.getOrCreateFilterWrapper(column, "COLUMN_MENU");
    if (!filterWrapper) {
      throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");
    }
    var eMenu = document.createElement("div");
    setAriaRole(eMenu, "presentation");
    eMenu.classList.add("ag-menu");
    this.tabListener = this.addManagedListener(eMenu, "keydown", function(e2) {
      return _this.trapFocusWithin(e2, eMenu);
    });
    filterWrapper.guiPromise.then(function(gui) {
      return eMenu.appendChild(gui);
    });
    var hidePopup;
    var anchorToElement = eventSource || this.ctrlsService.getGridBodyCtrl().getGui();
    var closedCallback = function(e2) {
      column.setMenuVisible(false, "contextMenu");
      var isKeyboardEvent = e2 instanceof KeyboardEvent;
      if (_this.tabListener) {
        _this.tabListener = _this.tabListener();
      }
      if (isKeyboardEvent && eventSource && isVisible(eventSource)) {
        var focusableEl = _this.focusService.findTabbableParent(eventSource);
        if (focusableEl) {
          focusableEl.focus();
        }
      }
    };
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = this.popupService.addPopup({
      modal: true,
      eChild: eMenu,
      closeOnEsc: true,
      closedCallback,
      positionCallback: function() {
        return positionCallback(eMenu);
      },
      anchorToElement,
      ariaLabel: translate2("ariaLabelColumnMenu", "Column Menu")
    });
    if (addPopupRes) {
      this.hidePopup = hidePopup = addPopupRes.hideFunc;
    }
    filterWrapper.filterPromise.then(function(filter) {
      positionCallback(eMenu);
      if (filter.afterGuiAttached) {
        filter.afterGuiAttached({ container: "columnMenu", hidePopup });
      }
    });
    column.setMenuVisible(true, "contextMenu");
  };
  StandardMenuFactory2.prototype.trapFocusWithin = function(e2, menu) {
    if (e2.key !== KeyCode.TAB || e2.defaultPrevented || this.focusService.findNextFocusableElement(menu, false, e2.shiftKey)) {
      return;
    }
    e2.preventDefault();
    this.focusService.focusInto(menu, e2.shiftKey);
  };
  StandardMenuFactory2.prototype.isMenuEnabled = function(column) {
    return column.isFilterAllowed();
  };
  __decorate$1a([
    Autowired("filterManager")
  ], StandardMenuFactory2.prototype, "filterManager", void 0);
  __decorate$1a([
    Autowired("popupService")
  ], StandardMenuFactory2.prototype, "popupService", void 0);
  __decorate$1a([
    Autowired("focusService")
  ], StandardMenuFactory2.prototype, "focusService", void 0);
  __decorate$1a([
    Autowired("ctrlsService")
  ], StandardMenuFactory2.prototype, "ctrlsService", void 0);
  StandardMenuFactory2 = __decorate$1a([
    Bean("menuFactory")
  ], StandardMenuFactory2);
  return StandardMenuFactory2;
}(BeanStub);
var __extends$1g = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$19 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
(function(_super) {
  __extends$1g(TabbedLayout, _super);
  function TabbedLayout(params) {
    var _this = _super.call(this, TabbedLayout.getTemplate(params.cssClass)) || this;
    _this.items = [];
    _this.tabbedItemScrollMap = /* @__PURE__ */ new Map();
    _this.params = params;
    if (params.items) {
      params.items.forEach(function(item) {
        return _this.addItem(item);
      });
    }
    return _this;
  }
  TabbedLayout.prototype.postConstruct = function() {
    this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {
      onTabKeyDown: this.onTabKeyDown.bind(this),
      handleKeyDown: this.handleKeyDown.bind(this)
    }));
  };
  TabbedLayout.getTemplate = function(cssClass) {
    return '<div class="ag-tabs ' + cssClass + '">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header ' + (cssClass ? cssClass + "-header" : "") + '"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body ' + (cssClass ? cssClass + "-body" : "") + '"></div>\n        </div>';
  };
  TabbedLayout.prototype.handleKeyDown = function(e2) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    switch (e2.key) {
      case KeyCode.RIGHT:
      case KeyCode.LEFT:
        if (!this.eHeader.contains(eDocument.activeElement)) {
          return;
        }
        var isRightKey = e2.key === KeyCode.RIGHT;
        var isRtl = this.gridOptionsWrapper.isEnableRtl();
        var currentPosition = this.items.indexOf(this.activeItem);
        var nextPosition = isRightKey !== isRtl ? Math.min(currentPosition + 1, this.items.length - 1) : Math.max(currentPosition - 1, 0);
        if (currentPosition === nextPosition) {
          return;
        }
        e2.preventDefault();
        var nextItem = this.items[nextPosition];
        this.showItemWrapper(nextItem);
        nextItem.eHeaderButton.focus();
        break;
      case KeyCode.UP:
      case KeyCode.DOWN:
        e2.stopPropagation();
        break;
    }
  };
  TabbedLayout.prototype.onTabKeyDown = function(e2) {
    if (e2.defaultPrevented) {
      return;
    }
    var _a2 = this, focusService = _a2.focusService, eHeader = _a2.eHeader, eBody = _a2.eBody, activeItem = _a2.activeItem;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var activeElement = eDocument.activeElement;
    e2.preventDefault();
    if (eHeader.contains(activeElement)) {
      focusService.focusInto(eBody, e2.shiftKey);
    } else {
      if (focusService.isFocusUnderManagedComponent(eBody)) {
        activeItem.eHeaderButton.focus();
      } else {
        var nextEl = focusService.findNextFocusableElement(eBody, false, e2.shiftKey);
        if (nextEl) {
          nextEl.focus();
        } else {
          activeItem.eHeaderButton.focus();
        }
      }
    }
  };
  TabbedLayout.prototype.setAfterAttachedParams = function(params) {
    this.afterAttachedParams = params;
  };
  TabbedLayout.prototype.showFirstItem = function() {
    if (this.items.length > 0) {
      this.showItemWrapper(this.items[0]);
    }
  };
  TabbedLayout.prototype.addItem = function(item) {
    var eHeaderButton = document.createElement("span");
    setAriaRole(eHeaderButton, "tab");
    eHeaderButton.setAttribute("tabIndex", "-1");
    eHeaderButton.appendChild(item.title);
    eHeaderButton.classList.add("ag-tab");
    this.eHeader.appendChild(eHeaderButton);
    setAriaLabel(eHeaderButton, item.titleLabel);
    var wrapper = {
      tabbedItem: item,
      eHeaderButton
    };
    this.items.push(wrapper);
    eHeaderButton.addEventListener("click", this.showItemWrapper.bind(this, wrapper));
  };
  TabbedLayout.prototype.showItem = function(tabbedItem) {
    var itemWrapper = this.items.find(function(wrapper) {
      return wrapper.tabbedItem === tabbedItem;
    });
    if (itemWrapper) {
      this.showItemWrapper(itemWrapper);
    }
  };
  TabbedLayout.prototype.showItemWrapper = function(wrapper) {
    var _this = this;
    var tabbedItem = wrapper.tabbedItem, eHeaderButton = wrapper.eHeaderButton;
    if (this.params.onItemClicked) {
      this.params.onItemClicked({ item: tabbedItem });
    }
    if (this.activeItem === wrapper) {
      callIfPresent(this.params.onActiveItemClicked);
      return;
    }
    if (this.lastScrollListener) {
      this.lastScrollListener = this.lastScrollListener();
    }
    clearElement(this.eBody);
    tabbedItem.bodyPromise.then(function(body) {
      _this.eBody.appendChild(body);
      var onlyUnmanaged = !_this.focusService.isKeyboardMode();
      _this.focusService.focusInto(_this.eBody, false, onlyUnmanaged);
      if (tabbedItem.afterAttachedCallback) {
        tabbedItem.afterAttachedCallback(_this.afterAttachedParams);
      }
      if (_this.params.keepScrollPosition) {
        var scrollableContainer_1 = tabbedItem.getScrollableContainer && tabbedItem.getScrollableContainer() || body;
        _this.lastScrollListener = _this.addManagedListener(scrollableContainer_1, "scroll", function() {
          _this.tabbedItemScrollMap.set(tabbedItem.name, scrollableContainer_1.scrollTop);
        });
        var scrollPosition_1 = _this.tabbedItemScrollMap.get(tabbedItem.name);
        if (scrollPosition_1 !== void 0) {
          setTimeout(function() {
            scrollableContainer_1.scrollTop = scrollPosition_1;
          }, 0);
        }
      }
    });
    if (this.activeItem) {
      this.activeItem.eHeaderButton.classList.remove("ag-tab-selected");
    }
    eHeaderButton.classList.add("ag-tab-selected");
    this.activeItem = wrapper;
  };
  __decorate$19([
    Autowired("focusService")
  ], TabbedLayout.prototype, "focusService", void 0);
  __decorate$19([
    RefSelector("eHeader")
  ], TabbedLayout.prototype, "eHeader", void 0);
  __decorate$19([
    RefSelector("eBody")
  ], TabbedLayout.prototype, "eBody", void 0);
  __decorate$19([
    PostConstruct
  ], TabbedLayout.prototype, "postConstruct", null);
  return TabbedLayout;
})(Component);
var __extends$1f = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$18 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var DEBOUNCE_DELAY = 50;
var ResizeObserverService = function(_super) {
  __extends$1f(ResizeObserverService2, _super);
  function ResizeObserverService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.polyfillFunctions = [];
    return _this;
  }
  ResizeObserverService2.prototype.observeResize = function(element, callback) {
    var _this = this;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var win = eDocument.defaultView || window;
    var debouncedCallback = debounce(callback, DEBOUNCE_DELAY);
    var useBrowserResizeObserver = function() {
      var resizeObserver = new win.ResizeObserver(debouncedCallback);
      resizeObserver.observe(element);
      return function() {
        return resizeObserver.disconnect();
      };
    };
    var usePolyfill = function() {
      var widthLastTime = offsetWidth(element);
      var heightLastTime = offsetHeight(element);
      var running = true;
      var periodicallyCheckWidthAndHeight = function() {
        if (running) {
          var newWidth = offsetWidth(element);
          var newHeight = offsetHeight(element);
          var changed = newWidth !== widthLastTime || newHeight !== heightLastTime;
          if (changed) {
            widthLastTime = newWidth;
            heightLastTime = newHeight;
            callback();
          }
          _this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight);
        }
      };
      periodicallyCheckWidthAndHeight();
      return function() {
        return running = false;
      };
    };
    var suppressResize = this.gridOptionsWrapper.isSuppressBrowserResizeObserver();
    var resizeObserverExists = !!win.ResizeObserver;
    if (resizeObserverExists && !suppressResize) {
      return useBrowserResizeObserver();
    }
    return usePolyfill();
  };
  ResizeObserverService2.prototype.doNextPolyfillTurn = function(func) {
    this.polyfillFunctions.push(func);
    this.schedulePolyfill();
  };
  ResizeObserverService2.prototype.schedulePolyfill = function() {
    var _this = this;
    if (this.polyfillScheduled) {
      return;
    }
    var executeAllFuncs = function() {
      var funcs = _this.polyfillFunctions;
      _this.polyfillScheduled = false;
      _this.polyfillFunctions = [];
      funcs.forEach(function(f) {
        return f();
      });
    };
    this.polyfillScheduled = true;
    this.getFrameworkOverrides().setTimeout(executeAllFuncs, DEBOUNCE_DELAY);
  };
  ResizeObserverService2 = __decorate$18([
    Bean("resizeObserverService")
  ], ResizeObserverService2);
  return ResizeObserverService2;
}(BeanStub);
var __extends$1e = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$17 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AnimationFrameService = function(_super) {
  __extends$1e(AnimationFrameService2, _super);
  function AnimationFrameService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.createTasksP1 = { list: [], sorted: false };
    _this.createTasksP2 = { list: [], sorted: false };
    _this.destroyTasks = [];
    _this.ticking = false;
    _this.scrollGoingDown = true;
    _this.lastScrollTop = 0;
    _this.taskCount = 0;
    _this.cancelledTasks = /* @__PURE__ */ new Set();
    return _this;
  }
  AnimationFrameService2.prototype.setScrollTop = function(scrollTop) {
    this.scrollGoingDown = scrollTop > this.lastScrollTop;
    this.lastScrollTop = scrollTop;
  };
  AnimationFrameService2.prototype.init = function() {
    this.useAnimationFrame = !this.gridOptionsWrapper.isSuppressAnimationFrame();
  };
  AnimationFrameService2.prototype.isOn = function() {
    return this.useAnimationFrame;
  };
  AnimationFrameService2.prototype.verifyAnimationFrameOn = function(methodName) {
    if (this.useAnimationFrame === false) {
      console.warn("AG Grid: AnimationFrameService." + methodName + " called but animation frames are off");
    }
  };
  AnimationFrameService2.prototype.createTask = function(task, index, list) {
    this.verifyAnimationFrameOn(list);
    var taskItem = { task, index, createOrder: ++this.taskCount };
    this.addTaskToList(this[list], taskItem);
    this.schedule();
  };
  AnimationFrameService2.prototype.cancelTask = function(task) {
    this.cancelledTasks.add(task);
  };
  AnimationFrameService2.prototype.addTaskToList = function(taskList, task) {
    taskList.list.push(task);
    taskList.sorted = false;
  };
  AnimationFrameService2.prototype.sortTaskList = function(taskList) {
    if (taskList.sorted) {
      return;
    }
    var sortDirection = this.scrollGoingDown ? 1 : -1;
    taskList.list.sort(function(a3, b2) {
      return a3.index !== b2.index ? sortDirection * (b2.index - a3.index) : b2.createOrder - a3.createOrder;
    });
    taskList.sorted = true;
  };
  AnimationFrameService2.prototype.addDestroyTask = function(task) {
    this.verifyAnimationFrameOn("createTasksP3");
    this.destroyTasks.push(task);
    this.schedule();
  };
  AnimationFrameService2.prototype.executeFrame = function(millis) {
    this.verifyAnimationFrameOn("executeFrame");
    var p1TaskList = this.createTasksP1;
    var p1Tasks = p1TaskList.list;
    var p2TaskList = this.createTasksP2;
    var p2Tasks = p2TaskList.list;
    var destroyTasks = this.destroyTasks;
    var frameStart = new Date().getTime();
    var duration = new Date().getTime() - frameStart;
    var noMaxMillis = millis <= 0;
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    while (noMaxMillis || duration < millis) {
      var gridBodyDidSomething = gridBodyCon.getScrollFeature().executeAnimationFrameScroll();
      if (!gridBodyDidSomething) {
        var task = void 0;
        if (p1Tasks.length) {
          this.sortTaskList(p1TaskList);
          task = p1Tasks.pop().task;
        } else if (p2Tasks.length) {
          this.sortTaskList(p2TaskList);
          task = p2Tasks.pop().task;
        } else if (destroyTasks.length) {
          task = destroyTasks.pop();
        } else {
          this.cancelledTasks.clear();
          break;
        }
        if (!this.cancelledTasks.has(task)) {
          task();
        }
      }
      duration = new Date().getTime() - frameStart;
    }
    if (p1Tasks.length || p2Tasks.length || destroyTasks.length) {
      this.requestFrame();
    } else {
      this.stopTicking();
    }
  };
  AnimationFrameService2.prototype.stopTicking = function() {
    this.ticking = false;
  };
  AnimationFrameService2.prototype.flushAllFrames = function() {
    if (!this.useAnimationFrame) {
      return;
    }
    this.executeFrame(-1);
  };
  AnimationFrameService2.prototype.schedule = function() {
    if (!this.useAnimationFrame) {
      return;
    }
    if (!this.ticking) {
      this.ticking = true;
      this.requestFrame();
    }
  };
  AnimationFrameService2.prototype.requestFrame = function() {
    var callback = this.executeFrame.bind(this, 60);
    var eDocument = this.gridOptionsWrapper.getDocument();
    var win = eDocument.defaultView || window;
    if (win.requestAnimationFrame) {
      win.requestAnimationFrame(callback);
    } else if (win.webkitRequestAnimationFrame) {
      win.webkitRequestAnimationFrame(callback);
    } else {
      win.setTimeout(callback, 0);
    }
  };
  AnimationFrameService2.prototype.isQueueEmpty = function() {
    return !this.ticking;
  };
  AnimationFrameService2.prototype.debounce = function(func) {
    var _this = this;
    var pending = false;
    return function() {
      if (!_this.isOn()) {
        _this.getFrameworkOverrides().setTimeout(func, 0);
        return;
      }
      if (pending) {
        return;
      }
      pending = true;
      _this.addDestroyTask(function() {
        pending = false;
        func();
      });
    };
  };
  __decorate$17([
    Autowired("ctrlsService")
  ], AnimationFrameService2.prototype, "ctrlsService", void 0);
  __decorate$17([
    PostConstruct
  ], AnimationFrameService2.prototype, "init", null);
  AnimationFrameService2 = __decorate$17([
    Bean("animationFrameService")
  ], AnimationFrameService2);
  return AnimationFrameService2;
}(BeanStub);
var __extends$1d = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$16 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RESIZE_CONTAINER_STYLE = "ag-resizer-wrapper";
var RESIZE_TEMPLATE = '<div class="' + RESIZE_CONTAINER_STYLE + '">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>';
var PositionableFeature = function(_super) {
  __extends$1d(PositionableFeature2, _super);
  function PositionableFeature2(element, config) {
    var _this = _super.call(this) || this;
    _this.element = element;
    _this.dragStartPosition = {
      x: 0,
      y: 0
    };
    _this.position = {
      x: 0,
      y: 0
    };
    _this.lastSize = {
      width: -1,
      height: -1
    };
    _this.positioned = false;
    _this.resizersAdded = false;
    _this.resizeListeners = [];
    _this.boundaryEl = null;
    _this.isResizing = false;
    _this.isMoving = false;
    _this.resizable = {};
    _this.movable = false;
    _this.currentResizer = null;
    _this.config = Object.assign({}, { popup: false }, config);
    return _this;
  }
  PositionableFeature2.prototype.center = function() {
    var _a2 = this.offsetParent, clientHeight = _a2.clientHeight, clientWidth = _a2.clientWidth;
    var x2 = clientWidth / 2 - this.getWidth() / 2;
    var y3 = clientHeight / 2 - this.getHeight() / 2;
    this.offsetElement(x2, y3);
  };
  PositionableFeature2.prototype.initialisePosition = function() {
    var _a2 = this.config, centered = _a2.centered, forcePopupParentAsOffsetParent = _a2.forcePopupParentAsOffsetParent, minWidth = _a2.minWidth, width = _a2.width, minHeight = _a2.minHeight, height = _a2.height, x2 = _a2.x, y3 = _a2.y;
    if (!this.offsetParent) {
      this.setOffsetParent();
    }
    var computedMinHeight = 0;
    var computedMinWidth = 0;
    var isVisible2 = !!this.element.offsetParent;
    if (isVisible2) {
      var boundaryEl = this.findBoundaryElement();
      var offsetParentComputedStyles = window.getComputedStyle(boundaryEl);
      if (offsetParentComputedStyles.minWidth != null) {
        var paddingWidth = boundaryEl.offsetWidth - this.element.offsetWidth;
        computedMinWidth = parseInt(offsetParentComputedStyles.minWidth, 10) - paddingWidth;
      }
      if (offsetParentComputedStyles.minHeight != null) {
        var paddingHeight = boundaryEl.offsetHeight - this.element.offsetHeight;
        computedMinHeight = parseInt(offsetParentComputedStyles.minHeight, 10) - paddingHeight;
      }
    }
    this.minHeight = minHeight || computedMinHeight;
    this.minWidth = minWidth || computedMinWidth;
    if (width) {
      this.setWidth(width);
    }
    if (height) {
      this.setHeight(height);
    }
    if (!width || !height) {
      this.refreshSize();
    }
    if (centered) {
      this.center();
    } else if (x2 || y3) {
      this.offsetElement(x2, y3);
    } else if (isVisible2 && forcePopupParentAsOffsetParent && this.boundaryEl) {
      var top_1 = parseFloat(this.boundaryEl.style.top);
      var left = parseFloat(this.boundaryEl.style.left);
      this.offsetElement(isNaN(left) ? 0 : left, isNaN(top_1) ? 0 : top_1);
    }
    this.positioned = !!this.offsetParent;
  };
  PositionableFeature2.prototype.isPositioned = function() {
    return this.positioned;
  };
  PositionableFeature2.prototype.getPosition = function() {
    return this.position;
  };
  PositionableFeature2.prototype.setMovable = function(movable, moveElement) {
    if (!this.config.popup || movable === this.movable) {
      return;
    }
    this.movable = movable;
    var params = this.moveElementDragListener || {
      eElement: moveElement,
      onDragStart: this.onMoveStart.bind(this),
      onDragging: this.onMove.bind(this),
      onDragStop: this.onMoveEnd.bind(this)
    };
    if (movable) {
      this.dragService.addDragSource(params);
      this.moveElementDragListener = params;
    } else {
      this.dragService.removeDragSource(params);
      this.moveElementDragListener = void 0;
    }
  };
  PositionableFeature2.prototype.setResizable = function(resizable) {
    var _this = this;
    this.clearResizeListeners();
    if (resizable) {
      this.addResizers();
    } else {
      this.removeResizers();
    }
    if (typeof resizable === "boolean") {
      if (resizable === false) {
        return;
      }
      resizable = {
        topLeft: resizable,
        top: resizable,
        topRight: resizable,
        right: resizable,
        bottomRight: resizable,
        bottom: resizable,
        bottomLeft: resizable,
        left: resizable
      };
    }
    Object.keys(resizable).forEach(function(side) {
      var resizableStructure = resizable;
      var val = !!resizableStructure[side];
      var resizerEl = _this.getResizerElement(side);
      var params = {
        dragStartPixels: 0,
        eElement: resizerEl,
        onDragStart: function(e2) {
          return _this.onResizeStart(e2, side);
        },
        onDragging: _this.onResize.bind(_this),
        onDragStop: function(e2) {
          return _this.onResizeEnd(e2, side);
        }
      };
      if (!!_this.resizable[side] !== val || !_this.isAlive() && !val) {
        if (val) {
          _this.dragService.addDragSource(params);
          _this.resizeListeners.push(params);
          resizerEl.style.pointerEvents = "all";
        } else {
          resizerEl.style.pointerEvents = "none";
        }
      }
    });
  };
  PositionableFeature2.prototype.removeSizeFromEl = function() {
    this.element.style.removeProperty("height");
    this.element.style.removeProperty("width");
    this.element.style.removeProperty("flex");
  };
  PositionableFeature2.prototype.restoreLastSize = function() {
    this.element.style.flex = "0 0 auto";
    var _a2 = this.lastSize, height = _a2.height, width = _a2.width;
    if (width !== -1) {
      this.element.style.width = width + "px";
    }
    if (height !== -1) {
      this.element.style.height = height + "px";
    }
  };
  PositionableFeature2.prototype.getHeight = function() {
    return this.element.offsetHeight;
  };
  PositionableFeature2.prototype.setHeight = function(height) {
    var popup = this.config.popup;
    var eGui = this.element;
    var isPercent = false;
    if (typeof height === "string" && height.indexOf("%") !== -1) {
      setFixedHeight(eGui, height);
      height = getAbsoluteHeight(eGui);
      isPercent = true;
    } else if (this.positioned) {
      var elRect = this.element.getBoundingClientRect();
      var parentRect = this.offsetParent.getBoundingClientRect();
      height = Math.max(this.minHeight, height);
      var clientHeight = this.offsetParent.clientHeight;
      var yPosition = popup ? this.position.y : elRect.top;
      var parentTop = popup ? 0 : parentRect.top;
      if (clientHeight && height + yPosition > clientHeight + parentTop) {
        height = clientHeight - yPosition;
      }
    }
    if (this.getHeight() === height) {
      return;
    }
    if (!isPercent) {
      if (popup) {
        setFixedHeight(eGui, height);
      } else {
        eGui.style.height = height + "px";
        eGui.style.flex = "0 0 auto";
        this.lastSize.height = typeof height === "number" ? height : parseFloat(height);
      }
    } else {
      eGui.style.maxHeight = "unset";
      eGui.style.minHeight = "unset";
    }
  };
  PositionableFeature2.prototype.getWidth = function() {
    return this.element.offsetWidth;
  };
  PositionableFeature2.prototype.setWidth = function(width) {
    var eGui = this.element;
    var popup = this.config.popup;
    var isPercent = false;
    if (typeof width === "string" && width.indexOf("%") !== -1) {
      setFixedWidth(eGui, width);
      width = getAbsoluteWidth(eGui);
      isPercent = true;
    } else if (this.positioned) {
      width = Math.max(this.minWidth, width);
      var clientWidth = this.offsetParent.clientWidth;
      var xPosition = popup ? this.position.x : this.element.getBoundingClientRect().left;
      if (clientWidth && width + xPosition > clientWidth) {
        width = clientWidth - xPosition;
      }
    }
    if (this.getWidth() === width) {
      return;
    }
    if (!isPercent) {
      if (this.config.popup) {
        setFixedWidth(eGui, width);
      } else {
        eGui.style.width = width + "px";
        eGui.style.flex = " unset";
        this.lastSize.width = typeof width === "number" ? width : parseFloat(width);
      }
    } else {
      eGui.style.maxWidth = "unset";
      eGui.style.minWidth = "unset";
    }
  };
  PositionableFeature2.prototype.offsetElement = function(x2, y3) {
    if (x2 === void 0) {
      x2 = 0;
    }
    if (y3 === void 0) {
      y3 = 0;
    }
    var ePopup = this.config.forcePopupParentAsOffsetParent ? this.boundaryEl : this.element;
    this.popupService.positionPopup({
      ePopup,
      x: x2,
      y: y3,
      keepWithinBounds: true
    });
    this.setPosition(parseFloat(ePopup.style.left), parseFloat(ePopup.style.top));
  };
  PositionableFeature2.prototype.setPosition = function(x2, y3) {
    this.position.x = x2;
    this.position.y = y3;
  };
  PositionableFeature2.prototype.updateDragStartPosition = function(x2, y3) {
    this.dragStartPosition = { x: x2, y: y3 };
  };
  PositionableFeature2.prototype.calculateMouseMovement = function(params) {
    var e2 = params.e, isLeft = params.isLeft, isTop = params.isTop, anywhereWithin = params.anywhereWithin, topBuffer = params.topBuffer;
    var xDiff = e2.clientX - this.dragStartPosition.x;
    var yDiff = e2.clientY - this.dragStartPosition.y;
    var movementX = this.shouldSkipX(e2, !!isLeft, !!anywhereWithin, xDiff) ? 0 : xDiff;
    var movementY = this.shouldSkipY(e2, !!isTop, topBuffer, yDiff) ? 0 : yDiff;
    return { movementX, movementY };
  };
  PositionableFeature2.prototype.shouldSkipX = function(e2, isLeft, anywhereWithin, diff) {
    var elRect = this.element.getBoundingClientRect();
    var parentRect = this.offsetParent.getBoundingClientRect();
    var boundaryElRect = this.boundaryEl.getBoundingClientRect();
    var xPosition = this.config.popup ? this.position.x : elRect.left;
    var skipX = xPosition <= 0 && parentRect.left >= e2.clientX || parentRect.right <= e2.clientX && parentRect.right <= boundaryElRect.right;
    if (skipX) {
      return true;
    }
    if (isLeft) {
      skipX = diff < 0 && e2.clientX > xPosition + parentRect.left || diff > 0 && e2.clientX < xPosition + parentRect.left;
    } else {
      if (anywhereWithin) {
        skipX = diff < 0 && e2.clientX > boundaryElRect.right || diff > 0 && e2.clientX < xPosition + parentRect.left;
      } else {
        skipX = diff < 0 && e2.clientX > boundaryElRect.right || diff > 0 && e2.clientX < boundaryElRect.right;
      }
    }
    return skipX;
  };
  PositionableFeature2.prototype.shouldSkipY = function(e2, isTop, topBuffer, diff) {
    if (topBuffer === void 0) {
      topBuffer = 0;
    }
    var elRect = this.element.getBoundingClientRect();
    var parentRect = this.offsetParent.getBoundingClientRect();
    var boundaryElRect = this.boundaryEl.getBoundingClientRect();
    var yPosition = this.config.popup ? this.position.y : elRect.top;
    var skipY = yPosition <= 0 && parentRect.top >= e2.clientY || parentRect.bottom <= e2.clientY && parentRect.bottom <= boundaryElRect.bottom;
    if (skipY) {
      return true;
    }
    if (isTop) {
      skipY = diff < 0 && e2.clientY > yPosition + parentRect.top + topBuffer || diff > 0 && e2.clientY < yPosition + parentRect.top;
    } else {
      skipY = diff < 0 && e2.clientY > boundaryElRect.bottom || diff > 0 && e2.clientY < boundaryElRect.bottom;
    }
    return skipY;
  };
  PositionableFeature2.prototype.createResizeMap = function() {
    var eGui = this.element;
    this.resizerMap = {
      topLeft: { element: eGui.querySelector("[ref=eTopLeftResizer]") },
      top: { element: eGui.querySelector("[ref=eTopResizer]") },
      topRight: { element: eGui.querySelector("[ref=eTopRightResizer]") },
      right: { element: eGui.querySelector("[ref=eRightResizer]") },
      bottomRight: { element: eGui.querySelector("[ref=eBottomRightResizer]") },
      bottom: { element: eGui.querySelector("[ref=eBottomResizer]") },
      bottomLeft: { element: eGui.querySelector("[ref=eBottomLeftResizer]") },
      left: { element: eGui.querySelector("[ref=eLeftResizer]") }
    };
  };
  PositionableFeature2.prototype.addResizers = function() {
    if (this.resizersAdded) {
      return;
    }
    var eGui = this.element;
    if (!eGui) {
      return;
    }
    var parser = new DOMParser();
    var resizers = parser.parseFromString(RESIZE_TEMPLATE, "text/html").body;
    eGui.appendChild(resizers.firstChild);
    this.createResizeMap();
    this.resizersAdded = true;
  };
  PositionableFeature2.prototype.removeResizers = function() {
    this.resizerMap = void 0;
    var resizerEl = this.element.querySelector("." + RESIZE_CONTAINER_STYLE);
    if (resizerEl) {
      this.element.removeChild(resizerEl);
    }
    this.resizersAdded = false;
  };
  PositionableFeature2.prototype.getResizerElement = function(side) {
    return this.resizerMap[side].element;
  };
  PositionableFeature2.prototype.onResizeStart = function(e2, side) {
    this.boundaryEl = this.findBoundaryElement();
    if (!this.positioned) {
      this.initialisePosition();
    }
    this.currentResizer = {
      isTop: !!side.match(/top/i),
      isRight: !!side.match(/right/i),
      isBottom: !!side.match(/bottom/i),
      isLeft: !!side.match(/left/i)
    };
    this.element.classList.add("ag-resizing");
    this.resizerMap[side].element.classList.add("ag-active");
    var _a2 = this.config, popup = _a2.popup, forcePopupParentAsOffsetParent = _a2.forcePopupParentAsOffsetParent;
    if (!popup && !forcePopupParentAsOffsetParent) {
      this.applySizeToSiblings(this.currentResizer.isBottom || this.currentResizer.isTop);
    }
    this.isResizing = true;
    this.updateDragStartPosition(e2.clientX, e2.clientY);
  };
  PositionableFeature2.prototype.getSiblings = function() {
    var element = this.element;
    var parent = element.parentElement;
    if (!parent) {
      return null;
    }
    return Array.prototype.slice.call(parent.children).filter(function(el2) {
      return !el2.classList.contains("ag-hidden");
    });
  };
  PositionableFeature2.prototype.getMinSizeOfSiblings = function() {
    var siblings = this.getSiblings() || [];
    var height = 0;
    var width = 0;
    for (var i2 = 0; i2 < siblings.length; i2++) {
      var currentEl = siblings[i2];
      var isFlex = !!currentEl.style.flex && currentEl.style.flex !== "0 0 auto";
      if (currentEl === this.element) {
        continue;
      }
      var nextHeight = this.minHeight || 0;
      var nextWidth = this.minWidth || 0;
      if (isFlex) {
        var computedStyle = window.getComputedStyle(currentEl);
        if (computedStyle.minHeight) {
          nextHeight = parseInt(computedStyle.minHeight, 10);
        }
        if (computedStyle.minWidth) {
          nextWidth = parseInt(computedStyle.minWidth, 10);
        }
      } else {
        nextHeight = currentEl.offsetHeight;
        nextWidth = currentEl.offsetWidth;
      }
      height += nextHeight;
      width += nextWidth;
    }
    return { height, width };
  };
  PositionableFeature2.prototype.applySizeToSiblings = function(vertical) {
    var containerToFlex = null;
    var siblings = this.getSiblings();
    if (!siblings) {
      return;
    }
    for (var i2 = 0; i2 < siblings.length; i2++) {
      var el2 = siblings[i2];
      if (el2 === containerToFlex) {
        continue;
      }
      if (vertical) {
        el2.style.height = el2.offsetHeight + "px";
      } else {
        el2.style.width = el2.offsetWidth + "px";
      }
      el2.style.flex = "0 0 auto";
      if (el2 === this.element) {
        containerToFlex = siblings[i2 + 1];
      }
    }
    if (containerToFlex) {
      containerToFlex.style.removeProperty("height");
      containerToFlex.style.removeProperty("min-height");
      containerToFlex.style.removeProperty("max-height");
      containerToFlex.style.flex = "1 1 auto";
    }
  };
  PositionableFeature2.prototype.onResize = function(e2) {
    if (!this.isResizing || !this.currentResizer) {
      return;
    }
    var _a2 = this.config, popup = _a2.popup, forcePopupParentAsOffsetParent = _a2.forcePopupParentAsOffsetParent;
    var _b = this.currentResizer, isTop = _b.isTop, isRight = _b.isRight, isBottom = _b.isBottom, isLeft = _b.isLeft;
    var isHorizontal = isRight || isLeft;
    var isVertical = isBottom || isTop;
    var _c = this.calculateMouseMovement({ e: e2, isLeft, isTop }), movementX = _c.movementX, movementY = _c.movementY;
    var xPosition = this.position.x;
    var yPosition = this.position.y;
    var offsetLeft = 0;
    var offsetTop = 0;
    if (isHorizontal && movementX) {
      var direction = isLeft ? -1 : 1;
      var oldWidth = this.getWidth();
      var newWidth = oldWidth + movementX * direction;
      var skipWidth = false;
      if (isLeft) {
        offsetLeft = oldWidth - newWidth;
        if (xPosition + offsetLeft <= 0 || newWidth <= this.minWidth) {
          skipWidth = true;
          offsetLeft = 0;
        }
      }
      if (!skipWidth) {
        this.setWidth(newWidth);
      }
    }
    if (isVertical && movementY) {
      var direction = isTop ? -1 : 1;
      var oldHeight = this.getHeight();
      var newHeight = oldHeight + movementY * direction;
      var skipHeight = false;
      if (isTop) {
        offsetTop = oldHeight - newHeight;
        if (yPosition + offsetTop <= 0 || newHeight <= this.minHeight) {
          skipHeight = true;
          offsetTop = 0;
        }
      } else {
        if (!this.config.popup && !this.config.forcePopupParentAsOffsetParent && oldHeight < newHeight && this.getMinSizeOfSiblings().height + newHeight > this.element.parentElement.offsetHeight) {
          skipHeight = true;
        }
      }
      if (!skipHeight) {
        this.setHeight(newHeight);
      }
    }
    this.updateDragStartPosition(e2.clientX, e2.clientY);
    if ((popup || forcePopupParentAsOffsetParent) && offsetLeft || offsetTop) {
      this.offsetElement(xPosition + offsetLeft, yPosition + offsetTop);
    }
  };
  PositionableFeature2.prototype.onResizeEnd = function(e2, side) {
    this.isResizing = false;
    this.currentResizer = null;
    this.boundaryEl = null;
    var params = {
      type: "resize",
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi()
    };
    this.element.classList.remove("ag-resizing");
    this.resizerMap[side].element.classList.remove("ag-active");
    this.dispatchEvent(params);
  };
  PositionableFeature2.prototype.refreshSize = function() {
    var eGui = this.element;
    if (this.config.popup) {
      if (!this.config.width) {
        this.setWidth(eGui.offsetWidth);
      }
      if (!this.config.height) {
        this.setHeight(eGui.offsetHeight);
      }
    }
  };
  PositionableFeature2.prototype.onMoveStart = function(e2) {
    this.boundaryEl = this.findBoundaryElement();
    if (!this.positioned) {
      this.initialisePosition();
    }
    this.isMoving = true;
    this.element.classList.add("ag-moving");
    this.updateDragStartPosition(e2.clientX, e2.clientY);
  };
  PositionableFeature2.prototype.onMove = function(e2) {
    if (!this.isMoving) {
      return;
    }
    var _a2 = this.position, x2 = _a2.x, y3 = _a2.y;
    var topBuffer;
    if (this.config.calculateTopBuffer) {
      topBuffer = this.config.calculateTopBuffer();
    }
    var _b = this.calculateMouseMovement({
      e: e2,
      isTop: true,
      anywhereWithin: true,
      topBuffer
    }), movementX = _b.movementX, movementY = _b.movementY;
    this.offsetElement(x2 + movementX, y3 + movementY);
    this.updateDragStartPosition(e2.clientX, e2.clientY);
  };
  PositionableFeature2.prototype.onMoveEnd = function() {
    this.isMoving = false;
    this.boundaryEl = null;
    this.element.classList.remove("ag-moving");
  };
  PositionableFeature2.prototype.setOffsetParent = function() {
    if (this.config.forcePopupParentAsOffsetParent) {
      this.offsetParent = this.popupService.getPopupParent();
    } else {
      this.offsetParent = this.element.offsetParent;
    }
  };
  PositionableFeature2.prototype.findBoundaryElement = function() {
    var el2 = this.element;
    while (el2) {
      if (window.getComputedStyle(el2).position !== "static") {
        return el2;
      }
      el2 = el2.parentElement;
    }
    return this.element;
  };
  PositionableFeature2.prototype.clearResizeListeners = function() {
    while (this.resizeListeners.length) {
      var params = this.resizeListeners.pop();
      this.dragService.removeDragSource(params);
    }
  };
  PositionableFeature2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
    if (this.moveElementDragListener) {
      this.dragService.removeDragSource(this.moveElementDragListener);
    }
    this.clearResizeListeners();
    this.removeResizers();
  };
  __decorate$16([
    Autowired("popupService")
  ], PositionableFeature2.prototype, "popupService", void 0);
  __decorate$16([
    Autowired("dragService")
  ], PositionableFeature2.prototype, "dragService", void 0);
  return PositionableFeature2;
}(BeanStub);
var __extends$1c = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$15 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AutoWidthCalculator = function(_super) {
  __extends$1c(AutoWidthCalculator2, _super);
  function AutoWidthCalculator2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  AutoWidthCalculator2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      _this.centerRowContainerCtrl = p.centerRowContainerCtrl;
    });
  };
  AutoWidthCalculator2.prototype.getPreferredWidthForColumn = function(column, skipHeader) {
    var eHeaderCell = this.getHeaderCellForColumn(column);
    if (!eHeaderCell) {
      return -1;
    }
    var elements = this.rowRenderer.getAllCellsForColumn(column);
    if (!skipHeader) {
      elements.push(eHeaderCell);
    }
    return this.addElementsToContainerAndGetWidth(elements);
  };
  AutoWidthCalculator2.prototype.getPreferredWidthForColumnGroup = function(columnGroup) {
    var eHeaderCell = this.getHeaderCellForColumn(columnGroup);
    if (!eHeaderCell) {
      return -1;
    }
    return this.addElementsToContainerAndGetWidth([eHeaderCell]);
  };
  AutoWidthCalculator2.prototype.addElementsToContainerAndGetWidth = function(elements) {
    var _this = this;
    var eDummyContainer = document.createElement("span");
    eDummyContainer.style.position = "fixed";
    var eBodyContainer = this.centerRowContainerCtrl.getContainerElement();
    eBodyContainer.appendChild(eDummyContainer);
    elements.forEach(function(el2) {
      return _this.cloneItemIntoDummy(el2, eDummyContainer);
    });
    var dummyContainerWidth = eDummyContainer.offsetWidth;
    eBodyContainer.removeChild(eDummyContainer);
    var autoSizePadding = this.gridOptionsWrapper.getAutoSizePadding();
    return dummyContainerWidth + autoSizePadding;
  };
  AutoWidthCalculator2.prototype.getHeaderCellForColumn = function(column) {
    var element = null;
    this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(container) {
      var res = container.getHtmlElementForColumnHeader(column);
      if (res != null) {
        element = res;
      }
    });
    return element;
  };
  AutoWidthCalculator2.prototype.cloneItemIntoDummy = function(eCell, eDummyContainer) {
    var eCellClone = eCell.cloneNode(true);
    eCellClone.style.width = "";
    eCellClone.style.position = "static";
    eCellClone.style.left = "";
    var eCloneParent = document.createElement("div");
    var eCloneParentClassList = eCloneParent.classList;
    var isHeader = ["ag-header-cell", "ag-header-group-cell"].some(function(cls) {
      return eCellClone.classList.contains(cls);
    });
    if (isHeader) {
      eCloneParentClassList.add("ag-header", "ag-header-row");
      eCloneParent.style.position = "static";
    } else {
      eCloneParentClassList.add("ag-row");
    }
    var pointer = eCell.parentElement;
    while (pointer) {
      var isRow = ["ag-header-row", "ag-row"].some(function(cls) {
        return pointer.classList.contains(cls);
      });
      if (isRow) {
        for (var i2 = 0; i2 < pointer.classList.length; i2++) {
          var item = pointer.classList[i2];
          if (item != "ag-row-position-absolute") {
            eCloneParentClassList.add(item);
          }
        }
        break;
      }
      pointer = pointer.parentElement;
    }
    eCloneParent.appendChild(eCellClone);
    eDummyContainer.appendChild(eCloneParent);
  };
  __decorate$15([
    Autowired("rowRenderer")
  ], AutoWidthCalculator2.prototype, "rowRenderer", void 0);
  __decorate$15([
    Autowired("ctrlsService")
  ], AutoWidthCalculator2.prototype, "ctrlsService", void 0);
  __decorate$15([
    Autowired("rowCssClassCalculator")
  ], AutoWidthCalculator2.prototype, "rowCssClassCalculator", void 0);
  __decorate$15([
    PostConstruct
  ], AutoWidthCalculator2.prototype, "postConstruct", null);
  AutoWidthCalculator2 = __decorate$15([
    Bean("autoWidthCalculator")
  ], AutoWidthCalculator2);
  return AutoWidthCalculator2;
}(BeanStub);
var __extends$1b = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$14 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __values$1 = function(o) {
  var s3 = typeof Symbol === "function" && Symbol.iterator, m3 = s3 && o[s3], i2 = 0;
  if (m3)
    return m3.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i2 >= o.length)
          o = void 0;
        return { value: o && o[i2++], done: !o };
      }
    };
  throw new TypeError(s3 ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read$a = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$8 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$a(arguments[i2]));
  return ar;
};
var StickyRowFeature = function(_super) {
  __extends$1b(StickyRowFeature2, _super);
  function StickyRowFeature2(createRowCon, destroyRowCtrls) {
    var _this = _super.call(this) || this;
    _this.createRowCon = createRowCon;
    _this.destroyRowCtrls = destroyRowCtrls;
    _this.stickyRowCtrls = [];
    _this.containerHeight = 0;
    return _this;
  }
  StickyRowFeature2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(params) {
      _this.gridBodyCtrl = params.gridBodyCtrl;
    });
  };
  StickyRowFeature2.prototype.getStickyRowCtrls = function() {
    return this.stickyRowCtrls;
  };
  StickyRowFeature2.prototype.checkStickyRows = function() {
    var height = 0;
    if (!this.gridOptionsWrapper.isGroupRowsSticky()) {
      this.refreshNodesAndContainerHeight([], height);
      return;
    }
    var stickyRows = [];
    var firstPixel = this.rowRenderer.getFirstVisibleVerticalPixel();
    var addStickyRow = function(stickyRow) {
      stickyRows.push(stickyRow);
      var lastAncester = stickyRow;
      while (lastAncester.expanded) {
        lastAncester = last(lastAncester.childrenAfterSort);
      }
      var lastChildBottom = lastAncester.rowTop + lastAncester.rowHeight;
      var stickRowBottom = firstPixel + height + stickyRow.rowHeight;
      if (lastChildBottom < stickRowBottom) {
        stickyRow.stickyRowTop = height + (lastChildBottom - stickRowBottom);
      } else {
        stickyRow.stickyRowTop = height;
      }
      height = 0;
      stickyRows.forEach(function(rowNode) {
        var thisRowLastPx = rowNode.stickyRowTop + rowNode.rowHeight;
        if (height < thisRowLastPx) {
          height = thisRowLastPx;
        }
      });
    };
    while (true) {
      var firstPixelAfterStickyRows = firstPixel + height;
      var firstIndex = this.rowModel.getRowIndexAtPixel(firstPixelAfterStickyRows);
      var firstRow = this.rowModel.getRow(firstIndex);
      if (firstRow == null) {
        break;
      }
      if (firstRow.level < 0) {
        break;
      }
      var parents = [];
      var p = firstRow.parent;
      while (p.level >= 0) {
        parents.push(p);
        p = p.parent;
      }
      var firstMissingParent = parents.reverse().find(function(parent) {
        return stickyRows.indexOf(parent) < 0 && parent.displayed;
      });
      if (firstMissingParent) {
        addStickyRow(firstMissingParent);
        continue;
      }
      if (firstRow.group && firstRow.expanded && !firstRow.footer && firstRow.rowTop < firstPixelAfterStickyRows) {
        addStickyRow(firstRow);
        continue;
      }
      break;
    }
    this.refreshNodesAndContainerHeight(stickyRows, height);
  };
  StickyRowFeature2.prototype.refreshNodesAndContainerHeight = function(allStickyNodes, height) {
    var e_1, _a2, _b;
    var _this = this;
    var removedCtrls = this.stickyRowCtrls.filter(function(ctrl2) {
      return allStickyNodes.indexOf(ctrl2.getRowNode()) === -1;
    });
    var addedNodes = allStickyNodes.filter(function(rowNode) {
      return _this.stickyRowCtrls.findIndex(function(ctrl2) {
        return ctrl2.getRowNode() === rowNode;
      }) === -1;
    });
    var ctrlsToDestroy = {};
    removedCtrls.forEach(function(removedCtrl) {
      ctrlsToDestroy[removedCtrl.getRowNode().id] = removedCtrl;
      _this.stickyRowCtrls = _this.stickyRowCtrls.filter(function(ctrl2) {
        return ctrl2 !== removedCtrl;
      });
    });
    try {
      for (var _c = __values$1(Object.values(ctrlsToDestroy)), _d = _c.next(); !_d.done; _d = _c.next()) {
        var ctrl = _d.value;
        ctrl.getRowNode().sticky = false;
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (_d && !_d.done && (_a2 = _c.return))
          _a2.call(_c);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
    this.destroyRowCtrls(ctrlsToDestroy, false);
    var newCtrls = addedNodes.map(function(rowNode) {
      rowNode.sticky = true;
      return _this.createRowCon(rowNode, false, false);
    });
    (_b = this.stickyRowCtrls).push.apply(_b, __spread$8(newCtrls));
    this.stickyRowCtrls.forEach(function(ctrl2) {
      return ctrl2.setRowTop(ctrl2.getRowNode().stickyRowTop);
    });
    this.stickyRowCtrls.sort(function(a3, b2) {
      return b2.getRowNode().rowIndex - a3.getRowNode().rowIndex;
    });
    if (this.containerHeight !== height) {
      this.containerHeight = height;
      this.gridBodyCtrl.setStickyTopHeight(height);
    }
  };
  __decorate$14([
    Autowired("rowModel")
  ], StickyRowFeature2.prototype, "rowModel", void 0);
  __decorate$14([
    Autowired("rowRenderer")
  ], StickyRowFeature2.prototype, "rowRenderer", void 0);
  __decorate$14([
    Autowired("ctrlsService")
  ], StickyRowFeature2.prototype, "ctrlsService", void 0);
  __decorate$14([
    PostConstruct
  ], StickyRowFeature2.prototype, "postConstruct", null);
  return StickyRowFeature2;
}(BeanStub);
var __extends$1a = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$13 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$9 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$7 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$9(arguments[i2]));
  return ar;
};
var RowRenderer = function(_super) {
  __extends$1a(RowRenderer2, _super);
  function RowRenderer2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.destroyFuncsForColumnListeners = [];
    _this.rowCtrlsByRowIndex = {};
    _this.zombieRowCtrls = {};
    _this.allRowCtrls = [];
    _this.topRowCtrls = [];
    _this.bottomRowCtrls = [];
    _this.refreshInProgress = false;
    _this.dataFirstRenderedFired = false;
    return _this;
  }
  RowRenderer2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function() {
      _this.gridBodyCtrl = _this.ctrlsService.getGridBodyCtrl();
      _this.initialise();
    });
  };
  RowRenderer2.prototype.initialise = function() {
    this.addManagedListener(this.eventService, Events.EVENT_PAGINATION_CHANGED, this.onPageLoaded.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_PINNED_ROW_DATA_CHANGED, this.onPinnedRowDataChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, this.redrawAfterScroll.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, this.redrawAfterScroll.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onDomLayoutChanged.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_ROW_CLASS, this.redrawRows.bind(this));
    if (this.gridOptionsWrapper.isGroupRowsSticky()) {
      if (this.rowModel.getType() != Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        doOnce(function() {
          return console.warn("AG Grid: The feature Sticky Row Groups only works with the Client Side Row Model");
        }, "rowRenderer.stickyWorksWithCsrmOnly");
      } else if (this.gridOptionsWrapper.isTreeData()) {
        doOnce(function() {
          return console.warn("AG Grid: The feature Sticky Row Groups does not work with Tree Data.");
        }, "rowRenderer.stickyDoesNotWorkWithTreeData");
      } else {
        this.stickyRowFeature = this.createManagedBean(new StickyRowFeature(this.createRowCon.bind(this), this.destroyRowCtrls.bind(this)));
      }
    }
    this.registerCellEventListeners();
    this.initialiseCache();
    this.printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    this.embedFullWidthRows = this.printLayout || this.gridOptionsWrapper.isEmbedFullWidthRows();
    this.redrawAfterModelUpdate();
  };
  RowRenderer2.prototype.initialiseCache = function() {
    if (this.gridOptionsWrapper.isKeepDetailRows()) {
      var countProp = this.gridOptionsWrapper.getKeepDetailRowsCount();
      var count = countProp != null ? countProp : 3;
      this.cachedRowCtrls = new RowCtrlCache(count);
    }
  };
  RowRenderer2.prototype.getRowCtrls = function() {
    return this.allRowCtrls;
  };
  RowRenderer2.prototype.getStickyTopRowCtrls = function() {
    if (!this.stickyRowFeature) {
      return [];
    }
    return this.stickyRowFeature.getStickyRowCtrls();
  };
  RowRenderer2.prototype.updateAllRowCtrls = function() {
    var liveList = getAllValuesInObject(this.rowCtrlsByRowIndex);
    if (this.gridOptionsWrapper.isEnsureDomOrder()) {
      liveList.sort(function(a3, b2) {
        return a3.getRowNode().rowIndex - b2.getRowNode.rowIndex;
      });
    }
    var zombieList = getAllValuesInObject(this.zombieRowCtrls);
    var cachedList = this.cachedRowCtrls ? this.cachedRowCtrls.getEntries() : [];
    this.allRowCtrls = __spread$7(liveList, zombieList, cachedList);
  };
  RowRenderer2.prototype.registerCellEventListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_CELL_FOCUSED, function(event) {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onCellFocused(event);
      });
      _this.getFullWidthRowCtrls().forEach(function(rowCtrl) {
        rowCtrl.onFullWidthRowFocused(event);
      });
    });
    this.addManagedListener(this.eventService, Events.EVENT_FLASH_CELLS, function(event) {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onFlashCells(event);
      });
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, function() {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onColumnHover();
      });
    });
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, function() {
      _this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onDisplayedColumnsChanged();
      });
    });
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, function() {
      if (_this.printLayout) {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onLeftChanged();
        });
      }
    });
    var rangeSelectionEnabled = this.gridOptionsWrapper.isEnableRangeSelection();
    if (rangeSelectionEnabled) {
      this.addManagedListener(this.eventService, Events.EVENT_RANGE_SELECTION_CHANGED, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onRangeSelectionChanged();
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.updateRangeBordersIfRangeCount();
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.updateRangeBordersIfRangeCount();
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.updateRangeBordersIfRangeCount();
        });
      });
    }
    this.refreshListenersToColumnsForCellComps();
    this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.refreshListenersToColumnsForCellComps.bind(this));
    this.addDestroyFunc(this.removeGridColumnListeners.bind(this));
  };
  RowRenderer2.prototype.removeGridColumnListeners = function() {
    this.destroyFuncsForColumnListeners.forEach(function(func) {
      return func();
    });
    this.destroyFuncsForColumnListeners.length = 0;
  };
  RowRenderer2.prototype.refreshListenersToColumnsForCellComps = function() {
    var _this = this;
    this.removeGridColumnListeners();
    var cols = this.columnModel.getAllGridColumns();
    if (!cols) {
      return;
    }
    cols.forEach(function(col) {
      var forEachCellWithThisCol = function(callback) {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          if (cellCtrl.getColumn() === col) {
            callback(cellCtrl);
          }
        });
      };
      var leftChangedListener = function() {
        forEachCellWithThisCol(function(cellCtrl) {
          return cellCtrl.onLeftChanged();
        });
      };
      var widthChangedListener = function() {
        forEachCellWithThisCol(function(cellCtrl) {
          return cellCtrl.onWidthChanged();
        });
      };
      var firstRightPinnedChangedListener = function() {
        forEachCellWithThisCol(function(cellCtrl) {
          return cellCtrl.onFirstRightPinnedChanged();
        });
      };
      var lastLeftPinnedChangedListener = function() {
        forEachCellWithThisCol(function(cellCtrl) {
          return cellCtrl.onLastLeftPinnedChanged();
        });
      };
      var colDefChangedListener = function() {
        forEachCellWithThisCol(function(cellCtrl) {
          return cellCtrl.onColDefChanged();
        });
      };
      col.addEventListener(Column.EVENT_LEFT_CHANGED, leftChangedListener);
      col.addEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
      col.addEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED, firstRightPinnedChangedListener);
      col.addEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED, lastLeftPinnedChangedListener);
      col.addEventListener(Column.EVENT_COL_DEF_CHANGED, colDefChangedListener);
      _this.destroyFuncsForColumnListeners.push(function() {
        col.removeEventListener(Column.EVENT_LEFT_CHANGED, leftChangedListener);
        col.removeEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
        col.removeEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED, firstRightPinnedChangedListener);
        col.removeEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED, lastLeftPinnedChangedListener);
        col.removeEventListener(Column.EVENT_COL_DEF_CHANGED, colDefChangedListener);
      });
    });
  };
  RowRenderer2.prototype.onDomLayoutChanged = function() {
    var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    var embedFullWidthRows = printLayout || this.gridOptionsWrapper.isEmbedFullWidthRows();
    var destroyRows = embedFullWidthRows !== this.embedFullWidthRows || this.printLayout !== printLayout;
    this.printLayout = printLayout;
    this.embedFullWidthRows = embedFullWidthRows;
    if (destroyRows) {
      this.redrawAfterModelUpdate();
    }
  };
  RowRenderer2.prototype.datasourceChanged = function() {
    this.firstRenderedRow = 0;
    this.lastRenderedRow = -1;
    var rowIndexesToRemove = Object.keys(this.rowCtrlsByRowIndex);
    this.removeRowCtrls(rowIndexesToRemove);
  };
  RowRenderer2.prototype.onPageLoaded = function(event) {
    var params = {
      recycleRows: event.keepRenderedRows,
      animate: event.animate,
      newData: event.newData,
      newPage: event.newPage,
      onlyBody: true
    };
    this.redrawAfterModelUpdate(params);
  };
  RowRenderer2.prototype.getAllCellsForColumn = function(column) {
    var res = [];
    this.getAllRowCtrls().forEach(function(rowCtrl) {
      var eCell = rowCtrl.getCellElement(column);
      if (eCell) {
        res.push(eCell);
      }
    });
    return res;
  };
  RowRenderer2.prototype.refreshFloatingRowComps = function() {
    this.refreshFloatingRows(this.topRowCtrls, this.pinnedRowModel.getPinnedTopRowData());
    this.refreshFloatingRows(this.bottomRowCtrls, this.pinnedRowModel.getPinnedBottomRowData());
  };
  RowRenderer2.prototype.getTopRowCtrls = function() {
    return this.topRowCtrls;
  };
  RowRenderer2.prototype.getBottomRowCtrls = function() {
    return this.bottomRowCtrls;
  };
  RowRenderer2.prototype.refreshFloatingRows = function(rowComps, rowNodes) {
    var _this = this;
    rowComps.forEach(function(row) {
      row.destroyFirstPass();
      row.destroySecondPass();
    });
    rowComps.length = 0;
    if (!rowNodes) {
      return;
    }
    rowNodes.forEach(function(rowNode) {
      var rowCtrl = new RowCtrl(rowNode, _this.beans, false, false, _this.printLayout);
      rowComps.push(rowCtrl);
    });
  };
  RowRenderer2.prototype.onPinnedRowDataChanged = function() {
    var params = {
      recycleRows: true
    };
    this.redrawAfterModelUpdate(params);
  };
  RowRenderer2.prototype.getRenderedIndexesForRowNodes = function(rowNodes) {
    var result = [];
    if (missing(rowNodes)) {
      return result;
    }
    iterateObject(this.rowCtrlsByRowIndex, function(index, renderedRow) {
      var rowNode = renderedRow.getRowNode();
      if (rowNodes.indexOf(rowNode) >= 0) {
        result.push(index);
      }
    });
    return result;
  };
  RowRenderer2.prototype.redrawRows = function(rowNodes) {
    var partialRefresh = rowNodes != null && rowNodes.length > 0;
    if (partialRefresh) {
      var indexesToRemove = this.getRenderedIndexesForRowNodes(rowNodes);
      this.removeRowCtrls(indexesToRemove);
    }
    this.redrawAfterModelUpdate({
      recycleRows: partialRefresh
    });
  };
  RowRenderer2.prototype.getCellToRestoreFocusToAfterRefresh = function(params) {
    var _a2;
    var focusedCell = ((_a2 = params) === null || _a2 === void 0 ? void 0 : _a2.suppressKeepFocus) ? null : this.focusService.getFocusCellToUseAfterRefresh();
    if (focusedCell == null) {
      return null;
    }
    var eDocument = this.gridOptionsWrapper.getDocument();
    var activeElement = eDocument.activeElement;
    var cellDomData = this.gridOptionsWrapper.getDomData(activeElement, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
    var rowDomData = this.gridOptionsWrapper.getDomData(activeElement, RowCtrl.DOM_DATA_KEY_ROW_CTRL);
    var gridElementFocused = cellDomData || rowDomData;
    return gridElementFocused ? focusedCell : null;
  };
  RowRenderer2.prototype.redrawAfterModelUpdate = function(params) {
    if (params === void 0) {
      params = {};
    }
    this.getLockOnRefresh();
    var focusedCell = this.getCellToRestoreFocusToAfterRefresh(params);
    this.updateContainerHeights();
    this.scrollToTopIfNewData(params);
    var recycleRows = !this.printLayout && !!params.recycleRows;
    var animate = params.animate && this.gridOptionsWrapper.isAnimateRows();
    var rowsToRecycle = recycleRows ? this.recycleRows() : null;
    if (!recycleRows) {
      this.removeAllRowComps();
    }
    var isFocusedCellGettingRecycled = function() {
      if (focusedCell == null || rowsToRecycle == null) {
        return false;
      }
      var res = false;
      iterateObject(rowsToRecycle, function(key, rowComp) {
        var rowNode = rowComp.getRowNode();
        var rowIndexEqual = rowNode.rowIndex == focusedCell.rowIndex;
        var pinnedEqual = rowNode.rowPinned == focusedCell.rowPinned;
        if (rowIndexEqual && pinnedEqual) {
          res = true;
        }
      });
      return res;
    };
    var focusedCellRecycled = isFocusedCellGettingRecycled();
    this.redraw(rowsToRecycle, animate);
    this.gridBodyCtrl.updateRowCount();
    if (!params.onlyBody) {
      this.refreshFloatingRowComps();
    }
    this.dispatchDisplayedRowsChanged();
    if (!focusedCellRecycled) {
      this.restoreFocusedCell(focusedCell);
    }
    this.releaseLockOnRefresh();
  };
  RowRenderer2.prototype.scrollToTopIfNewData = function(params) {
    var scrollToTop = params.newData || params.newPage;
    var suppressScrollToTop = this.gridOptionsWrapper.isSuppressScrollOnNewData();
    if (scrollToTop && !suppressScrollToTop) {
      this.gridBodyCtrl.getScrollFeature().scrollToTop();
    }
  };
  RowRenderer2.prototype.updateContainerHeights = function() {
    if (this.printLayout) {
      this.rowContainerHeightService.setModelHeight(null);
      return;
    }
    var containerHeight = this.paginationProxy.getCurrentPageHeight();
    if (containerHeight === 0) {
      containerHeight = 1;
    }
    this.rowContainerHeightService.setModelHeight(containerHeight);
  };
  RowRenderer2.prototype.getLockOnRefresh = function() {
    if (this.refreshInProgress) {
      throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");
    }
    this.refreshInProgress = true;
  };
  RowRenderer2.prototype.releaseLockOnRefresh = function() {
    this.refreshInProgress = false;
  };
  RowRenderer2.prototype.isRefreshInProgress = function() {
    return this.refreshInProgress;
  };
  RowRenderer2.prototype.restoreFocusedCell = function(cellPosition) {
    if (cellPosition) {
      this.focusService.setFocusedCell({
        rowIndex: cellPosition.rowIndex,
        column: cellPosition.column,
        rowPinned: cellPosition.rowPinned,
        forceBrowserFocus: true,
        preventScrollOnBrowserFocus: true
      });
    }
  };
  RowRenderer2.prototype.stopEditing = function(cancel) {
    if (cancel === void 0) {
      cancel = false;
    }
    this.getAllRowCtrls().forEach(function(rowCtrl) {
      rowCtrl.stopEditing(cancel);
    });
  };
  RowRenderer2.prototype.getAllCellCtrls = function() {
    var res = [];
    this.getAllRowCtrls().forEach(function(rowCtrl) {
      return res = res.concat(rowCtrl.getAllCellCtrls());
    });
    return res;
  };
  RowRenderer2.prototype.getAllRowCtrls = function() {
    var _this = this;
    var stickyRowCtrls = this.stickyRowFeature && this.stickyRowFeature.getStickyRowCtrls() || [];
    var res = __spread$7(this.topRowCtrls, this.bottomRowCtrls, stickyRowCtrls);
    Object.keys(this.rowCtrlsByRowIndex).forEach(function(key) {
      return res.push(_this.rowCtrlsByRowIndex[key]);
    });
    return res;
  };
  RowRenderer2.prototype.addRenderedRowListener = function(eventName, rowIndex, callback) {
    var rowComp = this.rowCtrlsByRowIndex[rowIndex];
    if (rowComp) {
      rowComp.addEventListener(eventName, callback);
    }
  };
  RowRenderer2.prototype.flashCells = function(params) {
    if (params === void 0) {
      params = {};
    }
    var flashDelay = params.flashDelay, fadeDelay = params.fadeDelay;
    this.getCellCtrls(params.rowNodes, params.columns).forEach(function(cellCtrl) {
      return cellCtrl.flashCell({ flashDelay, fadeDelay });
    });
  };
  RowRenderer2.prototype.refreshCells = function(params) {
    if (params === void 0) {
      params = {};
    }
    var refreshCellParams = {
      forceRefresh: params.force,
      newData: false,
      suppressFlash: params.suppressFlash
    };
    this.getCellCtrls(params.rowNodes, params.columns).forEach(function(cellCtrl) {
      if (cellCtrl.refreshShouldDestroy()) {
        var rowCtrl = cellCtrl.getRowCtrl();
        if (rowCtrl) {
          rowCtrl.refreshCell(cellCtrl);
        }
      } else {
        cellCtrl.refreshCell(refreshCellParams);
      }
    });
    this.getFullWidthRowCtrls(params.rowNodes).forEach(function(fullWidthRowCtrl) {
      fullWidthRowCtrl.refreshFullWidth();
    });
  };
  RowRenderer2.prototype.getCellRendererInstances = function(params) {
    var res = this.getCellCtrls(params.rowNodes, params.columns).map(function(cellCtrl) {
      return cellCtrl.getCellRenderer();
    }).filter(function(renderer) {
      return renderer != null;
    });
    return res;
  };
  RowRenderer2.prototype.getCellEditorInstances = function(params) {
    var res = [];
    this.getCellCtrls(params.rowNodes, params.columns).forEach(function(cellCtrl) {
      var cellEditor = cellCtrl.getCellEditor();
      if (cellEditor) {
        res.push(cellEditor);
      }
    });
    return res;
  };
  RowRenderer2.prototype.getEditingCells = function() {
    var res = [];
    this.getAllCellCtrls().forEach(function(cellCtrl) {
      if (cellCtrl.isEditing()) {
        var cellPosition = cellCtrl.getCellPosition();
        res.push(cellPosition);
      }
    });
    return res;
  };
  RowRenderer2.prototype.mapRowNodes = function(rowNodes) {
    if (!rowNodes) {
      return;
    }
    var res = {
      top: {},
      bottom: {},
      normal: {}
    };
    rowNodes.forEach(function(rowNode) {
      var id = rowNode.id;
      if (rowNode.rowPinned === Constants.PINNED_TOP) {
        res.top[id] = rowNode;
      } else if (rowNode.rowPinned === Constants.PINNED_BOTTOM) {
        res.bottom[id] = rowNode;
      } else {
        res.normal[id] = rowNode;
      }
    });
    return res;
  };
  RowRenderer2.prototype.isRowInMap = function(rowNode, rowIdsMap) {
    var id = rowNode.id;
    var floating = rowNode.rowPinned;
    if (floating === Constants.PINNED_BOTTOM) {
      return rowIdsMap.bottom[id] != null;
    }
    if (floating === Constants.PINNED_TOP) {
      return rowIdsMap.top[id] != null;
    }
    return rowIdsMap.normal[id] != null;
  };
  RowRenderer2.prototype.getCellCtrls = function(rowNodes, columns) {
    var _this = this;
    var rowIdsMap = this.mapRowNodes(rowNodes);
    var res = [];
    var colIdsMap;
    if (exists(columns)) {
      colIdsMap = {};
      columns.forEach(function(colKey) {
        var column = _this.columnModel.getGridColumn(colKey);
        if (exists(column)) {
          colIdsMap[column.getId()] = true;
        }
      });
    }
    var processRow = function(rowComp) {
      var rowNode = rowComp.getRowNode();
      if (rowIdsMap != null && !_this.isRowInMap(rowNode, rowIdsMap)) {
        return;
      }
      rowComp.getAllCellCtrls().forEach(function(cellCtrl) {
        var colId = cellCtrl.getColumn().getId();
        var excludeColFromRefresh = colIdsMap && !colIdsMap[colId];
        if (excludeColFromRefresh) {
          return;
        }
        res.push(cellCtrl);
      });
    };
    iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
      processRow(rowComp);
    });
    if (this.topRowCtrls) {
      this.topRowCtrls.forEach(processRow);
    }
    if (this.bottomRowCtrls) {
      this.bottomRowCtrls.forEach(processRow);
    }
    return res;
  };
  RowRenderer2.prototype.destroy = function() {
    this.removeAllRowComps();
    _super.prototype.destroy.call(this);
  };
  RowRenderer2.prototype.removeAllRowComps = function() {
    var rowIndexesToRemove = Object.keys(this.rowCtrlsByRowIndex);
    this.removeRowCtrls(rowIndexesToRemove);
  };
  RowRenderer2.prototype.recycleRows = function() {
    var stubNodeIndexes = [];
    iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
      var stubNode = rowComp.getRowNode().id == null;
      if (stubNode) {
        stubNodeIndexes.push(index);
      }
    });
    this.removeRowCtrls(stubNodeIndexes);
    var ctrlsByIdMap = {};
    iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
      var rowNode = rowComp.getRowNode();
      ctrlsByIdMap[rowNode.id] = rowComp;
    });
    this.rowCtrlsByRowIndex = {};
    return ctrlsByIdMap;
  };
  RowRenderer2.prototype.removeRowCtrls = function(rowsToRemove) {
    var _this = this;
    rowsToRemove.forEach(function(indexToRemove) {
      var rowCtrl = _this.rowCtrlsByRowIndex[indexToRemove];
      if (rowCtrl) {
        rowCtrl.destroyFirstPass();
        rowCtrl.destroySecondPass();
      }
      delete _this.rowCtrlsByRowIndex[indexToRemove];
    });
  };
  RowRenderer2.prototype.redrawAfterScroll = function() {
    var cellFocused;
    if (this.stickyRowFeature && browserSupportsPreventScroll()) {
      cellFocused = this.getCellToRestoreFocusToAfterRefresh() || void 0;
    }
    this.getLockOnRefresh();
    this.redraw(null, false, true);
    this.releaseLockOnRefresh();
    this.dispatchDisplayedRowsChanged();
    if (cellFocused != null) {
      var newFocusedCell = this.getCellToRestoreFocusToAfterRefresh();
      if (cellFocused != null && newFocusedCell == null) {
        this.animationFrameService.flushAllFrames();
        this.restoreFocusedCell(cellFocused);
      }
    }
  };
  RowRenderer2.prototype.removeRowCompsNotToDraw = function(indexesToDraw) {
    var indexesToDrawMap = {};
    indexesToDraw.forEach(function(index) {
      return indexesToDrawMap[index] = true;
    });
    var existingIndexes = Object.keys(this.rowCtrlsByRowIndex);
    var indexesNotToDraw = existingIndexes.filter(function(index) {
      return !indexesToDrawMap[index];
    });
    this.removeRowCtrls(indexesNotToDraw);
  };
  RowRenderer2.prototype.calculateIndexesToDraw = function(rowsToRecycle) {
    var _this = this;
    var indexesToDraw = createArrayOfNumbers(this.firstRenderedRow, this.lastRenderedRow);
    var checkRowToDraw = function(indexStr, rowComp) {
      var index = rowComp.getRowNode().rowIndex;
      if (index == null) {
        return;
      }
      if (index < _this.firstRenderedRow || index > _this.lastRenderedRow) {
        if (_this.doNotUnVirtualiseRow(rowComp)) {
          indexesToDraw.push(index);
        }
      }
    };
    iterateObject(this.rowCtrlsByRowIndex, checkRowToDraw);
    iterateObject(rowsToRecycle, checkRowToDraw);
    indexesToDraw.sort(function(a3, b2) {
      return a3 - b2;
    });
    indexesToDraw = indexesToDraw.filter(function(index) {
      var rowNode = _this.paginationProxy.getRow(index);
      return rowNode && !rowNode.sticky;
    });
    return indexesToDraw;
  };
  RowRenderer2.prototype.redraw = function(rowsToRecycle, animate, afterScroll) {
    var _this = this;
    if (animate === void 0) {
      animate = false;
    }
    if (afterScroll === void 0) {
      afterScroll = false;
    }
    this.rowContainerHeightService.updateOffset();
    this.workOutFirstAndLastRowsToRender();
    if (this.stickyRowFeature) {
      this.stickyRowFeature.checkStickyRows();
    }
    var indexesToDraw = this.calculateIndexesToDraw(rowsToRecycle);
    this.removeRowCompsNotToDraw(indexesToDraw);
    if (this.printLayout) {
      animate = false;
    }
    indexesToDraw.forEach(function(rowIndex) {
      var rowCtrl = _this.createOrUpdateRowCtrl(rowIndex, rowsToRecycle, animate, afterScroll);
      if (exists(rowCtrl))
        ;
    });
    if (rowsToRecycle) {
      var useAnimationFrame = afterScroll && !this.gridOptionsWrapper.isSuppressAnimationFrame() && !this.printLayout;
      if (useAnimationFrame) {
        this.beans.animationFrameService.addDestroyTask(function() {
          _this.destroyRowCtrls(rowsToRecycle, animate);
          _this.updateAllRowCtrls();
          _this.dispatchDisplayedRowsChanged();
        });
      } else {
        this.destroyRowCtrls(rowsToRecycle, animate);
      }
    }
    this.updateAllRowCtrls();
  };
  RowRenderer2.prototype.dispatchDisplayedRowsChanged = function() {
    var event = { type: Events.EVENT_DISPLAYED_ROWS_CHANGED };
    this.eventService.dispatchEvent(event);
  };
  RowRenderer2.prototype.onDisplayedColumnsChanged = function() {
    var pinningLeft = this.columnModel.isPinningLeft();
    var pinningRight = this.columnModel.isPinningRight();
    var atLeastOneChanged = this.pinningLeft !== pinningLeft || pinningRight !== this.pinningRight;
    if (atLeastOneChanged) {
      this.pinningLeft = pinningLeft;
      this.pinningRight = pinningRight;
      if (this.embedFullWidthRows) {
        this.redrawFullWidthEmbeddedRows();
      }
    }
  };
  RowRenderer2.prototype.redrawFullWidthEmbeddedRows = function() {
    var rowsToRemove = [];
    this.getFullWidthRowCtrls().forEach(function(fullWidthCtrl) {
      var rowIndex = fullWidthCtrl.getRowNode().rowIndex;
      rowsToRemove.push(rowIndex.toString());
    });
    this.refreshFloatingRowComps();
    this.removeRowCtrls(rowsToRemove);
    this.redrawAfterScroll();
  };
  RowRenderer2.prototype.getFullWidthRowCtrls = function(rowNodes) {
    var _this = this;
    var rowNodesMap = this.mapRowNodes(rowNodes);
    return getAllValuesInObject(this.rowCtrlsByRowIndex).filter(function(rowCtrl) {
      if (!rowCtrl.isFullWidth()) {
        return false;
      }
      var rowNode = rowCtrl.getRowNode();
      if (rowNodesMap != null && !_this.isRowInMap(rowNode, rowNodesMap)) {
        return false;
      }
      return true;
    });
  };
  RowRenderer2.prototype.refreshFullWidthRows = function(rowNodesToRefresh) {
    var rowsToRemove = [];
    var selectivelyRefreshing = !!rowNodesToRefresh;
    var idsToRefresh = selectivelyRefreshing ? {} : void 0;
    if (selectivelyRefreshing && idsToRefresh) {
      rowNodesToRefresh.forEach(function(r) {
        return idsToRefresh[r.id] = true;
      });
    }
    this.getFullWidthRowCtrls().forEach(function(fullWidthRowCtrl) {
      var rowNode = fullWidthRowCtrl.getRowNode();
      if (selectivelyRefreshing && idsToRefresh) {
        var parentId = rowNode.level > 0 && rowNode.parent ? rowNode.parent.id : void 0;
        var skipThisNode = !idsToRefresh[rowNode.id] && !idsToRefresh[parentId];
        if (skipThisNode) {
          return;
        }
      }
      var fullWidthRowsRefreshed = fullWidthRowCtrl.refreshFullWidth();
      if (!fullWidthRowsRefreshed) {
        var rowIndex = fullWidthRowCtrl.getRowNode().rowIndex;
        rowsToRemove.push(rowIndex.toString());
      }
    });
    this.removeRowCtrls(rowsToRemove);
    this.redrawAfterScroll();
  };
  RowRenderer2.prototype.createOrUpdateRowCtrl = function(rowIndex, rowsToRecycle, animate, afterScroll) {
    var rowNode;
    var rowCtrl = this.rowCtrlsByRowIndex[rowIndex];
    if (!rowCtrl) {
      rowNode = this.paginationProxy.getRow(rowIndex);
      if (exists(rowNode) && exists(rowsToRecycle) && rowsToRecycle[rowNode.id] && rowNode.alreadyRendered) {
        rowCtrl = rowsToRecycle[rowNode.id];
        rowsToRecycle[rowNode.id] = null;
      }
    }
    var creatingNewRowCtrl = !rowCtrl;
    if (creatingNewRowCtrl) {
      if (!rowNode) {
        rowNode = this.paginationProxy.getRow(rowIndex);
      }
      if (exists(rowNode)) {
        rowCtrl = this.createRowCon(rowNode, animate, afterScroll);
      } else {
        return;
      }
    }
    if (rowNode) {
      rowNode.alreadyRendered = true;
    }
    this.rowCtrlsByRowIndex[rowIndex] = rowCtrl;
    return rowCtrl;
  };
  RowRenderer2.prototype.destroyRowCtrls = function(rowCtrlsMap, animate) {
    var _this = this;
    var executeInAWhileFuncs = [];
    iterateObject(rowCtrlsMap, function(nodeId, rowCtrl) {
      if (!rowCtrl) {
        return;
      }
      if (_this.cachedRowCtrls && rowCtrl.isCacheable()) {
        _this.cachedRowCtrls.addRow(rowCtrl);
        return;
      }
      rowCtrl.destroyFirstPass();
      if (animate) {
        _this.zombieRowCtrls[rowCtrl.getInstanceId()] = rowCtrl;
        executeInAWhileFuncs.push(function() {
          rowCtrl.destroySecondPass();
          delete _this.zombieRowCtrls[rowCtrl.getInstanceId()];
        });
      } else {
        rowCtrl.destroySecondPass();
      }
    });
    if (animate) {
      executeInAWhileFuncs.push(function() {
        _this.updateAllRowCtrls();
        _this.dispatchDisplayedRowsChanged();
      });
      executeInAWhile(executeInAWhileFuncs);
    }
  };
  RowRenderer2.prototype.workOutFirstAndLastRowsToRender = function() {
    var newFirst;
    var newLast;
    if (!this.paginationProxy.isRowsToRender()) {
      newFirst = 0;
      newLast = -1;
    } else if (this.printLayout) {
      newFirst = this.paginationProxy.getPageFirstRow();
      newLast = this.paginationProxy.getPageLastRow();
    } else {
      var bufferPixels = this.gridOptionsWrapper.getRowBufferInPixels();
      var gridBodyCtrl = this.ctrlsService.getGridBodyCtrl();
      var suppressRowVirtualisation = this.gridOptionsWrapper.isSuppressRowVirtualisation();
      var rowHeightsChanged = false;
      var firstPixel = void 0;
      var lastPixel = void 0;
      do {
        var paginationOffset = this.paginationProxy.getPixelOffset();
        var _a2 = this.paginationProxy.getCurrentPagePixelRange(), pageFirstPixel = _a2.pageFirstPixel, pageLastPixel = _a2.pageLastPixel;
        var divStretchOffset = this.rowContainerHeightService.getDivStretchOffset();
        var bodyVRange = gridBodyCtrl.getScrollFeature().getVScrollPosition();
        var bodyTopPixel = bodyVRange.top;
        var bodyBottomPixel = bodyVRange.bottom;
        if (suppressRowVirtualisation) {
          firstPixel = pageFirstPixel + divStretchOffset;
          lastPixel = pageLastPixel + divStretchOffset;
        } else {
          firstPixel = Math.max(bodyTopPixel + paginationOffset - bufferPixels, pageFirstPixel) + divStretchOffset;
          lastPixel = Math.min(bodyBottomPixel + paginationOffset + bufferPixels, pageLastPixel) + divStretchOffset;
        }
        this.firstVisibleVPixel = Math.max(bodyTopPixel + paginationOffset, pageFirstPixel) + divStretchOffset;
        rowHeightsChanged = this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel, lastPixel);
      } while (rowHeightsChanged);
      var firstRowIndex = this.paginationProxy.getRowIndexAtPixel(firstPixel);
      var lastRowIndex = this.paginationProxy.getRowIndexAtPixel(lastPixel);
      var pageFirstRow = this.paginationProxy.getPageFirstRow();
      var pageLastRow = this.paginationProxy.getPageLastRow();
      if (firstRowIndex < pageFirstRow) {
        firstRowIndex = pageFirstRow;
      }
      if (lastRowIndex > pageLastRow) {
        lastRowIndex = pageLastRow;
      }
      newFirst = firstRowIndex;
      newLast = lastRowIndex;
    }
    var rowLayoutNormal = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
    var suppressRowCountRestriction = this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction();
    var rowBufferMaxSize = Math.max(this.gridOptionsWrapper.getRowBuffer(), 500);
    if (rowLayoutNormal && !suppressRowCountRestriction) {
      if (newLast - newFirst > rowBufferMaxSize) {
        newLast = newFirst + rowBufferMaxSize;
      }
    }
    var firstDiffers = newFirst !== this.firstRenderedRow;
    var lastDiffers = newLast !== this.lastRenderedRow;
    if (firstDiffers || lastDiffers) {
      this.firstRenderedRow = newFirst;
      this.lastRenderedRow = newLast;
      var event_1 = {
        type: Events.EVENT_VIEWPORT_CHANGED,
        firstRow: newFirst,
        lastRow: newLast
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  RowRenderer2.prototype.dispatchFirstDataRenderedEvent = function() {
    var _this = this;
    if (this.dataFirstRenderedFired) {
      return;
    }
    this.dataFirstRenderedFired = true;
    var event = {
      type: Events.EVENT_FIRST_DATA_RENDERED,
      firstRow: this.firstRenderedRow,
      lastRow: this.lastRenderedRow
    };
    window.requestAnimationFrame(function() {
      _this.beans.eventService.dispatchEvent(event);
    });
  };
  RowRenderer2.prototype.ensureAllRowsInRangeHaveHeightsCalculated = function(topPixel, bottomPixel) {
    var res = this.paginationProxy.ensureRowHeightsValid(topPixel, bottomPixel, -1, -1);
    if (res) {
      this.updateContainerHeights();
    }
    return res;
  };
  RowRenderer2.prototype.getFirstVisibleVerticalPixel = function() {
    return this.firstVisibleVPixel;
  };
  RowRenderer2.prototype.getFirstVirtualRenderedRow = function() {
    return this.firstRenderedRow;
  };
  RowRenderer2.prototype.getLastVirtualRenderedRow = function() {
    return this.lastRenderedRow;
  };
  RowRenderer2.prototype.doNotUnVirtualiseRow = function(rowComp) {
    var REMOVE_ROW = false;
    var KEEP_ROW = true;
    var rowNode = rowComp.getRowNode();
    var rowHasFocus = this.focusService.isRowNodeFocused(rowNode);
    var rowIsEditing = rowComp.isEditing();
    var rowIsDetail = rowNode.detail;
    var mightWantToKeepRow = rowHasFocus || rowIsEditing || rowIsDetail;
    if (!mightWantToKeepRow) {
      return REMOVE_ROW;
    }
    var rowNodePresent = this.paginationProxy.isRowPresent(rowNode);
    return rowNodePresent ? KEEP_ROW : REMOVE_ROW;
  };
  RowRenderer2.prototype.createRowCon = function(rowNode, animate, afterScroll) {
    var rowCtrlFromCache = this.cachedRowCtrls ? this.cachedRowCtrls.getRow(rowNode) : null;
    if (rowCtrlFromCache) {
      return rowCtrlFromCache;
    }
    var suppressAnimationFrame = this.gridOptionsWrapper.isSuppressAnimationFrame();
    var useAnimationFrameForCreate = afterScroll && !suppressAnimationFrame && !this.printLayout;
    var res = new RowCtrl(rowNode, this.beans, animate, useAnimationFrameForCreate, this.printLayout);
    return res;
  };
  RowRenderer2.prototype.getRenderedNodes = function() {
    var renderedRows = this.rowCtrlsByRowIndex;
    return Object.keys(renderedRows).map(function(key) {
      return renderedRows[key].getRowNode();
    });
  };
  RowRenderer2.prototype.getRowByPosition = function(rowPosition) {
    var rowCtrl;
    var rowIndex = rowPosition.rowIndex;
    switch (rowPosition.rowPinned) {
      case Constants.PINNED_TOP:
        rowCtrl = this.topRowCtrls[rowIndex];
        break;
      case Constants.PINNED_BOTTOM:
        rowCtrl = this.bottomRowCtrls[rowIndex];
        break;
      default:
        rowCtrl = this.rowCtrlsByRowIndex[rowIndex];
        if (!rowCtrl) {
          rowCtrl = this.getStickyTopRowCtrls().find(function(ctrl) {
            return ctrl.getRowNode().rowIndex === rowIndex;
          }) || null;
        }
        break;
    }
    return rowCtrl;
  };
  RowRenderer2.prototype.getRowNode = function(gridRow) {
    switch (gridRow.rowPinned) {
      case Constants.PINNED_TOP:
        return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
      case Constants.PINNED_BOTTOM:
        return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
      default:
        return this.rowModel.getRow(gridRow.rowIndex);
    }
  };
  RowRenderer2.prototype.isRangeInRenderedViewport = function(startIndex, endIndex) {
    var parentClosed = startIndex == null || endIndex == null;
    if (parentClosed) {
      return false;
    }
    var blockAfterViewport = startIndex > this.lastRenderedRow;
    var blockBeforeViewport = endIndex < this.firstRenderedRow;
    var blockInsideViewport = !blockBeforeViewport && !blockAfterViewport;
    return blockInsideViewport;
  };
  __decorate$13([
    Autowired("animationFrameService")
  ], RowRenderer2.prototype, "animationFrameService", void 0);
  __decorate$13([
    Autowired("paginationProxy")
  ], RowRenderer2.prototype, "paginationProxy", void 0);
  __decorate$13([
    Autowired("columnModel")
  ], RowRenderer2.prototype, "columnModel", void 0);
  __decorate$13([
    Autowired("pinnedRowModel")
  ], RowRenderer2.prototype, "pinnedRowModel", void 0);
  __decorate$13([
    Autowired("rowModel")
  ], RowRenderer2.prototype, "rowModel", void 0);
  __decorate$13([
    Autowired("focusService")
  ], RowRenderer2.prototype, "focusService", void 0);
  __decorate$13([
    Autowired("beans")
  ], RowRenderer2.prototype, "beans", void 0);
  __decorate$13([
    Autowired("rowContainerHeightService")
  ], RowRenderer2.prototype, "rowContainerHeightService", void 0);
  __decorate$13([
    Autowired("ctrlsService")
  ], RowRenderer2.prototype, "ctrlsService", void 0);
  __decorate$13([
    PostConstruct
  ], RowRenderer2.prototype, "postConstruct", null);
  RowRenderer2 = __decorate$13([
    Bean("rowRenderer")
  ], RowRenderer2);
  return RowRenderer2;
}(BeanStub);
var RowCtrlCache = function() {
  function RowCtrlCache2(maxCount) {
    this.entriesMap = {};
    this.entriesList = [];
    this.maxCount = maxCount;
  }
  RowCtrlCache2.prototype.addRow = function(rowCtrl) {
    this.entriesMap[rowCtrl.getRowNode().id] = rowCtrl;
    this.entriesList.push(rowCtrl);
    rowCtrl.setCached(true);
    if (this.entriesList.length > this.maxCount) {
      var rowCtrlToDestroy = this.entriesList[0];
      rowCtrlToDestroy.destroyFirstPass();
      rowCtrlToDestroy.destroySecondPass();
      this.removeFromCache(rowCtrlToDestroy);
    }
  };
  RowCtrlCache2.prototype.getRow = function(rowNode) {
    if (rowNode == null || rowNode.id == null) {
      return null;
    }
    var res = this.entriesMap[rowNode.id];
    if (!res) {
      return null;
    }
    this.removeFromCache(res);
    res.setCached(false);
    var rowNodeMismatch = res.getRowNode() != rowNode;
    return rowNodeMismatch ? null : res;
  };
  RowCtrlCache2.prototype.removeFromCache = function(rowCtrl) {
    var rowNodeId = rowCtrl.getRowNode().id;
    delete this.entriesMap[rowNodeId];
    removeFromArray(this.entriesList, rowCtrl);
  };
  RowCtrlCache2.prototype.getEntries = function() {
    return this.entriesList;
  };
  return RowCtrlCache2;
}();
var __extends$19 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$12 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ValueFormatterService = function(_super) {
  __extends$19(ValueFormatterService2, _super);
  function ValueFormatterService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ValueFormatterService2.prototype.formatValue = function(column, node, value, suppliedFormatter, useFormatterFromColumn) {
    if (useFormatterFromColumn === void 0) {
      useFormatterFromColumn = true;
    }
    var result = null;
    var formatter2;
    var colDef = column.getColDef();
    if (suppliedFormatter) {
      formatter2 = suppliedFormatter;
    } else if (useFormatterFromColumn) {
      formatter2 = node && node.rowPinned && colDef.pinnedRowValueFormatter ? colDef.pinnedRowValueFormatter : colDef.valueFormatter;
    }
    if (formatter2) {
      var params = {
        value,
        node,
        data: node ? node.data : null,
        colDef,
        column,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      result = this.expressionService.evaluate(formatter2, params);
    } else if (colDef.refData) {
      return colDef.refData[value] || "";
    }
    if (result == null && Array.isArray(value)) {
      result = value.join(", ");
    }
    return result;
  };
  __decorate$12([
    Autowired("expressionService")
  ], ValueFormatterService2.prototype, "expressionService", void 0);
  ValueFormatterService2 = __decorate$12([
    Bean("valueFormatterService")
  ], ValueFormatterService2);
  return ValueFormatterService2;
}(BeanStub);
var __extends$18 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$11 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PinnedRowModel = function(_super) {
  __extends$18(PinnedRowModel2, _super);
  function PinnedRowModel2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  PinnedRowModel2.prototype.init = function() {
    this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData());
    this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData());
  };
  PinnedRowModel2.prototype.isEmpty = function(floating) {
    var rows = floating === Constants.PINNED_TOP ? this.pinnedTopRows : this.pinnedBottomRows;
    return missingOrEmpty(rows);
  };
  PinnedRowModel2.prototype.isRowsToRender = function(floating) {
    return !this.isEmpty(floating);
  };
  PinnedRowModel2.prototype.getRowAtPixel = function(pixel, floating) {
    var rows = floating === Constants.PINNED_TOP ? this.pinnedTopRows : this.pinnedBottomRows;
    if (missingOrEmpty(rows)) {
      return 0;
    }
    for (var i2 = 0; i2 < rows.length; i2++) {
      var rowNode = rows[i2];
      var rowTopPixel = rowNode.rowTop + rowNode.rowHeight - 1;
      if (rowTopPixel >= pixel) {
        return i2;
      }
    }
    return rows.length - 1;
  };
  PinnedRowModel2.prototype.setPinnedTopRowData = function(rowData) {
    this.pinnedTopRows = this.createNodesFromData(rowData, true);
    var event = {
      type: Events.EVENT_PINNED_ROW_DATA_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  PinnedRowModel2.prototype.setPinnedBottomRowData = function(rowData) {
    this.pinnedBottomRows = this.createNodesFromData(rowData, false);
    var event = {
      type: Events.EVENT_PINNED_ROW_DATA_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  PinnedRowModel2.prototype.createNodesFromData = function(allData, isTop) {
    var _this = this;
    var rowNodes = [];
    if (allData) {
      var nextRowTop_1 = 0;
      allData.forEach(function(dataItem, index) {
        var rowNode = new RowNode(_this.beans);
        rowNode.data = dataItem;
        var idPrefix = isTop ? RowNode.ID_PREFIX_TOP_PINNED : RowNode.ID_PREFIX_BOTTOM_PINNED;
        rowNode.id = idPrefix + index;
        rowNode.rowPinned = isTop ? Constants.PINNED_TOP : Constants.PINNED_BOTTOM;
        rowNode.setRowTop(nextRowTop_1);
        rowNode.setRowHeight(_this.gridOptionsWrapper.getRowHeightForNode(rowNode).height);
        rowNode.setRowIndex(index);
        nextRowTop_1 += rowNode.rowHeight;
        rowNodes.push(rowNode);
      });
    }
    return rowNodes;
  };
  PinnedRowModel2.prototype.getPinnedTopRowData = function() {
    return this.pinnedTopRows;
  };
  PinnedRowModel2.prototype.getPinnedBottomRowData = function() {
    return this.pinnedBottomRows;
  };
  PinnedRowModel2.prototype.getPinnedTopTotalHeight = function() {
    return this.getTotalHeight(this.pinnedTopRows);
  };
  PinnedRowModel2.prototype.getPinnedTopRowCount = function() {
    return this.pinnedTopRows ? this.pinnedTopRows.length : 0;
  };
  PinnedRowModel2.prototype.getPinnedBottomRowCount = function() {
    return this.pinnedBottomRows ? this.pinnedBottomRows.length : 0;
  };
  PinnedRowModel2.prototype.getPinnedTopRow = function(index) {
    return this.pinnedTopRows[index];
  };
  PinnedRowModel2.prototype.getPinnedBottomRow = function(index) {
    return this.pinnedBottomRows[index];
  };
  PinnedRowModel2.prototype.forEachPinnedTopRow = function(callback) {
    if (missingOrEmpty(this.pinnedTopRows)) {
      return;
    }
    this.pinnedTopRows.forEach(callback);
  };
  PinnedRowModel2.prototype.forEachPinnedBottomRow = function(callback) {
    if (missingOrEmpty(this.pinnedBottomRows)) {
      return;
    }
    this.pinnedBottomRows.forEach(callback);
  };
  PinnedRowModel2.prototype.getPinnedBottomTotalHeight = function() {
    return this.getTotalHeight(this.pinnedBottomRows);
  };
  PinnedRowModel2.prototype.getTotalHeight = function(rowNodes) {
    if (!rowNodes || rowNodes.length === 0) {
      return 0;
    }
    var lastNode = last(rowNodes);
    return lastNode.rowTop + lastNode.rowHeight;
  };
  __decorate$11([
    Autowired("beans")
  ], PinnedRowModel2.prototype, "beans", void 0);
  __decorate$11([
    PostConstruct
  ], PinnedRowModel2.prototype, "init", null);
  PinnedRowModel2 = __decorate$11([
    Bean("pinnedRowModel")
  ], PinnedRowModel2);
  return PinnedRowModel2;
}(BeanStub);
var ServerSideTransactionResultStatus;
(function(ServerSideTransactionResultStatus2) {
  ServerSideTransactionResultStatus2["Applied"] = "Applied";
  ServerSideTransactionResultStatus2["StoreNotFound"] = "StoreNotFound";
  ServerSideTransactionResultStatus2["StoreLoading"] = "StoreLoading";
  ServerSideTransactionResultStatus2["StoreWaitingToLoad"] = "StoreWaitingToLoad";
  ServerSideTransactionResultStatus2["StoreLoadingFailed"] = "StoreLoadingFailed";
  ServerSideTransactionResultStatus2["StoreWrongType"] = "StoreWrongType";
  ServerSideTransactionResultStatus2["Cancelled"] = "Cancelled";
})(ServerSideTransactionResultStatus || (ServerSideTransactionResultStatus = {}));
var ChangedPath = function() {
  function ChangedPath2(keepingColumns, rootNode) {
    this.active = true;
    this.nodeIdsToColumns = {};
    this.mapToItems = {};
    this.keepingColumns = keepingColumns;
    this.pathRoot = {
      rowNode: rootNode,
      children: null
    };
    this.mapToItems[rootNode.id] = this.pathRoot;
  }
  ChangedPath2.prototype.setInactive = function() {
    this.active = false;
  };
  ChangedPath2.prototype.isActive = function() {
    return this.active;
  };
  ChangedPath2.prototype.depthFirstSearchChangedPath = function(pathItem, callback) {
    if (pathItem.children) {
      for (var i2 = 0; i2 < pathItem.children.length; i2++) {
        this.depthFirstSearchChangedPath(pathItem.children[i2], callback);
      }
    }
    callback(pathItem.rowNode);
  };
  ChangedPath2.prototype.depthFirstSearchEverything = function(rowNode, callback, traverseEverything) {
    if (rowNode.childrenAfterGroup) {
      for (var i2 = 0; i2 < rowNode.childrenAfterGroup.length; i2++) {
        var childNode = rowNode.childrenAfterGroup[i2];
        if (childNode.childrenAfterGroup) {
          this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i2], callback, traverseEverything);
        } else if (traverseEverything) {
          callback(childNode);
        }
      }
    }
    callback(rowNode);
  };
  ChangedPath2.prototype.forEachChangedNodeDepthFirst = function(callback, traverseLeafNodes) {
    if (traverseLeafNodes === void 0) {
      traverseLeafNodes = false;
    }
    if (this.active) {
      this.depthFirstSearchChangedPath(this.pathRoot, callback);
    } else {
      this.depthFirstSearchEverything(this.pathRoot.rowNode, callback, traverseLeafNodes);
    }
  };
  ChangedPath2.prototype.executeFromRootNode = function(callback) {
    callback(this.pathRoot.rowNode);
  };
  ChangedPath2.prototype.createPathItems = function(rowNode) {
    var pointer = rowNode;
    var newEntryCount = 0;
    while (!this.mapToItems[pointer.id]) {
      var newEntry = {
        rowNode: pointer,
        children: null
      };
      this.mapToItems[pointer.id] = newEntry;
      newEntryCount++;
      pointer = pointer.parent;
    }
    return newEntryCount;
  };
  ChangedPath2.prototype.populateColumnsMap = function(rowNode, columns) {
    var _this = this;
    if (!this.keepingColumns || !columns) {
      return;
    }
    var pointer = rowNode;
    while (pointer) {
      if (!this.nodeIdsToColumns[pointer.id]) {
        this.nodeIdsToColumns[pointer.id] = {};
      }
      columns.forEach(function(col) {
        return _this.nodeIdsToColumns[pointer.id][col.getId()] = true;
      });
      pointer = pointer.parent;
    }
  };
  ChangedPath2.prototype.linkPathItems = function(rowNode, newEntryCount) {
    var pointer = rowNode;
    for (var i2 = 0; i2 < newEntryCount; i2++) {
      var thisItem = this.mapToItems[pointer.id];
      var parentItem = this.mapToItems[pointer.parent.id];
      if (!parentItem.children) {
        parentItem.children = [];
      }
      parentItem.children.push(thisItem);
      pointer = pointer.parent;
    }
  };
  ChangedPath2.prototype.addParentNode = function(rowNode, columns) {
    if (!rowNode || rowNode.isRowPinned()) {
      return;
    }
    var newEntryCount = this.createPathItems(rowNode);
    this.linkPathItems(rowNode, newEntryCount);
    this.populateColumnsMap(rowNode, columns);
  };
  ChangedPath2.prototype.canSkip = function(rowNode) {
    return this.active && !this.mapToItems[rowNode.id];
  };
  ChangedPath2.prototype.getValueColumnsForNode = function(rowNode, valueColumns) {
    if (!this.keepingColumns) {
      return valueColumns;
    }
    var colsForThisNode = this.nodeIdsToColumns[rowNode.id];
    var result = valueColumns.filter(function(col) {
      return colsForThisNode[col.getId()];
    });
    return result;
  };
  ChangedPath2.prototype.getNotValueColumnsForNode = function(rowNode, valueColumns) {
    if (!this.keepingColumns) {
      return null;
    }
    var colsForThisNode = this.nodeIdsToColumns[rowNode.id];
    var result = valueColumns.filter(function(col) {
      return !colsForThisNode[col.getId()];
    });
    return result;
  };
  return ChangedPath2;
}();
var __extends$17 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var RowNodeBlock = function(_super) {
  __extends$17(RowNodeBlock2, _super);
  function RowNodeBlock2(id) {
    var _this = _super.call(this) || this;
    _this.state = RowNodeBlock2.STATE_WAITING_TO_LOAD;
    _this.version = 0;
    _this.id = id;
    return _this;
  }
  RowNodeBlock2.prototype.getId = function() {
    return this.id;
  };
  RowNodeBlock2.prototype.load = function() {
    this.state = RowNodeBlock2.STATE_LOADING;
    this.loadFromDatasource();
  };
  RowNodeBlock2.prototype.getVersion = function() {
    return this.version;
  };
  RowNodeBlock2.prototype.setStateWaitingToLoad = function() {
    this.version++;
    this.state = RowNodeBlock2.STATE_WAITING_TO_LOAD;
  };
  RowNodeBlock2.prototype.getState = function() {
    return this.state;
  };
  RowNodeBlock2.prototype.pageLoadFailed = function(version) {
    var requestMostRecentAndLive = this.isRequestMostRecentAndLive(version);
    if (requestMostRecentAndLive) {
      this.state = RowNodeBlock2.STATE_FAILED;
      this.processServerFail();
    }
    this.dispatchLoadCompleted(false);
  };
  RowNodeBlock2.prototype.success = function(version, params) {
    this.successCommon(version, params);
  };
  RowNodeBlock2.prototype.pageLoaded = function(version, rows, lastRow) {
    this.successCommon(version, { rowData: rows, rowCount: lastRow });
  };
  RowNodeBlock2.prototype.isRequestMostRecentAndLive = function(version) {
    var thisIsMostRecentRequest = version === this.version;
    var weAreNotDestroyed = this.isAlive();
    return thisIsMostRecentRequest && weAreNotDestroyed;
  };
  RowNodeBlock2.prototype.successCommon = function(version, params) {
    this.dispatchLoadCompleted();
    var requestMostRecentAndLive = this.isRequestMostRecentAndLive(version);
    if (requestMostRecentAndLive) {
      this.state = RowNodeBlock2.STATE_LOADED;
      this.processServerResult(params);
    }
  };
  RowNodeBlock2.prototype.dispatchLoadCompleted = function(success) {
    if (success === void 0) {
      success = true;
    }
    var event = {
      type: RowNodeBlock2.EVENT_LOAD_COMPLETE,
      success,
      block: this
    };
    this.dispatchEvent(event);
  };
  RowNodeBlock2.EVENT_LOAD_COMPLETE = "loadComplete";
  RowNodeBlock2.STATE_WAITING_TO_LOAD = "needsLoading";
  RowNodeBlock2.STATE_LOADING = "loading";
  RowNodeBlock2.STATE_LOADED = "loaded";
  RowNodeBlock2.STATE_FAILED = "failed";
  return RowNodeBlock2;
}(BeanStub);
var __extends$16 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$10 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$6 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var RowNodeBlockLoader = function(_super) {
  __extends$16(RowNodeBlockLoader2, _super);
  function RowNodeBlockLoader2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.activeBlockLoadsCount = 0;
    _this.blocks = [];
    _this.active = true;
    return _this;
  }
  RowNodeBlockLoader_1 = RowNodeBlockLoader2;
  RowNodeBlockLoader2.prototype.postConstruct = function() {
    this.maxConcurrentRequests = this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();
    var blockLoadDebounceMillis = this.gridOptionsWrapper.getBlockLoadDebounceMillis();
    if (blockLoadDebounceMillis && blockLoadDebounceMillis > 0) {
      this.checkBlockToLoadDebounce = _.debounce(this.performCheckBlocksToLoad.bind(this), blockLoadDebounceMillis);
    }
  };
  RowNodeBlockLoader2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("RowNodeBlockLoader");
  };
  RowNodeBlockLoader2.prototype.addBlock = function(block) {
    this.blocks.push(block);
    block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE, this.loadComplete.bind(this));
    this.checkBlockToLoad();
  };
  RowNodeBlockLoader2.prototype.removeBlock = function(block) {
    _.removeFromArray(this.blocks, block);
  };
  RowNodeBlockLoader2.prototype.destroy = function() {
    _super.prototype.destroy.call(this);
    this.active = false;
  };
  RowNodeBlockLoader2.prototype.loadComplete = function() {
    this.activeBlockLoadsCount--;
    this.checkBlockToLoad();
    if (this.activeBlockLoadsCount == 0) {
      this.dispatchEvent({ type: RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT });
    }
  };
  RowNodeBlockLoader2.prototype.checkBlockToLoad = function() {
    if (this.checkBlockToLoadDebounce) {
      this.checkBlockToLoadDebounce();
    } else {
      this.performCheckBlocksToLoad();
    }
  };
  RowNodeBlockLoader2.prototype.performCheckBlocksToLoad = function() {
    if (!this.active) {
      return;
    }
    this.printCacheStatus();
    if (this.maxConcurrentRequests != null && this.activeBlockLoadsCount >= this.maxConcurrentRequests) {
      this.logger.log("checkBlockToLoad: max loads exceeded");
      return;
    }
    var loadAvailability = this.maxConcurrentRequests !== void 0 ? this.maxConcurrentRequests - this.activeBlockLoadsCount : void 0;
    var blocksToLoad = this.blocks.filter(function(block) {
      return block.getState() === RowNodeBlock.STATE_WAITING_TO_LOAD;
    }).slice(0, loadAvailability);
    this.activeBlockLoadsCount += blocksToLoad.length;
    blocksToLoad.forEach(function(block) {
      return block.load();
    });
    this.printCacheStatus();
  };
  RowNodeBlockLoader2.prototype.getBlockState = function() {
    var result = {};
    this.blocks.forEach(function(block) {
      var _a2 = block.getBlockStateJson(), id = _a2.id, state = _a2.state;
      result[id] = state;
    });
    return result;
  };
  RowNodeBlockLoader2.prototype.printCacheStatus = function() {
    if (this.logger.isLogging()) {
      this.logger.log("printCacheStatus: activePageLoadsCount = " + this.activeBlockLoadsCount + "," + (" blocks = " + JSON.stringify(this.getBlockState())));
    }
  };
  RowNodeBlockLoader2.prototype.isLoading = function() {
    return this.activeBlockLoadsCount > 0;
  };
  var RowNodeBlockLoader_1;
  RowNodeBlockLoader2.BLOCK_LOADER_FINISHED_EVENT = "blockLoaderFinished";
  __decorate$10([
    PostConstruct
  ], RowNodeBlockLoader2.prototype, "postConstruct", null);
  __decorate$10([
    __param$6(0, Qualifier("loggerFactory"))
  ], RowNodeBlockLoader2.prototype, "setBeans", null);
  RowNodeBlockLoader2 = RowNodeBlockLoader_1 = __decorate$10([
    Bean("rowNodeBlockLoader")
  ], RowNodeBlockLoader2);
  return RowNodeBlockLoader2;
}(BeanStub);
var __extends$15 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$$ = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PaginationProxy = function(_super) {
  __extends$15(PaginationProxy2, _super);
  function PaginationProxy2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.currentPage = 0;
    _this.topDisplayedRowIndex = 0;
    _this.bottomDisplayedRowIndex = 0;
    _this.pixelOffset = 0;
    _this.masterRowCount = 0;
    return _this;
  }
  PaginationProxy2.prototype.postConstruct = function() {
    this.active = this.gridOptionsWrapper.isPagination();
    this.paginateChildRows = this.gridOptionsWrapper.isPaginateChildRows();
    this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));
    this.addManagedListener(this.gridOptionsWrapper, "paginationPageSize", this.onPaginationPageSizeChanged.bind(this));
    this.onModelUpdated();
  };
  PaginationProxy2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
    var res = this.rowModel.ensureRowHeightsValid(startPixel, endPixel, this.getPageFirstRow(), this.getPageLastRow());
    if (res) {
      this.calculatePages();
    }
    return res;
  };
  PaginationProxy2.prototype.onModelUpdated = function(modelUpdatedEvent) {
    this.calculatePages();
    var paginationChangedEvent = {
      type: Events.EVENT_PAGINATION_CHANGED,
      animate: modelUpdatedEvent ? modelUpdatedEvent.animate : false,
      newData: modelUpdatedEvent ? modelUpdatedEvent.newData : false,
      newPage: modelUpdatedEvent ? modelUpdatedEvent.newPage : false,
      keepRenderedRows: modelUpdatedEvent ? modelUpdatedEvent.keepRenderedRows : false
    };
    this.eventService.dispatchEvent(paginationChangedEvent);
  };
  PaginationProxy2.prototype.onPaginationPageSizeChanged = function() {
    this.calculatePages();
    var paginationChangedEvent = {
      type: Events.EVENT_PAGINATION_CHANGED,
      animate: false,
      newData: false,
      newPage: false,
      keepRenderedRows: true
    };
    this.eventService.dispatchEvent(paginationChangedEvent);
  };
  PaginationProxy2.prototype.goToPage = function(page) {
    if (!this.active || this.currentPage === page) {
      return;
    }
    this.currentPage = page;
    var event = {
      type: Events.EVENT_MODEL_UPDATED,
      animate: false,
      keepRenderedRows: false,
      newData: false,
      newPage: true
    };
    this.onModelUpdated(event);
  };
  PaginationProxy2.prototype.getPixelOffset = function() {
    return this.pixelOffset;
  };
  PaginationProxy2.prototype.getRow = function(index) {
    return this.rowModel.getRow(index);
  };
  PaginationProxy2.prototype.getRowNode = function(id) {
    return this.rowModel.getRowNode(id);
  };
  PaginationProxy2.prototype.getRowIndexAtPixel = function(pixel) {
    return this.rowModel.getRowIndexAtPixel(pixel);
  };
  PaginationProxy2.prototype.getCurrentPageHeight = function() {
    if (missing(this.topRowBounds) || missing(this.bottomRowBounds)) {
      return 0;
    }
    return Math.max(this.bottomRowBounds.rowTop + this.bottomRowBounds.rowHeight - this.topRowBounds.rowTop, 0);
  };
  PaginationProxy2.prototype.getCurrentPagePixelRange = function() {
    var pageFirstPixel = this.topRowBounds ? this.topRowBounds.rowTop : 0;
    var pageLastPixel = this.bottomRowBounds ? this.bottomRowBounds.rowTop + this.bottomRowBounds.rowHeight : 0;
    return { pageFirstPixel, pageLastPixel };
  };
  PaginationProxy2.prototype.isRowPresent = function(rowNode) {
    if (!this.rowModel.isRowPresent(rowNode)) {
      return false;
    }
    var nodeIsInPage = rowNode.rowIndex >= this.topDisplayedRowIndex && rowNode.rowIndex <= this.bottomDisplayedRowIndex;
    return nodeIsInPage;
  };
  PaginationProxy2.prototype.isEmpty = function() {
    return this.rowModel.isEmpty();
  };
  PaginationProxy2.prototype.isRowsToRender = function() {
    return this.rowModel.isRowsToRender();
  };
  PaginationProxy2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
    return this.rowModel.getNodesInRangeForSelection(firstInRange, lastInRange);
  };
  PaginationProxy2.prototype.forEachNode = function(callback) {
    return this.rowModel.forEachNode(callback);
  };
  PaginationProxy2.prototype.getType = function() {
    return this.rowModel.getType();
  };
  PaginationProxy2.prototype.getRowBounds = function(index) {
    var res = this.rowModel.getRowBounds(index);
    res.rowIndex = index;
    return res;
  };
  PaginationProxy2.prototype.getPageFirstRow = function() {
    return this.topRowBounds ? this.topRowBounds.rowIndex : -1;
  };
  PaginationProxy2.prototype.getPageLastRow = function() {
    return this.bottomRowBounds ? this.bottomRowBounds.rowIndex : -1;
  };
  PaginationProxy2.prototype.getRowCount = function() {
    return this.rowModel.getRowCount();
  };
  PaginationProxy2.prototype.getPageForIndex = function(index) {
    return Math.floor(index / this.pageSize);
  };
  PaginationProxy2.prototype.goToPageWithIndex = function(index) {
    if (!this.active) {
      return;
    }
    var pageNumber = this.getPageForIndex(index);
    this.goToPage(pageNumber);
  };
  PaginationProxy2.prototype.isRowInPage = function(row) {
    if (!this.active) {
      return true;
    }
    var rowPage = this.getPageForIndex(row.rowIndex);
    return rowPage === this.currentPage;
  };
  PaginationProxy2.prototype.isLastPageFound = function() {
    return this.rowModel.isLastRowIndexKnown();
  };
  PaginationProxy2.prototype.getCurrentPage = function() {
    return this.currentPage;
  };
  PaginationProxy2.prototype.goToNextPage = function() {
    this.goToPage(this.currentPage + 1);
  };
  PaginationProxy2.prototype.goToPreviousPage = function() {
    this.goToPage(this.currentPage - 1);
  };
  PaginationProxy2.prototype.goToFirstPage = function() {
    this.goToPage(0);
  };
  PaginationProxy2.prototype.goToLastPage = function() {
    var rowCount = this.rowModel.getRowCount();
    var lastPage = Math.floor(rowCount / this.pageSize);
    this.goToPage(lastPage);
  };
  PaginationProxy2.prototype.getPageSize = function() {
    return this.pageSize;
  };
  PaginationProxy2.prototype.getTotalPages = function() {
    return this.totalPages;
  };
  PaginationProxy2.prototype.setPageSize = function() {
    this.pageSize = this.gridOptionsWrapper.getPaginationPageSize();
    if (this.pageSize == null || this.pageSize < 1) {
      this.pageSize = 100;
    }
  };
  PaginationProxy2.prototype.calculatePages = function() {
    if (this.active) {
      this.setPageSize();
      if (this.paginateChildRows) {
        this.calculatePagesAllRows();
      } else {
        this.calculatePagesMasterRowsOnly();
      }
    } else {
      this.calculatedPagesNotActive();
    }
    this.topRowBounds = this.rowModel.getRowBounds(this.topDisplayedRowIndex);
    if (this.topRowBounds) {
      this.topRowBounds.rowIndex = this.topDisplayedRowIndex;
    }
    this.bottomRowBounds = this.rowModel.getRowBounds(this.bottomDisplayedRowIndex);
    if (this.bottomRowBounds) {
      this.bottomRowBounds.rowIndex = this.bottomDisplayedRowIndex;
    }
    this.setPixelOffset(exists(this.topRowBounds) ? this.topRowBounds.rowTop : 0);
  };
  PaginationProxy2.prototype.setPixelOffset = function(value) {
    if (this.pixelOffset === value) {
      return;
    }
    this.pixelOffset = value;
    this.eventService.dispatchEvent({ type: Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED });
  };
  PaginationProxy2.prototype.setZeroRows = function() {
    this.masterRowCount = 0;
    this.topDisplayedRowIndex = 0;
    this.bottomDisplayedRowIndex = -1;
    this.currentPage = 0;
    this.totalPages = 0;
  };
  PaginationProxy2.prototype.calculatePagesMasterRowsOnly = function() {
    this.masterRowCount = this.rowModel.getTopLevelRowCount();
    if (this.masterRowCount <= 0) {
      this.setZeroRows();
      return;
    }
    var masterLastRowIndex = this.masterRowCount - 1;
    this.totalPages = Math.floor(masterLastRowIndex / this.pageSize) + 1;
    if (this.currentPage >= this.totalPages) {
      this.currentPage = this.totalPages - 1;
    }
    if (!isNumeric(this.currentPage) || this.currentPage < 0) {
      this.currentPage = 0;
    }
    var masterPageStartIndex = this.pageSize * this.currentPage;
    var masterPageEndIndex = this.pageSize * (this.currentPage + 1) - 1;
    if (masterPageEndIndex > masterLastRowIndex) {
      masterPageEndIndex = masterLastRowIndex;
    }
    this.topDisplayedRowIndex = this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex);
    if (masterPageEndIndex === masterLastRowIndex) {
      this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;
    } else {
      var firstIndexNotToShow = this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex + 1);
      this.bottomDisplayedRowIndex = firstIndexNotToShow - 1;
    }
  };
  PaginationProxy2.prototype.getMasterRowCount = function() {
    return this.masterRowCount;
  };
  PaginationProxy2.prototype.calculatePagesAllRows = function() {
    this.masterRowCount = this.rowModel.getRowCount();
    if (this.masterRowCount === 0) {
      this.setZeroRows();
      return;
    }
    var maxRowIndex = this.masterRowCount - 1;
    this.totalPages = Math.floor(maxRowIndex / this.pageSize) + 1;
    if (this.currentPage >= this.totalPages) {
      this.currentPage = this.totalPages - 1;
    }
    if (!isNumeric(this.currentPage) || this.currentPage < 0) {
      this.currentPage = 0;
    }
    this.topDisplayedRowIndex = this.pageSize * this.currentPage;
    this.bottomDisplayedRowIndex = this.pageSize * (this.currentPage + 1) - 1;
    if (this.bottomDisplayedRowIndex > maxRowIndex) {
      this.bottomDisplayedRowIndex = maxRowIndex;
    }
  };
  PaginationProxy2.prototype.calculatedPagesNotActive = function() {
    this.pageSize = this.rowModel.getRowCount();
    this.totalPages = 1;
    this.currentPage = 0;
    this.topDisplayedRowIndex = 0;
    this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;
  };
  __decorate$$([
    Autowired("rowModel")
  ], PaginationProxy2.prototype, "rowModel", void 0);
  __decorate$$([
    PostConstruct
  ], PaginationProxy2.prototype, "postConstruct", null);
  PaginationProxy2 = __decorate$$([
    Bean("paginationProxy")
  ], PaginationProxy2);
  return PaginationProxy2;
}(BeanStub);
var __extends$14 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$_ = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var StylingService = function(_super) {
  __extends$14(StylingService2, _super);
  function StylingService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  StylingService2.prototype.processAllCellClasses = function(colDef, params, onApplicableClass, onNotApplicableClass) {
    this.processClassRules(colDef.cellClassRules, params, onApplicableClass, onNotApplicableClass);
    this.processStaticCellClasses(colDef, params, onApplicableClass);
  };
  StylingService2.prototype.processClassRules = function(classRules, params, onApplicableClass, onNotApplicableClass) {
    if (classRules == null) {
      return;
    }
    var classNames = Object.keys(classRules);
    var classesToApply = {};
    var classesToRemove = {};
    var _loop_1 = function(i3) {
      var className = classNames[i3];
      var rule = classRules[className];
      var resultOfRule;
      if (typeof rule === "string") {
        resultOfRule = this_1.expressionService.evaluate(rule, params);
      } else if (typeof rule === "function") {
        resultOfRule = rule(params);
      }
      className.split(" ").forEach(function(singleClass) {
        if (singleClass == null || singleClass.trim() == "") {
          return;
        }
        resultOfRule ? classesToApply[singleClass] = true : classesToRemove[singleClass] = true;
      });
    };
    var this_1 = this;
    for (var i2 = 0; i2 < classNames.length; i2++) {
      _loop_1(i2);
    }
    if (onNotApplicableClass) {
      Object.keys(classesToRemove).forEach(onNotApplicableClass);
    }
    Object.keys(classesToApply).forEach(onApplicableClass);
  };
  StylingService2.prototype.getStaticCellClasses = function(colDef, params) {
    var cellClass = colDef.cellClass;
    if (!cellClass) {
      return [];
    }
    var classOrClasses;
    if (typeof cellClass === "function") {
      var cellClassFunc = cellClass;
      classOrClasses = cellClassFunc(params);
    } else {
      classOrClasses = cellClass;
    }
    if (typeof classOrClasses === "string") {
      classOrClasses = [classOrClasses];
    }
    return classOrClasses || [];
  };
  StylingService2.prototype.processStaticCellClasses = function(colDef, params, onApplicableClass) {
    var classOrClasses = this.getStaticCellClasses(colDef, params);
    classOrClasses.forEach(function(cssClassItem) {
      onApplicableClass(cssClassItem);
    });
  };
  __decorate$_([
    Autowired("expressionService")
  ], StylingService2.prototype, "expressionService", void 0);
  StylingService2 = __decorate$_([
    Bean("stylingService")
  ], StylingService2);
  return StylingService2;
}(BeanStub);
var __extends$13 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgRadioButton = function(_super) {
  __extends$13(AgRadioButton2, _super);
  function AgRadioButton2(config) {
    return _super.call(this, config, "ag-radio-button", "radio") || this;
  }
  AgRadioButton2.prototype.isSelected = function() {
    return this.eInput.checked;
  };
  AgRadioButton2.prototype.toggle = function() {
    if (this.eInput.disabled) {
      return;
    }
    if (!this.isSelected()) {
      this.setValue(true);
    }
  };
  AgRadioButton2.prototype.addInputListeners = function() {
    _super.prototype.addInputListeners.call(this);
    this.addManagedListener(this.eventService, Events.EVENT_CHECKBOX_CHANGED, this.onChange.bind(this));
  };
  AgRadioButton2.prototype.onChange = function(event) {
    if (event.selected && event.name && this.eInput.name && this.eInput.name === event.name && event.id && this.eInput.id !== event.id) {
      this.setValue(false, true);
    }
  };
  return AgRadioButton2;
}(AgCheckbox);
var __extends$12 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgToggleButton = function(_super) {
  __extends$12(AgToggleButton2, _super);
  function AgToggleButton2(config) {
    return _super.call(this, config, "ag-toggle-button") || this;
  }
  AgToggleButton2.prototype.setValue = function(value, silent) {
    _super.prototype.setValue.call(this, value, silent);
    this.addOrRemoveCssClass("ag-selected", this.getValue());
    return this;
  };
  return AgToggleButton2;
}(AgCheckbox);
var __extends$11 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgInputTextField = function(_super) {
  __extends$11(AgInputTextField2, _super);
  function AgInputTextField2(config, className, inputType) {
    if (className === void 0) {
      className = "ag-text-field";
    }
    if (inputType === void 0) {
      inputType = "text";
    }
    return _super.call(this, config, className, inputType) || this;
  }
  AgInputTextField2.prototype.postConstruct = function() {
    _super.prototype.postConstruct.call(this);
    if (this.config.allowedCharPattern) {
      this.preventDisallowedCharacters();
    }
  };
  AgInputTextField2.prototype.setValue = function(value, silent) {
    var ret = _super.prototype.setValue.call(this, value, silent);
    if (this.eInput.value !== value) {
      this.eInput.value = exists(value) ? value : "";
    }
    return ret;
  };
  AgInputTextField2.prototype.preventDisallowedCharacters = function() {
    var pattern = new RegExp("[" + this.config.allowedCharPattern + "]");
    var preventDisallowedCharacters = function(event) {
      if (event.key && !pattern.test(event.key)) {
        event.preventDefault();
      }
    };
    this.addManagedListener(this.eInput, "keypress", preventDisallowedCharacters);
    this.addManagedListener(this.eInput, "paste", function(e2) {
      var _a2;
      var text = (_a2 = e2.clipboardData) === null || _a2 === void 0 ? void 0 : _a2.getData("text");
      if (text && text.split("").some(function(c2) {
        return !pattern.test(c2);
      })) {
        e2.preventDefault();
      }
    });
  };
  return AgInputTextField2;
}(AgAbstractInputField);
var __extends$10 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgInputTextArea = function(_super) {
  __extends$10(AgInputTextArea2, _super);
  function AgInputTextArea2(config) {
    return _super.call(this, config, "ag-text-area", null, "textarea") || this;
  }
  AgInputTextArea2.prototype.setValue = function(value, silent) {
    var ret = _super.prototype.setValue.call(this, value, silent);
    this.eInput.value = value;
    return ret;
  };
  AgInputTextArea2.prototype.setCols = function(cols) {
    this.eInput.cols = cols;
    return this;
  };
  AgInputTextArea2.prototype.setRows = function(rows) {
    this.eInput.rows = rows;
    return this;
  };
  return AgInputTextArea2;
}(AgAbstractInputField);
var __extends$$ = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgInputNumberField = function(_super) {
  __extends$$(AgInputNumberField2, _super);
  function AgInputNumberField2(config) {
    return _super.call(this, config, "ag-number-field", "number") || this;
  }
  AgInputNumberField2.prototype.postConstruct = function() {
    var _this = this;
    _super.prototype.postConstruct.call(this);
    this.addManagedListener(this.eInput, "blur", function() {
      var floatedValue = parseFloat(_this.eInput.value);
      var value = isNaN(floatedValue) ? "" : _this.normalizeValue(floatedValue.toString());
      if (_this.value !== value) {
        _this.setValue(value);
      }
    });
    this.addManagedListener(this.eInput, "wheel", this.onWheel.bind(this));
    this.eInput.step = "any";
  };
  AgInputNumberField2.prototype.onWheel = function(e2) {
    if (document.activeElement === this.eInput) {
      e2.preventDefault();
    }
  };
  AgInputNumberField2.prototype.normalizeValue = function(value) {
    if (value === "") {
      return "";
    }
    if (this.precision) {
      value = this.adjustPrecision(value);
    }
    var val = parseFloat(value);
    if (this.min != null && val < this.min) {
      value = this.min.toString();
    } else if (this.max != null && val > this.max) {
      value = this.max.toString();
    }
    return value;
  };
  AgInputNumberField2.prototype.adjustPrecision = function(value) {
    if (this.precision) {
      var floatString = parseFloat(value).toFixed(this.precision);
      value = parseFloat(floatString).toString();
    }
    return value;
  };
  AgInputNumberField2.prototype.setMin = function(min) {
    if (this.min === min) {
      return this;
    }
    this.min = min;
    addOrRemoveAttribute(this.eInput, "min", min);
    return this;
  };
  AgInputNumberField2.prototype.setMax = function(max) {
    if (this.max === max) {
      return this;
    }
    this.max = max;
    addOrRemoveAttribute(this.eInput, "max", max);
    return this;
  };
  AgInputNumberField2.prototype.setPrecision = function(precision) {
    this.precision = precision;
    return this;
  };
  AgInputNumberField2.prototype.setStep = function(step) {
    if (this.step === step) {
      return this;
    }
    this.step = step;
    addOrRemoveAttribute(this.eInput, "step", step);
    return this;
  };
  AgInputNumberField2.prototype.setValue = function(value, silent) {
    value = this.adjustPrecision(value);
    var normalizedValue = this.normalizeValue(value);
    if (value != normalizedValue) {
      return this;
    }
    return _super.prototype.setValue.call(this, value, silent);
  };
  return AgInputNumberField2;
}(AgInputTextField);
var __extends$_ = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgInputRange = function(_super) {
  __extends$_(AgInputRange2, _super);
  function AgInputRange2(config) {
    return _super.call(this, config, "ag-range-field", "range") || this;
  }
  AgInputRange2.prototype.postConstruct = function() {
    _super.prototype.postConstruct.call(this);
    var _a2 = this.config, min = _a2.min, max = _a2.max, step = _a2.step;
    if (min != null) {
      this.setMinValue(min);
    }
    if (max != null) {
      this.setMaxValue(max);
    }
    this.setStep(step || 1);
  };
  AgInputRange2.prototype.addInputListeners = function() {
    var _this = this;
    this.addManagedListener(this.eInput, "input", function(e2) {
      var value = e2.target.value;
      _this.setValue(value);
    });
  };
  AgInputRange2.prototype.setMinValue = function(value) {
    this.min = value;
    this.eInput.setAttribute("min", value.toString());
    return this;
  };
  AgInputRange2.prototype.setMaxValue = function(value) {
    this.max = value;
    this.eInput.setAttribute("max", value.toString());
    return this;
  };
  AgInputRange2.prototype.setStep = function(value) {
    this.eInput.setAttribute("step", value.toString());
    return this;
  };
  AgInputRange2.prototype.setValue = function(value, silent) {
    if (this.min != null) {
      value = Math.max(parseFloat(value), this.min).toString();
    }
    if (this.max != null) {
      value = Math.min(parseFloat(value), this.max).toString();
    }
    var ret = _super.prototype.setValue.call(this, value, silent);
    this.eInput.value = value;
    return ret;
  };
  return AgInputRange2;
}(AgAbstractInputField);
var __extends$Z = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$Z = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgSlider = function(_super) {
  __extends$Z(AgSlider2, _super);
  function AgSlider2(config) {
    var _this = _super.call(this, config, AgSlider2.TEMPLATE) || this;
    _this.labelAlignment = "top";
    return _this;
  }
  AgSlider2.prototype.init = function() {
    this.eSlider.addCssClass("ag-slider-field");
  };
  AgSlider2.prototype.onValueChange = function(callbackFn) {
    var _this = this;
    var eventChanged = AgAbstractField.EVENT_CHANGED;
    this.addManagedListener(this.eText, eventChanged, function() {
      var textValue = parseFloat(_this.eText.getValue());
      _this.eSlider.setValue(textValue.toString(), true);
      callbackFn(textValue || 0);
    });
    this.addManagedListener(this.eSlider, eventChanged, function() {
      var sliderValue = _this.eSlider.getValue();
      _this.eText.setValue(sliderValue, true);
      callbackFn(parseFloat(sliderValue));
    });
    return this;
  };
  AgSlider2.prototype.setSliderWidth = function(width) {
    this.eSlider.setWidth(width);
    return this;
  };
  AgSlider2.prototype.setTextFieldWidth = function(width) {
    this.eText.setWidth(width);
    return this;
  };
  AgSlider2.prototype.setMinValue = function(minValue) {
    this.eSlider.setMinValue(minValue);
    this.eText.setMin(minValue);
    return this;
  };
  AgSlider2.prototype.setMaxValue = function(maxValue) {
    this.eSlider.setMaxValue(maxValue);
    this.eText.setMax(maxValue);
    return this;
  };
  AgSlider2.prototype.getValue = function() {
    return this.eText.getValue();
  };
  AgSlider2.prototype.setValue = function(value) {
    if (this.getValue() === value) {
      return this;
    }
    this.eText.setValue(value, true);
    this.eSlider.setValue(value, true);
    this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
    return this;
  };
  AgSlider2.prototype.setStep = function(step) {
    this.eSlider.setStep(step);
    this.eText.setStep(step);
    return this;
  };
  AgSlider2.TEMPLATE = '<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>';
  __decorate$Z([
    RefSelector("eLabel")
  ], AgSlider2.prototype, "eLabel", void 0);
  __decorate$Z([
    RefSelector("eSlider")
  ], AgSlider2.prototype, "eSlider", void 0);
  __decorate$Z([
    RefSelector("eText")
  ], AgSlider2.prototype, "eText", void 0);
  __decorate$Z([
    PostConstruct
  ], AgSlider2.prototype, "init", null);
  return AgSlider2;
}(AgAbstractLabel);
var __extends$Y = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$Y = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgAngleSelect = function(_super) {
  __extends$Y(AgAngleSelect2, _super);
  function AgAngleSelect2(config) {
    var _this = _super.call(this, config, AgAngleSelect2.TEMPLATE) || this;
    _this.radius = 0;
    _this.offsetX = 0;
    _this.offsetY = 0;
    return _this;
  }
  AgAngleSelect2.prototype.postConstruct = function() {
    var _this = this;
    _super.prototype.postConstruct.call(this);
    this.dragListener = {
      eElement: this.eParentCircle,
      dragStartPixels: 0,
      onDragStart: function(e2) {
        _this.parentCircleRect = _this.eParentCircle.getBoundingClientRect();
      },
      onDragging: function(e2) {
        return _this.calculateAngleDrag(e2);
      },
      onDragStop: function() {
      }
    };
    this.dragService.addDragSource(this.dragListener);
    this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("" + this.degrees).onValueChange(function(value) {
      if (value == null || value === "") {
        value = "0";
      }
      value = _this.eAngleValue.normalizeValue(value);
      var floatValue = parseFloat(value);
      if (floatValue > 180) {
        floatValue = floatValue - 360;
      }
      _this.setValue(floatValue);
    });
    this.updateNumberInput();
    if (exists(this.getValue())) {
      this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString());
    }
    this.addManagedListener(this, AgAbstractField.EVENT_CHANGED, function() {
      var eDocument = _this.gridOptionsWrapper.getDocument();
      if (_this.eAngleValue.getInputElement().contains(eDocument.activeElement)) {
        return;
      }
      _this.updateNumberInput();
    });
  };
  AgAngleSelect2.prototype.updateNumberInput = function() {
    var normalizedValue = this.normalizeNegativeValue(this.getValue());
    this.eAngleValue.setValue(normalizedValue.toString());
  };
  AgAngleSelect2.prototype.positionChildCircle = function(radians) {
    var rect = this.parentCircleRect || { width: 24, height: 24 };
    var eChildCircle = this.eChildCircle;
    var centerX = rect.width / 2;
    var centerY = rect.height / 2;
    eChildCircle.style.left = centerX + Math.cos(radians) * 8 + "px";
    eChildCircle.style.top = centerY + Math.sin(radians) * 8 + "px";
  };
  AgAngleSelect2.prototype.calculatePolar = function() {
    var x2 = this.offsetX;
    var y3 = this.offsetY;
    var radians = Math.atan2(y3, x2);
    this.degrees = this.toDegrees(radians);
    this.radius = Math.sqrt(x2 * x2 + y3 * y3);
    this.positionChildCircle(radians);
  };
  AgAngleSelect2.prototype.calculateCartesian = function() {
    var radians = this.toRadians(this.getValue());
    var radius = this.getRadius();
    this.setOffsetX(Math.cos(radians) * radius).setOffsetY(Math.sin(radians) * radius);
  };
  AgAngleSelect2.prototype.setOffsetX = function(offset) {
    if (this.offsetX !== offset) {
      this.offsetX = offset;
      this.calculatePolar();
    }
    return this;
  };
  AgAngleSelect2.prototype.setOffsetY = function(offset) {
    if (this.offsetY !== offset) {
      this.offsetY = offset;
      this.calculatePolar();
    }
    return this;
  };
  AgAngleSelect2.prototype.calculateAngleDrag = function(e2) {
    var rect = this.parentCircleRect;
    var centerX = rect.width / 2;
    var centerY = rect.height / 2;
    var x2 = e2.clientX - rect.left;
    var y3 = e2.clientY - rect.top;
    var dx = x2 - centerX;
    var dy = y3 - centerY;
    var radians = Math.atan2(dy, dx);
    this.setValue(radians, true);
  };
  AgAngleSelect2.prototype.toDegrees = function(radians) {
    return radians / Math.PI * 180;
  };
  AgAngleSelect2.prototype.toRadians = function(degrees) {
    return degrees / 180 * Math.PI;
  };
  AgAngleSelect2.prototype.normalizeNegativeValue = function(degrees) {
    return degrees < 0 ? 360 + degrees : degrees;
  };
  AgAngleSelect2.prototype.normalizeAngle180 = function(radians) {
    radians %= Math.PI * 2;
    if (radians < -Math.PI) {
      radians += Math.PI * 2;
    } else if (radians >= Math.PI) {
      radians -= Math.PI * 2;
    }
    return radians;
  };
  AgAngleSelect2.prototype.getRadius = function() {
    return this.radius;
  };
  AgAngleSelect2.prototype.setRadius = function(r) {
    if (this.radius === r) {
      return this;
    }
    this.radius = r;
    this.calculateCartesian();
    return this;
  };
  AgAngleSelect2.prototype.onValueChange = function(callbackFn) {
    var _this = this;
    this.addManagedListener(this, AgAbstractField.EVENT_CHANGED, function() {
      callbackFn(_this.degrees);
    });
    return this;
  };
  AgAngleSelect2.prototype.getValue = function(radians) {
    return radians ? this.toRadians(this.degrees) : this.degrees;
  };
  AgAngleSelect2.prototype.setValue = function(degrees, radians) {
    var radiansValue;
    if (!radians) {
      radiansValue = this.normalizeAngle180(this.toRadians(degrees));
    } else {
      radiansValue = degrees;
    }
    degrees = this.toDegrees(radiansValue);
    if (this.degrees !== degrees) {
      this.degrees = Math.floor(degrees);
      this.calculateCartesian();
      this.positionChildCircle(radiansValue);
      this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
    }
    return this;
  };
  AgAngleSelect2.prototype.setWidth = function(width) {
    setFixedWidth(this.getGui(), width);
    return this;
  };
  AgAngleSelect2.prototype.setDisabled = function(disabled) {
    _super.prototype.setDisabled.call(this, disabled);
    this.eAngleValue.setDisabled(disabled);
    return this;
  };
  AgAngleSelect2.prototype.destroy = function() {
    this.dragService.removeDragSource(this.dragListener);
    _super.prototype.destroy.call(this);
  };
  AgAngleSelect2.TEMPLATE = '<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>';
  __decorate$Y([
    RefSelector("eLabel")
  ], AgAngleSelect2.prototype, "eLabel", void 0);
  __decorate$Y([
    RefSelector("eParentCircle")
  ], AgAngleSelect2.prototype, "eParentCircle", void 0);
  __decorate$Y([
    RefSelector("eChildCircle")
  ], AgAngleSelect2.prototype, "eChildCircle", void 0);
  __decorate$Y([
    RefSelector("eAngleValue")
  ], AgAngleSelect2.prototype, "eAngleValue", void 0);
  __decorate$Y([
    Autowired("dragService")
  ], AgAngleSelect2.prototype, "dragService", void 0);
  return AgAngleSelect2;
}(AgAbstractLabel);
var __extends$X = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$X = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$8 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var AgColorPanel = function(_super) {
  __extends$X(AgColorPanel2, _super);
  function AgColorPanel2(config) {
    var _this = _super.call(this, AgColorPanel2.TEMPLATE) || this;
    _this.H = 1;
    _this.S = 1;
    _this.B = 1;
    _this.A = 1;
    _this.isSpectrumDragging = false;
    _this.isSpectrumHueDragging = false;
    _this.isSpectrumAlphaDragging = false;
    _this.colorChanged = false;
    _this.picker = config.picker;
    return _this;
  }
  AgColorPanel2.prototype.postConstruct = function() {
    var eGui = this.getGui();
    this.initRecentColors();
    this.addManagedListener(this.spectrumVal, "mousedown", this.onSpectrumDraggerDown.bind(this));
    this.addManagedListener(eGui, "mousemove", this.onSpectrumDraggerMove.bind(this));
    this.addManagedListener(this.spectrumHue, "mousedown", this.onSpectrumHueDown.bind(this));
    this.addManagedListener(eGui, "mousemove", this.onSpectrumHueMove.bind(this));
    this.addManagedListener(this.spectrumAlpha, "mousedown", this.onSpectrumAlphaDown.bind(this));
    this.addManagedListener(eGui, "mousemove", this.onSpectrumAlphaMove.bind(this));
    this.addManagedListener(document, "mouseup", this.onMouseUp.bind(this));
    this.addManagedListener(this.recentColors, "click", this.onRecentColorClick.bind(this));
  };
  AgColorPanel2.prototype.refreshSpectrumRect = function() {
    return this.spectrumValRect = this.spectrumVal.getBoundingClientRect();
  };
  AgColorPanel2.prototype.refreshHueRect = function() {
    return this.spectrumHueRect = this.spectrumHue.getBoundingClientRect();
  };
  AgColorPanel2.prototype.refreshAlphaRect = function() {
    return this.spectrumAlphaRect = this.spectrumAlpha.getBoundingClientRect();
  };
  AgColorPanel2.prototype.onSpectrumDraggerDown = function(e2) {
    this.refreshSpectrumRect();
    this.isSpectrumDragging = true;
    this.moveDragger(e2);
  };
  AgColorPanel2.prototype.onSpectrumDraggerMove = function(e2) {
    if (this.isSpectrumDragging) {
      this.moveDragger(e2);
    }
  };
  AgColorPanel2.prototype.onSpectrumHueDown = function(e2) {
    this.refreshHueRect();
    this.isSpectrumHueDragging = true;
    this.moveHueSlider(e2);
  };
  AgColorPanel2.prototype.onSpectrumHueMove = function(e2) {
    if (this.isSpectrumHueDragging) {
      this.moveHueSlider(e2);
    }
  };
  AgColorPanel2.prototype.onSpectrumAlphaDown = function(e2) {
    this.refreshAlphaRect();
    this.isSpectrumAlphaDragging = true;
    this.moveAlphaSlider(e2);
  };
  AgColorPanel2.prototype.onSpectrumAlphaMove = function(e2) {
    if (this.isSpectrumAlphaDragging) {
      this.moveAlphaSlider(e2);
    }
  };
  AgColorPanel2.prototype.onMouseUp = function() {
    this.isSpectrumDragging = false;
    this.isSpectrumHueDragging = false;
    this.isSpectrumAlphaDragging = false;
  };
  AgColorPanel2.prototype.moveDragger = function(e2) {
    var valRect = this.spectrumValRect;
    if (valRect) {
      var x2 = e2.clientX - valRect.left;
      var y3 = e2.clientY - valRect.top;
      x2 = Math.max(x2, 0);
      x2 = Math.min(x2, valRect.width);
      y3 = Math.max(y3, 0);
      y3 = Math.min(y3, valRect.height);
      this.setSpectrumValue(x2 / valRect.width, 1 - y3 / valRect.height);
    }
  };
  AgColorPanel2.prototype.moveHueSlider = function(e2) {
    var hueRect = this.spectrumHueRect;
    if (hueRect) {
      var slider = this.spectrumHueSlider;
      var sliderRect = slider.getBoundingClientRect();
      var x2 = e2.clientX - hueRect.left;
      x2 = Math.max(x2, 0);
      x2 = Math.min(x2, hueRect.width);
      this.H = 1 - x2 / hueRect.width;
      slider.style.left = x2 + sliderRect.width / 2 + "px";
      this.update();
    }
  };
  AgColorPanel2.prototype.moveAlphaSlider = function(e2) {
    var alphaRect = this.spectrumAlphaRect;
    if (alphaRect) {
      var slider = this.spectrumAlphaSlider;
      var sliderRect = slider.getBoundingClientRect();
      var x2 = e2.clientX - alphaRect.left;
      x2 = Math.max(x2, 0);
      x2 = Math.min(x2, alphaRect.width);
      this.A = x2 / alphaRect.width;
      slider.style.left = x2 + sliderRect.width / 2 + "px";
      this.update();
    }
  };
  AgColorPanel2.prototype.update = function() {
    var color = Color.fromHSB(this.H * 360, this.S, this.B, this.A);
    var spectrumColor = Color.fromHSB(this.H * 360, 1, 1);
    var rgbaColor = color.toRgbaString();
    var colorPicker = this.picker;
    var existingColor = Color.fromString(colorPicker.getValue());
    if (existingColor.toRgbaString() !== rgbaColor) {
      this.colorChanged = true;
    }
    colorPicker.setValue(rgbaColor);
    this.spectrumColor.style.backgroundColor = spectrumColor.toRgbaString();
    this.spectrumDragger.style.backgroundColor = rgbaColor;
  };
  AgColorPanel2.prototype.setSpectrumValue = function(saturation, brightness) {
    var valRect = this.spectrumValRect || this.refreshSpectrumRect();
    if (valRect) {
      var dragger = this.spectrumDragger;
      var draggerRect = dragger.getBoundingClientRect();
      saturation = Math.max(0, saturation);
      saturation = Math.min(1, saturation);
      brightness = Math.max(0, brightness);
      brightness = Math.min(1, brightness);
      this.S = saturation;
      this.B = brightness;
      dragger.style.left = saturation * valRect.width - draggerRect.width / 2 + "px";
      dragger.style.top = (1 - brightness) * valRect.height - draggerRect.height / 2 + "px";
      this.update();
    }
  };
  AgColorPanel2.prototype.initRecentColors = function() {
    var recentColors = AgColorPanel2.recentColors;
    var innerHtml = recentColors.map(function(color, index) {
      return '<div class="ag-recent-color" id=' + index + ' style="background-color: ' + color + '; width: 15px; height: 15px;" recent-color="' + color + '"></div>';
    });
    this.recentColors.innerHTML = innerHtml.join("");
  };
  AgColorPanel2.prototype.setValue = function(val) {
    var color = Color.fromString(val);
    var _a2 = __read$8(color.toHSB(), 3), h4 = _a2[0], s3 = _a2[1], b2 = _a2[2];
    this.H = (isNaN(h4) ? 0 : h4) / 360;
    this.A = color.a;
    var spectrumHueRect = this.spectrumHueRect || this.refreshHueRect();
    var spectrumAlphaRect = this.spectrumAlphaRect || this.refreshAlphaRect();
    this.spectrumHueSlider.style.left = (this.H - 1) * -spectrumHueRect.width + "px";
    this.spectrumAlphaSlider.style.left = this.A * spectrumAlphaRect.width + "px";
    this.setSpectrumValue(s3, b2);
  };
  AgColorPanel2.prototype.onRecentColorClick = function(e2) {
    var target = e2.target;
    if (!exists(target.id)) {
      return;
    }
    var id = parseInt(target.id, 10);
    this.setValue(AgColorPanel2.recentColors[id]);
    this.destroy();
  };
  AgColorPanel2.prototype.addRecentColor = function() {
    var color = Color.fromHSB(this.H * 360, this.S, this.B, this.A);
    var rgbaColor = color.toRgbaString();
    var recentColors = AgColorPanel2.recentColors;
    if (!this.colorChanged || recentColors[0] === rgbaColor) {
      return;
    }
    recentColors = recentColors.filter(function(currentColor) {
      return currentColor != rgbaColor;
    });
    recentColors = [rgbaColor].concat(recentColors);
    if (recentColors.length > AgColorPanel2.maxRecentColors) {
      recentColors = recentColors.slice(0, AgColorPanel2.maxRecentColors);
    }
    AgColorPanel2.recentColors = recentColors;
  };
  AgColorPanel2.prototype.destroy = function() {
    this.addRecentColor();
    _super.prototype.destroy.call(this);
  };
  AgColorPanel2.maxRecentColors = 8;
  AgColorPanel2.recentColors = [];
  AgColorPanel2.TEMPLATE = '<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>';
  __decorate$X([
    RefSelector("spectrumColor")
  ], AgColorPanel2.prototype, "spectrumColor", void 0);
  __decorate$X([
    RefSelector("spectrumVal")
  ], AgColorPanel2.prototype, "spectrumVal", void 0);
  __decorate$X([
    RefSelector("spectrumDragger")
  ], AgColorPanel2.prototype, "spectrumDragger", void 0);
  __decorate$X([
    RefSelector("spectrumHue")
  ], AgColorPanel2.prototype, "spectrumHue", void 0);
  __decorate$X([
    RefSelector("spectrumHueSlider")
  ], AgColorPanel2.prototype, "spectrumHueSlider", void 0);
  __decorate$X([
    RefSelector("spectrumAlpha")
  ], AgColorPanel2.prototype, "spectrumAlpha", void 0);
  __decorate$X([
    RefSelector("spectrumAlphaSlider")
  ], AgColorPanel2.prototype, "spectrumAlphaSlider", void 0);
  __decorate$X([
    RefSelector("recentColors")
  ], AgColorPanel2.prototype, "recentColors", void 0);
  __decorate$X([
    PostConstruct
  ], AgColorPanel2.prototype, "postConstruct", null);
  return AgColorPanel2;
}(Component);
var __extends$W = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$W = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgPanel = function(_super) {
  __extends$W(AgPanel2, _super);
  function AgPanel2(config) {
    var _this = _super.call(this, AgPanel2.getTemplate(config)) || this;
    _this.closable = true;
    _this.config = config;
    return _this;
  }
  AgPanel2.getTemplate = function(config) {
    var cssIdentifier = config && config.cssIdentifier || "default";
    return '<div class="ag-panel ag-' + cssIdentifier + '-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-' + cssIdentifier + '-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-' + cssIdentifier + '-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-' + cssIdentifier + '-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-' + cssIdentifier + '-panel-content-wrapper"></div>\n        </div>';
  };
  AgPanel2.prototype.postConstruct = function() {
    var _this = this;
    var _a2 = this.config, component = _a2.component, closable = _a2.closable, hideTitleBar = _a2.hideTitleBar, title = _a2.title, _b = _a2.minWidth, minWidth = _b === void 0 ? 250 : _b, width = _a2.width, _c = _a2.minHeight, minHeight = _c === void 0 ? 250 : _c, height = _a2.height, centered = _a2.centered, popup = _a2.popup, x2 = _a2.x, y3 = _a2.y;
    this.positionableFeature = new PositionableFeature(this.getGui(), {
      minWidth,
      width,
      minHeight,
      height,
      centered,
      x: x2,
      y: y3,
      popup,
      calculateTopBuffer: function() {
        return _this.positionableFeature.getHeight() - _this.getBodyHeight();
      }
    });
    this.createManagedBean(this.positionableFeature);
    var eGui = this.getGui();
    if (component) {
      this.setBodyComponent(component);
    }
    if (!hideTitleBar) {
      if (title) {
        this.setTitle(title);
      }
      this.setClosable(closable != null ? closable : this.closable);
    } else {
      this.eTitleBar.classList.add("ag-hidden");
    }
    this.addManagedListener(this.eTitleBar, "mousedown", function(e2) {
      var eDocument = _this.gridOptionsWrapper.getDocument();
      if (eGui.contains(e2.relatedTarget) || eGui.contains(eDocument.activeElement) || _this.eTitleBarButtons.contains(e2.target)) {
        e2.preventDefault();
        return;
      }
      var focusEl = _this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");
      if (focusEl) {
        focusEl.focus();
      }
    });
    if (popup && this.positionableFeature.isPositioned()) {
      return;
    }
    if (this.renderComponent) {
      this.renderComponent();
    }
    this.positionableFeature.initialisePosition();
    this.eContentWrapper.style.height = "0";
  };
  AgPanel2.prototype.renderComponent = function() {
    var _this = this;
    var eGui = this.getGui();
    eGui.focus();
    this.close = function() {
      eGui.parentElement.removeChild(eGui);
      _this.destroy();
    };
  };
  AgPanel2.prototype.getHeight = function() {
    return this.positionableFeature.getHeight();
  };
  AgPanel2.prototype.setHeight = function(height) {
    this.positionableFeature.setHeight(height);
  };
  AgPanel2.prototype.getWidth = function() {
    return this.positionableFeature.getWidth();
  };
  AgPanel2.prototype.setWidth = function(width) {
    this.positionableFeature.setWidth(width);
  };
  AgPanel2.prototype.setClosable = function(closable) {
    if (closable !== this.closable) {
      this.closable = closable;
    }
    if (closable) {
      var closeButtonComp = this.closeButtonComp = new Component(AgPanel2.CLOSE_BTN_TEMPLATE);
      this.getContext().createBean(closeButtonComp);
      var eGui = closeButtonComp.getGui();
      var child = createIconNoSpan("close", this.gridOptionsWrapper);
      child.classList.add("ag-panel-title-bar-button-icon");
      eGui.appendChild(child);
      this.addTitleBarButton(closeButtonComp);
      closeButtonComp.addManagedListener(eGui, "click", this.onBtClose.bind(this));
    } else if (this.closeButtonComp) {
      var eGui = this.closeButtonComp.getGui();
      eGui.parentElement.removeChild(eGui);
      this.closeButtonComp = this.destroyBean(this.closeButtonComp);
    }
  };
  AgPanel2.prototype.setBodyComponent = function(bodyComponent) {
    bodyComponent.setParentComponent(this);
    this.eContentWrapper.appendChild(bodyComponent.getGui());
  };
  AgPanel2.prototype.addTitleBarButton = function(button2, position) {
    var eTitleBarButtons = this.eTitleBarButtons;
    var buttons = eTitleBarButtons.children;
    var len = buttons.length;
    if (position == null) {
      position = len;
    }
    position = Math.max(0, Math.min(position, len));
    button2.addCssClass("ag-panel-title-bar-button");
    var eGui = button2.getGui();
    if (position === 0) {
      eTitleBarButtons.insertAdjacentElement("afterbegin", eGui);
    } else if (position === len) {
      eTitleBarButtons.insertAdjacentElement("beforeend", eGui);
    } else {
      buttons[position - 1].insertAdjacentElement("afterend", eGui);
    }
    button2.setParentComponent(this);
  };
  AgPanel2.prototype.getBodyHeight = function() {
    return getInnerHeight(this.eContentWrapper);
  };
  AgPanel2.prototype.getBodyWidth = function() {
    return getInnerWidth(this.eContentWrapper);
  };
  AgPanel2.prototype.setTitle = function(title) {
    this.eTitle.innerText = title;
  };
  AgPanel2.prototype.onBtClose = function() {
    this.close();
  };
  AgPanel2.prototype.destroy = function() {
    if (this.closeButtonComp) {
      this.closeButtonComp = this.destroyBean(this.closeButtonComp);
    }
    var eGui = this.getGui();
    if (eGui && eGui.offsetParent) {
      this.close();
    }
    _super.prototype.destroy.call(this);
  };
  AgPanel2.CLOSE_BTN_TEMPLATE = '<div class="ag-button"></div>';
  __decorate$W([
    RefSelector("eContentWrapper")
  ], AgPanel2.prototype, "eContentWrapper", void 0);
  __decorate$W([
    RefSelector("eTitleBar")
  ], AgPanel2.prototype, "eTitleBar", void 0);
  __decorate$W([
    RefSelector("eTitleBarButtons")
  ], AgPanel2.prototype, "eTitleBarButtons", void 0);
  __decorate$W([
    RefSelector("eTitle")
  ], AgPanel2.prototype, "eTitle", void 0);
  __decorate$W([
    PostConstruct
  ], AgPanel2.prototype, "postConstruct", null);
  return AgPanel2;
}(Component);
var __extends$V = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$1$1 = function() {
  __assign$1$1 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$1$1.apply(this, arguments);
};
var __decorate$V = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgDialog = function(_super) {
  __extends$V(AgDialog2, _super);
  function AgDialog2(config) {
    var _this = _super.call(this, __assign$1$1(__assign$1$1({}, config), { popup: true })) || this;
    _this.isMaximizable = false;
    _this.isMaximized = false;
    _this.maximizeListeners = [];
    _this.resizeListenerDestroy = null;
    _this.lastPosition = {
      x: 0,
      y: 0,
      width: 0,
      height: 0
    };
    return _this;
  }
  AgDialog2.prototype.postConstruct = function() {
    var _this = this;
    var eGui = this.getGui();
    var _a2 = this.config, movable = _a2.movable, resizable = _a2.resizable, maximizable = _a2.maximizable;
    this.addCssClass("ag-dialog");
    _super.prototype.postConstruct.call(this);
    this.addManagedListener(eGui, "focusin", function(e2) {
      if (eGui.contains(e2.relatedTarget)) {
        return;
      }
      _this.popupService.bringPopupToFront(eGui);
    });
    if (movable) {
      this.setMovable(movable);
    }
    if (maximizable) {
      this.setMaximizable(maximizable);
    }
    if (resizable) {
      this.setResizable(resizable);
    }
  };
  AgDialog2.prototype.renderComponent = function() {
    var eGui = this.getGui();
    var _a2 = this.config, alwaysOnTop = _a2.alwaysOnTop, modal = _a2.modal, title = _a2.title;
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = this.popupService.addPopup({
      modal,
      eChild: eGui,
      closeOnEsc: true,
      closedCallback: this.destroy.bind(this),
      alwaysOnTop,
      ariaLabel: title || translate2("ariaLabelDialog", "Dialog")
    });
    if (addPopupRes) {
      this.close = addPopupRes.hideFunc;
    }
  };
  AgDialog2.prototype.toggleMaximize = function() {
    var position = this.positionableFeature.getPosition();
    if (this.isMaximized) {
      var _a2 = this.lastPosition, x2 = _a2.x, y3 = _a2.y, width = _a2.width, height = _a2.height;
      this.setWidth(width);
      this.setHeight(height);
      this.positionableFeature.offsetElement(x2, y3);
    } else {
      this.lastPosition.width = this.getWidth();
      this.lastPosition.height = this.getHeight();
      this.lastPosition.x = position.x;
      this.lastPosition.y = position.y;
      this.positionableFeature.offsetElement(0, 0);
      this.setHeight("100%");
      this.setWidth("100%");
    }
    this.isMaximized = !this.isMaximized;
    this.refreshMaximizeIcon();
  };
  AgDialog2.prototype.refreshMaximizeIcon = function() {
    setDisplayed(this.maximizeIcon, !this.isMaximized);
    setDisplayed(this.minimizeIcon, this.isMaximized);
  };
  AgDialog2.prototype.clearMaximizebleListeners = function() {
    if (this.maximizeListeners.length) {
      this.maximizeListeners.forEach(function(destroyListener) {
        return destroyListener();
      });
      this.maximizeListeners.length = 0;
    }
    if (this.resizeListenerDestroy) {
      this.resizeListenerDestroy();
      this.resizeListenerDestroy = null;
    }
  };
  AgDialog2.prototype.destroy = function() {
    this.maximizeButtonComp = this.destroyBean(this.maximizeButtonComp);
    this.clearMaximizebleListeners();
    _super.prototype.destroy.call(this);
  };
  AgDialog2.prototype.setResizable = function(resizable) {
    this.positionableFeature.setResizable(resizable);
  };
  AgDialog2.prototype.setMovable = function(movable) {
    this.positionableFeature.setMovable(movable, this.eTitleBar);
  };
  AgDialog2.prototype.setMaximizable = function(maximizable) {
    var _this = this;
    if (!maximizable) {
      this.clearMaximizebleListeners();
      if (this.maximizeButtonComp) {
        this.destroyBean(this.maximizeButtonComp);
        this.maximizeButtonComp = this.maximizeIcon = this.minimizeIcon = void 0;
      }
      return;
    }
    var eTitleBar = this.eTitleBar;
    if (!eTitleBar || maximizable === this.isMaximizable) {
      return;
    }
    var maximizeButtonComp = this.maximizeButtonComp = this.createBean(new Component('<div class="ag-dialog-button"></span>'));
    var eGui = maximizeButtonComp.getGui();
    eGui.appendChild(this.maximizeIcon = createIconNoSpan("maximize", this.gridOptionsWrapper));
    this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon");
    eGui.appendChild(this.minimizeIcon = createIconNoSpan("minimize", this.gridOptionsWrapper));
    this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon", "ag-hidden");
    maximizeButtonComp.addManagedListener(eGui, "click", this.toggleMaximize.bind(this));
    this.addTitleBarButton(maximizeButtonComp, 0);
    this.maximizeListeners.push(this.addManagedListener(eTitleBar, "dblclick", this.toggleMaximize.bind(this)));
    this.resizeListenerDestroy = this.addManagedListener(this, "resize", function() {
      _this.isMaximized = false;
      _this.refreshMaximizeIcon();
    });
  };
  __decorate$V([
    Autowired("popupService")
  ], AgDialog2.prototype, "popupService", void 0);
  return AgDialog2;
}(AgPanel);
var __extends$U = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var AgColorPicker = function(_super) {
  __extends$U(AgColorPicker2, _super);
  function AgColorPicker2(config) {
    var _this = _super.call(this, config, "ag-color-picker", "colorPicker") || this;
    if (config && config.color) {
      _this.value = config.color;
    }
    return _this;
  }
  AgColorPicker2.prototype.postConstruct = function() {
    _super.prototype.postConstruct.call(this);
    if (this.value) {
      this.setValue(this.value);
    }
  };
  AgColorPicker2.prototype.showPicker = function() {
    var _this = this;
    var eGuiRect = this.getGui().getBoundingClientRect();
    var colorDialog = this.createBean(new AgDialog({
      closable: false,
      modal: true,
      hideTitleBar: true,
      minWidth: 190,
      width: 190,
      height: 250,
      x: eGuiRect.right - 190,
      y: eGuiRect.top - 250
    }));
    this.isPickerDisplayed = true;
    colorDialog.addCssClass("ag-color-dialog");
    setAriaExpanded(this.eWrapper, true);
    var colorPanel = this.createBean(new AgColorPanel({ picker: this }));
    colorPanel.addDestroyFunc(function() {
      if (colorDialog.isAlive()) {
        _this.destroyBean(colorDialog);
      }
    });
    colorDialog.setParentComponent(this);
    colorDialog.setBodyComponent(colorPanel);
    colorPanel.setValue(this.getValue());
    colorDialog.addDestroyFunc(function() {
      if (!_this.isDestroyingPicker) {
        _this.isDestroyingPicker = true;
        if (colorPanel.isAlive()) {
          _this.destroyBean(colorPanel);
        }
      } else {
        _this.isDestroyingPicker = false;
      }
      if (_this.isAlive()) {
        setAriaExpanded(_this.eWrapper, false);
        _this.getFocusableElement().focus();
      }
      _this.isPickerDisplayed = false;
    });
    return colorDialog;
  };
  AgColorPicker2.prototype.setValue = function(color) {
    if (this.value === color) {
      return this;
    }
    this.eDisplayField.style.backgroundColor = color;
    return _super.prototype.setValue.call(this, color);
  };
  AgColorPicker2.prototype.getValue = function() {
    return this.value;
  };
  return AgColorPicker2;
}(AgPickerField);
var __extends$T = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$U = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgGroupComponent = function(_super) {
  __extends$T(AgGroupComponent2, _super);
  function AgGroupComponent2(params) {
    if (params === void 0) {
      params = {};
    }
    var _this = _super.call(this, AgGroupComponent2.getTemplate(params)) || this;
    _this.suppressEnabledCheckbox = true;
    _this.suppressOpenCloseIcons = false;
    var title = params.title, enabled = params.enabled, items = params.items, suppressEnabledCheckbox = params.suppressEnabledCheckbox, suppressOpenCloseIcons = params.suppressOpenCloseIcons;
    _this.title = title;
    _this.cssIdentifier = params.cssIdentifier || "default";
    _this.enabled = enabled != null ? enabled : true;
    _this.items = items || [];
    _this.alignItems = params.alignItems || "center";
    if (suppressEnabledCheckbox != null) {
      _this.suppressEnabledCheckbox = suppressEnabledCheckbox;
    }
    if (suppressOpenCloseIcons != null) {
      _this.suppressOpenCloseIcons = suppressOpenCloseIcons;
    }
    return _this;
  }
  AgGroupComponent2.getTemplate = function(params) {
    var cssIdentifier = params.cssIdentifier || "default";
    var direction = params.direction || "vertical";
    return '<div class="ag-group ag-' + cssIdentifier + '-group" role="presentation">\n            <div class="ag-group-title-bar ag-' + cssIdentifier + '-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-' + cssIdentifier + '-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-' + cssIdentifier + '-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-' + cssIdentifier + '-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-' + cssIdentifier + '-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-' + direction + " ag-" + cssIdentifier + '-group-container"></div>\n        </div>';
  };
  AgGroupComponent2.prototype.postConstruct = function() {
    if (this.items.length) {
      var initialItems = this.items;
      this.items = [];
      this.addItems(initialItems);
    }
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    this.cbGroupEnabled.setLabel(localeTextFunc("enabled", "Enabled"));
    if (this.title) {
      this.setTitle(this.title);
    }
    if (this.enabled) {
      this.setEnabled(this.enabled);
    }
    this.setAlignItems(this.alignItems);
    this.hideEnabledCheckbox(this.suppressEnabledCheckbox);
    this.hideOpenCloseIcons(this.suppressOpenCloseIcons);
    this.setupExpandContract();
    this.refreshAriaStatus();
    this.refreshChildDisplay();
  };
  AgGroupComponent2.prototype.setupExpandContract = function() {
    var _this = this;
    this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed", this.gridOptionsWrapper, null));
    this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen", this.gridOptionsWrapper, null));
    this.addManagedListener(this.eTitleBar, "click", function() {
      return _this.toggleGroupExpand();
    });
    this.addManagedListener(this.eTitleBar, "keydown", function(e2) {
      switch (e2.key) {
        case KeyCode.ENTER:
        case KeyCode.SPACE:
          e2.preventDefault();
          _this.toggleGroupExpand();
          break;
        case KeyCode.RIGHT:
        case KeyCode.LEFT:
          e2.preventDefault();
          _this.toggleGroupExpand(e2.key === KeyCode.RIGHT);
          break;
      }
    });
  };
  AgGroupComponent2.prototype.refreshAriaStatus = function() {
    if (!this.suppressOpenCloseIcons) {
      setAriaExpanded(this.eTitleBar, this.expanded);
    }
  };
  AgGroupComponent2.prototype.refreshChildDisplay = function() {
    var showIcon = !this.suppressOpenCloseIcons;
    setDisplayed(this.eToolbar, this.expanded && !this.suppressEnabledCheckbox);
    setDisplayed(this.eGroupOpenedIcon, showIcon && this.expanded);
    setDisplayed(this.eGroupClosedIcon, showIcon && !this.expanded);
  };
  AgGroupComponent2.prototype.isExpanded = function() {
    return this.expanded;
  };
  AgGroupComponent2.prototype.setAlignItems = function(alignment) {
    if (this.alignItems !== alignment) {
      this.removeCssClass("ag-group-item-alignment-" + this.alignItems);
    }
    this.alignItems = alignment;
    var newCls = "ag-group-item-alignment-" + this.alignItems;
    this.addCssClass(newCls);
    return this;
  };
  AgGroupComponent2.prototype.toggleGroupExpand = function(expanded) {
    if (this.suppressOpenCloseIcons) {
      this.expanded = true;
      this.refreshChildDisplay();
      setDisplayed(this.eContainer, true);
      return this;
    }
    expanded = expanded != null ? expanded : !this.expanded;
    if (this.expanded === expanded) {
      return this;
    }
    this.expanded = expanded;
    this.refreshAriaStatus();
    this.refreshChildDisplay();
    setDisplayed(this.eContainer, expanded);
    this.dispatchEvent({ type: this.expanded ? AgGroupComponent2.EVENT_EXPANDED : AgGroupComponent2.EVENT_COLLAPSED });
    return this;
  };
  AgGroupComponent2.prototype.addItems = function(items) {
    var _this = this;
    items.forEach(function(item) {
      return _this.addItem(item);
    });
  };
  AgGroupComponent2.prototype.addItem = function(item) {
    var container = this.eContainer;
    var el2 = item instanceof Component ? item.getGui() : item;
    el2.classList.add("ag-group-item", "ag-" + this.cssIdentifier + "-group-item");
    container.appendChild(el2);
    this.items.push(el2);
  };
  AgGroupComponent2.prototype.hideItem = function(hide, index) {
    var itemToHide = this.items[index];
    itemToHide.classList.toggle("ag-hidden", hide);
  };
  AgGroupComponent2.prototype.setTitle = function(title) {
    this.eTitle.innerText = title;
    return this;
  };
  AgGroupComponent2.prototype.addCssClassToTitleBar = function(cssClass) {
    this.eTitleBar.classList.add(cssClass);
  };
  AgGroupComponent2.prototype.setEnabled = function(enabled, skipToggle) {
    this.enabled = enabled;
    this.refreshDisabledStyles();
    this.toggleGroupExpand(enabled);
    if (!skipToggle) {
      this.cbGroupEnabled.setValue(enabled);
    }
    return this;
  };
  AgGroupComponent2.prototype.isEnabled = function() {
    return this.enabled;
  };
  AgGroupComponent2.prototype.onEnableChange = function(callbackFn) {
    var _this = this;
    this.cbGroupEnabled.onValueChange(function(newSelection) {
      _this.setEnabled(newSelection, true);
      callbackFn(newSelection);
    });
    return this;
  };
  AgGroupComponent2.prototype.hideEnabledCheckbox = function(hide) {
    this.suppressEnabledCheckbox = hide;
    this.refreshChildDisplay();
    this.refreshDisabledStyles();
    return this;
  };
  AgGroupComponent2.prototype.hideOpenCloseIcons = function(hide) {
    this.suppressOpenCloseIcons = hide;
    if (hide) {
      this.toggleGroupExpand(true);
    }
    return this;
  };
  AgGroupComponent2.prototype.refreshDisabledStyles = function() {
    this.addOrRemoveCssClass("ag-disabled", !this.enabled);
    if (this.suppressEnabledCheckbox && !this.enabled) {
      this.eTitleBar.classList.add("ag-disabled-group-title-bar");
      this.eTitleBar.removeAttribute("tabindex");
    } else {
      this.eTitleBar.classList.remove("ag-disabled-group-title-bar");
      this.eTitleBar.setAttribute("tabindex", "0");
    }
    this.eContainer.classList.toggle("ag-disabled-group-container", !this.enabled);
  };
  AgGroupComponent2.EVENT_EXPANDED = "expanded";
  AgGroupComponent2.EVENT_COLLAPSED = "collapsed";
  __decorate$U([
    RefSelector("eTitleBar")
  ], AgGroupComponent2.prototype, "eTitleBar", void 0);
  __decorate$U([
    RefSelector("eGroupOpenedIcon")
  ], AgGroupComponent2.prototype, "eGroupOpenedIcon", void 0);
  __decorate$U([
    RefSelector("eGroupClosedIcon")
  ], AgGroupComponent2.prototype, "eGroupClosedIcon", void 0);
  __decorate$U([
    RefSelector("eToolbar")
  ], AgGroupComponent2.prototype, "eToolbar", void 0);
  __decorate$U([
    RefSelector("cbGroupEnabled")
  ], AgGroupComponent2.prototype, "cbGroupEnabled", void 0);
  __decorate$U([
    RefSelector("eTitle")
  ], AgGroupComponent2.prototype, "eTitle", void 0);
  __decorate$U([
    RefSelector("eContainer")
  ], AgGroupComponent2.prototype, "eContainer", void 0);
  __decorate$U([
    PostConstruct
  ], AgGroupComponent2.prototype, "postConstruct", null);
  return AgGroupComponent2;
}(Component);
var __extends$S = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$T = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TabGuardCtrl = function(_super) {
  __extends$S(TabGuardCtrl2, _super);
  function TabGuardCtrl2(params) {
    var _this = _super.call(this) || this;
    _this.skipTabGuardFocus = false;
    var comp = params.comp, eTopGuard = params.eTopGuard, eBottomGuard = params.eBottomGuard, focusInnerElement = params.focusInnerElement, onFocusIn = params.onFocusIn, onFocusOut = params.onFocusOut, shouldStopEventPropagation = params.shouldStopEventPropagation, onTabKeyDown = params.onTabKeyDown, handleKeyDown = params.handleKeyDown, eFocusableElement = params.eFocusableElement;
    _this.comp = comp;
    _this.eTopGuard = eTopGuard;
    _this.eBottomGuard = eBottomGuard;
    _this.providedFocusInnerElement = focusInnerElement;
    _this.eFocusableElement = eFocusableElement;
    _this.providedFocusIn = onFocusIn;
    _this.providedFocusOut = onFocusOut;
    _this.providedShouldStopEventPropagation = shouldStopEventPropagation;
    _this.providedOnTabKeyDown = onTabKeyDown;
    _this.providedHandleKeyDown = handleKeyDown;
    return _this;
  }
  TabGuardCtrl2.prototype.postConstruct = function() {
    var _this = this;
    this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement, {
      shouldStopEventPropagation: function() {
        return _this.shouldStopEventPropagation();
      },
      onTabKeyDown: function(e2) {
        return _this.onTabKeyDown(e2);
      },
      handleKeyDown: function(e2) {
        return _this.handleKeyDown(e2);
      },
      onFocusIn: function(e2) {
        return _this.onFocusIn(e2);
      },
      onFocusOut: function(e2) {
        return _this.onFocusOut(e2);
      }
    }));
    this.activateTabGuards();
    [this.eTopGuard, this.eBottomGuard].forEach(function(guard) {
      return _this.addManagedListener(guard, "focus", _this.onFocus.bind(_this));
    });
  };
  TabGuardCtrl2.prototype.handleKeyDown = function(e2) {
    if (this.providedHandleKeyDown) {
      this.providedHandleKeyDown(e2);
    }
  };
  TabGuardCtrl2.prototype.tabGuardsAreActive = function() {
    return !!this.eTopGuard && this.eTopGuard.hasAttribute("tabIndex");
  };
  TabGuardCtrl2.prototype.shouldStopEventPropagation = function() {
    if (this.providedShouldStopEventPropagation) {
      return this.providedShouldStopEventPropagation();
    }
    return false;
  };
  TabGuardCtrl2.prototype.activateTabGuards = function() {
    this.comp.setTabIndex(this.getGridTabIndex());
  };
  TabGuardCtrl2.prototype.deactivateTabGuards = function() {
    this.comp.setTabIndex();
  };
  TabGuardCtrl2.prototype.onFocus = function(e2) {
    if (this.skipTabGuardFocus) {
      this.skipTabGuardFocus = false;
      return;
    }
    var fromBottom = e2.target === this.eBottomGuard;
    if (this.providedFocusInnerElement) {
      this.providedFocusInnerElement(fromBottom);
    } else {
      this.focusInnerElement(fromBottom);
    }
  };
  TabGuardCtrl2.prototype.onFocusIn = function(e2) {
    if (this.providedFocusIn && this.providedFocusIn(e2)) {
      return;
    }
    this.deactivateTabGuards();
  };
  TabGuardCtrl2.prototype.onFocusOut = function(e2) {
    if (this.providedFocusOut && this.providedFocusOut(e2)) {
      return;
    }
    if (!this.eFocusableElement.contains(e2.relatedTarget)) {
      this.activateTabGuards();
    }
  };
  TabGuardCtrl2.prototype.onTabKeyDown = function(e2) {
    var _this = this;
    if (this.providedOnTabKeyDown) {
      this.providedOnTabKeyDown(e2);
      return;
    }
    if (e2.defaultPrevented) {
      return;
    }
    var tabGuardsAreActive = this.tabGuardsAreActive();
    if (tabGuardsAreActive) {
      this.deactivateTabGuards();
    }
    var nextRoot = this.getNextFocusableElement(e2.shiftKey);
    if (tabGuardsAreActive) {
      setTimeout(function() {
        return _this.activateTabGuards();
      }, 0);
    }
    if (!nextRoot) {
      return;
    }
    nextRoot.focus();
    e2.preventDefault();
  };
  TabGuardCtrl2.prototype.getGridTabIndex = function() {
    return this.gridOptionsWrapper.getGridTabIndex();
  };
  TabGuardCtrl2.prototype.focusInnerElement = function(fromBottom) {
    if (fromBottom === void 0) {
      fromBottom = false;
    }
    var focusable = this.focusService.findFocusableElements(this.eFocusableElement);
    if (this.tabGuardsAreActive()) {
      focusable.splice(0, 1);
      focusable.splice(focusable.length - 1, 1);
    }
    if (!focusable.length) {
      return;
    }
    focusable[fromBottom ? focusable.length - 1 : 0].focus();
  };
  TabGuardCtrl2.prototype.getNextFocusableElement = function(backwards) {
    return this.focusService.findNextFocusableElement(this.eFocusableElement, false, backwards);
  };
  TabGuardCtrl2.prototype.forceFocusOutOfContainer = function(up) {
    if (up === void 0) {
      up = false;
    }
    var tabGuardToFocus = up ? this.eTopGuard : this.eBottomGuard;
    this.activateTabGuards();
    this.skipTabGuardFocus = true;
    tabGuardToFocus.focus();
  };
  __decorate$T([
    Autowired("focusService")
  ], TabGuardCtrl2.prototype, "focusService", void 0);
  __decorate$T([
    PostConstruct
  ], TabGuardCtrl2.prototype, "postConstruct", null);
  return TabGuardCtrl2;
}(BeanStub);
var __extends$R = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __read$7 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$6 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$7(arguments[i2]));
  return ar;
};
var TabGuardComp = function(_super) {
  __extends$R(TabGuardComp2, _super);
  function TabGuardComp2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  TabGuardComp2.prototype.initialiseTabGuard = function(params) {
    this.eTopGuard = this.createTabGuard("top");
    this.eBottomGuard = this.createTabGuard("bottom");
    this.eFocusableElement = this.getFocusableElement();
    var tabGuards = [this.eTopGuard, this.eBottomGuard];
    var compProxy = {
      setTabIndex: function(tabIndex) {
        tabGuards.forEach(function(tabGuard) {
          return tabIndex != null ? tabGuard.setAttribute("tabIndex", tabIndex) : tabGuard.removeAttribute("tabIndex");
        });
      }
    };
    this.addTabGuards(this.eTopGuard, this.eBottomGuard);
    this.tabGuardCtrl = this.createManagedBean(new TabGuardCtrl({
      comp: compProxy,
      eTopGuard: this.eTopGuard,
      eBottomGuard: this.eBottomGuard,
      eFocusableElement: this.eFocusableElement,
      onFocusIn: params.onFocusIn,
      onFocusOut: params.onFocusOut,
      focusInnerElement: params.focusInnerElement,
      handleKeyDown: params.handleKeyDown,
      onTabKeyDown: params.onTabKeyDown,
      shouldStopEventPropagation: params.shouldStopEventPropagation
    }));
  };
  TabGuardComp2.prototype.createTabGuard = function(side) {
    var tabGuard = document.createElement("div");
    tabGuard.classList.add("ag-tab-guard", "ag-tab-guard-" + side);
    setAriaRole(tabGuard, "presentation");
    return tabGuard;
  };
  TabGuardComp2.prototype.addTabGuards = function(topTabGuard, bottomTabGuard) {
    this.eFocusableElement.insertAdjacentElement("afterbegin", topTabGuard);
    this.eFocusableElement.insertAdjacentElement("beforeend", bottomTabGuard);
  };
  TabGuardComp2.prototype.removeAllChildrenExceptTabGuards = function() {
    var tabGuards = [this.eTopGuard, this.eBottomGuard];
    clearElement(this.getFocusableElement());
    this.addTabGuards.apply(this, __spread$6(tabGuards));
  };
  TabGuardComp2.prototype.forceFocusOutOfContainer = function(up) {
    if (up === void 0) {
      up = false;
    }
    this.tabGuardCtrl.forceFocusOutOfContainer(up);
  };
  TabGuardComp2.prototype.appendChild = function(newChild, container) {
    if (!isNodeOrElement(newChild)) {
      newChild = newChild.getGui();
    }
    var bottomTabGuard = this.eBottomGuard;
    if (bottomTabGuard) {
      bottomTabGuard.insertAdjacentElement("beforebegin", newChild);
    } else {
      _super.prototype.appendChild.call(this, newChild, container);
    }
  };
  return TabGuardComp2;
}(Component);
var __extends$Q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __assign$i = function() {
  __assign$i = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$i.apply(this, arguments);
};
var __decorate$S = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgMenuList = function(_super) {
  __extends$Q(AgMenuList2, _super);
  function AgMenuList2(level) {
    if (level === void 0) {
      level = 1;
    }
    var _this = _super.call(this, '<div class="ag-menu-list" role="tree"></div>') || this;
    _this.level = level;
    _this.menuItems = [];
    return _this;
  }
  AgMenuList2.prototype.postConstruct = function() {
    var _this = this;
    this.initialiseTabGuard({
      onTabKeyDown: function(e2) {
        return _this.onTabKeyDown(e2);
      },
      handleKeyDown: function(e2) {
        return _this.handleKeyDown(e2);
      }
    });
  };
  AgMenuList2.prototype.onTabKeyDown = function(e2) {
    var parent = this.getParentComponent();
    var parentGui = parent && parent.getGui();
    var isManaged = parentGui && parentGui.classList.contains("ag-focus-managed");
    if (!isManaged) {
      e2.preventDefault();
    }
    if (e2.shiftKey) {
      this.closeIfIsChild(e2);
    }
  };
  AgMenuList2.prototype.handleKeyDown = function(e2) {
    switch (e2.key) {
      case KeyCode.UP:
      case KeyCode.RIGHT:
      case KeyCode.DOWN:
      case KeyCode.LEFT:
        e2.preventDefault();
        this.handleNavKey(e2.key);
        break;
      case KeyCode.ESCAPE:
        var topMenu = this.findTopMenu();
        if (topMenu) {
          this.focusService.focusInto(topMenu.getGui());
        }
        break;
    }
  };
  AgMenuList2.prototype.clearActiveItem = function() {
    if (this.activeMenuItem) {
      this.activeMenuItem.deactivate();
      this.activeMenuItem = null;
    }
  };
  AgMenuList2.prototype.addMenuItems = function(menuItems) {
    var _this = this;
    if (menuItems == null) {
      return;
    }
    menuItems.forEach(function(menuItemOrString) {
      if (menuItemOrString === "separator") {
        _this.addSeparator();
      } else if (typeof menuItemOrString === "string") {
        console.warn("AG Grid: unrecognised menu item " + menuItemOrString);
      } else {
        _this.addItem(menuItemOrString);
      }
    });
  };
  AgMenuList2.prototype.addItem = function(menuItemDef) {
    var _this = this;
    var menuItem = this.createManagedBean(new AgMenuItemComponent(__assign$i(__assign$i({}, menuItemDef), { isAnotherSubMenuOpen: function() {
      return _this.menuItems.some(function(m3) {
        return m3.isSubMenuOpen();
      });
    } })));
    menuItem.setParentComponent(this);
    setAriaLevel(menuItem.getGui(), this.level);
    this.menuItems.push(menuItem);
    this.appendChild(menuItem.getGui());
    this.addManagedListener(menuItem, AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED, function(event) {
      _this.dispatchEvent(event);
    });
    this.addManagedListener(menuItem, AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED, function(event) {
      if (_this.activeMenuItem && _this.activeMenuItem !== event.menuItem) {
        _this.activeMenuItem.deactivate();
      }
      _this.activeMenuItem = event.menuItem;
    });
  };
  AgMenuList2.prototype.activateFirstItem = function() {
    var item = this.menuItems.filter(function(currentItem) {
      return !currentItem.isDisabled();
    })[0];
    if (!item) {
      return;
    }
    item.activate();
  };
  AgMenuList2.prototype.addSeparator = function() {
    var separatorHtml = '\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>';
    this.appendChild(loadTemplate(separatorHtml));
  };
  AgMenuList2.prototype.findTopMenu = function() {
    var parent = this.getParentComponent();
    if (!parent && this instanceof AgMenuList2) {
      return this;
    }
    while (true) {
      var nextParent = parent && parent.getParentComponent && parent.getParentComponent();
      if (!nextParent || !(nextParent instanceof AgMenuList2 || nextParent instanceof AgMenuItemComponent)) {
        break;
      }
      parent = nextParent;
    }
    return parent instanceof AgMenuList2 ? parent : void 0;
  };
  AgMenuList2.prototype.handleNavKey = function(key) {
    switch (key) {
      case KeyCode.UP:
      case KeyCode.DOWN:
        var nextItem = this.findNextItem(key === KeyCode.UP);
        if (nextItem && nextItem !== this.activeMenuItem) {
          nextItem.activate();
        }
        return;
    }
    var left = this.gridOptionsWrapper.isEnableRtl() ? KeyCode.RIGHT : KeyCode.LEFT;
    if (key === left) {
      this.closeIfIsChild();
    } else {
      this.openChild();
    }
  };
  AgMenuList2.prototype.closeIfIsChild = function(e2) {
    var parentItem = this.getParentComponent();
    if (parentItem && parentItem instanceof AgMenuItemComponent) {
      if (e2) {
        e2.preventDefault();
      }
      parentItem.closeSubMenu();
      parentItem.getGui().focus();
    }
  };
  AgMenuList2.prototype.openChild = function() {
    if (this.activeMenuItem) {
      this.activeMenuItem.openSubMenu(true);
    }
  };
  AgMenuList2.prototype.findNextItem = function(up) {
    var items = this.menuItems.filter(function(item2) {
      return !item2.isDisabled();
    });
    if (!items.length) {
      return;
    }
    if (!this.activeMenuItem) {
      return up ? last(items) : items[0];
    }
    if (up) {
      items.reverse();
    }
    var nextItem;
    var foundCurrent = false;
    for (var i2 = 0; i2 < items.length; i2++) {
      var item = items[i2];
      if (!foundCurrent) {
        if (item === this.activeMenuItem) {
          foundCurrent = true;
        }
        continue;
      }
      nextItem = item;
      break;
    }
    return nextItem || this.activeMenuItem;
  };
  AgMenuList2.prototype.destroy = function() {
    this.clearActiveItem();
    _super.prototype.destroy.call(this);
  };
  __decorate$S([
    Autowired("focusService")
  ], AgMenuList2.prototype, "focusService", void 0);
  __decorate$S([
    PostConstruct
  ], AgMenuList2.prototype, "postConstruct", null);
  return AgMenuList2;
}(TabGuardComp);
var __extends$P = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$R = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgMenuPanel = function(_super) {
  __extends$P(AgMenuPanel2, _super);
  function AgMenuPanel2(wrappedComponent) {
    var _this = _super.call(this) || this;
    _this.wrappedComponent = wrappedComponent;
    _this.setTemplateFromElement(wrappedComponent.getGui());
    return _this;
  }
  AgMenuPanel2.prototype.postConstruct = function() {
    var _this = this;
    this.initialiseTabGuard({
      onTabKeyDown: function(e2) {
        return _this.onTabKeyDown(e2);
      },
      handleKeyDown: function(e2) {
        return _this.handleKeyDown(e2);
      }
    });
  };
  AgMenuPanel2.prototype.handleKeyDown = function(e2) {
    if (e2.key === KeyCode.ESCAPE) {
      this.closePanel();
    }
  };
  AgMenuPanel2.prototype.onTabKeyDown = function(e2) {
    if (e2.defaultPrevented) {
      return;
    }
    this.closePanel();
    e2.preventDefault();
  };
  AgMenuPanel2.prototype.closePanel = function() {
    var menuItem = this.parentComponent;
    menuItem.closeSubMenu();
    setTimeout(function() {
      return menuItem.getGui().focus();
    }, 0);
  };
  __decorate$R([
    PostConstruct
  ], AgMenuPanel2.prototype, "postConstruct", null);
  return AgMenuPanel2;
}(TabGuardComp);
var __extends$O = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$Q = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgMenuItemComponent = function(_super) {
  __extends$O(AgMenuItemComponent2, _super);
  function AgMenuItemComponent2(params) {
    var _this = _super.call(this) || this;
    _this.params = params;
    _this.isActive = false;
    _this.subMenuIsOpen = false;
    _this.setTemplate('<div class="' + _this.getClassName() + '" tabindex="-1" role="treeitem"></div>');
    return _this;
  }
  AgMenuItemComponent2.prototype.init = function() {
    var _this = this;
    this.addIcon();
    this.addName();
    this.addShortcut();
    this.addSubMenu();
    this.addTooltip();
    var eGui = this.getGui();
    if (this.params.disabled) {
      this.addCssClass(this.getClassName("disabled"));
      setAriaDisabled(eGui, true);
    } else {
      this.addGuiEventListener("click", function(e2) {
        return _this.onItemSelected(e2);
      });
      this.addGuiEventListener("keydown", function(e2) {
        if (e2.key === KeyCode.ENTER || e2.key === KeyCode.SPACE) {
          e2.preventDefault();
          _this.onItemSelected(e2);
        }
      });
      this.addGuiEventListener("mousedown", function(e2) {
        e2.stopPropagation();
        e2.preventDefault();
      });
      this.addGuiEventListener("mouseenter", function() {
        return _this.onMouseEnter();
      });
      this.addGuiEventListener("mouseleave", function() {
        return _this.onMouseLeave();
      });
    }
    if (this.params.cssClasses) {
      this.params.cssClasses.forEach(function(it2) {
        return _this.addCssClass(it2);
      });
    }
  };
  AgMenuItemComponent2.prototype.isDisabled = function() {
    return !!this.params.disabled;
  };
  AgMenuItemComponent2.prototype.openSubMenu = function(activateFirstItem) {
    var _this = this;
    if (activateFirstItem === void 0) {
      activateFirstItem = false;
    }
    this.closeSubMenu();
    if (!this.params.subMenu) {
      return;
    }
    var ePopup = loadTemplate('<div class="ag-menu" role="presentation"></div>');
    var destroySubMenu;
    if (this.params.subMenu instanceof Array) {
      var currentLevel = getAriaLevel(this.getGui());
      var nextLevel = isNaN(currentLevel) ? 1 : currentLevel + 1;
      var childMenu_1 = this.createBean(new AgMenuList(nextLevel));
      childMenu_1.setParentComponent(this);
      childMenu_1.addMenuItems(this.params.subMenu);
      ePopup.appendChild(childMenu_1.getGui());
      this.addManagedListener(childMenu_1, AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED, function(e2) {
        return _this.dispatchEvent(e2);
      });
      childMenu_1.addGuiEventListener("mouseenter", function() {
        return _this.cancelDeactivate();
      });
      destroySubMenu = function() {
        return _this.destroyBean(childMenu_1);
      };
      if (activateFirstItem) {
        setTimeout(function() {
          return childMenu_1.activateFirstItem();
        }, 0);
      }
    } else {
      var subMenu_1 = this.params.subMenu;
      var menuPanel = this.createBean(new AgMenuPanel(subMenu_1));
      menuPanel.setParentComponent(this);
      var subMenuGui_1 = menuPanel.getGui();
      var mouseEvent_1 = "mouseenter";
      var mouseEnterListener_1 = function() {
        return _this.cancelDeactivate();
      };
      subMenuGui_1.addEventListener(mouseEvent_1, mouseEnterListener_1);
      destroySubMenu = function() {
        return subMenuGui_1.removeEventListener(mouseEvent_1, mouseEnterListener_1);
      };
      ePopup.appendChild(subMenuGui_1);
      if (subMenu_1.afterGuiAttached) {
        setTimeout(function() {
          return subMenu_1.afterGuiAttached();
        }, 0);
      }
    }
    var eGui = this.getGui();
    var positionCallback = this.popupService.positionPopupForMenu.bind(this.popupService, { eventSource: eGui, ePopup });
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var addPopupRes = this.popupService.addPopup({
      modal: true,
      eChild: ePopup,
      positionCallback,
      anchorToElement: eGui,
      ariaLabel: translate2("ariaLabelSubMenu", "SubMenu")
    });
    this.subMenuIsOpen = true;
    setAriaExpanded(eGui, true);
    this.hideSubMenu = function() {
      if (addPopupRes) {
        addPopupRes.hideFunc();
      }
      _this.subMenuIsOpen = false;
      setAriaExpanded(eGui, false);
      destroySubMenu();
    };
  };
  AgMenuItemComponent2.prototype.closeSubMenu = function() {
    if (!this.hideSubMenu) {
      return;
    }
    this.hideSubMenu();
    this.hideSubMenu = null;
    setAriaExpanded(this.getGui(), false);
  };
  AgMenuItemComponent2.prototype.isSubMenuOpen = function() {
    return this.subMenuIsOpen;
  };
  AgMenuItemComponent2.prototype.activate = function(openSubMenu) {
    var _this = this;
    this.cancelActivate();
    if (this.params.disabled) {
      return;
    }
    this.isActive = true;
    this.addCssClass(this.getClassName("active"));
    this.getGui().focus();
    if (openSubMenu && this.params.subMenu) {
      window.setTimeout(function() {
        if (_this.isAlive() && _this.isActive) {
          _this.openSubMenu();
        }
      }, 300);
    }
    this.onItemActivated();
  };
  AgMenuItemComponent2.prototype.deactivate = function() {
    this.cancelDeactivate();
    this.removeCssClass(this.getClassName("active"));
    this.isActive = false;
    if (this.subMenuIsOpen) {
      this.hideSubMenu();
    }
  };
  AgMenuItemComponent2.prototype.addIcon = function() {
    if (!this.params.checked && !this.params.icon && this.params.isCompact) {
      return;
    }
    var icon = loadTemplate('<span ref="eIcon" class="' + this.getClassName("part") + " " + this.getClassName("icon") + '" role="presentation"></span>');
    if (this.params.checked) {
      icon.appendChild(createIconNoSpan("check", this.gridOptionsWrapper));
    } else if (this.params.icon) {
      if (isNodeOrElement(this.params.icon)) {
        icon.appendChild(this.params.icon);
      } else if (typeof this.params.icon === "string") {
        icon.innerHTML = this.params.icon;
      } else {
        console.warn("AG Grid: menu item icon must be DOM node or string");
      }
    }
    this.getGui().appendChild(icon);
  };
  AgMenuItemComponent2.prototype.addName = function() {
    if (!this.params.name && this.params.isCompact) {
      return;
    }
    var name = loadTemplate('<span ref="eName" class="' + this.getClassName("part") + " " + this.getClassName("text") + '">' + (this.params.name || "") + "</span>");
    this.getGui().appendChild(name);
  };
  AgMenuItemComponent2.prototype.addTooltip = function() {
    if (!this.params.tooltip) {
      return;
    }
    this.tooltip = this.params.tooltip;
    if (this.gridOptionsWrapper.isEnableBrowserTooltips()) {
      this.getGui().setAttribute("title", this.tooltip);
    } else {
      this.createManagedBean(new CustomTooltipFeature(this));
    }
  };
  AgMenuItemComponent2.prototype.getTooltipParams = function() {
    return {
      location: "menu",
      value: this.tooltip
    };
  };
  AgMenuItemComponent2.prototype.addShortcut = function() {
    if (!this.params.shortcut && this.params.isCompact) {
      return;
    }
    var shortcut = loadTemplate('<span ref="eShortcut" class="' + this.getClassName("part") + " " + this.getClassName("shortcut") + '">' + (this.params.shortcut || "") + "</span>");
    this.getGui().appendChild(shortcut);
  };
  AgMenuItemComponent2.prototype.addSubMenu = function() {
    if (!this.params.subMenu && this.params.isCompact) {
      return;
    }
    var pointer = loadTemplate('<span ref="ePopupPointer" class="' + this.getClassName("part") + " " + this.getClassName("popup-pointer") + '"></span>');
    var eGui = this.getGui();
    if (this.params.subMenu) {
      var iconName = this.gridOptionsWrapper.isEnableRtl() ? "smallLeft" : "smallRight";
      setAriaExpanded(eGui, false);
      pointer.appendChild(createIconNoSpan(iconName, this.gridOptionsWrapper));
    }
    eGui.appendChild(pointer);
  };
  AgMenuItemComponent2.prototype.onItemSelected = function(event) {
    if (this.params.action) {
      this.params.action();
    } else {
      this.openSubMenu(event && event.type === "keydown");
    }
    if (this.params.subMenu && !this.params.action) {
      return;
    }
    var e2 = {
      type: AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED,
      action: this.params.action,
      checked: this.params.checked,
      cssClasses: this.params.cssClasses,
      disabled: this.params.disabled,
      icon: this.params.icon,
      name: this.params.name,
      shortcut: this.params.shortcut,
      subMenu: this.params.subMenu,
      tooltip: this.params.tooltip,
      event
    };
    this.dispatchEvent(e2);
  };
  AgMenuItemComponent2.prototype.onItemActivated = function() {
    var event = {
      type: AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED,
      menuItem: this
    };
    this.dispatchEvent(event);
  };
  AgMenuItemComponent2.prototype.cancelActivate = function() {
    if (this.activateTimeoutId) {
      window.clearTimeout(this.activateTimeoutId);
      this.activateTimeoutId = 0;
    }
  };
  AgMenuItemComponent2.prototype.cancelDeactivate = function() {
    if (this.deactivateTimeoutId) {
      window.clearTimeout(this.deactivateTimeoutId);
      this.deactivateTimeoutId = 0;
    }
  };
  AgMenuItemComponent2.prototype.onMouseEnter = function() {
    var _this = this;
    this.cancelDeactivate();
    if (this.params.isAnotherSubMenuOpen()) {
      this.activateTimeoutId = window.setTimeout(function() {
        return _this.activate(true);
      }, AgMenuItemComponent2.ACTIVATION_DELAY);
    } else {
      this.activate(true);
    }
  };
  AgMenuItemComponent2.prototype.onMouseLeave = function() {
    var _this = this;
    this.cancelActivate();
    if (this.isSubMenuOpen()) {
      this.deactivateTimeoutId = window.setTimeout(function() {
        return _this.deactivate();
      }, AgMenuItemComponent2.ACTIVATION_DELAY);
    } else {
      this.deactivate();
    }
  };
  AgMenuItemComponent2.prototype.getClassName = function(suffix) {
    var prefix = this.params.isCompact ? "ag-compact-menu-option" : "ag-menu-option";
    return suffix ? prefix + "-" + suffix : prefix;
  };
  AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED = "menuItemSelected";
  AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED = "menuItemActivated";
  AgMenuItemComponent2.ACTIVATION_DELAY = 80;
  __decorate$Q([
    Autowired("popupService")
  ], AgMenuItemComponent2.prototype, "popupService", void 0);
  __decorate$Q([
    PostConstruct
  ], AgMenuItemComponent2.prototype, "init", null);
  return AgMenuItemComponent2;
}(Component);
var __extends$N = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$P = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$6 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$5 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$6(arguments[i2]));
  return ar;
};
var FocusService = function(_super) {
  __extends$N(FocusService2, _super);
  function FocusService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  FocusService_1 = FocusService2;
  FocusService2.addKeyboardModeEvents = function(doc, controller) {
    var docControllers = FocusService_1.instancesMonitored.get(doc);
    if (docControllers && docControllers.length > 0) {
      if (docControllers.indexOf(controller) === -1) {
        docControllers.push(controller);
      }
    } else {
      FocusService_1.instancesMonitored.set(doc, [controller]);
      doc.addEventListener("keydown", FocusService_1.toggleKeyboardMode);
      doc.addEventListener("mousedown", FocusService_1.toggleKeyboardMode);
    }
  };
  FocusService2.removeKeyboardModeEvents = function(doc, controller) {
    var docControllers = FocusService_1.instancesMonitored.get(doc);
    var newControllers = [];
    if (docControllers && docControllers.length) {
      newControllers = __spread$5(docControllers).filter(function(currentGridCore) {
        return currentGridCore !== controller;
      });
      FocusService_1.instancesMonitored.set(doc, newControllers);
    }
    if (newControllers.length === 0) {
      doc.removeEventListener("keydown", FocusService_1.toggleKeyboardMode);
      doc.removeEventListener("mousedown", FocusService_1.toggleKeyboardMode);
    }
  };
  FocusService2.toggleKeyboardMode = function(event) {
    var isKeyboardActive = FocusService_1.keyboardModeActive;
    var isKeyboardEvent = event.type === "keydown";
    if (isKeyboardEvent) {
      if (event.ctrlKey || event.metaKey || event.altKey) {
        return;
      }
    }
    if (isKeyboardActive && isKeyboardEvent || !isKeyboardActive && !isKeyboardEvent) {
      return;
    }
    FocusService_1.keyboardModeActive = isKeyboardEvent;
    var doc = event.target.ownerDocument;
    if (!doc) {
      return;
    }
    var controllersForDoc = FocusService_1.instancesMonitored.get(doc);
    if (controllersForDoc) {
      controllersForDoc.forEach(function(controller) {
        controller.dispatchEvent({ type: isKeyboardEvent ? Events.EVENT_KEYBOARD_FOCUS : Events.EVENT_MOUSE_FOCUS });
      });
    }
  };
  FocusService2.prototype.init = function() {
    var _this = this;
    var clearFocusedCellListener = this.clearFocusedCell.bind(this);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, clearFocusedCellListener);
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onColumnEverythingChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, clearFocusedCellListener);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, clearFocusedCellListener);
    this.ctrlsService.whenReady(function(p) {
      _this.gridCtrl = p.gridCtrl;
      var doc = _this.gridOptionsWrapper.getDocument();
      FocusService_1.addKeyboardModeEvents(doc, _this.gridCtrl);
      _this.addDestroyFunc(function() {
        return _this.unregisterGridCompController(_this.gridCtrl);
      });
    });
  };
  FocusService2.prototype.unregisterGridCompController = function(gridCompController) {
    var doc = this.gridOptionsWrapper.getDocument();
    FocusService_1.removeKeyboardModeEvents(doc, gridCompController);
  };
  FocusService2.prototype.onColumnEverythingChanged = function() {
    if (!this.focusedCellPosition) {
      return;
    }
    var col = this.focusedCellPosition.column;
    var colFromColumnModel = this.columnModel.getGridColumn(col.getId());
    if (col !== colFromColumnModel) {
      this.clearFocusedCell();
    }
  };
  FocusService2.prototype.isKeyboardMode = function() {
    return FocusService_1.keyboardModeActive;
  };
  FocusService2.prototype.getFocusCellToUseAfterRefresh = function() {
    var eDocument = this.gridOptionsWrapper.getDocument();
    if (this.gridOptionsWrapper.isSuppressFocusAfterRefresh() || !this.focusedCellPosition) {
      return null;
    }
    if (this.isDomDataMissingInHierarchy(eDocument.activeElement, RowCtrl.DOM_DATA_KEY_ROW_CTRL)) {
      return null;
    }
    return this.focusedCellPosition;
  };
  FocusService2.prototype.getFocusHeaderToUseAfterRefresh = function() {
    var eDocument = this.gridOptionsWrapper.getDocument();
    if (this.gridOptionsWrapper.isSuppressFocusAfterRefresh() || !this.focusedHeaderPosition) {
      return null;
    }
    if (this.isDomDataMissingInHierarchy(eDocument.activeElement, AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)) {
      return null;
    }
    return this.focusedHeaderPosition;
  };
  FocusService2.prototype.isDomDataMissingInHierarchy = function(eBrowserCell, key) {
    var ePointer = eBrowserCell;
    while (ePointer) {
      var data = this.gridOptionsWrapper.getDomData(ePointer, key);
      if (data) {
        return false;
      }
      ePointer = ePointer.parentNode;
    }
    return true;
  };
  FocusService2.prototype.clearFocusedCell = function() {
    this.focusedCellPosition = null;
    this.onCellFocused(false, false);
  };
  FocusService2.prototype.getFocusedCell = function() {
    return this.focusedCellPosition;
  };
  FocusService2.prototype.setFocusedCell = function(params) {
    var column = params.column, rowIndex = params.rowIndex, rowPinned = params.rowPinned, _a2 = params.forceBrowserFocus, forceBrowserFocus = _a2 === void 0 ? false : _a2, _b = params.preventScrollOnBrowserFocus, preventScrollOnBrowserFocus = _b === void 0 ? false : _b;
    var gridColumn = this.columnModel.getGridColumn(column);
    if (!gridColumn) {
      this.focusedCellPosition = null;
      return;
    }
    this.focusedCellPosition = gridColumn ? {
      rowIndex,
      rowPinned: makeNull(rowPinned),
      column: gridColumn
    } : null;
    this.onCellFocused(forceBrowserFocus, preventScrollOnBrowserFocus);
  };
  FocusService2.prototype.isCellFocused = function(cellPosition) {
    if (this.focusedCellPosition == null) {
      return false;
    }
    return this.focusedCellPosition.column === cellPosition.column && this.isRowFocused(cellPosition.rowIndex, cellPosition.rowPinned);
  };
  FocusService2.prototype.isRowNodeFocused = function(rowNode) {
    return this.isRowFocused(rowNode.rowIndex, rowNode.rowPinned);
  };
  FocusService2.prototype.isHeaderWrapperFocused = function(headerCtrl) {
    if (this.focusedHeaderPosition == null) {
      return false;
    }
    var column = headerCtrl.getColumnGroupChild();
    var headerRowIndex = headerCtrl.getRowIndex();
    var pinned = headerCtrl.getPinned();
    var _a2 = this.focusedHeaderPosition, focusedColumn = _a2.column, focusedHeaderRowIndex = _a2.headerRowIndex;
    return column === focusedColumn && headerRowIndex === focusedHeaderRowIndex && pinned == focusedColumn.getPinned();
  };
  FocusService2.prototype.clearFocusedHeader = function() {
    this.focusedHeaderPosition = null;
  };
  FocusService2.prototype.getFocusedHeader = function() {
    return this.focusedHeaderPosition;
  };
  FocusService2.prototype.setFocusedHeader = function(headerRowIndex, column) {
    this.focusedHeaderPosition = { headerRowIndex, column };
  };
  FocusService2.prototype.focusHeaderPosition = function(params) {
    var direction = params.direction, fromTab = params.fromTab, allowUserOverride = params.allowUserOverride, event = params.event;
    var headerPosition = params.headerPosition;
    if (allowUserOverride) {
      var gridOptionsWrapper = this.gridOptionsWrapper;
      var currentPosition = this.getFocusedHeader();
      var headerRowCount = this.headerNavigationService.getHeaderRowCount();
      if (fromTab) {
        var userFunc = gridOptionsWrapper.getTabToNextHeaderFunc();
        if (userFunc) {
          var params_1 = {
            backwards: direction === "Before",
            previousHeaderPosition: currentPosition,
            nextHeaderPosition: headerPosition,
            headerRowCount
          };
          headerPosition = userFunc(params_1);
        }
      } else {
        var userFunc = gridOptionsWrapper.getNavigateToNextHeaderFunc();
        if (userFunc && event) {
          var params_2 = {
            key: event.key,
            previousHeaderPosition: currentPosition,
            nextHeaderPosition: headerPosition,
            headerRowCount,
            event
          };
          headerPosition = userFunc(params_2);
        }
      }
    }
    if (!headerPosition) {
      return false;
    }
    if (headerPosition.headerRowIndex === -1) {
      return this.focusGridView(headerPosition.column);
    }
    this.headerNavigationService.scrollToColumn(headerPosition.column, direction);
    var headerRowContainerCtrl = this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned());
    var focusSuccess = headerRowContainerCtrl.focusHeader(headerPosition.headerRowIndex, headerPosition.column, event);
    return focusSuccess;
  };
  FocusService2.prototype.focusFirstHeader = function() {
    var firstColumn = this.columnModel.getAllDisplayedColumns()[0];
    if (!firstColumn) {
      return false;
    }
    if (firstColumn.getParent()) {
      firstColumn = this.columnModel.getColumnGroupAtLevel(firstColumn, 0);
    }
    return this.focusHeaderPosition({
      headerPosition: { headerRowIndex: 0, column: firstColumn }
    });
  };
  FocusService2.prototype.focusLastHeader = function(event) {
    var headerRowIndex = this.headerNavigationService.getHeaderRowCount() - 1;
    var column = last(this.columnModel.getAllDisplayedColumns());
    return this.focusHeaderPosition({
      headerPosition: { headerRowIndex, column },
      event
    });
  };
  FocusService2.prototype.isAnyCellFocused = function() {
    return !!this.focusedCellPosition;
  };
  FocusService2.prototype.isRowFocused = function(rowIndex, floating) {
    if (this.focusedCellPosition == null) {
      return false;
    }
    return this.focusedCellPosition.rowIndex === rowIndex && this.focusedCellPosition.rowPinned === makeNull(floating);
  };
  FocusService2.prototype.findFocusableElements = function(rootNode, exclude, onlyUnmanaged) {
    if (onlyUnmanaged === void 0) {
      onlyUnmanaged = false;
    }
    var focusableString = Constants.FOCUSABLE_SELECTOR;
    var excludeString = Constants.FOCUSABLE_EXCLUDE;
    if (exclude) {
      excludeString += ", " + exclude;
    }
    if (onlyUnmanaged) {
      excludeString += ', [tabindex="-1"]';
    }
    var nodes = Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString));
    var excludeNodes = Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));
    if (!excludeNodes.length) {
      return nodes;
    }
    var diff = function(a3, b2) {
      return a3.filter(function(element) {
        return b2.indexOf(element) === -1;
      });
    };
    return diff(nodes, excludeNodes);
  };
  FocusService2.prototype.focusInto = function(rootNode, up, onlyUnmanaged) {
    if (up === void 0) {
      up = false;
    }
    if (onlyUnmanaged === void 0) {
      onlyUnmanaged = false;
    }
    var focusableElements = this.findFocusableElements(rootNode, null, onlyUnmanaged);
    var toFocus = up ? last(focusableElements) : focusableElements[0];
    if (toFocus) {
      toFocus.focus();
      return true;
    }
    return false;
  };
  FocusService2.prototype.findNextFocusableElement = function(rootNode, onlyManaged, backwards) {
    if (rootNode === void 0) {
      rootNode = this.eGridDiv;
    }
    var focusable = this.findFocusableElements(rootNode, onlyManaged ? ':not([tabindex="-1"])' : null);
    var eDocument = this.gridOptionsWrapper.getDocument();
    var activeEl = eDocument.activeElement;
    var currentIndex;
    if (onlyManaged) {
      currentIndex = focusable.findIndex(function(el2) {
        return el2.contains(activeEl);
      });
    } else {
      currentIndex = focusable.indexOf(activeEl);
    }
    var nextIndex = currentIndex + (backwards ? -1 : 1);
    if (nextIndex < 0 || nextIndex >= focusable.length) {
      return null;
    }
    return focusable[nextIndex];
  };
  FocusService2.prototype.isFocusUnderManagedComponent = function(rootNode) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var managedContainers = rootNode.querySelectorAll("." + ManagedFocusFeature.FOCUS_MANAGED_CLASS);
    if (!managedContainers.length) {
      return false;
    }
    for (var i2 = 0; i2 < managedContainers.length; i2++) {
      if (managedContainers[i2].contains(eDocument.activeElement)) {
        return true;
      }
    }
    return false;
  };
  FocusService2.prototype.findTabbableParent = function(node, limit) {
    if (limit === void 0) {
      limit = 5;
    }
    var counter = 0;
    while (node && getTabIndex(node) === null && ++counter <= limit) {
      node = node.parentElement;
    }
    if (getTabIndex(node) === null) {
      return null;
    }
    return node;
  };
  FocusService2.prototype.onCellFocused = function(forceBrowserFocus, preventScrollOnBrowserFocus) {
    var event = {
      type: Events.EVENT_CELL_FOCUSED,
      forceBrowserFocus,
      preventScrollOnBrowserFocus,
      rowIndex: null,
      column: null,
      floating: null,
      rowPinned: null,
      isFullWidthCell: false
    };
    if (this.focusedCellPosition) {
      var rowIndex = event.rowIndex = this.focusedCellPosition.rowIndex;
      var rowPinned = event.rowPinned = this.focusedCellPosition.rowPinned;
      event.column = this.focusedCellPosition.column;
      var rowCtrl = this.rowRenderer.getRowByPosition({ rowIndex, rowPinned });
      if (rowCtrl) {
        event.isFullWidthCell = rowCtrl.isFullWidth();
      }
    }
    this.eventService.dispatchEvent(event);
  };
  FocusService2.prototype.focusGridView = function(column, backwards) {
    if (this.gridOptionsWrapper.isSuppressCellFocus()) {
      if (backwards) {
        return this.focusLastHeader();
      }
      return this.focusNextGridCoreContainer(false);
    }
    var nextRow = backwards ? this.rowPositionUtils.getLastRow() : this.rowPositionUtils.getFirstRow();
    if (!nextRow) {
      return false;
    }
    var rowIndex = nextRow.rowIndex, rowPinned = nextRow.rowPinned;
    var focusedHeader = this.getFocusedHeader();
    if (!column && focusedHeader) {
      column = focusedHeader.column;
    }
    if (rowIndex == null || !column) {
      return false;
    }
    this.navigationService.ensureCellVisible({ rowIndex, column, rowPinned });
    this.setFocusedCell({
      rowIndex,
      column,
      rowPinned: makeNull(rowPinned),
      forceBrowserFocus: true
    });
    if (this.rangeService) {
      var cellPosition = { rowIndex, rowPinned, column };
      this.rangeService.setRangeToCell(cellPosition);
    }
    return true;
  };
  FocusService2.prototype.focusNextGridCoreContainer = function(backwards) {
    if (this.gridCtrl.focusNextInnerContainer(backwards)) {
      return true;
    }
    if (!backwards && !this.gridCtrl.isDetailGrid()) {
      this.gridCtrl.forceFocusOutOfContainer();
    }
    return false;
  };
  var FocusService_1;
  FocusService2.AG_KEYBOARD_FOCUS = "ag-keyboard-focus";
  FocusService2.keyboardModeActive = false;
  FocusService2.instancesMonitored = /* @__PURE__ */ new Map();
  __decorate$P([
    Autowired("eGridDiv")
  ], FocusService2.prototype, "eGridDiv", void 0);
  __decorate$P([
    Autowired("columnModel")
  ], FocusService2.prototype, "columnModel", void 0);
  __decorate$P([
    Autowired("headerNavigationService")
  ], FocusService2.prototype, "headerNavigationService", void 0);
  __decorate$P([
    Autowired("rowRenderer")
  ], FocusService2.prototype, "rowRenderer", void 0);
  __decorate$P([
    Autowired("rowPositionUtils")
  ], FocusService2.prototype, "rowPositionUtils", void 0);
  __decorate$P([
    Optional("rangeService")
  ], FocusService2.prototype, "rangeService", void 0);
  __decorate$P([
    Autowired("navigationService")
  ], FocusService2.prototype, "navigationService", void 0);
  __decorate$P([
    Autowired("ctrlsService")
  ], FocusService2.prototype, "ctrlsService", void 0);
  __decorate$P([
    PostConstruct
  ], FocusService2.prototype, "init", null);
  FocusService2 = FocusService_1 = __decorate$P([
    Bean("focusService")
  ], FocusService2);
  return FocusService2;
}(BeanStub);
var __extends$M = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$O = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$5 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$4 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$5(arguments[i2]));
  return ar;
};
var DIRECTION;
(function(DIRECTION2) {
  DIRECTION2[DIRECTION2["vertical"] = 0] = "vertical";
  DIRECTION2[DIRECTION2["horizontal"] = 1] = "horizontal";
})(DIRECTION || (DIRECTION = {}));
var instanceIdSeq = 0;
var PopupService = function(_super) {
  __extends$M(PopupService2, _super);
  function PopupService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.popupList = [];
    return _this;
  }
  PopupService2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      _this.gridCtrl = p.gridCtrl;
      _this.addManagedListener(_this.gridCtrl, Events.EVENT_KEYBOARD_FOCUS, function() {
        _this.popupList.forEach(function(popup) {
          return popup.element.classList.add(FocusService.AG_KEYBOARD_FOCUS);
        });
      });
      _this.addManagedListener(_this.gridCtrl, Events.EVENT_MOUSE_FOCUS, function() {
        _this.popupList.forEach(function(popup) {
          return popup.element.classList.remove(FocusService.AG_KEYBOARD_FOCUS);
        });
      });
    });
  };
  PopupService2.prototype.getPopupParent = function() {
    var ePopupParent = this.gridOptionsWrapper.getPopupParent();
    if (ePopupParent) {
      return ePopupParent;
    }
    return this.gridCtrl.getGui();
  };
  PopupService2.prototype.positionPopupForMenu = function(params) {
    var sourceRect = params.eventSource.getBoundingClientRect();
    var parentRect = this.getParentRect();
    var y3 = this.keepXYWithinBounds(params.ePopup, sourceRect.top - parentRect.top, DIRECTION.vertical);
    var minWidth = params.ePopup.clientWidth > 0 ? params.ePopup.clientWidth : 200;
    params.ePopup.style.minWidth = minWidth + "px";
    var widthOfParent = parentRect.right - parentRect.left;
    var maxX = widthOfParent - minWidth;
    var x2;
    if (this.gridOptionsWrapper.isEnableRtl()) {
      x2 = xLeftPosition();
      if (x2 < 0) {
        x2 = xRightPosition();
      }
      if (x2 > maxX) {
        x2 = 0;
      }
    } else {
      x2 = xRightPosition();
      if (x2 > maxX) {
        x2 = xLeftPosition();
      }
      if (x2 < 0) {
        x2 = 0;
      }
    }
    params.ePopup.style.left = x2 + "px";
    params.ePopup.style.top = y3 + "px";
    function xRightPosition() {
      return sourceRect.right - parentRect.left - 2;
    }
    function xLeftPosition() {
      return sourceRect.left - parentRect.left - minWidth;
    }
  };
  PopupService2.prototype.positionPopupUnderMouseEvent = function(params) {
    var ePopup = params.ePopup, nudgeX = params.nudgeX, nudgeY = params.nudgeY;
    var _a2 = this.calculatePointerAlign(params.mouseEvent), x2 = _a2.x, y3 = _a2.y;
    this.positionPopup({
      ePopup,
      x: x2,
      y: y3,
      nudgeX,
      nudgeY,
      keepWithinBounds: true
    });
    this.callPostProcessPopup(params.type, params.ePopup, null, params.mouseEvent, params.column, params.rowNode);
  };
  PopupService2.prototype.calculatePointerAlign = function(e2) {
    var parentRect = this.getParentRect();
    return {
      x: e2.clientX - parentRect.left,
      y: e2.clientY - parentRect.top
    };
  };
  PopupService2.prototype.positionPopupUnderComponent = function(params) {
    var sourceRect = params.eventSource.getBoundingClientRect();
    var alignSide = params.alignSide || "left";
    var parentRect = this.getParentRect();
    var x2 = sourceRect.left - parentRect.left;
    if (alignSide === "right") {
      x2 -= params.ePopup.offsetWidth - sourceRect.width;
    }
    this.positionPopup({
      ePopup: params.ePopup,
      nudgeX: params.nudgeX,
      nudgeY: params.nudgeY,
      x: x2,
      y: sourceRect.top - parentRect.top + sourceRect.height,
      keepWithinBounds: params.keepWithinBounds
    });
    this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);
  };
  PopupService2.prototype.positionPopupOverComponent = function(params) {
    var sourceRect = params.eventSource.getBoundingClientRect();
    var parentRect = this.getParentRect();
    this.positionPopup({
      ePopup: params.ePopup,
      nudgeX: params.nudgeX,
      nudgeY: params.nudgeY,
      x: sourceRect.left - parentRect.left,
      y: sourceRect.top - parentRect.top,
      keepWithinBounds: params.keepWithinBounds
    });
    this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);
  };
  PopupService2.prototype.callPostProcessPopup = function(type, ePopup, eventSource, mouseEvent, column, rowNode) {
    var callback = this.gridOptionsWrapper.getPostProcessPopupFunc();
    if (callback) {
      var params = {
        column,
        rowNode,
        ePopup,
        type,
        eventSource,
        mouseEvent
      };
      callback(params);
    }
  };
  PopupService2.prototype.positionPopup = function(params) {
    var ePopup = params.ePopup, keepWithinBounds = params.keepWithinBounds, nudgeX = params.nudgeX, nudgeY = params.nudgeY;
    var x2 = params.x, y3 = params.y;
    if (nudgeX) {
      x2 += nudgeX;
    }
    if (nudgeY) {
      y3 += nudgeY;
    }
    if (keepWithinBounds) {
      x2 = this.keepXYWithinBounds(ePopup, x2, DIRECTION.horizontal);
      y3 = this.keepXYWithinBounds(ePopup, y3, DIRECTION.vertical);
    }
    ePopup.style.left = x2 + "px";
    ePopup.style.top = y3 + "px";
  };
  PopupService2.prototype.getActivePopups = function() {
    return this.popupList.map(function(popup) {
      return popup.element;
    });
  };
  PopupService2.prototype.getPopupList = function() {
    return this.popupList;
  };
  PopupService2.prototype.getParentRect = function() {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var popupParent = this.getPopupParent();
    if (popupParent === eDocument.body) {
      popupParent = eDocument.documentElement;
    } else if (getComputedStyle(popupParent).position === "static") {
      popupParent = popupParent.offsetParent;
    }
    var style2 = getComputedStyle(popupParent);
    var bounds = popupParent.getBoundingClientRect();
    return {
      top: bounds.top + parseFloat(style2.borderTopWidth) || 0,
      left: bounds.left + parseFloat(style2.borderLeftWidth) || 0,
      right: bounds.right + parseFloat(style2.borderRightWidth) || 0,
      bottom: bounds.bottom + parseFloat(style2.borderBottomWidth) || 0
    };
  };
  PopupService2.prototype.keepXYWithinBounds = function(ePopup, position, direction) {
    var isVertical = direction === DIRECTION.vertical;
    var sizeProperty = isVertical ? "clientHeight" : "clientWidth";
    var anchorProperty = isVertical ? "top" : "left";
    var offsetProperty = isVertical ? "offsetHeight" : "offsetWidth";
    var scrollPositionProperty = isVertical ? "scrollTop" : "scrollLeft";
    var eDocument = this.gridOptionsWrapper.getDocument();
    var docElement = eDocument.documentElement;
    var popupParent = this.getPopupParent();
    var parentRect = popupParent.getBoundingClientRect();
    var documentRect = eDocument.documentElement.getBoundingClientRect();
    var isBody = popupParent === eDocument.body;
    var offsetSize = ePopup[offsetProperty];
    var getSize = isVertical ? getAbsoluteHeight : getAbsoluteWidth;
    var sizeOfParent = isBody ? getSize(docElement) + docElement[scrollPositionProperty] : popupParent[sizeProperty];
    if (isBody) {
      sizeOfParent -= Math.abs(documentRect[anchorProperty] - parentRect[anchorProperty]);
    }
    var max = sizeOfParent - offsetSize;
    return Math.min(Math.max(position, 0), Math.abs(max));
  };
  PopupService2.prototype.keepPopupPositionedRelativeTo = function(params) {
    var _this = this;
    var eParent = this.getPopupParent();
    var parentRect = eParent.getBoundingClientRect();
    var sourceRect = params.element.getBoundingClientRect();
    var initialDiffTop = parentRect.top - sourceRect.top;
    var initialDiffLeft = parentRect.left - sourceRect.left;
    var lastDiffTop = initialDiffTop;
    var lastDiffLeft = initialDiffLeft;
    var topPx = params.ePopup.style.top;
    var top = parseInt(topPx.substring(0, topPx.length - 1), 10);
    var leftPx = params.ePopup.style.left;
    var left = parseInt(leftPx.substring(0, leftPx.length - 1), 10);
    return new AgPromise(function(resolve) {
      _this.getFrameworkOverrides().setInterval(function() {
        var pRect = eParent.getBoundingClientRect();
        var sRect = params.element.getBoundingClientRect();
        var elementNotInDom = sRect.top == 0 && sRect.left == 0 && sRect.height == 0 && sRect.width == 0;
        if (elementNotInDom) {
          params.hidePopup();
          return;
        }
        var currentDiffTop = pRect.top - sRect.top;
        if (currentDiffTop != lastDiffTop) {
          var newTop = _this.keepXYWithinBounds(params.ePopup, top + initialDiffTop - currentDiffTop, DIRECTION.vertical);
          params.ePopup.style.top = newTop + "px";
        }
        lastDiffTop = currentDiffTop;
        var currentDiffLeft = pRect.left - sRect.left;
        if (currentDiffLeft != lastDiffLeft) {
          var newLeft = _this.keepXYWithinBounds(params.ePopup, left + initialDiffLeft - currentDiffLeft, DIRECTION.horizontal);
          params.ePopup.style.left = newLeft + "px";
        }
        lastDiffLeft = currentDiffLeft;
      }, 200).then(function(intervalId) {
        var result = function() {
          if (intervalId != null) {
            window.clearInterval(intervalId);
          }
        };
        resolve(result);
      });
    });
  };
  PopupService2.prototype.addPopup = function(params) {
    var _a2;
    var _this = this;
    var modal = params.modal, eChild = params.eChild, closeOnEsc = params.closeOnEsc, closedCallback = params.closedCallback, click = params.click, alwaysOnTop = params.alwaysOnTop, afterGuiAttached = params.afterGuiAttached, positionCallback = params.positionCallback, anchorToElement = params.anchorToElement, ariaLabel = params.ariaLabel;
    var eDocument = this.gridOptionsWrapper.getDocument();
    var destroyPositionTracker = new AgPromise(function(resolve) {
      return resolve(function() {
      });
    });
    if (!eDocument) {
      console.warn("ag-grid: could not find the document, document is empty");
      return { hideFunc: function() {
      }, stopAnchoringPromise: destroyPositionTracker };
    }
    var pos = this.popupList.findIndex(function(popup2) {
      return popup2.element === eChild;
    });
    if (pos !== -1) {
      var popup = this.popupList[pos];
      return { hideFunc: popup.hideFunc, stopAnchoringPromise: popup.stopAnchoringPromise };
    }
    var ePopupParent = this.getPopupParent();
    if (eChild.style.top == null) {
      eChild.style.top = "0px";
    }
    if (eChild.style.left == null) {
      eChild.style.left = "0px";
    }
    var eWrapper = document.createElement("div");
    var allThemes = this.environment.getTheme().allThemes;
    if (allThemes.length) {
      (_a2 = eWrapper.classList).add.apply(_a2, __spread$4(allThemes));
    }
    eWrapper.classList.add("ag-popup");
    eChild.classList.add(this.gridOptionsWrapper.isEnableRtl() ? "ag-rtl" : "ag-ltr", "ag-popup-child");
    if (!eChild.hasAttribute("role")) {
      setAriaRole(eChild, "dialog");
    }
    setAriaLabel(eChild, ariaLabel);
    if (this.focusService.isKeyboardMode()) {
      eChild.classList.add(FocusService.AG_KEYBOARD_FOCUS);
    }
    eWrapper.appendChild(eChild);
    ePopupParent.appendChild(eWrapper);
    if (alwaysOnTop) {
      this.setAlwaysOnTop(eWrapper, true);
    } else {
      this.bringPopupToFront(eWrapper);
    }
    var popupHidden = false;
    var hidePopupOnKeyboardEvent = function(event) {
      if (!eWrapper.contains(eDocument.activeElement)) {
        return;
      }
      var key = event.key;
      if (key === KeyCode.ESCAPE) {
        hidePopup({ keyboardEvent: event });
      }
    };
    var hidePopupOnMouseEvent = function(event) {
      return hidePopup({ mouseEvent: event });
    };
    var hidePopupOnTouchEvent = function(event) {
      return hidePopup({ touchEvent: event });
    };
    var hidePopup = function(popupParams) {
      if (popupParams === void 0) {
        popupParams = {};
      }
      var mouseEvent = popupParams.mouseEvent, touchEvent = popupParams.touchEvent, keyboardEvent = popupParams.keyboardEvent;
      if (_this.isEventFromCurrentPopup({ mouseEvent, touchEvent }, eChild) || _this.isEventSameChainAsOriginalEvent({ originalMouseEvent: click, mouseEvent, touchEvent }) || popupHidden) {
        return;
      }
      popupHidden = true;
      ePopupParent.removeChild(eWrapper);
      eDocument.removeEventListener("keydown", hidePopupOnKeyboardEvent);
      eDocument.removeEventListener("mousedown", hidePopupOnMouseEvent);
      eDocument.removeEventListener("touchstart", hidePopupOnTouchEvent);
      eDocument.removeEventListener("contextmenu", hidePopupOnMouseEvent);
      _this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);
      if (closedCallback) {
        closedCallback(mouseEvent || touchEvent || keyboardEvent);
      }
      _this.popupList = _this.popupList.filter(function(popup2) {
        return popup2.element !== eChild;
      });
      if (destroyPositionTracker) {
        destroyPositionTracker.then(function(destroyFunc) {
          return destroyFunc && destroyFunc();
        });
      }
    };
    if (afterGuiAttached) {
      afterGuiAttached({ hidePopup });
    }
    window.setTimeout(function() {
      if (closeOnEsc) {
        eDocument.addEventListener("keydown", hidePopupOnKeyboardEvent);
      }
      if (modal) {
        eDocument.addEventListener("mousedown", hidePopupOnMouseEvent);
        _this.eventService.addEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);
        eDocument.addEventListener("touchstart", hidePopupOnTouchEvent);
        eDocument.addEventListener("contextmenu", hidePopupOnMouseEvent);
      }
    }, 0);
    if (positionCallback) {
      positionCallback();
    }
    if (anchorToElement) {
      destroyPositionTracker = this.keepPopupPositionedRelativeTo({
        element: anchorToElement,
        ePopup: eChild,
        hidePopup
      });
    }
    this.popupList.push({
      element: eChild,
      wrapper: eWrapper,
      hideFunc: hidePopup,
      stopAnchoringPromise: destroyPositionTracker,
      instanceId: instanceIdSeq++,
      isAnchored: !!anchorToElement
    });
    return {
      hideFunc: hidePopup,
      stopAnchoringPromise: destroyPositionTracker
    };
  };
  PopupService2.prototype.hasAnchoredPopup = function() {
    return this.popupList.some(function(popup) {
      return popup.isAnchored;
    });
  };
  PopupService2.prototype.isEventFromCurrentPopup = function(params, target) {
    var mouseEvent = params.mouseEvent, touchEvent = params.touchEvent;
    var event = mouseEvent ? mouseEvent : touchEvent;
    if (!event) {
      return false;
    }
    var indexOfThisChild = this.popupList.findIndex(function(popup2) {
      return popup2.element === target;
    });
    if (indexOfThisChild === -1) {
      return false;
    }
    for (var i2 = indexOfThisChild; i2 < this.popupList.length; i2++) {
      var popup = this.popupList[i2];
      if (isElementInEventPath(popup.element, event)) {
        return true;
      }
    }
    return this.isElementWithinCustomPopup(event.target);
  };
  PopupService2.prototype.isElementWithinCustomPopup = function(el2) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    while (el2 && el2 !== eDocument.body) {
      if (el2.classList.contains("ag-custom-component-popup") || el2.parentElement === null) {
        return true;
      }
      el2 = el2.parentElement;
    }
    return false;
  };
  PopupService2.prototype.isEventSameChainAsOriginalEvent = function(params) {
    var originalMouseEvent = params.originalMouseEvent, mouseEvent = params.mouseEvent, touchEvent = params.touchEvent;
    var mouseEventOrTouch = null;
    if (mouseEvent) {
      mouseEventOrTouch = mouseEvent;
    } else if (touchEvent) {
      mouseEventOrTouch = touchEvent.touches[0];
    }
    if (mouseEventOrTouch && originalMouseEvent) {
      var screenX_1 = mouseEvent ? mouseEvent.screenX : 0;
      var screenY_1 = mouseEvent ? mouseEvent.screenY : 0;
      var xMatch = Math.abs(originalMouseEvent.screenX - screenX_1) < 5;
      var yMatch = Math.abs(originalMouseEvent.screenY - screenY_1) < 5;
      if (xMatch && yMatch) {
        return true;
      }
    }
    return false;
  };
  PopupService2.prototype.getWrapper = function(ePopup) {
    while (!ePopup.classList.contains("ag-popup") && ePopup.parentElement) {
      ePopup = ePopup.parentElement;
    }
    return ePopup.classList.contains("ag-popup") ? ePopup : null;
  };
  PopupService2.prototype.setAlwaysOnTop = function(ePopup, alwaysOnTop) {
    var eWrapper = this.getWrapper(ePopup);
    if (!eWrapper) {
      return;
    }
    eWrapper.classList.toggle("ag-always-on-top", !!alwaysOnTop);
    if (alwaysOnTop) {
      this.bringPopupToFront(eWrapper);
    }
  };
  PopupService2.prototype.bringPopupToFront = function(ePopup) {
    var parent = this.getPopupParent();
    var popupList = Array.prototype.slice.call(parent.querySelectorAll(".ag-popup"));
    var popupLen = popupList.length;
    var alwaysOnTopList = Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top"));
    var onTopLength = alwaysOnTopList.length;
    var eWrapper = this.getWrapper(ePopup);
    if (!eWrapper || popupLen <= 1 || !parent.contains(ePopup)) {
      return;
    }
    var pos = popupList.indexOf(eWrapper);
    var innerEls = eWrapper.querySelectorAll("div");
    var innerElsScrollMap = [];
    innerEls.forEach(function(el2) {
      if (el2.scrollTop !== 0) {
        innerElsScrollMap.push([el2, el2.scrollTop]);
      }
    });
    if (onTopLength) {
      var isPopupAlwaysOnTop = eWrapper.classList.contains("ag-always-on-top");
      if (isPopupAlwaysOnTop) {
        if (pos !== popupLen - 1) {
          last(alwaysOnTopList).insertAdjacentElement("afterend", eWrapper);
        }
      } else if (pos !== popupLen - onTopLength - 1) {
        alwaysOnTopList[0].insertAdjacentElement("beforebegin", eWrapper);
      }
    } else if (pos !== popupLen - 1) {
      last(popupList).insertAdjacentElement("afterend", eWrapper);
    }
    while (innerElsScrollMap.length) {
      var currentEl = innerElsScrollMap.pop();
      currentEl[0].scrollTop = currentEl[1];
    }
    var params = {
      type: "popupToFront",
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      eWrapper
    };
    this.eventService.dispatchEvent(params);
  };
  __decorate$O([
    Autowired("environment")
  ], PopupService2.prototype, "environment", void 0);
  __decorate$O([
    Autowired("focusService")
  ], PopupService2.prototype, "focusService", void 0);
  __decorate$O([
    Autowired("ctrlsService")
  ], PopupService2.prototype, "ctrlsService", void 0);
  __decorate$O([
    PostConstruct
  ], PopupService2.prototype, "postConstruct", null);
  PopupService2 = __decorate$O([
    Bean("popupService")
  ], PopupService2);
  return PopupService2;
}(BeanStub);
var __extends$L = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$N = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
(function(_super) {
  __extends$L(VirtualList, _super);
  function VirtualList(cssIdentifier, ariaRole, listName) {
    if (cssIdentifier === void 0) {
      cssIdentifier = "default";
    }
    if (ariaRole === void 0) {
      ariaRole = "listbox";
    }
    var _this = _super.call(this, VirtualList.getTemplate(cssIdentifier)) || this;
    _this.cssIdentifier = cssIdentifier;
    _this.ariaRole = ariaRole;
    _this.listName = listName;
    _this.renderedRows = /* @__PURE__ */ new Map();
    _this.rowHeight = 20;
    _this.isDestroyed = false;
    return _this;
  }
  VirtualList.prototype.postConstruct = function() {
    var _this = this;
    this.addScrollListener();
    this.rowHeight = this.getItemHeight();
    this.addResizeObserver();
    this.initialiseTabGuard({
      onFocusIn: function(e2) {
        return _this.onFocusIn(e2);
      },
      onFocusOut: function(e2) {
        return _this.onFocusOut(e2);
      },
      focusInnerElement: function(fromBottom) {
        return _this.focusInnerElement(fromBottom);
      },
      onTabKeyDown: function(e2) {
        return _this.onTabKeyDown(e2);
      },
      handleKeyDown: function(e2) {
        return _this.handleKeyDown(e2);
      }
    });
    this.setAriaProperties();
  };
  VirtualList.prototype.setAriaProperties = function() {
    var translate2 = this.gridOptionsWrapper.getLocaleTextFunc();
    var listName = translate2("ariaDefaultListName", this.listName || "List");
    var ariaEl = this.eContainer;
    setAriaRole(ariaEl, this.ariaRole);
    setAriaLabel(ariaEl, listName);
  };
  VirtualList.prototype.addResizeObserver = function() {
    var listener = this.drawVirtualRows.bind(this);
    var destroyObserver = this.resizeObserverService.observeResize(this.getGui(), listener);
    this.addDestroyFunc(destroyObserver);
  };
  VirtualList.prototype.focusInnerElement = function(fromBottom) {
    this.focusRow(fromBottom ? this.model.getRowCount() - 1 : 0);
  };
  VirtualList.prototype.onFocusIn = function(e2) {
    var target = e2.target;
    if (target.classList.contains("ag-virtual-list-item")) {
      this.lastFocusedRowIndex = getAriaPosInSet(target) - 1;
    }
    return false;
  };
  VirtualList.prototype.onFocusOut = function(e2) {
    if (!this.getFocusableElement().contains(e2.relatedTarget)) {
      this.lastFocusedRowIndex = null;
    }
    return false;
  };
  VirtualList.prototype.handleKeyDown = function(e2) {
    switch (e2.key) {
      case KeyCode.UP:
      case KeyCode.DOWN:
        if (this.navigate(e2.key === KeyCode.UP)) {
          e2.preventDefault();
        }
        break;
    }
  };
  VirtualList.prototype.onTabKeyDown = function(e2) {
    if (this.navigate(e2.shiftKey)) {
      e2.preventDefault();
    } else {
      this.focusService.focusInto(this.getGui(), !e2.shiftKey);
    }
  };
  VirtualList.prototype.navigate = function(up) {
    if (this.lastFocusedRowIndex == null) {
      return false;
    }
    var nextRow = this.lastFocusedRowIndex + (up ? -1 : 1);
    if (nextRow < 0 || nextRow >= this.model.getRowCount()) {
      return false;
    }
    this.focusRow(nextRow);
    return true;
  };
  VirtualList.prototype.getLastFocusedRow = function() {
    return this.lastFocusedRowIndex;
  };
  VirtualList.prototype.focusRow = function(rowNumber) {
    var _this = this;
    this.ensureIndexVisible(rowNumber);
    window.setTimeout(function() {
      var renderedRow = _this.renderedRows.get(rowNumber);
      if (renderedRow) {
        renderedRow.eDiv.focus();
      }
    }, 10);
  };
  VirtualList.prototype.getComponentAt = function(rowIndex) {
    var comp = this.renderedRows.get(rowIndex);
    return comp && comp.rowComponent;
  };
  VirtualList.prototype.forEachRenderedRow = function(func) {
    this.renderedRows.forEach(function(value, key) {
      return func(value.rowComponent, key);
    });
  };
  VirtualList.getTemplate = function(cssIdentifier) {
    return '\n            <div class="ag-virtual-list-viewport ag-' + cssIdentifier + '-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-' + cssIdentifier + '-virtual-list-container" ref="eContainer"></div>\n            </div>';
  };
  VirtualList.prototype.getItemHeight = function() {
    return this.gridOptionsWrapper.getListItemHeight();
  };
  VirtualList.prototype.ensureIndexVisible = function(index) {
    var lastRow = this.model.getRowCount();
    if (typeof index !== "number" || index < 0 || index >= lastRow) {
      console.warn("AG Grid: invalid row index for ensureIndexVisible: " + index);
      return;
    }
    var rowTopPixel = index * this.rowHeight;
    var rowBottomPixel = rowTopPixel + this.rowHeight;
    var eGui = this.getGui();
    var viewportTopPixel = eGui.scrollTop;
    var viewportHeight = eGui.offsetHeight;
    var viewportBottomPixel = viewportTopPixel + viewportHeight;
    var viewportScrolledPastRow = viewportTopPixel > rowTopPixel;
    var viewportScrolledBeforeRow = viewportBottomPixel < rowBottomPixel;
    if (viewportScrolledPastRow) {
      eGui.scrollTop = rowTopPixel;
    } else if (viewportScrolledBeforeRow) {
      var newScrollPosition = rowBottomPixel - viewportHeight;
      eGui.scrollTop = newScrollPosition;
    }
  };
  VirtualList.prototype.setComponentCreator = function(componentCreator) {
    this.componentCreator = componentCreator;
  };
  VirtualList.prototype.getRowHeight = function() {
    return this.rowHeight;
  };
  VirtualList.prototype.getScrollTop = function() {
    return this.getGui().scrollTop;
  };
  VirtualList.prototype.setRowHeight = function(rowHeight) {
    this.rowHeight = rowHeight;
    this.refresh();
  };
  VirtualList.prototype.refresh = function() {
    var _this = this;
    if (this.model == null || this.isDestroyed) {
      return;
    }
    var rowCount = this.model.getRowCount();
    this.eContainer.style.height = rowCount * this.rowHeight + "px";
    waitUntil(function() {
      return _this.eContainer.clientHeight >= rowCount * _this.rowHeight;
    }, function() {
      if (_this.isDestroyed) {
        return;
      }
      _this.clearVirtualRows();
      _this.drawVirtualRows();
    });
  };
  VirtualList.prototype.clearVirtualRows = function() {
    var _this = this;
    this.renderedRows.forEach(function(_2, rowIndex) {
      return _this.removeRow(rowIndex);
    });
  };
  VirtualList.prototype.drawVirtualRows = function() {
    if (!this.isAlive()) {
      return;
    }
    var gui = this.getGui();
    var topPixel = gui.scrollTop;
    var bottomPixel = topPixel + gui.offsetHeight;
    var firstRow = Math.floor(topPixel / this.rowHeight);
    var lastRow = Math.floor(bottomPixel / this.rowHeight);
    this.ensureRowsRendered(firstRow, lastRow);
  };
  VirtualList.prototype.ensureRowsRendered = function(start, finish) {
    var _this = this;
    this.renderedRows.forEach(function(_2, rowIndex2) {
      if ((rowIndex2 < start || rowIndex2 > finish) && rowIndex2 !== _this.lastFocusedRowIndex) {
        _this.removeRow(rowIndex2);
      }
    });
    for (var rowIndex = start; rowIndex <= finish; rowIndex++) {
      if (this.renderedRows.has(rowIndex)) {
        continue;
      }
      if (rowIndex < this.model.getRowCount()) {
        this.insertRow(rowIndex);
      }
    }
  };
  VirtualList.prototype.insertRow = function(rowIndex) {
    var _this = this;
    var value = this.model.getRow(rowIndex);
    var eDiv = document.createElement("div");
    eDiv.classList.add("ag-virtual-list-item", "ag-" + this.cssIdentifier + "-virtual-list-item");
    setAriaRole(eDiv, this.ariaRole === "tree" ? "treeitem" : "option");
    setAriaSetSize(eDiv, this.model.getRowCount());
    setAriaPosInSet(eDiv, rowIndex + 1);
    eDiv.setAttribute("tabindex", "-1");
    if (typeof this.model.isRowSelected === "function") {
      var isSelected = this.model.isRowSelected(rowIndex);
      setAriaSelected(eDiv, !!isSelected);
      setAriaChecked(eDiv, isSelected);
    }
    eDiv.style.height = this.rowHeight + "px";
    eDiv.style.top = this.rowHeight * rowIndex + "px";
    var rowComponent = this.componentCreator(value, eDiv);
    rowComponent.addGuiEventListener("focusin", function() {
      return _this.lastFocusedRowIndex = rowIndex;
    });
    eDiv.appendChild(rowComponent.getGui());
    if (this.renderedRows.has(rowIndex - 1)) {
      this.renderedRows.get(rowIndex - 1).eDiv.insertAdjacentElement("afterend", eDiv);
    } else if (this.renderedRows.has(rowIndex + 1)) {
      this.renderedRows.get(rowIndex + 1).eDiv.insertAdjacentElement("beforebegin", eDiv);
    } else {
      this.eContainer.appendChild(eDiv);
    }
    this.renderedRows.set(rowIndex, { rowComponent, eDiv });
  };
  VirtualList.prototype.removeRow = function(rowIndex) {
    var component = this.renderedRows.get(rowIndex);
    this.eContainer.removeChild(component.eDiv);
    this.destroyBean(component.rowComponent);
    this.renderedRows.delete(rowIndex);
  };
  VirtualList.prototype.addScrollListener = function() {
    var _this = this;
    this.addGuiEventListener("scroll", function() {
      return _this.drawVirtualRows();
    });
  };
  VirtualList.prototype.setModel = function(model) {
    this.model = model;
  };
  VirtualList.prototype.destroy = function() {
    if (this.isDestroyed) {
      return;
    }
    this.clearVirtualRows();
    this.isDestroyed = true;
    _super.prototype.destroy.call(this);
  };
  __decorate$N([
    Autowired("resizeObserverService")
  ], VirtualList.prototype, "resizeObserverService", void 0);
  __decorate$N([
    Autowired("focusService")
  ], VirtualList.prototype, "focusService", void 0);
  __decorate$N([
    RefSelector("eContainer")
  ], VirtualList.prototype, "eContainer", void 0);
  __decorate$N([
    PostConstruct
  ], VirtualList.prototype, "postConstruct", null);
  return VirtualList;
})(TabGuardComp);
var OUTSIDE_ANGULAR_EVENTS = ["mouseover", "mouseout", "mouseenter", "mouseleave"];
var PASSIVE_EVENTS = ["touchstart", "touchend", "touchmove", "touchcancel"];
var VanillaFrameworkOverrides = function() {
  function VanillaFrameworkOverrides2() {
    this.isOutsideAngular = function(eventType) {
      return includes(OUTSIDE_ANGULAR_EVENTS, eventType);
    };
  }
  VanillaFrameworkOverrides2.prototype.setTimeout = function(action, timeout) {
    window.setTimeout(action, timeout);
  };
  VanillaFrameworkOverrides2.prototype.setInterval = function(action, timeout) {
    return new AgPromise(function(resolve) {
      resolve(window.setInterval(action, timeout));
    });
  };
  VanillaFrameworkOverrides2.prototype.addEventListener = function(element, type, listener, useCapture) {
    var isPassive = includes(PASSIVE_EVENTS, type);
    element.addEventListener(type, listener, { capture: !!useCapture, passive: isPassive });
  };
  VanillaFrameworkOverrides2.prototype.dispatchEvent = function(eventType, listener, global2) {
    listener();
  };
  VanillaFrameworkOverrides2.prototype.frameworkComponent = function(name) {
    return null;
  };
  VanillaFrameworkOverrides2.prototype.isFrameworkComponent = function(comp) {
    return false;
  };
  return VanillaFrameworkOverrides2;
}();
var __extends$K = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$M = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$4 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$3 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$4(arguments[i2]));
  return ar;
};
var CellNavigationService = function(_super) {
  __extends$K(CellNavigationService2, _super);
  function CellNavigationService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  CellNavigationService2.prototype.getNextCellToFocus = function(key, focusedCell, ctrlPressed) {
    if (ctrlPressed === void 0) {
      ctrlPressed = false;
    }
    if (ctrlPressed) {
      return this.getNextCellToFocusWithCtrlPressed(key, focusedCell);
    }
    return this.getNextCellToFocusWithoutCtrlPressed(key, focusedCell);
  };
  CellNavigationService2.prototype.getNextCellToFocusWithCtrlPressed = function(key, focusedCell) {
    var upKey = key === KeyCode.UP;
    var downKey = key === KeyCode.DOWN;
    var leftKey = key === KeyCode.LEFT;
    var column;
    var rowIndex;
    if (upKey || downKey) {
      rowIndex = upKey ? this.paginationProxy.getPageFirstRow() : this.paginationProxy.getPageLastRow();
      column = focusedCell.column;
    } else {
      var allColumns = this.columnModel.getAllDisplayedColumns();
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      rowIndex = focusedCell.rowIndex;
      column = leftKey !== isRtl ? allColumns[0] : last(allColumns);
    }
    return {
      rowIndex,
      rowPinned: null,
      column
    };
  };
  CellNavigationService2.prototype.getNextCellToFocusWithoutCtrlPressed = function(key, focusedCell) {
    var pointer = focusedCell;
    var finished = false;
    while (!finished) {
      switch (key) {
        case KeyCode.UP:
          pointer = this.getCellAbove(pointer);
          break;
        case KeyCode.DOWN:
          pointer = this.getCellBelow(pointer);
          break;
        case KeyCode.RIGHT:
          if (this.gridOptionsWrapper.isEnableRtl()) {
            pointer = this.getCellToLeft(pointer);
          } else {
            pointer = this.getCellToRight(pointer);
          }
          break;
        case KeyCode.LEFT:
          if (this.gridOptionsWrapper.isEnableRtl()) {
            pointer = this.getCellToRight(pointer);
          } else {
            pointer = this.getCellToLeft(pointer);
          }
          break;
        default:
          pointer = null;
          console.warn("AG Grid: unknown key for navigation " + key);
          break;
      }
      if (pointer) {
        finished = this.isCellGoodToFocusOn(pointer);
      } else {
        finished = true;
      }
    }
    return pointer;
  };
  CellNavigationService2.prototype.isCellGoodToFocusOn = function(gridCell) {
    var column = gridCell.column;
    var rowNode;
    switch (gridCell.rowPinned) {
      case Constants.PINNED_TOP:
        rowNode = this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);
        break;
      case Constants.PINNED_BOTTOM:
        rowNode = this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);
        break;
      default:
        rowNode = this.rowModel.getRow(gridCell.rowIndex);
        break;
    }
    if (!rowNode) {
      return false;
    }
    var suppressNavigable = column.isSuppressNavigable(rowNode);
    return !suppressNavigable;
  };
  CellNavigationService2.prototype.getCellToLeft = function(lastCell) {
    if (!lastCell) {
      return null;
    }
    var colToLeft = this.columnModel.getDisplayedColBefore(lastCell.column);
    if (!colToLeft) {
      return null;
    }
    return {
      rowIndex: lastCell.rowIndex,
      column: colToLeft,
      rowPinned: lastCell.rowPinned
    };
  };
  CellNavigationService2.prototype.getCellToRight = function(lastCell) {
    if (!lastCell) {
      return null;
    }
    var colToRight = this.columnModel.getDisplayedColAfter(lastCell.column);
    if (!colToRight) {
      return null;
    }
    return {
      rowIndex: lastCell.rowIndex,
      column: colToRight,
      rowPinned: lastCell.rowPinned
    };
  };
  CellNavigationService2.prototype.getRowBelow = function(rowPosition) {
    var index = rowPosition.rowIndex;
    var pinned = rowPosition.rowPinned;
    if (this.isLastRowInContainer(rowPosition)) {
      switch (pinned) {
        case Constants.PINNED_BOTTOM:
          return null;
        case Constants.PINNED_TOP:
          if (this.rowModel.isRowsToRender()) {
            return { rowIndex: this.paginationProxy.getPageFirstRow(), rowPinned: null };
          }
          if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)) {
            return { rowIndex: 0, rowPinned: Constants.PINNED_BOTTOM };
          }
          return null;
        default:
          if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)) {
            return { rowIndex: 0, rowPinned: Constants.PINNED_BOTTOM };
          }
          return null;
      }
    }
    var rowNode = this.rowModel.getRow(rowPosition.rowIndex);
    var nextStickyPosition = this.getNextStickyPosition(rowNode);
    if (nextStickyPosition) {
      return nextStickyPosition;
    }
    return { rowIndex: index + 1, rowPinned: pinned };
  };
  CellNavigationService2.prototype.getNextStickyPosition = function(rowNode, up) {
    if (!this.gridOptionsWrapper.isGroupRowsSticky() || !rowNode || !rowNode.sticky) {
      return;
    }
    var stickyRowCtrls = __spread$3(this.rowRenderer.getStickyTopRowCtrls()).sort(function(a3, b2) {
      return a3.getRowNode().rowIndex - b2.getRowNode().rowIndex;
    });
    var diff = up ? -1 : 1;
    var idx = stickyRowCtrls.findIndex(function(ctrl) {
      return ctrl.getRowNode().rowIndex === rowNode.rowIndex;
    });
    var nextCtrl = stickyRowCtrls[idx + diff];
    if (nextCtrl) {
      return { rowIndex: nextCtrl.getRowNode().rowIndex, rowPinned: null };
    }
  };
  CellNavigationService2.prototype.getCellBelow = function(lastCell) {
    if (!lastCell) {
      return null;
    }
    var rowBelow = this.getRowBelow(lastCell);
    if (rowBelow) {
      return {
        rowIndex: rowBelow.rowIndex,
        column: lastCell.column,
        rowPinned: rowBelow.rowPinned
      };
    }
    return null;
  };
  CellNavigationService2.prototype.isLastRowInContainer = function(rowPosition) {
    var pinned = rowPosition.rowPinned;
    var index = rowPosition.rowIndex;
    if (pinned === Constants.PINNED_TOP) {
      var lastTopIndex = this.pinnedRowModel.getPinnedTopRowData().length - 1;
      return lastTopIndex <= index;
    }
    if (pinned === Constants.PINNED_BOTTOM) {
      var lastBottomIndex = this.pinnedRowModel.getPinnedBottomRowData().length - 1;
      return lastBottomIndex <= index;
    }
    var lastBodyIndex = this.paginationProxy.getPageLastRow();
    return lastBodyIndex <= index;
  };
  CellNavigationService2.prototype.getRowAbove = function(rowPosition) {
    var index = rowPosition.rowIndex;
    var pinned = rowPosition.rowPinned;
    var isFirstRow = pinned ? index === 0 : index === this.paginationProxy.getPageFirstRow();
    if (isFirstRow) {
      if (pinned === Constants.PINNED_TOP) {
        return null;
      }
      if (!pinned) {
        if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_TOP)) {
          return this.getLastFloatingTopRow();
        }
        return null;
      }
      if (this.rowModel.isRowsToRender()) {
        return this.getLastBodyCell();
      }
      if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_TOP)) {
        return this.getLastFloatingTopRow();
      }
      return null;
    }
    var rowNode = this.rowModel.getRow(rowPosition.rowIndex);
    var nextStickyPosition = this.getNextStickyPosition(rowNode, true);
    if (nextStickyPosition) {
      return nextStickyPosition;
    }
    return { rowIndex: index - 1, rowPinned: pinned };
  };
  CellNavigationService2.prototype.getCellAbove = function(lastCell) {
    if (!lastCell) {
      return null;
    }
    var rowAbove = this.getRowAbove({ rowIndex: lastCell.rowIndex, rowPinned: lastCell.rowPinned });
    if (rowAbove) {
      return {
        rowIndex: rowAbove.rowIndex,
        column: lastCell.column,
        rowPinned: rowAbove.rowPinned
      };
    }
    return null;
  };
  CellNavigationService2.prototype.getLastBodyCell = function() {
    var lastBodyRow = this.paginationProxy.getPageLastRow();
    return { rowIndex: lastBodyRow, rowPinned: null };
  };
  CellNavigationService2.prototype.getLastFloatingTopRow = function() {
    var lastFloatingRow = this.pinnedRowModel.getPinnedTopRowData().length - 1;
    return { rowIndex: lastFloatingRow, rowPinned: Constants.PINNED_TOP };
  };
  CellNavigationService2.prototype.getNextTabbedCell = function(gridCell, backwards) {
    if (backwards) {
      return this.getNextTabbedCellBackwards(gridCell);
    }
    return this.getNextTabbedCellForwards(gridCell);
  };
  CellNavigationService2.prototype.getNextTabbedCellForwards = function(gridCell) {
    var displayedColumns = this.columnModel.getAllDisplayedColumns();
    var newRowIndex = gridCell.rowIndex;
    var newFloating = gridCell.rowPinned;
    var newColumn = this.columnModel.getDisplayedColAfter(gridCell.column);
    if (!newColumn) {
      newColumn = displayedColumns[0];
      var rowBelow = this.getRowBelow(gridCell);
      if (missing(rowBelow)) {
        return null;
      }
      if (!rowBelow.rowPinned && !this.paginationProxy.isRowInPage(rowBelow)) {
        return null;
      }
      newRowIndex = rowBelow ? rowBelow.rowIndex : null;
      newFloating = rowBelow ? rowBelow.rowPinned : null;
    }
    return { rowIndex: newRowIndex, column: newColumn, rowPinned: newFloating };
  };
  CellNavigationService2.prototype.getNextTabbedCellBackwards = function(gridCell) {
    var displayedColumns = this.columnModel.getAllDisplayedColumns();
    var newRowIndex = gridCell.rowIndex;
    var newFloating = gridCell.rowPinned;
    var newColumn = this.columnModel.getDisplayedColBefore(gridCell.column);
    if (!newColumn) {
      newColumn = last(displayedColumns);
      var rowAbove = this.getRowAbove({ rowIndex: gridCell.rowIndex, rowPinned: gridCell.rowPinned });
      if (missing(rowAbove)) {
        return null;
      }
      if (!rowAbove.rowPinned && !this.paginationProxy.isRowInPage(rowAbove)) {
        return null;
      }
      newRowIndex = rowAbove ? rowAbove.rowIndex : null;
      newFloating = rowAbove ? rowAbove.rowPinned : null;
    }
    return { rowIndex: newRowIndex, column: newColumn, rowPinned: newFloating };
  };
  __decorate$M([
    Autowired("columnModel")
  ], CellNavigationService2.prototype, "columnModel", void 0);
  __decorate$M([
    Autowired("rowModel")
  ], CellNavigationService2.prototype, "rowModel", void 0);
  __decorate$M([
    Autowired("rowRenderer")
  ], CellNavigationService2.prototype, "rowRenderer", void 0);
  __decorate$M([
    Autowired("pinnedRowModel")
  ], CellNavigationService2.prototype, "pinnedRowModel", void 0);
  __decorate$M([
    Autowired("paginationProxy")
  ], CellNavigationService2.prototype, "paginationProxy", void 0);
  CellNavigationService2 = __decorate$M([
    Bean("cellNavigationService")
  ], CellNavigationService2);
  return CellNavigationService2;
}(BeanStub);
var __extends$J = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$L = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$5 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var AlignedGridsService = function(_super) {
  __extends$J(AlignedGridsService2, _super);
  function AlignedGridsService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.consuming = false;
    return _this;
  }
  AlignedGridsService2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("AlignedGridsService");
  };
  AlignedGridsService2.prototype.init = function() {
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, this.fireColumnEvent.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, this.fireColumnEvent.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, this.fireColumnEvent.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, this.fireColumnEvent.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_RESIZED, this.fireColumnEvent.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, this.fireScrollEvent.bind(this));
  };
  AlignedGridsService2.prototype.fireEvent = function(callback) {
    if (this.consuming) {
      return;
    }
    var otherGrids = this.gridOptionsWrapper.getAlignedGrids();
    if (otherGrids) {
      otherGrids.forEach(function(otherGridOptions) {
        if (otherGridOptions.api) {
          var alignedGridService = otherGridOptions.api.__getAlignedGridService();
          callback(alignedGridService);
        }
      });
    }
  };
  AlignedGridsService2.prototype.onEvent = function(callback) {
    this.consuming = true;
    callback();
    this.consuming = false;
  };
  AlignedGridsService2.prototype.fireColumnEvent = function(event) {
    this.fireEvent(function(alignedGridsService) {
      alignedGridsService.onColumnEvent(event);
    });
  };
  AlignedGridsService2.prototype.fireScrollEvent = function(event) {
    if (event.direction !== "horizontal") {
      return;
    }
    this.fireEvent(function(alignedGridsService) {
      alignedGridsService.onScrollEvent(event);
    });
  };
  AlignedGridsService2.prototype.onScrollEvent = function(event) {
    var _this = this;
    this.onEvent(function() {
      var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
      gridBodyCon.getScrollFeature().setHorizontalScrollPosition(event.left);
    });
  };
  AlignedGridsService2.prototype.getMasterColumns = function(event) {
    var result = [];
    if (event.columns) {
      event.columns.forEach(function(column) {
        result.push(column);
      });
    } else if (event.column) {
      result.push(event.column);
    }
    return result;
  };
  AlignedGridsService2.prototype.getColumnIds = function(event) {
    var result = [];
    if (event.columns) {
      event.columns.forEach(function(column) {
        result.push(column.getColId());
      });
    } else if (event.column) {
      result.push(event.column.getColId());
    }
    return result;
  };
  AlignedGridsService2.prototype.onColumnEvent = function(event) {
    var _this = this;
    this.onEvent(function() {
      switch (event.type) {
        case Events.EVENT_COLUMN_MOVED:
        case Events.EVENT_COLUMN_VISIBLE:
        case Events.EVENT_COLUMN_PINNED:
        case Events.EVENT_COLUMN_RESIZED:
          var colEvent = event;
          _this.processColumnEvent(colEvent);
          break;
        case Events.EVENT_COLUMN_GROUP_OPENED:
          var groupOpenedEvent = event;
          _this.processGroupOpenedEvent(groupOpenedEvent);
          break;
        case Events.EVENT_COLUMN_PIVOT_CHANGED:
          console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");
          break;
      }
    });
  };
  AlignedGridsService2.prototype.processGroupOpenedEvent = function(groupOpenedEvent) {
    var masterColumnGroup = groupOpenedEvent.columnGroup;
    var otherColumnGroup = null;
    if (masterColumnGroup) {
      var groupId = masterColumnGroup.getGroupId();
      otherColumnGroup = this.columnModel.getProvidedColumnGroup(groupId);
    }
    if (masterColumnGroup && !otherColumnGroup) {
      return;
    }
    this.logger.log("onColumnEvent-> processing " + groupOpenedEvent + " expanded = " + masterColumnGroup.isExpanded());
    this.columnModel.setColumnGroupOpened(otherColumnGroup, masterColumnGroup.isExpanded(), "alignedGridChanged");
  };
  AlignedGridsService2.prototype.processColumnEvent = function(colEvent) {
    var _this = this;
    var _a2;
    var masterColumn = colEvent.column;
    var otherColumn = null;
    if (masterColumn) {
      otherColumn = this.columnModel.getPrimaryColumn(masterColumn.getColId());
    }
    if (masterColumn && !otherColumn) {
      return;
    }
    var masterColumns = this.getMasterColumns(colEvent);
    switch (colEvent.type) {
      case Events.EVENT_COLUMN_MOVED:
        {
          var movedEvent = colEvent;
          var srcColState = colEvent.columnApi.getColumnState();
          var destColState = srcColState.map(function(s3) {
            return { colId: s3.colId };
          });
          this.columnModel.applyColumnState({ state: destColState, applyOrder: true }, "alignedGridChanged");
          this.logger.log("onColumnEvent-> processing " + colEvent.type + " toIndex = " + movedEvent.toIndex);
        }
        break;
      case Events.EVENT_COLUMN_VISIBLE:
        {
          var visibleEvent = colEvent;
          var srcColState = colEvent.columnApi.getColumnState();
          var destColState = srcColState.map(function(s3) {
            return { colId: s3.colId, hide: s3.hide };
          });
          this.columnModel.applyColumnState({ state: destColState }, "alignedGridChanged");
          this.logger.log("onColumnEvent-> processing " + colEvent.type + " visible = " + visibleEvent.visible);
        }
        break;
      case Events.EVENT_COLUMN_PINNED:
        {
          var pinnedEvent = colEvent;
          var srcColState = colEvent.columnApi.getColumnState();
          var destColState = srcColState.map(function(s3) {
            return { colId: s3.colId, pinned: s3.pinned };
          });
          this.columnModel.applyColumnState({ state: destColState }, "alignedGridChanged");
          this.logger.log("onColumnEvent-> processing " + colEvent.type + " pinned = " + pinnedEvent.pinned);
        }
        break;
      case Events.EVENT_COLUMN_RESIZED:
        var resizedEvent = colEvent;
        var columnWidths_1 = {};
        masterColumns.forEach(function(column) {
          _this.logger.log("onColumnEvent-> processing " + colEvent.type + " actualWidth = " + column.getActualWidth());
          columnWidths_1[column.getId()] = { key: column.getColId(), newWidth: column.getActualWidth() };
        });
        (_a2 = resizedEvent.flexColumns) === null || _a2 === void 0 ? void 0 : _a2.forEach(function(col) {
          if (columnWidths_1[col.getId()]) {
            delete columnWidths_1[col.getId()];
          }
        });
        this.columnModel.setColumnWidths(Object.values(columnWidths_1), false, resizedEvent.finished, "alignedGridChanged");
        break;
    }
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var isVerticalScrollShowing2 = gridBodyCon.isVerticalScrollShowing();
    var alignedGrids = this.gridOptionsWrapper.getAlignedGrids();
    if (alignedGrids) {
      alignedGrids.forEach(function(grid) {
        if (grid.api) {
          grid.api.setAlwaysShowVerticalScroll(isVerticalScrollShowing2);
        }
      });
    }
  };
  __decorate$L([
    Autowired("columnModel")
  ], AlignedGridsService2.prototype, "columnModel", void 0);
  __decorate$L([
    Autowired("ctrlsService")
  ], AlignedGridsService2.prototype, "ctrlsService", void 0);
  __decorate$L([
    __param$5(0, Qualifier("loggerFactory"))
  ], AlignedGridsService2.prototype, "setBeans", null);
  __decorate$L([
    PostConstruct
  ], AlignedGridsService2.prototype, "init", null);
  AlignedGridsService2 = __decorate$L([
    Bean("alignedGridsService")
  ], AlignedGridsService2);
  return AlignedGridsService2;
}(BeanStub);
var __extends$I = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$K = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$4 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var SelectionService = function(_super) {
  __extends$I(SelectionService2, _super);
  function SelectionService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SelectionService2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("selectionService");
    this.reset();
  };
  SelectionService2.prototype.init = function() {
    this.groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
    this.addManagedListener(this.eventService, Events.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));
  };
  SelectionService2.prototype.setLastSelectedNode = function(rowNode) {
    this.lastSelectedNode = rowNode;
  };
  SelectionService2.prototype.getLastSelectedNode = function() {
    return this.lastSelectedNode;
  };
  SelectionService2.prototype.getSelectedNodes = function() {
    var selectedNodes = [];
    iterateObject(this.selectedNodes, function(key, rowNode) {
      if (rowNode) {
        selectedNodes.push(rowNode);
      }
    });
    return selectedNodes;
  };
  SelectionService2.prototype.getSelectedRows = function() {
    var selectedRows = [];
    iterateObject(this.selectedNodes, function(key, rowNode) {
      if (rowNode && rowNode.data) {
        selectedRows.push(rowNode.data);
      }
    });
    return selectedRows;
  };
  SelectionService2.prototype.removeGroupsFromSelection = function() {
    var _this = this;
    iterateObject(this.selectedNodes, function(key, rowNode) {
      if (rowNode && rowNode.group) {
        _this.selectedNodes[rowNode.id] = void 0;
      }
    });
  };
  SelectionService2.prototype.updateGroupsFromChildrenSelections = function(changedPath) {
    if (!this.gridOptionsWrapper.isGroupSelectsChildren()) {
      return;
    }
    if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      return;
    }
    var clientSideRowModel = this.rowModel;
    var rootNode = clientSideRowModel.getRootNode();
    if (!changedPath) {
      changedPath = new ChangedPath(true, rootNode);
      changedPath.setInactive();
    }
    changedPath.forEachChangedNodeDepthFirst(function(rowNode) {
      if (rowNode !== rootNode) {
        var selected = rowNode.calculateSelectedFromChildren();
        rowNode.selectThisNode(selected === null ? false : selected);
      }
    });
  };
  SelectionService2.prototype.getNodeForIdIfSelected = function(id) {
    return this.selectedNodes[id];
  };
  SelectionService2.prototype.clearOtherNodes = function(rowNodeToKeepSelected) {
    var _this = this;
    var groupsToRefresh = {};
    var updatedCount = 0;
    iterateObject(this.selectedNodes, function(key, otherRowNode) {
      if (otherRowNode && otherRowNode.id !== rowNodeToKeepSelected.id) {
        var rowNode = _this.selectedNodes[otherRowNode.id];
        updatedCount += rowNode.setSelectedParams({
          newValue: false,
          clearSelection: false,
          suppressFinishActions: true
        });
        if (_this.groupSelectsChildren && otherRowNode.parent) {
          groupsToRefresh[otherRowNode.parent.id] = otherRowNode.parent;
        }
      }
    });
    iterateObject(groupsToRefresh, function(key, group) {
      var selected = group.calculateSelectedFromChildren();
      group.selectThisNode(selected === null ? false : selected);
    });
    return updatedCount;
  };
  SelectionService2.prototype.onRowSelected = function(event) {
    var rowNode = event.node;
    if (this.groupSelectsChildren && rowNode.group) {
      return;
    }
    if (rowNode.isSelected()) {
      this.selectedNodes[rowNode.id] = rowNode;
    } else {
      this.selectedNodes[rowNode.id] = void 0;
    }
  };
  SelectionService2.prototype.syncInRowNode = function(rowNode, oldNode) {
    this.syncInOldRowNode(rowNode, oldNode);
    this.syncInNewRowNode(rowNode);
  };
  SelectionService2.prototype.syncInOldRowNode = function(rowNode, oldNode) {
    var oldNodeHasDifferentId = exists(oldNode) && rowNode.id !== oldNode.id;
    if (oldNodeHasDifferentId && oldNode) {
      var id = oldNode.id;
      var oldNodeSelected = this.selectedNodes[id] == rowNode;
      if (oldNodeSelected) {
        this.selectedNodes[oldNode.id] = oldNode;
      }
    }
  };
  SelectionService2.prototype.syncInNewRowNode = function(rowNode) {
    if (exists(this.selectedNodes[rowNode.id])) {
      rowNode.setSelectedInitialValue(true);
      this.selectedNodes[rowNode.id] = rowNode;
    } else {
      rowNode.setSelectedInitialValue(false);
    }
  };
  SelectionService2.prototype.reset = function() {
    this.logger.log("reset");
    this.selectedNodes = {};
    this.lastSelectedNode = null;
  };
  SelectionService2.prototype.getBestCostNodeSelection = function() {
    if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      console.warn("AG Grid: `getBestCostNodeSelection` is only available when using normal row model");
      return;
    }
    var clientSideRowModel = this.rowModel;
    var topLevelNodes = clientSideRowModel.getTopLevelNodes();
    if (topLevelNodes === null) {
      console.warn("AG Grid: `selectAll` not available doing `rowModel=virtual`");
      return;
    }
    var result = [];
    function traverse(nodes) {
      for (var i2 = 0, l = nodes.length; i2 < l; i2++) {
        var node = nodes[i2];
        if (node.isSelected()) {
          result.push(node);
        } else {
          var maybeGroup = node;
          if (maybeGroup.group && maybeGroup.children) {
            traverse(maybeGroup.children);
          }
        }
      }
    }
    traverse(topLevelNodes);
    return result;
  };
  SelectionService2.prototype.setRowModel = function(rowModel) {
    this.rowModel = rowModel;
  };
  SelectionService2.prototype.isEmpty = function() {
    var count = 0;
    iterateObject(this.selectedNodes, function(nodeId, rowNode) {
      if (rowNode) {
        count++;
      }
    });
    return count === 0;
  };
  SelectionService2.prototype.deselectAllRowNodes = function(justFiltered) {
    if (justFiltered === void 0) {
      justFiltered = false;
    }
    var callback = function(rowNode) {
      return rowNode.selectThisNode(false);
    };
    var rowModelClientSide = this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
    if (justFiltered) {
      if (!rowModelClientSide) {
        console.error("AG Grid: selecting just filtered only works with In Memory Row Model");
        return;
      }
      var clientSideRowModel = this.rowModel;
      clientSideRowModel.forEachNodeAfterFilter(callback);
    } else {
      iterateObject(this.selectedNodes, function(id, rowNode) {
        if (rowNode) {
          callback(rowNode);
        }
      });
      this.reset();
    }
    if (rowModelClientSide && this.groupSelectsChildren) {
      this.updateGroupsFromChildrenSelections();
    }
    var event = {
      type: Events.EVENT_SELECTION_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  SelectionService2.prototype.selectAllRowNodes = function(justFiltered) {
    if (justFiltered === void 0) {
      justFiltered = false;
    }
    if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      throw new Error("selectAll only available with normal row model, ie not " + this.rowModel.getType());
    }
    var clientSideRowModel = this.rowModel;
    var callback = function(rowNode) {
      return rowNode.selectThisNode(true);
    };
    if (justFiltered) {
      clientSideRowModel.forEachNodeAfterFilter(callback);
    } else {
      clientSideRowModel.forEachNode(callback);
    }
    if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE && this.groupSelectsChildren) {
      this.updateGroupsFromChildrenSelections();
    }
    var event = {
      type: Events.EVENT_SELECTION_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  SelectionService2.prototype.selectNode = function(rowNode, tryMulti) {
    if (rowNode) {
      rowNode.setSelectedParams({ newValue: true, clearSelection: !tryMulti });
    }
  };
  SelectionService2.prototype.deselectIndex = function(rowIndex) {
    var node = this.rowModel.getRow(rowIndex);
    this.deselectNode(node);
  };
  SelectionService2.prototype.deselectNode = function(rowNode) {
    if (rowNode) {
      rowNode.setSelectedParams({ newValue: false, clearSelection: false });
    }
  };
  SelectionService2.prototype.selectIndex = function(index, tryMulti) {
    var node = this.rowModel.getRow(index);
    this.selectNode(node, tryMulti);
  };
  __decorate$K([
    Autowired("rowModel")
  ], SelectionService2.prototype, "rowModel", void 0);
  __decorate$K([
    __param$4(0, Qualifier("loggerFactory"))
  ], SelectionService2.prototype, "setBeans", null);
  __decorate$K([
    PostConstruct
  ], SelectionService2.prototype, "init", null);
  SelectionService2 = __decorate$K([
    Bean("selectionService")
  ], SelectionService2);
  return SelectionService2;
}(BeanStub);
var __decorate$J = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnApi = function() {
  function ColumnApi2() {
  }
  ColumnApi2.prototype.sizeColumnsToFit = function(gridWidth) {
    if (typeof gridWidth === "undefined") {
      console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)");
    }
    this.columnModel.sizeColumnsToFit(gridWidth, "api");
  };
  ColumnApi2.prototype.setColumnGroupOpened = function(group, newValue) {
    this.columnModel.setColumnGroupOpened(group, newValue, "api");
  };
  ColumnApi2.prototype.getColumnGroup = function(name, instanceId) {
    return this.columnModel.getColumnGroup(name, instanceId);
  };
  ColumnApi2.prototype.getProvidedColumnGroup = function(name) {
    return this.columnModel.getProvidedColumnGroup(name);
  };
  ColumnApi2.prototype.getDisplayNameForColumn = function(column, location) {
    return this.columnModel.getDisplayNameForColumn(column, location) || "";
  };
  ColumnApi2.prototype.getDisplayNameForColumnGroup = function(columnGroup, location) {
    return this.columnModel.getDisplayNameForColumnGroup(columnGroup, location) || "";
  };
  ColumnApi2.prototype.getColumn = function(key) {
    return this.columnModel.getPrimaryColumn(key);
  };
  ColumnApi2.prototype.getColumns = function() {
    return this.columnModel.getAllPrimaryColumns();
  };
  ColumnApi2.prototype.applyColumnState = function(params) {
    return this.columnModel.applyColumnState(params, "api");
  };
  ColumnApi2.prototype.getColumnState = function() {
    return this.columnModel.getColumnState();
  };
  ColumnApi2.prototype.resetColumnState = function() {
    this.columnModel.resetColumnState("api");
  };
  ColumnApi2.prototype.getColumnGroupState = function() {
    return this.columnModel.getColumnGroupState();
  };
  ColumnApi2.prototype.setColumnGroupState = function(stateItems) {
    this.columnModel.setColumnGroupState(stateItems, "api");
  };
  ColumnApi2.prototype.resetColumnGroupState = function() {
    this.columnModel.resetColumnGroupState("api");
  };
  ColumnApi2.prototype.isPinning = function() {
    return this.columnModel.isPinningLeft() || this.columnModel.isPinningRight();
  };
  ColumnApi2.prototype.isPinningLeft = function() {
    return this.columnModel.isPinningLeft();
  };
  ColumnApi2.prototype.isPinningRight = function() {
    return this.columnModel.isPinningRight();
  };
  ColumnApi2.prototype.getDisplayedColAfter = function(col) {
    return this.columnModel.getDisplayedColAfter(col);
  };
  ColumnApi2.prototype.getDisplayedColBefore = function(col) {
    return this.columnModel.getDisplayedColBefore(col);
  };
  ColumnApi2.prototype.setColumnVisible = function(key, visible) {
    this.columnModel.setColumnVisible(key, visible, "api");
  };
  ColumnApi2.prototype.setColumnsVisible = function(keys2, visible) {
    this.columnModel.setColumnsVisible(keys2, visible, "api");
  };
  ColumnApi2.prototype.setColumnPinned = function(key, pinned) {
    this.columnModel.setColumnPinned(key, pinned, "api");
  };
  ColumnApi2.prototype.setColumnsPinned = function(keys2, pinned) {
    this.columnModel.setColumnsPinned(keys2, pinned, "api");
  };
  ColumnApi2.prototype.getAllGridColumns = function() {
    return this.columnModel.getAllGridColumns();
  };
  ColumnApi2.prototype.getDisplayedLeftColumns = function() {
    return this.columnModel.getDisplayedLeftColumns();
  };
  ColumnApi2.prototype.getDisplayedCenterColumns = function() {
    return this.columnModel.getDisplayedCenterColumns();
  };
  ColumnApi2.prototype.getDisplayedRightColumns = function() {
    return this.columnModel.getDisplayedRightColumns();
  };
  ColumnApi2.prototype.getAllDisplayedColumns = function() {
    return this.columnModel.getAllDisplayedColumns();
  };
  ColumnApi2.prototype.getAllDisplayedVirtualColumns = function() {
    return this.columnModel.getViewportColumns();
  };
  ColumnApi2.prototype.moveColumn = function(key, toIndex) {
    if (typeof key === "number") {
      console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead");
      this.columnModel.moveColumnByIndex(key, toIndex, "api");
    } else {
      this.columnModel.moveColumn(key, toIndex, "api");
    }
  };
  ColumnApi2.prototype.moveColumnByIndex = function(fromIndex, toIndex) {
    this.columnModel.moveColumnByIndex(fromIndex, toIndex, "api");
  };
  ColumnApi2.prototype.moveColumns = function(columnsToMoveKeys, toIndex) {
    this.columnModel.moveColumns(columnsToMoveKeys, toIndex, "api");
  };
  ColumnApi2.prototype.moveRowGroupColumn = function(fromIndex, toIndex) {
    this.columnModel.moveRowGroupColumn(fromIndex, toIndex);
  };
  ColumnApi2.prototype.setColumnAggFunc = function(key, aggFunc) {
    this.columnModel.setColumnAggFunc(key, aggFunc);
  };
  ColumnApi2.prototype.setColumnWidth = function(key, newWidth, finished, source) {
    if (finished === void 0) {
      finished = true;
    }
    this.columnModel.setColumnWidths([{ key, newWidth }], false, finished, source);
  };
  ColumnApi2.prototype.setColumnWidths = function(columnWidths, finished, source) {
    if (finished === void 0) {
      finished = true;
    }
    this.columnModel.setColumnWidths(columnWidths, false, finished, source);
  };
  ColumnApi2.prototype.setPivotMode = function(pivotMode) {
    this.columnModel.setPivotMode(pivotMode);
  };
  ColumnApi2.prototype.isPivotMode = function() {
    return this.columnModel.isPivotMode();
  };
  ColumnApi2.prototype.getSecondaryPivotColumn = function(pivotKeys, valueColKey) {
    console.warn("AG Grid: since version 28.0.x getSecondaryPivotColumn has been renamed, please use getPivotResultColumn instead");
    return this.getPivotResultColumn(pivotKeys, valueColKey);
  };
  ColumnApi2.prototype.getPivotResultColumn = function(pivotKeys, valueColKey) {
    return this.columnModel.getSecondaryPivotColumn(pivotKeys, valueColKey);
  };
  ColumnApi2.prototype.setValueColumns = function(colKeys) {
    this.columnModel.setValueColumns(colKeys, "api");
  };
  ColumnApi2.prototype.getValueColumns = function() {
    return this.columnModel.getValueColumns();
  };
  ColumnApi2.prototype.removeValueColumn = function(colKey) {
    this.columnModel.removeValueColumn(colKey, "api");
  };
  ColumnApi2.prototype.removeValueColumns = function(colKeys) {
    this.columnModel.removeValueColumns(colKeys, "api");
  };
  ColumnApi2.prototype.addValueColumn = function(colKey) {
    this.columnModel.addValueColumn(colKey, "api");
  };
  ColumnApi2.prototype.addValueColumns = function(colKeys) {
    this.columnModel.addValueColumns(colKeys, "api");
  };
  ColumnApi2.prototype.setRowGroupColumns = function(colKeys) {
    this.columnModel.setRowGroupColumns(colKeys, "api");
  };
  ColumnApi2.prototype.removeRowGroupColumn = function(colKey) {
    this.columnModel.removeRowGroupColumn(colKey, "api");
  };
  ColumnApi2.prototype.removeRowGroupColumns = function(colKeys) {
    this.columnModel.removeRowGroupColumns(colKeys, "api");
  };
  ColumnApi2.prototype.addRowGroupColumn = function(colKey) {
    this.columnModel.addRowGroupColumn(colKey, "api");
  };
  ColumnApi2.prototype.addRowGroupColumns = function(colKeys) {
    this.columnModel.addRowGroupColumns(colKeys, "api");
  };
  ColumnApi2.prototype.getRowGroupColumns = function() {
    return this.columnModel.getRowGroupColumns();
  };
  ColumnApi2.prototype.setPivotColumns = function(colKeys) {
    this.columnModel.setPivotColumns(colKeys, "api");
  };
  ColumnApi2.prototype.removePivotColumn = function(colKey) {
    this.columnModel.removePivotColumn(colKey, "api");
  };
  ColumnApi2.prototype.removePivotColumns = function(colKeys) {
    this.columnModel.removePivotColumns(colKeys, "api");
  };
  ColumnApi2.prototype.addPivotColumn = function(colKey) {
    this.columnModel.addPivotColumn(colKey, "api");
  };
  ColumnApi2.prototype.addPivotColumns = function(colKeys) {
    this.columnModel.addPivotColumns(colKeys, "api");
  };
  ColumnApi2.prototype.getPivotColumns = function() {
    return this.columnModel.getPivotColumns();
  };
  ColumnApi2.prototype.getLeftDisplayedColumnGroups = function() {
    return this.columnModel.getDisplayedTreeLeft();
  };
  ColumnApi2.prototype.getCenterDisplayedColumnGroups = function() {
    return this.columnModel.getDisplayedTreeCentre();
  };
  ColumnApi2.prototype.getRightDisplayedColumnGroups = function() {
    return this.columnModel.getDisplayedTreeRight();
  };
  ColumnApi2.prototype.getAllDisplayedColumnGroups = function() {
    return this.columnModel.getAllDisplayedTrees();
  };
  ColumnApi2.prototype.autoSizeColumn = function(key, skipHeader) {
    return this.columnModel.autoSizeColumn(key, skipHeader, "api");
  };
  ColumnApi2.prototype.autoSizeColumns = function(keys2, skipHeader) {
    this.columnModel.autoSizeColumns({ columns: keys2, skipHeader });
  };
  ColumnApi2.prototype.autoSizeAllColumns = function(skipHeader) {
    this.columnModel.autoSizeAllColumns(skipHeader, "api");
  };
  ColumnApi2.prototype.setSecondaryColumns = function(colDefs) {
    console.warn("AG Grid: since version 28.0.x setSecondaryColumns has been renamed, please use setPivotResultColumns instead");
    this.setPivotResultColumns(colDefs);
  };
  ColumnApi2.prototype.setPivotResultColumns = function(colDefs) {
    this.columnModel.setSecondaryColumns(colDefs, "api");
  };
  ColumnApi2.prototype.getSecondaryColumns = function() {
    console.warn("AG Grid: since version 28.0.x getSecondaryColumns has been renamed, please use getPivotResultColumns instead");
    return this.getPivotResultColumns();
  };
  ColumnApi2.prototype.getPivotResultColumns = function() {
    return this.columnModel.getSecondaryColumns();
  };
  ColumnApi2.prototype.getPrimaryColumns = function() {
    console.warn("AG Grid: since version 28.0.x getPrimaryColumns has been renamed, please use getColumns instead");
    return this.getColumns();
  };
  ColumnApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid = function() {
    setTimeout(_.removeAllReferences.bind(window, this, "Column API"), 100);
  };
  ColumnApi2.prototype.getAllColumns = function() {
    console.warn("AG Grid: since version 28.0.x getAllColumns has been renamed, please use getColumns instead");
    return this.getColumns();
  };
  ColumnApi2.prototype.columnGroupOpened = function(group, newValue) {
    console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened");
    this.setColumnGroupOpened(group, newValue);
  };
  ColumnApi2.prototype.hideColumns = function(colIds, hide) {
    console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible");
    this.columnModel.setColumnsVisible(colIds, !hide, "api");
  };
  ColumnApi2.prototype.hideColumn = function(colId, hide) {
    console.error("AG Grid: hideColumn is deprecated, use setColumnVisible");
    this.columnModel.setColumnVisible(colId, !hide, "api");
  };
  ColumnApi2.prototype.setState = function(columnState) {
    console.error("AG Grid: setState is deprecated, use setColumnState");
    return this.setColumnState(columnState);
  };
  ColumnApi2.prototype.getState = function() {
    console.error("AG Grid: getState is deprecated, use getColumnState");
    return this.getColumnState();
  };
  ColumnApi2.prototype.resetState = function() {
    console.error("AG Grid: resetState is deprecated, use resetColumnState");
    this.resetColumnState();
  };
  ColumnApi2.prototype.getAggregationColumns = function() {
    console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns");
    return this.columnModel.getValueColumns();
  };
  ColumnApi2.prototype.removeAggregationColumn = function(colKey) {
    console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn");
    this.columnModel.removeValueColumn(colKey, "api");
  };
  ColumnApi2.prototype.removeAggregationColumns = function(colKeys) {
    console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns");
    this.columnModel.removeValueColumns(colKeys, "api");
  };
  ColumnApi2.prototype.addAggregationColumn = function(colKey) {
    console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn");
    this.columnModel.addValueColumn(colKey, "api");
  };
  ColumnApi2.prototype.addAggregationColumns = function(colKeys) {
    console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns");
    this.columnModel.addValueColumns(colKeys, "api");
  };
  ColumnApi2.prototype.setColumnAggFunction = function(column, aggFunc) {
    console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc");
    this.columnModel.setColumnAggFunc(column, aggFunc, "api");
  };
  ColumnApi2.prototype.getDisplayNameForCol = function(column) {
    console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn");
    return this.getDisplayNameForColumn(column, null);
  };
  ColumnApi2.prototype.setColumnState = function(columnState) {
    console.error("AG Grid: setColumnState is deprecated, use applyColumnState");
    return this.columnModel.applyColumnState({ state: columnState, applyOrder: true }, "api");
  };
  ColumnApi2.prototype.getOriginalColumnGroup = function(name) {
    console.error("AG Grid: getOriginalColumnGroup is deprecated, use getProvidedColumnGroup");
    return this.columnModel.getProvidedColumnGroup(name);
  };
  __decorate$J([
    Autowired("columnModel")
  ], ColumnApi2.prototype, "columnModel", void 0);
  __decorate$J([
    PreDestroy
  ], ColumnApi2.prototype, "cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid", null);
  ColumnApi2 = __decorate$J([
    Bean("columnApi")
  ], ColumnApi2);
  return ColumnApi2;
}();
var __extends$H = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$I = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ValueService = function(_super) {
  __extends$H(ValueService2, _super);
  function ValueService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.initialised = false;
    return _this;
  }
  ValueService2.prototype.init = function() {
    var _this = this;
    this.cellExpressions = this.gridOptionsWrapper.isEnableCellExpressions();
    this.initialised = true;
    this.eventService.addEventListener(Events.EVENT_CELL_VALUE_CHANGED, function(event) {
      return _this.callColumnCellValueChangedHandler(event);
    }, this.gridOptionsWrapper.useAsyncEvents());
  };
  ValueService2.prototype.getValue = function(column, rowNode, forFilter, ignoreAggData) {
    if (forFilter === void 0) {
      forFilter = false;
    }
    if (ignoreAggData === void 0) {
      ignoreAggData = false;
    }
    if (!this.initialised) {
      this.init();
    }
    if (!rowNode) {
      return;
    }
    var colDef = column.getColDef();
    var field = colDef.field;
    var colId = column.getId();
    var data = rowNode.data;
    var result;
    var groupDataExists = rowNode.groupData && rowNode.groupData[colId] !== void 0;
    var aggDataExists = !ignoreAggData && rowNode.aggData && rowNode.aggData[colId] !== void 0;
    if (forFilter && colDef.filterValueGetter) {
      result = this.executeFilterValueGetter(colDef.filterValueGetter, data, column, rowNode);
    } else if (this.gridOptionsWrapper.isTreeData() && aggDataExists) {
      result = rowNode.aggData[colId];
    } else if (this.gridOptionsWrapper.isTreeData() && colDef.valueGetter) {
      result = this.executeValueGetter(colDef.valueGetter, data, column, rowNode);
    } else if (this.gridOptionsWrapper.isTreeData() && (field && data)) {
      result = getValueUsingField(data, field, column.isFieldContainsDots());
    } else if (groupDataExists) {
      result = rowNode.groupData[colId];
    } else if (aggDataExists) {
      result = rowNode.aggData[colId];
    } else if (colDef.valueGetter) {
      result = this.executeValueGetter(colDef.valueGetter, data, column, rowNode);
    } else if (field && data) {
      result = getValueUsingField(data, field, column.isFieldContainsDots());
    }
    if (this.cellExpressions && typeof result === "string" && result.indexOf("=") === 0) {
      var cellValueGetter = result.substring(1);
      result = this.executeValueGetter(cellValueGetter, data, column, rowNode);
    }
    if (result == null) {
      var openedGroup = this.getOpenedGroup(rowNode, column);
      if (openedGroup != null) {
        return openedGroup;
      }
    }
    return result;
  };
  ValueService2.prototype.getOpenedGroup = function(rowNode, column) {
    if (!this.gridOptionsWrapper.isShowOpenedGroup()) {
      return;
    }
    var colDef = column.getColDef();
    if (!colDef.showRowGroup) {
      return;
    }
    var showRowGroup = column.getColDef().showRowGroup;
    var pointer = rowNode.parent;
    while (pointer != null) {
      if (pointer.rowGroupColumn && (showRowGroup === true || showRowGroup === pointer.rowGroupColumn.getId())) {
        return pointer.key;
      }
      pointer = pointer.parent;
    }
    return void 0;
  };
  ValueService2.prototype.setValue = function(rowNode, colKey, newValue, eventSource) {
    var column = this.columnModel.getPrimaryColumn(colKey);
    if (!rowNode || !column) {
      return false;
    }
    if (missing(rowNode.data)) {
      rowNode.data = {};
    }
    var _a2 = column.getColDef(), field = _a2.field, newValueHandler = _a2.newValueHandler, valueSetter = _a2.valueSetter;
    if (missing(field) && missing(newValueHandler) && missing(valueSetter)) {
      console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work");
      return false;
    }
    var params = {
      node: rowNode,
      data: rowNode.data,
      oldValue: this.getValue(column, rowNode),
      newValue,
      colDef: column.getColDef(),
      column,
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext()
    };
    params.newValue = newValue;
    var valueWasDifferent;
    if (newValueHandler && exists(newValueHandler)) {
      valueWasDifferent = newValueHandler(params);
    } else if (exists(valueSetter)) {
      valueWasDifferent = this.expressionService.evaluate(valueSetter, params);
    } else {
      valueWasDifferent = this.setValueUsingField(rowNode.data, field, newValue, column.isFieldContainsDots());
    }
    if (valueWasDifferent === void 0) {
      valueWasDifferent = true;
    }
    if (!valueWasDifferent) {
      return false;
    }
    rowNode.resetQuickFilterAggregateText();
    this.valueCache.onDataChanged();
    params.newValue = this.getValue(column, rowNode);
    var event = {
      type: Events.EVENT_CELL_VALUE_CHANGED,
      event: null,
      rowIndex: rowNode.rowIndex,
      rowPinned: rowNode.rowPinned,
      column: params.column,
      api: params.api,
      columnApi: params.columnApi,
      colDef: params.colDef,
      context: params.context,
      data: rowNode.data,
      node: rowNode,
      oldValue: params.oldValue,
      newValue: params.newValue,
      value: params.newValue,
      source: eventSource
    };
    this.eventService.dispatchEvent(event);
    return true;
  };
  ValueService2.prototype.callColumnCellValueChangedHandler = function(event) {
    var onCellValueChanged = event.colDef.onCellValueChanged;
    if (typeof onCellValueChanged === "function") {
      onCellValueChanged({
        node: event.node,
        data: event.data,
        oldValue: event.oldValue,
        newValue: event.newValue,
        colDef: event.colDef,
        column: event.column,
        api: event.api,
        columnApi: event.columnApi,
        context: event.context
      });
    }
  };
  ValueService2.prototype.setValueUsingField = function(data, field, newValue, isFieldContainsDots) {
    if (!field) {
      return false;
    }
    var valuesAreSame = false;
    if (!isFieldContainsDots) {
      valuesAreSame = data[field] == newValue;
      if (!valuesAreSame) {
        data[field] = newValue;
      }
    } else {
      var fieldPieces = field.split(".");
      var currentObject = data;
      while (fieldPieces.length > 0 && currentObject) {
        var fieldPiece = fieldPieces.shift();
        if (fieldPieces.length === 0) {
          valuesAreSame = currentObject[fieldPiece] == newValue;
          if (!valuesAreSame) {
            currentObject[fieldPiece] = newValue;
          }
        } else {
          currentObject = currentObject[fieldPiece];
        }
      }
    }
    return !valuesAreSame;
  };
  ValueService2.prototype.executeFilterValueGetter = function(valueGetter, data, column, rowNode) {
    var params = {
      data,
      node: rowNode,
      column,
      colDef: column.getColDef(),
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext(),
      getValue: this.getValueCallback.bind(this, rowNode)
    };
    return this.expressionService.evaluate(valueGetter, params);
  };
  ValueService2.prototype.executeValueGetter = function(valueGetter, data, column, rowNode) {
    var colId = column.getId();
    var valueFromCache = this.valueCache.getValue(rowNode, colId);
    if (valueFromCache !== void 0) {
      return valueFromCache;
    }
    var params = {
      data,
      node: rowNode,
      column,
      colDef: column.getColDef(),
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext(),
      getValue: this.getValueCallback.bind(this, rowNode)
    };
    var result = this.expressionService.evaluate(valueGetter, params);
    this.valueCache.setValue(rowNode, colId, result);
    return result;
  };
  ValueService2.prototype.getValueCallback = function(node, field) {
    var otherColumn = this.columnModel.getPrimaryColumn(field);
    if (otherColumn) {
      return this.getValue(otherColumn, node);
    }
    return null;
  };
  ValueService2.prototype.getKeyForNode = function(col, rowNode) {
    var value = this.getValue(col, rowNode);
    var keyCreator = col.getColDef().keyCreator;
    var result = value;
    if (keyCreator) {
      var keyParams = {
        value,
        colDef: col.getColDef(),
        column: col,
        node: rowNode,
        data: rowNode.data,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      result = keyCreator(keyParams);
    }
    if (typeof result === "string" || result == null) {
      return result;
    }
    result = String(result);
    if (result === "[object Object]") {
      doOnce(function() {
        console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key");
      }, "getKeyForNode - warn about [object,object]");
    }
    return result;
  };
  __decorate$I([
    Autowired("expressionService")
  ], ValueService2.prototype, "expressionService", void 0);
  __decorate$I([
    Autowired("columnModel")
  ], ValueService2.prototype, "columnModel", void 0);
  __decorate$I([
    Autowired("valueCache")
  ], ValueService2.prototype, "valueCache", void 0);
  __decorate$I([
    PostConstruct
  ], ValueService2.prototype, "init", null);
  ValueService2 = __decorate$I([
    Bean("valueService")
  ], ValueService2);
  return ValueService2;
}(BeanStub);
var __extends$G = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$H = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$3 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var ExpressionService = function(_super) {
  __extends$G(ExpressionService2, _super);
  function ExpressionService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.expressionToFunctionCache = {};
    return _this;
  }
  ExpressionService2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("ExpressionService");
  };
  ExpressionService2.prototype.evaluate = function(expressionOrFunc, params) {
    if (typeof expressionOrFunc === "function") {
      var func = expressionOrFunc;
      return func(params);
    } else if (typeof expressionOrFunc === "string") {
      var expression = expressionOrFunc;
      return this.evaluateExpression(expression, params);
    } else {
      console.error("AG Grid: value should be either a string or a function", expressionOrFunc);
    }
  };
  ExpressionService2.prototype.evaluateExpression = function(expression, params) {
    try {
      var javaScriptFunction = this.createExpressionFunction(expression);
      var result = javaScriptFunction(params.value, params.context, params.oldValue, params.newValue, params.value, params.node, params.data, params.colDef, params.rowIndex, params.api, params.columnApi, params.getValue, params.column, params.columnGroup);
      return result;
    } catch (e2) {
      console.log("Processing of the expression failed");
      console.log("Expression = " + expression);
      console.log("Params =", params);
      console.log("Exception = " + e2);
      return null;
    }
  };
  ExpressionService2.prototype.createExpressionFunction = function(expression) {
    if (this.expressionToFunctionCache[expression]) {
      return this.expressionToFunctionCache[expression];
    }
    var functionBody = this.createFunctionBody(expression);
    var theFunction = new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup", functionBody);
    this.expressionToFunctionCache[expression] = theFunction;
    return theFunction;
  };
  ExpressionService2.prototype.createFunctionBody = function(expression) {
    if (expression.indexOf("return") >= 0) {
      return expression;
    } else {
      return "return " + expression + ";";
    }
  };
  __decorate$H([
    __param$3(0, Qualifier("loggerFactory"))
  ], ExpressionService2.prototype, "setBeans", null);
  ExpressionService2 = __decorate$H([
    Bean("expressionService")
  ], ExpressionService2);
  return ExpressionService2;
}(BeanStub);
var __extends$F = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$G = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var TemplateService = function(_super) {
  __extends$F(TemplateService2, _super);
  function TemplateService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.templateCache = {};
    _this.waitingCallbacks = {};
    return _this;
  }
  TemplateService2.prototype.getTemplate = function(url, callback) {
    var templateFromCache = this.templateCache[url];
    if (templateFromCache) {
      return templateFromCache;
    }
    var callbackList = this.waitingCallbacks[url];
    var that = this;
    if (!callbackList) {
      callbackList = [];
      this.waitingCallbacks[url] = callbackList;
      var client = new XMLHttpRequest();
      client.onload = function() {
        that.handleHttpResult(this, url);
      };
      client.open("GET", url);
      client.send();
    }
    if (callback) {
      callbackList.push(callback);
    }
    return null;
  };
  TemplateService2.prototype.handleHttpResult = function(httpResult, url) {
    if (httpResult.status !== 200 || httpResult.response === null) {
      console.warn("AG Grid: Unable to get template error " + httpResult.status + " - " + url);
      return;
    }
    this.templateCache[url] = httpResult.response || httpResult.responseText;
    var callbacks = this.waitingCallbacks[url];
    for (var i2 = 0; i2 < callbacks.length; i2++) {
      var callback = callbacks[i2];
      callback();
    }
  };
  TemplateService2 = __decorate$G([
    Bean("templateService")
  ], TemplateService2);
  return TemplateService2;
}(BeanStub);
var __extends$E = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$F = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$2 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var LoggerFactory = function(_super) {
  __extends$E(LoggerFactory2, _super);
  function LoggerFactory2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  LoggerFactory2.prototype.setBeans = function(gridOptionsWrapper) {
    this.logging = gridOptionsWrapper.isDebug();
  };
  LoggerFactory2.prototype.create = function(name) {
    return new Logger(name, this.isLogging.bind(this));
  };
  LoggerFactory2.prototype.isLogging = function() {
    return this.logging;
  };
  __decorate$F([
    __param$2(0, Qualifier("gridOptionsWrapper"))
  ], LoggerFactory2.prototype, "setBeans", null);
  LoggerFactory2 = __decorate$F([
    Bean("loggerFactory")
  ], LoggerFactory2);
  return LoggerFactory2;
}(BeanStub);
var Logger = function() {
  function Logger2(name, isLoggingFunc) {
    this.name = name;
    this.isLoggingFunc = isLoggingFunc;
  }
  Logger2.prototype.isLogging = function() {
    return this.isLoggingFunc();
  };
  Logger2.prototype.log = function(message2) {
    if (this.isLoggingFunc()) {
      console.log("AG Grid." + this.name + ": " + message2);
    }
  };
  return Logger2;
}();
var __extends$D = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$E = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GridCtrl = function(_super) {
  __extends$D(GridCtrl2, _super);
  function GridCtrl2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  GridCtrl2.prototype.setComp = function(view, eGridDiv, eGui) {
    var _this = this;
    this.view = view;
    this.eGridHostDiv = eGridDiv;
    this.eGui = eGui;
    this.dragAndDropService.addDropTarget({
      getContainer: function() {
        return _this.eGui;
      },
      isInterestedIn: function(type) {
        return type === DragSourceType.HeaderCell || type === DragSourceType.ToolPanel;
      },
      getIconName: function() {
        return DragAndDropService.ICON_NOT_ALLOWED;
      }
    });
    this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv);
    this.createManagedBean(new LayoutFeature(this.view));
    this.addRtlSupport();
    this.addManagedListener(this, Events.EVENT_KEYBOARD_FOCUS, function() {
      _this.view.addOrRemoveKeyboardFocusClass(true);
    });
    this.addManagedListener(this, Events.EVENT_MOUSE_FOCUS, function() {
      _this.view.addOrRemoveKeyboardFocusClass(false);
    });
    var unsubscribeFromResize = this.resizeObserverService.observeResize(this.eGridHostDiv, this.onGridSizeChanged.bind(this));
    this.addDestroyFunc(function() {
      return unsubscribeFromResize();
    });
    this.ctrlsService.registerGridCtrl(this);
  };
  GridCtrl2.prototype.isDetailGrid = function() {
    var _a2, _b;
    var el2 = this.focusService.findTabbableParent(this.getGui());
    return ((_b = (_a2 = el2) === null || _a2 === void 0 ? void 0 : _a2.getAttribute("row-id")) === null || _b === void 0 ? void 0 : _b.startsWith("detail")) || false;
  };
  GridCtrl2.prototype.showDropZones = function() {
    return ModuleRegistry.isRegistered(ModuleNames.RowGroupingModule);
  };
  GridCtrl2.prototype.showSideBar = function() {
    return ModuleRegistry.isRegistered(ModuleNames.SideBarModule);
  };
  GridCtrl2.prototype.showStatusBar = function() {
    return ModuleRegistry.isRegistered(ModuleNames.StatusBarModule);
  };
  GridCtrl2.prototype.showWatermark = function() {
    return ModuleRegistry.isRegistered(ModuleNames.EnterpriseCoreModule);
  };
  GridCtrl2.prototype.onGridSizeChanged = function() {
    var event = {
      type: Events.EVENT_GRID_SIZE_CHANGED,
      clientWidth: this.eGridHostDiv.clientWidth,
      clientHeight: this.eGridHostDiv.clientHeight
    };
    this.eventService.dispatchEvent(event);
  };
  GridCtrl2.prototype.addRtlSupport = function() {
    var cssClass = this.gridOptionsWrapper.isEnableRtl() ? "ag-rtl" : "ag-ltr";
    this.view.setRtlClass(cssClass);
  };
  GridCtrl2.prototype.destroyGridUi = function() {
    this.view.destroyGridUi();
  };
  GridCtrl2.prototype.getGui = function() {
    return this.eGui;
  };
  GridCtrl2.prototype.setResizeCursor = function(on2) {
    this.view.setCursor(on2 ? "ew-resize" : null);
  };
  GridCtrl2.prototype.disableUserSelect = function(on2) {
    this.view.setUserSelect(on2 ? "none" : null);
  };
  GridCtrl2.prototype.focusNextInnerContainer = function(backwards) {
    var eDocument = this.gridOptionsWrapper.getDocument();
    var focusableContainers = this.view.getFocusableContainers();
    var idxWithFocus = focusableContainers.findIndex(function(container) {
      return container.contains(eDocument.activeElement);
    });
    var nextIdx = idxWithFocus + (backwards ? -1 : 1);
    if (nextIdx <= 0 || nextIdx >= focusableContainers.length) {
      return false;
    }
    return this.focusService.focusInto(focusableContainers[nextIdx]);
  };
  GridCtrl2.prototype.focusInnerElement = function(fromBottom) {
    var focusableContainers = this.view.getFocusableContainers();
    if (fromBottom) {
      if (focusableContainers.length > 1) {
        return this.focusService.focusInto(last(focusableContainers), true);
      }
      var lastColumn = last(this.columnModel.getAllDisplayedColumns());
      if (this.focusService.focusGridView(lastColumn, true)) {
        return true;
      }
    }
    return this.focusService.focusFirstHeader();
  };
  GridCtrl2.prototype.forceFocusOutOfContainer = function(up) {
    if (up === void 0) {
      up = false;
    }
    this.view.forceFocusOutOfContainer(up);
  };
  __decorate$E([
    Autowired("focusService")
  ], GridCtrl2.prototype, "focusService", void 0);
  __decorate$E([
    Autowired("resizeObserverService")
  ], GridCtrl2.prototype, "resizeObserverService", void 0);
  __decorate$E([
    Autowired("columnModel")
  ], GridCtrl2.prototype, "columnModel", void 0);
  __decorate$E([
    Autowired("ctrlsService")
  ], GridCtrl2.prototype, "ctrlsService", void 0);
  __decorate$E([
    Autowired("mouseEventService")
  ], GridCtrl2.prototype, "mouseEventService", void 0);
  __decorate$E([
    Autowired("dragAndDropService")
  ], GridCtrl2.prototype, "dragAndDropService", void 0);
  return GridCtrl2;
}(BeanStub);
var __extends$C = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$D = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var GridComp = function(_super) {
  __extends$C(GridComp2, _super);
  function GridComp2(eGridDiv) {
    var _this = _super.call(this, void 0) || this;
    _this.eGridDiv = eGridDiv;
    return _this;
  }
  GridComp2.prototype.postConstruct = function() {
    var _this = this;
    this.logger = this.loggerFactory.create("GridComp");
    var compProxy = {
      destroyGridUi: function() {
        return _this.destroyBean(_this);
      },
      setRtlClass: function(cssClass) {
        return _this.addCssClass(cssClass);
      },
      addOrRemoveKeyboardFocusClass: function(addOrRemove) {
        return _this.addOrRemoveCssClass(FocusService.AG_KEYBOARD_FOCUS, addOrRemove);
      },
      forceFocusOutOfContainer: this.forceFocusOutOfContainer.bind(this),
      updateLayoutClasses: this.updateLayoutClasses.bind(this),
      getFocusableContainers: this.getFocusableContainers.bind(this),
      setUserSelect: function(value) {
        _this.getGui().style.userSelect = value != null ? value : "";
        _this.getGui().style.webkitUserSelect = value != null ? value : "";
      },
      setCursor: function(value) {
        _this.getGui().style.cursor = value != null ? value : "";
      }
    };
    this.ctrl = this.createManagedBean(new GridCtrl());
    var template = this.createTemplate();
    this.setTemplate(template);
    this.ctrl.setComp(compProxy, this.eGridDiv, this.getGui());
    this.insertGridIntoDom();
    this.initialiseTabGuard({
      onTabKeyDown: function() {
        return void 0;
      },
      focusInnerElement: function(fromBottom) {
        return _this.ctrl.focusInnerElement(fromBottom);
      }
    });
  };
  GridComp2.prototype.insertGridIntoDom = function() {
    var _this = this;
    var eGui = this.getGui();
    this.eGridDiv.appendChild(eGui);
    this.addDestroyFunc(function() {
      _this.eGridDiv.removeChild(eGui);
      _this.logger.log("Grid removed from DOM");
    });
  };
  GridComp2.prototype.updateLayoutClasses = function(cssClass, params) {
    var eRootWrapperBodyClassList = this.eRootWrapperBody.classList;
    eRootWrapperBodyClassList.toggle(LayoutCssClasses.AUTO_HEIGHT, params.autoHeight);
    eRootWrapperBodyClassList.toggle(LayoutCssClasses.NORMAL, params.normal);
    eRootWrapperBodyClassList.toggle(LayoutCssClasses.PRINT, params.print);
    this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT, params.autoHeight);
    this.addOrRemoveCssClass(LayoutCssClasses.NORMAL, params.normal);
    this.addOrRemoveCssClass(LayoutCssClasses.PRINT, params.print);
  };
  GridComp2.prototype.createTemplate = function() {
    var dropZones = this.ctrl.showDropZones() ? "<ag-grid-header-drop-zones></ag-grid-header-drop-zones>" : "";
    var sideBar = this.ctrl.showSideBar() ? '<ag-side-bar ref="sideBar"></ag-side-bar>' : "";
    var statusBar = this.ctrl.showStatusBar() ? '<ag-status-bar ref="statusBar"></ag-status-bar>' : "";
    var watermark = this.ctrl.showWatermark() ? "<ag-watermark></ag-watermark>" : "";
    var template = '<div class="ag-root-wrapper" role="presentation">\n                ' + dropZones + '\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    ' + sideBar + "\n                </div>\n                " + statusBar + "\n                <ag-pagination></ag-pagination>\n                " + watermark + "\n            </div>";
    return template;
  };
  GridComp2.prototype.getFocusableElement = function() {
    return this.eRootWrapperBody;
  };
  GridComp2.prototype.getFocusableContainers = function() {
    var focusableContainers = [
      this.gridBodyComp.getGui()
    ];
    if (this.sideBarComp) {
      focusableContainers.push(this.sideBarComp.getGui());
    }
    return focusableContainers.filter(function(el2) {
      return isVisible(el2);
    });
  };
  __decorate$D([
    Autowired("loggerFactory")
  ], GridComp2.prototype, "loggerFactory", void 0);
  __decorate$D([
    RefSelector("gridBody")
  ], GridComp2.prototype, "gridBodyComp", void 0);
  __decorate$D([
    RefSelector("sideBar")
  ], GridComp2.prototype, "sideBarComp", void 0);
  __decorate$D([
    RefSelector("rootWrapperBody")
  ], GridComp2.prototype, "eRootWrapperBody", void 0);
  __decorate$D([
    PostConstruct
  ], GridComp2.prototype, "postConstruct", null);
  return GridComp2;
}(TabGuardComp);
var __extends$B = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$C = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read$3 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$2 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$3(arguments[i2]));
  return ar;
};
var SortController = function(_super) {
  __extends$B(SortController2, _super);
  function SortController2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SortController_1 = SortController2;
  SortController2.prototype.progressSort = function(column, multiSort, source) {
    var nextDirection = this.getNextSortDirection(column);
    this.setSortForColumn(column, nextDirection, multiSort, source);
  };
  SortController2.prototype.setSortForColumn = function(column, sort, multiSort, source) {
    var _a2;
    if (sort !== Constants.SORT_ASC && sort !== Constants.SORT_DESC) {
      sort = null;
    }
    var isColumnsSortingCoupledToGroup = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    var columnsToUpdate = [column];
    if (isColumnsSortingCoupledToGroup) {
      if (column.getColDef().showRowGroup) {
        var rowGroupColumns = this.columnModel.getSourceColumnsForGroupColumn(column);
        var sortableRowGroupColumns = (_a2 = rowGroupColumns) === null || _a2 === void 0 ? void 0 : _a2.filter(function(col) {
          return col.getColDef().sortable;
        });
        if (sortableRowGroupColumns) {
          columnsToUpdate = __spread$2([column], sortableRowGroupColumns);
        }
      }
    }
    columnsToUpdate.forEach(function(col) {
      return col.setSort(sort, source);
    });
    var doingMultiSort = (multiSort || this.gridOptionsWrapper.isAlwaysMultiSort()) && !this.gridOptionsWrapper.isSuppressMultiSort();
    if (!doingMultiSort) {
      this.clearSortBarTheseColumns(columnsToUpdate, source);
    }
    this.updateSortIndex(column);
    this.dispatchSortChangedEvents(source);
  };
  SortController2.prototype.updateSortIndex = function(lastColToChange) {
    var isCoupled = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    var groupParent = this.columnModel.getGroupDisplayColumnForGroup(lastColToChange.getId());
    var lastSortIndexCol = isCoupled ? groupParent || lastColToChange : lastColToChange;
    var allSortedCols = this.getIndexableColumnsOrdered();
    this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(col) {
      return col.setSortIndex(null);
    });
    var allSortedColsWithoutChanges = allSortedCols.filter(function(col) {
      return col !== lastSortIndexCol;
    });
    var sortedColsWithIndices = !!lastSortIndexCol.getSort() ? __spread$2(allSortedColsWithoutChanges, [lastSortIndexCol]) : allSortedColsWithoutChanges;
    sortedColsWithIndices.forEach(function(col, idx) {
      return col.setSortIndex(idx);
    });
  };
  SortController2.prototype.onSortChanged = function(source) {
    this.dispatchSortChangedEvents(source);
  };
  SortController2.prototype.isSortActive = function() {
    var allCols = this.columnModel.getPrimaryAndSecondaryAndAutoColumns();
    var sortedCols = allCols.filter(function(column) {
      return !!column.getSort();
    });
    return sortedCols && sortedCols.length > 0;
  };
  SortController2.prototype.dispatchSortChangedEvents = function(source) {
    var event = {
      type: Events.EVENT_SORT_CHANGED,
      source
    };
    this.eventService.dispatchEvent(event);
  };
  SortController2.prototype.clearSortBarTheseColumns = function(columnsToSkip, source) {
    this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(columnToClear) {
      if (!columnsToSkip.includes(columnToClear)) {
        columnToClear.setSort(void 0, source);
      }
    });
  };
  SortController2.prototype.getNextSortDirection = function(column) {
    var sortingOrder;
    if (column.getColDef().sortingOrder) {
      sortingOrder = column.getColDef().sortingOrder;
    } else if (this.gridOptionsWrapper.getSortingOrder()) {
      sortingOrder = this.gridOptionsWrapper.getSortingOrder();
    } else {
      sortingOrder = SortController_1.DEFAULT_SORTING_ORDER;
    }
    if (!Array.isArray(sortingOrder) || sortingOrder.length <= 0) {
      console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's " + sortingOrder);
      return null;
    }
    var currentIndex = sortingOrder.indexOf(column.getSort());
    var notInArray = currentIndex < 0;
    var lastItemInArray = currentIndex == sortingOrder.length - 1;
    var result;
    if (notInArray || lastItemInArray) {
      result = sortingOrder[0];
    } else {
      result = sortingOrder[currentIndex + 1];
    }
    if (SortController_1.DEFAULT_SORTING_ORDER.indexOf(result) < 0) {
      console.warn("AG Grid: invalid sort type " + result);
      return null;
    }
    return result;
  };
  SortController2.prototype.getColumnsOrderedForSort = function() {
    var allColumnsIncludingAuto = this.columnModel.getPrimaryAndSecondaryAndAutoColumns();
    var allColsIndexes = {};
    allColumnsIncludingAuto.forEach(function(col, index) {
      return allColsIndexes[col.getId()] = index;
    });
    allColumnsIncludingAuto.sort(function(a3, b2) {
      var iA = a3.getSortIndex();
      var iB = b2.getSortIndex();
      if (iA != null && iB != null) {
        return iA - iB;
      } else if (iA == null && iB == null) {
        var posA = allColsIndexes[a3.getId()];
        var posB = allColsIndexes[b2.getId()];
        return posA > posB ? 1 : -1;
      } else if (iB == null) {
        return -1;
      } else {
        return 1;
      }
    });
    return allColumnsIncludingAuto;
  };
  SortController2.prototype.getIndexableColumnsOrdered = function() {
    var _this = this;
    if (!this.gridOptionsWrapper.isColumnsSortingCoupledToGroup()) {
      return this.getColumnsWithSortingOrdered();
    }
    return this.getColumnsOrderedForSort().filter(function(col) {
      var _a2;
      if (!!col.getColDef().showRowGroup) {
        if (col.getColDef().field && col.getSort()) {
          return true;
        }
        var sourceCols = _this.columnModel.getSourceColumnsForGroupColumn(col);
        return (_a2 = sourceCols) === null || _a2 === void 0 ? void 0 : _a2.some(function(col2) {
          return !!col2.getSort();
        });
      }
      return !!col.getSort();
    });
  };
  SortController2.prototype.getColumnsWithSortingOrdered = function() {
    var orderedColumns = this.getColumnsOrderedForSort();
    return orderedColumns.filter(function(column) {
      return !!column.getSort();
    });
  };
  SortController2.prototype.getSortModel = function() {
    return this.getColumnsWithSortingOrdered().map(function(column) {
      return {
        sort: column.getSort(),
        colId: column.getId()
      };
    });
  };
  SortController2.prototype.getSortOptions = function() {
    return this.getColumnsWithSortingOrdered().map(function(column) {
      return {
        sort: column.getSort(),
        column
      };
    });
  };
  SortController2.prototype.canColumnDisplayMixedSort = function(column) {
    var isColumnSortCouplingActive = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    var isGroupDisplayColumn = !!column.getColDef().showRowGroup;
    return isColumnSortCouplingActive && isGroupDisplayColumn;
  };
  SortController2.prototype.getDisplaySortForColumn = function(column) {
    var _a2;
    var linkedColumns = this.columnModel.getSourceColumnsForGroupColumn(column);
    if (!this.canColumnDisplayMixedSort(column) || !((_a2 = linkedColumns) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      return column.getSort();
    }
    var columnHasUniqueData = !!column.getColDef().field;
    var sortableColumns = columnHasUniqueData ? __spread$2([column], linkedColumns) : linkedColumns;
    var firstSort = sortableColumns[0].getSort();
    var allMatch = sortableColumns.every(function(col) {
      return col.getSort() == firstSort;
    });
    if (!allMatch) {
      return "mixed";
    }
    return firstSort;
  };
  SortController2.prototype.getDisplaySortIndexForColumn = function(column) {
    var _this = this;
    var isColumnSortCouplingActive = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    if (!isColumnSortCouplingActive) {
      return this.getColumnsWithSortingOrdered().indexOf(column);
    }
    var displayColumn = this.columnModel.getGroupDisplayColumnForGroup(column.getId());
    if (displayColumn) {
      if (!!column.getSort()) {
        return this.getDisplaySortIndexForColumn(displayColumn);
      }
      return null;
    }
    var allSortedCols = this.getIndexableColumnsOrdered().filter(function(col) {
      return !_this.columnModel.getGroupDisplayColumnForGroup(col.getId());
    });
    return allSortedCols.indexOf(column);
  };
  var SortController_1;
  SortController2.DEFAULT_SORTING_ORDER = [Constants.SORT_ASC, Constants.SORT_DESC, null];
  __decorate$C([
    Autowired("columnModel")
  ], SortController2.prototype, "columnModel", void 0);
  SortController2 = SortController_1 = __decorate$C([
    Bean("sortController")
  ], SortController2);
  return SortController2;
}(BeanStub);
var __extends$A = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$B = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnHoverService = function(_super) {
  __extends$A(ColumnHoverService2, _super);
  function ColumnHoverService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ColumnHoverService2.prototype.setMouseOver = function(columns) {
    this.selectedColumns = columns;
    var event = {
      type: Events.EVENT_COLUMN_HOVER_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnHoverService2.prototype.clearMouseOver = function() {
    this.selectedColumns = null;
    var event = {
      type: Events.EVENT_COLUMN_HOVER_CHANGED
    };
    this.eventService.dispatchEvent(event);
  };
  ColumnHoverService2.prototype.isHovered = function(column) {
    return !!this.selectedColumns && this.selectedColumns.indexOf(column) >= 0;
  };
  ColumnHoverService2 = __decorate$B([
    Bean("columnHoverService")
  ], ColumnHoverService2);
  return ColumnHoverService2;
}(BeanStub);
var __extends$z = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$A = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnAnimationService = function(_super) {
  __extends$z(ColumnAnimationService2, _super);
  function ColumnAnimationService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.executeNextFuncs = [];
    _this.executeLaterFuncs = [];
    _this.active = false;
    _this.animationThreadCount = 0;
    return _this;
  }
  ColumnAnimationService2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      return _this.gridBodyCtrl = p.gridBodyCtrl;
    });
  };
  ColumnAnimationService2.prototype.isActive = function() {
    return this.active;
  };
  ColumnAnimationService2.prototype.start = function() {
    if (this.active) {
      return;
    }
    if (this.gridOptionsWrapper.isSuppressColumnMoveAnimation()) {
      return;
    }
    if (this.gridOptionsWrapper.isEnableRtl()) {
      return;
    }
    this.ensureAnimationCssClassPresent();
    this.active = true;
  };
  ColumnAnimationService2.prototype.finish = function() {
    if (!this.active) {
      return;
    }
    this.flush();
    this.active = false;
  };
  ColumnAnimationService2.prototype.executeNextVMTurn = function(func) {
    if (this.active) {
      this.executeNextFuncs.push(func);
    } else {
      func();
    }
  };
  ColumnAnimationService2.prototype.executeLaterVMTurn = function(func) {
    if (this.active) {
      this.executeLaterFuncs.push(func);
    } else {
      func();
    }
  };
  ColumnAnimationService2.prototype.ensureAnimationCssClassPresent = function() {
    var _this = this;
    this.animationThreadCount++;
    var animationThreadCountCopy = this.animationThreadCount;
    this.gridBodyCtrl.setColumnMovingCss(true);
    this.executeLaterFuncs.push(function() {
      if (_this.animationThreadCount === animationThreadCountCopy) {
        _this.gridBodyCtrl.setColumnMovingCss(false);
      }
    });
  };
  ColumnAnimationService2.prototype.flush = function() {
    var nowFuncs = this.executeNextFuncs;
    this.executeNextFuncs = [];
    var waitFuncs = this.executeLaterFuncs;
    this.executeLaterFuncs = [];
    if (nowFuncs.length === 0 && waitFuncs.length === 0) {
      return;
    }
    window.setTimeout(function() {
      return nowFuncs.forEach(function(func) {
        return func();
      });
    }, 0);
    window.setTimeout(function() {
      return waitFuncs.forEach(function(func) {
        return func();
      });
    }, 300);
  };
  __decorate$A([
    Autowired("ctrlsService")
  ], ColumnAnimationService2.prototype, "ctrlsService", void 0);
  __decorate$A([
    PostConstruct
  ], ColumnAnimationService2.prototype, "postConstruct", null);
  ColumnAnimationService2 = __decorate$A([
    Bean("columnAnimationService")
  ], ColumnAnimationService2);
  return ColumnAnimationService2;
}(BeanStub);
var __extends$y = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$z = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AutoGroupColService = function(_super) {
  __extends$y(AutoGroupColService2, _super);
  function AutoGroupColService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  AutoGroupColService_1 = AutoGroupColService2;
  AutoGroupColService2.prototype.createAutoGroupColumns = function(existingCols, rowGroupColumns) {
    var _this = this;
    var groupAutoColumns = [];
    var doingTreeData = this.gridOptionsWrapper.isTreeData();
    var doingMultiAutoColumn = this.gridOptionsWrapper.isGroupMultiAutoColumn();
    if (doingTreeData && doingMultiAutoColumn) {
      console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data");
      doingMultiAutoColumn = false;
    }
    if (doingMultiAutoColumn) {
      rowGroupColumns.forEach(function(rowGroupCol, index) {
        groupAutoColumns.push(_this.createOneAutoGroupColumn(existingCols, rowGroupCol, index));
      });
    } else {
      groupAutoColumns.push(this.createOneAutoGroupColumn(existingCols));
    }
    return groupAutoColumns;
  };
  AutoGroupColService2.prototype.createOneAutoGroupColumn = function(existingCols, rowGroupCol, index) {
    var defaultAutoColDef = this.generateDefaultColDef(rowGroupCol);
    var colId;
    if (rowGroupCol) {
      colId = Constants.GROUP_AUTO_COLUMN_ID + "-" + rowGroupCol.getId();
    } else {
      colId = AutoGroupColService_1.GROUP_AUTO_COLUMN_BUNDLE_ID;
    }
    var userAutoColDef = this.gridOptionsWrapper.getAutoGroupColumnDef();
    mergeDeep(defaultAutoColDef, userAutoColDef);
    defaultAutoColDef = this.columnFactory.mergeColDefs(defaultAutoColDef);
    defaultAutoColDef.colId = colId;
    if (!this.gridOptionsWrapper.isTreeData()) {
      var noFieldOrValueGetter = missing(defaultAutoColDef.field) && missing(defaultAutoColDef.valueGetter) && missing(defaultAutoColDef.filterValueGetter);
      if (noFieldOrValueGetter) {
        defaultAutoColDef.filter = false;
      }
    }
    if (index && index > 0) {
      defaultAutoColDef.headerCheckboxSelection = false;
    }
    var existingCol = existingCols.find(function(col) {
      return col.getId() == colId;
    });
    if (existingCol) {
      existingCol.setColDef(defaultAutoColDef, null);
      this.columnFactory.applyColumnState(existingCol, defaultAutoColDef);
      return existingCol;
    }
    var newCol = new Column(defaultAutoColDef, null, colId, true);
    this.context.createBean(newCol);
    return newCol;
  };
  AutoGroupColService2.prototype.generateDefaultColDef = function(rowGroupCol) {
    var userDef = this.gridOptionsWrapper.getAutoGroupColumnDef();
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    var res = {
      headerName: localeTextFunc("group", "Group")
    };
    var userHasProvidedGroupCellRenderer = userDef && (userDef.cellRenderer || userDef.cellRendererFramework || userDef.cellRendererSelector);
    if (!userHasProvidedGroupCellRenderer) {
      res.cellRenderer = "agGroupCellRenderer";
    }
    if (rowGroupCol) {
      var colDef = rowGroupCol.getColDef();
      Object.assign(res, {
        headerName: this.columnModel.getDisplayNameForColumn(rowGroupCol, "header"),
        headerValueGetter: colDef.headerValueGetter
      });
      if (colDef.cellRenderer || colDef.cellRendererFramework) {
        Object.assign(res, {
          cellRendererParams: {
            innerRenderer: colDef.cellRenderer,
            innerRendererFramework: colDef.cellRendererFramework,
            innerRendererParams: colDef.cellRendererParams
          }
        });
      }
      res.showRowGroup = rowGroupCol.getColId();
    } else {
      res.showRowGroup = true;
    }
    return res;
  };
  var AutoGroupColService_1;
  AutoGroupColService2.GROUP_AUTO_COLUMN_BUNDLE_ID = Constants.GROUP_AUTO_COLUMN_ID;
  __decorate$z([
    Autowired("columnModel")
  ], AutoGroupColService2.prototype, "columnModel", void 0);
  __decorate$z([
    Autowired("columnFactory")
  ], AutoGroupColService2.prototype, "columnFactory", void 0);
  AutoGroupColService2 = AutoGroupColService_1 = __decorate$z([
    Bean("autoGroupColService")
  ], AutoGroupColService2);
  return AutoGroupColService2;
}(BeanStub);
var __extends$x = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$y = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PaginationAutoPageSizeService = function(_super) {
  __extends$x(PaginationAutoPageSizeService2, _super);
  function PaginationAutoPageSizeService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  PaginationAutoPageSizeService2.prototype.postConstruct = function() {
    var _this = this;
    this.ctrlsService.whenReady(function(p) {
      _this.centerRowContainerCon = p.centerRowContainerCtrl;
      _this.addManagedListener(_this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, _this.onBodyHeightChanged.bind(_this));
      _this.addManagedListener(_this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, _this.onScrollVisibilityChanged.bind(_this));
      _this.checkPageSize();
    });
  };
  PaginationAutoPageSizeService2.prototype.notActive = function() {
    return !this.gridOptionsWrapper.isPaginationAutoPageSize();
  };
  PaginationAutoPageSizeService2.prototype.onScrollVisibilityChanged = function() {
    this.checkPageSize();
  };
  PaginationAutoPageSizeService2.prototype.onBodyHeightChanged = function() {
    this.checkPageSize();
  };
  PaginationAutoPageSizeService2.prototype.checkPageSize = function() {
    if (this.notActive()) {
      return;
    }
    var rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();
    var bodyHeight = this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();
    if (bodyHeight > 0) {
      var newPageSize = Math.floor(bodyHeight / rowHeight);
      this.gridOptionsWrapper.setProperty("paginationPageSize", newPageSize);
    }
  };
  __decorate$y([
    Autowired("ctrlsService")
  ], PaginationAutoPageSizeService2.prototype, "ctrlsService", void 0);
  __decorate$y([
    PostConstruct
  ], PaginationAutoPageSizeService2.prototype, "postConstruct", null);
  PaginationAutoPageSizeService2 = __decorate$y([
    Bean("paginationAutoPageSizeService")
  ], PaginationAutoPageSizeService2);
  return PaginationAutoPageSizeService2;
}(BeanStub);
var __extends$w = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$x = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ValueCache = function(_super) {
  __extends$w(ValueCache2, _super);
  function ValueCache2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.cacheVersion = 0;
    return _this;
  }
  ValueCache2.prototype.init = function() {
    this.active = this.gridOptionsWrapper.isValueCache();
    this.neverExpires = this.gridOptionsWrapper.isValueCacheNeverExpires();
  };
  ValueCache2.prototype.onDataChanged = function() {
    if (this.neverExpires) {
      return;
    }
    this.expire();
  };
  ValueCache2.prototype.expire = function() {
    this.cacheVersion++;
  };
  ValueCache2.prototype.setValue = function(rowNode, colId, value) {
    if (this.active) {
      if (rowNode.__cacheVersion !== this.cacheVersion) {
        rowNode.__cacheVersion = this.cacheVersion;
        rowNode.__cacheData = {};
      }
      rowNode.__cacheData[colId] = value;
    }
  };
  ValueCache2.prototype.getValue = function(rowNode, colId) {
    if (!this.active || rowNode.__cacheVersion !== this.cacheVersion) {
      return void 0;
    }
    return rowNode.__cacheData[colId];
  };
  __decorate$x([
    PostConstruct
  ], ValueCache2.prototype, "init", null);
  ValueCache2 = __decorate$x([
    Bean("valueCache")
  ], ValueCache2);
  return ValueCache2;
}(BeanStub);
var __extends$v = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$w = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ChangeDetectionService = function(_super) {
  __extends$v(ChangeDetectionService2, _super);
  function ChangeDetectionService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ChangeDetectionService2.prototype.init = function() {
    if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      this.clientSideRowModel = this.rowModel;
    }
    this.addManagedListener(this.eventService, Events.EVENT_CELL_VALUE_CHANGED, this.onCellValueChanged.bind(this));
  };
  ChangeDetectionService2.prototype.onCellValueChanged = function(event) {
    if (event.source === Constants.SOURCE_PASTE) {
      return;
    }
    this.doChangeDetection(event.node, event.column);
  };
  ChangeDetectionService2.prototype.doChangeDetection = function(rowNode, column) {
    if (this.gridOptionsWrapper.isSuppressChangeDetection()) {
      return;
    }
    if (this.clientSideRowModel && !rowNode.isRowPinned()) {
      var onlyChangedColumns = this.gridOptionsWrapper.isAggregateOnlyChangedColumns();
      var changedPath = new ChangedPath(onlyChangedColumns, this.clientSideRowModel.getRootNode());
      changedPath.addParentNode(rowNode.parent, [column]);
      this.clientSideRowModel.doAggregate(changedPath);
    }
    this.rowRenderer.refreshCells();
  };
  __decorate$w([
    Autowired("rowModel")
  ], ChangeDetectionService2.prototype, "rowModel", void 0);
  __decorate$w([
    Autowired("rowRenderer")
  ], ChangeDetectionService2.prototype, "rowRenderer", void 0);
  __decorate$w([
    PostConstruct
  ], ChangeDetectionService2.prototype, "init", null);
  ChangeDetectionService2 = __decorate$w([
    Bean("changeDetectionService")
  ], ChangeDetectionService2);
  return ChangeDetectionService2;
}(BeanStub);
var __extends$u = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$v = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var AgComponentUtils = function(_super) {
  __extends$u(AgComponentUtils2, _super);
  function AgComponentUtils2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  AgComponentUtils2.prototype.adaptFunction = function(propertyName, jsCompFunc) {
    var metadata = this.componentMetadataProvider.retrieve(propertyName);
    if (metadata && metadata.functionAdapter) {
      return metadata.functionAdapter(jsCompFunc);
    }
    return null;
  };
  AgComponentUtils2.prototype.adaptCellRendererFunction = function(callback) {
    var Adapter = function() {
      function Adapter2() {
      }
      Adapter2.prototype.refresh = function(params) {
        return false;
      };
      Adapter2.prototype.getGui = function() {
        return this.eGui;
      };
      Adapter2.prototype.init = function(params) {
        var callbackResult = callback(params);
        var type = typeof callbackResult;
        if (type === "string" || type === "number" || type === "boolean") {
          this.eGui = loadTemplate("<span>" + callbackResult + "</span>");
          return;
        }
        if (callbackResult == null) {
          this.eGui = loadTemplate("<span></span>");
          return;
        }
        this.eGui = callbackResult;
      };
      return Adapter2;
    }();
    return Adapter;
  };
  AgComponentUtils2.prototype.doesImplementIComponent = function(candidate) {
    if (!candidate) {
      return false;
    }
    return candidate.prototype && "getGui" in candidate.prototype;
  };
  __decorate$v([
    Autowired("componentMetadataProvider")
  ], AgComponentUtils2.prototype, "componentMetadataProvider", void 0);
  AgComponentUtils2 = __decorate$v([
    Bean("agComponentUtils")
  ], AgComponentUtils2);
  return AgComponentUtils2;
}(BeanStub);
var __extends$t = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$u = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ComponentMetadataProvider = function(_super) {
  __extends$t(ComponentMetadataProvider2, _super);
  function ComponentMetadataProvider2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ComponentMetadataProvider2.prototype.postConstruct = function() {
    this.componentMetaData = {
      dateComponent: {
        mandatoryMethodList: ["getDate", "setDate"],
        optionalMethodList: ["afterGuiAttached", "setInputPlaceholder", "setInputAriaLabel"]
      },
      detailCellRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      headerComponent: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh"]
      },
      headerGroupComponent: {
        mandatoryMethodList: [],
        optionalMethodList: []
      },
      loadingCellRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: []
      },
      loadingOverlayComponent: {
        mandatoryMethodList: [],
        optionalMethodList: []
      },
      noRowsOverlayComponent: {
        mandatoryMethodList: [],
        optionalMethodList: []
      },
      floatingFilterComponent: {
        mandatoryMethodList: ["onParentModelChanged"],
        optionalMethodList: ["afterGuiAttached"]
      },
      floatingFilterWrapperComponent: {
        mandatoryMethodList: [],
        optionalMethodList: []
      },
      cellRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh", "afterGuiAttached"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      cellEditor: {
        mandatoryMethodList: ["getValue"],
        optionalMethodList: ["isPopup", "isCancelBeforeStart", "isCancelAfterEnd", "getPopupPosition", "focusIn", "focusOut", "afterGuiAttached"]
      },
      innerRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["afterGuiAttached"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      fullWidthCellRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh", "afterGuiAttached"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      pinnedRowCellRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh", "afterGuiAttached"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      groupRowRenderer: {
        mandatoryMethodList: [],
        optionalMethodList: ["afterGuiAttached"],
        functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
      },
      filter: {
        mandatoryMethodList: ["isFilterActive", "doesFilterPass", "getModel", "setModel"],
        optionalMethodList: ["afterGuiAttached", "onNewRowsLoaded", "getModelAsString", "onFloatingFilterChanged"]
      },
      filterComponent: {
        mandatoryMethodList: ["isFilterActive", "doesFilterPass", "getModel", "setModel"],
        optionalMethodList: ["afterGuiAttached", "onNewRowsLoaded", "getModelAsString", "onFloatingFilterChanged"]
      },
      statusPanel: {
        mandatoryMethodList: [],
        optionalMethodList: ["afterGuiAttached"]
      },
      toolPanel: {
        mandatoryMethodList: [],
        optionalMethodList: ["refresh", "afterGuiAttached"]
      },
      tooltipComponent: {
        mandatoryMethodList: [],
        optionalMethodList: []
      }
    };
  };
  ComponentMetadataProvider2.prototype.retrieve = function(name) {
    return this.componentMetaData[name];
  };
  __decorate$u([
    Autowired("agComponentUtils")
  ], ComponentMetadataProvider2.prototype, "agComponentUtils", void 0);
  __decorate$u([
    PostConstruct
  ], ComponentMetadataProvider2.prototype, "postConstruct", null);
  ComponentMetadataProvider2 = __decorate$u([
    Bean("componentMetadataProvider")
  ], ComponentMetadataProvider2);
  return ComponentMetadataProvider2;
}(BeanStub);
var __extends$s = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$t = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var MAT_GRID_SIZE = 8;
var BASE_GRID_SIZE = 4;
var BALHAM_GRID_SIZE = 4;
var ALPINE_GRID_SIZE = 6;
var HARD_CODED_SIZES = {
  "ag-theme-custom": {
    headerHeight: 25,
    headerCellMinWidth: 24,
    listItemHeight: BASE_GRID_SIZE * 5,
    rowHeight: 25,
    chartMenuPanelWidth: 220
  },
  "ag-theme-material": {
    headerHeight: MAT_GRID_SIZE * 7,
    headerCellMinWidth: 48,
    listItemHeight: MAT_GRID_SIZE * 4,
    rowHeight: MAT_GRID_SIZE * 6,
    chartMenuPanelWidth: 240
  },
  "ag-theme-balham": {
    headerHeight: BALHAM_GRID_SIZE * 8,
    headerCellMinWidth: 24,
    listItemHeight: BALHAM_GRID_SIZE * 6,
    rowHeight: BALHAM_GRID_SIZE * 7,
    chartMenuPanelWidth: 220
  },
  "ag-theme-alpine": {
    headerHeight: ALPINE_GRID_SIZE * 8,
    headerCellMinWidth: 36,
    listItemHeight: ALPINE_GRID_SIZE * 4,
    rowHeight: ALPINE_GRID_SIZE * 7,
    chartMenuPanelWidth: 240
  }
};
var SASS_PROPERTY_BUILDER = {
  headerHeight: ["ag-header-row"],
  headerCellMinWidth: ["ag-header-cell"],
  listItemHeight: ["ag-virtual-list-item"],
  rowHeight: ["ag-row"],
  chartMenuPanelWidth: ["ag-chart-docked-container"]
};
var CALCULATED_SIZES = {};
var Environment = function(_super) {
  __extends$s(Environment2, _super);
  function Environment2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  Environment2.prototype.getSassVariable = function(theme, key) {
    var useTheme = "ag-theme-" + (theme.match("material") ? "material" : theme.match("balham") ? "balham" : theme.match("alpine") ? "alpine" : "custom");
    var defaultValue = HARD_CODED_SIZES[useTheme][key];
    var calculatedValue = 0;
    if (!CALCULATED_SIZES[theme]) {
      CALCULATED_SIZES[theme] = {};
    }
    var size = CALCULATED_SIZES[theme][key];
    if (size != null) {
      return size;
    }
    if (SASS_PROPERTY_BUILDER[key]) {
      var classList = SASS_PROPERTY_BUILDER[key];
      var div = document.createElement("div");
      div.classList.add(theme);
      div.style.position = "absolute";
      var el2 = classList.reduce(function(prevEl, currentClass) {
        var currentDiv = document.createElement("div");
        currentDiv.style.position = "static";
        currentDiv.classList.add(currentClass);
        prevEl.appendChild(currentDiv);
        return currentDiv;
      }, div);
      if (document.body) {
        document.body.appendChild(div);
        var sizeName = key.toLowerCase().indexOf("height") !== -1 ? "height" : "width";
        calculatedValue = parseInt(window.getComputedStyle(el2)[sizeName], 10);
        document.body.removeChild(div);
      }
    }
    CALCULATED_SIZES[theme][key] = calculatedValue || defaultValue;
    return CALCULATED_SIZES[theme][key];
  };
  Environment2.prototype.isThemeDark = function() {
    var theme = this.getTheme().theme;
    return !!theme && theme.indexOf("dark") >= 0;
  };
  Environment2.prototype.chartMenuPanelWidth = function() {
    var theme = this.getTheme().themeFamily;
    return this.getSassVariable(theme, "chartMenuPanelWidth");
  };
  Environment2.prototype.getTheme = function() {
    var reg = /\bag-(material|(?:theme-([\w\-]*)))\b/g;
    var el2 = this.eGridDiv;
    var themeMatch = null;
    var allThemes = [];
    while (el2) {
      themeMatch = reg.exec(el2.className);
      if (!themeMatch) {
        el2 = el2.parentElement || void 0;
      } else {
        var matched = el2.className.match(reg);
        if (matched) {
          allThemes = matched;
        }
        break;
      }
    }
    if (!themeMatch) {
      return { allThemes };
    }
    var theme = themeMatch[0];
    var usingOldTheme = themeMatch[2] === void 0;
    if (usingOldTheme) {
      var newTheme_1 = theme.replace("ag-", "ag-theme-");
      doOnce(function() {
        return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace " + theme + " with " + newTheme_1 + ".");
      }, "using-old-theme");
    }
    return { theme, el: el2, themeFamily: theme.replace(/-dark$/, ""), allThemes };
  };
  __decorate$t([
    Autowired("eGridDiv")
  ], Environment2.prototype, "eGridDiv", void 0);
  Environment2 = __decorate$t([
    Bean("environment")
  ], Environment2);
  return Environment2;
}(BeanStub);
var __extends$r = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$s = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param$1 = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var RowContainerHeightService = function(_super) {
  __extends$r(RowContainerHeightService2, _super);
  function RowContainerHeightService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.scrollY = 0;
    _this.uiBodyHeight = 0;
    return _this;
  }
  RowContainerHeightService2.prototype.agWire = function(loggerFactory) {
    this.logger = loggerFactory.create("RowContainerHeightService");
  };
  RowContainerHeightService2.prototype.postConstruct = function() {
    this.addManagedListener(this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, this.updateOffset.bind(this));
    this.maxDivHeight = getMaxDivHeight();
    this.logger.log("maxDivHeight = " + this.maxDivHeight);
  };
  RowContainerHeightService2.prototype.isStretching = function() {
    return this.stretching;
  };
  RowContainerHeightService2.prototype.getDivStretchOffset = function() {
    return this.divStretchOffset;
  };
  RowContainerHeightService2.prototype.updateOffset = function() {
    if (!this.stretching) {
      return;
    }
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var newScrollY = gridBodyCon.getScrollFeature().getVScrollPosition().top;
    var newBodyHeight = this.getUiBodyHeight();
    var atLeastOneChanged = newScrollY !== this.scrollY || newBodyHeight !== this.uiBodyHeight;
    if (atLeastOneChanged) {
      this.scrollY = newScrollY;
      this.uiBodyHeight = newBodyHeight;
      this.calculateOffset();
    }
  };
  RowContainerHeightService2.prototype.calculateOffset = function() {
    this.setUiContainerHeight(this.maxDivHeight);
    this.pixelsToShave = this.modelHeight - this.uiContainerHeight;
    this.maxScrollY = this.uiContainerHeight - this.uiBodyHeight;
    var scrollPercent = this.scrollY / this.maxScrollY;
    var divStretchOffset = scrollPercent * this.pixelsToShave;
    this.logger.log("Div Stretch Offset = " + divStretchOffset + " (" + this.pixelsToShave + " * " + scrollPercent + ")");
    this.setDivStretchOffset(divStretchOffset);
  };
  RowContainerHeightService2.prototype.setUiContainerHeight = function(height) {
    if (height !== this.uiContainerHeight) {
      this.uiContainerHeight = height;
      this.eventService.dispatchEvent({ type: Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED });
    }
  };
  RowContainerHeightService2.prototype.clearOffset = function() {
    this.setUiContainerHeight(this.modelHeight);
    this.pixelsToShave = 0;
    this.setDivStretchOffset(0);
  };
  RowContainerHeightService2.prototype.setDivStretchOffset = function(newOffset) {
    var newOffsetFloor = typeof newOffset === "number" ? Math.floor(newOffset) : null;
    if (this.divStretchOffset === newOffsetFloor) {
      return;
    }
    this.divStretchOffset = newOffsetFloor;
    this.eventService.dispatchEvent({ type: Events.EVENT_HEIGHT_SCALE_CHANGED });
  };
  RowContainerHeightService2.prototype.setModelHeight = function(modelHeight) {
    this.modelHeight = modelHeight;
    this.stretching = modelHeight != null && this.maxDivHeight > 0 && modelHeight > this.maxDivHeight;
    if (this.stretching) {
      this.calculateOffset();
    } else {
      this.clearOffset();
    }
  };
  RowContainerHeightService2.prototype.getUiContainerHeight = function() {
    return this.uiContainerHeight;
  };
  RowContainerHeightService2.prototype.getRealPixelPosition = function(modelPixel) {
    return modelPixel - this.divStretchOffset;
  };
  RowContainerHeightService2.prototype.getUiBodyHeight = function() {
    var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
    var pos = gridBodyCon.getScrollFeature().getVScrollPosition();
    return pos.bottom - pos.top;
  };
  RowContainerHeightService2.prototype.getScrollPositionForPixel = function(rowTop) {
    if (this.pixelsToShave <= 0) {
      return rowTop;
    }
    var modelMaxScroll = this.modelHeight - this.getUiBodyHeight();
    var scrollPercent = rowTop / modelMaxScroll;
    var scrollPixel = this.maxScrollY * scrollPercent;
    return scrollPixel;
  };
  __decorate$s([
    Autowired("ctrlsService")
  ], RowContainerHeightService2.prototype, "ctrlsService", void 0);
  __decorate$s([
    __param$1(0, Qualifier("loggerFactory"))
  ], RowContainerHeightService2.prototype, "agWire", null);
  __decorate$s([
    PostConstruct
  ], RowContainerHeightService2.prototype, "postConstruct", null);
  RowContainerHeightService2 = __decorate$s([
    Bean("rowContainerHeightService")
  ], RowContainerHeightService2);
  return RowContainerHeightService2;
}(BeanStub);
var __extends$q = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$r = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SelectableService = function(_super) {
  __extends$q(SelectableService2, _super);
  function SelectableService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SelectableService2.prototype.init = function() {
    this.groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
    this.isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();
  };
  SelectableService2.prototype.updateSelectableAfterGrouping = function(rowNode) {
    if (this.isRowSelectableFunc) {
      var nextChildrenFunc = function(node) {
        return node.childrenAfterGroup;
      };
      this.recurseDown(rowNode.childrenAfterGroup, nextChildrenFunc);
    }
  };
  SelectableService2.prototype.recurseDown = function(children, nextChildrenFunc) {
    var _this = this;
    if (!children) {
      return;
    }
    children.forEach(function(child) {
      if (!child.group) {
        return;
      }
      if (child.hasChildren()) {
        _this.recurseDown(nextChildrenFunc(child), nextChildrenFunc);
      }
      var rowSelectable;
      if (_this.groupSelectsChildren) {
        var firstSelectable = (nextChildrenFunc(child) || []).find(function(rowNode) {
          return rowNode.selectable === true;
        });
        rowSelectable = exists(firstSelectable);
      } else {
        rowSelectable = _this.isRowSelectableFunc ? _this.isRowSelectableFunc(child) : false;
      }
      child.setRowSelectable(rowSelectable);
    });
  };
  __decorate$r([
    PostConstruct
  ], SelectableService2.prototype, "init", null);
  SelectableService2 = __decorate$r([
    Bean("selectableService")
  ], SelectableService2);
  return SelectableService2;
}(BeanStub);
var __extends$p = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$q = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PaginationComp = function(_super) {
  __extends$p(PaginationComp2, _super);
  function PaginationComp2() {
    var _this = _super.call(this) || this;
    _this.previousAndFirstButtonsDisabled = false;
    _this.nextButtonDisabled = false;
    _this.lastButtonDisabled = false;
    return _this;
  }
  PaginationComp2.prototype.postConstruct = function() {
    var _this = this;
    var isRtl = this.gridOptionsWrapper.isEnableRtl();
    this.setTemplate(this.getTemplate());
    this.btFirst.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "last" : "first", this.gridOptionsWrapper));
    this.btPrevious.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "next" : "previous", this.gridOptionsWrapper));
    this.btNext.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "previous" : "next", this.gridOptionsWrapper));
    this.btLast.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "first" : "last", this.gridOptionsWrapper));
    var isPaging = this.gridOptionsWrapper.isPagination();
    var paginationPanelEnabled = isPaging && !this.gridOptionsWrapper.isSuppressPaginationPanel();
    if (!paginationPanelEnabled) {
      this.setDisplayed(false);
      return;
    }
    this.addManagedListener(this.eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));
    [
      { el: this.btFirst, fn: this.onBtFirst.bind(this) },
      { el: this.btPrevious, fn: this.onBtPrevious.bind(this) },
      { el: this.btNext, fn: this.onBtNext.bind(this) },
      { el: this.btLast, fn: this.onBtLast.bind(this) }
    ].forEach(function(item) {
      var el2 = item.el, fn2 = item.fn;
      _this.addManagedListener(el2, "click", fn2);
      _this.addManagedListener(el2, "keydown", function(e2) {
        if (e2.key === KeyCode.ENTER || e2.key === KeyCode.SPACE) {
          e2.preventDefault();
          fn2();
        }
      });
    });
    this.onPaginationChanged();
  };
  PaginationComp2.prototype.onPaginationChanged = function() {
    this.enableOrDisableButtons();
    this.updateRowLabels();
    this.setCurrentPageLabel();
    this.setTotalLabels();
  };
  PaginationComp2.prototype.onBtFirst = function() {
    if (!this.previousAndFirstButtonsDisabled) {
      this.paginationProxy.goToFirstPage();
    }
  };
  PaginationComp2.prototype.setCurrentPageLabel = function() {
    var pagesExist = this.paginationProxy.getTotalPages() > 0;
    var currentPage = this.paginationProxy.getCurrentPage();
    var toDisplay = pagesExist ? currentPage + 1 : 0;
    this.lbCurrent.innerHTML = this.formatNumber(toDisplay);
  };
  PaginationComp2.prototype.formatNumber = function(value) {
    var userFunc = this.gridOptionsWrapper.getPaginationNumberFormatterFunc();
    if (userFunc) {
      var params = { value };
      return userFunc(params);
    }
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    var thousandSeparator = localeTextFunc("thousandSeparator", ",");
    var decimalSeparator = localeTextFunc("decimalSeparator", ".");
    return formatNumberCommas(value, thousandSeparator, decimalSeparator);
  };
  PaginationComp2.prototype.getTemplate = function() {
    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
    var strPage = localeTextFunc("page", "Page");
    var strTo = localeTextFunc("to", "to");
    var strOf = localeTextFunc("of", "of");
    var strFirst = localeTextFunc("firstPage", "First Page");
    var strPrevious = localeTextFunc("previousPage", "Previous Page");
    var strNext = localeTextFunc("nextPage", "Next Page");
    var strLast = localeTextFunc("lastPage", "Last Page");
    var compId = this.getCompId();
    return '<div class="ag-paging-panel ag-unselectable" id="ag-' + compId + '">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-' + compId + '-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-' + compId + '-to">' + strTo + '</span>\n                    <span id="ag-' + compId + '-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-' + compId + '-of">' + strOf + '</span>\n                    <span id="ag-' + compId + '-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="' + strFirst + '"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="' + strPrevious + '"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-' + compId + '-start-page">' + strPage + '</span>\n                        <span id="ag-' + compId + '-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-' + compId + '-of-page">' + strOf + '</span>\n                        <span id="ag-' + compId + '-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="' + strNext + '"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="' + strLast + '"></div>\n                </span>\n            </div>';
  };
  PaginationComp2.prototype.onBtNext = function() {
    if (!this.nextButtonDisabled) {
      this.paginationProxy.goToNextPage();
    }
  };
  PaginationComp2.prototype.onBtPrevious = function() {
    if (!this.previousAndFirstButtonsDisabled) {
      this.paginationProxy.goToPreviousPage();
    }
  };
  PaginationComp2.prototype.onBtLast = function() {
    if (!this.lastButtonDisabled) {
      this.paginationProxy.goToLastPage();
    }
  };
  PaginationComp2.prototype.enableOrDisableButtons = function() {
    var currentPage = this.paginationProxy.getCurrentPage();
    var maxRowFound = this.paginationProxy.isLastPageFound();
    var totalPages = this.paginationProxy.getTotalPages();
    this.previousAndFirstButtonsDisabled = currentPage === 0;
    this.toggleButtonDisabled(this.btFirst, this.previousAndFirstButtonsDisabled);
    this.toggleButtonDisabled(this.btPrevious, this.previousAndFirstButtonsDisabled);
    var zeroPagesToDisplay = this.isZeroPagesToDisplay();
    var onLastPage = maxRowFound && currentPage === totalPages - 1;
    this.nextButtonDisabled = onLastPage || zeroPagesToDisplay;
    this.lastButtonDisabled = !maxRowFound || zeroPagesToDisplay || currentPage === totalPages - 1;
    this.toggleButtonDisabled(this.btNext, this.nextButtonDisabled);
    this.toggleButtonDisabled(this.btLast, this.lastButtonDisabled);
  };
  PaginationComp2.prototype.toggleButtonDisabled = function(button2, disabled) {
    setAriaDisabled(button2, disabled);
    button2.classList.toggle("ag-disabled", disabled);
    if (disabled) {
      button2.removeAttribute("tabindex");
    } else {
      button2.setAttribute("tabindex", "0");
    }
  };
  PaginationComp2.prototype.updateRowLabels = function() {
    var currentPage = this.paginationProxy.getCurrentPage();
    var pageSize = this.paginationProxy.getPageSize();
    var maxRowFound = this.paginationProxy.isLastPageFound();
    var rowCount = this.paginationProxy.isLastPageFound() ? this.paginationProxy.getMasterRowCount() : null;
    var startRow;
    var endRow;
    if (this.isZeroPagesToDisplay()) {
      startRow = endRow = 0;
    } else {
      startRow = pageSize * currentPage + 1;
      endRow = startRow + pageSize - 1;
      if (maxRowFound && endRow > rowCount) {
        endRow = rowCount;
      }
    }
    this.lbFirstRowOnPage.innerHTML = this.formatNumber(startRow);
    if (this.rowNodeBlockLoader.isLoading()) {
      this.lbLastRowOnPage.innerHTML = "?";
    } else {
      this.lbLastRowOnPage.innerHTML = this.formatNumber(endRow);
    }
  };
  PaginationComp2.prototype.isZeroPagesToDisplay = function() {
    var maxRowFound = this.paginationProxy.isLastPageFound();
    var totalPages = this.paginationProxy.getTotalPages();
    return maxRowFound && totalPages === 0;
  };
  PaginationComp2.prototype.setTotalLabels = function() {
    var lastPageFound = this.paginationProxy.isLastPageFound();
    var totalPages = this.paginationProxy.getTotalPages();
    var rowCount = lastPageFound ? this.paginationProxy.getMasterRowCount() : null;
    if (rowCount === 1) {
      var firstRow = this.paginationProxy.getRow(0);
      var hiddenGroupRow = firstRow && firstRow.group && !(firstRow.groupData || firstRow.aggData);
      if (hiddenGroupRow) {
        this.setTotalLabelsToZero();
        return;
      }
    }
    if (lastPageFound) {
      this.lbTotal.innerHTML = this.formatNumber(totalPages);
      this.lbRecordCount.innerHTML = this.formatNumber(rowCount);
    } else {
      var moreText = this.gridOptionsWrapper.getLocaleTextFunc()("more", "more");
      this.lbTotal.innerHTML = moreText;
      this.lbRecordCount.innerHTML = moreText;
    }
  };
  PaginationComp2.prototype.setTotalLabelsToZero = function() {
    this.lbFirstRowOnPage.innerHTML = this.formatNumber(0);
    this.lbCurrent.innerHTML = this.formatNumber(0);
    this.lbLastRowOnPage.innerHTML = this.formatNumber(0);
    this.lbTotal.innerHTML = this.formatNumber(0);
    this.lbRecordCount.innerHTML = this.formatNumber(0);
  };
  __decorate$q([
    Autowired("paginationProxy")
  ], PaginationComp2.prototype, "paginationProxy", void 0);
  __decorate$q([
    Autowired("rowNodeBlockLoader")
  ], PaginationComp2.prototype, "rowNodeBlockLoader", void 0);
  __decorate$q([
    RefSelector("btFirst")
  ], PaginationComp2.prototype, "btFirst", void 0);
  __decorate$q([
    RefSelector("btPrevious")
  ], PaginationComp2.prototype, "btPrevious", void 0);
  __decorate$q([
    RefSelector("btNext")
  ], PaginationComp2.prototype, "btNext", void 0);
  __decorate$q([
    RefSelector("btLast")
  ], PaginationComp2.prototype, "btLast", void 0);
  __decorate$q([
    RefSelector("lbRecordCount")
  ], PaginationComp2.prototype, "lbRecordCount", void 0);
  __decorate$q([
    RefSelector("lbFirstRowOnPage")
  ], PaginationComp2.prototype, "lbFirstRowOnPage", void 0);
  __decorate$q([
    RefSelector("lbLastRowOnPage")
  ], PaginationComp2.prototype, "lbLastRowOnPage", void 0);
  __decorate$q([
    RefSelector("lbCurrent")
  ], PaginationComp2.prototype, "lbCurrent", void 0);
  __decorate$q([
    RefSelector("lbTotal")
  ], PaginationComp2.prototype, "lbTotal", void 0);
  __decorate$q([
    PostConstruct
  ], PaginationComp2.prototype, "postConstruct", null);
  return PaginationComp2;
}(Component);
var __extends$o = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$p = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var LoadingType;
(function(LoadingType2) {
  LoadingType2[LoadingType2["Loading"] = 0] = "Loading";
  LoadingType2[LoadingType2["NoRows"] = 1] = "NoRows";
})(LoadingType || (LoadingType = {}));
var OverlayWrapperComponent = function(_super) {
  __extends$o(OverlayWrapperComponent2, _super);
  function OverlayWrapperComponent2() {
    var _this = _super.call(this, OverlayWrapperComponent2.TEMPLATE) || this;
    _this.inProgress = false;
    _this.destroyRequested = false;
    _this.manuallyDisplayed = false;
    return _this;
  }
  OverlayWrapperComponent2.prototype.updateLayoutClasses = function(cssClass, params) {
    var overlayWrapperClassList = this.eOverlayWrapper.classList;
    overlayWrapperClassList.toggle(LayoutCssClasses.AUTO_HEIGHT, params.autoHeight);
    overlayWrapperClassList.toggle(LayoutCssClasses.NORMAL, params.normal);
    overlayWrapperClassList.toggle(LayoutCssClasses.PRINT, params.print);
  };
  OverlayWrapperComponent2.prototype.postConstruct = function() {
    this.createManagedBean(new LayoutFeature(this));
    this.setDisplayed(false);
    this.addManagedListener(this.eventService, Events.EVENT_ROW_DATA_UPDATED, this.onRowDataUpdated.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));
    if (this.gridOptionsWrapper.isRowModelDefault() && !this.gridOptionsWrapper.getRowData()) {
      this.showLoadingOverlay();
    }
    this.gridApi.registerOverlayWrapperComp(this);
  };
  OverlayWrapperComponent2.prototype.setWrapperTypeClass = function(loadingType) {
    var overlayWrapperClassList = this.eOverlayWrapper.classList;
    overlayWrapperClassList.toggle("ag-overlay-loading-wrapper", loadingType === LoadingType.Loading);
    overlayWrapperClassList.toggle("ag-overlay-no-rows-wrapper", loadingType === LoadingType.NoRows);
  };
  OverlayWrapperComponent2.prototype.showLoadingOverlay = function() {
    if (this.gridOptionsWrapper.isSuppressLoadingOverlay()) {
      return;
    }
    var params = {};
    var compDetails = this.userComponentFactory.getLoadingOverlayCompDetails(params);
    var promise = compDetails.newAgStackInstance();
    this.showOverlay(promise, LoadingType.Loading);
  };
  OverlayWrapperComponent2.prototype.showNoRowsOverlay = function() {
    if (this.gridOptionsWrapper.isSuppressNoRowsOverlay()) {
      return;
    }
    var params = {};
    var compDetails = this.userComponentFactory.getNoRowsOverlayCompDetails(params);
    var promise = compDetails.newAgStackInstance();
    this.showOverlay(promise, LoadingType.NoRows);
  };
  OverlayWrapperComponent2.prototype.showOverlay = function(workItem, type) {
    var _this = this;
    if (this.inProgress) {
      return;
    }
    this.setWrapperTypeClass(type);
    this.destroyActiveOverlay();
    this.inProgress = true;
    if (workItem) {
      workItem.then(function(comp) {
        _this.inProgress = false;
        _this.eOverlayWrapper.appendChild(comp.getGui());
        _this.activeOverlay = comp;
        if (_this.destroyRequested) {
          _this.destroyRequested = false;
          _this.destroyActiveOverlay();
        }
      });
    }
    this.manuallyDisplayed = this.columnModel.isReady() && !this.paginationProxy.isEmpty();
    this.setDisplayed(true);
  };
  OverlayWrapperComponent2.prototype.destroyActiveOverlay = function() {
    if (this.inProgress) {
      this.destroyRequested = true;
      return;
    }
    if (!this.activeOverlay) {
      return;
    }
    this.activeOverlay = this.getContext().destroyBean(this.activeOverlay);
    clearElement(this.eOverlayWrapper);
  };
  OverlayWrapperComponent2.prototype.hideOverlay = function() {
    this.manuallyDisplayed = false;
    this.destroyActiveOverlay();
    this.setDisplayed(false);
  };
  OverlayWrapperComponent2.prototype.destroy = function() {
    this.destroyActiveOverlay();
    _super.prototype.destroy.call(this);
  };
  OverlayWrapperComponent2.prototype.showOrHideOverlay = function() {
    var isEmpty2 = this.paginationProxy.isEmpty();
    var isSuppressNoRowsOverlay = this.gridOptionsWrapper.isSuppressNoRowsOverlay();
    if (isEmpty2 && !isSuppressNoRowsOverlay) {
      this.showNoRowsOverlay();
    } else {
      this.hideOverlay();
    }
  };
  OverlayWrapperComponent2.prototype.onRowDataUpdated = function() {
    this.showOrHideOverlay();
  };
  OverlayWrapperComponent2.prototype.onNewColumnsLoaded = function() {
    if (this.columnModel.isReady() && !this.paginationProxy.isEmpty() && !this.manuallyDisplayed) {
      this.hideOverlay();
    }
  };
  OverlayWrapperComponent2.TEMPLATE = '\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>';
  __decorate$p([
    Autowired("userComponentFactory")
  ], OverlayWrapperComponent2.prototype, "userComponentFactory", void 0);
  __decorate$p([
    Autowired("paginationProxy")
  ], OverlayWrapperComponent2.prototype, "paginationProxy", void 0);
  __decorate$p([
    Autowired("gridApi")
  ], OverlayWrapperComponent2.prototype, "gridApi", void 0);
  __decorate$p([
    Autowired("columnModel")
  ], OverlayWrapperComponent2.prototype, "columnModel", void 0);
  __decorate$p([
    RefSelector("eOverlayWrapper")
  ], OverlayWrapperComponent2.prototype, "eOverlayWrapper", void 0);
  __decorate$p([
    PostConstruct
  ], OverlayWrapperComponent2.prototype, "postConstruct", null);
  return OverlayWrapperComponent2;
}(Component);
var __extends$n = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$o = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowPositionUtils = function(_super) {
  __extends$n(RowPositionUtils2, _super);
  function RowPositionUtils2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  RowPositionUtils2.prototype.getFirstRow = function() {
    var rowIndex = 0;
    var rowPinned;
    if (this.pinnedRowModel.getPinnedTopRowCount()) {
      rowPinned = Constants.PINNED_TOP;
    } else if (this.rowModel.getRowCount()) {
      rowPinned = null;
      rowIndex = this.paginationProxy.getPageFirstRow();
    } else if (this.pinnedRowModel.getPinnedBottomRowCount()) {
      rowPinned = Constants.PINNED_BOTTOM;
    }
    return rowPinned === void 0 ? null : { rowIndex, rowPinned };
  };
  RowPositionUtils2.prototype.getLastRow = function() {
    var rowIndex;
    var rowPinned = null;
    var pinnedBottomCount = this.pinnedRowModel.getPinnedBottomRowCount();
    var pinnedTopCount = this.pinnedRowModel.getPinnedTopRowCount();
    if (pinnedBottomCount) {
      rowPinned = Constants.PINNED_BOTTOM;
      rowIndex = pinnedBottomCount - 1;
    } else if (this.rowModel.getRowCount()) {
      rowPinned = null;
      rowIndex = this.paginationProxy.getPageLastRow();
    } else if (pinnedTopCount) {
      rowPinned = Constants.PINNED_TOP;
      rowIndex = pinnedTopCount - 1;
    }
    return rowIndex === void 0 ? null : { rowIndex, rowPinned };
  };
  RowPositionUtils2.prototype.getRowNode = function(gridRow) {
    switch (gridRow.rowPinned) {
      case Constants.PINNED_TOP:
        return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
      case Constants.PINNED_BOTTOM:
        return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
      default:
        return this.rowModel.getRow(gridRow.rowIndex);
    }
  };
  RowPositionUtils2.prototype.sameRow = function(rowA, rowB) {
    if (!rowA && !rowB) {
      return true;
    }
    if (rowA && !rowB || !rowA && rowB) {
      return false;
    }
    return rowA.rowIndex === rowB.rowIndex && rowA.rowPinned == rowB.rowPinned;
  };
  RowPositionUtils2.prototype.before = function(rowA, rowB) {
    switch (rowA.rowPinned) {
      case Constants.PINNED_TOP:
        if (rowB.rowPinned !== Constants.PINNED_TOP) {
          return true;
        }
        break;
      case Constants.PINNED_BOTTOM:
        if (rowB.rowPinned !== Constants.PINNED_BOTTOM) {
          return false;
        }
        break;
      default:
        if (exists(rowB.rowPinned)) {
          return rowB.rowPinned !== Constants.PINNED_TOP;
        }
        break;
    }
    return rowA.rowIndex < rowB.rowIndex;
  };
  RowPositionUtils2.prototype.rowMax = function(rows) {
    var _this = this;
    var max;
    rows.forEach(function(row) {
      if (max === void 0 || _this.before(max, row)) {
        max = row;
      }
    });
    return max;
  };
  RowPositionUtils2.prototype.rowMin = function(rows) {
    var _this = this;
    var min;
    rows.forEach(function(row) {
      if (min === void 0 || _this.before(row, min)) {
        min = row;
      }
    });
    return min;
  };
  __decorate$o([
    Autowired("rowModel")
  ], RowPositionUtils2.prototype, "rowModel", void 0);
  __decorate$o([
    Autowired("pinnedRowModel")
  ], RowPositionUtils2.prototype, "pinnedRowModel", void 0);
  __decorate$o([
    Autowired("paginationProxy")
  ], RowPositionUtils2.prototype, "paginationProxy", void 0);
  RowPositionUtils2 = __decorate$o([
    Bean("rowPositionUtils")
  ], RowPositionUtils2);
  return RowPositionUtils2;
}(BeanStub);
var __extends$m = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$n = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CellPositionUtils = function(_super) {
  __extends$m(CellPositionUtils2, _super);
  function CellPositionUtils2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  CellPositionUtils2.prototype.createId = function(cellPosition) {
    var rowIndex = cellPosition.rowIndex, rowPinned = cellPosition.rowPinned, column = cellPosition.column;
    return this.createIdFromValues(rowIndex, column, rowPinned);
  };
  CellPositionUtils2.prototype.createIdFromValues = function(rowIndex, column, rowPinned) {
    return rowIndex + "." + (rowPinned == null ? "null" : rowPinned) + "." + column.getId();
  };
  CellPositionUtils2.prototype.equals = function(cellA, cellB) {
    var colsMatch = cellA.column === cellB.column;
    var floatingMatch = cellA.rowPinned === cellB.rowPinned;
    var indexMatch = cellA.rowIndex === cellB.rowIndex;
    return colsMatch && floatingMatch && indexMatch;
  };
  CellPositionUtils2 = __decorate$n([
    Bean("cellPositionUtils")
  ], CellPositionUtils2);
  return CellPositionUtils2;
}(BeanStub);
var __extends$l = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var UndoRedoAction = function() {
  function UndoRedoAction2(cellValueChanges) {
    this.cellValueChanges = cellValueChanges;
  }
  return UndoRedoAction2;
}();
var FillUndoRedoAction = function(_super) {
  __extends$l(FillUndoRedoAction2, _super);
  function FillUndoRedoAction2(cellValueChanges, initialRange, finalRange) {
    var _this = _super.call(this, cellValueChanges) || this;
    _this.initialRange = initialRange;
    _this.finalRange = finalRange;
    return _this;
  }
  return FillUndoRedoAction2;
}(UndoRedoAction);
var UndoRedoStack = function() {
  function UndoRedoStack2(maxStackSize) {
    this.actionStack = [];
    this.maxStackSize = maxStackSize ? maxStackSize : UndoRedoStack2.DEFAULT_STACK_SIZE;
    this.actionStack = new Array(this.maxStackSize);
  }
  UndoRedoStack2.prototype.pop = function() {
    return this.actionStack.pop();
  };
  UndoRedoStack2.prototype.push = function(item) {
    var shouldAddActions = item.cellValueChanges && item.cellValueChanges.length > 0;
    if (!shouldAddActions) {
      return;
    }
    if (this.actionStack.length === this.maxStackSize) {
      this.actionStack.shift();
    }
    this.actionStack.push(item);
  };
  UndoRedoStack2.prototype.clear = function() {
    this.actionStack = [];
  };
  UndoRedoStack2.prototype.getCurrentStackSize = function() {
    return this.actionStack.length;
  };
  UndoRedoStack2.DEFAULT_STACK_SIZE = 10;
  return UndoRedoStack2;
}();
var __extends$k = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$m = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var UndoRedoService = function(_super) {
  __extends$k(UndoRedoService2, _super);
  function UndoRedoService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.cellValueChanges = [];
    _this.activeCellEdit = null;
    _this.activeRowEdit = null;
    _this.isPasting = false;
    _this.isFilling = false;
    _this.onCellValueChanged = function(event) {
      var eventCell = { column: event.column, rowIndex: event.rowIndex, rowPinned: event.rowPinned };
      var isCellEditing = _this.activeCellEdit !== null && _this.cellPositionUtils.equals(_this.activeCellEdit, eventCell);
      var isRowEditing = _this.activeRowEdit !== null && _this.rowPositionUtils.sameRow(_this.activeRowEdit, eventCell);
      var shouldCaptureAction = isCellEditing || isRowEditing || _this.isPasting || _this.isFilling;
      if (!shouldCaptureAction) {
        return;
      }
      var rowPinned = event.rowPinned, rowIndex = event.rowIndex, column = event.column, oldValue = event.oldValue, value = event.value;
      var cellValueChange = {
        rowPinned,
        rowIndex,
        columnId: column.getColId(),
        newValue: value,
        oldValue
      };
      _this.cellValueChanges.push(cellValueChange);
    };
    _this.clearStacks = function() {
      _this.undoStack.clear();
      _this.redoStack.clear();
    };
    return _this;
  }
  UndoRedoService2.prototype.init = function() {
    var _this = this;
    if (!this.gridOptionsWrapper.isUndoRedoCellEditing()) {
      return;
    }
    var undoRedoLimit = this.gridOptionsWrapper.getUndoRedoCellEditingLimit();
    if (undoRedoLimit <= 0) {
      return;
    }
    this.undoStack = new UndoRedoStack(undoRedoLimit);
    this.redoStack = new UndoRedoStack(undoRedoLimit);
    this.addRowEditingListeners();
    this.addCellEditingListeners();
    this.addPasteListeners();
    this.addFillListeners();
    this.addManagedListener(this.eventService, Events.EVENT_CELL_VALUE_CHANGED, this.onCellValueChanged);
    this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, function(e2) {
      if (!e2.keepUndoRedoStack) {
        _this.clearStacks();
      }
    });
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, this.clearStacks);
    this.addManagedListener(this.eventService, Events.EVENT_ROW_DRAG_END, this.clearStacks);
  };
  UndoRedoService2.prototype.getCurrentUndoStackSize = function() {
    return this.undoStack ? this.undoStack.getCurrentStackSize() : 0;
  };
  UndoRedoService2.prototype.getCurrentRedoStackSize = function() {
    return this.redoStack ? this.redoStack.getCurrentStackSize() : 0;
  };
  UndoRedoService2.prototype.undo = function() {
    if (!this.undoStack) {
      return;
    }
    var undoAction = this.undoStack.pop();
    if (!undoAction || !undoAction.cellValueChanges) {
      return;
    }
    this.processAction(undoAction, function(cellValueChange) {
      return cellValueChange.oldValue;
    });
    if (undoAction instanceof FillUndoRedoAction) {
      this.processRangeAndCellFocus(undoAction.cellValueChanges, undoAction.initialRange);
    } else {
      this.processRangeAndCellFocus(undoAction.cellValueChanges);
    }
    this.redoStack.push(undoAction);
  };
  UndoRedoService2.prototype.redo = function() {
    if (!this.redoStack) {
      return;
    }
    var redoAction = this.redoStack.pop();
    if (!redoAction || !redoAction.cellValueChanges) {
      return;
    }
    this.processAction(redoAction, function(cellValueChange) {
      return cellValueChange.newValue;
    });
    if (redoAction instanceof FillUndoRedoAction) {
      this.processRangeAndCellFocus(redoAction.cellValueChanges, redoAction.finalRange);
    } else {
      this.processRangeAndCellFocus(redoAction.cellValueChanges);
    }
    this.undoStack.push(redoAction);
  };
  UndoRedoService2.prototype.processAction = function(action, valueExtractor) {
    var _this = this;
    action.cellValueChanges.forEach(function(cellValueChange) {
      var rowIndex = cellValueChange.rowIndex, rowPinned = cellValueChange.rowPinned, columnId = cellValueChange.columnId;
      var rowPosition = { rowIndex, rowPinned };
      var currentRow = _this.getRowNode(rowPosition);
      if (!currentRow.displayed) {
        return;
      }
      currentRow.setDataValue(columnId, valueExtractor(cellValueChange));
    });
  };
  UndoRedoService2.prototype.processRangeAndCellFocus = function(cellValueChanges, range) {
    var lastFocusedCell;
    if (range) {
      var startRow = range.startRow;
      var endRow = range.endRow;
      lastFocusedCell = {
        rowPinned: startRow.rowPinned,
        rowIndex: startRow.rowIndex,
        columnId: range.startColumn.getColId()
      };
      this.setLastFocusedCell(lastFocusedCell);
      var cellRangeParams = {
        rowStartIndex: startRow.rowIndex,
        rowStartPinned: startRow.rowPinned,
        rowEndIndex: endRow.rowIndex,
        rowEndPinned: endRow.rowPinned,
        columnStart: range.startColumn,
        columns: range.columns
      };
      this.gridApi.addCellRange(cellRangeParams);
      return;
    }
    var cellValueChange = cellValueChanges[0];
    var rowIndex = cellValueChange.rowIndex, rowPinned = cellValueChange.rowPinned;
    var rowPosition = { rowIndex, rowPinned };
    var row = this.getRowNode(rowPosition);
    lastFocusedCell = {
      rowPinned: cellValueChange.rowPinned,
      rowIndex: row.rowIndex,
      columnId: cellValueChange.columnId
    };
    this.setLastFocusedCell(lastFocusedCell);
  };
  UndoRedoService2.prototype.setLastFocusedCell = function(lastFocusedCell) {
    var rowIndex = lastFocusedCell.rowIndex, columnId = lastFocusedCell.columnId, rowPinned = lastFocusedCell.rowPinned;
    this.gridApi.ensureIndexVisible(rowIndex);
    this.gridApi.ensureColumnVisible(columnId);
    if (ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule)) {
      this.gridApi.clearRangeSelection();
    }
    this.focusService.setFocusedCell({ rowIndex, column: columnId, rowPinned, forceBrowserFocus: true });
  };
  UndoRedoService2.prototype.addRowEditingListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_ROW_EDITING_STARTED, function(e2) {
      _this.activeRowEdit = { rowIndex: e2.rowIndex, rowPinned: e2.rowPinned };
    });
    this.addManagedListener(this.eventService, Events.EVENT_ROW_EDITING_STOPPED, function() {
      var action = new UndoRedoAction(_this.cellValueChanges);
      _this.pushActionsToUndoStack(action);
      _this.activeRowEdit = null;
    });
  };
  UndoRedoService2.prototype.addCellEditingListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_CELL_EDITING_STARTED, function(e2) {
      _this.activeCellEdit = { column: e2.column, rowIndex: e2.rowIndex, rowPinned: e2.rowPinned };
    });
    this.addManagedListener(this.eventService, Events.EVENT_CELL_EDITING_STOPPED, function() {
      _this.activeCellEdit = null;
      var shouldPushAction = !_this.activeRowEdit && !_this.isPasting && !_this.isFilling;
      if (shouldPushAction) {
        var action = new UndoRedoAction(_this.cellValueChanges);
        _this.pushActionsToUndoStack(action);
      }
    });
  };
  UndoRedoService2.prototype.addPasteListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_PASTE_START, function() {
      _this.isPasting = true;
    });
    this.addManagedListener(this.eventService, Events.EVENT_PASTE_END, function() {
      var action = new UndoRedoAction(_this.cellValueChanges);
      _this.pushActionsToUndoStack(action);
      _this.isPasting = false;
    });
  };
  UndoRedoService2.prototype.addFillListeners = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_FILL_START, function() {
      _this.isFilling = true;
    });
    this.addManagedListener(this.eventService, Events.EVENT_FILL_END, function(event) {
      var action = new FillUndoRedoAction(_this.cellValueChanges, event.initialRange, event.finalRange);
      _this.pushActionsToUndoStack(action);
      _this.isFilling = false;
    });
  };
  UndoRedoService2.prototype.pushActionsToUndoStack = function(action) {
    this.undoStack.push(action);
    this.cellValueChanges = [];
    this.redoStack.clear();
  };
  UndoRedoService2.prototype.getRowNode = function(gridRow) {
    switch (gridRow.rowPinned) {
      case Constants.PINNED_TOP:
        return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
      case Constants.PINNED_BOTTOM:
        return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
      default:
        return this.rowModel.getRow(gridRow.rowIndex);
    }
  };
  __decorate$m([
    Autowired("focusService")
  ], UndoRedoService2.prototype, "focusService", void 0);
  __decorate$m([
    Autowired("gridApi")
  ], UndoRedoService2.prototype, "gridApi", void 0);
  __decorate$m([
    Autowired("rowModel")
  ], UndoRedoService2.prototype, "rowModel", void 0);
  __decorate$m([
    Autowired("pinnedRowModel")
  ], UndoRedoService2.prototype, "pinnedRowModel", void 0);
  __decorate$m([
    Autowired("cellPositionUtils")
  ], UndoRedoService2.prototype, "cellPositionUtils", void 0);
  __decorate$m([
    Autowired("rowPositionUtils")
  ], UndoRedoService2.prototype, "rowPositionUtils", void 0);
  __decorate$m([
    PostConstruct
  ], UndoRedoService2.prototype, "init", null);
  UndoRedoService2 = __decorate$m([
    Bean("undoRedoService")
  ], UndoRedoService2);
  return UndoRedoService2;
}(BeanStub);
var __extends$j = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$l = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderPositionUtils = function(_super) {
  __extends$j(HeaderPositionUtils2, _super);
  function HeaderPositionUtils2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  HeaderPositionUtils2.prototype.findHeader = function(focusedHeader, direction) {
    var nextColumn;
    var getGroupMethod;
    var getColMethod;
    if (focusedHeader.column instanceof ColumnGroup) {
      getGroupMethod = "getDisplayedGroup" + direction;
      nextColumn = this.columnModel[getGroupMethod](focusedHeader.column);
    } else {
      getColMethod = "getDisplayedCol" + direction;
      nextColumn = this.columnModel[getColMethod](focusedHeader.column);
    }
    if (nextColumn) {
      return {
        column: nextColumn,
        headerRowIndex: focusedHeader.headerRowIndex
      };
    }
  };
  HeaderPositionUtils2.prototype.findColAtEdgeForHeaderRow = function(level, position) {
    var displayedColumns = this.columnModel.getAllDisplayedColumns();
    var column = displayedColumns[position === "start" ? 0 : displayedColumns.length - 1];
    if (!column) {
      return;
    }
    var childContainer = this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned());
    var type = childContainer.getRowType(level);
    if (type == HeaderRowType.COLUMN_GROUP) {
      var columnGroup = this.columnModel.getColumnGroupAtLevel(column, level);
      return {
        headerRowIndex: level,
        column: columnGroup
      };
    }
    return {
      headerRowIndex: type == null ? -1 : level,
      column
    };
  };
  __decorate$l([
    Autowired("columnModel")
  ], HeaderPositionUtils2.prototype, "columnModel", void 0);
  __decorate$l([
    Autowired("ctrlsService")
  ], HeaderPositionUtils2.prototype, "ctrlsService", void 0);
  HeaderPositionUtils2 = __decorate$l([
    Bean("headerPositionUtils")
  ], HeaderPositionUtils2);
  return HeaderPositionUtils2;
}(BeanStub);
var __decorate$k = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnDefFactory = function() {
  function ColumnDefFactory2() {
  }
  ColumnDefFactory2.prototype.buildColumnDefs = function(cols, rowGroupColumns, pivotColumns) {
    var _this = this;
    var res = [];
    var colGroupDefs = {};
    cols.forEach(function(col) {
      var colDef = _this.createDefFromColumn(col, rowGroupColumns, pivotColumns);
      var addToResult = true;
      var childDef = colDef;
      var pointer = col.getOriginalParent();
      while (pointer) {
        var parentDef = null;
        if (pointer.isPadding()) {
          pointer = pointer.getOriginalParent();
          continue;
        }
        var existingParentDef = colGroupDefs[pointer.getGroupId()];
        if (existingParentDef) {
          existingParentDef.children.push(childDef);
          addToResult = false;
          break;
        }
        parentDef = _this.createDefFromGroup(pointer);
        if (parentDef) {
          parentDef.children = [childDef];
          colGroupDefs[parentDef.groupId] = parentDef;
          childDef = parentDef;
          pointer = pointer.getOriginalParent();
        }
      }
      if (addToResult) {
        res.push(childDef);
      }
    });
    return res;
  };
  ColumnDefFactory2.prototype.createDefFromGroup = function(group) {
    var defCloned = deepCloneDefinition(group.getColGroupDef(), ["children"]);
    if (defCloned) {
      defCloned.groupId = group.getGroupId();
    }
    return defCloned;
  };
  ColumnDefFactory2.prototype.createDefFromColumn = function(col, rowGroupColumns, pivotColumns) {
    var colDefCloned = deepCloneDefinition(col.getColDef());
    colDefCloned.colId = col.getColId();
    colDefCloned.width = col.getActualWidth();
    colDefCloned.rowGroup = col.isRowGroupActive();
    colDefCloned.rowGroupIndex = col.isRowGroupActive() ? rowGroupColumns.indexOf(col) : null;
    colDefCloned.pivot = col.isPivotActive();
    colDefCloned.pivotIndex = col.isPivotActive() ? pivotColumns.indexOf(col) : null;
    colDefCloned.aggFunc = col.isValueActive() ? col.getAggFunc() : null;
    colDefCloned.hide = col.isVisible() ? void 0 : true;
    colDefCloned.pinned = col.isPinned() ? col.getPinned() : null;
    colDefCloned.sort = col.getSort() ? col.getSort() : null;
    colDefCloned.sortIndex = col.getSortIndex() != null ? col.getSortIndex() : null;
    return colDefCloned;
  };
  ColumnDefFactory2 = __decorate$k([
    Bean("columnDefFactory")
  ], ColumnDefFactory2);
  return ColumnDefFactory2;
}();
var __decorate$j = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowCssClassCalculator = function() {
  function RowCssClassCalculator2() {
  }
  RowCssClassCalculator2.prototype.getInitialRowClasses = function(params) {
    var classes = [];
    if (exists(params.extraCssClass)) {
      classes.push(params.extraCssClass);
    }
    classes.push("ag-row");
    classes.push(params.rowFocused ? "ag-row-focus" : "ag-row-no-focus");
    if (params.fadeRowIn) {
      classes.push("ag-opacity-zero");
    }
    classes.push(params.rowIsEven ? "ag-row-even" : "ag-row-odd");
    if (params.rowNode.isRowPinned()) {
      classes.push("ag-row-pinned");
    }
    if (params.rowNode.isSelected()) {
      classes.push("ag-row-selected");
    }
    if (params.rowNode.footer) {
      classes.push("ag-row-footer");
    }
    classes.push("ag-row-level-" + params.rowLevel);
    if (params.rowNode.stub) {
      classes.push("ag-row-loading");
    }
    if (params.fullWidthRow) {
      classes.push("ag-full-width-row");
    }
    if (params.expandable) {
      classes.push("ag-row-group");
      classes.push(params.rowNode.expanded ? "ag-row-group-expanded" : "ag-row-group-contracted");
    }
    if (params.rowNode.dragging) {
      classes.push("ag-row-dragging");
    }
    pushAll(classes, this.processClassesFromGridOptions(params.rowNode));
    pushAll(classes, this.preProcessRowClassRules(params.rowNode));
    classes.push(params.printLayout ? "ag-row-position-relative" : "ag-row-position-absolute");
    if (params.firstRowOnPage) {
      classes.push("ag-row-first");
    }
    if (params.lastRowOnPage) {
      classes.push("ag-row-last");
    }
    if (params.fullWidthRow) {
      if (params.pinned === Constants.PINNED_LEFT) {
        classes.push("ag-cell-last-left-pinned");
      }
      if (params.pinned === Constants.PINNED_RIGHT) {
        classes.push("ag-cell-first-right-pinned");
      }
    }
    return classes;
  };
  RowCssClassCalculator2.prototype.processClassesFromGridOptions = function(rowNode) {
    var res = [];
    var process = function(rowCls) {
      if (typeof rowCls === "string") {
        res.push(rowCls);
      } else if (Array.isArray(rowCls)) {
        rowCls.forEach(function(e2) {
          return res.push(e2);
        });
      }
    };
    var rowClass = this.gridOptionsWrapper.getRowClass();
    if (rowClass) {
      if (typeof rowClass === "function") {
        console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead");
        return [];
      }
      process(rowClass);
    }
    var rowClassFunc = this.gridOptionsWrapper.getRowClassFunc();
    if (rowClassFunc) {
      var params = {
        data: rowNode.data,
        node: rowNode,
        rowIndex: rowNode.rowIndex
      };
      var rowClassFuncResult = rowClassFunc(params);
      process(rowClassFuncResult);
    }
    return res;
  };
  RowCssClassCalculator2.prototype.preProcessRowClassRules = function(rowNode) {
    var res = [];
    this.processRowClassRules(rowNode, function(className) {
      res.push(className);
    }, function(className) {
    });
    return res;
  };
  RowCssClassCalculator2.prototype.processRowClassRules = function(rowNode, onApplicableClass, onNotApplicableClass) {
    var rowClassParams = {
      data: rowNode.data,
      node: rowNode,
      rowIndex: rowNode.rowIndex,
      api: this.gridOptionsWrapper.getApi(),
      columnApi: this.gridOptionsWrapper.getColumnApi(),
      context: this.gridOptionsWrapper.getContext()
    };
    this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(), rowClassParams, onApplicableClass, onNotApplicableClass);
  };
  RowCssClassCalculator2.prototype.calculateRowLevel = function(rowNode) {
    if (rowNode.group) {
      return rowNode.level;
    }
    return rowNode.parent ? rowNode.parent.level + 1 : 0;
  };
  __decorate$j([
    Autowired("stylingService")
  ], RowCssClassCalculator2.prototype, "stylingService", void 0);
  __decorate$j([
    Autowired("gridOptionsWrapper")
  ], RowCssClassCalculator2.prototype, "gridOptionsWrapper", void 0);
  RowCssClassCalculator2 = __decorate$j([
    Bean("rowCssClassCalculator")
  ], RowCssClassCalculator2);
  return RowCssClassCalculator2;
}();
var __decorate$i = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowNodeSorter = function() {
  function RowNodeSorter2() {
  }
  RowNodeSorter2.prototype.doFullSort = function(rowNodes, sortOptions) {
    var mapper = function(rowNode, pos) {
      return { currentPos: pos, rowNode };
    };
    var sortedRowNodes = rowNodes.map(mapper);
    sortedRowNodes.sort(this.compareRowNodes.bind(this, sortOptions));
    return sortedRowNodes.map(function(item) {
      return item.rowNode;
    });
  };
  RowNodeSorter2.prototype.compareRowNodes = function(sortOptions, sortedNodeA, sortedNodeB) {
    var nodeA = sortedNodeA.rowNode;
    var nodeB = sortedNodeB.rowNode;
    for (var i2 = 0, len = sortOptions.length; i2 < len; i2++) {
      var sortOption = sortOptions[i2];
      var isDescending = sortOption.sort === Constants.SORT_DESC;
      var valueA = this.getValue(nodeA, sortOption.column);
      var valueB = this.getValue(nodeB, sortOption.column);
      var comparatorResult = void 0;
      var providedComparator = this.getComparator(sortOption, nodeA);
      if (providedComparator) {
        comparatorResult = providedComparator(valueA, valueB, nodeA, nodeB, isDescending);
      } else {
        comparatorResult = _.defaultComparator(valueA, valueB, this.gridOptionsWrapper.isAccentedSort());
      }
      var validResult = !isNaN(comparatorResult);
      if (validResult && comparatorResult !== 0) {
        return sortOption.sort === Constants.SORT_ASC ? comparatorResult : comparatorResult * -1;
      }
    }
    return sortedNodeA.currentPos - sortedNodeB.currentPos;
  };
  RowNodeSorter2.prototype.getComparator = function(sortOption, rowNode) {
    var column = sortOption.column;
    var comparatorOnCol = column.getColDef().comparator;
    if (comparatorOnCol != null) {
      return comparatorOnCol;
    }
    if (!column.getColDef().showRowGroup) {
      return;
    }
    var groupLeafField = !rowNode.group && column.getColDef().field;
    if (!groupLeafField) {
      return;
    }
    var primaryColumn = this.columnModel.getPrimaryColumn(groupLeafField);
    if (!primaryColumn) {
      return;
    }
    return primaryColumn.getColDef().comparator;
  };
  RowNodeSorter2.prototype.getValue = function(node, column) {
    var _a2, _b;
    var primaryColumnsSortGroups = this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();
    if (!primaryColumnsSortGroups) {
      return this.valueService.getValue(column, node, false, false);
    }
    var isNodeGroupedAtLevel = node.rowGroupColumn === column;
    if (isNodeGroupedAtLevel) {
      var isGroupRows = this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotActive());
      if (isGroupRows) {
        var keyCreator = column.getColDef().keyCreator;
        if (keyCreator) {
          return node.key;
        }
        var leafChild = (_a2 = node.allLeafChildren) === null || _a2 === void 0 ? void 0 : _a2[0];
        if (leafChild) {
          return this.valueService.getValue(column, leafChild, false, false);
        }
        return void 0;
      }
      var displayCol = this.columnModel.getGroupDisplayColumnForGroup(column.getId());
      if (!displayCol) {
        return void 0;
      }
      return (_b = node.groupData) === null || _b === void 0 ? void 0 : _b[displayCol.getId()];
    }
    if (node.group && column.getColDef().showRowGroup) {
      return void 0;
    }
    return this.valueService.getValue(column, node, false, false);
  };
  __decorate$i([
    Autowired("gridOptionsWrapper")
  ], RowNodeSorter2.prototype, "gridOptionsWrapper", void 0);
  __decorate$i([
    Autowired("valueService")
  ], RowNodeSorter2.prototype, "valueService", void 0);
  __decorate$i([
    Autowired("columnModel")
  ], RowNodeSorter2.prototype, "columnModel", void 0);
  RowNodeSorter2 = __decorate$i([
    Bean("rowNodeSorter")
  ], RowNodeSorter2);
  return RowNodeSorter2;
}();
var __extends$i = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$h = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CtrlsService = function(_super) {
  __extends$i(CtrlsService2, _super);
  function CtrlsService2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.ready = false;
    _this.readyCallbacks = [];
    return _this;
  }
  CtrlsService_1 = CtrlsService2;
  CtrlsService2.prototype.checkReady = function() {
    this.ready = this.gridCtrl != null && this.gridBodyCtrl != null && this.centerRowContainerCtrl != null && this.leftRowContainerCtrl != null && this.rightRowContainerCtrl != null && this.bottomCenterRowContainerCtrl != null && this.bottomLeftRowContainerCtrl != null && this.bottomRightRowContainerCtrl != null && this.topCenterRowContainerCtrl != null && this.topLeftRowContainerCtrl != null && this.topRightRowContainerCtrl != null && this.stickyTopCenterRowContainerCtrl != null && this.stickyTopLeftRowContainerCtrl != null && this.stickyTopRightRowContainerCtrl != null && this.centerHeaderRowContainerCtrl != null && this.leftHeaderRowContainerCtrl != null && this.rightHeaderRowContainerCtrl != null && this.fakeHScrollCtrl != null && this.gridHeaderCtrl != null;
    if (this.ready) {
      var p_1 = this.createReadyParams();
      this.readyCallbacks.forEach(function(c2) {
        return c2(p_1);
      });
      this.readyCallbacks.length = 0;
    }
  };
  CtrlsService2.prototype.whenReady = function(callback) {
    if (this.ready) {
      callback(this.createReadyParams());
    } else {
      this.readyCallbacks.push(callback);
    }
  };
  CtrlsService2.prototype.createReadyParams = function() {
    return {
      centerRowContainerCtrl: this.centerRowContainerCtrl,
      leftRowContainerCtrl: this.leftRowContainerCtrl,
      rightRowContainerCtrl: this.rightRowContainerCtrl,
      bottomCenterRowContainerCtrl: this.bottomCenterRowContainerCtrl,
      bottomLeftRowContainerCtrl: this.bottomLeftRowContainerCtrl,
      bottomRightRowContainerCtrl: this.bottomRightRowContainerCtrl,
      topCenterRowContainerCtrl: this.topCenterRowContainerCtrl,
      topLeftRowContainerCtrl: this.topLeftRowContainerCtrl,
      topRightRowContainerCtrl: this.topRightRowContainerCtrl,
      stickyTopCenterRowContainerCtrl: this.stickyTopCenterRowContainerCtrl,
      stickyTopLeftRowContainerCtrl: this.stickyTopLeftRowContainerCtrl,
      stickyTopRightRowContainerCtrl: this.stickyTopRightRowContainerCtrl,
      centerHeaderRowContainerCtrl: this.centerHeaderRowContainerCtrl,
      leftHeaderRowContainerCtrl: this.leftHeaderRowContainerCtrl,
      rightHeaderRowContainerCtrl: this.rightHeaderRowContainerCtrl,
      fakeHScrollCtrl: this.fakeHScrollCtrl,
      gridBodyCtrl: this.gridBodyCtrl,
      gridCtrl: this.gridCtrl,
      gridHeaderCtrl: this.gridHeaderCtrl
    };
  };
  CtrlsService2.prototype.registerFakeHScrollCtrl = function(ctrl) {
    this.fakeHScrollCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerGridHeaderCtrl = function(gridHeaderCtrl) {
    this.gridHeaderCtrl = gridHeaderCtrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerCenterRowContainerCtrl = function(ctrl) {
    this.centerRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerLeftRowContainerCtrl = function(ctrl) {
    this.leftRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerRightRowContainerCtrl = function(ctrl) {
    this.rightRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerTopCenterRowContainerCtrl = function(ctrl) {
    this.topCenterRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerTopLeftRowContainerCon = function(ctrl) {
    this.topLeftRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerTopRightRowContainerCtrl = function(ctrl) {
    this.topRightRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerStickyTopCenterRowContainerCtrl = function(ctrl) {
    this.stickyTopCenterRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerStickyTopLeftRowContainerCon = function(ctrl) {
    this.stickyTopLeftRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerStickyTopRightRowContainerCtrl = function(ctrl) {
    this.stickyTopRightRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerBottomCenterRowContainerCtrl = function(ctrl) {
    this.bottomCenterRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerBottomLeftRowContainerCtrl = function(ctrl) {
    this.bottomLeftRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerBottomRightRowContainerCtrl = function(ctrl) {
    this.bottomRightRowContainerCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerHeaderContainer = function(ctrl, pinned) {
    switch (pinned) {
      case Constants.PINNED_LEFT:
        this.leftHeaderRowContainerCtrl = ctrl;
        break;
      case Constants.PINNED_RIGHT:
        this.rightHeaderRowContainerCtrl = ctrl;
        break;
      default:
        this.centerHeaderRowContainerCtrl = ctrl;
        break;
    }
    this.checkReady();
  };
  CtrlsService2.prototype.registerGridBodyCtrl = function(ctrl) {
    this.gridBodyCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.registerGridCtrl = function(ctrl) {
    this.gridCtrl = ctrl;
    this.checkReady();
  };
  CtrlsService2.prototype.getFakeHScrollCtrl = function() {
    return this.fakeHScrollCtrl;
  };
  CtrlsService2.prototype.getGridHeaderCtrl = function() {
    return this.gridHeaderCtrl;
  };
  CtrlsService2.prototype.getGridCtrl = function() {
    return this.gridCtrl;
  };
  CtrlsService2.prototype.getCenterRowContainerCtrl = function() {
    return this.centerRowContainerCtrl;
  };
  CtrlsService2.prototype.getTopCenterRowContainerCtrl = function() {
    return this.topCenterRowContainerCtrl;
  };
  CtrlsService2.prototype.getBottomCenterRowContainerCtrl = function() {
    return this.bottomCenterRowContainerCtrl;
  };
  CtrlsService2.prototype.getStickyTopCenterRowContainerCtrl = function() {
    return this.stickyTopCenterRowContainerCtrl;
  };
  CtrlsService2.prototype.getGridBodyCtrl = function() {
    return this.gridBodyCtrl;
  };
  CtrlsService2.prototype.getHeaderRowContainerCtrls = function() {
    return [this.leftHeaderRowContainerCtrl, this.rightHeaderRowContainerCtrl, this.centerHeaderRowContainerCtrl];
  };
  CtrlsService2.prototype.getHeaderRowContainerCtrl = function(pinned) {
    switch (pinned) {
      case Constants.PINNED_LEFT:
        return this.leftHeaderRowContainerCtrl;
      case Constants.PINNED_RIGHT:
        return this.rightHeaderRowContainerCtrl;
      default:
        return this.centerHeaderRowContainerCtrl;
    }
  };
  var CtrlsService_1;
  CtrlsService2.NAME = "ctrlsService";
  CtrlsService2 = CtrlsService_1 = __decorate$h([
    Bean(CtrlsService_1.NAME)
  ], CtrlsService2);
  return CtrlsService2;
}(BeanStub);
var __extends$h = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$g = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CtrlsFactory = function(_super) {
  __extends$h(CtrlsFactory2, _super);
  function CtrlsFactory2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.registry = {};
    return _this;
  }
  CtrlsFactory2.prototype.register = function(meta) {
    this.registry[meta.controllerName] = meta.controllerClass;
  };
  CtrlsFactory2.prototype.getInstance = function(name) {
    var ControllerClass = this.registry[name];
    if (ControllerClass == null) {
      return void 0;
    }
    return new ControllerClass();
  };
  CtrlsFactory2 = __decorate$g([
    Bean("ctrlsFactory")
  ], CtrlsFactory2);
  return CtrlsFactory2;
}(BeanStub);
var __extends$g = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$f = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FakeHScrollCtrl = function(_super) {
  __extends$g(FakeHScrollCtrl2, _super);
  function FakeHScrollCtrl2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  FakeHScrollCtrl2.prototype.setComp = function(view, eGui, eViewport, eContainer) {
    this.view = view;
    this.eViewport = eViewport;
    this.eContainer = eContainer;
    this.eGui = eGui;
    this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, this.onScrollVisibilityChanged.bind(this));
    var spacerWidthsListener = this.setFakeHScrollSpacerWidths.bind(this);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, spacerWidthsListener);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, spacerWidthsListener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, spacerWidthsListener);
    this.addManagedListener(this.eventService, Events.EVENT_PINNED_ROW_DATA_CHANGED, this.onPinnedRowDataChanged.bind(this));
    this.onScrollVisibilityChanged();
    this.ctrlsService.registerFakeHScrollCtrl(this);
    this.view.addOrRemoveCssClass("ag-apple-scrollbar", isMacOsUserAgent() || isIOSUserAgent());
  };
  FakeHScrollCtrl2.prototype.addActiveListenerToggles = function() {
    var _this = this;
    var activateEvents = ["mouseenter", "mousedown", "touchstart"];
    var deactivateEvents = ["mouseleave", "touchend"];
    activateEvents.forEach(function(eventName) {
      return _this.addManagedListener(_this.eGui, eventName, function() {
        return _this.view.addOrRemoveCssClass("ag-scrollbar-active", true);
      });
    });
    deactivateEvents.forEach(function(eventName) {
      return _this.addManagedListener(_this.eGui, eventName, function() {
        return _this.view.addOrRemoveCssClass("ag-scrollbar-active", false);
      });
    });
  };
  FakeHScrollCtrl2.prototype.initialiseInvisibleScrollbar = function() {
    if (this.invisibleScrollbar !== void 0) {
      return;
    }
    this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
    this.invisibleScrollbar = isInvisibleScrollbar();
    if (this.invisibleScrollbar) {
      this.hideAndShowInvisibleScrollAsNeeded();
      this.addActiveListenerToggles();
      this.refreshCompBottom();
    }
  };
  FakeHScrollCtrl2.prototype.onPinnedRowDataChanged = function() {
    this.refreshCompBottom();
  };
  FakeHScrollCtrl2.prototype.refreshCompBottom = function() {
    if (!this.invisibleScrollbar) {
      return;
    }
    var bottomPinnedHeight = this.pinnedRowModel.getPinnedBottomTotalHeight();
    this.view.setBottom(bottomPinnedHeight);
  };
  FakeHScrollCtrl2.prototype.onScrollVisibilityChanged = function() {
    if (this.invisibleScrollbar === void 0) {
      this.initialiseInvisibleScrollbar();
    }
    this.setScrollVisible();
    this.setFakeHScrollSpacerWidths();
  };
  FakeHScrollCtrl2.prototype.hideAndShowInvisibleScrollAsNeeded = function() {
    var _this = this;
    this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, function(params) {
      if (params.direction === "horizontal") {
        _this.view.addOrRemoveCssClass("ag-scrollbar-scrolling", true);
      }
    });
    this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL_END, function() {
      return _this.view.addOrRemoveCssClass("ag-scrollbar-scrolling", false);
    });
  };
  FakeHScrollCtrl2.prototype.setFakeHScrollSpacerWidths = function() {
    var vScrollShowing = this.scrollVisibleService.isVerticalScrollShowing();
    var rightSpacing = this.columnModel.getDisplayedColumnsRightWidth();
    var scrollOnRight = !this.enableRtl && vScrollShowing;
    var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
    if (scrollOnRight) {
      rightSpacing += scrollbarWidth;
    }
    this.view.setRightSpacerFixedWidth(rightSpacing);
    this.view.includeRightSpacerScrollerCss("ag-scroller-corner", rightSpacing <= scrollbarWidth);
    var leftSpacing = this.columnModel.getDisplayedColumnsLeftWidth();
    var scrollOnLeft = this.enableRtl && vScrollShowing;
    if (scrollOnLeft) {
      leftSpacing += scrollbarWidth;
    }
    this.view.setLeftSpacerFixedWidth(leftSpacing);
    this.view.includeLeftSpacerScrollerCss("ag-scroller-corner", leftSpacing <= scrollbarWidth);
  };
  FakeHScrollCtrl2.prototype.setScrollVisible = function() {
    var hScrollShowing = this.scrollVisibleService.isHorizontalScrollShowing();
    var invisibleScrollbar2 = this.invisibleScrollbar;
    var isSuppressHorizontalScroll = this.gridOptionsWrapper.isSuppressHorizontalScroll();
    var scrollbarWidth = hScrollShowing ? this.gridOptionsWrapper.getScrollbarWidth() || 0 : 0;
    var adjustedScrollbarWidth = scrollbarWidth === 0 && invisibleScrollbar2 ? 15 : scrollbarWidth;
    var scrollContainerSize = !isSuppressHorizontalScroll ? adjustedScrollbarWidth : 0;
    this.view.addOrRemoveCssClass("ag-scrollbar-invisible", invisibleScrollbar2);
    this.view.setHeight(scrollContainerSize);
    this.view.setViewportHeight(scrollContainerSize);
    this.view.setContainerHeight(scrollContainerSize);
  };
  FakeHScrollCtrl2.prototype.getViewport = function() {
    return this.eViewport;
  };
  FakeHScrollCtrl2.prototype.getContainer = function() {
    return this.eContainer;
  };
  __decorate$f([
    Autowired("scrollVisibleService")
  ], FakeHScrollCtrl2.prototype, "scrollVisibleService", void 0);
  __decorate$f([
    Autowired("columnModel")
  ], FakeHScrollCtrl2.prototype, "columnModel", void 0);
  __decorate$f([
    Autowired("ctrlsService")
  ], FakeHScrollCtrl2.prototype, "ctrlsService", void 0);
  __decorate$f([
    Autowired("pinnedRowModel")
  ], FakeHScrollCtrl2.prototype, "pinnedRowModel", void 0);
  return FakeHScrollCtrl2;
}(BeanStub);
var __extends$f = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$e = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FakeHScrollComp = function(_super) {
  __extends$f(FakeHScrollComp2, _super);
  function FakeHScrollComp2() {
    return _super.call(this, FakeHScrollComp2.TEMPLATE) || this;
  }
  FakeHScrollComp2.prototype.postConstruct = function() {
    var _this = this;
    var compProxy = {
      addOrRemoveCssClass: function(cssClassName, on2) {
        return _this.addOrRemoveCssClass(cssClassName, on2);
      },
      setHeight: function(height) {
        return setFixedHeight(_this.getGui(), height);
      },
      setBottom: function(bottom) {
        return _this.getGui().style.bottom = bottom + "px";
      },
      setContainerHeight: function(height) {
        return setFixedHeight(_this.eContainer, height);
      },
      setViewportHeight: function(height) {
        return setFixedHeight(_this.eViewport, height);
      },
      setRightSpacerFixedWidth: function(width) {
        return setFixedWidth(_this.eRightSpacer, width);
      },
      setLeftSpacerFixedWidth: function(width) {
        return setFixedWidth(_this.eLeftSpacer, width);
      },
      includeLeftSpacerScrollerCss: function(cssClass, include) {
        return _this.eLeftSpacer.classList.toggle(cssClass, include);
      },
      includeRightSpacerScrollerCss: function(cssClass, include) {
        return _this.eRightSpacer.classList.toggle(cssClass, include);
      }
    };
    var ctrl = this.createManagedBean(new FakeHScrollCtrl());
    ctrl.setComp(compProxy, this.getGui(), this.eViewport, this.eContainer);
    this.createManagedBean(new CenterWidthFeature(function(width) {
      return _this.eContainer.style.width = width + "px";
    }));
  };
  FakeHScrollComp2.TEMPLATE = '<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>';
  __decorate$e([
    RefSelector("eLeftSpacer")
  ], FakeHScrollComp2.prototype, "eLeftSpacer", void 0);
  __decorate$e([
    RefSelector("eRightSpacer")
  ], FakeHScrollComp2.prototype, "eRightSpacer", void 0);
  __decorate$e([
    RefSelector("eViewport")
  ], FakeHScrollComp2.prototype, "eViewport", void 0);
  __decorate$e([
    RefSelector("eContainer")
  ], FakeHScrollComp2.prototype, "eContainer", void 0);
  __decorate$e([
    PostConstruct
  ], FakeHScrollComp2.prototype, "postConstruct", null);
  return FakeHScrollComp2;
}(Component);
var __extends$e = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$d = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var PinnedWidthService = function(_super) {
  __extends$e(PinnedWidthService2, _super);
  function PinnedWidthService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  PinnedWidthService2.prototype.postConstruct = function() {
    var listener = this.checkContainerWidths.bind(this);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
    this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, listener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
  };
  PinnedWidthService2.prototype.checkContainerWidths = function() {
    var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
    var newLeftWidth = printLayout ? 0 : this.columnModel.getDisplayedColumnsLeftWidth();
    var newRightWidth = printLayout ? 0 : this.columnModel.getDisplayedColumnsRightWidth();
    if (newLeftWidth != this.leftWidth) {
      this.leftWidth = newLeftWidth;
      this.eventService.dispatchEvent({ type: Events.EVENT_LEFT_PINNED_WIDTH_CHANGED });
    }
    if (newRightWidth != this.rightWidth) {
      this.rightWidth = newRightWidth;
      this.eventService.dispatchEvent({ type: Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED });
    }
  };
  PinnedWidthService2.prototype.getPinnedRightWidth = function() {
    return this.rightWidth;
  };
  PinnedWidthService2.prototype.getPinnedLeftWidth = function() {
    return this.leftWidth;
  };
  __decorate$d([
    Autowired("columnModel")
  ], PinnedWidthService2.prototype, "columnModel", void 0);
  __decorate$d([
    PostConstruct
  ], PinnedWidthService2.prototype, "postConstruct", null);
  PinnedWidthService2 = __decorate$d([
    Bean("pinnedWidthService")
  ], PinnedWidthService2);
  return PinnedWidthService2;
}(BeanStub);
var __extends$d = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$c = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowNodeEventThrottle = function(_super) {
  __extends$d(RowNodeEventThrottle2, _super);
  function RowNodeEventThrottle2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.events = [];
    return _this;
  }
  RowNodeEventThrottle2.prototype.postConstruct = function() {
    if (this.rowModel.getType() == Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      this.clientSideRowModel = this.rowModel;
    }
  };
  RowNodeEventThrottle2.prototype.dispatchExpanded = function(event) {
    var _this = this;
    if (this.clientSideRowModel == null) {
      this.eventService.dispatchEvent(event);
      return;
    }
    this.events.push(event);
    var func = function() {
      if (_this.clientSideRowModel) {
        _this.clientSideRowModel.onRowGroupOpened();
      }
      _this.events.forEach(function(e2) {
        return _this.eventService.dispatchEvent(e2);
      });
      _this.events = [];
    };
    if (this.dispatchExpandedDebounced == null) {
      this.dispatchExpandedDebounced = this.animationFrameService.debounce(func);
    }
    this.dispatchExpandedDebounced();
  };
  __decorate$c([
    Autowired("animationFrameService")
  ], RowNodeEventThrottle2.prototype, "animationFrameService", void 0);
  __decorate$c([
    Autowired("rowModel")
  ], RowNodeEventThrottle2.prototype, "rowModel", void 0);
  __decorate$c([
    PostConstruct
  ], RowNodeEventThrottle2.prototype, "postConstruct", null);
  RowNodeEventThrottle2 = __decorate$c([
    Bean("rowNodeEventThrottle")
  ], RowNodeEventThrottle2);
  return RowNodeEventThrottle2;
}(BeanStub);
var __read$2 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread$1 = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$2(arguments[i2]));
  return ar;
};
var Grid = function() {
  function Grid2(eGridDiv, gridOptions, params) {
    if (!gridOptions) {
      console.error("AG Grid: no gridOptions provided to the grid");
      return;
    }
    this.gridOptions = gridOptions;
    new GridCoreCreator().create(eGridDiv, gridOptions, function(context) {
      var gridComp = new GridComp(eGridDiv);
      context.createBean(gridComp);
    }, void 0, params);
  }
  Grid2.prototype.destroy = function() {
    if (this.gridOptions && this.gridOptions.api) {
      this.gridOptions.api.destroy();
    }
  };
  return Grid2;
}();
var GridCoreCreator = function() {
  function GridCoreCreator2() {
  }
  GridCoreCreator2.prototype.create = function(eGridDiv, gridOptions, createUi, acceptChanges, params) {
    var _this = this;
    var debug = !!gridOptions.debug;
    var registeredModules = this.getRegisteredModules(params);
    var beanClasses = this.createBeansList(gridOptions.rowModelType, registeredModules);
    var providedBeanInstances = this.createProvidedBeans(eGridDiv, gridOptions, params);
    if (!beanClasses) {
      return;
    }
    var contextParams = {
      providedBeanInstances,
      beanClasses,
      debug
    };
    var logger = new Logger("AG Grid", function() {
      return gridOptions.debug;
    });
    var contextLogger = new Logger("Context", function() {
      return contextParams.debug;
    });
    var context = new Context(contextParams, contextLogger);
    var beans = context.getBean("beans");
    this.registerModuleUserComponents(beans, registeredModules);
    this.registerStackComponents(beans, registeredModules);
    this.registerControllers(beans, registeredModules);
    createUi(context);
    beans.ctrlsService.whenReady(function() {
      _this.setColumnsAndData(beans);
      _this.dispatchGridReadyEvent(beans);
      var isEnterprise = ModuleRegistry.isRegistered(ModuleNames.EnterpriseCoreModule);
      logger.log("initialised successfully, enterprise = " + isEnterprise);
    });
    if (acceptChanges) {
      acceptChanges(context);
    }
  };
  GridCoreCreator2.prototype.registerControllers = function(beans, registeredModules) {
    registeredModules.forEach(function(module2) {
      if (module2.controllers) {
        module2.controllers.forEach(function(meta) {
          return beans.ctrlsFactory.register(meta);
        });
      }
    });
  };
  GridCoreCreator2.prototype.registerStackComponents = function(beans, registeredModules) {
    var agStackComponents = this.createAgStackComponentsList(registeredModules);
    beans.agStackComponentsRegistry.setupComponents(agStackComponents);
  };
  GridCoreCreator2.prototype.getRegisteredModules = function(params) {
    var passedViaConstructor = params ? params.modules : null;
    var registered = ModuleRegistry.getRegisteredModules();
    var allModules = [];
    var mapNames = {};
    function addModule(moduleBased, mod) {
      function addIndividualModule(currentModule) {
        if (!mapNames[currentModule.moduleName]) {
          mapNames[currentModule.moduleName] = true;
          allModules.push(currentModule);
          ModuleRegistry.register(currentModule, moduleBased);
        }
      }
      addIndividualModule(mod);
      if (mod.dependantModules) {
        mod.dependantModules.forEach(addModule.bind(null, moduleBased));
      }
    }
    if (passedViaConstructor) {
      passedViaConstructor.forEach(addModule.bind(null, true));
    }
    if (registered) {
      registered.forEach(addModule.bind(null, !ModuleRegistry.isPackageBased()));
    }
    return allModules;
  };
  GridCoreCreator2.prototype.registerModuleUserComponents = function(beans, registeredModules) {
    var moduleUserComps = this.extractModuleEntity(registeredModules, function(module2) {
      return module2.userComponents ? module2.userComponents : [];
    });
    moduleUserComps.forEach(function(compMeta) {
      beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName, compMeta.componentClass);
    });
  };
  GridCoreCreator2.prototype.createProvidedBeans = function(eGridDiv, gridOptions, params) {
    var frameworkOverrides = params ? params.frameworkOverrides : null;
    if (missing(frameworkOverrides)) {
      frameworkOverrides = new VanillaFrameworkOverrides();
    }
    var seed2 = {
      gridOptions,
      eGridDiv,
      globalEventListener: params ? params.globalEventListener : null,
      frameworkOverrides
    };
    if (params && params.providedBeanInstances) {
      Object.assign(seed2, params.providedBeanInstances);
    }
    return seed2;
  };
  GridCoreCreator2.prototype.createAgStackComponentsList = function(registeredModules) {
    var components = [
      { componentName: "AgCheckbox", componentClass: AgCheckbox },
      { componentName: "AgRadioButton", componentClass: AgRadioButton },
      { componentName: "AgToggleButton", componentClass: AgToggleButton },
      { componentName: "AgInputTextField", componentClass: AgInputTextField },
      { componentName: "AgInputTextArea", componentClass: AgInputTextArea },
      { componentName: "AgInputNumberField", componentClass: AgInputNumberField },
      { componentName: "AgInputRange", componentClass: AgInputRange },
      { componentName: "AgSelect", componentClass: AgSelect },
      { componentName: "AgSlider", componentClass: AgSlider },
      { componentName: "AgAngleSelect", componentClass: AgAngleSelect },
      { componentName: "AgColorPicker", componentClass: AgColorPicker },
      { componentName: "AgGridBody", componentClass: GridBodyComp },
      { componentName: "AgHeaderRoot", componentClass: GridHeaderComp },
      { componentName: "AgSortIndicator", componentClass: SortIndicatorComp },
      { componentName: "AgPagination", componentClass: PaginationComp },
      { componentName: "AgOverlayWrapper", componentClass: OverlayWrapperComponent },
      { componentName: "AgGroupComponent", componentClass: AgGroupComponent },
      { componentName: "AgPanel", componentClass: AgPanel },
      { componentName: "AgDialog", componentClass: AgDialog },
      { componentName: "AgRowContainer", componentClass: RowContainerComp },
      { componentName: "AgFakeHorizontalScroll", componentClass: FakeHScrollComp }
    ];
    var moduleAgStackComps = this.extractModuleEntity(registeredModules, function(module2) {
      return module2.agStackComponents ? module2.agStackComponents : [];
    });
    components = components.concat(moduleAgStackComps);
    return components;
  };
  GridCoreCreator2.prototype.createBeansList = function(rowModelType, registeredModules) {
    var rowModelClass = this.getRowModelClass(rowModelType, registeredModules);
    if (!rowModelClass) {
      return;
    }
    var beans = [
      rowModelClass,
      Beans,
      RowPositionUtils,
      CellPositionUtils,
      HeaderPositionUtils,
      PaginationAutoPageSizeService,
      GridApi,
      UserComponentRegistry,
      AgComponentUtils,
      ComponentMetadataProvider,
      ResizeObserverService,
      UserComponentFactory,
      RowContainerHeightService,
      HorizontalResizeService,
      PinnedRowModel,
      DragService,
      DisplayedGroupCreator,
      EventService,
      GridOptionsWrapper,
      PopupService,
      SelectionService,
      FilterManager,
      ColumnModel,
      HeaderNavigationService,
      PaginationProxy,
      RowRenderer,
      ExpressionService,
      ColumnFactory,
      TemplateService,
      AlignedGridsService,
      NavigationService,
      ValueCache,
      ValueService,
      LoggerFactory,
      ColumnUtils,
      AutoWidthCalculator,
      StandardMenuFactory,
      DragAndDropService,
      ColumnApi,
      FocusService,
      MouseEventService,
      Environment,
      CellNavigationService,
      ValueFormatterService,
      StylingService,
      ScrollVisibleService,
      SortController,
      ColumnHoverService,
      ColumnAnimationService,
      SelectableService,
      AutoGroupColService,
      ChangeDetectionService,
      AnimationFrameService,
      UndoRedoService,
      AgStackComponentsRegistry,
      ColumnDefFactory,
      RowCssClassCalculator,
      RowNodeBlockLoader,
      RowNodeSorter,
      CtrlsService,
      PinnedWidthService,
      RowNodeEventThrottle,
      CtrlsFactory
    ];
    var moduleBeans = this.extractModuleEntity(registeredModules, function(module2) {
      return module2.beans ? module2.beans : [];
    });
    beans.push.apply(beans, __spread$1(moduleBeans));
    var beansNoDuplicates = [];
    beans.forEach(function(bean) {
      if (beansNoDuplicates.indexOf(bean) < 0) {
        beansNoDuplicates.push(bean);
      }
    });
    return beansNoDuplicates;
  };
  GridCoreCreator2.prototype.extractModuleEntity = function(moduleEntities, extractor) {
    return [].concat.apply([], __spread$1(moduleEntities.map(extractor)));
  };
  GridCoreCreator2.prototype.setColumnsAndData = function(beans) {
    var columnDefs = beans.gridOptionsWrapper.getColumnDefs();
    beans.columnModel.setColumnDefs(columnDefs || [], "gridInitializing");
    beans.rowModel.start();
  };
  GridCoreCreator2.prototype.dispatchGridReadyEvent = function(beans) {
    var readyEvent = {
      type: Events.EVENT_GRID_READY
    };
    beans.eventService.dispatchEvent(readyEvent);
  };
  GridCoreCreator2.prototype.getRowModelClass = function(rowModelType, registeredModules) {
    if (!rowModelType) {
      rowModelType = Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
    }
    var rowModelClasses = {};
    registeredModules.forEach(function(module2) {
      iterateObject(module2.rowModels, function(key, value) {
        rowModelClasses[key] = value;
      });
    });
    var rowModelClass = rowModelClasses[rowModelType];
    if (exists(rowModelClass)) {
      return rowModelClass;
    }
    if (ModuleRegistry.isPackageBased()) {
      if ([Constants.ROW_MODEL_TYPE_VIEWPORT, Constants.ROW_MODEL_TYPE_SERVER_SIDE].includes(rowModelType)) {
        console.error('AG Grid: Row Model "' + rowModelType + `" not found. Please ensure the package 'ag-grid-enterprise' is imported. Please see: https://www.ag-grid.com/javascript-grid/packages/`);
      } else {
        console.error("AG Grid: could not find row model for rowModelType " + rowModelType);
      }
    } else {
      if (rowModelType === Constants.ROW_MODEL_TYPE_INFINITE) {
        console.error('AG Grid: Row Model "Infinite" not found. Please ensure the ' + ModuleNames.InfiniteRowModelModule + " module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/");
      } else if (rowModelType === Constants.ROW_MODEL_TYPE_VIEWPORT) {
        console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module ' + ModuleNames.ViewportRowModelModule + " module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/");
      } else if (rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE) {
        console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module ' + ModuleNames.ServerSideRowModelModule + " module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/");
      } else if (rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        console.error('AG Grid: Row Model "Client Side" not found. Please ensure the ' + ModuleNames.ClientSideRowModelModule + " module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/");
      } else {
        console.error("AG Grid: could not find row model for rowModelType " + rowModelType);
      }
    }
  };
  return GridCoreCreator2;
}();
var BaseComponentWrapper = function() {
  function BaseComponentWrapper2() {
  }
  BaseComponentWrapper2.prototype.wrap = function(OriginalConstructor, mandatoryMethodList, optionalMethodList, componentType) {
    var _this = this;
    if (optionalMethodList === void 0) {
      optionalMethodList = [];
    }
    var wrapper = this.createWrapper(OriginalConstructor, componentType);
    mandatoryMethodList.forEach(function(methodName) {
      _this.createMethod(wrapper, methodName, true);
    });
    optionalMethodList.forEach(function(methodName) {
      _this.createMethod(wrapper, methodName, false);
    });
    return wrapper;
  };
  BaseComponentWrapper2.prototype.unwrap = function(comp) {
    return comp;
  };
  BaseComponentWrapper2.prototype.createMethod = function(wrapper, methodName, mandatory) {
    wrapper.addMethod(methodName, this.createMethodProxy(wrapper, methodName, mandatory));
  };
  BaseComponentWrapper2.prototype.createMethodProxy = function(wrapper, methodName, mandatory) {
    return function() {
      if (wrapper.hasMethod(methodName)) {
        return wrapper.callMethod(methodName, arguments);
      }
      if (mandatory) {
        console.warn("AG Grid: Framework component is missing the method " + methodName + "()");
      }
      return null;
    };
  };
  return BaseComponentWrapper2;
}();
var BarColumnLabelPlacement;
(function(BarColumnLabelPlacement2) {
  BarColumnLabelPlacement2["InsideBase"] = "insideBase";
  BarColumnLabelPlacement2["InsideEnd"] = "insideEnd";
  BarColumnLabelPlacement2["Center"] = "center";
  BarColumnLabelPlacement2["OutsideEnd"] = "outsideEnd";
})(BarColumnLabelPlacement || (BarColumnLabelPlacement = {}));
var globalObj = typeof global === "undefined" ? {} : global;
globalObj.HTMLElement = typeof HTMLElement === "undefined" ? {} : HTMLElement;
globalObj.HTMLButtonElement = typeof HTMLButtonElement === "undefined" ? {} : HTMLButtonElement;
globalObj.HTMLSelectElement = typeof HTMLSelectElement === "undefined" ? {} : HTMLSelectElement;
globalObj.HTMLInputElement = typeof HTMLInputElement === "undefined" ? {} : HTMLInputElement;
globalObj.Node = typeof Node === "undefined" ? {} : Node;
globalObj.MouseEvent = typeof MouseEvent === "undefined" ? {} : MouseEvent;
var __read$1 = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var __spread = function() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++)
    ar = ar.concat(__read$1(arguments[i2]));
  return ar;
};
var ClientSideNodeManager = function() {
  function ClientSideNodeManager2(rootNode, gridOptionsWrapper, eventService, columnModel, selectionService, beans) {
    this.nextId = 0;
    this.allNodesMap = {};
    this.rootNode = rootNode;
    this.gridOptionsWrapper = gridOptionsWrapper;
    this.eventService = eventService;
    this.columnModel = columnModel;
    this.beans = beans;
    this.selectionService = selectionService;
    this.rootNode.group = true;
    this.rootNode.level = -1;
    this.rootNode.id = ClientSideNodeManager2.ROOT_NODE_ID;
    this.rootNode.allLeafChildren = [];
    this.rootNode.childrenAfterGroup = [];
    this.rootNode.childrenAfterSort = [];
    this.rootNode.childrenAfterAggFilter = [];
    this.rootNode.childrenAfterFilter = [];
    this.postConstruct();
  }
  ClientSideNodeManager2.prototype.postConstruct = function() {
    this.suppressParentsInRowNodes = this.gridOptionsWrapper.isSuppressParentsInRowNodes();
    this.isRowMasterFunc = this.gridOptionsWrapper.getIsRowMasterFunc();
    this.doingTreeData = this.gridOptionsWrapper.isTreeData();
    this.doingMasterDetail = this.gridOptionsWrapper.isMasterDetail();
  };
  ClientSideNodeManager2.prototype.getCopyOfNodesMap = function() {
    return _.cloneObject(this.allNodesMap);
  };
  ClientSideNodeManager2.prototype.getRowNode = function(id) {
    return this.allNodesMap[id];
  };
  ClientSideNodeManager2.prototype.setRowData = function(rowData) {
    var _this = this;
    if (typeof rowData === "string") {
      console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");
      return;
    }
    var rootNode = this.rootNode;
    var sibling = this.rootNode.sibling;
    rootNode.childrenAfterFilter = null;
    rootNode.childrenAfterGroup = null;
    rootNode.childrenAfterAggFilter = null;
    rootNode.childrenAfterSort = null;
    rootNode.childrenMapped = null;
    rootNode.updateHasChildren();
    this.nextId = 0;
    this.allNodesMap = {};
    if (rowData) {
      rootNode.allLeafChildren = rowData.map(function(dataItem) {
        return _this.createNode(dataItem, _this.rootNode, ClientSideNodeManager2.TOP_LEVEL);
      });
    } else {
      rootNode.allLeafChildren = [];
      rootNode.childrenAfterGroup = [];
    }
    if (sibling) {
      sibling.childrenAfterFilter = rootNode.childrenAfterFilter;
      sibling.childrenAfterGroup = rootNode.childrenAfterGroup;
      sibling.childrenAfterAggFilter = rootNode.childrenAfterAggFilter;
      sibling.childrenAfterSort = rootNode.childrenAfterSort;
      sibling.childrenMapped = rootNode.childrenMapped;
      sibling.allLeafChildren = rootNode.allLeafChildren;
    }
  };
  ClientSideNodeManager2.prototype.updateRowData = function(rowDataTran, rowNodeOrder) {
    var rowNodeTransaction = {
      remove: [],
      update: [],
      add: []
    };
    var nodesToUnselect = [];
    this.executeRemove(rowDataTran, rowNodeTransaction, nodesToUnselect);
    this.executeUpdate(rowDataTran, rowNodeTransaction, nodesToUnselect);
    this.executeAdd(rowDataTran, rowNodeTransaction);
    this.updateSelection(nodesToUnselect);
    if (rowNodeOrder) {
      _.sortRowNodesByOrder(this.rootNode.allLeafChildren, rowNodeOrder);
    }
    return rowNodeTransaction;
  };
  ClientSideNodeManager2.prototype.updateSelection = function(nodesToUnselect) {
    var selectionChanged = nodesToUnselect.length > 0;
    if (selectionChanged) {
      nodesToUnselect.forEach(function(rowNode) {
        rowNode.setSelected(false, false, true);
      });
    }
    this.selectionService.updateGroupsFromChildrenSelections();
    if (selectionChanged) {
      var event_1 = {
        type: Events.EVENT_SELECTION_CHANGED
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  ClientSideNodeManager2.prototype.executeAdd = function(rowDataTran, rowNodeTransaction) {
    var _this = this;
    var add2 = rowDataTran.add, addIndex = rowDataTran.addIndex;
    if (_.missingOrEmpty(add2)) {
      return;
    }
    var newNodes = add2.map(function(item) {
      return _this.createNode(item, _this.rootNode, ClientSideNodeManager2.TOP_LEVEL);
    });
    var useIndex = typeof addIndex === "number" && addIndex >= 0;
    var nodesBeforeIndex;
    var nodesAfterIndex;
    if (useIndex) {
      var allLeafChildren_1 = this.rootNode.allLeafChildren;
      var normalizedAddIndex = addIndex === 0 ? 0 : allLeafChildren_1.reduce(function(prevIdx, currNode, currIdx) {
        var _a2;
        var rowIndex = currNode.rowIndex;
        var prevValueAtIndex = (_a2 = allLeafChildren_1[prevIdx]) === null || _a2 === void 0 ? void 0 : _a2.rowIndex;
        var shouldUpdateIndex = rowIndex != null && prevValueAtIndex != null && rowIndex < addIndex && rowIndex > prevValueAtIndex;
        return shouldUpdateIndex ? currIdx : prevIdx;
      }, 0) + 1;
      nodesBeforeIndex = allLeafChildren_1.slice(0, normalizedAddIndex);
      nodesAfterIndex = allLeafChildren_1.slice(normalizedAddIndex, allLeafChildren_1.length);
    } else {
      nodesBeforeIndex = this.rootNode.allLeafChildren;
      nodesAfterIndex = [];
    }
    this.rootNode.allLeafChildren = __spread(nodesBeforeIndex, newNodes, nodesAfterIndex);
    if (this.rootNode.sibling) {
      this.rootNode.sibling.allLeafChildren = this.rootNode.allLeafChildren;
    }
    rowNodeTransaction.add = newNodes;
  };
  ClientSideNodeManager2.prototype.executeRemove = function(rowDataTran, rowNodeTransaction, nodesToUnselect) {
    var _this = this;
    var remove = rowDataTran.remove;
    if (_.missingOrEmpty(remove)) {
      return;
    }
    var rowIdsRemoved = {};
    remove.forEach(function(item) {
      var rowNode = _this.lookupRowNode(item);
      if (!rowNode) {
        return;
      }
      if (rowNode.isSelected()) {
        nodesToUnselect.push(rowNode);
      }
      rowNode.clearRowTopAndRowIndex();
      rowIdsRemoved[rowNode.id] = true;
      delete _this.allNodesMap[rowNode.id];
      rowNodeTransaction.remove.push(rowNode);
    });
    this.rootNode.allLeafChildren = this.rootNode.allLeafChildren.filter(function(rowNode) {
      return !rowIdsRemoved[rowNode.id];
    });
    if (this.rootNode.sibling) {
      this.rootNode.sibling.allLeafChildren = this.rootNode.allLeafChildren;
    }
  };
  ClientSideNodeManager2.prototype.executeUpdate = function(rowDataTran, rowNodeTransaction, nodesToUnselect) {
    var _this = this;
    var update = rowDataTran.update;
    if (_.missingOrEmpty(update)) {
      return;
    }
    update.forEach(function(item) {
      var rowNode = _this.lookupRowNode(item);
      if (!rowNode) {
        return;
      }
      rowNode.updateData(item);
      if (!rowNode.selectable && rowNode.isSelected()) {
        nodesToUnselect.push(rowNode);
      }
      _this.setMasterForRow(rowNode, item, ClientSideNodeManager2.TOP_LEVEL, false);
      rowNodeTransaction.update.push(rowNode);
    });
  };
  ClientSideNodeManager2.prototype.lookupRowNode = function(data) {
    var getRowIdFunc = this.gridOptionsWrapper.getRowIdFunc();
    var rowNode;
    if (getRowIdFunc) {
      var id = getRowIdFunc({ data, level: 0 });
      rowNode = this.allNodesMap[id];
      if (!rowNode) {
        console.error("AG Grid: could not find row id=" + id + ", data item was not found for this id");
        return null;
      }
    } else {
      rowNode = this.rootNode.allLeafChildren.find(function(node) {
        return node.data === data;
      });
      if (!rowNode) {
        console.error("AG Grid: could not find data item as object was not found", data);
        console.error("Consider using getRowId to help the Grid find matching row data");
        return null;
      }
    }
    return rowNode || null;
  };
  ClientSideNodeManager2.prototype.createNode = function(dataItem, parent, level) {
    var node = new RowNode(this.beans);
    node.group = false;
    this.setMasterForRow(node, dataItem, level, true);
    if (parent && !this.suppressParentsInRowNodes) {
      node.parent = parent;
    }
    node.level = level;
    node.setDataAndId(dataItem, this.nextId.toString());
    if (this.allNodesMap[node.id]) {
      console.warn("AG Grid: duplicate node id '" + node.id + "' detected from getRowId callback, this could cause issues in your grid.");
    }
    this.allNodesMap[node.id] = node;
    this.nextId++;
    return node;
  };
  ClientSideNodeManager2.prototype.setMasterForRow = function(rowNode, data, level, setExpanded) {
    if (this.doingTreeData) {
      rowNode.setMaster(false);
      if (setExpanded) {
        rowNode.expanded = false;
      }
    } else {
      if (this.doingMasterDetail) {
        if (this.isRowMasterFunc) {
          rowNode.setMaster(this.isRowMasterFunc(data));
        } else {
          rowNode.setMaster(true);
        }
      } else {
        rowNode.setMaster(false);
      }
      if (setExpanded) {
        var rowGroupColumns = this.columnModel.getRowGroupColumns();
        var numRowGroupColumns = rowGroupColumns ? rowGroupColumns.length : 0;
        var masterRowLevel = level + numRowGroupColumns;
        rowNode.expanded = rowNode.master ? this.isExpanded(masterRowLevel) : false;
      }
    }
  };
  ClientSideNodeManager2.prototype.isExpanded = function(level) {
    var expandByDefault = this.gridOptionsWrapper.getGroupDefaultExpanded();
    if (expandByDefault === -1) {
      return true;
    }
    return level < expandByDefault;
  };
  ClientSideNodeManager2.TOP_LEVEL = 0;
  ClientSideNodeManager2.ROOT_NODE_ID = "ROOT_NODE_ID";
  return ClientSideNodeManager2;
}();
var __extends$c = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$b = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RecursionType;
(function(RecursionType2) {
  RecursionType2[RecursionType2["Normal"] = 0] = "Normal";
  RecursionType2[RecursionType2["AfterFilter"] = 1] = "AfterFilter";
  RecursionType2[RecursionType2["AfterFilterAndSort"] = 2] = "AfterFilterAndSort";
  RecursionType2[RecursionType2["PivotNodes"] = 3] = "PivotNodes";
})(RecursionType || (RecursionType = {}));
var ClientSideRowModel = function(_super) {
  __extends$c(ClientSideRowModel2, _super);
  function ClientSideRowModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.rowsToDisplay = [];
    return _this;
  }
  ClientSideRowModel2.prototype.init = function() {
    var refreshEverythingFunc = this.refreshModel.bind(this, { step: ClientSideRowModelSteps.EVERYTHING });
    var animate = !this.gridOptionsWrapper.isSuppressAnimationFrame();
    var refreshEverythingAfterColsChangedFunc = this.refreshModel.bind(this, {
      step: ClientSideRowModelSteps.EVERYTHING,
      afterColumnsChanged: true,
      keepRenderedRows: true,
      animate
    });
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, refreshEverythingAfterColsChangedFunc);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, refreshEverythingFunc);
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onValueChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.refreshModel.bind(this, { step: ClientSideRowModelSteps.PIVOT }));
    this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, refreshEverythingFunc);
    var refreshMapListener = this.refreshModel.bind(this, {
      step: ClientSideRowModelSteps.MAP,
      keepRenderedRows: true,
      animate
    });
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN, refreshMapListener);
    this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN, refreshMapListener);
    this.rootNode = new RowNode(this.beans);
    this.nodeManager = new ClientSideNodeManager(this.rootNode, this.gridOptionsWrapper, this.eventService, this.columnModel, this.selectionService, this.beans);
  };
  ClientSideRowModel2.prototype.start = function() {
    var rowData = this.gridOptionsWrapper.getRowData();
    if (rowData) {
      this.setRowData(rowData);
    }
  };
  ClientSideRowModel2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
    var atLeastOneChange;
    var res = false;
    do {
      atLeastOneChange = false;
      var rowAtStartPixel = this.getRowIndexAtPixel(startPixel);
      var rowAtEndPixel = this.getRowIndexAtPixel(endPixel);
      var firstRow = Math.max(rowAtStartPixel, startLimitIndex);
      var lastRow = Math.min(rowAtEndPixel, endLimitIndex);
      for (var rowIndex = firstRow; rowIndex <= lastRow; rowIndex++) {
        var rowNode = this.getRow(rowIndex);
        if (rowNode.rowHeightEstimated) {
          var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(rowNode);
          rowNode.setRowHeight(rowHeight.height);
          atLeastOneChange = true;
          res = true;
        }
      }
      if (atLeastOneChange) {
        this.setRowTopAndRowIndex();
      }
    } while (atLeastOneChange);
    return res;
  };
  ClientSideRowModel2.prototype.setRowTopAndRowIndex = function() {
    var defaultRowHeight = this.gridOptionsWrapper.getDefaultRowHeight();
    var nextRowTop = 0;
    var displayedRowsMapped = /* @__PURE__ */ new Set();
    var allowEstimate = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
    for (var i2 = 0; i2 < this.rowsToDisplay.length; i2++) {
      var rowNode = this.rowsToDisplay[i2];
      if (rowNode.id != null) {
        displayedRowsMapped.add(rowNode.id);
      }
      if (rowNode.rowHeight == null) {
        var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(rowNode, allowEstimate, defaultRowHeight);
        rowNode.setRowHeight(rowHeight.height, rowHeight.estimated);
      }
      rowNode.setRowTop(nextRowTop);
      rowNode.setRowIndex(i2);
      nextRowTop += rowNode.rowHeight;
    }
    return displayedRowsMapped;
  };
  ClientSideRowModel2.prototype.clearRowTopAndRowIndex = function(changedPath, displayedRowsMapped) {
    var changedPathActive = changedPath.isActive();
    var clearIfNotDisplayed = function(rowNode) {
      if (rowNode && rowNode.id != null && !displayedRowsMapped.has(rowNode.id)) {
        rowNode.clearRowTopAndRowIndex();
      }
    };
    var recurse = function(rowNode) {
      clearIfNotDisplayed(rowNode);
      clearIfNotDisplayed(rowNode.detailNode);
      clearIfNotDisplayed(rowNode.sibling);
      if (rowNode.hasChildren()) {
        if (rowNode.childrenAfterGroup) {
          var isRootNode = rowNode.level == -1;
          var skipChildren = changedPathActive && !isRootNode && !rowNode.expanded;
          if (!skipChildren) {
            rowNode.childrenAfterGroup.forEach(recurse);
          }
        }
      }
    };
    recurse(this.rootNode);
  };
  ClientSideRowModel2.prototype.ensureRowsAtPixel = function(rowNodes, pixel, increment) {
    var _this = this;
    if (increment === void 0) {
      increment = 0;
    }
    var indexAtPixelNow = this.getRowIndexAtPixel(pixel);
    var rowNodeAtPixelNow = this.getRow(indexAtPixelNow);
    var animate = !this.gridOptionsWrapper.isSuppressAnimationFrame();
    if (rowNodeAtPixelNow === rowNodes[0]) {
      return false;
    }
    rowNodes.forEach(function(rowNode) {
      _.removeFromArray(_this.rootNode.allLeafChildren, rowNode);
    });
    rowNodes.forEach(function(rowNode, idx) {
      _.insertIntoArray(_this.rootNode.allLeafChildren, rowNode, Math.max(indexAtPixelNow + increment, 0) + idx);
    });
    this.refreshModel({
      step: ClientSideRowModelSteps.EVERYTHING,
      keepRenderedRows: true,
      keepEditingRows: true,
      animate
    });
    return true;
  };
  ClientSideRowModel2.prototype.highlightRowAtPixel = function(rowNode, pixel) {
    var indexAtPixelNow = pixel != null ? this.getRowIndexAtPixel(pixel) : null;
    var rowNodeAtPixelNow = indexAtPixelNow != null ? this.getRow(indexAtPixelNow) : null;
    if (!rowNodeAtPixelNow || !rowNode || rowNodeAtPixelNow === rowNode || pixel == null) {
      if (this.lastHighlightedRow) {
        this.lastHighlightedRow.setHighlighted(null);
        this.lastHighlightedRow = null;
      }
      return;
    }
    var highlight = this.getHighlightPosition(pixel, rowNodeAtPixelNow);
    if (this.lastHighlightedRow && this.lastHighlightedRow !== rowNodeAtPixelNow) {
      this.lastHighlightedRow.setHighlighted(null);
      this.lastHighlightedRow = null;
    }
    rowNodeAtPixelNow.setHighlighted(highlight);
    this.lastHighlightedRow = rowNodeAtPixelNow;
  };
  ClientSideRowModel2.prototype.getHighlightPosition = function(pixel, rowNode) {
    if (!rowNode) {
      var index = this.getRowIndexAtPixel(pixel);
      rowNode = this.getRow(index || 0);
      if (!rowNode) {
        return RowHighlightPosition.Below;
      }
    }
    var rowTop = rowNode.rowTop, rowHeight = rowNode.rowHeight;
    return pixel - rowTop < rowHeight / 2 ? RowHighlightPosition.Above : RowHighlightPosition.Below;
  };
  ClientSideRowModel2.prototype.getLastHighlightedRowNode = function() {
    return this.lastHighlightedRow;
  };
  ClientSideRowModel2.prototype.isLastRowIndexKnown = function() {
    return true;
  };
  ClientSideRowModel2.prototype.getRowCount = function() {
    if (this.rowsToDisplay) {
      return this.rowsToDisplay.length;
    }
    return 0;
  };
  ClientSideRowModel2.prototype.getTopLevelRowCount = function() {
    var showingRootNode = this.rowsToDisplay && this.rowsToDisplay[0] === this.rootNode;
    if (showingRootNode) {
      return 1;
    }
    var filteredChildren = this.rootNode.childrenAfterAggFilter;
    return filteredChildren ? filteredChildren.length : 0;
  };
  ClientSideRowModel2.prototype.getTopLevelRowDisplayedIndex = function(topLevelIndex) {
    var showingRootNode = this.rowsToDisplay && this.rowsToDisplay[0] === this.rootNode;
    if (showingRootNode) {
      return topLevelIndex;
    }
    var rowNode = this.rootNode.childrenAfterSort[topLevelIndex];
    if (this.gridOptionsWrapper.isGroupHideOpenParents()) {
      while (rowNode.expanded && rowNode.childrenAfterSort && rowNode.childrenAfterSort.length > 0) {
        rowNode = rowNode.childrenAfterSort[0];
      }
    }
    return rowNode.rowIndex;
  };
  ClientSideRowModel2.prototype.getRowBounds = function(index) {
    if (_.missing(this.rowsToDisplay)) {
      return null;
    }
    var rowNode = this.rowsToDisplay[index];
    if (rowNode) {
      return {
        rowTop: rowNode.rowTop,
        rowHeight: rowNode.rowHeight
      };
    }
    return null;
  };
  ClientSideRowModel2.prototype.onRowGroupOpened = function() {
    var animate = this.gridOptionsWrapper.isAnimateRows();
    this.refreshModel({ step: ClientSideRowModelSteps.MAP, keepRenderedRows: true, animate });
  };
  ClientSideRowModel2.prototype.onFilterChanged = function(event) {
    if (event.afterDataChange) {
      return;
    }
    var animate = this.gridOptionsWrapper.isAnimateRows();
    var primaryOrQuickFilterChanged = event.columns.length === 0 || event.columns.some(function(col) {
      return col.isPrimary();
    });
    var step = primaryOrQuickFilterChanged ? ClientSideRowModelSteps.FILTER : ClientSideRowModelSteps.FILTER_AGGREGATES;
    this.refreshModel({ step, keepRenderedRows: true, animate });
  };
  ClientSideRowModel2.prototype.onSortChanged = function() {
    var animate = this.gridOptionsWrapper.isAnimateRows();
    this.refreshModel({ step: ClientSideRowModelSteps.SORT, keepRenderedRows: true, animate, keepEditingRows: true });
  };
  ClientSideRowModel2.prototype.getType = function() {
    return Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
  };
  ClientSideRowModel2.prototype.onValueChanged = function() {
    if (this.columnModel.isPivotActive()) {
      this.refreshModel({ step: ClientSideRowModelSteps.PIVOT });
    } else {
      this.refreshModel({ step: ClientSideRowModelSteps.AGGREGATE });
    }
  };
  ClientSideRowModel2.prototype.createChangePath = function(rowNodeTransactions) {
    var noTransactions = _.missingOrEmpty(rowNodeTransactions);
    var changedPath = new ChangedPath(false, this.rootNode);
    if (noTransactions || this.gridOptionsWrapper.isTreeData()) {
      changedPath.setInactive();
    }
    return changedPath;
  };
  ClientSideRowModel2.prototype.isSuppressModelUpdateAfterUpdateTransaction = function(params) {
    if (!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()) {
      return false;
    }
    if (params.rowNodeTransactions == null) {
      return false;
    }
    var transWithAddsOrDeletes = params.rowNodeTransactions.filter(function(tx) {
      return tx.add != null && tx.add.length > 0 || tx.remove != null && tx.remove.length > 0;
    });
    var transactionsContainUpdatesOnly = transWithAddsOrDeletes == null || transWithAddsOrDeletes.length == 0;
    return transactionsContainUpdatesOnly;
  };
  ClientSideRowModel2.prototype.refreshModel = function(params) {
    if (this.isSuppressModelUpdateAfterUpdateTransaction(params)) {
      return;
    }
    var changedPath = this.createChangePath(params.rowNodeTransactions);
    switch (params.step) {
      case ClientSideRowModelSteps.EVERYTHING:
        this.doRowGrouping(params.groupState, params.rowNodeTransactions, params.rowNodeOrder, changedPath, !!params.afterColumnsChanged);
      case ClientSideRowModelSteps.FILTER:
        this.doFilter(changedPath);
      case ClientSideRowModelSteps.PIVOT:
        this.doPivot(changedPath);
      case ClientSideRowModelSteps.AGGREGATE:
        this.doAggregate(changedPath);
      case ClientSideRowModelSteps.FILTER_AGGREGATES:
        this.doFilterAggregates(changedPath);
      case ClientSideRowModelSteps.SORT:
        this.doSort(params.rowNodeTransactions, changedPath);
      case ClientSideRowModelSteps.MAP:
        this.doRowsToDisplay();
    }
    var displayedNodesMapped = this.setRowTopAndRowIndex();
    this.clearRowTopAndRowIndex(changedPath, displayedNodesMapped);
    var event = {
      type: Events.EVENT_MODEL_UPDATED,
      animate: params.animate,
      keepRenderedRows: params.keepRenderedRows,
      newData: params.newData,
      newPage: false,
      keepUndoRedoStack: params.keepUndoRedoStack
    };
    this.eventService.dispatchEvent(event);
  };
  ClientSideRowModel2.prototype.isEmpty = function() {
    var rowsMissing = _.missing(this.rootNode.allLeafChildren) || this.rootNode.allLeafChildren.length === 0;
    return _.missing(this.rootNode) || rowsMissing || !this.columnModel.isReady();
  };
  ClientSideRowModel2.prototype.isRowsToRender = function() {
    return _.exists(this.rowsToDisplay) && this.rowsToDisplay.length > 0;
  };
  ClientSideRowModel2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
    var firstRowHit = !lastInRange;
    var lastRowHit = false;
    var lastRow;
    var result = [];
    var groupsSelectChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
    this.forEachNodeAfterFilterAndSort(function(rowNode) {
      var lookingForLastRow = firstRowHit && !lastRowHit;
      if (!firstRowHit) {
        if (rowNode === lastInRange || rowNode === firstInRange) {
          firstRowHit = true;
        }
      }
      var skipThisGroupNode = rowNode.group && groupsSelectChildren;
      if (!skipThisGroupNode) {
        var inRange = firstRowHit && !lastRowHit;
        var childOfLastRow = rowNode.isParentOfNode(lastRow);
        if (inRange || childOfLastRow) {
          result.push(rowNode);
        }
      }
      if (lookingForLastRow) {
        if (rowNode === lastInRange || rowNode === firstInRange) {
          lastRowHit = true;
          if (rowNode === lastInRange) {
            lastRow = lastInRange;
          } else {
            lastRow = firstInRange;
          }
        }
      }
    });
    return result;
  };
  ClientSideRowModel2.prototype.setDatasource = function(datasource) {
    console.error("AG Grid: should never call setDatasource on clientSideRowController");
  };
  ClientSideRowModel2.prototype.getTopLevelNodes = function() {
    return this.rootNode ? this.rootNode.childrenAfterGroup : null;
  };
  ClientSideRowModel2.prototype.getRootNode = function() {
    return this.rootNode;
  };
  ClientSideRowModel2.prototype.getRow = function(index) {
    return this.rowsToDisplay[index];
  };
  ClientSideRowModel2.prototype.isRowPresent = function(rowNode) {
    return this.rowsToDisplay.indexOf(rowNode) >= 0;
  };
  ClientSideRowModel2.prototype.getRowIndexAtPixel = function(pixelToMatch) {
    if (this.isEmpty() || this.rowsToDisplay.length === 0) {
      return -1;
    }
    var bottomPointer = 0;
    var topPointer = this.rowsToDisplay.length - 1;
    if (pixelToMatch <= 0) {
      return 0;
    }
    var lastNode = _.last(this.rowsToDisplay);
    if (lastNode.rowTop <= pixelToMatch) {
      return this.rowsToDisplay.length - 1;
    }
    var oldBottomPointer = -1;
    var oldTopPointer = -1;
    while (true) {
      var midPointer = Math.floor((bottomPointer + topPointer) / 2);
      var currentRowNode = this.rowsToDisplay[midPointer];
      if (this.isRowInPixel(currentRowNode, pixelToMatch)) {
        return midPointer;
      }
      if (currentRowNode.rowTop < pixelToMatch) {
        bottomPointer = midPointer + 1;
      } else if (currentRowNode.rowTop > pixelToMatch) {
        topPointer = midPointer - 1;
      }
      var caughtInInfiniteLoop = oldBottomPointer === bottomPointer && oldTopPointer === topPointer;
      if (caughtInInfiniteLoop) {
        return midPointer;
      }
      oldBottomPointer = bottomPointer;
      oldTopPointer = topPointer;
    }
  };
  ClientSideRowModel2.prototype.isRowInPixel = function(rowNode, pixelToMatch) {
    var topPixel = rowNode.rowTop;
    var bottomPixel = rowNode.rowTop + rowNode.rowHeight;
    var pixelInRow = topPixel <= pixelToMatch && bottomPixel > pixelToMatch;
    return pixelInRow;
  };
  ClientSideRowModel2.prototype.forEachLeafNode = function(callback) {
    if (this.rootNode.allLeafChildren) {
      this.rootNode.allLeafChildren.forEach(function(rowNode, index) {
        return callback(rowNode, index);
      });
    }
  };
  ClientSideRowModel2.prototype.forEachNode = function(callback) {
    this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup, callback, RecursionType.Normal, 0);
  };
  ClientSideRowModel2.prototype.forEachNodeAfterFilter = function(callback) {
    this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterAggFilter, callback, RecursionType.AfterFilter, 0);
  };
  ClientSideRowModel2.prototype.forEachNodeAfterFilterAndSort = function(callback) {
    this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort, callback, RecursionType.AfterFilterAndSort, 0);
  };
  ClientSideRowModel2.prototype.forEachPivotNode = function(callback) {
    this.recursivelyWalkNodesAndCallback([this.rootNode], callback, RecursionType.PivotNodes, 0);
  };
  ClientSideRowModel2.prototype.recursivelyWalkNodesAndCallback = function(nodes, callback, recursionType, index) {
    if (!nodes) {
      return index;
    }
    for (var i2 = 0; i2 < nodes.length; i2++) {
      var node = nodes[i2];
      callback(node, index++);
      if (node.hasChildren()) {
        var nodeChildren = null;
        switch (recursionType) {
          case RecursionType.Normal:
            nodeChildren = node.childrenAfterGroup;
            break;
          case RecursionType.AfterFilter:
            nodeChildren = node.childrenAfterAggFilter;
            break;
          case RecursionType.AfterFilterAndSort:
            nodeChildren = node.childrenAfterSort;
            break;
          case RecursionType.PivotNodes:
            nodeChildren = !node.leafGroup ? node.childrenAfterSort : null;
            break;
        }
        if (nodeChildren) {
          index = this.recursivelyWalkNodesAndCallback(nodeChildren, callback, recursionType, index);
        }
      }
    }
    return index;
  };
  ClientSideRowModel2.prototype.doAggregate = function(changedPath) {
    if (this.aggregationStage) {
      this.aggregationStage.execute({ rowNode: this.rootNode, changedPath });
    }
  };
  ClientSideRowModel2.prototype.doFilterAggregates = function(changedPath) {
    if (this.filterAggregatesStage) {
      this.filterAggregatesStage.execute({ rowNode: this.rootNode, changedPath });
    } else {
      this.rootNode.childrenAfterAggFilter = this.rootNode.childrenAfterFilter;
    }
  };
  ClientSideRowModel2.prototype.expandOrCollapseAll = function(expand) {
    var usingTreeData = this.gridOptionsWrapper.isTreeData();
    var usingPivotMode = this.columnModel.isPivotActive();
    var recursiveExpandOrCollapse = function(rowNodes) {
      if (!rowNodes) {
        return;
      }
      rowNodes.forEach(function(rowNode) {
        var actionRow = function() {
          rowNode.expanded = expand;
          recursiveExpandOrCollapse(rowNode.childrenAfterGroup);
        };
        if (usingTreeData) {
          var hasChildren = _.exists(rowNode.childrenAfterGroup);
          if (hasChildren) {
            actionRow();
          }
          return;
        }
        if (usingPivotMode) {
          var notLeafGroup = !rowNode.leafGroup;
          if (notLeafGroup) {
            actionRow();
          }
          return;
        }
        var isRowGroup = rowNode.group;
        if (isRowGroup) {
          actionRow();
        }
      });
    };
    if (this.rootNode) {
      recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup);
    }
    this.refreshModel({ step: ClientSideRowModelSteps.MAP });
    var eventSource = expand ? "expandAll" : "collapseAll";
    var event = {
      type: Events.EVENT_EXPAND_COLLAPSE_ALL,
      source: eventSource
    };
    this.eventService.dispatchEvent(event);
  };
  ClientSideRowModel2.prototype.doSort = function(rowNodeTransactions, changedPath) {
    this.sortStage.execute({
      rowNode: this.rootNode,
      rowNodeTransactions,
      changedPath
    });
  };
  ClientSideRowModel2.prototype.doRowGrouping = function(groupState, rowNodeTransactions, rowNodeOrder, changedPath, afterColumnsChanged) {
    if (this.groupStage) {
      if (rowNodeTransactions) {
        this.groupStage.execute({
          rowNode: this.rootNode,
          rowNodeTransactions,
          rowNodeOrder,
          changedPath
        });
      } else {
        this.groupStage.execute({
          rowNode: this.rootNode,
          changedPath,
          afterColumnsChanged
        });
        this.restoreGroupState(groupState);
      }
      if (this.gridOptionsWrapper.isGroupSelectsChildren()) {
        this.selectionService.updateGroupsFromChildrenSelections(changedPath);
      }
    } else {
      this.rootNode.childrenAfterGroup = this.rootNode.allLeafChildren;
      if (this.rootNode.sibling) {
        this.rootNode.sibling.childrenAfterGroup = this.rootNode.childrenAfterGroup;
      }
      this.rootNode.updateHasChildren();
    }
  };
  ClientSideRowModel2.prototype.restoreGroupState = function(groupState) {
    if (!groupState) {
      return;
    }
    _.traverseNodesWithKey(this.rootNode.childrenAfterGroup, function(node, key) {
      if (typeof groupState[key] === "boolean") {
        node.expanded = groupState[key];
      }
    });
  };
  ClientSideRowModel2.prototype.doFilter = function(changedPath) {
    this.filterStage.execute({ rowNode: this.rootNode, changedPath });
  };
  ClientSideRowModel2.prototype.doPivot = function(changedPath) {
    if (this.pivotStage) {
      this.pivotStage.execute({ rowNode: this.rootNode, changedPath });
    }
  };
  ClientSideRowModel2.prototype.getGroupState = function() {
    if (!this.rootNode.childrenAfterGroup || !this.gridOptionsWrapper.isRememberGroupStateWhenNewData()) {
      return null;
    }
    var result = {};
    _.traverseNodesWithKey(this.rootNode.childrenAfterGroup, function(node, key) {
      return result[key] = node.expanded;
    });
    return result;
  };
  ClientSideRowModel2.prototype.getCopyOfNodesMap = function() {
    return this.nodeManager.getCopyOfNodesMap();
  };
  ClientSideRowModel2.prototype.getRowNode = function(id) {
    var idIsGroup = typeof id == "string" && id.indexOf(RowNode.ID_PREFIX_ROW_GROUP) == 0;
    if (idIsGroup) {
      var res_1 = void 0;
      this.forEachNode(function(node) {
        if (node.id === id) {
          res_1 = node;
        }
      });
      return res_1;
    }
    return this.nodeManager.getRowNode(id);
  };
  ClientSideRowModel2.prototype.setRowData = function(rowData) {
    var groupState = this.getGroupState();
    this.nodeManager.setRowData(rowData);
    this.selectionService.reset();
    this.filterManager.onNewRowsLoaded("rowDataUpdated");
    var rowDataUpdatedEvent = {
      type: Events.EVENT_ROW_DATA_UPDATED
    };
    this.eventService.dispatchEvent(rowDataUpdatedEvent);
    this.refreshModel({
      step: ClientSideRowModelSteps.EVERYTHING,
      groupState,
      newData: true
    });
  };
  ClientSideRowModel2.prototype.batchUpdateRowData = function(rowDataTransaction, callback) {
    var _this = this;
    if (this.applyAsyncTransactionsTimeout == null) {
      this.rowDataTransactionBatch = [];
      var waitMillis = this.gridOptionsWrapper.getAsyncTransactionWaitMillis();
      this.applyAsyncTransactionsTimeout = window.setTimeout(function() {
        _this.executeBatchUpdateRowData();
      }, waitMillis);
    }
    this.rowDataTransactionBatch.push({ rowDataTransaction, callback });
  };
  ClientSideRowModel2.prototype.flushAsyncTransactions = function() {
    if (this.applyAsyncTransactionsTimeout != null) {
      clearTimeout(this.applyAsyncTransactionsTimeout);
      this.executeBatchUpdateRowData();
    }
  };
  ClientSideRowModel2.prototype.executeBatchUpdateRowData = function() {
    var _this = this;
    this.valueCache.onDataChanged();
    var callbackFuncsBound = [];
    var rowNodeTrans = [];
    var forceRowNodeOrder = false;
    if (this.rowDataTransactionBatch) {
      this.rowDataTransactionBatch.forEach(function(tranItem) {
        var rowNodeTran = _this.nodeManager.updateRowData(tranItem.rowDataTransaction, void 0);
        rowNodeTrans.push(rowNodeTran);
        if (tranItem.callback) {
          callbackFuncsBound.push(tranItem.callback.bind(null, rowNodeTran));
        }
        if (typeof tranItem.rowDataTransaction.addIndex === "number") {
          forceRowNodeOrder = true;
        }
      });
    }
    this.commonUpdateRowData(rowNodeTrans, void 0, forceRowNodeOrder);
    if (callbackFuncsBound.length > 0) {
      window.setTimeout(function() {
        callbackFuncsBound.forEach(function(func) {
          return func();
        });
      }, 0);
    }
    if (rowNodeTrans.length > 0) {
      var event_1 = {
        type: Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,
        results: rowNodeTrans
      };
      this.eventService.dispatchEvent(event_1);
    }
    this.rowDataTransactionBatch = null;
    this.applyAsyncTransactionsTimeout = void 0;
  };
  ClientSideRowModel2.prototype.updateRowData = function(rowDataTran, rowNodeOrder) {
    this.valueCache.onDataChanged();
    var rowNodeTran = this.nodeManager.updateRowData(rowDataTran, rowNodeOrder);
    var forceRowNodeOrder = typeof rowDataTran.addIndex === "number";
    this.commonUpdateRowData([rowNodeTran], rowNodeOrder, forceRowNodeOrder);
    return rowNodeTran;
  };
  ClientSideRowModel2.prototype.createRowNodeOrder = function() {
    var suppressSortOrder = this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder();
    if (suppressSortOrder) {
      return;
    }
    var orderMap = {};
    if (this.rootNode && this.rootNode.allLeafChildren) {
      for (var index = 0; index < this.rootNode.allLeafChildren.length; index++) {
        var node = this.rootNode.allLeafChildren[index];
        orderMap[node.id] = index;
      }
    }
    return orderMap;
  };
  ClientSideRowModel2.prototype.commonUpdateRowData = function(rowNodeTrans, rowNodeOrder, forceRowNodeOrder) {
    var animate = !this.gridOptionsWrapper.isSuppressAnimationFrame();
    if (forceRowNodeOrder) {
      rowNodeOrder = this.createRowNodeOrder();
    }
    this.refreshModel({
      step: ClientSideRowModelSteps.EVERYTHING,
      rowNodeTransactions: rowNodeTrans,
      rowNodeOrder,
      keepRenderedRows: true,
      keepEditingRows: true,
      animate
    });
    this.filterManager.onNewRowsLoaded("rowDataUpdated");
    var event = {
      type: Events.EVENT_ROW_DATA_UPDATED
    };
    this.eventService.dispatchEvent(event);
  };
  ClientSideRowModel2.prototype.doRowsToDisplay = function() {
    this.rowsToDisplay = this.flattenStage.execute({ rowNode: this.rootNode });
  };
  ClientSideRowModel2.prototype.onRowHeightChanged = function() {
    this.refreshModel({ step: ClientSideRowModelSteps.MAP, keepRenderedRows: true, keepEditingRows: true, keepUndoRedoStack: true });
  };
  ClientSideRowModel2.prototype.resetRowHeights = function() {
    var atLeastOne = false;
    this.forEachNode(function(rowNode) {
      rowNode.setRowHeight(rowNode.rowHeight, true);
      var detailNode = rowNode.detailNode;
      if (detailNode) {
        detailNode.setRowHeight(detailNode.rowHeight, true);
      }
      atLeastOne = true;
    });
    if (atLeastOne) {
      this.onRowHeightChanged();
    }
  };
  __decorate$b([
    Autowired("columnModel")
  ], ClientSideRowModel2.prototype, "columnModel", void 0);
  __decorate$b([
    Autowired("selectionService")
  ], ClientSideRowModel2.prototype, "selectionService", void 0);
  __decorate$b([
    Autowired("filterManager")
  ], ClientSideRowModel2.prototype, "filterManager", void 0);
  __decorate$b([
    Autowired("valueCache")
  ], ClientSideRowModel2.prototype, "valueCache", void 0);
  __decorate$b([
    Autowired("beans")
  ], ClientSideRowModel2.prototype, "beans", void 0);
  __decorate$b([
    Autowired("filterStage")
  ], ClientSideRowModel2.prototype, "filterStage", void 0);
  __decorate$b([
    Autowired("sortStage")
  ], ClientSideRowModel2.prototype, "sortStage", void 0);
  __decorate$b([
    Autowired("flattenStage")
  ], ClientSideRowModel2.prototype, "flattenStage", void 0);
  __decorate$b([
    Optional("groupStage")
  ], ClientSideRowModel2.prototype, "groupStage", void 0);
  __decorate$b([
    Optional("aggregationStage")
  ], ClientSideRowModel2.prototype, "aggregationStage", void 0);
  __decorate$b([
    Optional("pivotStage")
  ], ClientSideRowModel2.prototype, "pivotStage", void 0);
  __decorate$b([
    Optional("filterAggregatesStage")
  ], ClientSideRowModel2.prototype, "filterAggregatesStage", void 0);
  __decorate$b([
    PostConstruct
  ], ClientSideRowModel2.prototype, "init", null);
  ClientSideRowModel2 = __decorate$b([
    Bean("rowModel")
  ], ClientSideRowModel2);
  return ClientSideRowModel2;
}(BeanStub);
var __extends$b = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$a = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FilterStage = function(_super) {
  __extends$b(FilterStage2, _super);
  function FilterStage2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  FilterStage2.prototype.execute = function(params) {
    var changedPath = params.changedPath;
    this.filterService.filter(changedPath);
  };
  __decorate$a([
    Autowired("filterService")
  ], FilterStage2.prototype, "filterService", void 0);
  FilterStage2 = __decorate$a([
    Bean("filterStage")
  ], FilterStage2);
  return FilterStage2;
}(BeanStub);
var __extends$a = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$9 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SortStage = function(_super) {
  __extends$a(SortStage2, _super);
  function SortStage2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SortStage2.prototype.execute = function(params) {
    var _this = this;
    var sortOptions = this.sortController.getSortOptions();
    var sortActive = _.exists(sortOptions) && sortOptions.length > 0;
    var deltaSort = sortActive && _.exists(params.rowNodeTransactions) && this.gridOptionsWrapper.isDeltaSort();
    var sortContainsGroupColumns = sortOptions.some(function(opt) {
      return !!_this.columnModel.getGroupDisplayColumnForGroup(opt.column.getId());
    });
    this.sortService.sort(sortOptions, sortActive, deltaSort, params.rowNodeTransactions, params.changedPath, sortContainsGroupColumns);
  };
  __decorate$9([
    Autowired("sortService")
  ], SortStage2.prototype, "sortService", void 0);
  __decorate$9([
    Autowired("sortController")
  ], SortStage2.prototype, "sortController", void 0);
  __decorate$9([
    Autowired("columnModel")
  ], SortStage2.prototype, "columnModel", void 0);
  SortStage2 = __decorate$9([
    Bean("sortStage")
  ], SortStage2);
  return SortStage2;
}(BeanStub);
var __extends$9 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$8 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FlattenStage = function(_super) {
  __extends$9(FlattenStage2, _super);
  function FlattenStage2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  FlattenStage2.prototype.execute = function(params) {
    var rootNode = params.rowNode;
    var result = [];
    var nextRowTop = { value: 0 };
    var skipLeafNodes = this.columnModel.isPivotMode();
    var showRootNode = skipLeafNodes && rootNode.leafGroup;
    var topList = showRootNode ? [rootNode] : rootNode.childrenAfterSort;
    this.recursivelyAddToRowsToDisplay(topList, result, nextRowTop, skipLeafNodes, 0);
    var atLeastOneRowPresent = result.length > 0;
    var includeGroupTotalFooter = !showRootNode && atLeastOneRowPresent && this.gridOptionsWrapper.isGroupIncludeTotalFooter();
    if (includeGroupTotalFooter) {
      this.ensureFooterNodeExists(rootNode);
      this.addRowNodeToRowsToDisplay(rootNode.sibling, result, nextRowTop, 0);
    }
    return result;
  };
  FlattenStage2.prototype.recursivelyAddToRowsToDisplay = function(rowsToFlatten, result, nextRowTop, skipLeafNodes, uiLevel) {
    if (_.missingOrEmpty(rowsToFlatten)) {
      return;
    }
    var hideOpenParents = this.gridOptionsWrapper.isGroupHideOpenParents();
    var groupRemoveSingleChildren = this.gridOptionsWrapper.isGroupRemoveSingleChildren();
    var groupRemoveLowestSingleChildren = !groupRemoveSingleChildren && this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren();
    for (var i2 = 0; i2 < rowsToFlatten.length; i2++) {
      var rowNode = rowsToFlatten[i2];
      var isParent = rowNode.hasChildren();
      var isSkippedLeafNode = skipLeafNodes && !isParent;
      var isRemovedSingleChildrenGroup = groupRemoveSingleChildren && isParent && rowNode.childrenAfterGroup.length === 1;
      var isRemovedLowestSingleChildrenGroup = groupRemoveLowestSingleChildren && isParent && rowNode.leafGroup && rowNode.childrenAfterGroup.length === 1;
      var neverAllowToExpand = skipLeafNodes && rowNode.leafGroup;
      var isHiddenOpenParent = hideOpenParents && rowNode.expanded && !rowNode.master && !neverAllowToExpand;
      var thisRowShouldBeRendered = !isSkippedLeafNode && !isHiddenOpenParent && !isRemovedSingleChildrenGroup && !isRemovedLowestSingleChildrenGroup;
      if (thisRowShouldBeRendered) {
        this.addRowNodeToRowsToDisplay(rowNode, result, nextRowTop, uiLevel);
      }
      if (skipLeafNodes && rowNode.leafGroup) {
        continue;
      }
      if (isParent) {
        var excludedParent = isRemovedSingleChildrenGroup || isRemovedLowestSingleChildrenGroup;
        if (rowNode.expanded || excludedParent) {
          var uiLevelForChildren = excludedParent ? uiLevel : uiLevel + 1;
          this.recursivelyAddToRowsToDisplay(rowNode.childrenAfterSort, result, nextRowTop, skipLeafNodes, uiLevelForChildren);
          if (this.gridOptionsWrapper.isGroupIncludeFooter()) {
            this.ensureFooterNodeExists(rowNode);
            this.addRowNodeToRowsToDisplay(rowNode.sibling, result, nextRowTop, uiLevel);
          }
        }
      } else if (rowNode.master && rowNode.expanded) {
        var detailNode = this.createDetailNode(rowNode);
        this.addRowNodeToRowsToDisplay(detailNode, result, nextRowTop, uiLevel);
      }
    }
  };
  FlattenStage2.prototype.addRowNodeToRowsToDisplay = function(rowNode, result, nextRowTop, uiLevel) {
    var isGroupMultiAutoColumn = this.gridOptionsWrapper.isGroupMultiAutoColumn();
    result.push(rowNode);
    rowNode.setUiLevel(isGroupMultiAutoColumn ? 0 : uiLevel);
  };
  FlattenStage2.prototype.ensureFooterNodeExists = function(groupNode) {
    if (_.exists(groupNode.sibling)) {
      return;
    }
    var footerNode = new RowNode(this.beans);
    Object.keys(groupNode).forEach(function(key) {
      footerNode[key] = groupNode[key];
    });
    footerNode.footer = true;
    footerNode.setRowTop(null);
    footerNode.setRowIndex(null);
    footerNode.oldRowTop = null;
    if (_.exists(footerNode.id)) {
      footerNode.id = "rowGroupFooter_" + footerNode.id;
    }
    footerNode.sibling = groupNode;
    groupNode.sibling = footerNode;
  };
  FlattenStage2.prototype.createDetailNode = function(masterNode) {
    if (_.exists(masterNode.detailNode)) {
      return masterNode.detailNode;
    }
    var detailNode = new RowNode(this.beans);
    detailNode.detail = true;
    detailNode.selectable = false;
    detailNode.parent = masterNode;
    if (_.exists(masterNode.id)) {
      detailNode.id = "detail_" + masterNode.id;
    }
    detailNode.data = masterNode.data;
    detailNode.level = masterNode.level + 1;
    masterNode.detailNode = detailNode;
    return detailNode;
  };
  __decorate$8([
    Autowired("columnModel")
  ], FlattenStage2.prototype, "columnModel", void 0);
  __decorate$8([
    Autowired("beans")
  ], FlattenStage2.prototype, "beans", void 0);
  FlattenStage2 = __decorate$8([
    Bean("flattenStage")
  ], FlattenStage2);
  return FlattenStage2;
}(BeanStub);
var __extends$8 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$7 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var SortService = function(_super) {
  __extends$8(SortService2, _super);
  function SortService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SortService2.prototype.init = function() {
    this.postSortFunc = this.gridOptionsWrapper.getPostSortFunc();
  };
  SortService2.prototype.sort = function(sortOptions, sortActive, useDeltaSort, rowNodeTransactions, changedPath, sortContainsGroupColumns) {
    var _this = this;
    var groupMaintainOrder = this.gridOptionsWrapper.isGroupMaintainOrder();
    var groupColumnsPresent = this.columnModel.getAllGridColumns().some(function(c2) {
      return c2.isRowGroupActive();
    });
    var allDirtyNodes = {};
    if (useDeltaSort && rowNodeTransactions) {
      allDirtyNodes = this.calculateDirtyNodes(rowNodeTransactions);
    }
    var isPivotMode = this.columnModel.isPivotMode();
    var callback = function(rowNode) {
      _this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter, true);
      var skipSortingPivotLeafs = isPivotMode && rowNode.leafGroup;
      var skipSortingGroups = groupMaintainOrder && groupColumnsPresent && !rowNode.leafGroup && !sortContainsGroupColumns;
      if (!sortActive || skipSortingGroups || skipSortingPivotLeafs) {
        var childrenToBeSorted = rowNode.childrenAfterAggFilter.slice(0);
        if (groupMaintainOrder && rowNode.childrenAfterSort) {
          var indexedOrders_1 = rowNode.childrenAfterSort.reduce(function(acc, row, idx) {
            acc[row.id] = idx;
            return acc;
          }, {});
          childrenToBeSorted.sort(function(row1, row2) {
            return (indexedOrders_1[row1.id] || 0) - (indexedOrders_1[row2.id] || 0);
          });
        }
        rowNode.childrenAfterSort = childrenToBeSorted;
      } else if (useDeltaSort) {
        rowNode.childrenAfterSort = _this.doDeltaSort(rowNode, allDirtyNodes, changedPath, sortOptions);
      } else {
        rowNode.childrenAfterSort = _this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter, sortOptions);
      }
      if (rowNode.sibling) {
        rowNode.sibling.childrenAfterSort = rowNode.childrenAfterSort;
      }
      _this.updateChildIndexes(rowNode);
      if (_this.postSortFunc) {
        var params = { nodes: rowNode.childrenAfterSort };
        _this.postSortFunc(params);
      }
    };
    if (changedPath) {
      changedPath.forEachChangedNodeDepthFirst(callback);
    }
    this.updateGroupDataForHideOpenParents(changedPath);
  };
  SortService2.prototype.calculateDirtyNodes = function(rowNodeTransactions) {
    var dirtyNodes = {};
    var addNodesFunc = function(rowNodes) {
      if (rowNodes) {
        rowNodes.forEach(function(rowNode) {
          return dirtyNodes[rowNode.id] = true;
        });
      }
    };
    if (rowNodeTransactions) {
      rowNodeTransactions.forEach(function(tran) {
        addNodesFunc(tran.add);
        addNodesFunc(tran.update);
        addNodesFunc(tran.remove);
      });
    }
    return dirtyNodes;
  };
  SortService2.prototype.doDeltaSort = function(rowNode, allTouchedNodes, changedPath, sortOptions) {
    var _this = this;
    var unsortedRows = rowNode.childrenAfterAggFilter;
    var oldSortedRows = rowNode.childrenAfterSort;
    if (!oldSortedRows) {
      return this.rowNodeSorter.doFullSort(unsortedRows, sortOptions);
    }
    var untouchedRowsMap = {};
    var touchedRows = [];
    unsortedRows.forEach(function(row) {
      if (allTouchedNodes[row.id] || !changedPath.canSkip(row)) {
        touchedRows.push(row);
      } else {
        untouchedRowsMap[row.id] = true;
      }
    });
    var sortedUntouchedRows = oldSortedRows.filter(function(child) {
      return untouchedRowsMap[child.id];
    });
    var mapNodeToSortedNode = function(rowNode2, pos) {
      return { currentPos: pos, rowNode: rowNode2 };
    };
    var sortedChangedRows = touchedRows.map(mapNodeToSortedNode).sort(function(a3, b2) {
      return _this.rowNodeSorter.compareRowNodes(sortOptions, a3, b2);
    });
    return this.mergeSortedArrays(sortOptions, sortedChangedRows, sortedUntouchedRows.map(mapNodeToSortedNode)).map(function(_a2) {
      var rowNode2 = _a2.rowNode;
      return rowNode2;
    });
  };
  SortService2.prototype.mergeSortedArrays = function(sortOptions, arr1, arr2) {
    var res = [];
    var i2 = 0;
    var j = 0;
    while (i2 < arr1.length && j < arr2.length) {
      var compareResult = this.rowNodeSorter.compareRowNodes(sortOptions, arr1[i2], arr2[j]);
      if (compareResult < 0) {
        res.push(arr1[i2++]);
      } else {
        res.push(arr2[j++]);
      }
    }
    while (i2 < arr1.length) {
      res.push(arr1[i2++]);
    }
    while (j < arr2.length) {
      res.push(arr2[j++]);
    }
    return res;
  };
  SortService2.prototype.updateChildIndexes = function(rowNode) {
    if (_.missing(rowNode.childrenAfterSort)) {
      return;
    }
    var listToSort = rowNode.childrenAfterSort;
    for (var i2 = 0; i2 < listToSort.length; i2++) {
      var child = listToSort[i2];
      var firstChild = i2 === 0;
      var lastChild = i2 === rowNode.childrenAfterSort.length - 1;
      child.setFirstChild(firstChild);
      child.setLastChild(lastChild);
      child.setChildIndex(i2);
    }
  };
  SortService2.prototype.updateGroupDataForHideOpenParents = function(changedPath) {
    var _this = this;
    if (!this.gridOptionsWrapper.isGroupHideOpenParents()) {
      return;
    }
    if (this.gridOptionsWrapper.isTreeData()) {
      var msg_1 = "AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";
      _.doOnce(function() {
        return console.warn(msg_1);
      }, "sortService.hideOpenParentsWithTreeData");
      return false;
    }
    var callback = function(rowNode) {
      _this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort, false);
      rowNode.childrenAfterSort.forEach(function(child) {
        if (child.hasChildren()) {
          callback(child);
        }
      });
    };
    if (changedPath) {
      changedPath.executeFromRootNode(function(rowNode) {
        return callback(rowNode);
      });
    }
  };
  SortService2.prototype.pullDownGroupDataForHideOpenParents = function(rowNodes, clearOperation) {
    var _this = this;
    if (!this.gridOptionsWrapper.isGroupHideOpenParents() || _.missing(rowNodes)) {
      return;
    }
    rowNodes.forEach(function(childRowNode) {
      var groupDisplayCols = _this.columnModel.getGroupDisplayColumns();
      groupDisplayCols.forEach(function(groupDisplayCol) {
        var showRowGroup = groupDisplayCol.getColDef().showRowGroup;
        if (typeof showRowGroup !== "string") {
          console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");
          return;
        }
        var displayingGroupKey = showRowGroup;
        var rowGroupColumn = _this.columnModel.getPrimaryColumn(displayingGroupKey);
        var thisRowNodeMatches = rowGroupColumn === childRowNode.rowGroupColumn;
        if (thisRowNodeMatches) {
          return;
        }
        if (clearOperation) {
          childRowNode.setGroupValue(groupDisplayCol.getId(), void 0);
        } else {
          var parentToStealFrom = childRowNode.getFirstChildOfFirstChild(rowGroupColumn);
          if (parentToStealFrom) {
            childRowNode.setGroupValue(groupDisplayCol.getId(), parentToStealFrom.key);
          }
        }
      });
    });
  };
  __decorate$7([
    Autowired("columnModel")
  ], SortService2.prototype, "columnModel", void 0);
  __decorate$7([
    Autowired("rowNodeSorter")
  ], SortService2.prototype, "rowNodeSorter", void 0);
  __decorate$7([
    PostConstruct
  ], SortService2.prototype, "init", null);
  SortService2 = __decorate$7([
    Bean("sortService")
  ], SortService2);
  return SortService2;
}(BeanStub);
var __extends$7 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$6 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var FilterService = function(_super) {
  __extends$7(FilterService2, _super);
  function FilterService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  FilterService2.prototype.filter = function(changedPath) {
    var filterActive = this.filterManager.isColumnFilterPresent() || this.filterManager.isQuickFilterPresent() || this.filterManager.isExternalFilterPresent();
    this.filterNodes(filterActive, changedPath);
  };
  FilterService2.prototype.filterNodes = function(filterActive, changedPath) {
    var _this = this;
    var filterCallback = function(rowNode, includeChildNodes) {
      if (rowNode.hasChildren()) {
        if (filterActive && !includeChildNodes) {
          rowNode.childrenAfterFilter = rowNode.childrenAfterGroup.filter(function(childNode) {
            var passBecauseChildren = childNode.childrenAfterFilter && childNode.childrenAfterFilter.length > 0;
            var passBecauseDataPasses = childNode.data && _this.filterManager.doesRowPassFilter({ rowNode: childNode });
            return passBecauseChildren || passBecauseDataPasses;
          });
        } else {
          rowNode.childrenAfterFilter = rowNode.childrenAfterGroup;
        }
      } else {
        rowNode.childrenAfterFilter = rowNode.childrenAfterGroup;
      }
      if (rowNode.sibling) {
        rowNode.sibling.childrenAfterFilter = rowNode.childrenAfterFilter;
      }
    };
    if (this.doingTreeDataFiltering()) {
      var treeDataDepthFirstFilter_1 = function(rowNode, alreadyFoundInParent) {
        if (rowNode.childrenAfterGroup) {
          for (var i2 = 0; i2 < rowNode.childrenAfterGroup.length; i2++) {
            var childNode = rowNode.childrenAfterGroup[i2];
            var foundInParent = alreadyFoundInParent || _this.filterManager.doesRowPassFilter({ rowNode: childNode });
            if (childNode.childrenAfterGroup) {
              treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i2], foundInParent);
            } else {
              filterCallback(childNode, foundInParent);
            }
          }
        }
        filterCallback(rowNode, alreadyFoundInParent);
      };
      var treeDataFilterCallback = function(rowNode) {
        return treeDataDepthFirstFilter_1(rowNode, false);
      };
      changedPath.executeFromRootNode(treeDataFilterCallback);
    } else {
      var defaultFilterCallback = function(rowNode) {
        return filterCallback(rowNode, false);
      };
      changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback, true);
    }
  };
  FilterService2.prototype.doingTreeDataFiltering = function() {
    return this.gridOptionsWrapper.isTreeData() && !this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering();
  };
  __decorate$6([
    Autowired("filterManager")
  ], FilterService2.prototype, "filterManager", void 0);
  FilterService2 = __decorate$6([
    Bean("filterService")
  ], FilterService2);
  return FilterService2;
}(BeanStub);
var __extends$6 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$5 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __read = function(o, n) {
  var m3 = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m3)
    return o;
  var i2 = m3.call(o), r, ar = [], e2;
  try {
    while ((n === void 0 || n-- > 0) && !(r = i2.next()).done)
      ar.push(r.value);
  } catch (error) {
    e2 = { error };
  } finally {
    try {
      if (r && !r.done && (m3 = i2["return"]))
        m3.call(i2);
    } finally {
      if (e2)
        throw e2.error;
    }
  }
  return ar;
};
var ImmutableService = function(_super) {
  __extends$6(ImmutableService2, _super);
  function ImmutableService2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ImmutableService2.prototype.postConstruct = function() {
    if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
      this.clientSideRowModel = this.rowModel;
    }
  };
  ImmutableService2.prototype.isActive = function() {
    return this.gridOptionsWrapper.isImmutableData();
  };
  ImmutableService2.prototype.setRowData = function(rowData) {
    var transactionAndMap = this.createTransactionForRowData(rowData);
    if (!transactionAndMap) {
      return;
    }
    var _a2 = __read(transactionAndMap, 2), transaction = _a2[0], orderIdMap = _a2[1];
    var nodeTransaction = this.clientSideRowModel.updateRowData(transaction, orderIdMap);
    if (nodeTransaction) {
      this.rowRenderer.refreshFullWidthRows(nodeTransaction.update);
    }
  };
  ImmutableService2.prototype.createTransactionForRowData = function(rowData) {
    if (_.missing(this.clientSideRowModel)) {
      console.error("AG Grid: ImmutableService only works with ClientSideRowModel");
      return;
    }
    var getRowIdFunc = this.gridOptionsWrapper.getRowIdFunc();
    if (getRowIdFunc == null) {
      console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");
      return;
    }
    var transaction = {
      remove: [],
      update: [],
      add: []
    };
    var existingNodesMap = this.clientSideRowModel.getCopyOfNodesMap();
    var suppressSortOrder = this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder();
    var orderMap = suppressSortOrder ? void 0 : {};
    if (_.exists(rowData)) {
      rowData.forEach(function(data, index) {
        var id = getRowIdFunc({ data, level: 0 });
        var existingNode = existingNodesMap[id];
        if (orderMap) {
          orderMap[id] = index;
        }
        if (existingNode) {
          var dataHasChanged = existingNode.data !== data;
          if (dataHasChanged) {
            transaction.update.push(data);
          }
          existingNodesMap[id] = void 0;
        } else {
          transaction.add.push(data);
        }
      });
    }
    _.iterateObject(existingNodesMap, function(id, rowNode) {
      if (rowNode) {
        transaction.remove.push(rowNode.data);
      }
    });
    return [transaction, orderMap];
  };
  __decorate$5([
    Autowired("rowModel")
  ], ImmutableService2.prototype, "rowModel", void 0);
  __decorate$5([
    Autowired("rowRenderer")
  ], ImmutableService2.prototype, "rowRenderer", void 0);
  __decorate$5([
    Autowired("columnApi")
  ], ImmutableService2.prototype, "columnApi", void 0);
  __decorate$5([
    Autowired("gridApi")
  ], ImmutableService2.prototype, "gridApi", void 0);
  __decorate$5([
    Autowired("filterManager")
  ], ImmutableService2.prototype, "filterManager", void 0);
  __decorate$5([
    PostConstruct
  ], ImmutableService2.prototype, "postConstruct", null);
  ImmutableService2 = __decorate$5([
    Bean("immutableService")
  ], ImmutableService2);
  return ImmutableService2;
}(BeanStub);
var ClientSideRowModelModule = {
  moduleName: ModuleNames.ClientSideRowModelModule,
  beans: [FilterStage, SortStage, FlattenStage, SortService, FilterService, ImmutableService],
  rowModels: { clientSide: ClientSideRowModel }
};
var __extends$5 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$4 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var InfiniteBlock = function(_super) {
  __extends$5(InfiniteBlock2, _super);
  function InfiniteBlock2(id, parentCache, params) {
    var _this = _super.call(this, id) || this;
    _this.parentCache = parentCache;
    _this.params = params;
    _this.startRow = id * params.blockSize;
    _this.endRow = _this.startRow + params.blockSize;
    return _this;
  }
  InfiniteBlock2.prototype.postConstruct = function() {
    this.createRowNodes();
  };
  InfiniteBlock2.prototype.getBlockStateJson = function() {
    return {
      id: "" + this.getId(),
      state: {
        blockNumber: this.getId(),
        startRow: this.getStartRow(),
        endRow: this.getEndRow(),
        pageStatus: this.getState()
      }
    };
  };
  InfiniteBlock2.prototype.setDataAndId = function(rowNode, data, index) {
    if (!rowNode.id && rowNode.alreadyRendered) {
      rowNode.alreadyRendered = false;
    }
    if (_.exists(data)) {
      rowNode.setDataAndId(data, index.toString());
    } else {
      rowNode.setDataAndId(void 0, void 0);
    }
  };
  InfiniteBlock2.prototype.loadFromDatasource = function() {
    var _this = this;
    var params = this.createLoadParams();
    if (_.missing(this.params.datasource.getRows)) {
      console.warn("AG Grid: datasource is missing getRows method");
      return;
    }
    window.setTimeout(function() {
      _this.params.datasource.getRows(params);
    }, 0);
  };
  InfiniteBlock2.prototype.processServerFail = function() {
  };
  InfiniteBlock2.prototype.createLoadParams = function() {
    var params = {
      startRow: this.getStartRow(),
      endRow: this.getEndRow(),
      successCallback: this.pageLoaded.bind(this, this.getVersion()),
      failCallback: this.pageLoadFailed.bind(this, this.getVersion()),
      sortModel: this.params.sortModel,
      filterModel: this.params.filterModel,
      context: this.gridOptionsWrapper.getContext()
    };
    return params;
  };
  InfiniteBlock2.prototype.forEachNode = function(callback, sequence, rowCount) {
    var _this = this;
    this.rowNodes.forEach(function(rowNode, index) {
      var rowIndex = _this.startRow + index;
      if (rowIndex < rowCount) {
        callback(rowNode, sequence.next());
      }
    });
  };
  InfiniteBlock2.prototype.getLastAccessed = function() {
    return this.lastAccessed;
  };
  InfiniteBlock2.prototype.getRow = function(rowIndex, dontTouchLastAccessed) {
    if (dontTouchLastAccessed === void 0) {
      dontTouchLastAccessed = false;
    }
    if (!dontTouchLastAccessed) {
      this.lastAccessed = this.params.lastAccessedSequence.next();
    }
    var localIndex = rowIndex - this.startRow;
    return this.rowNodes[localIndex];
  };
  InfiniteBlock2.prototype.getStartRow = function() {
    return this.startRow;
  };
  InfiniteBlock2.prototype.getEndRow = function() {
    return this.endRow;
  };
  InfiniteBlock2.prototype.createRowNodes = function() {
    this.rowNodes = [];
    for (var i2 = 0; i2 < this.params.blockSize; i2++) {
      var rowIndex = this.startRow + i2;
      var rowNode = new RowNode(this.beans);
      rowNode.setRowHeight(this.params.rowHeight);
      rowNode.uiLevel = 0;
      rowNode.setRowIndex(rowIndex);
      rowNode.setRowTop(this.params.rowHeight * rowIndex);
      this.rowNodes.push(rowNode);
    }
  };
  InfiniteBlock2.prototype.processServerResult = function(params) {
    var _this = this;
    this.rowNodes.forEach(function(rowNode, index) {
      var data = params.rowData ? params.rowData[index] : void 0;
      _this.setDataAndId(rowNode, data, _this.startRow + index);
    });
    var finalRowCount = params.rowCount != null && params.rowCount >= 0 ? params.rowCount : void 0;
    this.parentCache.pageLoaded(this, finalRowCount);
  };
  InfiniteBlock2.prototype.destroyRowNodes = function() {
    this.rowNodes.forEach(function(rowNode) {
      rowNode.clearRowTopAndRowIndex();
    });
  };
  __decorate$4([
    Autowired("beans")
  ], InfiniteBlock2.prototype, "beans", void 0);
  __decorate$4([
    PostConstruct
  ], InfiniteBlock2.prototype, "postConstruct", null);
  __decorate$4([
    PreDestroy
  ], InfiniteBlock2.prototype, "destroyRowNodes", null);
  return InfiniteBlock2;
}(RowNodeBlock);
var __extends$4 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$3 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = function(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
};
var InfiniteCache = function(_super) {
  __extends$4(InfiniteCache2, _super);
  function InfiniteCache2(params) {
    var _this = _super.call(this) || this;
    _this.lastRowIndexKnown = false;
    _this.blocks = {};
    _this.blockCount = 0;
    _this.rowCount = params.initialRowCount;
    _this.params = params;
    return _this;
  }
  InfiniteCache2.prototype.setBeans = function(loggerFactory) {
    this.logger = loggerFactory.create("InfiniteCache");
  };
  InfiniteCache2.prototype.getRow = function(rowIndex, dontCreatePage) {
    if (dontCreatePage === void 0) {
      dontCreatePage = false;
    }
    var blockId = Math.floor(rowIndex / this.params.blockSize);
    var block = this.blocks[blockId];
    if (!block) {
      if (dontCreatePage) {
        return void 0;
      }
      block = this.createBlock(blockId);
    }
    return block.getRow(rowIndex);
  };
  InfiniteCache2.prototype.createBlock = function(blockNumber) {
    var newBlock = this.createBean(new InfiniteBlock(blockNumber, this, this.params));
    this.blocks[newBlock.getId()] = newBlock;
    this.blockCount++;
    this.purgeBlocksIfNeeded(newBlock);
    this.params.rowNodeBlockLoader.addBlock(newBlock);
    return newBlock;
  };
  InfiniteCache2.prototype.refreshCache = function() {
    var nothingToRefresh = this.blockCount == 0;
    if (nothingToRefresh) {
      this.purgeCache();
      return;
    }
    this.getBlocksInOrder().forEach(function(block) {
      return block.setStateWaitingToLoad();
    });
    this.params.rowNodeBlockLoader.checkBlockToLoad();
  };
  InfiniteCache2.prototype.destroyAllBlocks = function() {
    var _this = this;
    this.getBlocksInOrder().forEach(function(block) {
      return _this.destroyBlock(block);
    });
  };
  InfiniteCache2.prototype.getRowCount = function() {
    return this.rowCount;
  };
  InfiniteCache2.prototype.isLastRowIndexKnown = function() {
    return this.lastRowIndexKnown;
  };
  InfiniteCache2.prototype.pageLoaded = function(block, lastRow) {
    if (!this.isAlive()) {
      return;
    }
    this.logger.log("onPageLoaded: page = " + block.getId() + ", lastRow = " + lastRow);
    this.checkRowCount(block, lastRow);
    this.onCacheUpdated();
  };
  InfiniteCache2.prototype.purgeBlocksIfNeeded = function(blockToExclude) {
    var _this = this;
    var blocksForPurging = this.getBlocksInOrder().filter(function(b2) {
      return b2 != blockToExclude;
    });
    var lastAccessedComparator = function(a3, b2) {
      return b2.getLastAccessed() - a3.getLastAccessed();
    };
    blocksForPurging.sort(lastAccessedComparator);
    var maxBlocksProvided = this.params.maxBlocksInCache > 0;
    var blocksToKeep = maxBlocksProvided ? this.params.maxBlocksInCache - 1 : null;
    var emptyBlocksToKeep = InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP - 1;
    blocksForPurging.forEach(function(block, index) {
      var purgeBecauseBlockEmpty = block.getState() === InfiniteBlock.STATE_WAITING_TO_LOAD && index >= emptyBlocksToKeep;
      var purgeBecauseCacheFull = maxBlocksProvided ? index >= blocksToKeep : false;
      if (purgeBecauseBlockEmpty || purgeBecauseCacheFull) {
        if (_this.isBlockCurrentlyDisplayed(block)) {
          return;
        }
        if (_this.isBlockFocused(block)) {
          return;
        }
        _this.removeBlockFromCache(block);
      }
    });
  };
  InfiniteCache2.prototype.isBlockFocused = function(block) {
    var focusedCell = this.focusService.getFocusCellToUseAfterRefresh();
    if (!focusedCell) {
      return false;
    }
    if (focusedCell.rowPinned != null) {
      return false;
    }
    var blockIndexStart = block.getStartRow();
    var blockIndexEnd = block.getEndRow();
    var hasFocus = focusedCell.rowIndex >= blockIndexStart && focusedCell.rowIndex < blockIndexEnd;
    return hasFocus;
  };
  InfiniteCache2.prototype.isBlockCurrentlyDisplayed = function(block) {
    var startIndex = block.getStartRow();
    var endIndex = block.getEndRow() - 1;
    return this.rowRenderer.isRangeInRenderedViewport(startIndex, endIndex);
  };
  InfiniteCache2.prototype.removeBlockFromCache = function(blockToRemove) {
    if (!blockToRemove) {
      return;
    }
    this.destroyBlock(blockToRemove);
  };
  InfiniteCache2.prototype.checkRowCount = function(block, lastRow) {
    if (typeof lastRow === "number" && lastRow >= 0) {
      this.rowCount = lastRow;
      this.lastRowIndexKnown = true;
    } else if (!this.lastRowIndexKnown) {
      var lastRowIndex = (block.getId() + 1) * this.params.blockSize;
      var lastRowIndexPlusOverflow = lastRowIndex + this.params.overflowSize;
      if (this.rowCount < lastRowIndexPlusOverflow) {
        this.rowCount = lastRowIndexPlusOverflow;
      }
    }
  };
  InfiniteCache2.prototype.setRowCount = function(rowCount, lastRowIndexKnown) {
    this.rowCount = rowCount;
    if (_.exists(lastRowIndexKnown)) {
      this.lastRowIndexKnown = lastRowIndexKnown;
    }
    if (!this.lastRowIndexKnown) {
      if (this.rowCount % this.params.blockSize === 0) {
        this.rowCount++;
      }
    }
    this.onCacheUpdated();
  };
  InfiniteCache2.prototype.forEachNodeDeep = function(callback) {
    var _this = this;
    var sequence = new NumberSequence();
    this.getBlocksInOrder().forEach(function(block) {
      return block.forEachNode(callback, sequence, _this.rowCount);
    });
  };
  InfiniteCache2.prototype.getBlocksInOrder = function() {
    var blockComparator = function(a3, b2) {
      return a3.getId() - b2.getId();
    };
    var blocks = _.getAllValuesInObject(this.blocks).sort(blockComparator);
    return blocks;
  };
  InfiniteCache2.prototype.destroyBlock = function(block) {
    delete this.blocks[block.getId()];
    this.destroyBean(block);
    this.blockCount--;
    this.params.rowNodeBlockLoader.removeBlock(block);
  };
  InfiniteCache2.prototype.onCacheUpdated = function() {
    if (this.isAlive()) {
      this.destroyAllBlocksPastVirtualRowCount();
      var event_1 = {
        type: Events.EVENT_STORE_UPDATED
      };
      this.eventService.dispatchEvent(event_1);
    }
  };
  InfiniteCache2.prototype.destroyAllBlocksPastVirtualRowCount = function() {
    var _this = this;
    var blocksToDestroy = [];
    this.getBlocksInOrder().forEach(function(block) {
      var startRow = block.getId() * _this.params.blockSize;
      if (startRow >= _this.rowCount) {
        blocksToDestroy.push(block);
      }
    });
    if (blocksToDestroy.length > 0) {
      blocksToDestroy.forEach(function(block) {
        return _this.destroyBlock(block);
      });
    }
  };
  InfiniteCache2.prototype.purgeCache = function() {
    var _this = this;
    this.getBlocksInOrder().forEach(function(block) {
      return _this.removeBlockFromCache(block);
    });
    this.lastRowIndexKnown = false;
    if (this.rowCount === 0) {
      this.rowCount = this.params.initialRowCount;
    }
    this.onCacheUpdated();
  };
  InfiniteCache2.prototype.getRowNodesInRange = function(firstInRange, lastInRange) {
    var _this = this;
    var result = [];
    var lastBlockId = -1;
    var inActiveRange = false;
    var numberSequence = new NumberSequence();
    if (_.missing(firstInRange)) {
      inActiveRange = true;
    }
    var foundGapInSelection = false;
    this.getBlocksInOrder().forEach(function(block) {
      if (foundGapInSelection) {
        return;
      }
      if (inActiveRange && lastBlockId + 1 !== block.getId()) {
        foundGapInSelection = true;
        return;
      }
      lastBlockId = block.getId();
      block.forEachNode(function(rowNode) {
        var hitFirstOrLast = rowNode === firstInRange || rowNode === lastInRange;
        if (inActiveRange || hitFirstOrLast) {
          result.push(rowNode);
        }
        if (hitFirstOrLast) {
          inActiveRange = !inActiveRange;
        }
      }, numberSequence, _this.rowCount);
    });
    var invalidRange = foundGapInSelection || inActiveRange;
    return invalidRange ? [] : result;
  };
  InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP = 2;
  __decorate$3([
    Autowired("rowRenderer")
  ], InfiniteCache2.prototype, "rowRenderer", void 0);
  __decorate$3([
    Autowired("focusService")
  ], InfiniteCache2.prototype, "focusService", void 0);
  __decorate$3([
    __param(0, Qualifier("loggerFactory"))
  ], InfiniteCache2.prototype, "setBeans", null);
  __decorate$3([
    PreDestroy
  ], InfiniteCache2.prototype, "destroyAllBlocks", null);
  return InfiniteCache2;
}(BeanStub);
var __extends$3 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$2 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var InfiniteRowModel = function(_super) {
  __extends$3(InfiniteRowModel2, _super);
  function InfiniteRowModel2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  InfiniteRowModel2.prototype.getRowBounds = function(index) {
    return {
      rowHeight: this.rowHeight,
      rowTop: this.rowHeight * index
    };
  };
  InfiniteRowModel2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
    return false;
  };
  InfiniteRowModel2.prototype.init = function() {
    var _this = this;
    if (!this.gridOptionsWrapper.isRowModelInfinite()) {
      return;
    }
    this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();
    this.addEventListeners();
    this.addDestroyFunc(function() {
      return _this.destroyCache();
    });
    this.verifyProps();
  };
  InfiniteRowModel2.prototype.verifyProps = function() {
    if (this.gridOptionsWrapper.getInitialGroupOrderComparator() != null) {
      var message_1 = "AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";
      _.doOnce(function() {
        return console.warn(message_1);
      }, "IRM.InitialGroupOrderComparator");
    }
  };
  InfiniteRowModel2.prototype.start = function() {
    this.setDatasource(this.gridOptionsWrapper.getDatasource());
  };
  InfiniteRowModel2.prototype.destroyDatasource = function() {
    if (this.datasource) {
      this.getContext().destroyBean(this.datasource);
      this.rowRenderer.datasourceChanged();
      this.datasource = null;
    }
  };
  InfiniteRowModel2.prototype.addEventListeners = function() {
    this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onColumnEverything.bind(this));
    this.addManagedListener(this.eventService, Events.EVENT_STORE_UPDATED, this.onCacheUpdated.bind(this));
  };
  InfiniteRowModel2.prototype.onFilterChanged = function() {
    this.reset();
  };
  InfiniteRowModel2.prototype.onSortChanged = function() {
    this.reset();
  };
  InfiniteRowModel2.prototype.onColumnEverything = function() {
    var resetRequired;
    if (this.cacheParams) {
      resetRequired = this.isSortModelDifferent();
    } else {
      resetRequired = true;
    }
    if (resetRequired) {
      this.reset();
    }
  };
  InfiniteRowModel2.prototype.isSortModelDifferent = function() {
    return !_.jsonEquals(this.cacheParams.sortModel, this.sortController.getSortModel());
  };
  InfiniteRowModel2.prototype.getType = function() {
    return Constants.ROW_MODEL_TYPE_INFINITE;
  };
  InfiniteRowModel2.prototype.setDatasource = function(datasource) {
    this.destroyDatasource();
    this.datasource = datasource;
    if (datasource) {
      this.reset();
    }
  };
  InfiniteRowModel2.prototype.isEmpty = function() {
    return !this.infiniteCache;
  };
  InfiniteRowModel2.prototype.isRowsToRender = function() {
    return !!this.infiniteCache;
  };
  InfiniteRowModel2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
    return this.infiniteCache ? this.infiniteCache.getRowNodesInRange(firstInRange, lastInRange) : [];
  };
  InfiniteRowModel2.prototype.reset = function() {
    if (!this.datasource) {
      return;
    }
    var getRowIdFunc = this.gridOptionsWrapper.getRowIdFunc();
    var userGeneratingIds = getRowIdFunc != null;
    if (!userGeneratingIds) {
      this.selectionService.reset();
    }
    this.resetCache();
    var event = this.createModelUpdatedEvent();
    this.eventService.dispatchEvent(event);
  };
  InfiniteRowModel2.prototype.createModelUpdatedEvent = function() {
    return {
      type: Events.EVENT_MODEL_UPDATED,
      newPage: false,
      newData: false,
      keepRenderedRows: true,
      animate: false
    };
  };
  InfiniteRowModel2.prototype.resetCache = function() {
    this.destroyCache();
    this.cacheParams = {
      datasource: this.datasource,
      filterModel: this.filterManager.getFilterModel(),
      sortModel: this.sortController.getSortModel(),
      rowNodeBlockLoader: this.rowNodeBlockLoader,
      initialRowCount: this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(), 1),
      maxBlocksInCache: this.gridOptionsWrapper.getMaxBlocksInCache(),
      rowHeight: this.gridOptionsWrapper.getRowHeightAsNumber(),
      overflowSize: this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(), 1),
      blockSize: this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(), 100),
      lastAccessedSequence: new NumberSequence()
    };
    this.infiniteCache = this.createBean(new InfiniteCache(this.cacheParams));
  };
  InfiniteRowModel2.prototype.defaultIfInvalid = function(value, defaultValue) {
    return value > 0 ? value : defaultValue;
  };
  InfiniteRowModel2.prototype.destroyCache = function() {
    if (this.infiniteCache) {
      this.infiniteCache = this.destroyBean(this.infiniteCache);
    }
  };
  InfiniteRowModel2.prototype.onCacheUpdated = function() {
    var event = this.createModelUpdatedEvent();
    this.eventService.dispatchEvent(event);
  };
  InfiniteRowModel2.prototype.getRow = function(rowIndex) {
    if (!this.infiniteCache) {
      return void 0;
    }
    if (rowIndex >= this.infiniteCache.getRowCount()) {
      return void 0;
    }
    return this.infiniteCache.getRow(rowIndex);
  };
  InfiniteRowModel2.prototype.getRowNode = function(id) {
    var result;
    this.forEachNode(function(rowNode) {
      if (rowNode.id === id) {
        result = rowNode;
      }
    });
    return result;
  };
  InfiniteRowModel2.prototype.forEachNode = function(callback) {
    if (this.infiniteCache) {
      this.infiniteCache.forEachNodeDeep(callback);
    }
  };
  InfiniteRowModel2.prototype.getTopLevelRowCount = function() {
    return this.getRowCount();
  };
  InfiniteRowModel2.prototype.getTopLevelRowDisplayedIndex = function(topLevelIndex) {
    return topLevelIndex;
  };
  InfiniteRowModel2.prototype.getRowIndexAtPixel = function(pixel) {
    if (this.rowHeight !== 0) {
      var rowIndexForPixel = Math.floor(pixel / this.rowHeight);
      var lastRowIndex = this.getRowCount() - 1;
      if (rowIndexForPixel > lastRowIndex) {
        return lastRowIndex;
      }
      return rowIndexForPixel;
    }
    return 0;
  };
  InfiniteRowModel2.prototype.getRowCount = function() {
    return this.infiniteCache ? this.infiniteCache.getRowCount() : 0;
  };
  InfiniteRowModel2.prototype.isRowPresent = function(rowNode) {
    var foundRowNode = this.getRowNode(rowNode.id);
    return !!foundRowNode;
  };
  InfiniteRowModel2.prototype.refreshCache = function() {
    if (this.infiniteCache) {
      this.infiniteCache.refreshCache();
    }
  };
  InfiniteRowModel2.prototype.purgeCache = function() {
    if (this.infiniteCache) {
      this.infiniteCache.purgeCache();
    }
  };
  InfiniteRowModel2.prototype.isLastRowIndexKnown = function() {
    if (this.infiniteCache) {
      return this.infiniteCache.isLastRowIndexKnown();
    }
    return false;
  };
  InfiniteRowModel2.prototype.setRowCount = function(rowCount, lastRowIndexKnown) {
    if (this.infiniteCache) {
      this.infiniteCache.setRowCount(rowCount, lastRowIndexKnown);
    }
  };
  __decorate$2([
    Autowired("filterManager")
  ], InfiniteRowModel2.prototype, "filterManager", void 0);
  __decorate$2([
    Autowired("sortController")
  ], InfiniteRowModel2.prototype, "sortController", void 0);
  __decorate$2([
    Autowired("selectionService")
  ], InfiniteRowModel2.prototype, "selectionService", void 0);
  __decorate$2([
    Autowired("rowRenderer")
  ], InfiniteRowModel2.prototype, "rowRenderer", void 0);
  __decorate$2([
    Autowired("rowNodeBlockLoader")
  ], InfiniteRowModel2.prototype, "rowNodeBlockLoader", void 0);
  __decorate$2([
    PostConstruct
  ], InfiniteRowModel2.prototype, "init", null);
  __decorate$2([
    PreDestroy
  ], InfiniteRowModel2.prototype, "destroyDatasource", null);
  InfiniteRowModel2 = __decorate$2([
    Bean("rowModel")
  ], InfiniteRowModel2);
  return InfiniteRowModel2;
}(BeanStub);
var InfiniteRowModelModule = {
  moduleName: ModuleNames.InfiniteRowModelModule,
  rowModels: { infinite: InfiniteRowModel }
};
var BaseCreator = function() {
  function BaseCreator2() {
  }
  BaseCreator2.prototype.setBeans = function(beans) {
    this.beans = beans;
  };
  BaseCreator2.prototype.getFileName = function(fileName) {
    var extension = this.getDefaultFileExtension();
    if (fileName == null || !fileName.length) {
      fileName = this.getDefaultFileName();
    }
    return fileName.indexOf(".") === -1 ? fileName + "." + extension : fileName;
  };
  BaseCreator2.prototype.getData = function(params) {
    var serializingSession = this.createSerializingSession(params);
    var data = this.beans.gridSerializer.serialize(serializingSession, params);
    return data;
  };
  return BaseCreator2;
}();
var BaseGridSerializingSession = function() {
  function BaseGridSerializingSession2(config) {
    this.groupColumns = [];
    var columnModel = config.columnModel, valueService = config.valueService, gridOptionsWrapper = config.gridOptionsWrapper, processCellCallback = config.processCellCallback, processHeaderCallback = config.processHeaderCallback, processGroupHeaderCallback = config.processGroupHeaderCallback, processRowGroupCallback = config.processRowGroupCallback;
    this.columnModel = columnModel;
    this.valueService = valueService;
    this.gridOptionsWrapper = gridOptionsWrapper;
    this.processCellCallback = processCellCallback;
    this.processHeaderCallback = processHeaderCallback;
    this.processGroupHeaderCallback = processGroupHeaderCallback;
    this.processRowGroupCallback = processRowGroupCallback;
  }
  BaseGridSerializingSession2.prototype.prepare = function(columnsToExport) {
    this.groupColumns = columnsToExport.filter(function(col) {
      return !!col.getColDef().showRowGroup;
    });
  };
  BaseGridSerializingSession2.prototype.extractHeaderValue = function(column) {
    var value = this.getHeaderName(this.processHeaderCallback, column);
    return value != null ? value : "";
  };
  BaseGridSerializingSession2.prototype.extractRowCellValue = function(column, index, accumulatedRowIndex, type, node) {
    var value = this.shouldRenderGroupSummaryCell(node, column, index) ? this.createValueForGroupNode(node) : this.valueService.getValue(column, node);
    var processedValue = this.processCell({
      accumulatedRowIndex,
      rowNode: node,
      column,
      value,
      processCellCallback: this.processCellCallback,
      type
    });
    return processedValue != null ? processedValue : "";
  };
  BaseGridSerializingSession2.prototype.shouldRenderGroupSummaryCell = function(node, column, currentColumnIndex) {
    var _a2;
    var isGroupNode = node && node.group;
    if (!isGroupNode) {
      return false;
    }
    var currentColumnGroupIndex = this.groupColumns.indexOf(column);
    if (currentColumnGroupIndex !== -1 && ((_a2 = node.groupData) === null || _a2 === void 0 ? void 0 : _a2[column.getId()])) {
      return true;
    }
    var isGroupUseEntireRow = this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode());
    return currentColumnIndex === 0 && isGroupUseEntireRow;
  };
  BaseGridSerializingSession2.prototype.getHeaderName = function(callback, column) {
    if (callback) {
      return callback({
        column,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      });
    }
    return this.columnModel.getDisplayNameForColumn(column, "csv", true);
  };
  BaseGridSerializingSession2.prototype.createValueForGroupNode = function(node) {
    if (this.processRowGroupCallback) {
      return this.processRowGroupCallback({
        node,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      });
    }
    var keys2 = [node.key];
    if (!this.gridOptionsWrapper.isGroupMultiAutoColumn()) {
      while (node.parent) {
        node = node.parent;
        keys2.push(node.key);
      }
    }
    return keys2.reverse().join(" -> ");
  };
  BaseGridSerializingSession2.prototype.processCell = function(params) {
    var accumulatedRowIndex = params.accumulatedRowIndex, rowNode = params.rowNode, column = params.column, value = params.value, processCellCallback = params.processCellCallback, type = params.type;
    if (processCellCallback) {
      return processCellCallback({
        accumulatedRowIndex,
        column,
        node: rowNode,
        value,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext(),
        type
      });
    }
    return value != null ? value : "";
  };
  return BaseGridSerializingSession2;
}();
var Downloader = function() {
  function Downloader2() {
  }
  Downloader2.download = function(fileName, content) {
    var win = document.defaultView || window;
    if (!win) {
      console.warn("AG Grid: There is no `window` associated with the current `document`");
      return;
    }
    var element = document.createElement("a");
    var url = win.URL.createObjectURL(content);
    element.setAttribute("href", url);
    element.setAttribute("download", fileName);
    element.style.display = "none";
    document.body.appendChild(element);
    element.dispatchEvent(new MouseEvent("click", {
      bubbles: false,
      cancelable: true,
      view: win
    }));
    document.body.removeChild(element);
    win.setTimeout(function() {
      win.URL.revokeObjectURL(url);
    }, 0);
  };
  return Downloader2;
}();
var __extends$2 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var LINE_SEPARATOR$1 = "\r\n";
var CsvSerializingSession = function(_super) {
  __extends$2(CsvSerializingSession2, _super);
  function CsvSerializingSession2(config) {
    var _this = _super.call(this, config) || this;
    _this.isFirstLine = true;
    _this.result = "";
    var suppressQuotes = config.suppressQuotes, columnSeparator = config.columnSeparator;
    _this.suppressQuotes = suppressQuotes;
    _this.columnSeparator = columnSeparator;
    return _this;
  }
  CsvSerializingSession2.prototype.addCustomContent = function(content) {
    var _this = this;
    if (!content) {
      return;
    }
    if (typeof content === "string") {
      if (!/^\s*\n/.test(content)) {
        this.beginNewLine();
      }
      content = content.replace(/\r?\n/g, LINE_SEPARATOR$1);
      this.result += content;
    } else {
      content.forEach(function(row) {
        _this.beginNewLine();
        row.forEach(function(cell, index) {
          if (index !== 0) {
            _this.result += _this.columnSeparator;
          }
          _this.result += _this.putInQuotes(cell.data.value || "");
          if (cell.mergeAcross) {
            _this.appendEmptyCells(cell.mergeAcross);
          }
        });
      });
    }
  };
  CsvSerializingSession2.prototype.onNewHeaderGroupingRow = function() {
    this.beginNewLine();
    return {
      onColumn: this.onNewHeaderGroupingRowColumn.bind(this)
    };
  };
  CsvSerializingSession2.prototype.onNewHeaderGroupingRowColumn = function(header, index, span) {
    if (index != 0) {
      this.result += this.columnSeparator;
    }
    this.result += this.putInQuotes(header);
    this.appendEmptyCells(span);
  };
  CsvSerializingSession2.prototype.appendEmptyCells = function(count) {
    for (var i2 = 1; i2 <= count; i2++) {
      this.result += this.columnSeparator + this.putInQuotes("");
    }
  };
  CsvSerializingSession2.prototype.onNewHeaderRow = function() {
    this.beginNewLine();
    return {
      onColumn: this.onNewHeaderRowColumn.bind(this)
    };
  };
  CsvSerializingSession2.prototype.onNewHeaderRowColumn = function(column, index) {
    if (index != 0) {
      this.result += this.columnSeparator;
    }
    this.result += this.putInQuotes(this.extractHeaderValue(column));
  };
  CsvSerializingSession2.prototype.onNewBodyRow = function() {
    this.beginNewLine();
    return {
      onColumn: this.onNewBodyRowColumn.bind(this)
    };
  };
  CsvSerializingSession2.prototype.onNewBodyRowColumn = function(column, index, node) {
    if (index != 0) {
      this.result += this.columnSeparator;
    }
    this.result += this.putInQuotes(this.extractRowCellValue(column, index, index, Constants.EXPORT_TYPE_CSV, node));
  };
  CsvSerializingSession2.prototype.putInQuotes = function(value) {
    if (this.suppressQuotes) {
      return value;
    }
    if (value === null || value === void 0) {
      return '""';
    }
    var stringValue;
    if (typeof value === "string") {
      stringValue = value;
    } else if (typeof value.toString === "function") {
      stringValue = value.toString();
    } else {
      console.warn("AG Grid: unknown value type during csv conversion");
      stringValue = "";
    }
    var valueEscaped = stringValue.replace(/"/g, '""');
    return '"' + valueEscaped + '"';
  };
  CsvSerializingSession2.prototype.parse = function() {
    return this.result;
  };
  CsvSerializingSession2.prototype.beginNewLine = function() {
    if (!this.isFirstLine) {
      this.result += LINE_SEPARATOR$1;
    }
    this.isFirstLine = false;
  };
  return CsvSerializingSession2;
}(BaseGridSerializingSession);
var __extends$1$1 = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate$1 = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var CsvCreator = function(_super) {
  __extends$1$1(CsvCreator2, _super);
  function CsvCreator2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  CsvCreator2.prototype.postConstruct = function() {
    this.setBeans({
      gridSerializer: this.gridSerializer,
      gridOptionsWrapper: this.gridOptionsWrapper
    });
  };
  CsvCreator2.prototype.getMergedParams = function(params) {
    var baseParams = this.gridOptionsWrapper.getDefaultExportParams("csv");
    return Object.assign({}, baseParams, params);
  };
  CsvCreator2.prototype.export = function(userParams) {
    if (this.isExportSuppressed()) {
      console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");
      return "";
    }
    var mergedParams = this.getMergedParams(userParams);
    var data = this.getData(mergedParams);
    var packagedFile = new Blob(["\uFEFF", data], { type: "text/plain" });
    Downloader.download(this.getFileName(mergedParams.fileName), packagedFile);
    return data;
  };
  CsvCreator2.prototype.exportDataAsCsv = function(params) {
    return this.export(params);
  };
  CsvCreator2.prototype.getDataAsCsv = function(params) {
    var mergedParams = this.getMergedParams(params);
    return this.getData(mergedParams);
  };
  CsvCreator2.prototype.getDefaultFileName = function() {
    return "export.csv";
  };
  CsvCreator2.prototype.getDefaultFileExtension = function() {
    return "csv";
  };
  CsvCreator2.prototype.createSerializingSession = function(params) {
    var _a2 = this, columnModel = _a2.columnModel, valueService = _a2.valueService, gridOptionsWrapper = _a2.gridOptionsWrapper;
    var _b = params, processCellCallback = _b.processCellCallback, processHeaderCallback = _b.processHeaderCallback, processGroupHeaderCallback = _b.processGroupHeaderCallback, processRowGroupCallback = _b.processRowGroupCallback, suppressQuotes = _b.suppressQuotes, columnSeparator = _b.columnSeparator;
    return new CsvSerializingSession({
      columnModel,
      valueService,
      gridOptionsWrapper,
      processCellCallback: processCellCallback || void 0,
      processHeaderCallback: processHeaderCallback || void 0,
      processGroupHeaderCallback: processGroupHeaderCallback || void 0,
      processRowGroupCallback: processRowGroupCallback || void 0,
      suppressQuotes: suppressQuotes || false,
      columnSeparator: columnSeparator || ","
    });
  };
  CsvCreator2.prototype.isExportSuppressed = function() {
    return this.gridOptionsWrapper.isSuppressCsvExport();
  };
  __decorate$1([
    Autowired("columnModel")
  ], CsvCreator2.prototype, "columnModel", void 0);
  __decorate$1([
    Autowired("valueService")
  ], CsvCreator2.prototype, "valueService", void 0);
  __decorate$1([
    Autowired("gridSerializer")
  ], CsvCreator2.prototype, "gridSerializer", void 0);
  __decorate$1([
    Autowired("gridOptionsWrapper")
  ], CsvCreator2.prototype, "gridOptionsWrapper", void 0);
  __decorate$1([
    PostConstruct
  ], CsvCreator2.prototype, "postConstruct", null);
  CsvCreator2 = __decorate$1([
    Bean("csvCreator")
  ], CsvCreator2);
  return CsvCreator2;
}(BaseCreator);
var __extends$2V = function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (b3.hasOwnProperty(p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var __decorate = function(decorators, target, key, desc) {
  var c2 = arguments.length, r = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d3;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i2 = decorators.length - 1; i2 >= 0; i2--)
      if (d3 = decorators[i2])
        r = (c2 < 3 ? d3(r) : c2 > 3 ? d3(target, key, r) : d3(target, key)) || r;
  return c2 > 3 && r && Object.defineProperty(target, key, r), r;
};
var RowType;
(function(RowType2) {
  RowType2[RowType2["HEADER_GROUPING"] = 0] = "HEADER_GROUPING";
  RowType2[RowType2["HEADER"] = 1] = "HEADER";
  RowType2[RowType2["BODY"] = 2] = "BODY";
})(RowType || (RowType = {}));
var GridSerializer = function(_super) {
  __extends$2V(GridSerializer2, _super);
  function GridSerializer2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  GridSerializer2.prototype.serialize = function(gridSerializingSession, params) {
    if (params === void 0) {
      params = {};
    }
    var columnsToExport = this.getColumnsToExport(params.allColumns, params.columnKeys);
    var serializeChain = _.compose(
      this.prepareSession(columnsToExport),
      this.prependContent(params),
      this.exportColumnGroups(params, columnsToExport),
      this.exportHeaders(params, columnsToExport),
      this.processPinnedTopRows(params, columnsToExport),
      this.processRows(params, columnsToExport),
      this.processPinnedBottomRows(params, columnsToExport),
      this.appendContent(params)
    );
    return serializeChain(gridSerializingSession).parse();
  };
  GridSerializer2.prototype.processRow = function(gridSerializingSession, params, columnsToExport, node) {
    var rowSkipper = params.shouldRowBeSkipped || function() {
      return false;
    };
    var gridOptionsWrapper = this.gridOptionsWrapper;
    var context = gridOptionsWrapper.getContext();
    var api = gridOptionsWrapper.getApi();
    var columnApi = gridOptionsWrapper.getColumnApi();
    var skipSingleChildrenGroup = gridOptionsWrapper.isGroupRemoveSingleChildren();
    var skipLowestSingleChildrenGroup = gridOptionsWrapper.isGroupRemoveLowestSingleChildren();
    var isClipboardExport = params.rowPositions != null;
    var isExplicitExportSelection = isClipboardExport || !!params.onlySelected;
    var hideOpenParents = gridOptionsWrapper.isGroupHideOpenParents() && !isExplicitExportSelection;
    var isLeafNode = this.columnModel.isPivotMode() ? node.leafGroup : !node.group;
    var skipRowGroups = params.skipGroups || params.skipRowGroups;
    var shouldSkipLowestGroup = skipLowestSingleChildrenGroup && node.leafGroup;
    var shouldSkipCurrentGroup = node.allChildrenCount === 1 && (skipSingleChildrenGroup || shouldSkipLowestGroup);
    if (skipRowGroups && params.skipGroups) {
      _.doOnce(function() {
        return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.");
      }, "gridSerializer-skipGroups");
    }
    if (!isLeafNode && (params.skipRowGroups || shouldSkipCurrentGroup || hideOpenParents) || params.onlySelected && !node.isSelected() || params.skipPinnedTop && node.rowPinned === "top" || params.skipPinnedBottom && node.rowPinned === "bottom") {
      return;
    }
    var nodeIsRootNode = node.level === -1;
    if (nodeIsRootNode && !node.leafGroup && (!node.footer || !isClipboardExport)) {
      return;
    }
    var shouldRowBeSkipped = rowSkipper({ node, api, columnApi, context });
    if (shouldRowBeSkipped) {
      return;
    }
    var rowAccumulator = gridSerializingSession.onNewBodyRow();
    columnsToExport.forEach(function(column, index) {
      rowAccumulator.onColumn(column, index, node);
    });
    if (params.getCustomContentBelowRow) {
      var content = params.getCustomContentBelowRow({ node, api, columnApi, context });
      if (content) {
        gridSerializingSession.addCustomContent(content);
      }
    }
  };
  GridSerializer2.prototype.appendContent = function(params) {
    return function(gridSerializingSession) {
      var appendContent = params.customFooter || params.appendContent;
      if (appendContent) {
        if (params.customFooter) {
          _.doOnce(function() {
            return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.");
          }, "gridSerializer-customFooter");
        }
        gridSerializingSession.addCustomContent(appendContent);
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.prependContent = function(params) {
    return function(gridSerializingSession) {
      var prependContent = params.customHeader || params.prependContent;
      if (prependContent) {
        if (params.customHeader) {
          _.doOnce(function() {
            return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.");
          }, "gridSerializer-customHeader");
        }
        gridSerializingSession.addCustomContent(prependContent);
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.prepareSession = function(columnsToExport) {
    return function(gridSerializingSession) {
      gridSerializingSession.prepare(columnsToExport);
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.exportColumnGroups = function(params, columnsToExport) {
    var _this = this;
    return function(gridSerializingSession) {
      if (!params.skipColumnGroupHeaders) {
        var groupInstanceIdCreator = new GroupInstanceIdCreator();
        var displayedGroups = _this.displayedGroupCreator.createDisplayedGroups(columnsToExport, _this.columnModel.getGridBalancedTree(), groupInstanceIdCreator, null);
        _this.recursivelyAddHeaderGroups(displayedGroups, gridSerializingSession, params.processGroupHeaderCallback);
      } else if (params.columnGroups) {
        _.doOnce(function() {
          return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.");
        }, "gridSerializer-columnGroups");
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.exportHeaders = function(params, columnsToExport) {
    return function(gridSerializingSession) {
      if (!params.skipHeader && !params.skipColumnHeaders) {
        var gridRowIterator_1 = gridSerializingSession.onNewHeaderRow();
        columnsToExport.forEach(function(column, index) {
          gridRowIterator_1.onColumn(column, index, void 0);
        });
      } else if (params.skipHeader) {
        _.doOnce(function() {
          return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.");
        }, "gridSerializer-skipHeader");
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.processPinnedTopRows = function(params, columnsToExport) {
    var _this = this;
    return function(gridSerializingSession) {
      var processRow = _this.processRow.bind(_this, gridSerializingSession, params, columnsToExport);
      if (params.rowPositions) {
        params.rowPositions.filter(function(position) {
          return position.rowPinned === "top";
        }).sort(function(a3, b2) {
          return a3.rowIndex - b2.rowIndex;
        }).map(function(position) {
          return _this.pinnedRowModel.getPinnedTopRow(position.rowIndex);
        }).forEach(processRow);
      } else {
        _this.pinnedRowModel.forEachPinnedTopRow(processRow);
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.processRows = function(params, columnsToExport) {
    var _this = this;
    return function(gridSerializingSession) {
      var rowModel = _this.rowModel;
      var rowModelType = rowModel.getType();
      var usingCsrm = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
      var usingSsrm = rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
      var onlySelectedNonStandardModel = !usingCsrm && params.onlySelected;
      var processRow = _this.processRow.bind(_this, gridSerializingSession, params, columnsToExport);
      if (params.rowPositions) {
        params.rowPositions.filter(function(position) {
          return position.rowPinned == null;
        }).sort(function(a3, b2) {
          return a3.rowIndex - b2.rowIndex;
        }).map(function(position) {
          return rowModel.getRow(position.rowIndex);
        }).forEach(processRow);
      } else if (_this.columnModel.isPivotMode()) {
        if (usingCsrm) {
          rowModel.forEachPivotNode(processRow);
        } else {
          rowModel.forEachNode(processRow);
        }
      } else {
        if (params.onlySelectedAllPages || onlySelectedNonStandardModel) {
          var selectedNodes = _this.selectionService.getSelectedNodes();
          selectedNodes.forEach(processRow);
        } else {
          if (usingCsrm) {
            rowModel.forEachNodeAfterFilterAndSort(processRow);
          } else if (usingSsrm) {
            rowModel.forEachNodeAfterFilterAndSort(processRow);
          } else {
            rowModel.forEachNode(processRow);
          }
        }
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.processPinnedBottomRows = function(params, columnsToExport) {
    var _this = this;
    return function(gridSerializingSession) {
      var processRow = _this.processRow.bind(_this, gridSerializingSession, params, columnsToExport);
      if (params.rowPositions) {
        params.rowPositions.filter(function(position) {
          return position.rowPinned === "bottom";
        }).sort(function(a3, b2) {
          return a3.rowIndex - b2.rowIndex;
        }).map(function(position) {
          return _this.pinnedRowModel.getPinnedBottomRow(position.rowIndex);
        }).forEach(processRow);
      } else {
        _this.pinnedRowModel.forEachPinnedBottomRow(processRow);
      }
      return gridSerializingSession;
    };
  };
  GridSerializer2.prototype.getColumnsToExport = function(allColumns, columnKeys) {
    if (allColumns === void 0) {
      allColumns = false;
    }
    var isPivotMode = this.columnModel.isPivotMode();
    if (columnKeys && columnKeys.length) {
      return this.columnModel.getGridColumns(columnKeys);
    }
    if (allColumns && !isPivotMode) {
      var columns = this.gridOptionsWrapper.isTreeData() ? this.columnModel.getGridColumns([Constants.GROUP_AUTO_COLUMN_ID]) : [];
      return columns.concat(this.columnModel.getAllPrimaryColumns() || []);
    }
    return this.columnModel.getAllDisplayedColumns();
  };
  GridSerializer2.prototype.recursivelyAddHeaderGroups = function(displayedGroups, gridSerializingSession, processGroupHeaderCallback) {
    var directChildrenHeaderGroups = [];
    displayedGroups.forEach(function(columnGroupChild) {
      var columnGroup = columnGroupChild;
      if (!columnGroup.getChildren) {
        return;
      }
      columnGroup.getChildren().forEach(function(it2) {
        return directChildrenHeaderGroups.push(it2);
      });
    });
    if (displayedGroups.length > 0 && displayedGroups[0] instanceof ColumnGroup) {
      this.doAddHeaderHeader(gridSerializingSession, displayedGroups, processGroupHeaderCallback);
    }
    if (directChildrenHeaderGroups && directChildrenHeaderGroups.length > 0) {
      this.recursivelyAddHeaderGroups(directChildrenHeaderGroups, gridSerializingSession, processGroupHeaderCallback);
    }
  };
  GridSerializer2.prototype.doAddHeaderHeader = function(gridSerializingSession, displayedGroups, processGroupHeaderCallback) {
    var _this = this;
    var gridRowIterator = gridSerializingSession.onNewHeaderGroupingRow();
    var columnIndex = 0;
    displayedGroups.forEach(function(columnGroupChild) {
      var columnGroup = columnGroupChild;
      var name;
      if (processGroupHeaderCallback) {
        name = processGroupHeaderCallback({
          columnGroup,
          api: _this.gridOptionsWrapper.getApi(),
          columnApi: _this.gridOptionsWrapper.getColumnApi(),
          context: _this.gridOptionsWrapper.getContext()
        });
      } else {
        name = _this.columnModel.getDisplayNameForColumnGroup(columnGroup, "header");
      }
      var collapsibleGroupRanges = columnGroup.getLeafColumns().reduce(function(collapsibleGroups, currentColumn, currentIdx, arr) {
        var lastGroup = _.last(collapsibleGroups);
        var groupShow = currentColumn.getColumnGroupShow() === "open";
        if (!groupShow) {
          if (lastGroup && lastGroup[1] == null) {
            lastGroup[1] = currentIdx - 1;
          }
        } else if (!lastGroup || lastGroup[1] != null) {
          lastGroup = [currentIdx];
          collapsibleGroups.push(lastGroup);
        }
        if (currentIdx === arr.length - 1 && lastGroup && lastGroup[1] == null) {
          lastGroup[1] = currentIdx;
        }
        return collapsibleGroups;
      }, []);
      gridRowIterator.onColumn(name || "", columnIndex++, columnGroup.getLeafColumns().length - 1, collapsibleGroupRanges);
    });
  };
  __decorate([
    Autowired("displayedGroupCreator")
  ], GridSerializer2.prototype, "displayedGroupCreator", void 0);
  __decorate([
    Autowired("columnModel")
  ], GridSerializer2.prototype, "columnModel", void 0);
  __decorate([
    Autowired("rowModel")
  ], GridSerializer2.prototype, "rowModel", void 0);
  __decorate([
    Autowired("pinnedRowModel")
  ], GridSerializer2.prototype, "pinnedRowModel", void 0);
  __decorate([
    Autowired("selectionService")
  ], GridSerializer2.prototype, "selectionService", void 0);
  __decorate([
    Autowired("rowPositionUtils")
  ], GridSerializer2.prototype, "rowPositionUtils", void 0);
  GridSerializer2 = __decorate([
    Bean("gridSerializer")
  ], GridSerializer2);
  return GridSerializer2;
}(BeanStub);
var CsvExportModule = {
  moduleName: ModuleNames.CsvExportModule,
  beans: [CsvCreator, GridSerializer]
};
var AllCommunityModules = [ClientSideRowModelModule, InfiniteRowModelModule, CsvExportModule];
ModuleRegistry.registerModules(AllCommunityModules);
var __assign$1 = globalThis && globalThis.__assign || function() {
  __assign$1 = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign$1.apply(this, arguments);
};
var __spreadArrays = globalThis && globalThis.__spreadArrays || function() {
  for (var s3 = 0, i2 = 0, il2 = arguments.length; i2 < il2; i2++)
    s3 += arguments[i2].length;
  for (var r = Array(s3), k2 = 0, i2 = 0; i2 < il2; i2++)
    for (var a3 = arguments[i2], j = 0, jl2 = a3.length; j < jl2; j++, k2++)
      r[k2] = a3[j];
  return r;
};
var VueComponentFactory = function() {
  function VueComponentFactory2() {
  }
  VueComponentFactory2.getComponentDefinition = function(component, parent) {
    var componentDefinition;
    if (typeof component === "string") {
      componentDefinition = this.searchForComponentInstance(parent, component);
    } else {
      componentDefinition = { extends: defineComponent(__assign$1({}, component)) };
    }
    if (!componentDefinition) {
      console.error("Could not find component with name of " + component + ". Is it in Vue.components?");
    }
    if (componentDefinition.extends) {
      if (componentDefinition.extends.setup) {
        componentDefinition.setup = componentDefinition.extends.setup;
      }
      componentDefinition.extends.props = this.addParamsToProps(componentDefinition.extends.props);
    } else {
      componentDefinition.props = this.addParamsToProps(componentDefinition.props);
    }
    return componentDefinition;
  };
  VueComponentFactory2.addParamsToProps = function(props2) {
    if (!props2 || Array.isArray(props2) && props2.indexOf("params") === -1) {
      props2 = __spreadArrays(["params"], props2 ? props2 : []);
    } else if (typeof props2 === "object" && !props2.params) {
      props2["params"] = {
        type: Object
      };
    }
    return props2;
  };
  VueComponentFactory2.createAndMountComponent = function(component, params, parent) {
    var componentDefinition = VueComponentFactory2.getComponentDefinition(component, parent);
    if (!componentDefinition) {
      return;
    }
    var _a2 = this.mount(componentDefinition, { params: Object.freeze(params) }, parent), vNode = _a2.vNode, destroy = _a2.destroy, el2 = _a2.el;
    return {
      componentInstance: vNode.component.proxy,
      element: el2,
      destroy
    };
  };
  VueComponentFactory2.mount = function(component, props2, parent) {
    var vNode = createVNode(component, props2);
    vNode.appContext = parent.$.appContext;
    vNode.appContext.provides = __assign$1(__assign$1({}, vNode.appContext.provides ? vNode.appContext.provides : {}), parent.$parent.$options.provide ? parent.$parent.$options.provide : {});
    var el2 = document.createElement("div");
    render(vNode, el2);
    var destroy = function() {
      if (el2) {
        render(null, el2);
      }
      el2 = null;
      vNode = null;
    };
    return { vNode, destroy, el: el2 };
  };
  VueComponentFactory2.searchForComponentInstance = function(parent, component, maxDepth, suppressError) {
    if (maxDepth === void 0) {
      maxDepth = 10;
    }
    if (suppressError === void 0) {
      suppressError = false;
    }
    var componentInstance = null;
    var currentParent = parent.$parent;
    var depth = 0;
    while (!componentInstance && currentParent && currentParent.$options && ++depth < maxDepth) {
      var currentParentAsThis = currentParent;
      componentInstance = currentParentAsThis.$options && currentParentAsThis.$options.components ? currentParentAsThis.$options.components[component] : null;
      currentParent = currentParent.$parent;
    }
    if (!componentInstance) {
      var components = parent.$.appContext.components;
      if (components && components[component]) {
        componentInstance = components[component];
      }
    }
    if (!componentInstance && !suppressError) {
      console.error("Could not find component with name of " + component + ". Is it in Vue.components?");
      return null;
    }
    return componentInstance;
  };
  return VueComponentFactory2;
}();
var __extends$1 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (Object.prototype.hasOwnProperty.call(b3, p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var VueFrameworkComponentWrapper = function(_super) {
  __extends$1(VueFrameworkComponentWrapper2, _super);
  function VueFrameworkComponentWrapper2(parent) {
    var _this = _super.call(this) || this;
    _this.parent = parent;
    return _this;
  }
  VueFrameworkComponentWrapper2.prototype.createWrapper = function(component) {
    var that = this;
    var DynamicComponent = function(_super2) {
      __extends$1(DynamicComponent2, _super2);
      function DynamicComponent2() {
        return _super2 !== null && _super2.apply(this, arguments) || this;
      }
      DynamicComponent2.prototype.init = function(params) {
        _super2.prototype.init.call(this, params);
      };
      DynamicComponent2.prototype.hasMethod = function(name) {
        return wrapper.getFrameworkComponentInstance()[name] != null;
      };
      DynamicComponent2.prototype.callMethod = function(name, args) {
        var componentInstance = this.getFrameworkComponentInstance();
        var frameworkComponentInstance = wrapper.getFrameworkComponentInstance();
        return frameworkComponentInstance[name].apply(componentInstance, args);
      };
      DynamicComponent2.prototype.addMethod = function(name, callback) {
        wrapper[name] = callback;
      };
      DynamicComponent2.prototype.overrideProcessing = function(methodName) {
        return that.parent.autoParamsRefresh && methodName === "refresh";
      };
      DynamicComponent2.prototype.processMethod = function(methodName, args) {
        if (methodName === "refresh") {
          this.getFrameworkComponentInstance().params = args[0];
        }
        if (this.hasMethod(methodName)) {
          return this.callMethod(methodName, args);
        }
        return methodName === "refresh";
      };
      DynamicComponent2.prototype.createComponent = function(params) {
        return that.createComponent(component, params);
      };
      return DynamicComponent2;
    }(VueComponent);
    var wrapper = new DynamicComponent();
    return wrapper;
  };
  VueFrameworkComponentWrapper2.prototype.createComponent = function(component, params) {
    return VueComponentFactory.createAndMountComponent(component, params, this.parent);
  };
  VueFrameworkComponentWrapper2.prototype.createMethodProxy = function(wrapper, methodName, mandatory) {
    return function() {
      if (wrapper.overrideProcessing(methodName)) {
        return wrapper.processMethod(methodName, arguments);
      }
      if (wrapper.hasMethod(methodName)) {
        return wrapper.callMethod(methodName, arguments);
      }
      if (mandatory) {
        console.warn("AG Grid: Framework component is missing the method " + methodName + "()");
      }
      return null;
    };
  };
  VueFrameworkComponentWrapper2.prototype.destroy = function() {
    this.parent = null;
  };
  return VueFrameworkComponentWrapper2;
}(BaseComponentWrapper);
var VueComponent = function() {
  function VueComponent2() {
  }
  VueComponent2.prototype.getGui = function() {
    return this.element;
  };
  VueComponent2.prototype.destroy = function() {
    if (this.getFrameworkComponentInstance() && typeof this.getFrameworkComponentInstance().destroy === "function") {
      this.getFrameworkComponentInstance().destroy();
    }
    this.unmount();
  };
  VueComponent2.prototype.getFrameworkComponentInstance = function() {
    return this.componentInstance;
  };
  VueComponent2.prototype.init = function(params) {
    var _a2 = this.createComponent(params), componentInstance = _a2.componentInstance, element = _a2.element, unmount = _a2.destroy;
    this.componentInstance = componentInstance;
    this.unmount = unmount;
    this.element = element.firstElementChild;
  };
  return VueComponent2;
}();
var kebabProperty = function(property) {
  return property.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
};
var kebabNameToAttrEventName = function(kebabName) {
  return "on" + kebabName.charAt(0).toUpperCase() + kebabName.substring(1, kebabName.length);
};
var getAgGridProperties = function() {
  var props2 = {};
  var eventNameAsProps = ComponentUtil.PUBLIC_EVENTS.map(function(eventName) {
    return kebabNameToAttrEventName(kebabProperty(eventName));
  });
  eventNameAsProps.forEach(function(eventName) {
    return props2[eventName] = void 0;
  });
  var watch22 = {};
  ComponentUtil.ALL_PROPERTIES.filter(function(propertyName) {
    return propertyName != "gridOptions";
  }).forEach(function(propertyName) {
    props2[propertyName] = {};
    watch22[propertyName] = {
      handler: function(currentValue, previousValue) {
        this.processChanges(propertyName, currentValue, previousValue);
      },
      deep: propertyName !== "popupParent" && propertyName !== "context"
    };
  });
  return [props2, watch22];
};
var AgGridColumn = function() {
  function AgGridColumn2() {
  }
  AgGridColumn2.hasChildColumns = function(slots) {
    return slots && slots.default && slots.default().length > 0;
  };
  AgGridColumn2.mapChildColumnDefs = function(slots) {
    return slots.default().map(function(column) {
      return AgGridColumn2.toColDef(column);
    });
  };
  AgGridColumn2.toColDef = function(column) {
    var colDef = AgGridColumn2.createColDefFromGridColumn(column);
    if (column.children && column.children.length > 0) {
      colDef.children = AgGridColumn2.getChildColDefs(column.children);
    }
    return colDef;
  };
  AgGridColumn2.getChildColDefs = function(columnChildren) {
    return columnChildren.map(function(column) {
      return AgGridColumn2.createColDefFromGridColumn(column);
    });
  };
  AgGridColumn2.createColDefFromGridColumn = function(column) {
    var colDef = {};
    Object.assign(colDef, column.props);
    delete colDef.children;
    ColDefUtil.BOOLEAN_PROPERTIES.forEach(function(property) {
      var colDefAsAny = colDef;
      if (colDefAsAny[property] === "") {
        colDefAsAny[property] = true;
      }
    });
    return colDef;
  };
  return AgGridColumn2;
}();
var __extends = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d3, b2) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b3) {
      d4.__proto__ = b3;
    } || function(d4, b3) {
      for (var p in b3)
        if (Object.prototype.hasOwnProperty.call(b3, p))
          d4[p] = b3[p];
    };
    return extendStatics(d3, b2);
  };
  return function(d3, b2) {
    extendStatics(d3, b2);
    function __() {
      this.constructor = d3;
    }
    d3.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
  };
}();
var VueFrameworkOverrides = function(_super) {
  __extends(VueFrameworkOverrides2, _super);
  function VueFrameworkOverrides2(parent) {
    var _this = _super.call(this) || this;
    _this.parent = parent;
    return _this;
  }
  VueFrameworkOverrides2.prototype.frameworkComponent = function(name, components) {
    var result = !!VueComponentFactory.searchForComponentInstance(this.parent, name, 10, true) ? name : null;
    if (!result && components && components[name]) {
      var indirectName = components[name];
      result = !!VueComponentFactory.searchForComponentInstance(this.parent, indirectName, 10, true) ? indirectName : null;
    }
    return result;
  };
  VueFrameworkOverrides2.prototype.isFrameworkComponent = function(comp) {
    return typeof comp === "object";
  };
  return VueFrameworkOverrides2;
}(VanillaFrameworkOverrides);
var __assign = globalThis && globalThis.__assign || function() {
  __assign = Object.assign || function(t2) {
    for (var s3, i2 = 1, n = arguments.length; i2 < n; i2++) {
      s3 = arguments[i2];
      for (var p in s3)
        if (Object.prototype.hasOwnProperty.call(s3, p))
          t2[p] = s3[p];
    }
    return t2;
  };
  return __assign.apply(this, arguments);
};
var ROW_DATA_EVENTS = ["rowDataChanged", "rowDataUpdated", "cellValueChanged", "rowValueChanged"];
var DATA_MODEL_ATTR_NAME = "onUpdate:modelValue";
var DATA_MODEL_EMIT_NAME = "update:modelValue";
var _a = getAgGridProperties();
var props = _a[0];
var watch2 = _a[1];
var AgGridVue = defineComponent({
  render: function() {
    return h("div");
  },
  props: __assign({ gridOptions: {
    type: Object,
    default: function() {
      return {};
    }
  }, autoParamsRefresh: {
    type: Boolean,
    default: function() {
      return false;
    }
  }, componentDependencies: {
    type: Array,
    default: function() {
      return [];
    }
  }, plugins: [], modules: {
    type: Array,
    default: function() {
      return [];
    }
  }, modelValue: {
    type: Array,
    default: void 0,
    required: false
  } }, props),
  data: function() {
    return {
      gridCreated: false,
      isDestroyed: false,
      gridReadyFired: false,
      emitRowModel: void 0
    };
  },
  watch: __assign({ modelValue: {
    handler: function(currentValue, previousValue) {
      this.processChanges("rowData", currentValue, previousValue);
    },
    deep: true
  } }, watch2),
  methods: {
    globalEventListener: function(eventType, event) {
      if (this.isDestroyed) {
        return;
      }
      if (eventType === "gridReady") {
        this.gridReadyFired = true;
      }
      this.updateModelIfUsed(eventType);
    },
    processChanges: function(propertyName, currentValue, previousValue) {
      if (this.gridCreated) {
        if (this.skipChange(propertyName, currentValue, previousValue)) {
          return;
        }
        var changes = {};
        changes[propertyName] = {
          currentValue: propertyName === "rowData" ? Object.isFrozen(currentValue) ? currentValue : markRaw(toRaw2(currentValue)) : currentValue,
          previousValue
        };
        ComponentUtil.processOnChange(changes, this.gridOptions, this.gridOptions.api, this.gridOptions.columnApi);
      }
    },
    checkForBindingConflicts: function() {
      var thisAsAny = this;
      if ((thisAsAny.rowData || this.gridOptions.rowData) && thisAsAny.modelValue) {
        console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.");
      }
    },
    getRowData: function() {
      var rowData = [];
      this.gridOptions.api.forEachNode(function(rowNode) {
        rowData.push(rowNode.data);
      });
      return rowData;
    },
    updateModelIfUsed: function(eventType) {
      if (this.gridReadyFired && this.$attrs[DATA_MODEL_ATTR_NAME] && ROW_DATA_EVENTS.indexOf(eventType) !== -1) {
        if (this.emitRowModel) {
          this.emitRowModel();
        }
      }
    },
    getRowDataBasedOnBindings: function() {
      var thisAsAny = this;
      var rowData = thisAsAny.modelValue;
      return rowData ? rowData : thisAsAny.rowData ? thisAsAny.rowData : thisAsAny.gridOptions.rowData;
    },
    skipChange: function(propertyName, currentValue, previousValue) {
      if (this.gridReadyFired && propertyName === "rowData" && this.$attrs[DATA_MODEL_ATTR_NAME]) {
        if (currentValue === previousValue) {
          return true;
        }
        if (currentValue && previousValue) {
          var currentRowData = currentValue;
          var previousRowData = previousValue;
          if (currentRowData.length === previousRowData.length) {
            for (var i2 = 0; i2 < currentRowData.length; i2++) {
              if (currentRowData[i2] !== previousRowData[i2]) {
                return false;
              }
            }
            return true;
          }
        }
      }
      return false;
    },
    debounce: function(func, delay) {
      var timeout;
      return function() {
        var later = function() {
          func();
        };
        window.clearTimeout(timeout);
        timeout = window.setTimeout(later, delay);
      };
    }
  },
  mounted: function() {
    var _this = this;
    this.emitRowModel = this.debounce(function() {
      _this.$emit(DATA_MODEL_EMIT_NAME, Object.freeze(_this.getRowData()));
    }, 20);
    var frameworkComponentWrapper = new VueFrameworkComponentWrapper(this);
    var gridOptions = markRaw(ComponentUtil.copyAttributesToGridOptions(toRaw2(this.gridOptions), this));
    this.checkForBindingConflicts();
    var rowData = this.getRowDataBasedOnBindings();
    gridOptions.rowData = rowData ? Object.isFrozen(rowData) ? rowData : markRaw(toRaw2(rowData)) : rowData;
    if (AgGridColumn.hasChildColumns(this.$slots)) {
      gridOptions.columnDefs = AgGridColumn.mapChildColumnDefs(this.$slots);
    }
    var gridParams = {
      globalEventListener: this.globalEventListener.bind(this),
      frameworkOverrides: new VueFrameworkOverrides(this),
      providedBeanInstances: {
        frameworkComponentWrapper
      },
      modules: this.modules
    };
    new Grid(this.$el, gridOptions, gridParams);
    this.gridCreated = true;
  },
  unmounted: function() {
    if (this.gridCreated) {
      if (this.gridOptions.api) {
        this.gridOptions.api.destroy();
      }
      this.isDestroyed = true;
    }
  }
});
var _hoisted_1$m = { class: "hy-table" };
var _hoisted_2$h = {
  key: 0,
  class: "table-title fs-title-lg fw-bold"
};
var _sfc_main$t = defineComponent({
  props: {
    rowData: null,
    columnDefs: null,
    title: null,
    rowHeight: null,
    action: null
  },
  emits: ["columnMoved", "columnVisible", "filterChanged", "sortChanged", "modelUpdated", "apiReady"],
  setup(__props, { emit }) {
    const props2 = __props;
    const defaultColDef = {
      filter: true,
      filterParams: {
        filterOptions: ["contains"],
        suppressAndOrCondition: true,
        debounceMs: 1500,
        trimInput: true,
        textMatcher: () => true
      },
      floatingFilter: true,
      suppressMenu: true,
      resizable: true,
      comparator: () => 0
    };
    const actionColumn = {
      field: "action",
      headerName: "",
      filter: false,
      lockPosition: "right",
      pinned: "right",
      width: 50,
      cellRenderer: _sfc_main$r,
      cellRendererParams: {
        interactive: true
      },
      cellStyle: { cursor: "pointer" },
      onCellClicked: (e2) => {
        var _a2;
        (_a2 = props2.action) == null ? void 0 : _a2.onClick(e2.data);
      }
    };
    const rows = computed(() => {
      return props2.action ? props2.rowData.map((r) => {
        var _a2;
        return { ...r, action: (_a2 = props2.action) == null ? void 0 : _a2.icon };
      }) : props2.rowData;
    });
    let gridApi = null;
    const onGridReady = (e2) => {
      gridApi = e2.api;
      emit("apiReady", e2.api);
    };
    const onColumnMoved = (e2) => {
      var _a2;
      emit("columnMoved", {
        field: (_a2 = e2.column) == null ? void 0 : _a2.getColDef().field,
        toIndex: e2.toIndex,
        allGridColumns: e2.columnApi.getAllGridColumns()
      });
    };
    const onColumnVisible = (e2) => {
      var _a2;
      if (!e2.visible) {
        emit("columnVisible", {
          hiddenField: (_a2 = e2.column) == null ? void 0 : _a2.getColDef().field,
          displayedColumns: e2.columnApi.getAllDisplayedColumns()
        });
      }
    };
    const onFilterChanged = (e2) => {
      if (!gridApi) {
        return;
      }
      const filterModelKey = Object.keys(gridApi.getFilterModel());
      const filterModelValue = Object.values(gridApi.getFilterModel());
      let filterModel = filterModelKey.map((val, key) => {
        return {
          field: val,
          ...filterModelValue[key]
        };
      });
      emit("filterChanged", {
        field: e2.columns[0].getColDef().field,
        filterModel
      });
    };
    const onSortChanged = (e2) => {
      const sortState = e2.columnApi.getColumnState().filter((val) => val.sort).map((val) => {
        return {
          field: val.colId,
          sort: val.sort,
          sortOrder: val.sortIndex
        };
      });
      emit("sortChanged", { sortState });
    };
    const onModelupdated = (e2) => {
      emit("modelUpdated", {
        rowCount: e2.api.getDisplayedRowCount(),
        renderedRows: e2.api.getRenderedNodes().map((e22) => e22.data)
      });
    };
    watch(() => props2.columnDefs, (cols) => {
      if (props2.action && !cols.find((col) => col.field === "action")) {
        cols.push(actionColumn);
      }
      gridApi == null ? void 0 : gridApi.setColumnDefs([]);
      gridApi == null ? void 0 : gridApi.setColumnDefs(cols);
    }, { immediate: true });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$m, [
        props2.title ? (openBlock(), createElementBlock("div", _hoisted_2$h, toDisplayString(__props.title), 1)) : createCommentVNode("", true),
        createVNode(unref(AgGridVue), {
          class: "ag-theme-alpine ta-left",
          "row-data": unref(rows),
          "column-defs": __props.columnDefs,
          "default-col-def": defaultColDef,
          "row-height": __props.rowHeight,
          "dom-layout": "autoHeight",
          "un-sort-icon": "",
          "always-multi-sort": "",
          "enable-cell-text-selection": "",
          "no-rows-overlay-component": _sfc_main$u,
          onGridReady,
          onColumnVisible,
          onFilterChanged,
          onModelUpdated: onModelupdated,
          onColumnMoved,
          onSortChanged
        }, null, 8, ["row-data", "column-defs", "row-height"])
      ]);
    };
  }
});
var _hoisted_1$l = { class: "hy-pagination" };
var _hoisted_2$g = { key: 0 };
var _hoisted_3$f = ["disabled", "onClick"];
var _sfc_main$s = defineComponent({
  props: {
    totalItems: null,
    endPage: null,
    currentPage: null
  },
  emits: ["paginationChanged"],
  setup(__props, { emit }) {
    const props2 = __props;
    const pageStart = 1;
    const rangeLimit = 4;
    const rangeFrom = computed(() => Math.max(props2.currentPage - (rangeLimit / 2 - 1), 1));
    const rangeTo = computed(() => Math.min(rangeFrom.value + (rangeLimit - 1), props2.endPage));
    const ranges = computed(() => setRange(rangeFrom.value, rangeTo.value, props2.endPage));
    const setRange = (from, to2, end) => {
      const ellipsisStart = rangeLimit / 2;
      const ellipsisEnd = end - ellipsisStart;
      let result = [];
      for (let i2 = from; i2 <= to2; i2++) {
        result.push(i2);
      }
      if (result[0] > ellipsisStart) {
        result.splice(0, 0, null);
      }
      if (result[result.length - 1] <= ellipsisEnd) {
        result.splice(result.length, 0, null);
      }
      if (result[0] !== pageStart) {
        result.splice(0, 0, pageStart);
      }
      if (result[result.length - 1] !== end) {
        result.push(end);
      }
      return result;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$l, [
        createBaseVNode("span", null, toDisplayString(props2.totalItems) + " Items", 1),
        createVNode(unref(_sfc_main$1w), {
          icon: unref(Icons).NAVIGATE_BEFORE,
          disabled: props2.currentPage === pageStart,
          onClick: _cache[0] || (_cache[0] = ($event) => emit("paginationChanged", props2.currentPage - 1))
        }, null, 8, ["icon", "disabled"]),
        (openBlock(true), createElementBlock(Fragment, null, renderList(unref(ranges), (r) => {
          return openBlock(), createElementBlock(Fragment, { key: r }, [
            r === null ? (openBlock(), createElementBlock("span", _hoisted_2$g, "...")) : (openBlock(), createElementBlock("button", {
              key: 1,
              class: normalizeClass({ active: r === props2.currentPage }),
              disabled: r === props2.currentPage,
              onClick: ($event) => emit("paginationChanged", r)
            }, toDisplayString(r), 11, _hoisted_3$f))
          ], 64);
        }), 128)),
        createVNode(unref(_sfc_main$1w), {
          icon: unref(Icons).NAVIGATE_NEXT,
          disabled: props2.currentPage === props2.endPage,
          onClick: _cache[1] || (_cache[1] = ($event) => emit("paginationChanged", props2.currentPage + 1))
        }, null, 8, ["icon", "disabled"])
      ]);
    };
  }
});
var _sfc_main$r = defineComponent({
  props: {
    params: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return typeof __props.params.value === "boolean" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
        __props.params.value ? (openBlock(), createBlock(unref(_sfc_main$1w), {
          key: 0,
          icon: unref(Icons).FILE_FILLED,
          class: "text-primary",
          interactive: __props.params.interactive
        }, null, 8, ["icon", "interactive"])) : (openBlock(), createBlock(unref(_sfc_main$1w), {
          key: 1,
          icon: unref(Icons).FILE,
          interactive: __props.params.interactive
        }, null, 8, ["icon", "interactive"]))
      ], 64)) : (openBlock(), createBlock(unref(_sfc_main$1w), {
        key: 1,
        icon: __props.params.value,
        interactive: __props.params.interactive
      }, null, 8, ["icon", "interactive"]));
    };
  }
});
var _sfc_main$q = defineComponent({
  props: {
    params: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(_sfc_main$1x), {
        label: __props.params.value,
        variant: __props.params.variant
      }, null, 8, ["label", "variant"]);
    };
  }
});
var __default__$1 = {
  methods: {
    onParentModelChanged() {
      return;
    }
  }
};
var _sfc_main$p = defineComponent({
  ...__default__$1,
  props: {
    params: null
  },
  setup(__props) {
    const props2 = __props;
    const current2 = props2.params.isMultiple ? ref([]) : ref("");
    const date2 = ref("");
    const onSelectOption = () => {
      props2.params.parentFilterInstance((instance) => {
        props2.params.isDatePicker ? instance.onFloatingFilterChanged("contains", date2.value) : instance.onFloatingFilterChanged("contains", current2.value);
      });
    };
    return (_ctx, _cache) => {
      var _a2;
      return props2.params.isDatePicker ? (openBlock(), createBlock(unref(ElDatePicker), {
        key: 0,
        modelValue: date2.value,
        "onUpdate:modelValue": [
          _cache[0] || (_cache[0] = ($event) => date2.value = $event),
          onSelectOption
        ],
        editable: false,
        type: "daterange",
        "start-placeholder": "start",
        "end-placeholder": "end",
        "value-format": "YYYY-MM-DD"
      }, null, 8, ["modelValue"])) : (openBlock(), createBlock(unref(_sfc_main$h), {
        key: 1,
        modelValue: unref(current2),
        "onUpdate:modelValue": [
          _cache[1] || (_cache[1] = ($event) => isRef(current2) ? current2.value = $event : null),
          onSelectOption
        ],
        "option-list": (_a2 = props2.params.options) != null ? _a2 : [],
        multiple: props2.params.isMultiple,
        "collapse-tags": props2.params.isMultiple,
        "collapse-tags-tooltip": props2.params.isMultiple,
        clearable: !props2.params.isMultiple,
        size: "default",
        filterable: ""
      }, null, 8, ["modelValue", "option-list", "multiple", "collapse-tags", "collapse-tags-tooltip", "clearable"]));
    };
  }
});
var __default__ = {
  methods: {
    onParentModelChanged() {
      return;
    }
  }
};
var _sfc_main$o = defineComponent({
  ...__default__,
  props: {
    params: null
  },
  setup(__props) {
    const props2 = __props;
    const current2 = ref("");
    const onValueUpdate = () => {
      props2.params.parentFilterInstance((instance) => {
        instance.onFloatingFilterChanged("contains", current2.value);
      });
    };
    const clearText = () => {
      current2.value = "";
      onValueUpdate();
    };
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(_sfc_main$e), {
        modelValue: current2.value,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => current2.value = $event),
        "is-outlined": "",
        placeholder: __props.params.placeholder,
        type: __props.params.type,
        min: __props.params.min,
        max: __props.params.max,
        maxlength: __props.params.maxlength,
        "trailing-icon": current2.value.length > 0 ? unref(Icons).CANCEL : void 0,
        onKeyup: withKeys(onValueUpdate, ["enter"]),
        onClickIcon: clearText
      }, null, 8, ["modelValue", "placeholder", "type", "min", "max", "maxlength", "trailing-icon", "onKeyup"]);
    };
  }
});
var _hoisted_1$k = createTextVNode(" Column Panel ");
var _hoisted_2$f = { class: "hy-column-panel-option-list shadow-lg" };
var _hoisted_3$e = ["onClick"];
var _sfc_main$n = defineComponent({
  props: {
    columnDefs: null
  },
  emits: ["selectOption"],
  setup(__props, { emit }) {
    const props2 = __props;
    const All = "All";
    const showOption = ref(false);
    const selectedOptionList = ref([]);
    const columnPanelEl = ref(null);
    const optionList = computed(() => {
      const defaultOptionList = [{ value: All }];
      const options = props2.columnDefs.filter((columnDef) => !columnDef.pinned).map((columnDef) => ({ value: columnDef.field }));
      return defaultOptionList.concat(options);
    });
    useClickAway(columnPanelEl, () => {
      showOption.value = false;
    });
    const onClickButton = () => {
      showOption.value = !showOption.value;
    };
    const getIsSelected = (option2) => {
      return option2.value === All ? selectedOptionList.value.length === optionList.value.length - 1 : selectedOptionList.value.find((candidateOption) => candidateOption.value === option2.value);
    };
    const selectAllOptions = () => {
      const allOptions = optionList.value.filter((option2) => option2.value !== All);
      selectedOptionList.value = allOptions;
    };
    const onClickOption = (option2) => {
      if (option2.value == All) {
        selectAllOptions();
      } else {
        const isSelected = getIsSelected(option2);
        if (isSelected) {
          selectedOptionList.value = selectedOptionList.value.filter((candidateOption) => candidateOption.value !== option2.value);
        } else {
          selectedOptionList.value.push(option2);
        }
      }
      const newColumnDefs = props2.columnDefs.map((columnDef) => {
        const matched = selectedOptionList.value.find((option22) => option22.value === columnDef.field);
        if (columnDef.pinned) {
          return columnDef;
        } else {
          return {
            ...columnDef,
            hide: !matched
          };
        }
      });
      emit("selectOption", newColumnDefs);
    };
    onMounted(() => {
      selectAllOptions();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "columnPanelEl",
        ref: columnPanelEl,
        class: "hy-column-panel"
      }, [
        createVNode(unref(_sfc_main$1u), {
          type: "tonal",
          icon: unref(Icons).VISIBILITY,
          onClick: onClickButton
        }, {
          default: withCtx(() => [
            _hoisted_1$k
          ]),
          _: 1
        }, 8, ["icon"]),
        withDirectives(createBaseVNode("ul", _hoisted_2$f, [
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(optionList), (option2) => {
            return openBlock(), createElementBlock("li", {
              key: option2.value,
              class: normalizeClass(["option-item", { selected: getIsSelected(option2) }]),
              onClick: ($event) => onClickOption(option2)
            }, [
              createBaseVNode("div", null, [
                option2.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
                  key: 0,
                  icon: option2.icon,
                  class: "mr-2"
                }, null, 8, ["icon"])) : createCommentVNode("", true),
                createBaseVNode("span", null, toDisplayString(option2.label || option2.value), 1)
              ]),
              getIsSelected(option2) ? (openBlock(), createBlock(unref(_sfc_main$1w), {
                key: 0,
                icon: unref(Icons).CHECK,
                class: "mr-2"
              }, null, 8, ["icon"])) : createCommentVNode("", true)
            ], 10, _hoisted_3$e);
          }), 128))
        ], 512), [
          [vShow, showOption.value]
        ])
      ], 512);
    };
  }
});
var _hoisted_1$j = { class: "flex justify-space-between hy-form-group-header" };
var _hoisted_2$e = { class: "form-title text-on-surface fs-title-lg lh-display fw-bold" };
var _hoisted_3$d = { class: "ml-3" };
var _hoisted_4$b = { class: "hy-form-group-header-action" };
var _sfc_main$m = defineComponent({
  props: {
    title: null,
    borderTop: { type: Boolean }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["hy-form-group", { "border-top": __props.borderTop }])
      }, [
        createBaseVNode("div", _hoisted_1$j, [
          createBaseVNode("div", _hoisted_2$e, [
            createBaseVNode("span", null, toDisplayString(__props.title), 1),
            createBaseVNode("span", _hoisted_3$d, [
              renderSlot(_ctx.$slots, "stage")
            ])
          ]),
          createBaseVNode("div", _hoisted_4$b, [
            renderSlot(_ctx.$slots, "action")
          ])
        ]),
        renderSlot(_ctx.$slots, "default")
      ], 2);
    };
  }
});
var _hoisted_1$i = ["error"];
var _hoisted_2$d = ["required"];
var _hoisted_3$c = { class: "ml-2" };
var _hoisted_4$a = { class: "form-list-note" };
var _sfc_main$l = defineComponent({
  props: {
    required: { type: Boolean },
    isError: { type: Boolean },
    subtitle: null,
    note: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: "hy-form-list",
        error: __props.isError
      }, [
        __props.subtitle ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: normalizeClass(["form-subtitle", "fw-normal", "my-2", { required: __props.required }])
        }, [
          __props.required ? (openBlock(), createElementBlock("span", {
            key: 0,
            required: __props.required
          }, null, 8, _hoisted_2$d)) : createCommentVNode("", true),
          createTextVNode(" " + toDisplayString(__props.subtitle) + " ", 1),
          createBaseVNode("span", _hoisted_3$c, [
            renderSlot(_ctx.$slots, "info")
          ])
        ], 2)) : createCommentVNode("", true),
        renderSlot(_ctx.$slots, "default"),
        createBaseVNode("small", _hoisted_4$a, toDisplayString(__props.note), 1)
      ], 8, _hoisted_1$i);
    };
  }
});
var _hoisted_1$h = {
  key: 0,
  class: "list-subtitle fw-semi-bold"
};
var _hoisted_2$c = { class: "list-action" };
var _sfc_main$k = defineComponent({
  props: {
    subtitle: null,
    trailingIcon: null,
    noDivider: { type: Boolean },
    isHeader: { type: Boolean },
    hasOption: { type: Boolean },
    showOption: { type: Boolean }
  },
  emits: ["clickIcon"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["hy-list-item", { divider: !__props.noDivider }, { header: __props.isHeader }])
      }, [
        __props.subtitle ? (openBlock(), createElementBlock("div", _hoisted_1$h, toDisplayString(__props.subtitle), 1)) : createCommentVNode("", true),
        createBaseVNode("div", {
          class: normalizeClass(["row", { "fs-title-sm": __props.isHeader }])
        }, [
          renderSlot(_ctx.$slots, "default")
        ], 2),
        createBaseVNode("div", _hoisted_2$c, [
          renderSlot(_ctx.$slots, "option"),
          __props.hasOption ? (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 0,
            icon: __props.showOption ? unref(Icons).CLOSE : unref(Icons).MORE,
            onClick: _cache[0] || (_cache[0] = ($event) => emit("clickIcon"))
          }, null, 8, ["icon"])) : __props.trailingIcon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
            key: 1,
            icon: __props.trailingIcon
          }, null, 8, ["icon"])) : createCommentVNode("", true)
        ])
      ], 2);
    };
  }
});
var _sfc_main$j = {};
var _hoisted_1$g = { class: "hy-list-group mt-3" };
function _sfc_render(_ctx, _cache) {
  return openBlock(), createElementBlock("div", _hoisted_1$g, [
    renderSlot(_ctx.$slots, "default")
  ]);
}
var ListGroup = _export_sfc$1(_sfc_main$j, [["render", _sfc_render]]);
var _hoisted_1$f = {
  key: 0,
  class: "hy-list-option shadow-lg"
};
var _hoisted_2$b = ["disabled", "onClick"];
var _hoisted_3$b = ["src"];
var _sfc_main$i = defineComponent({
  props: {
    optionList: null,
    showOption: { type: Boolean }
  },
  emits: ["selectOption"],
  setup(__props, { emit }) {
    const isFromIcons = (icon) => Object.values(Icons).includes(icon);
    return (_ctx, _cache) => {
      return __props.showOption ? (openBlock(), createElementBlock("ul", _hoisted_1$f, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(__props.optionList, (o) => {
          return openBlock(), createElementBlock("li", {
            key: o.value,
            disabled: o.disabled,
            class: "option-item",
            onClick: ($event) => o.disabled ? null : emit("selectOption", o.value)
          }, [
            isFromIcons(o.icon) ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              icon: o.icon,
              class: "mr-2"
            }, null, 8, ["icon"])) : (openBlock(), createElementBlock("img", {
              key: 1,
              src: o.icon,
              alt: "",
              class: "mr-2"
            }, null, 8, _hoisted_3$b)),
            createBaseVNode("span", null, toDisplayString(o.label || o.value), 1)
          ], 8, _hoisted_2$b);
        }), 128))
      ])) : createCommentVNode("", true);
    };
  }
});
var _hoisted_1$e = ["error"];
var _hoisted_2$a = { class: "flex justify-space-between align-items-center" };
var _hoisted_3$a = { class: "select-label px-1" };
var _hoisted_4$9 = ["required"];
var _hoisted_5$5 = {
  key: 0,
  class: "select-note"
};
var _sfc_main$h = defineComponent({
  props: {
    modelValue: null,
    optionList: null,
    size: null,
    label: null,
    placeholder: null,
    required: { type: Boolean },
    multiple: { type: Boolean },
    collapseTags: { type: Boolean },
    collapseTagsTooltip: { type: Boolean },
    filterable: { type: Boolean },
    clearable: { type: Boolean },
    disabled: { type: Boolean },
    isError: { type: Boolean },
    note: null,
    name: null,
    isRemoteControllable: { type: Boolean },
    creatable: { type: Boolean },
    filterMethod: null
  },
  emits: ["update:modelValue", "blur"],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const ElSelectRef = ref();
    const showOption = () => {
      if (props2.isRemoteControllable) {
        ElSelectRef.value.focus();
      }
    };
    expose({
      showOption
    });
    return (_ctx, _cache) => {
      var _a2;
      return openBlock(), createElementBlock("div", {
        class: "hy-select",
        error: __props.isError
      }, [
        createVNode(unref(ElSelect), {
          ref_key: "ElSelectRef",
          ref: ElSelectRef,
          "automatic-dropdown": __props.isRemoteControllable,
          name: __props.name,
          "filter-method": __props.filterMethod,
          "model-value": __props.modelValue === null ? void 0 : __props.modelValue,
          "allow-create": __props.creatable,
          filterable: __props.filterable,
          clearable: __props.clearable,
          multiple: __props.multiple,
          "collapse-tags": __props.collapseTags,
          "collapse-tags-tooltip": __props.collapseTagsTooltip,
          disabled: __props.disabled,
          placeholder: (_a2 = __props.placeholder) != null ? _a2 : __props.filterable ? "search" : "select",
          size: __props.size === void 0 ? "large" : __props.size,
          "fit-input-width": "",
          class: "w-100",
          onBlur: _cache[0] || (_cache[0] = ($event) => emit("blur")),
          "onUpdate:modelValue": _cache[1] || (_cache[1] = (...args) => emit("update:modelValue", args[0]))
        }, {
          default: withCtx(() => [
            (openBlock(true), createElementBlock(Fragment, null, renderList(__props.optionList, (o) => {
              return openBlock(), createBlock(unref(ElOption), {
                key: o.value,
                label: o.label,
                value: o.value,
                disabled: o.disabled,
                class: normalizeClass({ "display-none": o.hidden })
              }, {
                default: withCtx(() => [
                  createBaseVNode("div", _hoisted_2$a, [
                    createBaseVNode("span", null, toDisplayString(o.label || (unref(isObject)(o.value) ? "" : o.value)), 1),
                    o.tip ? (openBlock(), createElementBlock("span", {
                      key: 0,
                      class: "fs-body fw-normal pr-2",
                      style: normalizeStyle({ color: o.disabled ? "#707973" : "inherit" })
                    }, toDisplayString(o.tip), 5)) : createCommentVNode("", true)
                  ])
                ]),
                _: 2
              }, 1032, ["label", "value", "disabled", "class"]);
            }), 128))
          ]),
          _: 1
        }, 8, ["automatic-dropdown", "name", "filter-method", "model-value", "allow-create", "filterable", "clearable", "multiple", "collapse-tags", "collapse-tags-tooltip", "disabled", "placeholder", "size"]),
        createBaseVNode("small", _hoisted_3$a, [
          __props.required ? (openBlock(), createElementBlock("span", {
            key: 0,
            required: __props.required
          }, null, 8, _hoisted_4$9)) : createCommentVNode("", true),
          createTextVNode(" " + toDisplayString(__props.label), 1)
        ]),
        __props.note ? (openBlock(), createElementBlock("small", _hoisted_5$5, toDisplayString(__props.note), 1)) : createCommentVNode("", true)
      ], 8, _hoisted_1$e);
    };
  }
});
var _hoisted_1$d = ["error"];
var _hoisted_2$9 = { class: "select-label px-1" };
var _hoisted_3$9 = ["required"];
var _hoisted_4$8 = {
  key: 0,
  class: "select-note"
};
var _sfc_main$g = defineComponent({
  props: {
    modelValue: null,
    groupOptionList: null,
    size: null,
    label: null,
    placeholder: null,
    required: { type: Boolean },
    multiple: { type: Boolean },
    collapseTags: { type: Boolean },
    collapseTagsTooltip: { type: Boolean },
    filterable: { type: Boolean },
    clearable: { type: Boolean },
    disabled: { type: Boolean },
    isError: { type: Boolean },
    note: null,
    name: null,
    isRemoteControllable: { type: Boolean },
    creatable: { type: Boolean },
    isSelectOneGroup: { type: Boolean }
  },
  emits: ["update:modelValue", "blur"],
  setup(__props, { expose, emit }) {
    const props2 = __props;
    const ElSelectRef = ref();
    const showOption = () => {
      if (props2.isRemoteControllable) {
        ElSelectRef.value.focus();
      }
    };
    const filteredGroupOptionList = computed(() => {
      if (props2.isSelectOneGroup && props2.multiple && props2.modelValue.length) {
        const matchedGroup = props2.groupOptionList.find((group) => {
          return group.optionList.find((option2) => option2.value == props2.modelValue[0]);
        });
        const matchedGroupLabel = matchedGroup == null ? void 0 : matchedGroup.label;
        return props2.groupOptionList.map((group) => {
          if (group.label === matchedGroupLabel)
            return group;
          return {
            label: group.label,
            optionList: group.optionList.map((option2) => {
              return {
                ...option2,
                disabled: true
              };
            })
          };
        });
      }
      return props2.groupOptionList;
    });
    expose({
      showOption
    });
    return (_ctx, _cache) => {
      var _a2;
      return openBlock(), createElementBlock("div", {
        class: "hy-select",
        error: __props.isError
      }, [
        createVNode(unref(ElSelect), {
          ref_key: "ElSelectRef",
          ref: ElSelectRef,
          "automatic-dropdown": __props.isRemoteControllable,
          name: __props.name,
          "model-value": __props.modelValue === null ? void 0 : __props.modelValue,
          "allow-create": __props.creatable,
          filterable: __props.filterable,
          clearable: __props.clearable,
          multiple: __props.multiple,
          "collapse-tags": __props.collapseTags,
          "collapse-tags-tooltip": __props.collapseTagsTooltip,
          disabled: __props.disabled,
          placeholder: (_a2 = __props.placeholder) != null ? _a2 : __props.filterable ? "search" : "select",
          size: __props.size === void 0 ? "large" : __props.size,
          "fit-input-width": "",
          class: "w-100",
          onBlur: _cache[0] || (_cache[0] = ($event) => emit("blur")),
          "onUpdate:modelValue": _cache[1] || (_cache[1] = (...args) => emit("update:modelValue", args[0]))
        }, {
          default: withCtx(() => [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(filteredGroupOptionList), (group) => {
              return openBlock(), createBlock(unref(ElOptionGroup), {
                key: group.label,
                label: group.label
              }, {
                default: withCtx(() => [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(group.optionList, (o) => {
                    return openBlock(), createBlock(unref(ElOption), {
                      key: o.value,
                      label: o.label,
                      value: o.value,
                      disabled: o.disabled,
                      class: normalizeClass({ "display-none": o.hidden })
                    }, null, 8, ["label", "value", "disabled", "class"]);
                  }), 128))
                ]),
                _: 2
              }, 1032, ["label"]);
            }), 128))
          ]),
          _: 1
        }, 8, ["automatic-dropdown", "name", "model-value", "allow-create", "filterable", "clearable", "multiple", "collapse-tags", "collapse-tags-tooltip", "disabled", "placeholder", "size"]),
        createBaseVNode("small", _hoisted_2$9, [
          __props.required ? (openBlock(), createElementBlock("span", {
            key: 0,
            required: __props.required
          }, null, 8, _hoisted_3$9)) : createCommentVNode("", true),
          createTextVNode(" " + toDisplayString(__props.label), 1)
        ]),
        __props.note ? (openBlock(), createElementBlock("small", _hoisted_4$8, toDisplayString(__props.note), 1)) : createCommentVNode("", true)
      ], 8, _hoisted_1$d);
    };
  }
});
var _hoisted_1$c = ["variant"];
var _hoisted_2$8 = ["name", "disabled", "value", "checked", "onChange"];
var _hoisted_3$8 = { class: "ml-3" };
var _hoisted_4$7 = { class: "input-note" };
var _sfc_main$f = defineComponent({
  props: {
    name: null,
    radioList: null,
    modelValue: { type: [String, Number, Boolean, null] },
    disabled: { type: Boolean },
    variant: null,
    note: null
  },
  emits: ["update:modelValue"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["hy-radio-list-group", { "opacity-25": __props.disabled }]),
        variant: __props.variant
      }, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(__props.radioList, (radio) => {
          return openBlock(), createElementBlock("div", {
            key: radio.label,
            class: normalizeClass(["hy-radio", { "opacity-25": radio.disabled }])
          }, [
            createBaseVNode("label", null, [
              createBaseVNode("input", {
                type: "radio",
                name: __props.name,
                disabled: __props.disabled || radio.disabled,
                value: radio.value,
                checked: radio.value === __props.modelValue,
                onChange: ($event) => emit("update:modelValue", radio.value)
              }, null, 40, _hoisted_2$8),
              createBaseVNode("span", _hoisted_3$8, toDisplayString(radio.label), 1)
            ])
          ], 2);
        }), 128)),
        createBaseVNode("small", _hoisted_4$7, toDisplayString(__props.note), 1)
      ], 10, _hoisted_1$c);
    };
  }
});
var _hoisted_1$b = ["variant"];
var _hoisted_2$7 = { class: "input-wrapper" };
var _hoisted_3$7 = { class: "leading-icon" };
var _hoisted_4$6 = { class: "input-label px-1" };
var _hoisted_5$4 = {
  key: 0,
  required: ""
};
var _hoisted_6$4 = { class: "input-text-group" };
var _hoisted_7$3 = ["name", "value", "placeholder", "disabled", "type", "min", "max", "maxlength"];
var _hoisted_8$2 = { class: "trailing-field" };
var _hoisted_9 = { key: 1 };
var _hoisted_10 = { class: "input-note" };
var _sfc_main$e = defineComponent({
  props: {
    modelValue: null,
    variant: null,
    type: null,
    placeholder: null,
    min: null,
    max: null,
    maxlength: null,
    label: null,
    note: null,
    disabled: { type: Boolean },
    required: { type: Boolean },
    isOutlined: { type: Boolean },
    leadingIcon: null,
    trailingIcon: null,
    name: null,
    trailingText: null
  },
  emits: ["update:modelValue", "clickIcon"],
  setup(__props, { emit }) {
    const props2 = __props;
    const hasIcon = computed(() => props2.leadingIcon || props2.trailingIcon);
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass([__props.isOutlined ? "hy-input-outlined" : "hy-input-filled", { "opacity-50": __props.disabled }]),
        variant: __props.variant
      }, [
        createBaseVNode("div", _hoisted_2$7, [
          createBaseVNode("div", _hoisted_3$7, [
            __props.leadingIcon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              tabindex: "-1",
              icon: __props.leadingIcon,
              class: "text-on-surface-variant"
            }, null, 8, ["icon"])) : createCommentVNode("", true)
          ]),
          createBaseVNode("label", null, [
            createBaseVNode("span", _hoisted_4$6, [
              __props.required ? (openBlock(), createElementBlock("span", _hoisted_5$4)) : createCommentVNode("", true),
              createTextVNode(" " + toDisplayString(__props.label), 1)
            ]),
            createBaseVNode("div", _hoisted_6$4, [
              renderSlot(_ctx.$slots, "default"),
              createBaseVNode("input", {
                name: __props.name,
                value: __props.modelValue,
                placeholder: __props.placeholder,
                disabled: __props.disabled,
                type: __props.type,
                min: __props.min,
                max: __props.max,
                maxlength: __props.maxlength,
                class: normalizeClass(["input-text", { "input-text-with-icon": unref(hasIcon) }]),
                onInput: _cache[0] || (_cache[0] = ($event) => emit("update:modelValue", $event.target.value.trim()))
              }, null, 42, _hoisted_7$3)
            ])
          ]),
          createBaseVNode("div", _hoisted_8$2, [
            __props.trailingIcon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              class: "hy-trailing-icon",
              tabindex: "-1",
              icon: __props.trailingIcon,
              onClick: _cache[1] || (_cache[1] = (e2) => emit("clickIcon", e2))
            }, null, 8, ["icon"])) : createCommentVNode("", true),
            __props.trailingText ? (openBlock(), createElementBlock("span", _hoisted_9, toDisplayString(__props.trailingText), 1)) : createCommentVNode("", true)
          ]),
          createBaseVNode("small", _hoisted_10, toDisplayString(__props.note), 1)
        ])
      ], 10, _hoisted_1$b);
    };
  }
});
var _hoisted_1$a = ["disabled", "selected", "onClick"];
var _sfc_main$d = defineComponent({
  props: {
    modelValue: null,
    items: null,
    density: null
  },
  emits: ["update:modelValue"],
  setup(__props, { emit }) {
    const props2 = __props;
    const padding = computed(() => {
      let x2 = 12;
      let y3 = 4;
      let result = "";
      switch (props2.density) {
        case 1:
          result = `${y3 * 2}px ${x2}px`;
          break;
        case 2:
          result = `${y3}px ${x2}px`;
          break;
        case 3:
          result = `0px ${x2}px`;
          break;
        default:
          result = `${y3 * 3}px ${x2}px`;
          break;
      }
      return result;
    });
    return (_ctx, _cache) => {
      return openBlock(true), createElementBlock(Fragment, null, renderList(__props.items, (i2, idx) => {
        return openBlock(), createElementBlock("button", {
          key: i2.value,
          disabled: i2.disabled,
          selected: __props.modelValue === i2.value,
          style: normalizeStyle({ padding: unref(padding) }),
          class: normalizeClass([
            "hy-segmented-button",
            "mb-2",
            { "first-segment": idx === 0 },
            { "last-segment": idx === __props.items.length - 1 }
          ]),
          onClick: ($event) => emit("update:modelValue", i2.value)
        }, toDisplayString(i2.label), 15, _hoisted_1$a);
      }), 128);
    };
  }
});
var _sfc_main$c = defineComponent({
  props: {
    modelValue: { type: Boolean },
    size: null,
    inlinePrompt: { type: Boolean },
    activeText: null,
    inactiveText: null,
    disabled: { type: Boolean },
    loading: { type: Boolean },
    activeColor: null,
    inactiveColor: null,
    borderColor: null,
    name: null
  },
  emits: ["update:modelValue"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", null, [
        createVNode(unref(ElSwitch), {
          name: __props.name,
          "model-value": __props.modelValue,
          size: __props.size,
          "inline-prompt": __props.inlinePrompt,
          "active-text": __props.activeText,
          "inactive-text": __props.inactiveText,
          disabled: __props.disabled,
          loading: __props.loading,
          "active-color": __props.activeColor,
          "inactive-color": __props.inactiveColor,
          "border-color": __props.borderColor,
          onChange: _cache[0] || (_cache[0] = ($event) => emit("update:modelValue", !__props.modelValue))
        }, null, 8, ["name", "model-value", "size", "inline-prompt", "active-text", "inactive-text", "disabled", "loading", "active-color", "inactive-color", "border-color"])
      ]);
    };
  }
});
var _hoisted_1$9 = { class: "edit-box" };
var _sfc_main$b = defineComponent({
  props: {
    optionsList: null
  },
  emits: ["selectOption"],
  setup(__props, { emit }) {
    const showOption = ref(false);
    const containerRef = ref();
    useClickAway(containerRef, () => {
      showOption.value = false;
    });
    const toggleOptions = () => {
      showOption.value = !showOption.value;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        ref_key: "containerRef",
        ref: containerRef,
        class: "hy-form-more-button",
        "data-testid": "form-more-icon"
      }, [
        createVNode(unref(_sfc_main$1w), {
          class: "edit-btn mt-2",
          icon: unref(Icons).MORE,
          onClick: toggleOptions
        }, null, 8, ["icon"]),
        createBaseVNode("div", _hoisted_1$9, [
          createVNode(unref(_sfc_main$i), {
            "option-list": __props.optionsList,
            "show-option": showOption.value,
            onSelectOption: _cache[0] || (_cache[0] = (value) => emit("selectOption", value))
          }, null, 8, ["option-list", "show-option"])
        ])
      ], 512);
    };
  }
});
var _sfc_main$a = defineComponent({
  props: {
    buttonText: null,
    optionList: null,
    buttonIcon: null
  },
  emits: ["selected"],
  setup(__props, { emit }) {
    const isShowOptions = ref(false);
    const selectedValue = ref("");
    const optionListWrapperRef = ref();
    const removeHideOptionalListListener = () => {
      document.body.removeEventListener("click", hideOptionalList);
    };
    const toggleOptions = () => {
      var _a2;
      isShowOptions.value = !isShowOptions.value;
      isShowOptions.value ? document.body.addEventListener("click", hideOptionalList) : removeHideOptionalListListener();
      const select2 = (_a2 = optionListWrapperRef.value) == null ? void 0 : _a2.querySelector(".el-select");
      if (select2) {
        select2.click();
      }
    };
    const hideOptionalList = (event) => {
      const targetElement = event.target;
      if (isShowOptions.value && !targetElement.closest("#optionListWrapper") && !targetElement.closest(".el-select__popper")) {
        isShowOptions.value = false;
        removeHideOptionalListListener();
      }
    };
    watch(selectedValue, (value) => {
      if (value !== "") {
        emit("selected", value);
        isShowOptions.value = false;
        removeHideOptionalListListener();
        selectedValue.value = "";
      }
    });
    onBeforeUnmount(() => {
      removeHideOptionalListListener();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        id: "optionListWrapper",
        ref_key: "optionListWrapperRef",
        ref: optionListWrapperRef,
        onClick: hideOptionalList
      }, [
        createBaseVNode("div", {
          class: "flex hy-optional-button",
          onClick: toggleOptions
        }, [
          withDirectives(createBaseVNode("div", null, [
            __props.buttonIcon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
              key: 0,
              class: "mr-2",
              icon: __props.buttonIcon
            }, null, 8, ["icon"])) : createCommentVNode("", true),
            createTextVNode(" " + toDisplayString(__props.buttonText), 1)
          ], 512), [
            [vShow, !isShowOptions.value]
          ]),
          withDirectives(createVNode(unref(_sfc_main$h), {
            modelValue: selectedValue.value,
            "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => selectedValue.value = $event),
            class: "w-100",
            "option-list": __props.optionList,
            filterable: ""
          }, null, 8, ["modelValue", "option-list"]), [
            [vShow, isShowOptions.value]
          ])
        ])
      ], 512);
    };
  }
});
var _hoisted_1$8 = ["variant", "radius"];
var _sfc_main$9 = defineComponent({
  props: {
    text: null,
    icon: null,
    variant: null,
    radius: { type: Boolean }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: "hy-alert",
        variant: __props.variant,
        radius: __props.radius
      }, [
        __props.icon ? (openBlock(), createBlock(unref(_sfc_main$1w), {
          key: 0,
          class: "hy-alert-icon mr-2",
          icon: __props.icon
        }, null, 8, ["icon"])) : createCommentVNode("", true),
        createBaseVNode("span", null, toDisplayString(__props.text), 1)
      ], 8, _hoisted_1$8);
    };
  }
});
var _hoisted_1$7 = { class: "hy-drawer" };
var _hoisted_2$6 = { class: "fs-title-lg lh-title-lg fw-semi-bold text-on-surface-variant flex justify-space-between" };
var _hoisted_3$6 = { class: "btn-group" };
var _sfc_main$8 = defineComponent({
  props: {
    isShow: { type: Boolean },
    title: null,
    size: null,
    cancelText: null,
    submitText: null,
    isCancelSkipConfirmation: { type: Boolean },
    isFooterButtonHide: { type: Boolean }
  },
  emits: ["closeDrawer", "submitDrawer"],
  setup(__props, { emit }) {
    const props2 = __props;
    const isDialogShow = ref(false);
    const confirmCancel = () => {
      isDialogShow.value = false;
      emit("closeDrawer");
    };
    const handleCloseRequest = () => {
      props2.isCancelSkipConfirmation ? emit("closeDrawer") : isDialogShow.value = true;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$7, [
        createVNode(unref(ElDrawer), {
          "model-value": __props.isShow,
          "close-on-click-modal": false,
          "close-on-press-escape": false,
          "show-close": false,
          size: __props.size
        }, createSlots({
          header: withCtx(() => [
            createBaseVNode("div", _hoisted_2$6, [
              createBaseVNode("span", null, toDisplayString(__props.title), 1),
              createVNode(unref(_sfc_main$1w), {
                icon: unref(Icons).CLOSE,
                interactive: "",
                class: "fs-title-lg",
                onClick: handleCloseRequest
              }, null, 8, ["icon"])
            ])
          ]),
          default: withCtx(() => [
            renderSlot(_ctx.$slots, "default"),
            createVNode(unref(_sfc_main$7), {
              "is-show": isDialogShow.value,
              title: unref(Dialogs).CANCEL_TITLE,
              onClickCancel: _cache[1] || (_cache[1] = ($event) => isDialogShow.value = false),
              onClickConfirm: confirmCancel
            }, {
              default: withCtx(() => [
                createTextVNode(toDisplayString(unref(Dialogs).CANCEL_BODY), 1)
              ]),
              _: 1
            }, 8, ["is-show", "title"])
          ]),
          _: 2
        }, [
          !__props.isFooterButtonHide ? {
            name: "footer",
            fn: withCtx(() => [
              createBaseVNode("div", _hoisted_3$6, [
                createVNode(unref(_sfc_main$1u), {
                  type: "outlined",
                  class: "mr-3",
                  onClick: handleCloseRequest
                }, {
                  default: withCtx(() => {
                    var _a2;
                    return [
                      createTextVNode(toDisplayString((_a2 = __props.cancelText) != null ? _a2 : unref(Actions).CANCEL), 1)
                    ];
                  }),
                  _: 1
                }),
                createVNode(unref(_sfc_main$1u), {
                  type: "filled",
                  onClick: _cache[0] || (_cache[0] = ($event) => emit("submitDrawer"))
                }, {
                  default: withCtx(() => {
                    var _a2;
                    return [
                      createTextVNode(toDisplayString((_a2 = __props.submitText) != null ? _a2 : unref(Actions).SUBMIT), 1)
                    ];
                  }),
                  _: 1
                })
              ])
            ])
          } : void 0
        ]), 1032, ["model-value", "size"])
      ]);
    };
  }
});
var _hoisted_1$6 = { class: "hy-dialog" };
var _hoisted_2$5 = {
  key: 0,
  class: "ta-center fs-headline-sm"
};
var _hoisted_3$5 = { class: "hy-dialog-title mb-0 fw-bold fs-title-lg" };
var _hoisted_4$5 = {
  key: 1,
  class: "hy-dialog-title ta-center fw-bold fs-title-lg"
};
var _sfc_main$7 = defineComponent({
  props: {
    isShow: { type: Boolean },
    isDelete: { type: Boolean },
    isApprove: { type: Boolean },
    title: null,
    cancelText: null,
    confirmText: null,
    icon: null,
    hideCancelButton: { type: Boolean },
    width: { default: "20%" },
    iconStyle: null
  },
  emits: ["clickCancel", "clickConfirm"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$6, [
        createVNode(unref(ElDialog), {
          "model-value": __props.isShow,
          "show-close": false,
          "close-on-click-modal": false,
          "close-on-press-escape": false,
          width: __props.width
        }, {
          header: withCtx(() => [
            __props.icon ? (openBlock(), createElementBlock("div", _hoisted_2$5, [
              createVNode(unref(_sfc_main$1w), {
                icon: __props.icon,
                class: normalizeClass({ "text-error": __props.isDelete, "text-approve": __props.isApprove }),
                style: normalizeStyle(__props.iconStyle)
              }, null, 8, ["icon", "class", "style"]),
              createBaseVNode("h2", _hoisted_3$5, toDisplayString(__props.title), 1)
            ])) : (openBlock(), createElementBlock("div", _hoisted_4$5, toDisplayString(__props.title), 1))
          ]),
          footer: withCtx(() => [
            !__props.hideCancelButton ? (openBlock(), createBlock(unref(_sfc_main$1u), {
              key: 0,
              type: "text",
              onClick: _cache[0] || (_cache[0] = ($event) => emit("clickCancel"))
            }, {
              default: withCtx(() => {
                var _a2;
                return [
                  createTextVNode(toDisplayString((_a2 = __props.cancelText) != null ? _a2 : unref(Actions).CANCEL), 1)
                ];
              }),
              _: 1
            })) : createCommentVNode("", true),
            createVNode(unref(_sfc_main$1u), {
              type: __props.isDelete || __props.isApprove ? "filled" : "text",
              class: normalizeClass({ "bg-error": __props.isDelete }),
              onClick: _cache[1] || (_cache[1] = ($event) => emit("clickConfirm"))
            }, {
              default: withCtx(() => {
                var _a2;
                return [
                  createTextVNode(toDisplayString((_a2 = __props.confirmText) != null ? _a2 : unref(Actions).CONFIRM), 1)
                ];
              }),
              _: 1
            }, 8, ["type", "class"])
          ]),
          default: withCtx(() => [
            renderSlot(_ctx.$slots, "default")
          ]),
          _: 3
        }, 8, ["model-value", "width"])
      ]);
    };
  }
});
var _hoisted_1$5 = { class: "hy-tooltip" };
var _sfc_main$6 = defineComponent({
  props: {
    placement: null,
    content: null
  },
  setup(__props) {
    const props2 = __props;
    const stylePosition = computed(() => {
      let offset = {
        position: "absolute"
      };
      switch (props2.placement) {
        case "bottom-left":
          offset.bottom = "calc(100% + 5px)";
          offset.left = 0;
          break;
        case "bottom-right":
          offset.bottom = "calc(100% + 5px)";
          offset.right = 0;
          break;
        case "top-left":
          offset.top = "calc(100% + 5px)";
          offset.left = 0;
          break;
        case "top-right":
          offset.top = "calc(100% + 5px)";
          offset.right = 0;
          break;
        case "middle-left":
          offset.bottom = 0;
          offset.left = "calc(100% + 5px)";
          break;
      }
      return offset;
    });
    const isShow = ref(false);
    const handleIsShow = () => {
      isShow.value = true;
    };
    const handleIsNotShow = () => {
      isShow.value = false;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$5, [
        createBaseVNode("div", {
          class: "hy-tooltip-trigger",
          onMouseover: handleIsShow,
          onMouseout: handleIsNotShow
        }, [
          renderSlot(_ctx.$slots, "default", {}, void 0, true)
        ], 32),
        withDirectives(createBaseVNode("div", {
          style: normalizeStyle(unref(stylePosition)),
          class: "hy-tooltip-content"
        }, [
          renderSlot(_ctx.$slots, "html-content", {}, void 0, true),
          createTextVNode(" " + toDisplayString(__props.content), 1)
        ], 4), [
          [vShow, isShow.value]
        ])
      ]);
    };
  }
});
var Tooltip = _export_sfc$1(_sfc_main$6, [["__scopeId", "data-v-f75b596a"]]);
var backgroundImage = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2aWV3Qm94PSIwIDAgMTkyMCAxMDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNTA5N18yMjQ5NCkiPgo8cmVjdCB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSIjRUFGM0VDIi8+CjxwYXRoIGQ9Ik0xOTkxLjQyIDgxMy4xNTFMMTE2My4wNyAxMTEzLjY4IiBzdHJva2U9IiNDRkU5REEiIHN0cm9rZS13aWR0aD0iMTAwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xOTE5Ljg3IDk2NC44MjhMMTA5MS41MyAxMjY1LjM2IiBzdHJva2U9IiNDRkU5REEiIHN0cm9rZS13aWR0aD0iMTAwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xMzk1LjUgNzc5Ljc3NkMxMzk0Ljk4IDc1Ny4yODIgMTQyMy4xMSA3MjMuNDMgMTQ1Ni43MyA3MjMuODYxQzE0OTAuMzUgNzI0LjI5MiAxNDczLjAyIDc1OC4xNjQgMTQ2NS40MSA3NzUuMTc2QzE0NzUuNTkgNzc1LjYxIDE0OTUuNDQgNzgwLjY5IDE0OTMuNDMgNzk3LjU0QzE0OTEuNDEgODE0LjM5MSAxNDg0LjU5IDgxOS40MTUgMTQ4MS40MyA4MTkuODIxQzE0ODguMTIgODIwLjUwMSAxNTAyLjA4IDgyNS44NSAxNTA0LjQ0IDg0MS44QzE1MDcuNCA4NjEuNzM4IDE0NzIuNjQgOTE2LjU0NyAxMzc0Ljg2IDkwNS4yODFDMTMwNS42NiA4OTcuMzA5IDEzMzAuNDYgODM2LjU3MSAxMzM4LjA3IDgyNy42MDNDMTM0MS44NSA4MjMuMTU3IDEzNTUuNjggODE0LjI2IDEzNjMuMjUgODIxLjcyNkMxMzUxLjgzIDgwOC4yNDggMTM3Mi44OSA3NzcuODQyIDEzOTUuNSA3NzkuNzc2WiIgZmlsbD0iI0NGRTlEQSIvPgo8cGF0aCBkPSJNMTQyMC41OSA4MjcuMjE1TDEzNTUuMzEgOTkwLjc1MSIgc3Ryb2tlPSIjNEM2MzU4IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTc4NC45NyA2NTcuODZDMTc1Ny41MyA2NTcuNTA0IDE3MzQuNTggNjg1LjIyOCAxNzM1IDcwMy42NTFDMTY5NS45OCA3MTYuODQxIDE2MzQuNTkgNzk2LjQ5OSAxNzE4LjE3IDgwNi40MzlDMTgwMS43NCA4MTYuMzc5IDE4MjYuMzMgNzcwLjc4NSAxODIzLjkyIDc1NC40NTZDMTgyMS45OSA3NDEuMzkyIDE4MTAuNTkgNzM3LjAxMSAxODA1LjE0IDczNi40NTNDMTgwNy43MSA3MzYuMTIxIDE4MTMuMjggNzMyLjAwNyAxODE0LjkyIDcxOC4yMDZDMTgxNi41NyA3MDQuNDA2IDE4MDAuMzYgNzAwLjI0MyAxNzkyLjA2IDY5OS44ODdDMTc5OC4yNyA2ODUuOTU1IDE4MTIuNDEgNjU4LjIxNSAxNzg0Ljk3IDY1Ny44NloiIGZpbGw9IiNDRkU5REEiLz4KPHBhdGggZD0iTTE3NDguODEgNzQ1LjY4NEwxNzAwLjU3IDg2Ni44MTkiIHN0cm9rZT0iIzRDNjM1OCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTE2NTUuNzcgNzU2Ljg1OEMxNjU3LjA5IDc0NS43ODMgMTY1MC4wNyA3MzYuNDM3IDE2MzMuMDQgNzM1LjMzQzE2MTYuMDEgNzM0LjIyMyAxNTg5LjgyIDczOS41MjUgMTU1Ny4wNCA3NTkuMTE3QzE1MjQuMjYgNzc4LjcwOSAxNDc1LjQzIDgzNS4xNSAxNTU5LjAxIDg0NS4wOUMxNjQyLjU4IDg1NS4wMzEgMTY2Ny4xNyA4MDkuNDM3IDE2NjQuNzYgNzkzLjEwN0MxNjYyLjgzIDc4MC4wNDQgMTY1MS40NCA3NzUuNjYyIDE2NDUuOTggNzc1LjEwNUMxNjQ4LjU2IDc3NC43NzMgMTY1NC4xMiA3NzAuNjU4IDE2NTUuNzcgNzU2Ljg1OFoiIGZpbGw9IiNDRkU5REEiLz4KPHBhdGggZD0iTTE1ODkuNjUgNzg0LjMzNUwxNTQxLjQxIDkwNS40NzEiIHN0cm9rZT0iIzRDNjM1OCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTE3OTguODkgMTA2Mi41OUMxODAzIDEwNjcuNSAxODE0LjA1IDEwNjkuNzQgMTgzMS40MSAxMDYzLjM1QzE4NTEuNzcgMTA1Ni44OCAxODY1LjE5IDEwNDAuMDIgMTg2My4xNCAxMDI5LjExQzE4NjEuNjQgMTAyMS4xNyAxODQ4LjY3IDEwMjIuNDcgMTgzNy4yIDEwMzIuMjFDMTgzOC43NiAxMDI2LjcgMTgzNC43NiAxMDIyLjM5IDE4MjcuMjIgMTAyNC45NkMxODE5LjY4IDEwMjcuNTQgMTgxMy44MyAxMDM4LjA3IDE4MTQuNCAxMDQxLjIzQzE4MDAuOTkgMTAzNy4wNyAxNzk0Ljc3IDEwNTcuNjggMTc5OC44OSAxMDYyLjU5WiIgZmlsbD0iIzAwQTgwMCIvPgo8cGF0aCBkPSJNMTI1OS4yMyAxMDI2Ljg3QzEyNjEuNiAxMDMxLjE4IDEyNjkuNiAxMDM0LjUyIDEyODMuNjUgMTAzMi4yN0MxMjk5Ljk2IDEwMzAuNDIgMTMxMi44NiAxMDE5LjcgMTMxMi42NyAxMDExLjE3QzEzMTIuNDQgMTAwMS4yMyAxMjk3LjEzIDEwMDUuMDkgMTI5Mi42NCAxMDA5LjY0QzEyOTMuNjUgMTAwNi4xNyAxMjkxLjY3IDEwMDMuMDMgMTI4NS42IDEwMDMuODVDMTI3OS41MiAxMDA0LjY3IDEyNzQuMTQgMTAxMC42IDEyNzQuMTEgMTAxMy4wNkMxMjYwLjA5IDEwMTAuNjMgMTI1Ni44NSAxMDIyLjU1IDEyNTkuMjMgMTAyNi44N1oiIGZpbGw9IiMwMEE4MDAiLz4KPGNpcmNsZSBjeD0iMTc0MS4xNCIgY3k9IjczOC4zNTgiIHI9IjMuNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEuMzEwOTkgMTc0MS4xNCA3MzguMzU4KSIgZmlsbD0iIzAwQTgwMCIvPgo8Y2lyY2xlIGN4PSIxMzEwLjMxIiBjeT0iODM4LjI0MSIgcj0iMy41IiB0cmFuc2Zvcm09InJvdGF0ZSgtMS4zMTA5OSAxMzEwLjMxIDgzOC4yNDEpIiBmaWxsPSIjMDBBODAwIi8+CjxjaXJjbGUgY3g9IjE1MDEuODYiIGN5PSI3OTQuMzQ3IiByPSIyIiB0cmFuc2Zvcm09InJvdGF0ZSgtMS4zMTA5OSAxNTAxLjg2IDc5NC4zNDcpIiBmaWxsPSIjMDBBODAwIi8+CjxjaXJjbGUgY3g9IjE3NDguOTYiIGN5PSI5MDUuMjIyIiByPSIzLjUiIHRyYW5zZm9ybT0icm90YXRlKC0xLjMxMDk5IDE3NDguOTYgOTA1LjIyMikiIGZpbGw9IiM0OEZFQzAiLz4KPGNpcmNsZSBjeD0iMTI5MC41MiIgY3k9Ijc4Mi4xNzkiIHI9IjIiIHRyYW5zZm9ybT0icm90YXRlKC0xLjMxMDk5IDEyOTAuNTIgNzgyLjE3OSkiIGZpbGw9IiM0OEZFQzAiLz4KPGNpcmNsZSBjeD0iMTgwNC43MyIgY3k9Ijc4NS40MTUiIHI9IjIiIHRyYW5zZm9ybT0icm90YXRlKC0xLjMxMDk5IDE4MDQuNzMgNzg1LjQxNSkiIGZpbGw9IiM0OEZFQzAiLz4KPHBhdGggZD0iTTE3NDQuODMgODc3LjgxTDE3ODUuMzIgODc2Ljg4MyIgc3Ryb2tlPSIjMDBBODAwIi8+CjxwYXRoIGQ9Ik0xMzQwLjU5IDg3Mi4wNTdMMTM2OC41OSA4NzEuNDE2IiBzdHJva2U9IiMwMEE4MDAiIHN0cm9rZS13aWR0aD0iNSIvPgo8cGF0aCBkPSJNMTQ0Ny44NiA4MzguNTk0TDE0NzUuODUgODM3Ljk1MyIgc3Ryb2tlPSIjMDBBODAwIiBzdHJva2Utd2lkdGg9IjUiLz4KPHBhdGggZD0iTTE0NDYuMTMgMTAwMC42OUwxNDc4LjI3IDEwMjMuNDNMMTQ2OC4zMyAxMDM3LjQ4TDE0MjUuMzggMTAyMC41NUwxNDQ2LjEzIDEwMDAuNjlaIiBmaWxsPSIjMDBBNTc4Ii8+CjxwYXRoIGQ9Ik0xNjE4LjE0IDg0OS4yMDFMMTU2Ni4wNCA4ODIuODE3QzE1NjUuOTUgODgyLjg3NSAxNTY1Ljg2IDg4Mi45NDggMTU2NS44IDg4My4wMzJMMTQ3NCA5OTcuNTM3IiBzdHJva2U9IiMwMEE1NzgiIHN0cm9rZS13aWR0aD0iNDAiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPGVsbGlwc2UgY3g9IjE1NjYuNjYiIGN5PSI5OTAuNTIzIiByeD0iMzIuOTA4MyIgcnk9IjY1LjgzMDgiIHRyYW5zZm9ybT0icm90YXRlKDM0LjY1OTEgMTU2Ni42NiA5OTAuNTIzKSIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE1NzAuNzMgOTQwLjkxNEMxNTYwLjA0IDk0Ny41NjYgMTU0OC45NyA5NTguMjQyIDE1MzkuNTkgOTcxLjgwOEMxNTM1LjgzIDk3Ny4yNTEgMTUzMi42IDk4Mi43ODQgMTUyOS45MiA5ODguMjU2IiBzdHJva2U9IiMwMDZGMDAiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTYwNy42NSA5ODIuOTc2QzE2MDQuNDQgOTkxLjU0NyAxNTk5Ljc3IDEwMDAuNTEgMTU5My43MyAxMDA5LjI0QzE1OTAuNCAxMDE0LjA1IDE1ODYuODYgMTAxOC41MSAxNTgzLjE5IDEwMjIuNTUiIHN0cm9rZT0iIzAwQTgwMCIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxlbGxpcHNlIGN4PSIxNDUwLjk2IiBjeT0iOTk1LjE5NSIgcng9IjM2LjU0NDkiIHJ5PSI3My4xMDU2IiB0cmFuc2Zvcm09InJvdGF0ZSgzNC42NTkxIDE0NTAuOTYgOTk1LjE5NSkiIHN0cm9rZT0iIzA5MjAxNyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNDczLjYzIDEwMjUuNzZDMTQ2Ni4xNSAxMDM0Ljg0IDE0NTguMDcgMTA0Mi4zNCAxNDUwLjA3IDEwNDcuOSIgc3Ryb2tlPSIjMDA2RjAwIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE0MzkuMDkgOTUyLjk3MUMxNDMyLjcyIDk1OS4wNDUgMTQyNi41MyA5NjYuMjU5IDE0MjAuODkgOTc0LjQxM0MxNDEwLjc1IDk4OS4wODYgMTQwNC4wOCAxMDA0LjM1IDE0MDEuMjMgMTAxNy44IiBzdHJva2U9IiMwMEE4MDAiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTUwNC45NiA5MDguMzA2TDE0NTIuOTEgOTk0LjAxOSIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTUxMy45MSA4ODQuMDk1TDE0OTkuOTQgODkxLjg4OUMxNDk5LjU1IDg5Mi4xMSAxNDk5LjA1IDg5Mi4wMzcgMTQ5OC43MyA4OTEuNzI0QzE0OTMuNjkgODg2Ljg5NyAxNDgzLjU2IDg4MS42NDkgMTQ3NS45NyA4ODYuOTYzIiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTQ5Mi45OSA4ODcuNTc0QzE0ODcuNjYgODg3Ljg2MyAxNDc5LjIxIDg4OC44OSAxNDc0LjE1IDg5NS4wMDciIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSIxNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNTM4LjY3IDkzMC42NDlDMTUzNS4xNiA5MzAuMjQ3IDE1MzEuMTQgOTMwLjYwMSAxNTI2LjAzIDkzMi43MDciIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSIxNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNDgxLjc1IDkwMi44OTFWOTAyLjg5MUMxNDczLjg2IDg5NS4zNTIgMTQ3NC4zMSA4ODIuNjE0IDE0ODIuNzIgODc1LjY1NkwxNDg1LjQxIDg3My40MjlDMTQ4NS41IDg3My4zNTUgMTQ4NS42NCA4NzMuMzY2IDE0ODUuNzEgODczLjQ1NEwxNTMzLjEzIDkyOC4xOTdDMTUzMy41NSA5MjguNjgzIDE1MzMuNDEgOTI5LjQzNCAxNTMyLjg3IDkyOS43N0MxNTI4LjA3IDkzMi43MTYgMTUxNy43MSA5NDEuNTAzIDE1MjkuNDkgOTUyLjc1NiIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTQ5My4zNiA4ODIuMDY0TDE1MDYuNzIgODk3Ljc2MyIgc3Ryb2tlPSIjMDBBODAwIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE0OTIuMTkgODk2LjU5NUMxNDg5Ljc3IDkwMC4xNTEgMTQ4NS44MSA5MDEuNzQyIDE0NzkuMzEgOTAxLjg5MSIgc3Ryb2tlPSIjMDBDMjhFIiBzdHJva2Utd2lkdGg9IjE0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE0NzIuMyA5MDEuNTUxQzE0NzIuNDIgODk5LjIxNSAxNDczLjk0IDg5NC42MTIgMTQ3OS4xNSA4OTQuODkzQzE0ODUuNjYgODk1LjI0NCAxNDkwLjExIDg5My4xNDEgMTQ5MS41NSA4OTAuMTA4IiBzdHJva2U9IiMwOTIwMTciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNTQ5Ljg5IDkyNi4yODJMMTUzNy42MyA5MzcuMDY2QzE1MzIuMjYgOTQyLjY5IDE1MjQuNzYgOTQyLjg2MiAxNTE5LjcyIDk0MC45NzciIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSIxNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNTEzLjE1IDkzOC4xMjZDMTUxNi4wNyA5MzQuNTU4IDE1MTguNTQgOTMzLjUwMSAxNTI0LjU4IDkzNC44NjRDMTUyOS40IDkzNS45NTQgMTUzNS4xNSA5MzAuNDU0IDE1MzcuNDEgOTI3LjU2OCIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTU0Mi42NCA5ODAuOTYzTDE1NzMuNTQgMTAwNi4yNUwxNTYxLjYxIDEwMjAuMjRMMTUxMS44NSAxMDEyLjY1TDE1NDIuNjQgOTgwLjk2M1oiIGZpbGw9IiMwMEMyOEUiLz4KPHBhdGggZD0iTTE2MzQuNjIgODY5LjgyOUwxNjI2LjcgOTE0Ljc0OUMxNjI2LjY3IDkxNC45MjkgMTYyNi41OSA5MTUuMDk2IDE2MjYuNDcgOTE1LjIzM0wxNTcwLjYxIDk3OS4zMjIiIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSI0MCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTYyNC42NCA4NDkuMDUyTDE2MTQuODQgODc1LjAxM0MxNjE0Ljc3IDg3NS4xOTEgMTYxNC42NiA4NzUuMzQ2IDE2MTQuNTEgODc1LjQ2TDE1NjMuMTEgOTEzLjk3NyIgc3Ryb2tlPSIjMDBDMjhFIiBzdHJva2Utd2lkdGg9IjQwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNjAwLjc3IDg1NS4xTDE2MjguMTYgODQ5Ljk3MiIgc3Ryb2tlPSIjMDBDMjhFIiBzdHJva2Utd2lkdGg9IjYwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE2MDkuODYgODM2Ljg4N0wxNTgzLjE2IDgzMi41NzNDMTU4Mi45IDgzMi41MyAxNTgyLjYzIDgzMi41OTQgMTU4Mi40MSA4MzIuNzUyTDE1MjkuNjIgODcxLjIzMiIgc3Ryb2tlPSIjMDBDMjhFIiBzdHJva2Utd2lkdGg9IjQwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNTcyLjQ2IDg2My43NUMxNTcyLjg2IDg2Ni41NzUgMTU3NC43NyA4NzIuODk5IDE1NzkuMjQgODc1LjU5OCIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTYzOC40OCA4NjMuNzM5QzE2MzkuMTkgODcyLjcyNSAxNjM1LjgyIDg4My4xMDUgMTYyOS41NCA4ODguNDVDMTYyMy4yNiA4OTMuNzk1IDE2MTIuNTIgOTAyLjAxIDE2MDcuOTMgOTA1LjQ0OSIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMTU5MC45MSA4NjEuMzI3QzE1OTAuNjQgODY0IDE1ODguMDIgODcwLjQ5NSAxNTc5LjcyIDg3NS4wODYiIHN0cm9rZT0iIzA5MjAxNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTE2MjAuMyA4MzQuMTQ3QzE2MjUuMzMgODM1LjUzMyAxNjMzLjkyIDgzOS4zMzcgMTYzNi4xNyA4NTAuMjg5IiBzdHJva2U9IiMwOTIwMTciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0xNjUxLjA3IDg2Ny40NTJDMTY0OC43NCA4NjcuNTA2IDE2NDIuOTggODY4LjAzNyAxNjM4LjYyIDg2OS43MzgiIHN0cm9rZT0iIzA5MjAxNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNTg2LjYyIDgxNi4wNzlDMTU4NS4zMSA4MTUuMTA1IDE1ODQuMjcgODEzLjU4NiAxNTgzLjgxIDgxMS43NEMxNTgyLjg4IDgwNy45ODcgMTU4NC43IDgwNC4zMDQgMTU4Ny44NyA4MDMuNTE1QzE1ODguOTMgODAzLjI1MSAxNTkwLjAxIDgwMy4zNDQgMTU5MS4wMiA4MDMuNzI1QzE1OTUuMjcgNzk2Ljg3IDE2MDAuNzYgNzk0LjYwNyAxNjA1LjczIDc5NS4yNjRDMTYxMSA3OTUuOTYxIDE2MTQuMjkgODAwLjIwMyAxNjE0LjkyIDgwNi44NThDMTYxNy4xMyA4MDYuNTA4IDE2MTkuMzEgODA3LjIxMSAxNjIwLjU4IDgwOC45MTRDMTYyMi41NCA4MTEuNTM3IDE2MjEuNjEgODE1LjU0IDE2MTguNTIgODE3Ljg1NUMxNjE2Ljk2IDgxOS4wMTcgMTYxNS4xNSA4MTkuNTMyIDE2MTMuNDkgODE5LjQyN0MxNjEwLjI4IDgyOS41ODcgMTYwMi40NiA4MzEuNDgzIDE1OTYuMzcgODMxLjMwNkMxNTg5Ljg5IDgzMS4xMTcgMTU4NS4yOSA4MjYuMDQ0IDE1ODYuNjIgODE2LjA3OVoiIGZpbGw9IiMwMEE1NzgiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01NTUuNDg1IDkzNi44MDRMNjAwLjc4IDk1Ny45NzlMNjQzLjEzIDg2Ny4zODlMNTk3LjgzNSA4NDYuMjE0TDUwMi44NCA4MDEuODA1TDQ2MC40OSA4OTIuMzk0TDU1NS40ODUgOTM2LjgwNFpNNDA2LjM4NyA4NjcuMTAxTDQ0OC43MzcgNzc2LjUxMkw0MzMuNjY3IDc2OS40NjdMMzkxLjMxNyA4NjAuMDU3TDQwNi4zODcgODY3LjEwMVpNMzgzLjk5NiA4NTYuNjM0TDQyNi4zNDYgNzY2LjA0NEwzNjguOTcgNzM5LjIyMkwzMjYuNjIgODI5LjgxMUwzODMuOTk2IDg1Ni42MzRaTTI4MC4wODggODA4LjA1N0wzMjIuNDM4IDcxNy40NjhMMzA4Ljc1NyA3MTEuMDcyTDI2Ni40MDcgODAxLjY2MkwyODAuMDg4IDgwOC4wNTdaTTI1OS4wODYgNzk4LjIzOUwzMDEuNDM2IDcwNy42NUwyNTAuNDY2IDY4My44MjFMMjA4LjExNiA3NzQuNDExTDI1OS4wODYgNzk4LjIzOVpNMjAwLjc5NCA3NzAuOTg4TDE3OS45ODMgNzYxLjI1OUwxMzIuNjc5IDYyOC43NTdMMTYwLjMyOSA2NDEuNjgzTDI0My4xNDQgNjgwLjM5OUwyMDAuNzk0IDc3MC45ODhaTTk4LjcxMTUgNjU1LjQyNEwxNDYuNTA5IDc4OS4zMDlMMTMyLjQ3NiA4MTkuMzI3TDUxLjA1MjEgNzU3LjM3MUw5My44NTk0IDY2NS44MDNMOTguNzExNSA2NTUuNDI0Wk00Ny41NTAxIDc2NC44NjJMMS4zMjYzNyA4NjMuNzM4TC0xNi40NzIgOTAxLjgxTDExNC44NzEgODU2Ljk4N0wxMjguOTc0IDgyNi44MThMNDcuNTUwMSA3NjQuODYyWk0xMTkuNjk0IDg2My44OEwtMTYuNzk1NSA5MTAuNDZMMjUuNDQ2MiA5MzAuMjA4TDEwNi45OCA5NjguMzI0TDE0OS4zMyA4NzcuNzM1TDExOS42OTQgODYzLjg4Wk0xNTYuNjUxIDg4MS4xNTdMMTE0LjMwMSA5NzEuNzQ3TDE3MS4wMzcgOTk4LjI3TDIxMy4zODcgOTA3LjY4MUwxNTYuNjUxIDg4MS4xNTdaTTIyMC43MDggOTExLjEwM0wxNzguMzU4IDEwMDEuNjlMMjE1LjEwNiAxMDE4Ljg3TDI1OC45NCA5MjguOTc2TDIyMC43MDggOTExLjEwM1pNMzEyLjgwNiA5NTQuMTU4TDI2OC45NzEgMTA0NC4wNUwyOTEuNDgzIDEwNTQuNThMNDI0LjQ3MSAxMDA2LjM2TDM4NC44NzYgOTg3Ljg1MUwzMTIuODA2IDk1NC4xNThaTTQyNy45OTUgMTAxMy42OEwyOTUuMDc4IDEwNjEuODdMMjc2LjE2MiAxMTAyLjMzTDM3NC4xNDYgMTEyOC44N0w0MDguOTk2IDEwNTQuMzJMNDI3Ljk5NSAxMDEzLjY4Wk0zNzAuNjcyIDExMzYuM0wyNzIuNjg3IDExMDkuNzdMMjQzLjA0MSAxMTczLjE4TDMyNC44MDMgMTIzNC40MkwzNzAuNjcyIDExMzYuM1pNMzIxLjMwNiAxMjQxLjg5TDIzOS41NDUgMTE4MC42NkwyMjQuMjg5IDEyMTMuMjlMMjcyLjUyOSAxMzQ2LjIzTDI5MS4zMDggMTMwNi4wNkwzMjEuMzA2IDEyNDEuODlaTTI2NC45MDQgMTM0OC45MUwyMTYuNjY0IDEyMTUuOTdMMTg5LjkwOCAxMjAzLjQ2TDE1Mi4yIDEyOTYuMjJMMjI0LjgzOCAxMzMwLjE4TDI2NC45MDQgMTM0OC45MVpNMTA4LjQ1OSAxMjc1Ljc4TDE0Ni4xNjYgMTE4My4wMkwxMDYuMjIzIDExNjQuMzRMNjMuODczMyAxMjU0LjkzTDEwOC40NTkgMTI3NS43OFpNNTYuNTUxNyAxMjUxLjUxTDk4LjkwMTcgMTE2MC45Mkw4NC4zNDE1IDExNTQuMTFMNDEuOTkxNSAxMjQ0LjdMNTYuNTUxNyAxMjUxLjUxWk0tNC44NDAxOCAxMjIyLjgxTDM3LjUwOTggMTEzMi4yMkwtNzAuMzg5NSAxMDgxLjc4TC0xMTUuNjg0IDEwNjAuNkwtMTU4LjAzNCAxMTUxLjE5TC0xMTIuNzQgMTE3Mi4zN0wtNC44NDAxOCAxMjIyLjgxWiIgZmlsbD0iI0NGRTlEQSIvPgo8Y2lyY2xlIGN4PSIxNjguNTEzIiBjeT0iNzMyLjcwNiIgcj0iMy41IiB0cmFuc2Zvcm09InJvdGF0ZSg3MC4wNTU3IDE2OC41MTMgNzMyLjcwNikiIGZpbGw9IiM3N0FCRDAiLz4KPGNpcmNsZSBjeD0iMjE1LjMxNSIgY3k9IjY5Ni4wNDMiIHI9IjIiIHRyYW5zZm9ybT0icm90YXRlKDcwLjA1NTcgMjE1LjMxNSA2OTYuMDQzKSIgZmlsbD0iIzQ4RkVDMCIvPgo8cGF0aCBkPSJNMTQ4LjcxNiA3NjEuNjk4TDE2MS42NzggNzk3LjQxOSIgc3Ryb2tlPSIjNzdBQkQwIiBzdHJva2Utd2lkdGg9IjUiLz4KPHBhdGggZD0iTTIxMi4xMjUgODYzLjE1M0wyMjEuNjc2IDg4OS40NzQiIHN0cm9rZT0iIzc3QUJEMCIgc3Ryb2tlLXdpZHRoPSI1Ii8+CjxwYXRoIGQ9Ik0zODAuNjE2IDc2MC40MTdMMzk0LjA5MiA3NDYuMTc2QzQwMi4wNzIgNzM3Ljc0MyA0MDEuMjE4IDcyNC4zMSAzOTIuMjM2IDcxNi45NTVMMzM3LjMxNCA2NzEuOTgzQzMyNy44MjEgNjY0LjIxIDMxMy42MzIgNjY2LjczOCAzMDcuNDA4IDY3Ny4zMTFMMjkzLjM1OCA3MDEuMTc1IiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iNDAiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTM1Ny43MTcgNzg1LjcyNUMzNTMuNjkgNzg2LjA2NyAzNDkuMjUgNzg3LjM3NiAzNDMuOTkzIDc5MC44OTciIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSIxNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0zNjkuMzIzIDc3OC4yODJMMzU4LjAwNSA3OTMuMTYzQzM1My4yNDcgODAwLjY5MyAzNDQuODY4IDgwMi41ODQgMzM4Ljc3OSA4MDEuNjA5IiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMzM2LjU1NSA3OTMuNjk1QzMzNy42ODQgNzkzLjY4NiAzNDAuNTIzIDc5My43MjYgMzQyLjg0OCA3OTMuOTU0QzM0NS43NTUgNzk0LjIzOCAzNDguMTU0IDc5Mi42ODYgMzUxLjk2MyA3ODguMDU1IiBzdHJva2U9IiMwOTIwMTciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0yNjguNjIgNzM3LjA1MkMyNzEuNjE5IDczOC41MjMgMjc2LjgxIDc0NC43NjEgMjc1LjU3OSA3NTAuOTY3IiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMjc2LjkyMyA3MTkuNjkxTDI2Ny41NDMgNzM1Ljg0QzI2Ny41MzYgNzM1Ljg1MiAyNjcuNTM1IDczNS44NTQgMjY3LjUyOCA3MzUuODY1QzI2Ny4yOTggNzM2LjIyOSAyNTkuMTcxIDc0OS4xMDUgMjYwLjM0MiA3NTUuMDcxIiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMjY4LjMwMSA3NTQuNDg2QzI2OC4zMDEgNzU0LjQ4NiAyNjcuNjAyIDc1My40MDYgMjY4LjM3NSA3NDkuMDc4QzI2OS4xNDcgNzQ0Ljc0OSAyNzAuOTY3IDc0Mi4wNCAyNzAuOTY3IDc0Mi4wNCIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMzI0LjE0NCA2ODguMTM0QzMyMS4wMjcgNjg1Ljg5NiAzMTMuMTk1IDY4My4xNzIgMzA2Ljc5OSA2OTAuMTczIiBzdHJva2U9IiMwOTIwMTciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0zNzcuMDg0IDc1My4xOTdDMzc5LjYzNCA3NTAuMzMxIDM4My4xNiA3NDIuODI1IDM3Ni44NjQgNzM1LjczNSIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTM3NS4wMzIgNzAwLjQyNUMzNjcuOTU3IDY4OS40OTMgMzUzLjY3NyA2ODYuMDM0IDM0Mi40NTQgNjkyLjI0OUMzNDAuNTY5IDY4OS43NjMgMzM2Ljc4MiA2ODguODU0IDMzMy4yNCA2OTAuMjUxQzMyOS4xMDEgNjkxLjg4MyAzMjYuODY0IDY5Ni4wNDggMzI4LjI0NSA2OTkuNTUyQzMyOC45MjkgNzAxLjI4NyAzMzAuMzcxIDcwMi41MzUgMzMyLjE1NSA3MDMuMTU1QzMyOC41ODMgNzEwLjYyNCAzMjguODYxIDcxOS43MTkgMzMzLjY4OSA3MjcuMThDMzQxLjA3NyA3MzguNTk2IDM1Ni4zMjEgNzQxLjg2MiAzNjcuNzM4IDczNC40NzRDMzY4LjE3IDczNC4xOTQgMzY4LjU5MSA3MzMuOTAzIDM2OS4wMDEgNzMzLjYwMUMzNzAuMDcxIDczNS4xNzEgMzcxLjY2MyA3MzYuMjQyIDM3My41MjYgNzM2LjQ0NEMzNzcuMjcxIDczNi44NSAzODAuNjk0IDczMy41OTIgMzgxLjE3MiA3MjkuMTY4QzM4MS41MzEgNzI1Ljg0IDM4MC4xMjIgNzIyLjc5OSAzNzcuODA3IDcyMS4zMjVDMzc5Ljk3OSA3MTQuNTQgMzc5LjIwNCA3MDYuODczIDM3NS4wMzIgNzAwLjQyNVoiIGZpbGw9IiMwMEE1NzgiLz4KPHBhdGggZD0iTTE5OS4yNDEgOTk3Ljk3TDE4NS40MTYgMTAxMS44N0MxNzcuMjI5IDEwMjAuMTEgMTc3Ljc0OSAxMDMzLjU1IDE4Ni41NDcgMTA0MS4xM0wyNDAuMzM2IDEwODcuNDVDMjQ5LjYzMyAxMDk1LjQ2IDI2My44OCAxMDkzLjI4IDI3MC4zNjUgMTA4Mi44N0wyODUuMDAyIDEwNTkuMzYiIHN0cm9rZT0iIzAwQzI4RSIgc3Ryb2tlLXdpZHRoPSI0MCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMjIyLjc2MSA5NzMuMjM4QzIyNi43OTUgOTcyLjk5NiAyMzEuMjY2IDk3MS43OTggMjM2LjYwOSA5NjguNDA5IiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMjEwLjk3NCA5ODAuMzkxTDIyMi42NTggOTY1Ljc5NkMyMjcuNjAxIDk1OC4zODUgMjM2LjAyNCA5NTYuNzA0IDI0Mi4wODggOTU3LjgyOSIgc3Ryb2tlPSIjMDBDMjhFIiBzdHJva2Utd2lkdGg9IjE0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTI0NC4xMTMgOTY1Ljc5NkMyNDIuOTg1IDk2NS43NzYgMjQwLjE0OCA5NjUuNjY2IDIzNy44MjkgOTY1LjM4MUMyMzQuOTMgOTY1LjAyNCAyMzIuNDkzIDk2Ni41MTcgMjI4LjU3IDk3MS4wNTIiIHN0cm9rZT0iIzA5MjAxNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiLz4KPHBhdGggZD0iTTMxMC42MjMgMTAyNC4xMUMzMDcuNjYyIDEwMjIuNTYgMzAyLjYyNyAxMDE2LjIgMzA0LjAxMiAxMDEwLjAyIiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMzAxLjg5MiAxMDQxLjI2TDMxMS42NjkgMTAyNS4zNUMzMTEuNjc2IDEwMjUuMzMgMzExLjY3NyAxMDI1LjMzIDMxMS42ODUgMTAyNS4zMkMzMTEuOTI0IDEwMjQuOTYgMzIwLjM2OCAxMDEyLjI5IDMxOS4zNDUgMTAwNi4zIiBzdHJva2U9IiMwMEMyOEUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMzExLjM3NCAxMDA2LjY5QzMxMS4zNzQgMTAwNi42OSAzMTIuMDQ2IDEwMDcuNzggMzExLjE2NiAxMDEyLjA5QzMxMC4yODcgMTAxNi40IDMwOC40IDEwMTkuMDYgMzA4LjQgMTAxOS4wNiIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBkPSJNMjUzLjkwMiAxMDcxLjYzQzI1Ni45NjMgMTA3My45NSAyNjQuNzI1IDEwNzYuODYgMjcxLjI5MiAxMDcwLjAyIiBzdHJva2U9IiMwOTIwMTciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIi8+CjxwYXRoIGQ9Ik0yMDIuNTkzIDEwMDUuMjhDMTk5Ljk3MiAxMDA4LjA4IDE5Ni4yNjEgMTAxNS40OSAyMDIuMzggMTAyMi43NCIgc3Ryb2tlPSIjMDkyMDE3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIwMy4zMzUgMTA1OC4wOEMyMTAuMTM3IDEwNjkuMTkgMjI0LjMyNiAxMDczIDIzNS43IDEwNjcuMDZDMjM3LjUyMyAxMDY5LjYgMjQxLjI4NiAxMDcwLjYgMjQ0Ljg2MiAxMDY5LjI5QzI0OS4wNCAxMDY3Ljc2IDI1MS4zNzkgMTA2My42NSAyNTAuMDg2IDEwNjAuMTJDMjQ5LjQ0NSAxMDU4LjM2IDI0OC4wMzUgMTA1Ny4wOCAyNDYuMjY2IDEwNTYuNDJDMjUwLjAyMyAxMDQ5LjA0IDI0OS45NzEgMTAzOS45NCAyNDUuMzI5IDEwMzIuMzZDMjM4LjIyNyAxMDIwLjc3IDIyMy4wNjggMTAxNy4xMiAyMTEuNDcyIDEwMjQuMjJDMjExLjAzMiAxMDI0LjQ5IDIxMC42MDQgMTAyNC43NyAyMTAuMTg4IDEwMjUuMDdDMjA5LjE1NyAxMDIzLjQ3IDIwNy41OTIgMTAyMi4zNiAyMDUuNzM0IDEwMjIuMTFDMjAyIDEwMjEuNjEgMTk4LjQ5OCAxMDI0Ljc4IDE5Ny45MSAxMDI5LjJDMTk3LjQ2OCAxMDMyLjUxIDE5OC44MDIgMTAzNS41OSAyMDEuMDggMTAzNy4xMkMxOTguNzQgMTA0My44NSAxOTkuMzI0IDEwNTEuNTMgMjAzLjMzNSAxMDU4LjA4WiIgZmlsbD0iIzAwQTU3OCIvPgo8cGF0aCBkPSJNMjk5LjQ1MiA5NzEuODg3TDMwOS4wMDMgOTk4LjIwN0wyNjEuNTAyIDk5Ni4yOTZMMjUxLjk1MSA5NjkuOTc1TDI5OS40NTIgOTcxLjg4N1oiIGZpbGw9IiM0Mzk1Q0YiLz4KPHBhdGggZD0iTTMyNC44MjMgNzg4LjA3OEwyOTguNzQ5IDc5OC4yODJMMjk5LjQ3NSA3NTAuNzQ4TDMyNS41NDkgNzQwLjU0NEwzMjQuODIzIDc4OC4wNzhaIiBmaWxsPSIjNDM5NUNGIi8+CjxwYXRoIGQ9Ik0xNTcuNDk3IDkxNC44OUwxMzEuMTc2IDkyNC40NDFMMTMzLjA4OCA4NzYuOTRMMTU5LjQwOCA4NjcuMzg5TDE1Ny40OTcgOTE0Ljg5WiIgZmlsbD0iIzQzOTVDRiIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzUwOTdfMjI0OTQiPgo8cmVjdCB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=";
var _sfc_main$5 = defineComponent({
  props: {
    isHasBackground: { type: Boolean }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["hy-account-layout", { "background-style": !!__props.isHasBackground }]),
        style: normalizeStyle({ backgroundImage: __props.isHasBackground ? `url(${unref(backgroundImage)})` : "" })
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 6);
    };
  }
});
var _imports_0$1 = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ3IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ3IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTY4LjQ0MjcgMTUuODk5MkM2OC40MjcxIDE0LjgyNDggNjguMTY2NyAxMy43Njc2IDY3LjY4MDkgMTIuODA2MUM2Ny4xOTUyIDExLjg0NDYgNjYuNDk2NCAxMS4wMDM2IDY1LjYzNjYgMTAuMzQ1M0M2NC43NzY3IDkuNjg3MDggNjMuNzc3OSA5LjIyODU3IDYyLjcxNDEgOS4wMDM4MkM2MS42NTAzIDguNzc5MDcgNjAuNTQ5IDguNzkzODUgNTkuNDkxOCA5LjA0NzA2VjBINTMuOTU3M1YyMy4xNTQ1SDU5LjQ5MThWMTUuOTk4MkM1OS40OTE4IDE1LjU1MDIgNTkuNjcyIDE1LjEyMDUgNTkuOTkyNyAxNC44MDM3QzYwLjMxMzQgMTQuNDg2OSA2MC43NDgzIDE0LjMwODkgNjEuMjAxOCAxNC4zMDg5QzYxLjY1NTQgMTQuMzA4OSA2Mi4wOTAzIDE0LjQ4NjkgNjIuNDExIDE0LjgwMzdDNjIuNzMxNyAxNS4xMjA1IDYyLjkxMTkgMTUuNTUwMiA2Mi45MTE5IDE1Ljk5ODJWMjMuMTU0NUg2OC40NDY0VjE1Ljg5OTJINjguNDQyN1pNOTEuNjQxNSAxNC43MDgzQzkxLjkwODYgMTMuOTc5OCA5Mi4zOTY0IDEzLjM1MDMgOTMuMDM4NSAxMi45MDU0QzkzLjY4MDcgMTIuNDYwNSA5NC40NDYgMTIuMjIxOCA5NS4yMzA0IDEyLjIyMThDOTYuMDE0NyAxMi4yMjE4IDk2Ljc4IDEyLjQ2MDUgOTcuNDIyMiAxMi45MDU0Qzk4LjA2NDMgMTMuMzUwMyA5OC41NTIxIDEzLjk3OTggOTguODE5MiAxNC43MDgzSDkxLjY0MTVaTTEwMS42MiAxNy4yNzMzSDEwMy4xNDFDMTAzLjIxMiAxNi44NDcgMTAzLjI0OCAxNi40MTU2IDEwMy4yNDggMTUuOTgzNUMxMDMuMjU0IDEzLjk4NDcgMTAyLjQ5OSAxMi4wNTY4IDEwMS4xMzIgMTAuNTgyN0M5OS43NjU4IDkuMTA4NTkgOTcuODg3OSA4LjE5NjEyIDk1Ljg3MTggOC4wMjY0OUM5My44NTU2IDcuODU2ODcgOTEuODQ4NiA4LjQ0MjUxIDkwLjI0OTMgOS42NjcwOUM4OC42NTAxIDEwLjg5MTcgODcuNTc1NiAxMi42NjU2IDg3LjIzOTMgMTQuNjM2NkM4Ni45MDI5IDE2LjYwNzcgODcuMzI5MyAxOC42MzE1IDg4LjQzMzggMjAuMzA2M0M4OS41MzgyIDIxLjk4MTEgOTEuMjQgMjMuMTg0NCA5My4yMDEgMjMuNjc3Qzk1LjE2MiAyNC4xNjk3IDk3LjIzODkgMjMuOTE1NyA5OS4wMTkyIDIyLjk2NTZDMTAwLjc5OSAyMi4wMTU1IDEwMi4xNTMgMjAuNDM4OCAxMDIuODExIDE4LjU0ODVIOTcuOTg4M0M5Ny41NDQyIDE5LjAxNDMgOTYuOTg3MyAxOS4zNjA4IDk2LjM3IDE5LjU1NTFDOTUuNzUyOCAxOS43NDk0IDk1LjA5NTcgMTkuNzg1MSA5NC40NjA2IDE5LjY1OUM5My44MjU1IDE5LjUzMjkgOTMuMjMzNCAxOS4yNDkgOTIuNzQwMiAxOC44MzQxQzkyLjI0NjkgMTguNDE5MyA5MS44Njg4IDE3Ljg4NzIgOTEuNjQxNSAxNy4yODhIMTAxLjYyVjE3LjI3MzNaTTcxLjMyMjQgMTkuMTkzOUM3MC44MzY2IDE4LjIzMjQgNzAuNTc2MyAxNy4xNzUyIDcwLjU2MDcgMTYuMTAwOFY4Ljg0NTUzSDc2LjA5MTRWMTUuOTk4MkM3Ni4wOTE0IDE2LjQ0NjIgNzYuMjcxNiAxNi44NzU4IDc2LjU5MjMgMTcuMTkyNkM3Ni45MTMgMTcuNTA5NCA3Ny4zNDggMTcuNjg3NCA3Ny44MDE1IDE3LjY4NzRDNzguMjU1IDE3LjY4NzQgNzguNjkgMTcuNTA5NCA3OS4wMTA3IDE3LjE5MjZDNzkuMzMxNCAxNi44NzU4IDc5LjUxMTYgMTYuNDQ2MiA3OS41MTE2IDE1Ljk5ODJWOC44NDU1M0g4NS4wNDZWMzJINzkuNTExNlYyMi45NTI5Qzc4LjQ1NDQgMjMuMjA2MSA3Ny4zNTMgMjMuMjIwOSA3Ni4yODkzIDIyLjk5NjJDNzUuMjI1NSAyMi43NzE0IDc0LjIyNjYgMjIuMzEyOSA3My4zNjY4IDIxLjY1NDdDNzIuNTA2OSAyMC45OTY0IDcxLjgwODIgMjAuMTU1NCA3MS4zMjI0IDE5LjE5MzlaTTEzMC4wMjcgMTguOTc3MkMxMjkuNDMgMTguOTc3MiAxMjguODQ3IDE4LjgwMjUgMTI4LjM1MSAxOC40NzUyQzEyNy44NTUgMTguMTQ3OCAxMjcuNDY5IDE3LjY4MjUgMTI3LjI0IDE3LjEzODJDMTI3LjAxMiAxNi41OTM4IDEyNi45NTIgMTUuOTk0OSAxMjcuMDY5IDE1LjQxN0MxMjcuMTg1IDE0LjgzOTEgMTI3LjQ3MiAxNC4zMDgzIDEyNy44OTQgMTMuODkxN0MxMjguMzE2IDEzLjQ3NSAxMjguODUzIDEzLjE5MTMgMTI5LjQzOCAxMy4wNzY0QzEzMC4wMjMgMTIuOTYxNCAxMzAuNjMgMTMuMDIwNCAxMzEuMTgxIDEzLjI0NTlDMTMxLjczMiAxMy40NzE0IDEzMi4yMDMgMTMuODUzMiAxMzIuNTM0IDE0LjM0MzFDMTMyLjg2NiAxNC44MzMgMTMzLjA0MiAxNS40MDkgMTMzLjA0MiAxNS45OTgyQzEzMy4wNDIgMTYuNzg4MyAxMzIuNzI1IDE3LjU0NiAxMzIuMTU5IDE4LjEwNDdDMTMxLjU5NCAxOC42NjM0IDEzMC44MjcgMTguOTc3MiAxMzAuMDI3IDE4Ljk3NzJaTTEzMy41NTggOC44NDU1M0MxMzIuMzMgOC4yNTU5NCAxMzAuOTcxIDcuOTg0MzIgMTI5LjYwOCA4LjA1NjE5QzEyOC4yNDUgOC4xMjgwNiAxMjYuOTIyIDguNTQxMDYgMTI1Ljc2NSA5LjI1NjM4QzEyNC42MDggOS45NzE3MSAxMjMuNjU0IDEwLjk2NTkgMTIyLjk5MiAxMi4xNDU1QzEyMi4zMzEgMTMuMzI1MSAxMjEuOTg0IDE0LjY1MTUgMTIxLjk4NCAxNkMxMjEuOTg0IDE3LjM0ODUgMTIyLjMzMSAxOC42NzQ5IDEyMi45OTIgMTkuODU0NUMxMjMuNjU0IDIxLjAzNDEgMTI0LjYwOCAyMi4wMjgzIDEyNS43NjUgMjIuNzQzNkMxMjYuOTIyIDIzLjQ1ODkgMTI4LjI0NSAyMy44NzE5IDEyOS42MDggMjMuOTQzOEMxMzAuOTcxIDI0LjAxNTcgMTMyLjMzIDIzLjc0NDEgMTMzLjU1OCAyMy4xNTQ1SDEzOC4wOTFWOC44NjM4NUwxMzMuNTU4IDguODQ1NTNaTTEwOS44NDcgOC42MDE2M0MxMTAuNzI2IDguMjQzNTEgMTExLjY2NyA4LjA1OTkzIDExMi42MTggOC4wNjEzOEMxMTQuNTM1IDguMDY0MjggMTE2LjM3MyA4LjgxNzUyIDExNy43MjkgMTAuMTU2MUMxMTkuMDg0IDExLjQ5NDcgMTE5Ljg0OCAxMy4zMDk1IDExOS44NTIgMTUuMjAzVjIzLjEwNjhIMTE0LjMxN1YxNS4yMDNDMTE0LjMxNyAxNC43NTUgMTE0LjEzNyAxNC4zMjU0IDExMy44MTYgMTQuMDA4NkMxMTMuNDk2IDEzLjY5MTggMTEzLjA2MSAxMy41MTM4IDExMi42MDcgMTMuNTEzOEMxMTIuMTU0IDEzLjUxMzggMTExLjcxOSAxMy42OTE4IDExMS4zOTggMTQuMDA4NkMxMTEuMDc3IDE0LjMyNTQgMTEwLjg5NyAxNC43NTUgMTEwLjg5NyAxNS4yMDNWMjMuMTA2OEgxMDUuMzY2VjE1LjIwM0MxMDUuMzY4IDE0LjI2MzcgMTA1LjU1NyAxMy4zMzM5IDEwNS45MjIgMTIuNDY2N0MxMDYuMjg3IDExLjU5OTQgMTA2LjgyMiAxMC44MTE3IDEwNy40OTUgMTAuMTQ4NkMxMDguMTY4IDkuNDg1NCAxMDguOTY3IDguOTU5NzUgMTA5Ljg0NyA4LjYwMTYzWk0yNS45NTQ3IDEzLjg5MTRMMjQuMjc4MSAxMi4yMzE1QzIzLjg4OTMgMTEuNzgxOSAyMy42ODY4IDExLjIwMzkgMjMuNzExMSAxMC42MTMxQzIzLjczNTQgMTAuMDIyMyAyMy45ODQ4IDkuNDYyNDIgMjQuNDA5MiA5LjA0NTVDMjQuODMzNiA4LjYyODU3IDI1LjQwMTcgOC4zODU0IDI1Ljk5OTkgOC4zNjQ2NkMyNi41OTgxIDguMzQzOTEgMjcuMTgyMSA4LjU0NzE0IDI3LjYzNTEgOC45MzM2NEwyOS4zMjI5IDEwLjU3MTZMMzQuNTQ5NSA1LjQwMTI5TDM0Ljc0OTggNS4yMDM0MkwzMy4xMTAyIDMuNTgzODJMMzMuMDY5NCAzLjU0MzUxQzMxLjk5MjcgMi40Nzg4NSAzMC42ODUyIDEuNjY5NzYgMjkuMjQ1NiAxLjE3NzMzQzI3LjgwNiAwLjY4NDg5NiAyNi4yNzIgMC41MjE5OTIgMjQuNzU5NCAwLjcwMDkxOEMyMy4yNDY3IDAuODc5ODQ0IDIxLjc5NSAxLjM5NTkyIDIwLjUxMzggMi4yMTAxOUMxOS4yMzI2IDMuMDI0NDUgMTguMTU1NSA0LjExNTYxIDE3LjM2MzcgNS40MDEyOUwxNS40ODMgMy41NDM1MUMxNC43NjE4IDIuODI5NzEgMTMuNzgzMiAyLjQyODEyIDEyLjc2MjMgMi40MjcwOEMxMS43NDE1IDIuNDI2MDUgMTAuNzYyIDIuODI1NjcgMTAuMDM5NCAzLjUzODAxQzkuMzE2NzcgNC4yNTAzNiA4LjkxMDIzIDUuMjE3MDkgOC45MDkxOCA2LjIyNTUzQzguOTA4MTQgNy4yMzM5NyA5LjMxMjY4IDguMjAxNTEgMTAuMDMzOCA4LjkxNTMyTDEzLjYxMzQgMTIuNDQ3N0wxOC44NCAxNy41OTk2TDIwLjUyMDQgMTkuMjU1OUwyMC43MjA3IDE5LjA1OEwyNS45MTM5IDEzLjkyOEwyNS45NTQ3IDEzLjg5MTRaTTQzLjcyMyAxNC4wNjczTDQ3LjI5ODkgMTcuNTk5NkM0OC4wMDQgMTguMzE0NiA0OC4zOTU3IDE5LjI3NTIgNDguMzg5MSAyMC4yNzM0QzQ4LjM4MjUgMjEuMjcxNiA0Ny45NzgxIDIyLjIyNzEgNDcuMjYzNiAyMi45MzI5QzQ2LjU0OSAyMy42Mzg3IDQ1LjU4MTggMjQuMDM4MiA0NC41NzEzIDI0LjA0NDdDNDMuNTYwOCAyNC4wNTEyIDQyLjU4ODQgMjMuNjY0MyA0MS44NjQ1IDIyLjk2NzhMMzkuOTgzOCAyMS4xMUMzOS4xOTA3IDIyLjM5NDYgMzguMTEyNyAyMy40ODQ3IDM2LjgzMTIgMjQuMjk4MUMzNS41NDk3IDI1LjExMTUgMzQuMDk4MSAyNS42MjcxIDMyLjU4NTYgMjUuODA1OUMzMS4wNzMyIDI1Ljk4NDggMjkuNTM5NCAyNS44MjIzIDI4LjA5OTcgMjUuMzMwN0MyNi42NjAxIDI0LjgzOSAyNS4zNTIxIDI0LjAzMTEgMjQuMjc0NCAyMi45Njc4TDI0LjIzNzMgMjIuOTMxMUwyMi41OTc3IDIxLjMwNzlMMjIuNzk4IDIxLjExTDI4LjAxNzIgMTUuOTM5N0wyOS42OTM5IDE3LjU5OTZDMzAuMTM5NSAxOC4wNDE4IDMwLjc0NDcgMTguMjkxIDMxLjM3NjQgMTguMjkyNEMzMi4wMDgxIDE4LjI5MzcgMzIuNjE0NCAxOC4wNDcyIDMzLjA2MiAxNy42MDY5QzMzLjUwOTcgMTcuMTY2NyAzMy43NjE5IDE2LjU2ODkgMzMuNzYzMyAxNS45NDQ5QzMzLjc2NDcgMTUuMzIwOSAzMy41MTUxIDE0LjcyMiAzMy4wNjk0IDE0LjI3OThMMzEuMzg5MSAxMi42MjM1TDMxLjQyOTkgMTIuNTgzMkwzNi42MjMxIDcuNDUzMjhMMzYuODIzNCA3LjI1MTc0TDM4LjUwMzggOC45MTE2NUw0My43MjMgMTQuMDY3M1oiIGZpbGw9IiMwMDZDNEQiLz4KPC9zdmc+Cg==";
var _hoisted_1$4 = { class: "hy-account-header" };
var _hoisted_2$4 = createBaseVNode("div", { class: "header-left" }, [
  createBaseVNode("img", {
    class: "hyena-logo",
    src: _imports_0$1
  })
], -1);
var _hoisted_3$4 = { class: "header-middle" };
var _hoisted_4$4 = {
  key: 0,
  class: "flex justify-center align-items-center"
};
var _hoisted_5$3 = ["src"];
var _hoisted_6$3 = { class: "ml-3 fw-bold app-name" };
var _hoisted_7$2 = { class: "header-right" };
var _sfc_main$4 = defineComponent({
  props: {
    middleLogoSrc: null,
    appName: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$4, [
        _hoisted_2$4,
        createBaseVNode("div", _hoisted_3$4, [
          __props.middleLogoSrc && __props.appName ? (openBlock(), createElementBlock("div", _hoisted_4$4, [
            createBaseVNode("img", {
              src: __props.middleLogoSrc,
              class: "middle-logo"
            }, null, 8, _hoisted_5$3),
            createBaseVNode("span", _hoisted_6$3, toDisplayString(__props.appName), 1)
          ])) : createCommentVNode("", true)
        ]),
        createBaseVNode("div", _hoisted_7$2, [
          renderSlot(_ctx.$slots, "right")
        ])
      ]);
    };
  }
});
var _hoisted_1$3 = { class: "hy-change-password-form ta-center" };
var _hoisted_2$3 = { class: "title fw-bold flex justify-center align-items-center mb-5" };
var _hoisted_3$3 = { class: "current-password-box" };
var _hoisted_4$3 = { class: "new-password-box" };
var _hoisted_5$2 = { class: "confirm-password-box" };
var _hoisted_6$2 = { class: "py-3 flex justify-center align-items-center" };
var _hoisted_7$1 = { class: "rule ta-left" };
var _hoisted_8$1 = { class: "rule ta-left" };
var _sfc_main$3 = defineComponent({
  props: {
    newPassword: null,
    confirmPassword: null,
    isNewPasswordPass: { type: Boolean },
    isConfirmPasswordPass: { type: Boolean },
    title: { default: "Change Password" },
    isNeedCurrentPassword: { type: Boolean },
    currentPassword: null,
    isShowGoBack: { type: Boolean },
    labels: { default: () => ({
      currentPasswordLabel: "Current Password",
      currentPasswordPlaceholder: "Type your current password",
      newPasswordLabel: "New Password",
      newPasswordPlaceholder: "Type your new password",
      confirmPasswordLabel: "Enter New Password Again",
      confirmPasswordPlaceholder: "Type new password again",
      passwordRule: "The new password at least 8 characters long",
      confirmPasswordRule: "The new password must match",
      changePassword: "Change Password",
      goBack: "Go Back"
    }) }
  },
  emits: ["update:currentPassword", "update:newPassword", "update:confirmPassword", "handleChangePassword", "goBack"],
  setup(__props, { emit }) {
    const props2 = __props;
    const showStatus = ref({
      isShowCurrentPassword: false,
      isShowNewPassword: false,
      isShowConfirmPassword: false
    });
    const isAllValidationPass = computed(() => props2.isNewPasswordPass && props2.isConfirmPasswordPass);
    const handleEnterKeyup = () => {
      if (isAllValidationPass.value) {
        emit("handleChangePassword");
      }
    };
    return (_ctx, _cache) => {
      var _a2;
      const _directive_throttle = resolveDirective("throttle");
      return openBlock(), createElementBlock("div", _hoisted_1$3, [
        createBaseVNode("div", _hoisted_2$3, toDisplayString(__props.title), 1),
        createBaseVNode("div", null, [
          createBaseVNode("div", _hoisted_3$3, [
            __props.isNeedCurrentPassword ? (openBlock(), createBlock(unref(_sfc_main$e), {
              key: 0,
              "is-outlined": "",
              required: "",
              type: showStatus.value.isShowCurrentPassword ? "text" : "password",
              label: __props.labels.currentPasswordLabel,
              placeholder: __props.labels.currentPasswordPlaceholder,
              "model-value": (_a2 = __props.currentPassword) != null ? _a2 : "",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = (value) => emit("update:currentPassword", value)),
              onKeyup: withKeys(handleEnterKeyup, ["enter"])
            }, null, 8, ["type", "label", "placeholder", "model-value", "onKeyup"])) : createCommentVNode("", true),
            createVNode(unref(_sfc_main$1w), {
              class: "password-eye",
              icon: showStatus.value.isShowCurrentPassword ? unref(Icons).VISIBILITY : unref(Icons).VISIBILITY_OFF,
              onClick: _cache[1] || (_cache[1] = ($event) => showStatus.value.isShowCurrentPassword = !showStatus.value.isShowCurrentPassword)
            }, null, 8, ["icon"])
          ]),
          createBaseVNode("div", _hoisted_4$3, [
            createVNode(unref(_sfc_main$e), {
              "is-outlined": "",
              required: "",
              label: __props.labels.newPasswordLabel,
              placeholder: __props.labels.newPasswordPlaceholder,
              type: showStatus.value.isShowNewPassword ? "text" : "password",
              "model-value": __props.newPassword,
              "onUpdate:modelValue": _cache[2] || (_cache[2] = (value) => emit("update:newPassword", value)),
              onKeyup: withKeys(handleEnterKeyup, ["enter"])
            }, null, 8, ["label", "placeholder", "type", "model-value", "onKeyup"]),
            createVNode(unref(_sfc_main$1w), {
              class: "password-eye",
              icon: showStatus.value.isShowNewPassword ? unref(Icons).VISIBILITY : unref(Icons).VISIBILITY_OFF,
              onClick: _cache[3] || (_cache[3] = ($event) => showStatus.value.isShowNewPassword = !showStatus.value.isShowNewPassword)
            }, null, 8, ["icon"])
          ]),
          createBaseVNode("div", _hoisted_5$2, [
            createVNode(unref(_sfc_main$e), {
              "is-outlined": "",
              required: "",
              label: __props.labels.confirmPasswordLabel,
              placeholder: __props.labels.confirmPasswordPlaceholder,
              type: showStatus.value.isShowConfirmPassword ? "text" : "password",
              "model-value": __props.confirmPassword,
              "onUpdate:modelValue": _cache[4] || (_cache[4] = (value) => emit("update:confirmPassword", value)),
              onKeyup: withKeys(handleEnterKeyup, ["enter"])
            }, null, 8, ["label", "placeholder", "type", "model-value", "onKeyup"]),
            createVNode(unref(_sfc_main$1w), {
              class: "password-eye",
              icon: showStatus.value.isShowConfirmPassword ? unref(Icons).VISIBILITY : unref(Icons).VISIBILITY_OFF,
              onClick: _cache[5] || (_cache[5] = ($event) => showStatus.value.isShowConfirmPassword = !showStatus.value.isShowConfirmPassword)
            }, null, 8, ["icon"])
          ]),
          createBaseVNode("div", _hoisted_6$2, [
            createBaseVNode("div", _hoisted_7$1, [
              createVNode(unref(_sfc_main$1w), {
                class: normalizeClass(["mr-3", __props.isNewPasswordPass ? "check-icon-bright" : "check-icon-dark"]),
                icon: unref(Icons).CHECK_CIRCLE_FILLED
              }, null, 8, ["icon", "class"]),
              createBaseVNode("span", null, toDisplayString(__props.labels.passwordRule), 1)
            ]),
            createBaseVNode("div", _hoisted_8$1, [
              createVNode(unref(_sfc_main$1w), {
                class: normalizeClass(["mr-3", __props.isConfirmPasswordPass ? "check-icon-bright" : "check-icon-dark"]),
                icon: unref(Icons).CHECK_CIRCLE_FILLED
              }, null, 8, ["icon", "class"]),
              createBaseVNode("span", null, toDisplayString(__props.labels.confirmPasswordRule), 1)
            ])
          ]),
          withDirectives((openBlock(), createBlock(unref(_sfc_main$1u), {
            class: "w-100 mt-4",
            type: "filled",
            disabled: !unref(isAllValidationPass),
            onClick: _cache[6] || (_cache[6] = ($event) => emit("handleChangePassword"))
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(__props.labels.changePassword), 1)
            ]),
            _: 1
          }, 8, ["disabled"])), [
            [_directive_throttle]
          ]),
          __props.isShowGoBack ? (openBlock(), createElementBlock("p", {
            key: 0,
            class: "mt-4 fs-body go-back",
            onClick: _cache[7] || (_cache[7] = ($event) => emit("goBack"))
          }, toDisplayString(__props.labels.goBack), 1)) : createCommentVNode("", true)
        ])
      ]);
    };
  }
});
var _hoisted_1$2 = { class: "hy-login-form ta-center p-5 pb-4" };
var _hoisted_2$2 = { class: "hy-login-form-header fw-bold" };
var _hoisted_3$2 = { class: "project-title flex justify-center align-items-center" };
var _hoisted_4$2 = ["src"];
var _hoisted_5$1 = { class: "ml-3" };
var _hoisted_6$1 = { class: "my-4 fs-title-lg" };
var _hoisted_7 = { class: "mt-4 password-box" };
var _hoisted_8 = createBaseVNode("small", { class: "copyright-text" }, "Hyena, Inc. All Rights Reserved \xA92024", -1);
var _sfc_main$2 = defineComponent({
  props: {
    username: null,
    password: null,
    isUsernameError: { type: Boolean },
    isPasswordError: { type: Boolean },
    logoPath: null,
    microsoftLoginUrl: null,
    title: null,
    labels: { default: () => ({
      login: "login",
      microsoftButton: "Continue with Microsoft",
      usernameLabel: "Email",
      usernamePlaceholder: "Type your email",
      passwordLabel: "Password",
      passwordPlaceholder: "Type your password",
      forgetPassword: "Forgot your password?"
    }) }
  },
  emits: ["handleLogin", "microsftLoginCallback", "update:username", "update:password", "handleForgetPassword"],
  setup(__props, { emit }) {
    const props2 = __props;
    const isShowPassword = ref(false);
    const handleMicrosoftLogin = () => {
      window.location.href = props2.microsoftLoginUrl;
    };
    const checkMicrosoftLogin = () => {
      const hash = window.location.hash;
      if (hash.length > 0) {
        const hashs = hash.split(/[#&=]/);
        const accessTokenIndex = hashs.indexOf("access_token");
        if (accessTokenIndex > -1) {
          const token = hashs[accessTokenIndex + 1];
          emit("microsftLoginCallback", token);
        }
      }
    };
    onMounted(() => {
      checkMicrosoftLogin();
    });
    return (_ctx, _cache) => {
      const _directive_throttle = resolveDirective("throttle");
      return openBlock(), createElementBlock("div", _hoisted_1$2, [
        createBaseVNode("div", _hoisted_2$2, [
          createBaseVNode("div", _hoisted_3$2, [
            createBaseVNode("img", {
              src: __props.logoPath,
              class: "platform-icon"
            }, null, 8, _hoisted_4$2),
            createBaseVNode("span", _hoisted_5$1, toDisplayString(__props.title), 1)
          ]),
          createBaseVNode("div", _hoisted_6$1, toDisplayString(__props.labels.login), 1)
        ]),
        createBaseVNode("div", null, [
          props2.microsoftLoginUrl ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
            createVNode(unref(_sfc_main$1u), {
              class: "w-100",
              type: "outlined",
              icon: unref(Icons).MICROSOFT,
              onClick: handleMicrosoftLogin
            }, {
              default: withCtx(() => [
                createTextVNode(toDisplayString(__props.labels.microsoftButton), 1)
              ]),
              _: 1
            }, 8, ["icon"]),
            createVNode(_sfc_main$1s, {
              label: "or",
              class: "my-4"
            })
          ], 64)) : createCommentVNode("", true),
          createVNode(unref(_sfc_main$e), {
            class: "mt-4",
            label: __props.labels.usernameLabel,
            placeholder: __props.labels.usernamePlaceholder,
            "is-outlined": "",
            required: "",
            variant: __props.isUsernameError ? unref(Variant).ERROR : void 0,
            note: __props.isUsernameError ? "Please fill in valid email format." : void 0,
            "model-value": __props.username,
            "onUpdate:modelValue": _cache[0] || (_cache[0] = (username) => emit("update:username", username)),
            onKeyup: _cache[1] || (_cache[1] = withKeys(($event) => emit("handleLogin"), ["enter"]))
          }, null, 8, ["label", "placeholder", "variant", "note", "model-value"]),
          createBaseVNode("div", _hoisted_7, [
            createVNode(unref(_sfc_main$e), {
              label: __props.labels.passwordLabel,
              placeholder: __props.labels.passwordPlaceholder,
              "is-outlined": "",
              required: "",
              type: isShowPassword.value ? "text" : "password",
              variant: __props.isPasswordError ? unref(Variant).ERROR : void 0,
              note: __props.isPasswordError ? "At least 8 characters." : void 0,
              "model-value": __props.password,
              "onUpdate:modelValue": _cache[2] || (_cache[2] = (password) => emit("update:password", password)),
              onKeyup: _cache[3] || (_cache[3] = withKeys(($event) => emit("handleLogin"), ["enter"]))
            }, null, 8, ["label", "placeholder", "type", "variant", "note", "model-value"]),
            createVNode(unref(_sfc_main$1w), {
              class: "password-eye",
              icon: isShowPassword.value ? unref(Icons).VISIBILITY : unref(Icons).VISIBILITY_OFF,
              onClick: _cache[4] || (_cache[4] = ($event) => isShowPassword.value = !isShowPassword.value)
            }, null, 8, ["icon"])
          ]),
          withDirectives((openBlock(), createBlock(unref(_sfc_main$1u), {
            class: "w-100 mt-2",
            type: "filled",
            onClick: _cache[5] || (_cache[5] = ($event) => emit("handleLogin"))
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(__props.labels.login), 1)
            ]),
            _: 1
          })), [
            [_directive_throttle]
          ]),
          createBaseVNode("p", {
            class: "my-4 fs-body forget-password",
            onClick: _cache[6] || (_cache[6] = ($event) => emit("handleForgetPassword"))
          }, toDisplayString(__props.labels.forgetPassword), 1)
        ]),
        _hoisted_8
      ]);
    };
  }
});
var _imports_0 = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTQiIGhlaWdodD0iOTQiIHZpZXdCb3g9IjAgMCA5NCA5NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTguODA4MjEgNTYuOTU4TDY0LjE1MTUgMjUuMDY1MkM2NC44ODU5IDI0LjY0MiA2NS43ODA3IDI1LjI2NzEgNjUuNjM2MiAyNi4xMDIyTDU3LjIwMjYgNzQuODI5MUM1Ny4wOTY4IDc1LjQ0MDYgNTYuNDY1NCA3NS44MDkxIDU1Ljg4MSA3NS42MDAzTDQzLjY1MjMgNzEuMjMzQzQzLjI1OTkgNzEuMDkyOCA0Mi44MjE3IDcxLjIxMDcgNDIuNTUyNiA3MS41Mjg4TDMzLjc2MzQgODEuOTE2QzMzLjE2MTcgODIuNjI3MSAzMiA4Mi4yMDE2IDMyIDgxLjI3MDFWNjguMjk2NEMzMiA2OC4xMDMgMzIuMDU2MSA2Ny45MTM3IDMyLjE2MTYgNjcuNzUxNEw0NSA0OEwyNS40NTQzIDY0LjYxMzhDMjUuMTc0NCA2NC44NTE3IDI0Ljc4NjYgNjQuOTE3IDI0LjQ0NDIgNjQuNzgzOUw4Ljk0NTA2IDU4Ljc1NjRDOC4xNjI1NCA1OC40NTIxIDguMDgwNzUgNTcuMzc3MiA4LjgwODIxIDU2Ljk1OFoiIGZpbGw9IiMwMDZDNEQiLz4KPHBhdGggZD0iTTEzIDEwTDE1LjcwMDkgMTcuMjk5MUwyMyAyMEwxNS43MDA5IDIyLjcwMDlMMTMgMzBMMTAuMjk5MSAyMi43MDA5TDMgMjBMMTAuMjk5MSAxNy4yOTkxTDEzIDEwWiIgZmlsbD0iIzAwNkM0RCIvPgo8cGF0aCBkPSJNODEgNTRMODMuNzAwOSA2MS4yOTkxTDkxIDY0TDgzLjcwMDkgNjYuNzAwOUw4MSA3NEw3OC4yOTkxIDY2LjcwMDlMNzEgNjRMNzguMjk5MSA2MS4yOTkxTDgxIDU0WiIgZmlsbD0iIzAwNkM0RCIvPgo8L3N2Zz4K";
var _hoisted_1$1 = { class: "hy-resend-email-form ta-center" };
var _hoisted_2$1 = { class: "form-header" };
var _hoisted_3$1 = { class: "form-title fw-bold flex justify-center align-items-center" };
var _hoisted_4$1 = { class: "description my-4 fs-title" };
var _hoisted_5 = createBaseVNode("img", {
  src: _imports_0,
  class: "resend-image"
}, null, -1);
var _hoisted_6 = { class: "m-0" };
var _sfc_main$1 = defineComponent({
  props: {
    username: null,
    title: { default: "Forgot your password?" },
    description: { default: "Check your email We've sent an email to" },
    labels: { default: () => ({
      didNotReceiveIt: "Didn't receive it?",
      resendEmail: "Resend Email",
      backToLogin: "Back to login"
    }) }
  },
  emits: ["resendEmail", "backToLogin"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      const _directive_throttle = resolveDirective("throttle");
      return openBlock(), createElementBlock("div", _hoisted_1$1, [
        createBaseVNode("div", _hoisted_2$1, [
          createBaseVNode("div", _hoisted_3$1, toDisplayString(__props.title), 1),
          createBaseVNode("div", _hoisted_4$1, toDisplayString(`${__props.description} ${__props.username}`), 1)
        ]),
        _hoisted_5,
        createBaseVNode("div", null, [
          createBaseVNode("p", _hoisted_6, toDisplayString(__props.labels.didNotReceiveIt), 1),
          withDirectives((openBlock(), createBlock(unref(_sfc_main$1u), {
            class: "w-100 mt-4",
            type: "filled",
            onClick: _cache[0] || (_cache[0] = ($event) => emit("resendEmail"))
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(__props.labels.resendEmail), 1)
            ]),
            _: 1
          })), [
            [_directive_throttle]
          ]),
          createBaseVNode("p", {
            class: "mt-4 fs-body back-to-login",
            onClick: _cache[1] || (_cache[1] = ($event) => emit("backToLogin"))
          }, toDisplayString(__props.labels.backToLogin), 1)
        ])
      ]);
    };
  }
});
var _hoisted_1 = { class: "hy-forget-password-form ta-center" };
var _hoisted_2 = { class: "form-header" };
var _hoisted_3 = { class: "form-title fw-bold flex justify-center align-items-center" };
var _hoisted_4 = { class: "description my-4 fs-title" };
var _sfc_main = defineComponent({
  props: {
    modelValue: null,
    isUsernameError: { type: Boolean },
    errorNote: null,
    title: { default: "Forgot your password?" },
    description: { default: "Enter your Email below and we will send a link to reset your password." },
    labels: { default: () => ({
      usernameLabel: "Email",
      usernamePlaceholder: "Type your email",
      send: "Send",
      backToLogin: "Back to login"
    }) }
  },
  emits: ["update:modelValue", "sendEmail", "backToLogin"],
  setup(__props, { emit }) {
    return (_ctx, _cache) => {
      const _directive_throttle = resolveDirective("throttle");
      return openBlock(), createElementBlock("div", _hoisted_1, [
        createBaseVNode("div", _hoisted_2, [
          createBaseVNode("div", _hoisted_3, toDisplayString(__props.title), 1),
          createBaseVNode("div", _hoisted_4, toDisplayString(__props.description), 1)
        ]),
        createBaseVNode("div", null, [
          createVNode(unref(_sfc_main$e), {
            class: "mt-4",
            label: __props.labels.usernameLabel,
            placeholder: __props.labels.usernamePlaceholder,
            "is-outlined": "",
            required: "",
            variant: __props.isUsernameError ? unref(Variant).ERROR : void 0,
            note: __props.errorNote || void 0,
            "model-value": __props.modelValue,
            "onUpdate:modelValue": _cache[0] || (_cache[0] = (username) => emit("update:modelValue", username)),
            onKeyup: _cache[1] || (_cache[1] = withKeys(($event) => emit("sendEmail"), ["enter"]))
          }, null, 8, ["label", "placeholder", "variant", "note", "model-value"]),
          withDirectives((openBlock(), createBlock(unref(_sfc_main$1u), {
            class: "w-100 mt-4",
            type: "filled",
            onClick: _cache[2] || (_cache[2] = ($event) => emit("sendEmail"))
          }, {
            default: withCtx(() => [
              createTextVNode(toDisplayString(__props.labels.send), 1)
            ]),
            _: 1
          })), [
            [_directive_throttle]
          ]),
          createBaseVNode("p", {
            class: "mt-4 fs-body back-to-login",
            onClick: _cache[3] || (_cache[3] = ($event) => emit("backToLogin"))
          }, toDisplayString(__props.labels.backToLogin), 1)
        ])
      ]);
    };
  }
});
var useSnackbar = (variant, message2) => {
  let textColorClass = "";
  switch (variant) {
    case "error":
      textColorClass = "text-error-dark";
      break;
    case "warning":
      textColorClass = "text-custom1-container";
      break;
    case "success":
      textColorClass = "text-on-surface-dark";
      break;
  }
  ElNotification({
    type: variant,
    message: message2,
    showClose: variant === "success" ? false : true,
    duration: 3e3,
    appendTo: document.body.querySelector("#app"),
    customClass: `hy-snackbar ${textColorClass}`,
    position: "top-right"
  });
};
var queue = ref([]);
var current = computed(() => {
  if (queue.value.length) {
    return queue.value[0].content;
  }
  return false;
});
var getRequestRemover = (req) => {
  return () => {
    const i2 = queue.value.indexOf(req);
    if (i2 > -1) {
      queue.value.splice(i2, 1);
    }
  };
};
var useLoading = () => {
  const start = (content) => {
    const request = { content };
    queue.value.push(request);
    const remover = getRequestRemover(request);
    return remover;
  };
  const clear = () => {
    queue.value = [];
  };
  return { start, current, clear };
};
export {
  _sfc_main$4 as AccountHeader,
  _sfc_main$5 as AccountLayout,
  Actions,
  _sfc_main$9 as Alert,
  _sfc_main$1y as Avatar,
  BackgroundMask,
  _sfc_main$D as BreadCrumb,
  _sfc_main$1u as Button,
  _sfc_main$3 as ChangePasswordForm,
  _sfc_main$n as ColumnPanel,
  _sfc_main$J as DatePicker,
  _sfc_main$7 as Dialog,
  Dialogs,
  _sfc_main$8 as Drawer,
  _sfc_main$p as FloatingFilter,
  _sfc_main as ForgetPasswordForm,
  _sfc_main$m as FormGroup,
  _sfc_main$l as FormList,
  _sfc_main$b as FormMoreButton,
  _sfc_main$1r as GoTop,
  _sfc_main$1w as Icon,
  _sfc_main$r as IconCellRenderer,
  Icons,
  _sfc_main$1p as ImageUploader,
  _sfc_main$e as Input,
  _sfc_main$o as InputFilter,
  _sfc_main$I as LanguageSelect,
  _sfc_main$1v as Link,
  ListGroup,
  _sfc_main$k as ListItem,
  _sfc_main$i as ListOption,
  _sfc_main$H as LoadingDot,
  _sfc_main$1t as LoadingOverlay,
  _sfc_main$E as Login,
  _sfc_main$2 as LoginForm,
  _sfc_main$v as NoData,
  _sfc_main$a as OptionalButton,
  PageFooter,
  _sfc_main$F as PageHeader,
  _sfc_main$s as Pagination,
  _sfc_main$L as Popover,
  _sfc_main$f as RadioListGroup,
  _sfc_main$1 as ResendEmailForm,
  _sfc_main$d as SegmentedButtons,
  _sfc_main$h as Select,
  _sfc_main$g as SelectGroup,
  _sfc_main$1o as SelectOption,
  _sfc_main$1n as SelectorButton,
  _sfc_main$C as Sidebar,
  _sfc_main$B as SidebarLink,
  _sfc_main$z as SidebarLinkList,
  _sfc_main$A as SidebarSection,
  _sfc_main$y as SidebarUserInfo,
  _sfc_main$c as Switch,
  SwitchSize,
  _sfc_main$w as TabPane,
  _sfc_main$t as Table,
  _sfc_main$x as Tabs,
  _sfc_main$1x as Tag,
  _sfc_main$q as TagCellRenderer,
  _sfc_main$1s as TextDivider,
  Tooltip,
  Variant,
  useLoading,
  useSnackbar
};
/*! Element Plus Icons Vue v2.0.9 */
/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v28.1.1
          * @link https://www.ag-grid.com/
          * @license MIT
          */
/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.1.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */
//# sourceMappingURL=hyena-design-system.js.map
